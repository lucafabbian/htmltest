var IL=Object.defineProperty,RL=Object.defineProperties;var QL=Object.getOwnPropertyDescriptors;var _w=Object.getOwnPropertySymbols;var PL=Object.prototype.hasOwnProperty,DL=Object.prototype.propertyIsEnumerable;var $p=(n,e,t)=>e in n?IL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Hi=(n,e)=>{for(var t in e||(e={}))PL.call(e,t)&&$p(n,t,e[t]);if(_w)for(var t of _w(e))DL.call(e,t)&&$p(n,t,e[t]);return n},wu=(n,e)=>RL(n,QL(e));var xw=(n,e,t)=>($p(n,typeof e!="symbol"?e+"":e,t),t);const LL=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}};LL();function Ue(){}function NL(n){return n&&typeof n=="object"&&typeof n.then=="function"}function Ek(n){return n()}function kw(){return Object.create(null)}function Xt(n){n.forEach(Ek)}function Ck(n){return typeof n=="function"}function gn(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Au;function gs(n,e){return Au||(Au=document.createElement("a")),Au.href=e,n===Au.href}function BL(n){return Object.keys(n).length===0}function Qc(n,...e){if(n==null)return Ue;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Sn(n){let e;return Qc(n,t=>e=t)(),e}function Ne(n,e,t){n.$$.on_destroy.push(Qc(e,t))}function Qr(n){return n==null?"":n}function qs(n,e,t){return n.set(t),e}function W(n,e){n.appendChild(e)}function Te(n,e,t){n.insertBefore(e,t||null)}function Se(n){n.parentNode.removeChild(n)}function Ar(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function Y(n){return document.createElement(n)}function ML(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Ae(n){return document.createTextNode(n)}function fe(){return Ae(" ")}function no(){return Ae("")}function Ie(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function $L(n){return function(e){return e.preventDefault(),n.call(this,e)}}function FL(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function Sw(n){return function(e){e.target===this&&n.call(this,e)}}function G(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Xr(n){return n===""?null:+n}function WL(n){return Array.from(n.childNodes)}function Ee(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function yt(n,e){n.value=e==null?"":e}function Dt(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function Th(n,e){for(let t=0;t<n.options.length;t+=1){const r=n.options[t];if(r.__value===e){r.selected=!0;return}}n.selectedIndex=-1}function Ik(n){const e=n.querySelector(":checked")||n.options[0];return e&&e.__value}function ln(n,e,t){n.classList[t?"add":"remove"](e)}class UL{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=ML(t.nodeName):this.e=Y(t.nodeName),this.t=t,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Te(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Se)}}let Gl;function vi(n){Gl=n}function d0(){if(!Gl)throw new Error("Function called outside component initialization");return Gl}function zL(n){d0().$$.on_mount.push(n)}function Rk(n){d0().$$.on_destroy.push(n)}function jL(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const Ol=[],Tw=[],ih=[],Ew=[],Qk=Promise.resolve();let eg=!1;function Pk(){eg||(eg=!0,Qk.then(p0))}function ta(){return Pk(),Qk}function Vl(n){ih.push(n)}const Fp=new Set;let _u=0;function p0(){const n=Gl;do{for(;_u<Ol.length;){const e=Ol[_u];_u++,vi(e),HL(e.$$)}for(vi(null),Ol.length=0,_u=0;Tw.length;)Tw.pop()();for(let e=0;e<ih.length;e+=1){const t=ih[e];Fp.has(t)||(Fp.add(t),t())}ih.length=0}while(Ol.length);for(;Ew.length;)Ew.pop()();eg=!1,Fp.clear(),vi(n)}function HL(n){if(n.fragment!==null){n.update(),Xt(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Vl)}}const sh=new Set;let Hs;function Gf(){Hs={r:0,c:[],p:Hs}}function Vf(){Hs.r||Xt(Hs.c),Hs=Hs.p}function Dn(n,e){n&&n.i&&(sh.delete(n),n.i(e))}function nr(n,e,t,r){if(n&&n.o){if(sh.has(n))return;sh.add(n),Hs.c.push(()=>{sh.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}}function m0(n,e){const t=e.token={};function r(i,s,o,a){if(e.token!==t)return;e.resolved=a;let l=e.ctx;o!==void 0&&(l=l.slice(),l[o]=a);const c=i&&(e.current=i)(l);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,f)=>{f!==s&&h&&(Gf(),nr(h,1,1,()=>{e.blocks[f]===h&&(e.blocks[f]=null)}),Vf())}):e.block.d(1),c.c(),Dn(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[s]=c),u&&p0()}if(NL(n)){const i=d0();if(n.then(s=>{vi(i),r(e.then,1,e.value,s),vi(null)},s=>{if(vi(i),r(e.catch,2,e.error,s),vi(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function g0(n,e,t){const r=e.slice(),{resolved:i}=n;n.current===n.then&&(r[n.value]=i),n.current===n.catch&&(r[n.error]=i),n.block.p(r,t)}const GL=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function es(n){n&&n.c()}function wi(n,e,t,r){const{fragment:i,on_mount:s,on_destroy:o,after_update:a}=n.$$;i&&i.m(e,t),r||Vl(()=>{const l=s.map(Ek).filter(Ck);o?o.push(...l):Xt(l),n.$$.on_mount=[]}),a.forEach(Vl)}function Ai(n,e){const t=n.$$;t.fragment!==null&&(Xt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function VL(n,e){n.$$.dirty[0]===-1&&(Ol.push(n),Pk(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function xn(n,e,t,r,i,s,o,a=[-1]){const l=Gl;vi(n);const c=n.$$={fragment:null,ctx:null,props:s,update:Ue,not_equal:i,bound:kw(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:kw(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=t?t(n,e.props||{},(h,f,...p)=>{const d=p.length?p[0]:f;return c.ctx&&i(c.ctx[h],c.ctx[h]=d)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](d),u&&VL(n,h)),f}):[],c.update(),u=!0,Xt(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const h=WL(e.target);c.fragment&&c.fragment.l(h),h.forEach(Se)}else c.fragment&&c.fragment.c();e.intro&&Dn(n.$$.fragment),wi(n,e.target,e.anchor,e.customElement),p0()}vi(l)}class kn{$destroy(){Ai(this,1),this.$destroy=Ue}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!BL(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Po=[];function XL(n,e){return{subscribe:Nt(n,e).subscribe}}function Nt(n,e=Ue){let t;const r=new Set;function i(a){if(gn(n,a)&&(n=a,t)){const l=!Po.length;for(const c of r)c[1](),Po.push(c,n);if(l){for(let c=0;c<Po.length;c+=2)Po[c][0](Po[c+1]);Po.length=0}}}function s(a){i(a(n))}function o(a,l=Ue){const c=[a,l];return r.add(c),r.size===1&&(t=e(i)||Ue),a(n),()=>{r.delete(c),r.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function kr(n,e,t){const r=!Array.isArray(n),i=r?[n]:n,s=e.length<2;return XL(t,o=>{let a=!1;const l=[];let c=0,u=Ue;const h=()=>{if(c)return;u();const p=e(r?l[0]:l,o);s?o(p):u=Ck(p)?p:Ue},f=i.map((p,d)=>Qc(p,m=>{l[d]=m,c&=~(1<<d),a&&h()},()=>{c|=1<<d}));return a=!0,h(),function(){Xt(f),u()}})}var $o=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function YL(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ZL=function(e){return qL(e)&&!KL(e)};function qL(n){return!!n&&typeof n=="object"}function KL(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||tN(n)}var JL=typeof Symbol=="function"&&Symbol.for,eN=JL?Symbol.for("react.element"):60103;function tN(n){return n.$$typeof===eN}function nN(n){return Array.isArray(n)?[]:{}}function Xl(n,e){return e.clone!==!1&&e.isMergeableObject(n)?na(nN(n),n,e):n}function rN(n,e,t){return n.concat(e).map(function(r){return Xl(r,t)})}function iN(n,e){if(!e.customMerge)return na;var t=e.customMerge(n);return typeof t=="function"?t:na}function sN(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(e){return n.propertyIsEnumerable(e)}):[]}function Cw(n){return Object.keys(n).concat(sN(n))}function Dk(n,e){try{return e in n}catch{return!1}}function oN(n,e){return Dk(n,e)&&!(Object.hasOwnProperty.call(n,e)&&Object.propertyIsEnumerable.call(n,e))}function aN(n,e,t){var r={};return t.isMergeableObject(n)&&Cw(n).forEach(function(i){r[i]=Xl(n[i],t)}),Cw(e).forEach(function(i){oN(n,i)||(Dk(n,i)&&t.isMergeableObject(e[i])?r[i]=iN(i,t)(n[i],e[i],t):r[i]=Xl(e[i],t))}),r}function na(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||rN,t.isMergeableObject=t.isMergeableObject||ZL,t.cloneUnlessOtherwiseSpecified=Xl;var r=Array.isArray(e),i=Array.isArray(n),s=r===i;return s?r?t.arrayMerge(n,e,t):aN(n,e,t):Xl(e,t)}na.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return na(r,i,t)},{})};var lN=na,cN=lN,tg=function(n,e){return tg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},tg(n,e)};function Xf(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");tg(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var gt=function(){return gt=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},gt.apply(this,arguments)};function Wp(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var lt;(function(n){n[n.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",n[n.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",n[n.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",n[n.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",n[n.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",n[n.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",n[n.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",n[n.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",n[n.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",n[n.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",n[n.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",n[n.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",n[n.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",n[n.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",n[n.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",n[n.INVALID_TAG=23]="INVALID_TAG",n[n.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",n[n.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",n[n.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(lt||(lt={}));var Bt;(function(n){n[n.literal=0]="literal",n[n.argument=1]="argument",n[n.number=2]="number",n[n.date=3]="date",n[n.time=4]="time",n[n.select=5]="select",n[n.plural=6]="plural",n[n.pound=7]="pound",n[n.tag=8]="tag"})(Bt||(Bt={}));var ra;(function(n){n[n.number=0]="number",n[n.dateTime=1]="dateTime"})(ra||(ra={}));function Iw(n){return n.type===Bt.literal}function uN(n){return n.type===Bt.argument}function Lk(n){return n.type===Bt.number}function Nk(n){return n.type===Bt.date}function Bk(n){return n.type===Bt.time}function Mk(n){return n.type===Bt.select}function $k(n){return n.type===Bt.plural}function hN(n){return n.type===Bt.pound}function Fk(n){return n.type===Bt.tag}function Wk(n){return!!(n&&typeof n=="object"&&n.type===ra.number)}function ng(n){return!!(n&&typeof n=="object"&&n.type===ra.dateTime)}var Uk=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,fN=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function dN(n){var e={};return n.replace(fN,function(t){var r=t.length;switch(t[0]){case"G":e.era=r===4?"long":r===5?"narrow":"short";break;case"y":e.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=r===4?"short":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][r-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][r-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][r-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][r-1];break;case"s":e.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var pN=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function mN(n){if(n.length===0)throw new Error("Number skeleton cannot be empty");for(var e=n.split(pN).filter(function(f){return f.length>0}),t=[],r=0,i=e;r<i.length;r++){var s=i[r],o=s.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var a=o[0],l=o.slice(1),c=0,u=l;c<u.length;c++){var h=u[c];if(h.length===0)throw new Error("Invalid number skeleton")}t.push({stem:a,options:l})}return t}function gN(n){return n.replace(/^(.*?)-/,"")}var Rw=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,zk=/^(@+)?(\+|#+)?[rs]?$/g,yN=/(\*)(0+)|(#+)(0+)|(0+)/g,jk=/^(0+)$/;function Qw(n){var e={};return n[n.length-1]==="r"?e.roundingPriority="morePrecision":n[n.length-1]==="s"&&(e.roundingPriority="lessPrecision"),n.replace(zk,function(t,r,i){return typeof i!="string"?(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length):i==="+"?e.minimumSignificantDigits=r.length:r[0]==="#"?e.maximumSignificantDigits=r.length:(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length+(typeof i=="string"?i.length:0)),""}),e}function Hk(n){switch(n){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function ON(n){var e;if(n[0]==="E"&&n[1]==="E"?(e={notation:"engineering"},n=n.slice(2)):n[0]==="E"&&(e={notation:"scientific"},n=n.slice(1)),e){var t=n.slice(0,2);if(t==="+!"?(e.signDisplay="always",n=n.slice(2)):t==="+?"&&(e.signDisplay="exceptZero",n=n.slice(2)),!jk.test(n))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=n.length}return e}function Pw(n){var e={},t=Hk(n);return t||e}function bN(n){for(var e={},t=0,r=n;t<r.length;t++){var i=r[t];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=gN(i.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=gt(gt(gt({},e),{notation:"scientific"}),i.options.reduce(function(l,c){return gt(gt({},l),Pw(c))},{}));continue;case"engineering":e=gt(gt(gt({},e),{notation:"engineering"}),i.options.reduce(function(l,c){return gt(gt({},l),Pw(c))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(yN,function(l,c,u,h,f,p){if(c)e.minimumIntegerDigits=u.length;else{if(h&&f)throw new Error("We currently do not support maximum integer digits");if(p)throw new Error("We currently do not support exact integer digits")}return""});continue}if(jk.test(i.stem)){e.minimumIntegerDigits=i.stem.length;continue}if(Rw.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(Rw,function(l,c,u,h,f,p){return u==="*"?e.minimumFractionDigits=c.length:h&&h[0]==="#"?e.maximumFractionDigits=h.length:f&&p?(e.minimumFractionDigits=f.length,e.maximumFractionDigits=f.length+p.length):(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length),""});var s=i.options[0];s==="w"?e=gt(gt({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=gt(gt({},e),Qw(s)));continue}if(zk.test(i.stem)){e=gt(gt({},e),Qw(i.stem));continue}var o=Hk(i.stem);o&&(e=gt(gt({},e),o));var a=ON(i.stem);a&&(e=gt(gt({},e),a))}return e}var xu={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function vN(n,e){for(var t="",r=0;r<n.length;r++){var i=n.charAt(r);if(i==="j"){for(var s=0;r+1<n.length&&n.charAt(r+1)===i;)s++,r++;var o=1+(s&1),a=s<2?1:3+(s>>1),l="a",c=wN(e);for((c=="H"||c=="k")&&(a=0);a-- >0;)t+=l;for(;o-- >0;)t=c+t}else i==="J"?t+="H":t+=i}return t}function wN(n){var e=n.hourCycle;if(e===void 0&&n.hourCycles&&n.hourCycles.length&&(e=n.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var t=n.language,r;t!=="root"&&(r=n.maximize().region);var i=xu[r||""]||xu[t||""]||xu["".concat(t,"-001")]||xu["001"];return i[0]}var Up,AN=new RegExp("^".concat(Uk.source,"*")),_N=new RegExp("".concat(Uk.source,"*$"));function ut(n,e){return{start:n,end:e}}var xN=!!String.prototype.startsWith,kN=!!String.fromCodePoint,SN=!!Object.fromEntries,TN=!!String.prototype.codePointAt,EN=!!String.prototype.trimStart,CN=!!String.prototype.trimEnd,IN=!!Number.isSafeInteger,RN=IN?Number.isSafeInteger:function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n&&Math.abs(n)<=9007199254740991},rg=!0;try{var QN=Vk("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");rg=((Up=QN.exec("a"))===null||Up===void 0?void 0:Up[0])==="a"}catch{rg=!1}var Dw=xN?function(e,t,r){return e.startsWith(t,r)}:function(e,t,r){return e.slice(r,r+t.length)===t},ig=kN?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r="",i=e.length,s=0,o;i>s;){if(o=e[s++],o>1114111)throw RangeError(o+" is not a valid code point");r+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return r},Lw=SN?Object.fromEntries:function(e){for(var t={},r=0,i=e;r<i.length;r++){var s=i[r],o=s[0],a=s[1];t[o]=a}return t},Gk=TN?function(e,t){return e.codePointAt(t)}:function(e,t){var r=e.length;if(!(t<0||t>=r)){var i=e.charCodeAt(t),s;return i<55296||i>56319||t+1===r||(s=e.charCodeAt(t+1))<56320||s>57343?i:(i-55296<<10)+(s-56320)+65536}},PN=EN?function(e){return e.trimStart()}:function(e){return e.replace(AN,"")},DN=CN?function(e){return e.trimEnd()}:function(e){return e.replace(_N,"")};function Vk(n,e){return new RegExp(n,e)}var sg;if(rg){var Nw=Vk("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");sg=function(e,t){var r;Nw.lastIndex=t;var i=Nw.exec(e);return(r=i[1])!==null&&r!==void 0?r:""}}else sg=function(e,t){for(var r=[];;){var i=Gk(e,t);if(i===void 0||Xk(i)||MN(i))break;r.push(i),t+=i>=65536?2:1}return ig.apply(void 0,r)};var LN=function(){function n(e,t){t===void 0&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return n.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},n.prototype.parseMessage=function(e,t,r){for(var i=[];!this.isEOF();){var s=this.char();if(s===123){var o=this.parseArgument(e,r);if(o.err)return o;i.push(o.val)}else{if(s===125&&e>0)break;if(s===35&&(t==="plural"||t==="selectordinal")){var a=this.clonePosition();this.bump(),i.push({type:Bt.pound,location:ut(a,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(lt.UNMATCHED_CLOSING_TAG,ut(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&og(this.peek()||0)){var o=this.parseTag(e,t);if(o.err)return o;i.push(o.val)}else{var o=this.parseLiteral(e,t);if(o.err)return o;i.push(o.val)}}}return{val:i,err:null}},n.prototype.parseTag=function(e,t){var r=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Bt.literal,value:"<".concat(i,"/>"),location:ut(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,t,!0);if(s.err)return s;var o=s.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!og(this.char()))return this.error(lt.INVALID_TAG,ut(a,this.clonePosition()));var l=this.clonePosition(),c=this.parseTagName();return i!==c?this.error(lt.UNMATCHED_CLOSING_TAG,ut(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Bt.tag,value:i,children:o,location:ut(r,this.clonePosition())},err:null}:this.error(lt.INVALID_TAG,ut(a,this.clonePosition())))}else return this.error(lt.UNCLOSED_TAG,ut(r,this.clonePosition()))}else return this.error(lt.INVALID_TAG,ut(r,this.clonePosition()))},n.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&BN(this.char());)this.bump();return this.message.slice(e,this.offset())},n.prototype.parseLiteral=function(e,t){for(var r=this.clonePosition(),i="";;){var s=this.tryParseQuote(t);if(s){i+=s;continue}var o=this.tryParseUnquoted(e,t);if(o){i+=o;continue}var a=this.tryParseLeftAngleBracket();if(a){i+=a;continue}break}var l=ut(r,this.clonePosition());return{val:{type:Bt.literal,value:i,location:l},err:null}},n.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!NN(this.peek()||0))?(this.bump(),"<"):null},n.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)t.push(39),this.bump();else{this.bump();break}else t.push(r);this.bump()}return ig.apply(void 0,t)},n.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(t==="plural"||t==="selectordinal")||r===125&&e>0?null:(this.bump(),ig(r))},n.prototype.parseArgument=function(e,t){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(lt.EXPECT_ARGUMENT_CLOSING_BRACE,ut(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(lt.EMPTY_ARGUMENT,ut(r,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(lt.MALFORMED_ARGUMENT,ut(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(lt.EXPECT_ARGUMENT_CLOSING_BRACE,ut(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Bt.argument,value:i,location:ut(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(lt.EXPECT_ARGUMENT_CLOSING_BRACE,ut(r,this.clonePosition())):this.parseArgumentOptions(e,t,i,r);default:return this.error(lt.MALFORMED_ARGUMENT,ut(r,this.clonePosition()))}},n.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),r=sg(this.message,t),i=t+r.length;this.bumpTo(i);var s=this.clonePosition(),o=ut(e,s);return{value:r,location:o}},n.prototype.parseArgumentOptions=function(e,t,r,i){var s,o=this.clonePosition(),a=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(a){case"":return this.error(lt.EXPECT_ARGUMENT_TYPE,ut(o,l));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition(),h=this.parseSimpleArgStyleIfPossible();if(h.err)return h;var f=DN(h.val);if(f.length===0)return this.error(lt.EXPECT_ARGUMENT_STYLE,ut(this.clonePosition(),this.clonePosition()));var p=ut(u,this.clonePosition());c={style:f,styleLocation:p}}var d=this.tryParseArgumentClose(i);if(d.err)return d;var m=ut(i,this.clonePosition());if(c&&Dw(c==null?void 0:c.style,"::",0)){var b=PN(c.style.slice(2));if(a==="number"){var h=this.parseNumberSkeletonFromString(b,c.styleLocation);return h.err?h:{val:{type:Bt.number,value:r,location:m,style:h.val},err:null}}else{if(b.length===0)return this.error(lt.EXPECT_DATE_TIME_SKELETON,m);var A=b;this.locale&&(A=vN(b,this.locale));var f={type:ra.dateTime,pattern:A,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?dN(A):{}},g=a==="date"?Bt.date:Bt.time;return{val:{type:g,value:r,location:m,style:f},err:null}}}return{val:{type:a==="number"?Bt.number:a==="date"?Bt.date:Bt.time,value:r,location:m,style:(s=c==null?void 0:c.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var v=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(lt.EXPECT_SELECT_ARGUMENT_OPTIONS,ut(v,gt({},v)));this.bumpSpace();var O=this.parseIdentifierIfPossible(),_=0;if(a!=="select"&&O.value==="offset"){if(!this.bumpIf(":"))return this.error(lt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ut(this.clonePosition(),this.clonePosition()));this.bumpSpace();var h=this.tryParseDecimalInteger(lt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,lt.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(h.err)return h;this.bumpSpace(),O=this.parseIdentifierIfPossible(),_=h.val}var x=this.tryParsePluralOrSelectOptions(e,a,t,O);if(x.err)return x;var d=this.tryParseArgumentClose(i);if(d.err)return d;var T=ut(i,this.clonePosition());return a==="select"?{val:{type:Bt.select,value:r,options:Lw(x.val),location:T},err:null}:{val:{type:Bt.plural,value:r,options:Lw(x.val),offset:_,pluralType:a==="plural"?"cardinal":"ordinal",location:T},err:null}}default:return this.error(lt.INVALID_ARGUMENT_TYPE,ut(o,l))}},n.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(lt.EXPECT_ARGUMENT_CLOSING_BRACE,ut(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},n.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var i=this.clonePosition();if(!this.bumpUntil("'"))return this.error(lt.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,ut(i,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(t.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(t.offset,this.offset()),err:null}},n.prototype.parseNumberSkeletonFromString=function(e,t){var r=[];try{r=mN(e)}catch{return this.error(lt.INVALID_NUMBER_SKELETON,t)}return{val:{type:ra.number,tokens:r,location:t,parsedOptions:this.shouldParseSkeletons?bN(r):{}},err:null}},n.prototype.tryParsePluralOrSelectOptions=function(e,t,r,i){for(var s,o=!1,a=[],l=new Set,c=i.value,u=i.location;;){if(c.length===0){var h=this.clonePosition();if(t!=="select"&&this.bumpIf("=")){var f=this.tryParseDecimalInteger(lt.EXPECT_PLURAL_ARGUMENT_SELECTOR,lt.INVALID_PLURAL_ARGUMENT_SELECTOR);if(f.err)return f;u=ut(h,this.clonePosition()),c=this.message.slice(h.offset,this.offset())}else break}if(l.has(c))return this.error(t==="select"?lt.DUPLICATE_SELECT_ARGUMENT_SELECTOR:lt.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);c==="other"&&(o=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error(t==="select"?lt.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:lt.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,ut(this.clonePosition(),this.clonePosition()));var d=this.parseMessage(e+1,t,r);if(d.err)return d;var m=this.tryParseArgumentClose(p);if(m.err)return m;a.push([c,{value:d.val,location:ut(p,this.clonePosition())}]),l.add(c),this.bumpSpace(),s=this.parseIdentifierIfPossible(),c=s.value,u=s.location}return a.length===0?this.error(t==="select"?lt.EXPECT_SELECT_ARGUMENT_SELECTOR:lt.EXPECT_PLURAL_ARGUMENT_SELECTOR,ut(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(lt.MISSING_OTHER_CLAUSE,ut(this.clonePosition(),this.clonePosition())):{val:a,err:null}},n.prototype.tryParseDecimalInteger=function(e,t){var r=1,i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var s=!1,o=0;!this.isEOF();){var a=this.char();if(a>=48&&a<=57)s=!0,o=o*10+(a-48),this.bump();else break}var l=ut(i,this.clonePosition());return s?(o*=r,RN(o)?{val:o,err:null}:this.error(t,l)):this.error(e,l)},n.prototype.offset=function(){return this.position.offset},n.prototype.isEOF=function(){return this.offset()===this.message.length},n.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},n.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=Gk(this.message,e);if(t===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},n.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},n.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},n.prototype.bumpIf=function(e){if(Dw(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},n.prototype.bumpUntil=function(e){var t=this.offset(),r=this.message.indexOf(e,t);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},n.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},n.prototype.bumpSpace=function(){for(;!this.isEOF()&&Xk(this.char());)this.bump()},n.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),r=this.message.charCodeAt(t+(e>=65536?2:1));return r!=null?r:null},n}();function og(n){return n>=97&&n<=122||n>=65&&n<=90}function NN(n){return og(n)||n===47}function BN(n){return n===45||n===46||n>=48&&n<=57||n===95||n>=97&&n<=122||n>=65&&n<=90||n==183||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8255&&n<=8256||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}function Xk(n){return n>=9&&n<=13||n===32||n===133||n>=8206&&n<=8207||n===8232||n===8233}function MN(n){return n>=33&&n<=35||n===36||n>=37&&n<=39||n===40||n===41||n===42||n===43||n===44||n===45||n>=46&&n<=47||n>=58&&n<=59||n>=60&&n<=62||n>=63&&n<=64||n===91||n===92||n===93||n===94||n===96||n===123||n===124||n===125||n===126||n===161||n>=162&&n<=165||n===166||n===167||n===169||n===171||n===172||n===174||n===176||n===177||n===182||n===187||n===191||n===215||n===247||n>=8208&&n<=8213||n>=8214&&n<=8215||n===8216||n===8217||n===8218||n>=8219&&n<=8220||n===8221||n===8222||n===8223||n>=8224&&n<=8231||n>=8240&&n<=8248||n===8249||n===8250||n>=8251&&n<=8254||n>=8257&&n<=8259||n===8260||n===8261||n===8262||n>=8263&&n<=8273||n===8274||n===8275||n>=8277&&n<=8286||n>=8592&&n<=8596||n>=8597&&n<=8601||n>=8602&&n<=8603||n>=8604&&n<=8607||n===8608||n>=8609&&n<=8610||n===8611||n>=8612&&n<=8613||n===8614||n>=8615&&n<=8621||n===8622||n>=8623&&n<=8653||n>=8654&&n<=8655||n>=8656&&n<=8657||n===8658||n===8659||n===8660||n>=8661&&n<=8691||n>=8692&&n<=8959||n>=8960&&n<=8967||n===8968||n===8969||n===8970||n===8971||n>=8972&&n<=8991||n>=8992&&n<=8993||n>=8994&&n<=9e3||n===9001||n===9002||n>=9003&&n<=9083||n===9084||n>=9085&&n<=9114||n>=9115&&n<=9139||n>=9140&&n<=9179||n>=9180&&n<=9185||n>=9186&&n<=9254||n>=9255&&n<=9279||n>=9280&&n<=9290||n>=9291&&n<=9311||n>=9472&&n<=9654||n===9655||n>=9656&&n<=9664||n===9665||n>=9666&&n<=9719||n>=9720&&n<=9727||n>=9728&&n<=9838||n===9839||n>=9840&&n<=10087||n===10088||n===10089||n===10090||n===10091||n===10092||n===10093||n===10094||n===10095||n===10096||n===10097||n===10098||n===10099||n===10100||n===10101||n>=10132&&n<=10175||n>=10176&&n<=10180||n===10181||n===10182||n>=10183&&n<=10213||n===10214||n===10215||n===10216||n===10217||n===10218||n===10219||n===10220||n===10221||n===10222||n===10223||n>=10224&&n<=10239||n>=10240&&n<=10495||n>=10496&&n<=10626||n===10627||n===10628||n===10629||n===10630||n===10631||n===10632||n===10633||n===10634||n===10635||n===10636||n===10637||n===10638||n===10639||n===10640||n===10641||n===10642||n===10643||n===10644||n===10645||n===10646||n===10647||n===10648||n>=10649&&n<=10711||n===10712||n===10713||n===10714||n===10715||n>=10716&&n<=10747||n===10748||n===10749||n>=10750&&n<=11007||n>=11008&&n<=11055||n>=11056&&n<=11076||n>=11077&&n<=11078||n>=11079&&n<=11084||n>=11085&&n<=11123||n>=11124&&n<=11125||n>=11126&&n<=11157||n===11158||n>=11159&&n<=11263||n>=11776&&n<=11777||n===11778||n===11779||n===11780||n===11781||n>=11782&&n<=11784||n===11785||n===11786||n===11787||n===11788||n===11789||n>=11790&&n<=11798||n===11799||n>=11800&&n<=11801||n===11802||n===11803||n===11804||n===11805||n>=11806&&n<=11807||n===11808||n===11809||n===11810||n===11811||n===11812||n===11813||n===11814||n===11815||n===11816||n===11817||n>=11818&&n<=11822||n===11823||n>=11824&&n<=11833||n>=11834&&n<=11835||n>=11836&&n<=11839||n===11840||n===11841||n===11842||n>=11843&&n<=11855||n>=11856&&n<=11857||n===11858||n>=11859&&n<=11903||n>=12289&&n<=12291||n===12296||n===12297||n===12298||n===12299||n===12300||n===12301||n===12302||n===12303||n===12304||n===12305||n>=12306&&n<=12307||n===12308||n===12309||n===12310||n===12311||n===12312||n===12313||n===12314||n===12315||n===12316||n===12317||n>=12318&&n<=12319||n===12320||n===12336||n===64830||n===64831||n>=65093&&n<=65094}function ag(n){n.forEach(function(e){if(delete e.location,Mk(e)||$k(e))for(var t in e.options)delete e.options[t].location,ag(e.options[t].value);else Lk(e)&&Wk(e.style)||(Nk(e)||Bk(e))&&ng(e.style)?delete e.style.location:Fk(e)&&ag(e.children)})}function $N(n,e){e===void 0&&(e={}),e=gt({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var t=new LN(n,e).parse();if(t.err){var r=SyntaxError(lt[t.err.kind]);throw r.location=t.err.location,r.originalMessage=t.err.message,r}return e!=null&&e.captureLocation||ag(t.val),t.val}function zp(n,e){var t=e&&e.cache?e.cache:HN,r=e&&e.serializer?e.serializer:jN,i=e&&e.strategy?e.strategy:WN;return i(n,{cache:t,serializer:r})}function FN(n){return n==null||typeof n=="number"||typeof n=="boolean"}function Yk(n,e,t,r){var i=FN(r)?r:t(r),s=e.get(i);return typeof s=="undefined"&&(s=n.call(this,r),e.set(i,s)),s}function Zk(n,e,t){var r=Array.prototype.slice.call(arguments,3),i=t(r),s=e.get(i);return typeof s=="undefined"&&(s=n.apply(this,r),e.set(i,s)),s}function y0(n,e,t,r,i){return t.bind(e,n,r,i)}function WN(n,e){var t=n.length===1?Yk:Zk;return y0(n,this,t,e.cache.create(),e.serializer)}function UN(n,e){return y0(n,this,Zk,e.cache.create(),e.serializer)}function zN(n,e){return y0(n,this,Yk,e.cache.create(),e.serializer)}var jN=function(){return JSON.stringify(arguments)};function O0(){this.cache=Object.create(null)}O0.prototype.get=function(n){return this.cache[n]};O0.prototype.set=function(n,e){this.cache[n]=e};var HN={create:function(){return new O0}},jp={variadic:UN,monadic:zN},ia;(function(n){n.MISSING_VALUE="MISSING_VALUE",n.INVALID_VALUE="INVALID_VALUE",n.MISSING_INTL_API="MISSING_INTL_API"})(ia||(ia={}));var Yf=function(n){Xf(e,n);function e(t,r,i){var s=n.call(this,t)||this;return s.code=r,s.originalMessage=i,s}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),Bw=function(n){Xf(e,n);function e(t,r,i,s){return n.call(this,'Invalid values for "'.concat(t,'": "').concat(r,'". Options are "').concat(Object.keys(i).join('", "'),'"'),ia.INVALID_VALUE,s)||this}return e}(Yf),GN=function(n){Xf(e,n);function e(t,r,i){return n.call(this,'Value for "'.concat(t,'" must be of type ').concat(r),ia.INVALID_VALUE,i)||this}return e}(Yf),VN=function(n){Xf(e,n);function e(t,r){return n.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(r,'"'),ia.MISSING_VALUE,r)||this}return e}(Yf),Rn;(function(n){n[n.literal=0]="literal",n[n.object=1]="object"})(Rn||(Rn={}));function XN(n){return n.length<2?n:n.reduce(function(e,t){var r=e[e.length-1];return!r||r.type!==Rn.literal||t.type!==Rn.literal?e.push(t):r.value+=t.value,e},[])}function YN(n){return typeof n=="function"}function oh(n,e,t,r,i,s,o){if(n.length===1&&Iw(n[0]))return[{type:Rn.literal,value:n[0].value}];for(var a=[],l=0,c=n;l<c.length;l++){var u=c[l];if(Iw(u)){a.push({type:Rn.literal,value:u.value});continue}if(hN(u)){typeof s=="number"&&a.push({type:Rn.literal,value:t.getNumberFormat(e).format(s)});continue}var h=u.value;if(!(i&&h in i))throw new VN(h,o);var f=i[h];if(uN(u)){(!f||typeof f=="string"||typeof f=="number")&&(f=typeof f=="string"||typeof f=="number"?String(f):""),a.push({type:typeof f=="string"?Rn.literal:Rn.object,value:f});continue}if(Nk(u)){var p=typeof u.style=="string"?r.date[u.style]:ng(u.style)?u.style.parsedOptions:void 0;a.push({type:Rn.literal,value:t.getDateTimeFormat(e,p).format(f)});continue}if(Bk(u)){var p=typeof u.style=="string"?r.time[u.style]:ng(u.style)?u.style.parsedOptions:r.time.medium;a.push({type:Rn.literal,value:t.getDateTimeFormat(e,p).format(f)});continue}if(Lk(u)){var p=typeof u.style=="string"?r.number[u.style]:Wk(u.style)?u.style.parsedOptions:void 0;p&&p.scale&&(f=f*(p.scale||1)),a.push({type:Rn.literal,value:t.getNumberFormat(e,p).format(f)});continue}if(Fk(u)){var d=u.children,m=u.value,b=i[m];if(!YN(b))throw new GN(m,"function",o);var A=oh(d,e,t,r,i,s),g=b(A.map(function(_){return _.value}));Array.isArray(g)||(g=[g]),a.push.apply(a,g.map(function(_){return{type:typeof _=="string"?Rn.literal:Rn.object,value:_}}))}if(Mk(u)){var v=u.options[f]||u.options.other;if(!v)throw new Bw(u.value,f,Object.keys(u.options),o);a.push.apply(a,oh(v.value,e,t,r,i));continue}if($k(u)){var v=u.options["=".concat(f)];if(!v){if(!Intl.PluralRules)throw new Yf(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,ia.MISSING_INTL_API,o);var O=t.getPluralRules(e,{type:u.pluralType}).select(f-(u.offset||0));v=u.options[O]||u.options.other}if(!v)throw new Bw(u.value,f,Object.keys(u.options),o);a.push.apply(a,oh(v.value,e,t,r,i,f-(u.offset||0)));continue}}return XN(a)}function ZN(n,e){return e?gt(gt(gt({},n||{}),e||{}),Object.keys(n).reduce(function(t,r){return t[r]=gt(gt({},n[r]),e[r]||{}),t},{})):n}function qN(n,e){return e?Object.keys(n).reduce(function(t,r){return t[r]=ZN(n[r],e[r]),t},gt({},n)):n}function Hp(n){return{create:function(){return{get:function(e){return n[e]},set:function(e,t){n[e]=t}}}}}function KN(n){return n===void 0&&(n={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:zp(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,Wp([void 0],t,!1)))},{cache:Hp(n.number),strategy:jp.variadic}),getDateTimeFormat:zp(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,Wp([void 0],t,!1)))},{cache:Hp(n.dateTime),strategy:jp.variadic}),getPluralRules:zp(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,Wp([void 0],t,!1)))},{cache:Hp(n.pluralRules),strategy:jp.variadic})}}var JN=function(){function n(e,t,r,i){var s=this;if(t===void 0&&(t=n.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(o){var a=s.formatToParts(o);if(a.length===1)return a[0].value;var l=a.reduce(function(c,u){return!c.length||u.type!==Rn.literal||typeof c[c.length-1]!="string"?c.push(u.value):c[c.length-1]+=u.value,c},[]);return l.length<=1?l[0]||"":l},this.formatToParts=function(o){return oh(s.ast,s.locales,s.formatters,s.formats,o,void 0,s.message)},this.resolvedOptions=function(){return{locale:s.resolvedLocale.toString()}},this.getAst=function(){return s.ast},this.locales=t,this.resolvedLocale=n.resolveLocale(t),typeof e=="string"){if(this.message=e,!n.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=n.__parse(e,{ignoreTag:i==null?void 0:i.ignoreTag,locale:this.resolvedLocale})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=qN(n.formats,r),this.formatters=i&&i.formatters||KN(this.formatterCache)}return Object.defineProperty(n,"defaultLocale",{get:function(){return n.memoizedDefaultLocale||(n.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),n.memoizedDefaultLocale},enumerable:!1,configurable:!0}),n.memoizedDefaultLocale=null,n.resolveLocale=function(e){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale(typeof e=="string"?e:e[0])},n.__parse=$N,n.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},n}(),eB=JN;const ts={},tB=(n,e,t)=>t&&(e in ts||(ts[e]={}),n in ts[e]||(ts[e][n]=t),t),qk=(n,e)=>{if(e==null)return;if(e in ts&&n in ts[e])return ts[e][n];const t=Dc(e);for(let r=0;r<t.length;r++){const i=nB(t[r],n);if(i)return tB(n,e,i)}};let b0;const Pc=Nt({});function Kk(n){return n in b0}function nB(n,e){if(!Kk(n))return null;const t=function(r){return b0[r]||null}(n);return function(r,i){if(i==null)return;if(i in r)return r[i];const s=i.split(".");let o=r;for(let a=0;a<s.length;a++)if(typeof o=="object"){if(a>0){const l=s.slice(a,s.length).join(".");if(l in o){o=o[l];break}}o=o[s[a]]}else o=void 0;return o}(t,e)}function v0(n,...e){delete ts[n],Pc.update(t=>(t[n]=cN.all([t[n]||{},...e]),t))}kr([Pc],([n])=>Object.keys(n));Pc.subscribe(n=>b0=n);const ah={};function Jk(n){return ah[n]}function Eh(n){return n!=null&&Dc(n).some(e=>{var t;return(t=Jk(e))===null||t===void 0?void 0:t.size})}function rB(n,e){return Promise.all(e.map(r=>(function(i,s){ah[i].delete(s),ah[i].size===0&&delete ah[i]}(n,r),r().then(i=>i.default||i)))).then(r=>v0(n,...r))}const il={};function eS(n){if(!Eh(n))return n in il?il[n]:Promise.resolve();const e=function(t){return Dc(t).map(r=>{const i=Jk(r);return[r,i?[...i]:[]]}).filter(([,r])=>r.length>0)}(n);return il[n]=Promise.all(e.map(([t,r])=>rB(t,r))).then(()=>{if(Eh(n))return eS(n);delete il[n]}),il[n]}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function go(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function iB({locale:n,id:e}){console.warn(`[svelte-i18n] The message "${e}" was not found in "${Dc(n).join('", "')}".${Eh(Ps())?`

Note: there are at least one loader still registered to this locale that wasn't executed.`:""}`)}const bl={fallbackLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0,handleMissingMessage:void 0,ignoreTag:!0};function sa(){return bl}function sB(n){const{formats:e}=n,t=go(n,["formats"]),r=n.initialLocale||n.fallbackLocale;return t.warnOnMissingMessages&&(delete t.warnOnMissingMessages,t.handleMissingMessage==null?t.handleMissingMessage=iB:console.warn('[svelte-i18n] The "warnOnMissingMessages" option is deprecated. Please use the "handleMissingMessage" option instead.')),Object.assign(bl,t,{initialLocale:r}),e&&("number"in e&&Object.assign(bl.formats.number,e.number),"date"in e&&Object.assign(bl.formats.date,e.date),"time"in e&&Object.assign(bl.formats.time,e.time)),Ta.set(r)}const Gp=Nt(!1);let lg;const lh=Nt(null);function Mw(n){return n.split("-").map((e,t,r)=>r.slice(0,t+1).join("-")).reverse()}function Dc(n,e=sa().fallbackLocale){const t=Mw(n);return e?[...new Set([...t,...Mw(e)])]:t}function Ps(){return lg!=null?lg:void 0}lh.subscribe(n=>{lg=n!=null?n:void 0,typeof window!="undefined"&&n!=null&&document.documentElement.setAttribute("lang",n)});const Ta=Object.assign(Object.assign({},lh),{set:n=>{if(n&&function(e){if(e==null)return;const t=Dc(e);for(let r=0;r<t.length;r++){const i=t[r];if(Kk(i))return i}}(n)&&Eh(n)){const{loadingDelay:e}=sa();let t;return typeof window!="undefined"&&Ps()!=null&&e?t=window.setTimeout(()=>Gp.set(!0),e):Gp.set(!0),eS(n).then(()=>{lh.set(n)}).finally(()=>{clearTimeout(t),Gp.set(!1)})}return lh.set(n)}}),oB=()=>typeof window=="undefined"?null:window.navigator.language||window.navigator.languages[0],Zf=n=>{const e=Object.create(null);return t=>{const r=JSON.stringify(t);return r in e?e[r]:e[r]=n(t)}},Yl=(n,e)=>{const{formats:t}=sa();if(n in t&&e in t[n])return t[n][e];throw new Error(`[svelte-i18n] Unknown "${e}" ${n} format.`)},aB=Zf(n=>{var{locale:e,format:t}=n,r=go(n,["locale","format"]);if(e==null)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return t&&(r=Yl("number",t)),new Intl.NumberFormat(e,r)}),lB=Zf(n=>{var{locale:e,format:t}=n,r=go(n,["locale","format"]);if(e==null)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return t?r=Yl("date",t):Object.keys(r).length===0&&(r=Yl("date","short")),new Intl.DateTimeFormat(e,r)}),cB=Zf(n=>{var{locale:e,format:t}=n,r=go(n,["locale","format"]);if(e==null)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return t?r=Yl("time",t):Object.keys(r).length===0&&(r=Yl("time","short")),new Intl.DateTimeFormat(e,r)}),uB=(n={})=>{var{locale:e=Ps()}=n,t=go(n,["locale"]);return aB(Object.assign({locale:e},t))},hB=(n={})=>{var{locale:e=Ps()}=n,t=go(n,["locale"]);return lB(Object.assign({locale:e},t))},fB=(n={})=>{var{locale:e=Ps()}=n,t=go(n,["locale"]);return cB(Object.assign({locale:e},t))},dB=Zf((n,e=Ps())=>new eB(n,e,sa().formats,{ignoreTag:sa().ignoreTag})),pB=(n,e={})=>{var t,r,i,s;let o=e;typeof n=="object"&&(o=n,n=o.id);const{values:a,locale:l=Ps(),default:c}=o;if(l==null)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let u=qk(n,l);if(u){if(typeof u!="string")return console.warn(`[svelte-i18n] Message with id "${n}" must be of type "string", found: "${typeof u}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),u}else u=(s=(i=(r=(t=sa()).handleMissingMessage)===null||r===void 0?void 0:r.call(t,{locale:l,id:n,defaultValue:c}))!==null&&i!==void 0?i:c)!==null&&s!==void 0?s:n;if(!a)return u;let h=u;try{h=dB(u,l).format(a)}catch(f){console.warn(`[svelte-i18n] Message "${n}" has syntax error:`,f.message)}return h},mB=(n,e)=>fB(e).format(n),gB=(n,e)=>hB(e).format(n),yB=(n,e)=>uB(e).format(n),OB=(n,e=Ps())=>qk(n,e),Kt=kr([Ta,Pc],()=>pB);kr([Ta],()=>mB);kr([Ta],()=>gB);kr([Ta],()=>yB);kr([Ta,Pc],()=>OB);function $w(n){let e,t,r,i,s,o=n[5]("dialogs.lock.title")+"",a,l,c,u=n[5]("dialogs.lock.text")+"",h,f,p=n[5]("dialogs.lock.new")+"",d,m,b,A=n[5]("dialogs.lock.overwrite")+"",g,v,O;return{c(){e=Y("div"),t=fe(),r=Y("div"),i=Y("div"),s=Y("h3"),a=Ae(o),l=fe(),c=Y("p"),h=fe(),f=Y("button"),d=Ae(p),m=fe(),b=Y("button"),g=Ae(A),G(e,"class","dialog-mask"),G(f,"class","ok"),G(b,"class","error"),G(i,"class","dialog lock svelte-8wx2vf"),G(r,"class","dialog-container")},m(_,x){Te(_,e,x),Te(_,t,x),Te(_,r,x),W(r,i),W(i,s),W(s,a),W(i,l),W(i,c),c.innerHTML=u,W(i,h),W(i,f),W(f,d),W(i,m),W(i,b),W(b,g),v||(O=[Ie(f,"click",n[6]),Ie(b,"click",n[7])],v=!0)},p(_,x){x&32&&o!==(o=_[5]("dialogs.lock.title")+"")&&Ee(a,o),x&32&&u!==(u=_[5]("dialogs.lock.text")+"")&&(c.innerHTML=u),x&32&&p!==(p=_[5]("dialogs.lock.new")+"")&&Ee(d,p),x&32&&A!==(A=_[5]("dialogs.lock.overwrite")+"")&&Ee(g,A)},d(_){_&&Se(e),_&&Se(t),_&&Se(r),v=!1,Xt(O)}}}function Fw(n){let e,t,r,i,s,o,a;var l=n[2];function c(u){return{props:{params:u[4],callback:u[3]}}}return l&&(i=new l(c(n))),{c(){e=Y("div"),t=fe(),r=Y("div"),i&&es(i.$$.fragment),G(e,"class","dialog-mask"),G(r,"class","dialog-container")},m(u,h){Te(u,e,h),Te(u,t,h),Te(u,r,h),i&&wi(i,r,null),s=!0,o||(a=[Ie(e,"click",Sw(n[8])),Ie(r,"click",Sw(n[9]))],o=!0)},p(u,h){const f={};if(h&16&&(f.params=u[4]),h&8&&(f.callback=u[3]),l!==(l=u[2])){if(i){Gf();const p=i;nr(p.$$.fragment,1,0,()=>{Ai(p,1)}),Vf()}l?(i=new l(c(u)),es(i.$$.fragment),Dn(i.$$.fragment,1),wi(i,r,null)):i=null}else l&&i.$set(f)},i(u){s||(i&&Dn(i.$$.fragment,u),s=!0)},o(u){i&&nr(i.$$.fragment,u),s=!1},d(u){u&&Se(e),u&&Se(t),u&&Se(r),i&&Ai(i),o=!1,Xt(a)}}}function bB(n){let e,t,r,i=n[0]&&$w(n),s=n[2]&&Fw(n);return{c(){i&&i.c(),e=fe(),s&&s.c(),t=no()},m(o,a){i&&i.m(o,a),Te(o,e,a),s&&s.m(o,a),Te(o,t,a),r=!0},p(o,[a]){o[0]?i?i.p(o,a):(i=$w(o),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),o[2]?s?(s.p(o,a),a&4&&Dn(s,1)):(s=Fw(o),s.c(),Dn(s,1),s.m(t.parentNode,t)):s&&(Gf(),nr(s,1,1,()=>{s=null}),Vf())},i(o){r||(Dn(s),r=!0)},o(o){nr(s),r=!1},d(o){i&&i.d(o),o&&Se(e),s&&s.d(o),o&&Se(t)}}}const cg=Nt({}),ug=Nt(!1),Kn=(n,...e)=>new Promise(t=>cg.set({component:n,callback(...r){cg.set({}),t(...r)},params:Nt(e)}));function vB(n,e,t){let r;Ne(n,Kt,p=>t(5,r=p));let i=!1,s,o,a,l;return ug.subscribe(p=>t(0,{lock:i,session:s}=p,i,t(1,s))),cg.subscribe(async p=>{t(2,{component:o,callback:a,params:l}=p,o,t(3,a),t(4,l)),await ta();const d=document.querySelector("button.ok");d&&d.focus()}),[i,s,o,a,l,r,()=>s.duplicate(),()=>s.lock(),()=>a(!1),()=>a(!1)]}class wB extends kn{constructor(e){super(),xn(this,e,vB,bB,gn,{})}}function AB(n){let e,t,r,i,s,o,a,l=n[4]("dialogs.ok")+"",c,u,h;return{c(){e=Y("div"),t=Y("h3"),r=Ae(n[2]),i=fe(),s=Y("p"),o=fe(),a=Y("button"),c=Ae(l),G(a,"class","ok"),G(e,"class","dialog")},m(f,p){Te(f,e,p),W(e,t),W(t,r),W(e,i),W(e,s),s.innerHTML=n[3],W(e,o),W(e,a),W(a,c),u||(h=Ie(a,"click",n[6]),u=!0)},p(f,[p]){p&4&&Ee(r,f[2]),p&8&&(s.innerHTML=f[3]),p&16&&l!==(l=f[4]("dialogs.ok")+"")&&Ee(c,l)},i:Ue,o:Ue,d(f){f&&Se(e),u=!1,h()}}}function _B(n,e,t){let r,i=Ue,s=()=>(i(),i=Qc(a,f=>t(5,r=f)),a),o;Ne(n,Kt,f=>t(4,o=f)),n.$$.on_destroy.push(()=>i());let{params:a}=e;s();let{callback:l}=e,c,u;const h=()=>l(!0);return n.$$set=f=>{"params"in f&&s(t(0,a=f.params)),"callback"in f&&t(1,l=f.callback)},n.$$.update=()=>{n.$$.dirty&32&&t(2,[c,u]=r,c,(t(3,u),t(5,r)))},[a,l,c,u,o,r,h]}class xB extends kn{constructor(e){super(),xn(this,e,_B,AB,gn,{params:0,callback:1})}}const hg={O:()=>console.log("ciao")},w0=n=>Object.assign(hg,n),kB=function(n){if(n.ctrlKey){const e=String.fromCharCode(n.keyCode).toUpperCase();e in hg&&(hg[e](),n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault())}},SB="text/markdown",TB=n=>{let e={properties:{},chapters:{}},t="";const r=()=>{var i,s;try{e.chapters[t].text=((s=(i=e.chapters[t])==null?void 0:i.text)==null?void 0:s.replace(/[\n\s]+$/,""))||""}catch{}};return n.split(`
`).forEach((i,s)=>{const o=i.trim();if(t===""&&!o.startsWith("### ")){if(o.startsWith("# ")){e.properties.title=o.replace(/\#/g,"").trim();return}const l=o.indexOf(":");l!==-1&&(e.properties[o.substr(0,l)]=o.substr(l+1));return}if(o.startsWith("### ")){t!==""&&r(),t=o.substr(4).trim();let l="";const c=t.indexOf("{#");c!=-1&&(l=t.substr(0,c-1).trim(),t=t.substr(c+2,t.lastIndexOf("}")-2-c).trim()),e.chapters[t]={title:l,text:"",group:"",flags:[]};return}if(o.includes("![flag-")||o.includes("![][flag-")){["final","fixed","death"].forEach(l=>{(o.includes(`![flag-${l}]`)||o.includes(`![][flag-${l}]`))&&e.chapters[t].flags.push(l)});return}const a=o.indexOf('[group]:<> ("');a!=-1&&(e.chapters[t].group=o.substr(a+13,o.lastIndexOf('")')-a-13),o.replaceAll(/\[group\]:<>[ ]*\([ ]*"[^"]*"[ ]*\)/g,"").trim()=="")||(e.chapters[t].text+=i+`
`)}),r(),e.key=String(e.properties.last_edited||Object.keys(e.chapters)[0]).trim(),e};var A0={mimetype:SB,decode:TB};const ku=(n,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")=>{let t="";const r=e.length;for(let i=0;i<n;i++)t+=e.charAt(Math.floor(Math.random()*r));return t},EB=n=>{for(let e=n.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}},qf=n=>(n>0||String(n)==="0")&&Math.floor(n)===+n,jo=n=>n.replace(/[^a-z0-9]/gi,""),CB=({key:n,title:e="",flags:t=[],group:r="",text:i="",beforeSpaceLines:s=2,afterSpaceLines:o=0})=>{let a=`
`.repeat(s);return a+=e?`### ${e} {#${n}}`:`### ${n}`,t&&t.length>0&&(a+=`
`+t.map(l=>`![][flag-${l}]`).join(" ")),r&&(a+=`
[group]:<> ("${r}")`),i&&(a+=`
${i}`),a+`
`.repeat(o)},_0=n=>{const e={properties:{},chapters:new Map,linksToChapter:new Map,groups:new Set};let t="",r,i=!1,s=1;const o=n.split(`
`);return o.forEach((a,l)=>{const c=l,u=a.trim();if(i&&(s=c),i=u!=="",t===""&&!u.startsWith("### ")){if(u.startsWith("# ")){e.properties.title=u.replace(/\#/g,"").trim();return}const m=u.indexOf(":");m!==-1&&(e.properties[u.substr(0,m).trim()]=u.substr(m+1).trim());return}if(u.startsWith("### ")){t!==""&&(r.contentEnd=s-1,r.end=c-1,e.chapters.set(t,r)),t=u.substr(4).trim();let m="";const b=t.indexOf("{#");b!=-1&&(m=t.substr(0,b-1).trim(),t=t.substr(b+2,t.lastIndexOf("}")-2-b).trim()),r={title:m,group:"",start:s,contentStart:c,contentEnd:c,end:c,flags:[],links:new Set};return}if(u.includes("![flag-")||u.includes("![][flag-")){["final","fixed","death"].forEach(m=>{(u.includes(`![flag-${m}]`)||u.includes(`![][flag-${m}]`))&&r.flags.push(m)});return}const h=u.indexOf('[group]:<> ("');if(h!=-1){r.group=u.substr(h+13,u.lastIndexOf('")')-h-13),e.groups.add(r.group);return}let f=new RegExp("\\[([^\\[]*)\\]\\(\\s*\\#([^\\)]+)\\s*\\)","g"),p=f.exec(a);for(;p!=null;){const m=p[2].trim();r.links.add(m),e.linksToChapter.has(m)||e.linksToChapter.set(m,new Set),e.linksToChapter.get(m).add(t),p=f.exec(a)}if(e.properties&&e.properties.disableShortLinks==="true")return;let d=new RegExp("\\[([^\\[]*)\\](?!\\()","g");for(p=d.exec(a);p!=null;){const m=p[1].trim();r.links.add(m),e.linksToChapter.has(m)||e.linksToChapter.set(m,new Set),e.linksToChapter.get(m).add(t),p=d.exec(a)}}),t!==""&&(r.end=o.length-1,r.contentEnd=i?r.end:s-1,e.chapters.set(t,r)),e},yo=n=>{const e=Hi({properties:{},chapters:new Map,linksToChapter:new Map,groups:new Set},_0(n)),t=n.split(`
`);e.titlePage=t.slice(0,e.chapters.size>0?e.chapters.values().next().value.contentStart:t.length-1).join(`
`);for(const[r,{contentStart:i,contentEnd:s}]of e.chapters){const o=t.slice(i+1,s+1).filter(l=>{const c=l.trim();return!(c.startsWith("###")||c.includes("[group]:")||c.includes("![][flag-")||c.includes("![flag-"))}).join(`
`),a=t.slice(i,s+1).join(`
`);Object.assign(e.chapters.get(r),{text:o,fullText:a})}return e},x0=(n,e)=>{const t=new Map;for(const[a,l]of e)t.set(l,a);const r=[...e.keys()];let i=n.titlePage,s=0;for(const[a,l]of n.chapters){let c=t.has(a)?r[s++]:a;const{title:u,flags:h,group:f,text:p}=t.has(a)?n.chapters.get(e.get(c)):l;i+=CB({key:c,title:u,flags:h,group:f,text:p,beforeSpaceLines:1,afterSpaceLines:2})}let o=i.replace(/\[([^\[]*)\](\(\s*#(\w+)\s*\))/g,(...a)=>`[${a[1]}](#${t.has(a[3])?t.get(a[3]):a[3]})`);return n.properties.disableShortLinks||(o=o.replace(/\[([^\[]*)\]/g,(...a)=>`[${t.has(a[1])?t.get(a[1]):a[1]}]`)),o},IB=(n,{selectedFlags:e=[],groupsFilter:t=[],onlyNumbers:r=!0}={})=>{const i=yo(n),s=[];for(const[a,{group:l,flags:c}]of i.chapters)r&&!qf(a)||t.length>0&&!t.includes(l)||c.some(u=>e.includes(u))||s.push(a);const o=JSON.parse(JSON.stringify(s));return EB(o),x0(i,new Map(s.map((a,l)=>[String(a),String(o[l])])))},RB=n=>{const e=yo(n),t=[],r=[];let i=0;for(const[s]of e.chapters)qf(s)&&(t.push(s),r.push(++i));return x0(e,new Map(t.map((s,o)=>[String(r[o]),String(s)])))},QB=n=>{const e=yo(n),t=[];for(const[r]of e.chapters)qf(r)&&t.push(Number(r));return t.sort((r,i)=>Number(r)-Number(i)),x0(e,new Map(t.map(r=>[String(r),String(r)])))},PB=window["@hpcc-js/wasm"],Ww=n=>n.replace(/\//g,"\\").replace(/\"/g,'"'),DB=n=>n.replace(/[\]\[\#\)\(]/g,""),LB=(n,e,t)=>e.includes("final")?', color="#ffa200"':e.includes("death")?', color="#000000", fontcolor="#FFFFFF"':e.includes("fixed")?', color="#b02900", fontcolor="#FFFFFF"':"",NB=n=>{const e=_0(n);console.log(e);let t=`digraph{
    graph [fontname="arial", fontsize=10]; 
    node  [fontname="arial", fontsize=12, style="rounded,filled", shape=box];
    edge  [fontname="arial", fontsize=12];
  `;const r=Object.fromEntries([...e.groups].map(s=>[s,[]]));for(let[s,{title:o,group:a,links:l,flags:c}]of e.chapters){t+=`
      ${s} [label="${Ww(o?`${s} - ${o}`:s)}"${LB(s,c)}]`;for(const u of l)e.chapters.has(u)&&(t+=`
        ${s} -> ${DB(u)}`);a&&r[a].push(s)}let i=0;for(let s of e.groups)t+=`
    
    subgraph cluster${i++}{
      graph [fontname="arial", fontsize=10]; 
      node  [fontname="arial", fontsize=12, style="rounded,filled", shape=box];
      edge  [fontname="arial", fontsize=12];
      style=filled
      fillcolor="#EEEEEE"
      color=black
      label = "${Ww(s)}"
      labelfontsize=14
      labelfontname=arial

      ${r[s].join("; ")}
    }`;return t+=`
}`,console.log(t),t},BB=n=>(console.log("generating graph.."),PB.graphviz.layout(NB(n),"svg","dot"));function tS(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Ea=tS();function MB(n){Ea=n}const $B=/[&<>"']/,FB=/[&<>"']/g,WB=/[<>"']|&(?!#?\w+;)/,UB=/[<>"']|&(?!#?\w+;)/g,zB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uw=n=>zB[n];function cn(n,e){if(e){if($B.test(n))return n.replace(FB,Uw)}else if(WB.test(n))return n.replace(UB,Uw);return n}const jB=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function nS(n){return n.replace(jB,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const HB=/(^|[^\[])\^/g;function St(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,i)=>(i=i.source||i,i=i.replace(HB,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}const GB=/[^\w:]/g,VB=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function zw(n,e,t){if(n){let r;try{r=decodeURIComponent(nS(t)).replace(GB,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!VB.test(t)&&(t=qB(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Su={},XB=/^[^:]+:\/*[^/]*$/,YB=/^([^:]+:)[\s\S]*$/,ZB=/^([^:]+:\/*[^/]*)[\s\S]*$/;function qB(n,e){Su[" "+n]||(XB.test(n)?Su[" "+n]=n+"/":Su[" "+n]=ch(n,"/",!0)),n=Su[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(YB,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(ZB,"$1")+e:n+e}const Ch={exec:function(){}};function $r(n){let e=1,t,r;for(;e<arguments.length;e++){t=arguments[e];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}function jw(n,e){const t=n.replace(/\|/g,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function ch(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function KB(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let r=0,i=0;for(;i<t;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return-1}function rS(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Hw(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function Gw(n,e,t,r){const i=e.href,s=e.title?cn(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o,[])};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:cn(o)}}function JB(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}class k0{constructor(e){this.options=e||Ea}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ch(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=JB(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim():t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const s=ch(r,"#");(this.options.pedantic||!s||/ $/.test(s))&&(r=s.trim())}const i={type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(r,[]),text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,i,s,o,a,l,c,u,h,f,p,d,m=t[1].trim();const b=m.length>1,A={type:"list",raw:"",ordered:b,start:b?+m.slice(0,-1):"",loose:!1,items:[]};m=b?`\\d{1,9}\\${m.slice(-1)}`:`\\${m}`,this.options.pedantic&&(m=b?m:"[*+-]");const g=new RegExp(`^( {0,3}${m})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(d=!1,!(!(t=g.exec(e))||this.rules.block.hr.test(e)));){if(r=t[0],e=e.substring(r.length),u=t[2].split(`
`,1)[0],h=e.split(`
`,1)[0],this.options.pedantic?(o=2,p=u.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,p=u.slice(o),o+=t[1].length),l=!1,!u&&/^ *$/.test(h)&&(r+=h+`
`,e=e.substring(h.length+1),d=!0),!d){const O=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),_=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),x=new RegExp(`^( {0,${Math.min(3,o-1)}})(\`\`\`|~~~)`);for(;e&&(f=e.split(`
`,1)[0],u=f,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(x.test(u)||this.rules.block.heading.test(u)||O.test(u)||_.test(e)));){if(u.search(/[^ ]/)>=o||!u.trim())p+=`
`+u.slice(o);else if(!l)p+=`
`+u;else break;!l&&!u.trim()&&(l=!0),r+=f+`
`,e=e.substring(f.length+1)}}A.loose||(c?A.loose=!0:/\n *\n *$/.test(r)&&(c=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(p),i&&(s=i[0]!=="[ ] ",p=p.replace(/^\[[ xX]\] +/,""))),A.items.push({type:"list_item",raw:r,task:!!i,checked:s,loose:!1,text:p}),A.raw+=r}A.items[A.items.length-1].raw=r.trimRight(),A.items[A.items.length-1].text=p.trimRight(),A.raw=A.raw.trimRight();const v=A.items.length;for(a=0;a<v;a++){this.lexer.state.top=!1,A.items[a].tokens=this.lexer.blockTokens(A.items[a].text,[]);const O=A.items[a].tokens.filter(x=>x.type==="space"),_=O.every(x=>{const T=x.raw.split("");let E=0;for(const S of T)if(S===`
`&&(E+=1),E>1)return!0;return!1});!A.loose&&O.length&&_&&(A.loose=!0,A.items[a].loose=!0)}return A}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(r.type="paragraph",r.text=this.options.sanitizer?this.options.sanitizer(t[0]):cn(t[0]),r.tokens=[],this.lexer.inline(r.text,r.tokens)),r}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));const r=t[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:r,raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:jw(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=t[0];let i=r.align.length,s,o,a,l;for(s=0;s<i;s++)/^ *-+: *$/.test(r.align[s])?r.align[s]="right":/^ *:-+: *$/.test(r.align[s])?r.align[s]="center":/^ *:-+ *$/.test(r.align[s])?r.align[s]="left":r.align[s]=null;for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=jw(r.rows[s],r.header.length).map(c=>({text:c}));for(i=r.header.length,o=0;o<i;o++)r.header[o].tokens=[],this.lexer.inline(r.header[o].text,r.header[o].tokens);for(i=r.rows.length,o=0;o<i;o++)for(l=r.rows[o],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inline(l[a].text,l[a].tokens);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const r={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}text(e){const t=this.rules.block.text.exec(e);if(t){const r={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:cn(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):cn(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=ch(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=KB(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Gw(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i||!i.href){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Gw(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const s=i[1]||i[2]||"";if(!s||s&&(r===""||this.rules.inline.punctuation.exec(r))){const o=i[0].length-1;let a,l,c=o,u=0;const h=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(i=h.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=a.length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+u),Math.min(o,l)%2){const p=e.slice(1,o+i.index+l);return{type:"em",raw:e.slice(0,o+i.index+l+1),text:p,tokens:this.lexer.inlineTokens(p,[])}}const f=e.slice(2,o+i.index+l-1);return{type:"strong",raw:e.slice(0,o+i.index+l+1),text:f,tokens:this.lexer.inlineTokens(f,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=cn(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let i,s;return r[2]==="@"?(i=cn(this.options.mangle?t(r[1]):r[1]),s="mailto:"+i):(i=cn(r[1]),s=i),{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let i,s;if(r[2]==="@")i=cn(this.options.mangle?t(r[0]):r[0]),s="mailto:"+i;else{let o;do o=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(o!==r[0]);i=cn(r[0]),r[1]==="www."?s="http://"+i:s=i}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):cn(r[0]):r[0]:i=cn(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const Ye={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ch,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ye._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Ye._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Ye.def=St(Ye.def).replace("label",Ye._label).replace("title",Ye._title).getRegex();Ye.bullet=/(?:[*+-]|\d{1,9}[.)])/;Ye.listItemStart=St(/^( *)(bull) */).replace("bull",Ye.bullet).getRegex();Ye.list=St(Ye.list).replace(/bull/g,Ye.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ye.def.source+")").getRegex();Ye._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Ye._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Ye.html=St(Ye.html,"i").replace("comment",Ye._comment).replace("tag",Ye._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Ye.paragraph=St(Ye._paragraph).replace("hr",Ye.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ye._tag).getRegex();Ye.blockquote=St(Ye.blockquote).replace("paragraph",Ye.paragraph).getRegex();Ye.normal=$r({},Ye);Ye.gfm=$r({},Ye.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Ye.gfm.table=St(Ye.gfm.table).replace("hr",Ye.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ye._tag).getRegex();Ye.gfm.paragraph=St(Ye._paragraph).replace("hr",Ye.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ye.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ye._tag).getRegex();Ye.pedantic=$r({},Ye.normal,{html:St(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ye._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ch,paragraph:St(Ye.normal._paragraph).replace("hr",Ye.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ye.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const $e={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ch,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ch,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};$e._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";$e.punctuation=St($e.punctuation).replace(/punctuation/g,$e._punctuation).getRegex();$e.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;$e.escapedEmSt=/\\\*|\\_/g;$e._comment=St(Ye._comment).replace("(?:-->|$)","-->").getRegex();$e.emStrong.lDelim=St($e.emStrong.lDelim).replace(/punct/g,$e._punctuation).getRegex();$e.emStrong.rDelimAst=St($e.emStrong.rDelimAst,"g").replace(/punct/g,$e._punctuation).getRegex();$e.emStrong.rDelimUnd=St($e.emStrong.rDelimUnd,"g").replace(/punct/g,$e._punctuation).getRegex();$e._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;$e._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;$e._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;$e.autolink=St($e.autolink).replace("scheme",$e._scheme).replace("email",$e._email).getRegex();$e._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;$e.tag=St($e.tag).replace("comment",$e._comment).replace("attribute",$e._attribute).getRegex();$e._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;$e._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;$e._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;$e.link=St($e.link).replace("label",$e._label).replace("href",$e._href).replace("title",$e._title).getRegex();$e.reflink=St($e.reflink).replace("label",$e._label).replace("ref",Ye._label).getRegex();$e.nolink=St($e.nolink).replace("ref",Ye._label).getRegex();$e.reflinkSearch=St($e.reflinkSearch,"g").replace("reflink",$e.reflink).replace("nolink",$e.nolink).getRegex();$e.normal=$r({},$e);$e.pedantic=$r({},$e.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:St(/^!?\[(label)\]\((.*?)\)/).replace("label",$e._label).getRegex(),reflink:St(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$e._label).getRegex()});$e.gfm=$r({},$e.normal,{escape:St($e.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});$e.gfm.url=St($e.gfm.url,"i").replace("email",$e.gfm._extended_email).getRegex();$e.breaks=$r({},$e.gfm,{br:St($e.br).replace("{2,}","*").getRegex(),text:St($e.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function eM(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Vw(n){let e="",t,r;const i=n.length;for(t=0;t<i;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}class Ci{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ea,this.options.tokenizer=this.options.tokenizer||new k0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Ye.normal,inline:$e.normal};this.options.pedantic?(t.block=Ye.pedantic,t.inline=$e.pedantic):this.options.gfm&&(t.block=Ye.gfm,this.options.breaks?t.inline=$e.breaks:t.inline=$e.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ye,inline:$e}}static lex(e,t){return new Ci(t).lex(e)}static lexInline(e,t){return new Ci(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(function(u){c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let r,i,s,o=e,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+Hw("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+Hw("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,c)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,Vw)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,Vw))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(function(p){f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(s,eM)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class S0{constructor(e){this.options=e||Ea}code(e,t,r){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,i);s!=null&&s!==e&&(r=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+cn(i,!0)+'">'+(r?e:cn(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:cn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,t,r,i){if(this.options.headerIds){const s=this.options.headerPrefix+i.slug(r);return`<h${t} id="${s}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,r){const i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(e=zw(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i='<a href="'+cn(e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>",i}image(e,t,r){if(e=zw(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}}class iS{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class sS{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do i++,r=e+"-"+i;while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=i,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class Ii{constructor(e){this.options=e||Ea,this.options.renderer=this.options.renderer||new S0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new iS,this.slugger=new sS}static parse(e,t){return new Ii(t).parse(e)}static parseInline(e,t){return new Ii(t).parseInline(e)}parse(e,t=!0){let r="",i,s,o,a,l,c,u,h,f,p,d,m,b,A,g,v,O,_,x;const T=e.length;for(i=0;i<T;i++){if(p=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(x=this.options.extensions.renderers[p.type].call({parser:this},p),x!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type))){r+=x||"";continue}switch(p.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(p.tokens),p.depth,nS(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(p.text,p.lang,p.escaped);continue}case"table":{for(h="",u="",a=p.header.length,s=0;s<a;s++)u+=this.renderer.tablecell(this.parseInline(p.header[s].tokens),{header:!0,align:p.align[s]});for(h+=this.renderer.tablerow(u),f="",a=p.rows.length,s=0;s<a;s++){for(c=p.rows[s],u="",l=c.length,o=0;o<l;o++)u+=this.renderer.tablecell(this.parseInline(c[o].tokens),{header:!1,align:p.align[o]});f+=this.renderer.tablerow(u)}r+=this.renderer.table(h,f);continue}case"blockquote":{f=this.parse(p.tokens),r+=this.renderer.blockquote(f);continue}case"list":{for(d=p.ordered,m=p.start,b=p.loose,a=p.items.length,f="",s=0;s<a;s++)g=p.items[s],v=g.checked,O=g.task,A="",g.task&&(_=this.renderer.checkbox(v),b?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=_+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=_+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:_}):A+=_),A+=this.parse(g.tokens,b),f+=this.renderer.listitem(A,O,v);r+=this.renderer.list(f,d,m);continue}case"html":{r+=this.renderer.html(p.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(p.tokens));continue}case"text":{for(f=p.tokens?this.parseInline(p.tokens):p.text;i+1<T&&e[i+1].type==="text";)p=e[++i],f+=`
`+(p.tokens?this.parseInline(p.tokens):p.text);r+=t?this.renderer.paragraph(f):f;continue}default:{const E='Token with "'+p.type+'" type was not found.';if(this.options.silent){console.error(E);return}else throw new Error(E)}}}return r}parseInline(e,t){t=t||this.renderer;let r="",i,s,o;const a=e.length;for(i=0;i<a;i++){if(s=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(o=this.options.extensions.renderers[s.type].call({parser:this},s),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){r+=o||"";continue}switch(s.type){case"escape":{r+=t.text(s.text);break}case"html":{r+=t.html(s.text);break}case"link":{r+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break}case"image":{r+=t.image(s.href,s.title,s.text);break}case"strong":{r+=t.strong(this.parseInline(s.tokens,t));break}case"em":{r+=t.em(this.parseInline(s.tokens,t));break}case"codespan":{r+=t.codespan(s.text);break}case"br":{r+=t.br();break}case"del":{r+=t.del(this.parseInline(s.tokens,t));break}case"text":{r+=t.text(s.text);break}default:{const l='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return r}}function Ze(n,e,t){if(typeof n=="undefined"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=$r({},Ze.defaults,e||{}),rS(e),t){const r=e.highlight;let i;try{i=Ci.lex(n,e)}catch(a){return t(a)}const s=function(a){let l;if(!a)try{e.walkTokens&&Ze.walkTokens(i,e.walkTokens),l=Ii.parse(i,e)}catch(c){a=c}return e.highlight=r,a?t(a):t(null,l)};if(!r||r.length<3||(delete e.highlight,!i.length))return s();let o=0;Ze.walkTokens(i,function(a){a.type==="code"&&(o++,setTimeout(()=>{r(a.text,a.lang,function(l,c){if(l)return s(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),o--,o===0&&s()})},0))}),o===0&&s();return}try{const r=Ci.lex(n,e);return e.walkTokens&&Ze.walkTokens(r,e.walkTokens),Ii.parse(r,e)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+cn(r.message+"",!0)+"</pre>";throw r}}Ze.options=Ze.setOptions=function(n){return $r(Ze.defaults,n),MB(Ze.defaults),Ze};Ze.getDefaults=tS;Ze.defaults=Ea;Ze.use=function(...n){const e=$r({},...n),t=Ze.defaults.extensions||{renderers:{},childTokens:{}};let r;n.forEach(i=>{if(i.extensions&&(r=!0,i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){const o=t.renderers?t.renderers[s.name]:null;o?t.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[s.level]?t[s.level].unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}s.childTokens&&(t.childTokens[s.name]=s.childTokens)})),i.renderer){const s=Ze.defaults.renderer||new S0;for(const o in i.renderer){const a=s[o];s[o]=(...l)=>{let c=i.renderer[o].apply(s,l);return c===!1&&(c=a.apply(s,l)),c}}e.renderer=s}if(i.tokenizer){const s=Ze.defaults.tokenizer||new k0;for(const o in i.tokenizer){const a=s[o];s[o]=(...l)=>{let c=i.tokenizer[o].apply(s,l);return c===!1&&(c=a.apply(s,l)),c}}e.tokenizer=s}if(i.walkTokens){const s=Ze.defaults.walkTokens;e.walkTokens=function(o){i.walkTokens.call(this,o),s&&s.call(this,o)}}r&&(e.extensions=t),Ze.setOptions(e)})};Ze.walkTokens=function(n,e){for(const t of n)switch(e.call(Ze,t),t.type){case"table":{for(const r of t.header)Ze.walkTokens(r.tokens,e);for(const r of t.rows)for(const i of r)Ze.walkTokens(i.tokens,e);break}case"list":{Ze.walkTokens(t.items,e);break}default:Ze.defaults.extensions&&Ze.defaults.extensions.childTokens&&Ze.defaults.extensions.childTokens[t.type]?Ze.defaults.extensions.childTokens[t.type].forEach(function(r){Ze.walkTokens(t[r],e)}):t.tokens&&Ze.walkTokens(t.tokens,e)}};Ze.parseInline=function(n,e){if(typeof n=="undefined"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");e=$r({},Ze.defaults,e||{}),rS(e);try{const t=Ci.lexInline(n,e);return e.walkTokens&&Ze.walkTokens(t,e.walkTokens),Ii.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+cn(t.message+"",!0)+"</pre>";throw t}};Ze.Parser=Ii;Ze.parser=Ii.parse;Ze.Renderer=S0;Ze.TextRenderer=iS;Ze.Lexer=Ci;Ze.lexer=Ci.lex;Ze.Tokenizer=k0;Ze.Slugger=sS;Ze.parse=Ze;Ze.options;Ze.setOptions;Ze.use;Ze.walkTokens;Ze.parseInline;Ii.parse;Ci.lex;if(typeof DOMParser=="undefined"){const n=global.JSDOM||require("jsdom").JSDOM;global.DOMParser=new n().window.DOMParser,global.document=new n().window.document}const Ih=document.createElement("p"),oS=n=>(Ih.innerHTML=n,Ih.textContent),ro=n=>(Ih.textContent=n,Ih.innerHTML);window.marked=Ze;const tM={heading(n){},nptable(n){},hr(n){},blockquote(n){},code(n){},def(n){},list(n){},table(n){},lheading(n){}};Ze.use({tokenizer:tM});const nM=n=>{Ze.use({tokenizer:{reflink(e){if(n)return;const r=/^\[(.*?)\]/.exec(e);if(r)return{type:"link",raw:r[0],text:"",title:"",href:"#"+r[1].trim(),tokens:[]}}}})},rM={html:n=>ro(n),paragraph:n=>`${n}<br>`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:n=>oS(n),code:n=>"",reflink:(...n)=>JSON.stringify(n)+"sdfvgbfvdcsa"},Ri=(n,e=rM,t=[])=>Ze(n.replace(/\n/g,`\\
`),{renderer:Object.assign(new Ze.Renderer,e,{code:(r,...i)=>e.code(r.replaceAll(`\\
`,`
`).replace(`
`,""),...i)})}),T0=n=>{const e={disableShortLinks:!1,page:{width:"14.8",height:"21",margins:["2.5","2","2","2"]},textFont:{family:"Times New Roman",spacing:"100%",size:"12pt"},titleFont:{family:"Times New Roman",spacing:"100%",size:"12pt"},titleStyle:"default",renameTitle:({book:t,chapter:r,key:i,title:s})=>"<b>"+(s==""?i:s)+"</b>",renameLink:({book:t,chapter:r,text:i,title:s,key:o,currentChapter:a})=>i==""?r==null?"ERROR":s==""?o:s:i,renameAnchor:({book:t,key:r})=>r};if(n.disableShortLinks&&n.disableShortLinks.trim().toLowerCase()=="true"&&(e.disableShortLinks=!0),n.page){const t=n.page.split(",");if(t[0]){const r={A3:"29.70 42.00",A4:"21.00 29.70",A5:"14.80 21.00",A6:"10.50 14.80",B4:"25.00 35.30",B5:"17.60 25.00",B6:"12.50 17.60",Letter:"21.59 27.94"},i=(r[t[0].trim()]?r[t[0].trim()]:t[0].trim()).split(/\s+/);i.length>=2&&(e.page.width=i[0],e.page.height=i[1])}if(t[1]){const r=t[1].trim().split(/\s+/);r.length>=4&&(e.page.margins=r)}}if(n.textFont){const t=n.textFont.split(",");if(t[0]&&(e.textFont.family=t[0].trim()),t[1]){let r=t[1].trim();r.endsWith("pt")||(r+="pt"),e.textFont.size=r}t[2]&&(e.textFont.spacing=t[2].trim())}if(n.titleFont){const t=n.titleFont.split(",");if(t[0]&&(e.titleFont.family=t[0].trim()),t[1]){let r=t[1].trim();r.endsWith("pt")||(r+="pt"),e.titleFont.size=r}t[2]&&(e.titleFont.spacing=t[2].trim())}if(n.titleStyle){const t=["default","inline"],r=t.indexOf(n.titleStyle.trim().toLowerCase());r!=-1&&(e.titleStyle=t[r])}return n.renameTitle&&(e.renameTitle=new Function("{book, chapter, key, title}","return "+n.renameTitle.trim())),n.renameLink&&(e.renameLink=new Function("{book, text, chapter, title, key, currentChapter}","return "+n.renameLink.trim())),n.renameAnchor&&(e.renameAnchor=new Function("{book, key}","return "+n.renameAnchor.trim())),console.log("Parsing book properties"),console.log(e),e},fg=qf,iM="application/xml",sM=n=>Object.keys(n).sort((e,t)=>{const r=fg(e),i=fg(t);if(!r&&i)return-1;if(r&&!i)return 1;if(!r&&!i)return e.localeCompare(t);if(r&&i)return parseInt(e,10)-parseInt(t,10)}),oM=n=>{const e={},t={},r=["lgc_version","title","author","version","revision","table_of_contents","editing_action","editing_chapter"],i=new DOMParser().parseFromString(n,"text/xml");[...i.documentElement.children||i.documentElement.childNodes].forEach(o=>{const a=o.getAttribute("name"),l=o.getAttribute("type"),c=o.getAttribute("group");if(l==="entity"&&a==="game"){[...o.children].forEach(h=>{const f=h.getAttribute("name"),p=h.innerHTML.substring(9,h.innerHTML.length-3);f=="editing_chapter"||r.includes(f)&&(e[f]=p)});return}if(l==="entity"&&a==="map_data"){[...o.children].forEach(h=>{const f=h.getAttribute("name"),p=h.innerHTML.substring(9,h.innerHTML.length-3);f==="map_file"&&(e.map=p)});return}let u={title:"",text:"",flags:[]};c&&(u.group=c),[...o.children].forEach(h=>{const f=h.getAttribute("name"),p=h.innerHTML.substring(9,h.innerHTML.length-3);f==="chapter_title"&&p&&(u.title=p),f==="description"&&(u.text=p),f==="map_position"&&(u.map=p),f.startsWith("flag_")&&p==="true"&&u.flags.push(f.substring(5))}),u.text=oS(u.text.replace(/\<\/\p\>/g,`
`).replace(/\<\p\>/g,"").replace(/\<i\>/g,"&lt;i&gt;").replace(/\<\/i\>/g,"&lt;/i&gt;").replace(/\<b\>/g,"&lt;b&gt;").replace(/\<\/b\>/g,"&lt;/b&gt;").replace(/\<u\>/g,"&lt;b&gt;").replace(/\<\/u\>/g,"&lt;/b&gt;").replace(/{link (\w+):([^\}\{]+)}/g,(...h)=>`[${h[2].trim()=="@T"?"":h[2]}](#${h[1]})`).replace(/[\n\s]+$/,"")),t[a]=u});let s=`# ${e.title}
`;return Object.entries(e).forEach(([o,a])=>{o!=="title"&&(s+=`${o}: ${a.trim()}
`)}),s+=`


`,sM(t).forEach(o=>{const a=t[o];if(s+=a.title?`### ${a.title} {#${o}}
`:`### ${o}
`,a.flags&&a.flags.length){const l={death:"![][flag-death]",final:"![][flag-final]",fixed:"![][flag-fixed]"};s+=a.flags.map(c=>l[c]).join(" ")+`
`}a.group&&(s+=`[group]:<> ("${a.group}")
`),s+=a.text.replace(/\n+$/,"")+`


`}),s},aM=["<b>","</b>","<i>","</i>","<u>","</u>"],lM={html:n=>aM.includes(n.trim().toLowerCase())?n.trim().toLowerCase():ro(n),paragraph:n=>`<p>${n}</p>`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:n=>"`"+n+"`",code:(n,e)=>"<p>```"+e+ro(n).replace(/\n/g,"</p><p>")+"```</p>",link:(n,e,t)=>`{link ${n.replace("#","")}:${t||"@T"}}`},cM=n=>{const e=document.createElement("p");return e.innerHTML=n,e.innerHTML},uM=(n,e)=>`<entity group="setup" name="game" type="entity"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"/><attribute name="lgc_version" type="string"><![CDATA[${n.lgc_version||""}]]></attribute><attribute name="title" type="string"><![CDATA[${n.title||""}]]></attribute><attribute name="author" type="string"><![CDATA[${n.author||""}]]></attribute><attribute name="version" type="string"><![CDATA[${n.version||""}]]></attribute><attribute name="revision" type="integer"><![CDATA[${n.revision||"1"}]]></attribute><attribute name="editing_action" type="string"><![CDATA[${n.editing_action||"WRITING"}]]></attribute><attribute name="table_of_contents" type="string"><![CDATA[${n.table_of_contents||"P(ALL)"}]]></attribute><attribute name="editing_chapter" type="string"><![CDATA[${e||"1"}]]></attribute></entity>`,hM=n=>n.map?`<entity group="setup" name="map_data" type="entity"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"/><attribute name="map_file" type="string"><![CDATA[${n.map}]]></attribute></entity>`:"",fM=(n,e)=>`<entity group="${e.group||""}" name="${n}" type="${fg(n)?"chapter":"section"}"><attribute name="description" type="string"><![CDATA[${cM(Ri(e.text,lM))||"<p></p>"}]]></attribute><attribute name="chapter_title" type="string"><![CDATA[${e.title||""}]]></attribute>${e.type&&e.type!=="chapter"?"":`<attribute name="flag_final" type="boolean"><![CDATA[${e.flags&&e.flags.includes("final")?"true":"false"}]]></attribute><attribute name="flag_fixed" type="boolean"><![CDATA[${e.flags&&e.flags.includes("fixed")?"true":"false"}]]></attribute><attribute name="flag_death" type="boolean"><![CDATA[${e.flags&&e.flags.includes("death")?"true":"false"}]]></attribute>`}`+(e.map?`<attribute name="map_position" type="string"><![CDATA[${e.map||""}]]></attribute>`:"")+"</entity>",dM=n=>{const e=yo(n),{chapters:t,properties:r}=e;let i=`<?xml version="1.0" encoding="UTF-8"?><entities>${uM(r)+hM(r)}`;for(const[s,o]of t)i+=fM(s,o);return i+"</entities>"};var dg={decode:oM,encode:dM,mimetype:iM};const pM=`
  <style:style style:name="right" style:family="paragraph" style:parent-style-name="Standard">
    <style:paragraph-properties fo:text-align="end" style:justify-single-word="false"/>
  </style:style>
  <style:style style:name="justify" style:family="paragraph" style:parent-style-name="Standard">
    <style:paragraph-properties fo:text-align="justify" style:justify-single-word="false"/>
  </style:style>
  <style:style style:name="break" style:family="paragraph" style:parent-style-name="Standard">
    <style:paragraph-properties fo:break-after="page"/>
  </style:style>
  <style:style style:name="bold" style:family="text">
   <style:text-properties fo:font-weight="bold" style:font-weight-asian="bold" style:font-weight-complex="bold"/>
  </style:style>
  <style:style style:name="underline" style:family="text">
    <style:text-properties style:text-underline-style="solid" style:text-underline-width="auto" style:text-underline-color="font-color"/>
  </style:style>
  <style:style style:name="italic" style:family="text">
    <style:text-properties fo:font-style="italic" style:font-style-asian="italic" style:font-style-complex="italic"/>
  </style:style>`,mM=(n,e)=>`<?xml version="1.0" encoding="UTF-8"?>

<office:document xmlns:grddl="http://www.w3.org/2003/g/data-view#" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:css3t="http://www.w3.org/TR/css3-text/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:formx="urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:dom="http://www.w3.org/2001/xml-events" xmlns:script="urn:oasis:names:tc:opendocument:xmlns:script:1.0" xmlns:form="urn:oasis:names:tc:opendocument:xmlns:form:1.0" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:field="urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0" xmlns:of="urn:oasis:names:tc:opendocument:xmlns:of:1.2" xmlns:oooc="http://openoffice.org/2004/calc" xmlns:ooow="http://openoffice.org/2004/writer" xmlns:config="urn:oasis:names:tc:opendocument:xmlns:config:1.0" xmlns:tableooo="http://openoffice.org/2009/table" xmlns:text="urn:oasis:names:tc:opendocument:xmlns:text:1.0" xmlns:calcext="urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0" xmlns:fo="urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:loext="urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ooo="http://openoffice.org/2004/office" xmlns:table="urn:oasis:names:tc:opendocument:xmlns:table:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:officeooo="http://openoffice.org/2009/office" xmlns:style="urn:oasis:names:tc:opendocument:xmlns:style:1.0" xmlns:drawooo="http://openoffice.org/2010/draw" xmlns:draw="urn:oasis:names:tc:opendocument:xmlns:drawing:1.0" xmlns:dr3d="urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0" xmlns:svg="urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0" xmlns:chart="urn:oasis:names:tc:opendocument:xmlns:chart:1.0" xmlns:rpt="http://openoffice.org/2005/report" xmlns:number="urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0" office:version="1.2" office:mimetype="application/vnd.oasis.opendocument.text">
 <office:meta><meta:creation-date>2017-01-01T14:28:30.863048091</meta:creation-date><meta:generator>LibreOffice/6.4.1.2$Linux_X86_64 LibreOffice_project/e1ad903d8acbc5f5b474f1d8ec3defef24b8c46b</meta:generator><meta:editing-cycles>0</meta:editing-cycles><meta:editing-duration>P0D</meta:editing-duration><meta:document-statistic meta:table-count="0" meta:image-count="0" meta:object-count="0" meta:page-count="2" meta:paragraph-count="14" meta:word-count="48" meta:character-count="272" meta:non-whitespace-character-count="237"/></office:meta>
 <office:settings>
  <config:config-item-set config:name="ooo:view-settings">
   <config:config-item config:name="ViewAreaTop" config:type="long">7895</config:config-item>
   <config:config-item config:name="ViewAreaLeft" config:type="long">0</config:config-item>
   <config:config-item config:name="ViewAreaWidth" config:type="long">33413</config:config-item>
   <config:config-item config:name="ViewAreaHeight" config:type="long">15162</config:config-item>
   <config:config-item config:name="ShowRedlineChanges" config:type="boolean">true</config:config-item>
   <config:config-item config:name="InBrowseMode" config:type="boolean">false</config:config-item>
   <config:config-item-map-indexed config:name="Views">
    <config:config-item-map-entry>
     <config:config-item config:name="ViewId" config:type="string">view2</config:config-item>
     <config:config-item config:name="ViewLeft" config:type="long">16095</config:config-item>
     <config:config-item config:name="ViewTop" config:type="long">7869</config:config-item>
     <config:config-item config:name="VisibleLeft" config:type="long">0</config:config-item>
     <config:config-item config:name="VisibleTop" config:type="long">7895</config:config-item>
     <config:config-item config:name="VisibleRight" config:type="long">33412</config:config-item>
     <config:config-item config:name="VisibleBottom" config:type="long">23056</config:config-item>
     <config:config-item config:name="ZoomType" config:type="short">0</config:config-item>
     <config:config-item config:name="ViewLayoutColumns" config:type="short">1</config:config-item>
     <config:config-item config:name="ViewLayoutBookMode" config:type="boolean">false</config:config-item>
     <config:config-item config:name="ZoomFactor" config:type="short">140</config:config-item>
     <config:config-item config:name="IsSelectedFrame" config:type="boolean">false</config:config-item>
     <config:config-item config:name="AnchoredTextOverflowLegacy" config:type="boolean">true</config:config-item>
    </config:config-item-map-entry>
   </config:config-item-map-indexed>
  </config:config-item-set>
  <config:config-item-set config:name="ooo:configuration-settings">
   <config:config-item config:name="PrintPaperFromSetup" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintFaxName" config:type="string"/>
   <config:config-item config:name="PrintSingleJobs" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintProspectRTL" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintProspect" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintReversed" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintTextPlaceholder" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintTables" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintPageBackground" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintLeftPages" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintAnnotationMode" config:type="short">0</config:config-item>
   <config:config-item config:name="PrintControls" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintHiddenText" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintDrawings" config:type="boolean">true</config:config-item>
   <config:config-item config:name="IgnoreFirstLineIndentInNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrinterSetup" config:type="base64Binary"/>
   <config:config-item config:name="CollapseEmptyCellPara" config:type="boolean">true</config:config-item>
   <config:config-item config:name="UseOldPrinterMetrics" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UseOldNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddExternalLeading" config:type="boolean">true</config:config-item>
   <config:config-item config:name="TreatSingleColumnBreakAsPageBreak" config:type="boolean">false</config:config-item>
   <config:config-item config:name="IsLabelDocument" config:type="boolean">false</config:config-item>
   <config:config-item config:name="RsidRoot" config:type="int">1031266</config:config-item>
   <config:config-item config:name="ConsiderTextWrapOnObjPos" config:type="boolean">false</config:config-item>
   <config:config-item config:name="TableRowKeep" config:type="boolean">false</config:config-item>
   <config:config-item config:name="TabsRelativeToIndent" config:type="boolean">true</config:config-item>
   <config:config-item config:name="UpdateFromTemplate" config:type="boolean">true</config:config-item>
   <config:config-item config:name="SaveVersionOnClose" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UseFormerTextWrapping" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ChartAutoUpdate" config:type="boolean">true</config:config-item>
   <config:config-item config:name="AllowPrintJobCancel" config:type="boolean">true</config:config-item>
   <config:config-item config:name="AddParaTableSpacing" config:type="boolean">true</config:config-item>
   <config:config-item config:name="AddParaSpacingToTableCells" config:type="boolean">true</config:config-item>
   <config:config-item config:name="UseFormerLineSpacing" config:type="boolean">false</config:config-item>
   <config:config-item config:name="OutlineLevelYieldsNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AlignTabStopPosition" config:type="boolean">true</config:config-item>
   <config:config-item config:name="DoNotJustifyLinesWithManualBreak" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedOnlyUsedFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="LinkUpdateMode" config:type="short">1</config:config-item>
   <config:config-item config:name="CurrentDatabaseCommandType" config:type="int">0</config:config-item>
   <config:config-item config:name="CurrentDatabaseCommand" config:type="string"/>
   <config:config-item config:name="CharacterCompressionType" config:type="short">0</config:config-item>
   <config:config-item config:name="SmallCapsPercentage66" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ApplyUserData" config:type="boolean">false</config:config-item>
   <config:config-item config:name="StylesNoDefault" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbeddedDatabaseName" config:type="string"/>
   <config:config-item config:name="FloattableNomargins" config:type="boolean">false</config:config-item>
   <config:config-item config:name="BackgroundParaOverDrawings" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrinterName" config:type="string"/>
   <config:config-item config:name="UseFormerObjectPositioning" config:type="boolean">false</config:config-item>
   <config:config-item config:name="TabOverMargin" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SaveGlobalDocumentLinks" config:type="boolean">false</config:config-item>
   <config:config-item config:name="CurrentDatabaseDataSource" config:type="string"/>
   <config:config-item config:name="IsKernAsianPunctuation" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SaveThumbnail" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrinterPaperFromSetup" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrinterIndependentLayout" config:type="string">high-resolution</config:config-item>
   <config:config-item config:name="TabOverflow" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintGraphics" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PropLineSpacingShrinksFirstLine" config:type="boolean">true</config:config-item>
   <config:config-item config:name="DoNotResetParaAttrsForNumFont" config:type="boolean">false</config:config-item>
   <config:config-item config:name="FieldAutoUpdate" config:type="boolean">true</config:config-item>
   <config:config-item config:name="IgnoreTabsAndBlanksForLineCalculation" config:type="boolean">false</config:config-item>
   <config:config-item config:name="RedlineProtectionKey" config:type="base64Binary"/>
   <config:config-item config:name="EmbedComplexScriptFonts" config:type="boolean">true</config:config-item>
   <config:config-item config:name="LoadReadonly" config:type="boolean">false</config:config-item>
   <config:config-item config:name="DoNotCaptureDrawObjsOnPage" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ClipAsCharacterAnchoredWriterFlyFrames" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintBlackFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="DisableOffPagePositioning" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SurroundTextWrapSmall" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UnxForceZeroExtLeading" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedAsianScriptFonts" config:type="boolean">true</config:config-item>
   <config:config-item config:name="TabAtLeftIndentForParagraphsInList" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintRightPages" config:type="boolean">true</config:config-item>
   <config:config-item config:name="Rsid" config:type="int">1168269</config:config-item>
   <config:config-item config:name="MathBaselineAlignment" config:type="boolean">true</config:config-item>
   <config:config-item config:name="MsWordCompTrailingBlanks" config:type="boolean">false</config:config-item>
   <config:config-item config:name="InvertBorderSpacing" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UnbreakableNumberings" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddFrameOffsets" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ClippedPictures" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedLatinScriptFonts" config:type="boolean">true</config:config-item>
   <config:config-item config:name="EmbedSystemFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddParaTableSpacingAtStart" config:type="boolean">true</config:config-item>
   <config:config-item config:name="ContinuousEndnotes" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ApplyParagraphMarkFormatToNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SubtractFlysAnchoredAtFlys" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmptyDbFieldHidesPara" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ProtectForm" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddVerticalFrameOffsets" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintEmptyPages" config:type="boolean">false</config:config-item>
  </config:config-item-set>
 </office:settings>
 <office:scripts>
  <office:script script:language="ooo:Basic">
   <ooo:libraries xmlns:ooo="http://openoffice.org/2004/office" xmlns:xlink="http://www.w3.org/1999/xlink">
    <ooo:library-embedded ooo:name="Standard"/>
   </ooo:libraries>
  </office:script>
 </office:scripts>
 <office:font-face-decls>
  <style:font-face style:name="FreeSans1" svg:font-family="FreeSans" style:font-family-generic="swiss"/>
  <style:font-face style:name="Liberation Serif" svg:font-family="&apos;Liberation Serif&apos;" style:font-family-generic="roman" style:font-pitch="variable"/>
  <style:font-face style:name="Times New Roman" svg:font-family="&apos;Times New Roman&apos;" style:font-adornments="Normale" style:font-family-generic="roman" style:font-pitch="variable"/>
  <style:font-face style:name="Liberation Sans" svg:font-family="&apos;Liberation Sans&apos;" style:font-family-generic="swiss" style:font-pitch="variable"/>
  <style:font-face style:name="FreeSans" svg:font-family="FreeSans" style:font-family-generic="system" style:font-pitch="variable"/>
  <style:font-face style:name="Noto Sans CJK SC Regular" svg:font-family="&apos;Noto Sans CJK SC Regular&apos;" style:font-family-generic="system" style:font-pitch="variable"/>
 </office:font-face-decls>
 <office:styles>
  <style:default-style style:family="graphic">
   <style:graphic-properties svg:stroke-color="#3465a4" draw:fill-color="#729fcf" fo:wrap-option="no-wrap" draw:shadow-offset-x="0.3cm" draw:shadow-offset-y="0.3cm" draw:start-line-spacing-horizontal="0.283cm" draw:start-line-spacing-vertical="0.283cm" draw:end-line-spacing-horizontal="0.283cm" draw:end-line-spacing-vertical="0.283cm" style:flow-with-text="false"/>
   <style:paragraph-properties style:text-autospace="ideograph-alpha" style:line-break="strict" style:font-independent-line-spacing="false">
    <style:tab-stops/>
   </style:paragraph-properties>
   <style:text-properties style:use-window-font-color="true" style:font-name="Liberation Serif" fo:font-size="12pt" fo:language="en" fo:country="US" style:letter-kerning="true" style:font-name-asian="Noto Sans CJK SC Regular" style:font-size-asian="10.5pt" style:language-asian="zh" style:country-asian="CN" style:font-name-complex="FreeSans" style:font-size-complex="12pt" style:language-complex="hi" style:country-complex="IN"/>
  </style:default-style>
  <style:default-style style:family="paragraph">
   <style:paragraph-properties fo:orphans="2" fo:widows="2" fo:hyphenation-ladder-count="no-limit" style:text-autospace="ideograph-alpha" style:punctuation-wrap="hanging" style:line-break="strict" style:tab-stop-distance="1.251cm" style:writing-mode="page"/>
   <style:text-properties style:use-window-font-color="true" style:font-name="Liberation Serif" fo:font-size="12pt" fo:language="en" fo:country="US" style:letter-kerning="true" style:font-name-asian="Noto Sans CJK SC Regular" style:font-size-asian="10.5pt" style:language-asian="zh" style:country-asian="CN" style:font-name-complex="FreeSans" style:font-size-complex="12pt" style:language-complex="hi" style:country-complex="IN" fo:hyphenate="false" fo:hyphenation-remain-char-count="2" fo:hyphenation-push-char-count="2" loext:hyphenation-no-caps="false"/>
  </style:default-style>
  <style:default-style style:family="table">
   <style:table-properties table:border-model="collapsing"/>
  </style:default-style>
  <style:default-style style:family="table-row">
   <style:table-row-properties fo:keep-together="auto"/>
  </style:default-style>
  <style:style style:name="Standard" style:family="paragraph" style:class="text">
   <style:paragraph-properties fo:line-height="${e.textFont.spacing}" style:page-number="auto"/>
   <style:text-properties style:font-name="${e.textFont.family}" fo:font-family="&apos;${e.textFont.family}&apos;" style:font-style-name="Normale" style:font-family-generic="roman" style:font-pitch="variable" fo:language="zxx" fo:country="none" fo:font-size="${e.textFont.size}" />
  </style:style>
  <style:style style:name="Heading" style:family="paragraph" style:parent-style-name="Standard" style:next-style-name="Text_20_body" style:class="text">
   <style:text-properties style:font-name="Liberation Sans" fo:font-family="&apos;Liberation Sans&apos;" style:font-family-generic="swiss" style:font-pitch="variable" fo:font-size="14pt" style:font-name-asian="Noto Sans CJK SC Regular" style:font-family-asian="&apos;Noto Sans CJK SC Regular&apos;" style:font-family-generic-asian="system" style:font-pitch-asian="variable" style:font-size-asian="14pt" style:font-name-complex="FreeSans" style:font-family-complex="FreeSans" style:font-family-generic-complex="system" style:font-pitch-complex="variable" style:font-size-complex="14pt"/>
  </style:style>
  <style:style style:name="Heading_3" style:family="paragraph" style:display-name="Heading 3" style:parent-style-name="Heading" style:next-style-name="Standard" style:default-outline-level="3" style:class="text">
    <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
    <style:text-properties fo:font-weight="bold" style:font-weight-asian="bold" style:font-weight-complex="bold"/>
    <style:paragraph-properties fo:line-height="${e.titleFont.spacing}" style:page-number="auto"/>
    <style:text-properties style:font-name="${e.titleFont.family}" fo:font-family="&apos;${e.titleFont.family}&apos;" style:font-style-name="Normale" style:font-family-generic="roman" fo:font-size="${e.titleFont.size}" style:font-pitch="variable" fo:language="zxx" fo:country="none"/>
  </style:style>
  <style:style style:name="Text_20_body" style:display-name="Text body" style:family="paragraph" style:parent-style-name="Standard" style:class="text">
   <style:paragraph-properties fo:margin-top="0cm" fo:margin-bottom="0.247cm" loext:contextual-spacing="false" fo:line-height="120%"/>
  </style:style>
  <style:style style:name="List" style:family="paragraph" style:parent-style-name="Text_20_body" style:class="list">
   <style:text-properties style:font-size-asian="12pt" style:font-name-complex="FreeSans1" style:font-family-complex="FreeSans" style:font-family-generic-complex="swiss"/>
  </style:style>
  <style:style style:name="Caption" style:family="paragraph" style:parent-style-name="Standard" style:class="extra">
   <style:paragraph-properties fo:margin-top="0.212cm" fo:margin-bottom="0.212cm" loext:contextual-spacing="false" text:number-lines="false" text:line-number="0"/>
   <style:text-properties fo:font-size="12pt" fo:font-style="italic" style:font-size-asian="12pt" style:font-style-asian="italic" style:font-name-complex="FreeSans1" style:font-family-complex="FreeSans" style:font-family-generic-complex="swiss" style:font-size-complex="12pt" style:font-style-complex="italic"/>
  </style:style>
  <style:style style:name="Index" style:family="paragraph" style:parent-style-name="Standard" style:class="index">
   <style:paragraph-properties text:number-lines="false" text:line-number="0"/>
   <style:text-properties style:font-size-asian="12pt" style:font-name-complex="FreeSans1" style:font-family-complex="FreeSans" style:font-family-generic-complex="swiss"/>
  </style:style>
  <style:style style:name="Internet_20_link" style:display-name="Internet link" style:family="text">
   <style:text-properties fo:color="#000080" fo:language="zxx" fo:country="none" style:language-asian="zxx" style:country-asian="none" style:language-complex="zxx" style:country-complex="none"/>
  </style:style>
  <style:style style:name="Visited_20_Internet_20_Link" style:display-name="Visited Internet Link" style:family="text">
   <style:text-properties fo:color="#800000" fo:language="zxx" fo:country="none" style:language-asian="zxx" style:country-asian="none" style:language-complex="zxx" style:country-complex="none"/>
  </style:style>
  <text:outline-style style:name="Outline">
   <text:outline-level-style text:level="1" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="2" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="3" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="4" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="5" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="6" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="7" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="8" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="9" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="10" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
  </text:outline-style>
  <text:notes-configuration text:note-class="footnote" style:num-format="1" text:start-value="0" text:footnotes-position="page" text:start-numbering-at="document"/>
  <text:notes-configuration text:note-class="endnote" style:num-format="i" text:start-value="0"/>
  <text:linenumbering-configuration text:number-lines="false" text:offset="0.499cm" style:num-format="1" text:number-position="left" text:increment="5"/>
 </office:styles>
 <office:automatic-styles>${pM}
  <style:page-layout style:name="pm1">
   <style:page-layout-properties fo:page-width="${e.page.width}cm" fo:page-height="${e.page.height}cm" style:num-format="1" style:print-orientation="portrait" fo:margin-top="${e.page.margins[0]}cm" fo:margin-bottom="${e.page.margins[2]}cm" fo:margin-left="${e.page.margins[3]}cm" fo:margin-right="${e.page.margins[1]}cm" style:writing-mode="lr-tb" style:layout-grid-color="#c0c0c0" style:layout-grid-lines="20" style:layout-grid-base-height="0.706cm" style:layout-grid-ruby-height="0.353cm" style:layout-grid-mode="none" style:layout-grid-ruby-below="false" style:layout-grid-print="false" style:layout-grid-display="false" style:footnote-max-height="0cm">
    <style:footnote-sep style:width="0.018cm" style:distance-before-sep="0.101cm" style:distance-after-sep="0.101cm" style:line-style="solid" style:adjustment="left" style:rel-width="25%" style:color="#000000"/>
   </style:page-layout-properties>
   <style:header-style/>
   <style:footer-style/>
  </style:page-layout>
 </office:automatic-styles>
 <office:master-styles>
  <style:master-page style:name="Standard" style:page-layout-name="pm1"/>
 </office:master-styles>
 <office:body>
  <office:text text:use-soft-page-breaks="true">
   <office:forms form:automatic-focus="false" form:apply-design-mode="false"/>
   <text:sequence-decls>
    <text:sequence-decl text:display-outline-level="0" text:name="Illustration"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Table"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Text"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Drawing"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Figure"/>
   </text:sequence-decls>${n}
  </office:text>
 </office:body>
</office:document>`,gM="application/vnd.oasis.opendocument.text",Xw={"<p>":'<text:p text:style-name="Standard">',"</p>":"</text:p>","<b>":'<text:span text:style-name="bold">',"</b>":"</text:span>","<i>":'<text:span text:style-name="italic">',"</i>":"</text:span>","<u>":'<text:span text:style-name="underline">',"</u>":"</text:span>",'<mage-link to="':'<text:a xlink:type="simple" text:style-name="Internet_20_link" text:visited-style-name="Visited_20_Internet_20_Link" xlink:href="#',"</mage-link>":"</text:a>"},aS=["<b>","</b>","<i>","</i>","<u>","</u>"],lS=()=>({html:n=>aS.includes(n.trim().toLowerCase())?n.trim().toLowerCase():ro(n),paragraph:n=>`${n}`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:()=>"",code:()=>"",link:()=>""}),yM=(n,e,t)=>({html:r=>aS.includes(r.trim().toLowerCase())?r.trim().toLowerCase():ro(r),paragraph:r=>`<p>${r}</p>`,strong:r=>`<b>${r}</b>`,em:r=>`<i>${r}</i>`,codespan:r=>"",code:(r,i)=>"",link:(r,i,s)=>{const o=r.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<mage-link to="${a}">${Ri(e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t}),lS())}</mage-link>`}}),OM=(n,e)=>`<text:span text:style-name="bold"><text:bookmark-start text:name="${n}"/>${Ri(e,lS())}<text:bookmark-end text:name="${n}"/></text:span>`,bM=n=>{const e=document.createElement("p");e.innerHTML=n,n=e.innerHTML;for(const t in Xw)n=n.replaceAll(t,Xw[t]);return n},vM=n=>{const e=yo(n),t=T0(e.properties),r=t.titleStyle=="inline";let i="";for(const[s,o]of e.chapters){const{text:a}=o,l=t.renameAnchor({key:s,book:e}),c=t.renameTitle({book:e,chapter:o,key:s,title:o.title?o.title.trim():""}),u=OM(l,c),h=Ri(a,yM(e,t,o)).replaceAll("<br>","</p><p>").trim()||"<p></p>",f=bM(h);r?i+=f.replace(">",">"+u+" "):i+=`<text:p text:style-name="Heading_3" text:outline-level="3">${u}</text:p>`+f,i+='<text:p text:style-name="Standard"/>'}return mM(i,t).split(`
`).map(s=>s.trim()).join("")};var wM={encode:vM,mimetype:gM},cS={exports:{}};(function(n,e){(function(t,r){r()})($o,function(){function t(c,u){return typeof u=="undefined"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,u,h){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){l(f.response,u,h)},f.onerror=function(){console.error("could not download file")},f.send()}function i(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $o=="object"&&$o.global===$o?$o:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,h){var f=o.URL||o.webkitURL,p=document.createElement("a");u=u||c.name||"download",p.download=u,p.rel="noopener",typeof c=="string"?(p.href=c,p.origin===location.origin?s(p):i(p.href)?r(c,u,h):s(p,p.target="_blank")):(p.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(p.href)},4e4),setTimeout(function(){s(p)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,h){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,h),u);else if(i(c))r(c,u,h);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){s(f)})}}:function(c,u,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return r(c,u,h);var p=c.type==="application/octet-stream",d=/constructor/i.test(o.HTMLElement)||o.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&d||a)&&typeof FileReader!="undefined"){var b=new FileReader;b.onloadend=function(){var v=b.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=v:location=v,f=null},b.readAsDataURL(c)}else{var A=o.URL||o.webkitURL,g=A.createObjectURL(c);f?f.location=g:location.href=g,f=null,setTimeout(function(){A.revokeObjectURL(g)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(cS);var AM=cS.exports,uS={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(n,e){(function(t,r){n.exports=r()})($o,function(){return(()=>{var t={742:(o,a)=>{a.byteLength=function(b){var A=d(b),g=A[0],v=A[1];return 3*(g+v)/4-v},a.toByteArray=function(b){var A,g,v=d(b),O=v[0],_=v[1],x=new u(function(S,C,B){return 3*(C+B)/4-B}(0,O,_)),T=0,E=_>0?O-4:O;for(g=0;g<E;g+=4)A=c[b.charCodeAt(g)]<<18|c[b.charCodeAt(g+1)]<<12|c[b.charCodeAt(g+2)]<<6|c[b.charCodeAt(g+3)],x[T++]=A>>16&255,x[T++]=A>>8&255,x[T++]=255&A;return _===2&&(A=c[b.charCodeAt(g)]<<2|c[b.charCodeAt(g+1)]>>4,x[T++]=255&A),_===1&&(A=c[b.charCodeAt(g)]<<10|c[b.charCodeAt(g+1)]<<4|c[b.charCodeAt(g+2)]>>2,x[T++]=A>>8&255,x[T++]=255&A),x},a.fromByteArray=function(b){for(var A,g=b.length,v=g%3,O=[],_=16383,x=0,T=g-v;x<T;x+=_)O.push(m(b,x,x+_>T?T:x+_));return v===1?(A=b[g-1],O.push(l[A>>2]+l[A<<4&63]+"==")):v===2&&(A=(b[g-2]<<8)+b[g-1],O.push(l[A>>10]+l[A>>4&63]+l[A<<2&63]+"=")),O.join("")};for(var l=[],c=[],u=typeof Uint8Array!="undefined"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)l[f]=h[f],c[h.charCodeAt(f)]=f;function d(b){var A=b.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=b.indexOf("=");return g===-1&&(g=A),[g,g===A?0:4-g%4]}function m(b,A,g){for(var v,O,_=[],x=A;x<g;x+=3)v=(b[x]<<16&16711680)+(b[x+1]<<8&65280)+(255&b[x+2]),_.push(l[(O=v)>>18&63]+l[O>>12&63]+l[O>>6&63]+l[63&O]);return _.join("")}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},764:(o,a,l)=>{const c=l(742),u=l(645),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=d,a.SlowBuffer=function(I){return+I!=I&&(I=0),d.alloc(+I)},a.INSPECT_MAX_BYTES=50;const f=2147483647;function p(I){if(I>f)throw new RangeError('The value "'+I+'" is invalid for option "size"');const N=new Uint8Array(I);return Object.setPrototypeOf(N,d.prototype),N}function d(I,N,z){if(typeof I=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(I)}return m(I,N,z)}function m(I,N,z){if(typeof I=="string")return function(ce,Oe){if(typeof Oe=="string"&&Oe!==""||(Oe="utf8"),!d.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);const ze=0|_(ce,Oe);let Ve=p(ze);const Rt=Ve.write(ce,Oe);return Rt!==ze&&(Ve=Ve.slice(0,Rt)),Ve}(I,N);if(ArrayBuffer.isView(I))return function(ce){if(de(ce,Uint8Array)){const Oe=new Uint8Array(ce);return v(Oe.buffer,Oe.byteOffset,Oe.byteLength)}return g(ce)}(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(de(I,ArrayBuffer)||I&&de(I.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(de(I,SharedArrayBuffer)||I&&de(I.buffer,SharedArrayBuffer)))return v(I,N,z);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const te=I.valueOf&&I.valueOf();if(te!=null&&te!==I)return d.from(te,N,z);const se=function(ce){if(d.isBuffer(ce)){const Oe=0|O(ce.length),ze=p(Oe);return ze.length===0||ce.copy(ze,0,0,Oe),ze}return ce.length!==void 0?typeof ce.length!="number"||pe(ce.length)?p(0):g(ce):ce.type==="Buffer"&&Array.isArray(ce.data)?g(ce.data):void 0}(I);if(se)return se;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return d.from(I[Symbol.toPrimitive]("string"),N,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}function b(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function A(I){return b(I),p(I<0?0:0|O(I))}function g(I){const N=I.length<0?0:0|O(I.length),z=p(N);for(let te=0;te<N;te+=1)z[te]=255&I[te];return z}function v(I,N,z){if(N<0||I.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<N+(z||0))throw new RangeError('"length" is outside of buffer bounds');let te;return te=N===void 0&&z===void 0?new Uint8Array(I):z===void 0?new Uint8Array(I,N):new Uint8Array(I,N,z),Object.setPrototypeOf(te,d.prototype),te}function O(I){if(I>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|I}function _(I,N){if(d.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||de(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const z=I.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&z===0)return 0;let se=!1;for(;;)switch(N){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return me(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return oe(I).length;default:if(se)return te?-1:me(I).length;N=(""+N).toLowerCase(),se=!0}}function x(I,N,z){let te=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0)<=(N>>>=0))return"";for(I||(I="utf8");;)switch(I){case"hex":return J(this,N,z);case"utf8":case"utf-8":return X(this,N,z);case"ascii":return K(this,N,z);case"latin1":case"binary":return ee(this,N,z);case"base64":return P(this,N,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,N,z);default:if(te)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),te=!0}}function T(I,N,z){const te=I[N];I[N]=I[z],I[z]=te}function E(I,N,z,te,se){if(I.length===0)return-1;if(typeof z=="string"?(te=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),pe(z=+z)&&(z=se?0:I.length-1),z<0&&(z=I.length+z),z>=I.length){if(se)return-1;z=I.length-1}else if(z<0){if(!se)return-1;z=0}if(typeof N=="string"&&(N=d.from(N,te)),d.isBuffer(N))return N.length===0?-1:S(I,N,z,te,se);if(typeof N=="number")return N&=255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(I,N,z):Uint8Array.prototype.lastIndexOf.call(I,N,z):S(I,[N],z,te,se);throw new TypeError("val must be string, number or Buffer")}function S(I,N,z,te,se){let ce,Oe=1,ze=I.length,Ve=N.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(I.length<2||N.length<2)return-1;Oe=2,ze/=2,Ve/=2,z/=2}function Rt(ot,Tt){return Oe===1?ot[Tt]:ot.readUInt16BE(Tt*Oe)}if(se){let ot=-1;for(ce=z;ce<ze;ce++)if(Rt(I,ce)===Rt(N,ot===-1?0:ce-ot)){if(ot===-1&&(ot=ce),ce-ot+1===Ve)return ot*Oe}else ot!==-1&&(ce-=ce-ot),ot=-1}else for(z+Ve>ze&&(z=ze-Ve),ce=z;ce>=0;ce--){let ot=!0;for(let Tt=0;Tt<Ve;Tt++)if(Rt(I,ce+Tt)!==Rt(N,Tt)){ot=!1;break}if(ot)return ce}return-1}function C(I,N,z,te){z=Number(z)||0;const se=I.length-z;te?(te=Number(te))>se&&(te=se):te=se;const ce=N.length;let Oe;for(te>ce/2&&(te=ce/2),Oe=0;Oe<te;++Oe){const ze=parseInt(N.substr(2*Oe,2),16);if(pe(ze))return Oe;I[z+Oe]=ze}return Oe}function B(I,N,z,te){return ue(me(N,I.length-z),I,z,te)}function M(I,N,z,te){return ue(function(se){const ce=[];for(let Oe=0;Oe<se.length;++Oe)ce.push(255&se.charCodeAt(Oe));return ce}(N),I,z,te)}function D(I,N,z,te){return ue(oe(N),I,z,te)}function L(I,N,z,te){return ue(function(se,ce){let Oe,ze,Ve;const Rt=[];for(let ot=0;ot<se.length&&!((ce-=2)<0);++ot)Oe=se.charCodeAt(ot),ze=Oe>>8,Ve=Oe%256,Rt.push(Ve),Rt.push(ze);return Rt}(N,I.length-z),I,z,te)}function P(I,N,z){return N===0&&z===I.length?c.fromByteArray(I):c.fromByteArray(I.slice(N,z))}function X(I,N,z){z=Math.min(I.length,z);const te=[];let se=N;for(;se<z;){const ce=I[se];let Oe=null,ze=ce>239?4:ce>223?3:ce>191?2:1;if(se+ze<=z){let Ve,Rt,ot,Tt;switch(ze){case 1:ce<128&&(Oe=ce);break;case 2:Ve=I[se+1],(192&Ve)==128&&(Tt=(31&ce)<<6|63&Ve,Tt>127&&(Oe=Tt));break;case 3:Ve=I[se+1],Rt=I[se+2],(192&Ve)==128&&(192&Rt)==128&&(Tt=(15&ce)<<12|(63&Ve)<<6|63&Rt,Tt>2047&&(Tt<55296||Tt>57343)&&(Oe=Tt));break;case 4:Ve=I[se+1],Rt=I[se+2],ot=I[se+3],(192&Ve)==128&&(192&Rt)==128&&(192&ot)==128&&(Tt=(15&ce)<<18|(63&Ve)<<12|(63&Rt)<<6|63&ot,Tt>65535&&Tt<1114112&&(Oe=Tt))}}Oe===null?(Oe=65533,ze=1):Oe>65535&&(Oe-=65536,te.push(Oe>>>10&1023|55296),Oe=56320|1023&Oe),te.push(Oe),se+=ze}return function(ce){const Oe=ce.length;if(Oe<=Z)return String.fromCharCode.apply(String,ce);let ze="",Ve=0;for(;Ve<Oe;)ze+=String.fromCharCode.apply(String,ce.slice(Ve,Ve+=Z));return ze}(te)}a.kMaxLength=f,d.TYPED_ARRAY_SUPPORT=function(){try{const I=new Uint8Array(1),N={foo:function(){return 42}};return Object.setPrototypeOf(N,Uint8Array.prototype),Object.setPrototypeOf(I,N),I.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(I,N,z){return m(I,N,z)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(I,N,z){return function(te,se,ce){return b(te),te<=0?p(te):se!==void 0?typeof ce=="string"?p(te).fill(se,ce):p(te).fill(se):p(te)}(I,N,z)},d.allocUnsafe=function(I){return A(I)},d.allocUnsafeSlow=function(I){return A(I)},d.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==d.prototype},d.compare=function(I,N){if(de(I,Uint8Array)&&(I=d.from(I,I.offset,I.byteLength)),de(N,Uint8Array)&&(N=d.from(N,N.offset,N.byteLength)),!d.isBuffer(I)||!d.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===N)return 0;let z=I.length,te=N.length;for(let se=0,ce=Math.min(z,te);se<ce;++se)if(I[se]!==N[se]){z=I[se],te=N[se];break}return z<te?-1:te<z?1:0},d.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(I,N){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return d.alloc(0);let z;if(N===void 0)for(N=0,z=0;z<I.length;++z)N+=I[z].length;const te=d.allocUnsafe(N);let se=0;for(z=0;z<I.length;++z){let ce=I[z];if(de(ce,Uint8Array))se+ce.length>te.length?(d.isBuffer(ce)||(ce=d.from(ce)),ce.copy(te,se)):Uint8Array.prototype.set.call(te,ce,se);else{if(!d.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(te,se)}se+=ce.length}return te},d.byteLength=_,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<I;N+=2)T(this,N,N+1);return this},d.prototype.swap32=function(){const I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<I;N+=4)T(this,N,N+3),T(this,N+1,N+2);return this},d.prototype.swap64=function(){const I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<I;N+=8)T(this,N,N+7),T(this,N+1,N+6),T(this,N+2,N+5),T(this,N+3,N+4);return this},d.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?X(this,0,I):x.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(I){if(!d.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I||d.compare(this,I)===0},d.prototype.inspect=function(){let I="";const N=a.INSPECT_MAX_BYTES;return I=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(I+=" ... "),"<Buffer "+I+">"},h&&(d.prototype[h]=d.prototype.inspect),d.prototype.compare=function(I,N,z,te,se){if(de(I,Uint8Array)&&(I=d.from(I,I.offset,I.byteLength)),!d.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(N===void 0&&(N=0),z===void 0&&(z=I?I.length:0),te===void 0&&(te=0),se===void 0&&(se=this.length),N<0||z>I.length||te<0||se>this.length)throw new RangeError("out of range index");if(te>=se&&N>=z)return 0;if(te>=se)return-1;if(N>=z)return 1;if(this===I)return 0;let ce=(se>>>=0)-(te>>>=0),Oe=(z>>>=0)-(N>>>=0);const ze=Math.min(ce,Oe),Ve=this.slice(te,se),Rt=I.slice(N,z);for(let ot=0;ot<ze;++ot)if(Ve[ot]!==Rt[ot]){ce=Ve[ot],Oe=Rt[ot];break}return ce<Oe?-1:Oe<ce?1:0},d.prototype.includes=function(I,N,z){return this.indexOf(I,N,z)!==-1},d.prototype.indexOf=function(I,N,z){return E(this,I,N,z,!0)},d.prototype.lastIndexOf=function(I,N,z){return E(this,I,N,z,!1)},d.prototype.write=function(I,N,z,te){if(N===void 0)te="utf8",z=this.length,N=0;else if(z===void 0&&typeof N=="string")te=N,z=this.length,N=0;else{if(!isFinite(N))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");N>>>=0,isFinite(z)?(z>>>=0,te===void 0&&(te="utf8")):(te=z,z=void 0)}const se=this.length-N;if((z===void 0||z>se)&&(z=se),I.length>0&&(z<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let ce=!1;for(;;)switch(te){case"hex":return C(this,I,N,z);case"utf8":case"utf-8":return B(this,I,N,z);case"ascii":case"latin1":case"binary":return M(this,I,N,z);case"base64":return D(this,I,N,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,I,N,z);default:if(ce)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ce=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Z=4096;function K(I,N,z){let te="";z=Math.min(I.length,z);for(let se=N;se<z;++se)te+=String.fromCharCode(127&I[se]);return te}function ee(I,N,z){let te="";z=Math.min(I.length,z);for(let se=N;se<z;++se)te+=String.fromCharCode(I[se]);return te}function J(I,N,z){const te=I.length;(!N||N<0)&&(N=0),(!z||z<0||z>te)&&(z=te);let se="";for(let ce=N;ce<z;++ce)se+=xe[I[ce]];return se}function ge(I,N,z){const te=I.slice(N,z);let se="";for(let ce=0;ce<te.length-1;ce+=2)se+=String.fromCharCode(te[ce]+256*te[ce+1]);return se}function k(I,N,z){if(I%1!=0||I<0)throw new RangeError("offset is not uint");if(I+N>z)throw new RangeError("Trying to access beyond buffer length")}function j(I,N,z,te,se,ce){if(!d.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>se||N<ce)throw new RangeError('"value" argument is out of bounds');if(z+te>I.length)throw new RangeError("Index out of range")}function V(I,N,z,te,se){R(N,te,se,I,z,7);let ce=Number(N&BigInt(4294967295));I[z++]=ce,ce>>=8,I[z++]=ce,ce>>=8,I[z++]=ce,ce>>=8,I[z++]=ce;let Oe=Number(N>>BigInt(32)&BigInt(4294967295));return I[z++]=Oe,Oe>>=8,I[z++]=Oe,Oe>>=8,I[z++]=Oe,Oe>>=8,I[z++]=Oe,z}function H(I,N,z,te,se){R(N,te,se,I,z,7);let ce=Number(N&BigInt(4294967295));I[z+7]=ce,ce>>=8,I[z+6]=ce,ce>>=8,I[z+5]=ce,ce>>=8,I[z+4]=ce;let Oe=Number(N>>BigInt(32)&BigInt(4294967295));return I[z+3]=Oe,Oe>>=8,I[z+2]=Oe,Oe>>=8,I[z+1]=Oe,Oe>>=8,I[z]=Oe,z+8}function q(I,N,z,te,se,ce){if(z+te>I.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function le(I,N,z,te,se){return N=+N,z>>>=0,se||q(I,0,z,4),u.write(I,N,z,te,23,4),z+4}function be(I,N,z,te,se){return N=+N,z>>>=0,se||q(I,0,z,8),u.write(I,N,z,te,52,8),z+8}d.prototype.slice=function(I,N){const z=this.length;(I=~~I)<0?(I+=z)<0&&(I=0):I>z&&(I=z),(N=N===void 0?z:~~N)<0?(N+=z)<0&&(N=0):N>z&&(N=z),N<I&&(N=I);const te=this.subarray(I,N);return Object.setPrototypeOf(te,d.prototype),te},d.prototype.readUintLE=d.prototype.readUIntLE=function(I,N,z){I>>>=0,N>>>=0,z||k(I,N,this.length);let te=this[I],se=1,ce=0;for(;++ce<N&&(se*=256);)te+=this[I+ce]*se;return te},d.prototype.readUintBE=d.prototype.readUIntBE=function(I,N,z){I>>>=0,N>>>=0,z||k(I,N,this.length);let te=this[I+--N],se=1;for(;N>0&&(se*=256);)te+=this[I+--N]*se;return te},d.prototype.readUint8=d.prototype.readUInt8=function(I,N){return I>>>=0,N||k(I,1,this.length),this[I]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(I,N){return I>>>=0,N||k(I,2,this.length),this[I]|this[I+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(I,N){return I>>>=0,N||k(I,2,this.length),this[I]<<8|this[I+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(I,N){return I>>>=0,N||k(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(I,N){return I>>>=0,N||k(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},d.prototype.readBigUInt64LE=Fe(function(I){Q(I>>>=0,"offset");const N=this[I],z=this[I+7];N!==void 0&&z!==void 0||F(I,this.length-8);const te=N+256*this[++I]+65536*this[++I]+this[++I]*2**24,se=this[++I]+256*this[++I]+65536*this[++I]+z*2**24;return BigInt(te)+(BigInt(se)<<BigInt(32))}),d.prototype.readBigUInt64BE=Fe(function(I){Q(I>>>=0,"offset");const N=this[I],z=this[I+7];N!==void 0&&z!==void 0||F(I,this.length-8);const te=N*2**24+65536*this[++I]+256*this[++I]+this[++I],se=this[++I]*2**24+65536*this[++I]+256*this[++I]+z;return(BigInt(te)<<BigInt(32))+BigInt(se)}),d.prototype.readIntLE=function(I,N,z){I>>>=0,N>>>=0,z||k(I,N,this.length);let te=this[I],se=1,ce=0;for(;++ce<N&&(se*=256);)te+=this[I+ce]*se;return se*=128,te>=se&&(te-=Math.pow(2,8*N)),te},d.prototype.readIntBE=function(I,N,z){I>>>=0,N>>>=0,z||k(I,N,this.length);let te=N,se=1,ce=this[I+--te];for(;te>0&&(se*=256);)ce+=this[I+--te]*se;return se*=128,ce>=se&&(ce-=Math.pow(2,8*N)),ce},d.prototype.readInt8=function(I,N){return I>>>=0,N||k(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},d.prototype.readInt16LE=function(I,N){I>>>=0,N||k(I,2,this.length);const z=this[I]|this[I+1]<<8;return 32768&z?4294901760|z:z},d.prototype.readInt16BE=function(I,N){I>>>=0,N||k(I,2,this.length);const z=this[I+1]|this[I]<<8;return 32768&z?4294901760|z:z},d.prototype.readInt32LE=function(I,N){return I>>>=0,N||k(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},d.prototype.readInt32BE=function(I,N){return I>>>=0,N||k(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},d.prototype.readBigInt64LE=Fe(function(I){Q(I>>>=0,"offset");const N=this[I],z=this[I+7];N!==void 0&&z!==void 0||F(I,this.length-8);const te=this[I+4]+256*this[I+5]+65536*this[I+6]+(z<<24);return(BigInt(te)<<BigInt(32))+BigInt(N+256*this[++I]+65536*this[++I]+this[++I]*16777216)}),d.prototype.readBigInt64BE=Fe(function(I){Q(I>>>=0,"offset");const N=this[I],z=this[I+7];N!==void 0&&z!==void 0||F(I,this.length-8);const te=(N<<24)+65536*this[++I]+256*this[++I]+this[++I];return(BigInt(te)<<BigInt(32))+BigInt(this[++I]*16777216+65536*this[++I]+256*this[++I]+z)}),d.prototype.readFloatLE=function(I,N){return I>>>=0,N||k(I,4,this.length),u.read(this,I,!0,23,4)},d.prototype.readFloatBE=function(I,N){return I>>>=0,N||k(I,4,this.length),u.read(this,I,!1,23,4)},d.prototype.readDoubleLE=function(I,N){return I>>>=0,N||k(I,8,this.length),u.read(this,I,!0,52,8)},d.prototype.readDoubleBE=function(I,N){return I>>>=0,N||k(I,8,this.length),u.read(this,I,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(I,N,z,te){I=+I,N>>>=0,z>>>=0,te||j(this,I,N,z,Math.pow(2,8*z)-1,0);let se=1,ce=0;for(this[N]=255&I;++ce<z&&(se*=256);)this[N+ce]=I/se&255;return N+z},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(I,N,z,te){I=+I,N>>>=0,z>>>=0,te||j(this,I,N,z,Math.pow(2,8*z)-1,0);let se=z-1,ce=1;for(this[N+se]=255&I;--se>=0&&(ce*=256);)this[N+se]=I/ce&255;return N+z},d.prototype.writeUint8=d.prototype.writeUInt8=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,1,255,0),this[N]=255&I,N+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,2,65535,0),this[N]=255&I,this[N+1]=I>>>8,N+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,2,65535,0),this[N]=I>>>8,this[N+1]=255&I,N+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,4,4294967295,0),this[N+3]=I>>>24,this[N+2]=I>>>16,this[N+1]=I>>>8,this[N]=255&I,N+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,4,4294967295,0),this[N]=I>>>24,this[N+1]=I>>>16,this[N+2]=I>>>8,this[N+3]=255&I,N+4},d.prototype.writeBigUInt64LE=Fe(function(I,N=0){return V(this,I,N,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Fe(function(I,N=0){return H(this,I,N,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(I,N,z,te){if(I=+I,N>>>=0,!te){const ze=Math.pow(2,8*z-1);j(this,I,N,z,ze-1,-ze)}let se=0,ce=1,Oe=0;for(this[N]=255&I;++se<z&&(ce*=256);)I<0&&Oe===0&&this[N+se-1]!==0&&(Oe=1),this[N+se]=(I/ce>>0)-Oe&255;return N+z},d.prototype.writeIntBE=function(I,N,z,te){if(I=+I,N>>>=0,!te){const ze=Math.pow(2,8*z-1);j(this,I,N,z,ze-1,-ze)}let se=z-1,ce=1,Oe=0;for(this[N+se]=255&I;--se>=0&&(ce*=256);)I<0&&Oe===0&&this[N+se+1]!==0&&(Oe=1),this[N+se]=(I/ce>>0)-Oe&255;return N+z},d.prototype.writeInt8=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,1,127,-128),I<0&&(I=255+I+1),this[N]=255&I,N+1},d.prototype.writeInt16LE=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,2,32767,-32768),this[N]=255&I,this[N+1]=I>>>8,N+2},d.prototype.writeInt16BE=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,2,32767,-32768),this[N]=I>>>8,this[N+1]=255&I,N+2},d.prototype.writeInt32LE=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,4,2147483647,-2147483648),this[N]=255&I,this[N+1]=I>>>8,this[N+2]=I>>>16,this[N+3]=I>>>24,N+4},d.prototype.writeInt32BE=function(I,N,z){return I=+I,N>>>=0,z||j(this,I,N,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[N]=I>>>24,this[N+1]=I>>>16,this[N+2]=I>>>8,this[N+3]=255&I,N+4},d.prototype.writeBigInt64LE=Fe(function(I,N=0){return V(this,I,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Fe(function(I,N=0){return H(this,I,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(I,N,z){return le(this,I,N,!0,z)},d.prototype.writeFloatBE=function(I,N,z){return le(this,I,N,!1,z)},d.prototype.writeDoubleLE=function(I,N,z){return be(this,I,N,!0,z)},d.prototype.writeDoubleBE=function(I,N,z){return be(this,I,N,!1,z)},d.prototype.copy=function(I,N,z,te){if(!d.isBuffer(I))throw new TypeError("argument should be a Buffer");if(z||(z=0),te||te===0||(te=this.length),N>=I.length&&(N=I.length),N||(N=0),te>0&&te<z&&(te=z),te===z||I.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),I.length-N<te-z&&(te=I.length-N+z);const se=te-z;return this===I&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,z,te):Uint8Array.prototype.set.call(I,this.subarray(z,te),N),se},d.prototype.fill=function(I,N,z,te){if(typeof I=="string"){if(typeof N=="string"?(te=N,N=0,z=this.length):typeof z=="string"&&(te=z,z=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!d.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(I.length===1){const ce=I.charCodeAt(0);(te==="utf8"&&ce<128||te==="latin1")&&(I=ce)}}else typeof I=="number"?I&=255:typeof I=="boolean"&&(I=Number(I));if(N<0||this.length<N||this.length<z)throw new RangeError("Out of range index");if(z<=N)return this;let se;if(N>>>=0,z=z===void 0?this.length:z>>>0,I||(I=0),typeof I=="number")for(se=N;se<z;++se)this[se]=I;else{const ce=d.isBuffer(I)?I:d.from(I,te),Oe=ce.length;if(Oe===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(se=0;se<z-N;++se)this[se+N]=ce[se%Oe]}return this};const ae={};function he(I,N,z){ae[I]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:N.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${I}]`,this.stack,delete this.name}get code(){return I}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${I}]: ${this.message}`}}}function U(I){let N="",z=I.length;const te=I[0]==="-"?1:0;for(;z>=te+4;z-=3)N=`_${I.slice(z-3,z)}${N}`;return`${I.slice(0,z)}${N}`}function R(I,N,z,te,se,ce){if(I>z||I<N){const Oe=typeof N=="bigint"?"n":"";let ze;throw ze=ce>3?N===0||N===BigInt(0)?`>= 0${Oe} and < 2${Oe} ** ${8*(ce+1)}${Oe}`:`>= -(2${Oe} ** ${8*(ce+1)-1}${Oe}) and < 2 ** ${8*(ce+1)-1}${Oe}`:`>= ${N}${Oe} and <= ${z}${Oe}`,new ae.ERR_OUT_OF_RANGE("value",ze,I)}(function(Oe,ze,Ve){Q(ze,"offset"),Oe[ze]!==void 0&&Oe[ze+Ve]!==void 0||F(ze,Oe.length-(Ve+1))})(te,se,ce)}function Q(I,N){if(typeof I!="number")throw new ae.ERR_INVALID_ARG_TYPE(N,"number",I)}function F(I,N,z){throw Math.floor(I)!==I?(Q(I,z),new ae.ERR_OUT_OF_RANGE(z||"offset","an integer",I)):N<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${N}`,I)}he("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(I,N){return`The "${I}" argument must be of type number. Received type ${typeof N}`},TypeError),he("ERR_OUT_OF_RANGE",function(I,N,z){let te=`The value of "${I}" is out of range.`,se=z;return Number.isInteger(z)&&Math.abs(z)>4294967296?se=U(String(z)):typeof z=="bigint"&&(se=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(se=U(se)),se+="n"),te+=` It must be ${N}. Received ${se}`,te},RangeError);const ie=/[^+/0-9A-Za-z-_]/g;function me(I,N){let z;N=N||1/0;const te=I.length;let se=null;const ce=[];for(let Oe=0;Oe<te;++Oe){if(z=I.charCodeAt(Oe),z>55295&&z<57344){if(!se){if(z>56319){(N-=3)>-1&&ce.push(239,191,189);continue}if(Oe+1===te){(N-=3)>-1&&ce.push(239,191,189);continue}se=z;continue}if(z<56320){(N-=3)>-1&&ce.push(239,191,189),se=z;continue}z=65536+(se-55296<<10|z-56320)}else se&&(N-=3)>-1&&ce.push(239,191,189);if(se=null,z<128){if((N-=1)<0)break;ce.push(z)}else if(z<2048){if((N-=2)<0)break;ce.push(z>>6|192,63&z|128)}else if(z<65536){if((N-=3)<0)break;ce.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;ce.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return ce}function oe(I){return c.toByteArray(function(N){if((N=(N=N.split("=")[0]).trim().replace(ie,"")).length<2)return"";for(;N.length%4!=0;)N+="=";return N}(I))}function ue(I,N,z,te){let se;for(se=0;se<te&&!(se+z>=N.length||se>=I.length);++se)N[se+z]=I[se];return se}function de(I,N){return I instanceof N||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===N.name}function pe(I){return I!=I}const xe=function(){const I="0123456789abcdef",N=new Array(256);for(let z=0;z<16;++z){const te=16*z;for(let se=0;se<16;++se)N[te+se]=I[z]+I[se]}return N}();function Fe(I){return typeof BigInt=="undefined"?st:I}function st(){throw new Error("BigInt not supported")}},187:o=>{var a,l=typeof Reflect=="object"?Reflect:null,c=l&&typeof l.apply=="function"?l.apply:function(x,T,E){return Function.prototype.apply.call(x,T,E)};a=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:function(x){return Object.getOwnPropertyNames(x)};var u=Number.isNaN||function(x){return x!=x};function h(){h.init.call(this)}o.exports=h,o.exports.once=function(x,T){return new Promise(function(E,S){function C(M){x.removeListener(T,B),S(M)}function B(){typeof x.removeListener=="function"&&x.removeListener("error",C),E([].slice.call(arguments))}_(x,T,B,{once:!0}),T!=="error"&&function(M,D,L){typeof M.on=="function"&&_(M,"error",D,{once:!0})}(x,C)})},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var f=10;function p(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}function d(x){return x._maxListeners===void 0?h.defaultMaxListeners:x._maxListeners}function m(x,T,E,S){var C,B,M,D;if(p(E),(B=x._events)===void 0?(B=x._events=Object.create(null),x._eventsCount=0):(B.newListener!==void 0&&(x.emit("newListener",T,E.listener?E.listener:E),B=x._events),M=B[T]),M===void 0)M=B[T]=E,++x._eventsCount;else if(typeof M=="function"?M=B[T]=S?[E,M]:[M,E]:S?M.unshift(E):M.push(E),(C=d(x))>0&&M.length>C&&!M.warned){M.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=x,L.type=T,L.count=M.length,D=L,console&&console.warn&&console.warn(D)}return x}function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function A(x,T,E){var S={fired:!1,wrapFn:void 0,target:x,type:T,listener:E},C=b.bind(S);return C.listener=E,S.wrapFn=C,C}function g(x,T,E){var S=x._events;if(S===void 0)return[];var C=S[T];return C===void 0?[]:typeof C=="function"?E?[C.listener||C]:[C]:E?function(B){for(var M=new Array(B.length),D=0;D<M.length;++D)M[D]=B[D].listener||B[D];return M}(C):O(C,C.length)}function v(x){var T=this._events;if(T!==void 0){var E=T[x];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}function O(x,T){for(var E=new Array(T),S=0;S<T;++S)E[S]=x[S];return E}function _(x,T,E,S){if(typeof x.on=="function")S.once?x.once(T,E):x.on(T,E);else{if(typeof x.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x);x.addEventListener(T,function C(B){S.once&&x.removeEventListener(T,C),E(B)})}}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(x){if(typeof x!="number"||x<0||u(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");f=x}}),h.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||u(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this},h.prototype.getMaxListeners=function(){return d(this)},h.prototype.emit=function(x){for(var T=[],E=1;E<arguments.length;E++)T.push(arguments[E]);var S=x==="error",C=this._events;if(C!==void 0)S=S&&C.error===void 0;else if(!S)return!1;if(S){var B;if(T.length>0&&(B=T[0]),B instanceof Error)throw B;var M=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw M.context=B,M}var D=C[x];if(D===void 0)return!1;if(typeof D=="function")c(D,this,T);else{var L=D.length,P=O(D,L);for(E=0;E<L;++E)c(P[E],this,T)}return!0},h.prototype.addListener=function(x,T){return m(this,x,T,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(x,T){return m(this,x,T,!0)},h.prototype.once=function(x,T){return p(T),this.on(x,A(this,x,T)),this},h.prototype.prependOnceListener=function(x,T){return p(T),this.prependListener(x,A(this,x,T)),this},h.prototype.removeListener=function(x,T){var E,S,C,B,M;if(p(T),(S=this._events)===void 0)return this;if((E=S[x])===void 0)return this;if(E===T||E.listener===T)--this._eventsCount==0?this._events=Object.create(null):(delete S[x],S.removeListener&&this.emit("removeListener",x,E.listener||T));else if(typeof E!="function"){for(C=-1,B=E.length-1;B>=0;B--)if(E[B]===T||E[B].listener===T){M=E[B].listener,C=B;break}if(C<0)return this;C===0?E.shift():function(D,L){for(;L+1<D.length;L++)D[L]=D[L+1];D.pop()}(E,C),E.length===1&&(S[x]=E[0]),S.removeListener!==void 0&&this.emit("removeListener",x,M||T)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(x){var T,E,S;if((E=this._events)===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[x]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete E[x]),this;if(arguments.length===0){var C,B=Object.keys(E);for(S=0;S<B.length;++S)(C=B[S])!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(T=E[x])=="function")this.removeListener(x,T);else if(T!==void 0)for(S=T.length-1;S>=0;S--)this.removeListener(x,T[S]);return this},h.prototype.listeners=function(x){return g(this,x,!0)},h.prototype.rawListeners=function(x){return g(this,x,!1)},h.listenerCount=function(x,T){return typeof x.listenerCount=="function"?x.listenerCount(T):v.call(x,T)},h.prototype.listenerCount=v,h.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},645:(o,a)=>{a.read=function(l,c,u,h,f){var p,d,m=8*f-h-1,b=(1<<m)-1,A=b>>1,g=-7,v=u?f-1:0,O=u?-1:1,_=l[c+v];for(v+=O,p=_&(1<<-g)-1,_>>=-g,g+=m;g>0;p=256*p+l[c+v],v+=O,g-=8);for(d=p&(1<<-g)-1,p>>=-g,g+=h;g>0;d=256*d+l[c+v],v+=O,g-=8);if(p===0)p=1-A;else{if(p===b)return d?NaN:1/0*(_?-1:1);d+=Math.pow(2,h),p-=A}return(_?-1:1)*d*Math.pow(2,p-h)},a.write=function(l,c,u,h,f,p){var d,m,b,A=8*p-f-1,g=(1<<A)-1,v=g>>1,O=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=h?0:p-1,x=h?1:-1,T=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(m=isNaN(c)?1:0,d=g):(d=Math.floor(Math.log(c)/Math.LN2),c*(b=Math.pow(2,-d))<1&&(d--,b*=2),(c+=d+v>=1?O/b:O*Math.pow(2,1-v))*b>=2&&(d++,b/=2),d+v>=g?(m=0,d=g):d+v>=1?(m=(c*b-1)*Math.pow(2,f),d+=v):(m=c*Math.pow(2,v-1)*Math.pow(2,f),d=0));f>=8;l[u+_]=255&m,_+=x,m/=256,f-=8);for(d=d<<f|m,A+=f;A>0;l[u+_]=255&d,_+=x,d/=256,A-=8);l[u+_-x]|=128*T}},717:o=>{typeof Object.create=="function"?o.exports=function(a,l){l&&(a.super_=l,a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:o.exports=function(a,l){if(l){a.super_=l;var c=function(){};c.prototype=l.prototype,a.prototype=new c,a.prototype.constructor=a}}},733:(o,a,l)=>{o.exports=function c(u,h,f){function p(b,A){if(!h[b]){if(!u[b]){if(d)return d(b,!0);var g=new Error("Cannot find module '"+b+"'");throw g.code="MODULE_NOT_FOUND",g}var v=h[b]={exports:{}};u[b][0].call(v.exports,function(O){return p(u[b][1][O]||O)},v,v.exports,c,u,h,f)}return h[b].exports}for(var d=void 0,m=0;m<f.length;m++)p(f[m]);return p}({1:[function(c,u,h){var f=c("./utils"),p=c("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(m){for(var b,A,g,v,O,_,x,T=[],E=0,S=m.length,C=S,B=f.getTypeOf(m)!=="string";E<m.length;)C=S-E,g=B?(b=m[E++],A=E<S?m[E++]:0,E<S?m[E++]:0):(b=m.charCodeAt(E++),A=E<S?m.charCodeAt(E++):0,E<S?m.charCodeAt(E++):0),v=b>>2,O=(3&b)<<4|A>>4,_=1<C?(15&A)<<2|g>>6:64,x=2<C?63&g:64,T.push(d.charAt(v)+d.charAt(O)+d.charAt(_)+d.charAt(x));return T.join("")},h.decode=function(m){var b,A,g,v,O,_,x=0,T=0,E="data:";if(m.substr(0,E.length)===E)throw new Error("Invalid base64 input, it looks like a data url.");var S,C=3*(m=m.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(m.charAt(m.length-1)===d.charAt(64)&&C--,m.charAt(m.length-2)===d.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=p.uint8array?new Uint8Array(0|C):new Array(0|C);x<m.length;)b=d.indexOf(m.charAt(x++))<<2|(v=d.indexOf(m.charAt(x++)))>>4,A=(15&v)<<4|(O=d.indexOf(m.charAt(x++)))>>2,g=(3&O)<<6|(_=d.indexOf(m.charAt(x++))),S[T++]=b,O!==64&&(S[T++]=A),_!==64&&(S[T++]=g);return S}},{"./support":30,"./utils":32}],2:[function(c,u,h){var f=c("./external"),p=c("./stream/DataWorker"),d=c("./stream/Crc32Probe"),m=c("./stream/DataLengthProbe");function b(A,g,v,O,_){this.compressedSize=A,this.uncompressedSize=g,this.crc32=v,this.compression=O,this.compressedContent=_}b.prototype={getContentWorker:function(){var A=new p(f.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),g=this;return A.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),A},getCompressedWorker:function(){return new p(f.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},b.createWorkerFrom=function(A,g,v){return A.pipe(new d).pipe(new m("uncompressedSize")).pipe(g.compressWorker(v)).pipe(new m("compressedSize")).withStreamInfo("compression",g)},u.exports=b},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(c,u,h){var f=c("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(p){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}},h.DEFLATE=c("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(c,u,h){var f=c("./utils"),p=function(){for(var d,m=[],b=0;b<256;b++){d=b;for(var A=0;A<8;A++)d=1&d?3988292384^d>>>1:d>>>1;m[b]=d}return m}();u.exports=function(d,m){return d!==void 0&&d.length?f.getTypeOf(d)!=="string"?function(b,A,g,v){var O=p,_=0+g;b^=-1;for(var x=0;x<_;x++)b=b>>>8^O[255&(b^A[x])];return-1^b}(0|m,d,d.length):function(b,A,g,v){var O=p,_=0+g;b^=-1;for(var x=0;x<_;x++)b=b>>>8^O[255&(b^A.charCodeAt(x))];return-1^b}(0|m,d,d.length):0}},{"./utils":32}],5:[function(c,u,h){h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(c,u,h){var f;f=typeof Promise!="undefined"?Promise:c("lie"),u.exports={Promise:f}},{lie:37}],7:[function(c,u,h){var f=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",p=c("pako"),d=c("./utils"),m=c("./stream/GenericWorker"),b=f?"uint8array":"array";function A(g,v){m.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=v,this.meta={}}h.magic="\b\0",d.inherits(A,m),A.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(b,g.data),!1)},A.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},A.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},A.prototype._createPako=function(){this._pako=new p[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(v){g.push({data:v,meta:g.meta})}},h.compressWorker=function(g){return new A("Deflate",g)},h.uncompressWorker=function(){return new A("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(c,u,h){function f(O,_){var x,T="";for(x=0;x<_;x++)T+=String.fromCharCode(255&O),O>>>=8;return T}function p(O,_,x,T,E,S){var C,B,M=O.file,D=O.compression,L=S!==b.utf8encode,P=d.transformTo("string",S(M.name)),X=d.transformTo("string",b.utf8encode(M.name)),Z=M.comment,K=d.transformTo("string",S(Z)),ee=d.transformTo("string",b.utf8encode(Z)),J=X.length!==M.name.length,ge=ee.length!==Z.length,k="",j="",V="",H=M.dir,q=M.date,le={crc32:0,compressedSize:0,uncompressedSize:0};_&&!x||(le.crc32=O.crc32,le.compressedSize=O.compressedSize,le.uncompressedSize=O.uncompressedSize);var be=0;_&&(be|=8),L||!J&&!ge||(be|=2048);var ae=0,he=0;H&&(ae|=16),E==="UNIX"?(he=798,ae|=function(R,Q){var F=R;return R||(F=Q?16893:33204),(65535&F)<<16}(M.unixPermissions,H)):(he=20,ae|=function(R){return 63&(R||0)}(M.dosPermissions)),C=q.getUTCHours(),C<<=6,C|=q.getUTCMinutes(),C<<=5,C|=q.getUTCSeconds()/2,B=q.getUTCFullYear()-1980,B<<=4,B|=q.getUTCMonth()+1,B<<=5,B|=q.getUTCDate(),J&&(j=f(1,1)+f(A(P),4)+X,k+="up"+f(j.length,2)+j),ge&&(V=f(1,1)+f(A(K),4)+ee,k+="uc"+f(V.length,2)+V);var U="";return U+=`
\0`,U+=f(be,2),U+=D.magic,U+=f(C,2),U+=f(B,2),U+=f(le.crc32,4),U+=f(le.compressedSize,4),U+=f(le.uncompressedSize,4),U+=f(P.length,2),U+=f(k.length,2),{fileRecord:g.LOCAL_FILE_HEADER+U+P+k,dirRecord:g.CENTRAL_FILE_HEADER+f(he,2)+U+f(K.length,2)+"\0\0\0\0"+f(ae,4)+f(T,4)+P+k+K}}var d=c("../utils"),m=c("../stream/GenericWorker"),b=c("../utf8"),A=c("../crc32"),g=c("../signature");function v(O,_,x,T){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=x,this.encodeFileName=T,this.streamFiles=O,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(v,m),v.prototype.push=function(O){var _=O.meta.percent||0,x=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(O):(this.bytesWritten+=O.data.length,m.prototype.push.call(this,{data:O.data,meta:{currentFile:this.currentFile,percent:x?(_+100*(x-T-1))/x:100}}))},v.prototype.openedSource=function(O){this.currentSourceOffset=this.bytesWritten,this.currentFile=O.file.name;var _=this.streamFiles&&!O.file.dir;if(_){var x=p(O,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(O){this.accumulate=!1;var _=this.streamFiles&&!O.file.dir,x=p(O,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),_)this.push({data:function(T){return g.DATA_DESCRIPTOR+f(T.crc32,4)+f(T.compressedSize,4)+f(T.uncompressedSize,4)}(O),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var O=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var x=this.bytesWritten-O,T=function(E,S,C,B,M){var D=d.transformTo("string",M(B));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(E,2)+f(E,2)+f(S,4)+f(C,4)+f(D.length,2)+D}(this.dirRecords.length,x,O,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(O){this._sources.push(O);var _=this;return O.on("data",function(x){_.processChunk(x)}),O.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),O.on("error",function(x){_.error(x)}),this},v.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(O){var _=this._sources;if(!m.prototype.error.call(this,O))return!1;for(var x=0;x<_.length;x++)try{_[x].error(O)}catch{}return!0},v.prototype.lock=function(){m.prototype.lock.call(this);for(var O=this._sources,_=0;_<O.length;_++)O[_].lock()},u.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(c,u,h){var f=c("../compressions"),p=c("./ZipFileWorker");h.generateWorker=function(d,m,b){var A=new p(m.streamFiles,b,m.platform,m.encodeFileName),g=0;try{d.forEach(function(v,O){g++;var _=function(S,C){var B=S||C,M=f[B];if(!M)throw new Error(B+" is not a valid compression method !");return M}(O.options.compression,m.compression),x=O.options.compressionOptions||m.compressionOptions||{},T=O.dir,E=O.date;O._compressWorker(_,x).withStreamInfo("file",{name:v,dir:T,date:E,comment:O.comment||"",unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions}).pipe(A)}),A.entriesCount=g}catch(v){A.error(v)}return A}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(c,u,h){function f(){if(!(this instanceof f))return new f;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var p=new f;for(var d in this)typeof this[d]!="function"&&(p[d]=this[d]);return p}}(f.prototype=c("./object")).loadAsync=c("./load"),f.support=c("./support"),f.defaults=c("./defaults"),f.version="3.7.1",f.loadAsync=function(p,d){return new f().loadAsync(p,d)},f.external=c("./external"),u.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(c,u,h){var f=c("./utils"),p=c("./external"),d=c("./utf8"),m=c("./zipEntries"),b=c("./stream/Crc32Probe"),A=c("./nodejsUtils");function g(v){return new p.Promise(function(O,_){var x=v.decompressed.getContentWorker().pipe(new b);x.on("error",function(T){_(T)}).on("end",function(){x.streamInfo.crc32!==v.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):O()}).resume()})}u.exports=function(v,O){var _=this;return O=f.extend(O||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),A.isNode&&A.isStream(v)?p.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):f.prepareContent("the loaded zip file",v,!0,O.optimizedBinaryString,O.base64).then(function(x){var T=new m(O);return T.load(x),T}).then(function(x){var T=[p.Promise.resolve(x)],E=x.files;if(O.checkCRC32)for(var S=0;S<E.length;S++)T.push(g(E[S]));return p.Promise.all(T)}).then(function(x){for(var T=x.shift(),E=T.files,S=0;S<E.length;S++){var C=E[S];_.file(C.fileNameStr,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:O.createFolders})}return T.zipComment.length&&(_.comment=T.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(c,u,h){var f=c("../utils"),p=c("../stream/GenericWorker");function d(m,b){p.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(b)}f.inherits(d,p),d.prototype._bindStream=function(m){var b=this;(this._stream=m).pause(),m.on("data",function(A){b.push({data:A,meta:{percent:0}})}).on("error",function(A){b.isPaused?this.generatedError=A:b.error(A)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},d.prototype.pause=function(){return!!p.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},u.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(c,u,h){var f=c("readable-stream").Readable;function p(d,m,b){f.call(this,m),this._helper=d;var A=this;d.on("data",function(g,v){A.push(g)||A._helper.pause(),b&&b(v)}).on("error",function(g){A.emit("error",g)}).on("end",function(){A.push(null)})}c("../utils").inherits(p,f),p.prototype._read=function(){this._helper.resume()},u.exports=p},{"../utils":32,"readable-stream":16}],14:[function(c,u,h){u.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(f,p){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(f,p);if(typeof f=="number")throw new Error('The "data" argument must not be a number');return new Buffer(f,p)},allocBuffer:function(f){if(Buffer.alloc)return Buffer.alloc(f);var p=new Buffer(f);return p.fill(0),p},isBuffer:function(f){return Buffer.isBuffer(f)},isStream:function(f){return f&&typeof f.on=="function"&&typeof f.pause=="function"&&typeof f.resume=="function"}}},{}],15:[function(c,u,h){function f(M,D,L){var P,X=d.getTypeOf(D),Z=d.extend(L||{},A);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(M=E(M)),Z.createFolders&&(P=T(M))&&S.call(this,P,!0);var K=X==="string"&&Z.binary===!1&&Z.base64===!1;L&&L.binary!==void 0||(Z.binary=!K),(D instanceof g&&D.uncompressedSize===0||Z.dir||!D||D.length===0)&&(Z.base64=!1,Z.binary=!0,D="",Z.compression="STORE",X="string");var ee;ee=D instanceof g||D instanceof m?D:_.isNode&&_.isStream(D)?new x(M,D):d.prepareContent(M,D,Z.binary,Z.optimizedBinaryString,Z.base64);var J=new v(M,ee,Z);this.files[M]=J}var p=c("./utf8"),d=c("./utils"),m=c("./stream/GenericWorker"),b=c("./stream/StreamHelper"),A=c("./defaults"),g=c("./compressedObject"),v=c("./zipObject"),O=c("./generate"),_=c("./nodejsUtils"),x=c("./nodejs/NodejsStreamInputAdapter"),T=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var D=M.lastIndexOf("/");return 0<D?M.substring(0,D):""},E=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},S=function(M,D){return D=D!==void 0?D:A.createFolders,M=E(M),this.files[M]||f.call(this,M,null,{dir:!0,createFolders:D}),this.files[M]};function C(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var B={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var D,L,P;for(D in this.files)P=this.files[D],(L=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&M(L,P)},filter:function(M){var D=[];return this.forEach(function(L,P){M(L,P)&&D.push(P)}),D},file:function(M,D,L){if(arguments.length!==1)return M=this.root+M,f.call(this,M,D,L),this;if(C(M)){var P=M;return this.filter(function(Z,K){return!K.dir&&P.test(Z)})}var X=this.files[this.root+M];return X&&!X.dir?X:null},folder:function(M){if(!M)return this;if(C(M))return this.filter(function(X,Z){return Z.dir&&M.test(X)});var D=this.root+M,L=S.call(this,D),P=this.clone();return P.root=L.name,P},remove:function(M){M=this.root+M;var D=this.files[M];if(D||(M.slice(-1)!=="/"&&(M+="/"),D=this.files[M]),D&&!D.dir)delete this.files[M];else for(var L=this.filter(function(X,Z){return Z.name.slice(0,M.length)===M}),P=0;P<L.length;P++)delete this.files[L[P].name];return this},generate:function(M){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var D,L={};try{if((L=d.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:p.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");d.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var P=L.comment||this.comment||"";D=O.generateWorker(this,L,P)}catch(X){(D=new m("error")).error(X)}return new b(D,L.type||"string",L.mimeType)},generateAsync:function(M,D){return this.generateInternalStream(M).accumulate(D)},generateNodeStream:function(M,D){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(D)}};u.exports=B},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(c,u,h){u.exports=c("stream")},{stream:void 0}],17:[function(c,u,h){var f=c("./DataReader");function p(d){f.call(this,d);for(var m=0;m<this.data.length;m++)d[m]=255&d[m]}c("../utils").inherits(p,f),p.prototype.byteAt=function(d){return this.data[this.zero+d]},p.prototype.lastIndexOfSignature=function(d){for(var m=d.charCodeAt(0),b=d.charCodeAt(1),A=d.charCodeAt(2),g=d.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===m&&this.data[v+1]===b&&this.data[v+2]===A&&this.data[v+3]===g)return v-this.zero;return-1},p.prototype.readAndCheckSignature=function(d){var m=d.charCodeAt(0),b=d.charCodeAt(1),A=d.charCodeAt(2),g=d.charCodeAt(3),v=this.readData(4);return m===v[0]&&b===v[1]&&A===v[2]&&g===v[3]},p.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},u.exports=p},{"../utils":32,"./DataReader":18}],18:[function(c,u,h){var f=c("../utils");function p(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}p.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(d){},readInt:function(d){var m,b=0;for(this.checkOffset(d),m=this.index+d-1;m>=this.index;m--)b=(b<<8)+this.byteAt(m);return this.index+=d,b},readString:function(d){return f.transformTo("string",this.readData(d))},readData:function(d){},lastIndexOfSignature:function(d){},readAndCheckSignature:function(d){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},u.exports=p},{"../utils":32}],19:[function(c,u,h){var f=c("./Uint8ArrayReader");function p(d){f.call(this,d)}c("../utils").inherits(p,f),p.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},u.exports=p},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(c,u,h){var f=c("./DataReader");function p(d){f.call(this,d)}c("../utils").inherits(p,f),p.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},p.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},p.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},p.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},u.exports=p},{"../utils":32,"./DataReader":18}],21:[function(c,u,h){var f=c("./ArrayReader");function p(d){f.call(this,d)}c("../utils").inherits(p,f),p.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},u.exports=p},{"../utils":32,"./ArrayReader":17}],22:[function(c,u,h){var f=c("../utils"),p=c("../support"),d=c("./ArrayReader"),m=c("./StringReader"),b=c("./NodeBufferReader"),A=c("./Uint8ArrayReader");u.exports=function(g){var v=f.getTypeOf(g);return f.checkSupport(v),v!=="string"||p.uint8array?v==="nodebuffer"?new b(g):p.uint8array?new A(f.transformTo("uint8array",g)):new d(f.transformTo("array",g)):new m(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(c,u,h){h.LOCAL_FILE_HEADER="PK",h.CENTRAL_FILE_HEADER="PK",h.CENTRAL_DIRECTORY_END="PK",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(c,u,h){var f=c("./GenericWorker"),p=c("../utils");function d(m){f.call(this,"ConvertWorker to "+m),this.destType=m}p.inherits(d,f),d.prototype.processChunk=function(m){this.push({data:p.transformTo(this.destType,m.data),meta:m.meta})},u.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(c,u,h){var f=c("./GenericWorker"),p=c("../crc32");function d(){f.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}c("../utils").inherits(d,f),d.prototype.processChunk=function(m){this.streamInfo.crc32=p(m.data,this.streamInfo.crc32||0),this.push(m)},u.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(c,u,h){var f=c("../utils"),p=c("./GenericWorker");function d(m){p.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}f.inherits(d,p),d.prototype.processChunk=function(m){if(m){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+m.data.length}p.prototype.processChunk.call(this,m)},u.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(c,u,h){var f=c("../utils"),p=c("./GenericWorker");function d(m){p.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(A){b.dataIsReady=!0,b.data=A,b.max=A&&A.length||0,b.type=f.getTypeOf(A),b.isPaused||b._tickAndRepeat()},function(A){b.error(A)})}f.inherits(d,p),d.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,f.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(f.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,b=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,b);break;case"uint8array":m=this.data.subarray(this.index,b);break;case"array":case"nodebuffer":m=this.data.slice(this.index,b)}return this.index=b,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},u.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(c,u,h){function f(p){this.name=p||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}f.prototype={push:function(p){this.emit("data",p)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(p){this.emit("error",p)}return!0},error:function(p){return!this.isFinished&&(this.isPaused?this.generatedError=p:(this.isFinished=!0,this.emit("error",p),this.previous&&this.previous.error(p),this.cleanUp()),!0)},on:function(p,d){return this._listeners[p].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(p,d){if(this._listeners[p])for(var m=0;m<this._listeners[p].length;m++)this._listeners[p][m].call(this,d)},pipe:function(p){return p.registerPrevious(this)},registerPrevious:function(p){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=p.streamInfo,this.mergeStreamInfo(),this.previous=p;var d=this;return p.on("data",function(m){d.processChunk(m)}),p.on("end",function(){d.end()}),p.on("error",function(m){d.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var p=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),p=!0),this.previous&&this.previous.resume(),!p},flush:function(){},processChunk:function(p){this.push(p)},withStreamInfo:function(p,d){return this.extraStreamInfo[p]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var p in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(p)&&(this.streamInfo[p]=this.extraStreamInfo[p])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var p="Worker "+this.name;return this.previous?this.previous+" -> "+p:p}},u.exports=f},{}],29:[function(c,u,h){var f=c("../utils"),p=c("./ConvertWorker"),d=c("./GenericWorker"),m=c("../base64"),b=c("../support"),A=c("../external"),g=null;if(b.nodestream)try{g=c("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(O,_,x){var T=_;switch(_){case"blob":case"arraybuffer":T="uint8array";break;case"base64":T="string"}try{this._internalType=T,this._outputType=_,this._mimeType=x,f.checkSupport(T),this._worker=O.pipe(new p(T)),O.lock()}catch(E){this._worker=new d("error"),this._worker.error(E)}}v.prototype={accumulate:function(O){return function(_,x){return new A.Promise(function(T,E){var S=[],C=_._internalType,B=_._outputType,M=_._mimeType;_.on("data",function(D,L){S.push(D),x&&x(L)}).on("error",function(D){S=[],E(D)}).on("end",function(){try{var D=function(L,P,X){switch(L){case"blob":return f.newBlob(f.transformTo("arraybuffer",P),X);case"base64":return m.encode(P);default:return f.transformTo(L,P)}}(B,function(L,P){var X,Z=0,K=null,ee=0;for(X=0;X<P.length;X++)ee+=P[X].length;switch(L){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(K=new Uint8Array(ee),X=0;X<P.length;X++)K.set(P[X],Z),Z+=P[X].length;return K;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+L+"'")}}(C,S),M);T(D)}catch(L){E(L)}S=[]}).resume()})}(this,O)},on:function(O,_){var x=this;return O==="data"?this._worker.on(O,function(T){_.call(x,T.data,T.meta)}):this._worker.on(O,function(){f.delay(_,arguments,x)}),this},resume:function(){return f.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(O){if(f.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},O)}},u.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(c,u,h){if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",h.nodebuffer=typeof Buffer!="undefined",h.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")h.blob=!1;else{var f=new ArrayBuffer(0);try{h.blob=new Blob([f],{type:"application/zip"}).size===0}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);p.append(f),h.blob=p.getBlob("application/zip").size===0}catch{h.blob=!1}}}try{h.nodestream=!!c("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(c,u,h){for(var f=c("./utils"),p=c("./support"),d=c("./nodejsUtils"),m=c("./stream/GenericWorker"),b=new Array(256),A=0;A<256;A++)b[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function g(){m.call(this,"utf-8 decode"),this.leftOver=null}function v(){m.call(this,"utf-8 encode")}b[254]=b[254]=1,h.utf8encode=function(O){return p.nodebuffer?d.newBufferFrom(O,"utf-8"):function(_){var x,T,E,S,C,B=_.length,M=0;for(S=0;S<B;S++)(64512&(T=_.charCodeAt(S)))==55296&&S+1<B&&(64512&(E=_.charCodeAt(S+1)))==56320&&(T=65536+(T-55296<<10)+(E-56320),S++),M+=T<128?1:T<2048?2:T<65536?3:4;for(x=p.uint8array?new Uint8Array(M):new Array(M),S=C=0;C<M;S++)(64512&(T=_.charCodeAt(S)))==55296&&S+1<B&&(64512&(E=_.charCodeAt(S+1)))==56320&&(T=65536+(T-55296<<10)+(E-56320),S++),T<128?x[C++]=T:(T<2048?x[C++]=192|T>>>6:(T<65536?x[C++]=224|T>>>12:(x[C++]=240|T>>>18,x[C++]=128|T>>>12&63),x[C++]=128|T>>>6&63),x[C++]=128|63&T);return x}(O)},h.utf8decode=function(O){return p.nodebuffer?f.transformTo("nodebuffer",O).toString("utf-8"):function(_){var x,T,E,S,C=_.length,B=new Array(2*C);for(x=T=0;x<C;)if((E=_[x++])<128)B[T++]=E;else if(4<(S=b[E]))B[T++]=65533,x+=S-1;else{for(E&=S===2?31:S===3?15:7;1<S&&x<C;)E=E<<6|63&_[x++],S--;1<S?B[T++]=65533:E<65536?B[T++]=E:(E-=65536,B[T++]=55296|E>>10&1023,B[T++]=56320|1023&E)}return B.length!==T&&(B.subarray?B=B.subarray(0,T):B.length=T),f.applyFromCharCode(B)}(O=f.transformTo(p.uint8array?"uint8array":"array",O))},f.inherits(g,m),g.prototype.processChunk=function(O){var _=f.transformTo(p.uint8array?"uint8array":"array",O.data);if(this.leftOver&&this.leftOver.length){if(p.uint8array){var x=_;(_=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),_.set(x,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var T=function(S,C){var B;for((C=C||S.length)>S.length&&(C=S.length),B=C-1;0<=B&&(192&S[B])==128;)B--;return B<0||B===0?C:B+b[S[B]]>C?B:C}(_),E=_;T!==_.length&&(p.uint8array?(E=_.subarray(0,T),this.leftOver=_.subarray(T,_.length)):(E=_.slice(0,T),this.leftOver=_.slice(T,_.length))),this.push({data:h.utf8decode(E),meta:O.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=g,f.inherits(v,m),v.prototype.processChunk=function(O){this.push({data:h.utf8encode(O.data),meta:O.meta})},h.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(c,u,h){var f=c("./support"),p=c("./base64"),d=c("./nodejsUtils"),m=c("set-immediate-shim"),b=c("./external");function A(T){return T}function g(T,E){for(var S=0;S<T.length;++S)E[S]=255&T.charCodeAt(S);return E}h.newBlob=function(T,E){h.checkSupport("blob");try{return new Blob([T],{type:E})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(T),S.getBlob(E)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(T,E,S){var C=[],B=0,M=T.length;if(M<=S)return String.fromCharCode.apply(null,T);for(;B<M;)E==="array"||E==="nodebuffer"?C.push(String.fromCharCode.apply(null,T.slice(B,Math.min(B+S,M)))):C.push(String.fromCharCode.apply(null,T.subarray(B,Math.min(B+S,M)))),B+=S;return C.join("")},stringifyByChar:function(T){for(var E="",S=0;S<T.length;S++)E+=String.fromCharCode(T[S]);return E},applyCanBeUsed:{uint8array:function(){try{return f.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return f.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}}()}};function O(T){var E=65536,S=h.getTypeOf(T),C=!0;if(S==="uint8array"?C=v.applyCanBeUsed.uint8array:S==="nodebuffer"&&(C=v.applyCanBeUsed.nodebuffer),C)for(;1<E;)try{return v.stringifyByChunk(T,S,E)}catch{E=Math.floor(E/2)}return v.stringifyByChar(T)}function _(T,E){for(var S=0;S<T.length;S++)E[S]=T[S];return E}h.applyFromCharCode=O;var x={};x.string={string:A,array:function(T){return g(T,new Array(T.length))},arraybuffer:function(T){return x.string.uint8array(T).buffer},uint8array:function(T){return g(T,new Uint8Array(T.length))},nodebuffer:function(T){return g(T,d.allocBuffer(T.length))}},x.array={string:O,array:A,arraybuffer:function(T){return new Uint8Array(T).buffer},uint8array:function(T){return new Uint8Array(T)},nodebuffer:function(T){return d.newBufferFrom(T)}},x.arraybuffer={string:function(T){return O(new Uint8Array(T))},array:function(T){return _(new Uint8Array(T),new Array(T.byteLength))},arraybuffer:A,uint8array:function(T){return new Uint8Array(T)},nodebuffer:function(T){return d.newBufferFrom(new Uint8Array(T))}},x.uint8array={string:O,array:function(T){return _(T,new Array(T.length))},arraybuffer:function(T){return T.buffer},uint8array:A,nodebuffer:function(T){return d.newBufferFrom(T)}},x.nodebuffer={string:O,array:function(T){return _(T,new Array(T.length))},arraybuffer:function(T){return x.nodebuffer.uint8array(T).buffer},uint8array:function(T){return _(T,new Uint8Array(T.length))},nodebuffer:A},h.transformTo=function(T,E){if(E=E||"",!T)return E;h.checkSupport(T);var S=h.getTypeOf(E);return x[S][T](E)},h.getTypeOf=function(T){return typeof T=="string"?"string":Object.prototype.toString.call(T)==="[object Array]"?"array":f.nodebuffer&&d.isBuffer(T)?"nodebuffer":f.uint8array&&T instanceof Uint8Array?"uint8array":f.arraybuffer&&T instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(T){if(!f[T.toLowerCase()])throw new Error(T+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(T){var E,S,C="";for(S=0;S<(T||"").length;S++)C+="\\x"+((E=T.charCodeAt(S))<16?"0":"")+E.toString(16).toUpperCase();return C},h.delay=function(T,E,S){m(function(){T.apply(S||null,E||[])})},h.inherits=function(T,E){function S(){}S.prototype=E.prototype,T.prototype=new S},h.extend=function(){var T,E,S={};for(T=0;T<arguments.length;T++)for(E in arguments[T])arguments[T].hasOwnProperty(E)&&S[E]===void 0&&(S[E]=arguments[T][E]);return S},h.prepareContent=function(T,E,S,C,B){return b.Promise.resolve(E).then(function(M){return f.blob&&(M instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(M))!==-1)&&typeof FileReader!="undefined"?new b.Promise(function(D,L){var P=new FileReader;P.onload=function(X){D(X.target.result)},P.onerror=function(X){L(X.target.error)},P.readAsArrayBuffer(M)}):M}).then(function(M){var D=h.getTypeOf(M);return D?(D==="arraybuffer"?M=h.transformTo("uint8array",M):D==="string"&&(B?M=p.decode(M):S&&C!==!0&&(M=function(L){return g(L,f.uint8array?new Uint8Array(L.length):new Array(L.length))}(M))),M):b.Promise.reject(new Error("Can't read the data of '"+T+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(c,u,h){var f=c("./reader/readerFor"),p=c("./utils"),d=c("./signature"),m=c("./zipEntry"),b=(c("./utf8"),c("./support"));function A(g){this.files=[],this.loadOptions=g}A.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+p.pretty(v)+", expected "+p.pretty(g)+")")}},isSignature:function(g,v){var O=this.reader.index;this.reader.setIndex(g);var _=this.reader.readString(4)===v;return this.reader.setIndex(O),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),v=b.uint8array?"uint8array":"array",O=p.transformTo(v,g);this.zipComment=this.loadOptions.decodeFileName(O)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,v,O,_=this.zip64EndOfCentralSize-44;0<_;)g=this.reader.readInt(2),v=this.reader.readInt(4),O=this.reader.readData(v),this.zip64ExtensibleData[g]={id:g,length:v,value:O}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,v;for(g=0;g<this.files.length;g++)v=this.files[g],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(g=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var v=g;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===p.MAX_VALUE_16BITS||this.diskWithCentralDirStart===p.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===p.MAX_VALUE_16BITS||this.centralDirRecords===p.MAX_VALUE_16BITS||this.centralDirSize===p.MAX_VALUE_32BITS||this.centralDirOffset===p.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var O=this.centralDirOffset+this.centralDirSize;this.zip64&&(O+=20,O+=12+this.zip64EndOfCentralSize);var _=v-O;if(0<_)this.isSignature(v,d.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(g){this.reader=f(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},u.exports=A},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(c,u,h){var f=c("./reader/readerFor"),p=c("./utils"),d=c("./compressedObject"),m=c("./crc32"),b=c("./utf8"),A=c("./compressions"),g=c("./support");function v(O,_){this.options=O,this.loadOptions=_}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(O){var _,x;if(O.skip(22),this.fileNameLength=O.readInt(2),x=O.readInt(2),this.fileName=O.readData(this.fileNameLength),O.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(T){for(var E in A)if(A.hasOwnProperty(E)&&A[E].magic===T)return A[E];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+p.pretty(this.compressionMethod)+" unknown (inner file : "+p.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,_,O.readData(this.compressedSize))},readCentralPart:function(O){this.versionMadeBy=O.readInt(2),O.skip(2),this.bitFlag=O.readInt(2),this.compressionMethod=O.readString(2),this.date=O.readDate(),this.crc32=O.readInt(4),this.compressedSize=O.readInt(4),this.uncompressedSize=O.readInt(4);var _=O.readInt(2);if(this.extraFieldsLength=O.readInt(2),this.fileCommentLength=O.readInt(2),this.diskNumberStart=O.readInt(2),this.internalFileAttributes=O.readInt(2),this.externalFileAttributes=O.readInt(4),this.localHeaderOffset=O.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");O.skip(_),this.readExtraFields(O),this.parseZIP64ExtraField(O),this.fileComment=O.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var O=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),O==0&&(this.dosPermissions=63&this.externalFileAttributes),O==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(O){if(this.extraFields[1]){var _=f(this.extraFields[1].value);this.uncompressedSize===p.MAX_VALUE_32BITS&&(this.uncompressedSize=_.readInt(8)),this.compressedSize===p.MAX_VALUE_32BITS&&(this.compressedSize=_.readInt(8)),this.localHeaderOffset===p.MAX_VALUE_32BITS&&(this.localHeaderOffset=_.readInt(8)),this.diskNumberStart===p.MAX_VALUE_32BITS&&(this.diskNumberStart=_.readInt(4))}},readExtraFields:function(O){var _,x,T,E=O.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});O.index+4<E;)_=O.readInt(2),x=O.readInt(2),T=O.readData(x),this.extraFields[_]={id:_,length:x,value:T};O.setIndex(E)},handleUTF8:function(){var O=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=b.utf8decode(this.fileName),this.fileCommentStr=b.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var x=p.transformTo(O,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var E=p.transformTo(O,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(E)}}},findExtraFieldUnicodePath:function(){var O=this.extraFields[28789];if(O){var _=f(O.value);return _.readInt(1)!==1||m(this.fileName)!==_.readInt(4)?null:b.utf8decode(_.readData(O.length-5))}return null},findExtraFieldUnicodeComment:function(){var O=this.extraFields[25461];if(O){var _=f(O.value);return _.readInt(1)!==1||m(this.fileComment)!==_.readInt(4)?null:b.utf8decode(_.readData(O.length-5))}return null}},u.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(c,u,h){function f(_,x,T){this.name=_,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=x,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var p=c("./stream/StreamHelper"),d=c("./stream/DataWorker"),m=c("./utf8"),b=c("./compressedObject"),A=c("./stream/GenericWorker");f.prototype={internalStream:function(_){var x=null,T="string";try{if(!_)throw new Error("No output type specified.");var E=(T=_.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),x=this._decompressWorker();var S=!this._dataBinary;S&&!E&&(x=x.pipe(new m.Utf8EncodeWorker)),!S&&E&&(x=x.pipe(new m.Utf8DecodeWorker))}catch(C){(x=new A("error")).error(C)}return new p(x,T,"")},async:function(_,x){return this.internalStream(_).accumulate(x)},nodeStream:function(_,x){return this.internalStream(_||"nodebuffer").toNodejsStream(x)},_compressWorker:function(_,x){if(this._data instanceof b&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new m.Utf8EncodeWorker)),b.createWorkerFrom(T,_,x)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof A?this._data:new d(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},O=0;O<g.length;O++)f.prototype[g[O]]=v;u.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(c,u,h){(function(f){var p,d,m=f.MutationObserver||f.WebKitMutationObserver;if(m){var b=0,A=new m(_),g=f.document.createTextNode("");A.observe(g,{characterData:!0}),p=function(){g.data=b=++b%2}}else if(f.setImmediate||f.MessageChannel===void 0)p="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var x=f.document.createElement("script");x.onreadystatechange=function(){_(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},f.document.documentElement.appendChild(x)}:function(){setTimeout(_,0)};else{var v=new f.MessageChannel;v.port1.onmessage=_,p=function(){v.port2.postMessage(0)}}var O=[];function _(){var x,T;d=!0;for(var E=O.length;E;){for(T=O,O=[],x=-1;++x<E;)T[x]();E=O.length}d=!1}u.exports=function(x){O.push(x)!==1||d||p()}}).call(this,l.g!==void 0?l.g:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(c,u,h){var f=c("immediate");function p(){}var d={},m=["REJECTED"],b=["FULFILLED"],A=["PENDING"];function g(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=A,this.queue=[],this.outcome=void 0,E!==p&&x(this,E)}function v(E,S,C){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function O(E,S,C){f(function(){var B;try{B=S(C)}catch(M){return d.reject(E,M)}B===E?d.reject(E,new TypeError("Cannot resolve promise with itself")):d.resolve(E,B)})}function _(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function x(E,S){var C=!1;function B(L){C||(C=!0,d.reject(E,L))}function M(L){C||(C=!0,d.resolve(E,L))}var D=T(function(){S(M,B)});D.status==="error"&&B(D.value)}function T(E,S){var C={};try{C.value=E(S),C.status="success"}catch(B){C.status="error",C.value=B}return C}(u.exports=g).prototype.finally=function(E){if(typeof E!="function")return this;var S=this.constructor;return this.then(function(C){return S.resolve(E()).then(function(){return C})},function(C){return S.resolve(E()).then(function(){throw C})})},g.prototype.catch=function(E){return this.then(null,E)},g.prototype.then=function(E,S){if(typeof E!="function"&&this.state===b||typeof S!="function"&&this.state===m)return this;var C=new this.constructor(p);return this.state!==A?O(C,this.state===b?E:S,this.outcome):this.queue.push(new v(C,E,S)),C},v.prototype.callFulfilled=function(E){d.resolve(this.promise,E)},v.prototype.otherCallFulfilled=function(E){O(this.promise,this.onFulfilled,E)},v.prototype.callRejected=function(E){d.reject(this.promise,E)},v.prototype.otherCallRejected=function(E){O(this.promise,this.onRejected,E)},d.resolve=function(E,S){var C=T(_,S);if(C.status==="error")return d.reject(E,C.value);var B=C.value;if(B)x(E,B);else{E.state=b,E.outcome=S;for(var M=-1,D=E.queue.length;++M<D;)E.queue[M].callFulfilled(S)}return E},d.reject=function(E,S){E.state=m,E.outcome=S;for(var C=-1,B=E.queue.length;++C<B;)E.queue[C].callRejected(S);return E},g.resolve=function(E){return E instanceof this?E:d.resolve(new this(p),E)},g.reject=function(E){var S=new this(p);return d.reject(S,E)},g.all=function(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=E.length,B=!1;if(!C)return this.resolve([]);for(var M=new Array(C),D=0,L=-1,P=new this(p);++L<C;)X(E[L],L);return P;function X(Z,K){S.resolve(Z).then(function(ee){M[K]=ee,++D!==C||B||(B=!0,d.resolve(P,M))},function(ee){B||(B=!0,d.reject(P,ee))})}},g.race=function(E){if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,C=!1;if(!S)return this.resolve([]);for(var B,M=-1,D=new this(p);++M<S;)B=E[M],this.resolve(B).then(function(L){C||(C=!0,d.resolve(D,L))},function(L){C||(C=!0,d.reject(D,L))});return D}},{immediate:36}],38:[function(c,u,h){var f={};(0,c("./lib/utils/common").assign)(f,c("./lib/deflate"),c("./lib/inflate"),c("./lib/zlib/constants")),u.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(c,u,h){var f=c("./zlib/deflate"),p=c("./utils/common"),d=c("./utils/strings"),m=c("./zlib/messages"),b=c("./zlib/zstream"),A=Object.prototype.toString;function g(O){if(!(this instanceof g))return new g(O);this.options=p.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},O||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var x=f.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(x!==0)throw new Error(m[x]);if(_.header&&f.deflateSetHeader(this.strm,_.header),_.dictionary){var T;if(T=typeof _.dictionary=="string"?d.string2buf(_.dictionary):A.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(x=f.deflateSetDictionary(this.strm,T))!==0)throw new Error(m[x]);this._dict_set=!0}}function v(O,_){var x=new g(_);if(x.push(O,!0),x.err)throw x.msg||m[x.err];return x.result}g.prototype.push=function(O,_){var x,T,E=this.strm,S=this.options.chunkSize;if(this.ended)return!1;T=_===~~_?_:_===!0?4:0,typeof O=="string"?E.input=d.string2buf(O):A.call(O)==="[object ArrayBuffer]"?E.input=new Uint8Array(O):E.input=O,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new p.Buf8(S),E.next_out=0,E.avail_out=S),(x=f.deflate(E,T))!==1&&x!==0)return this.onEnd(x),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(p.shrinkBuf(E.output,E.next_out))):this.onData(p.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&x!==1);return T===4?(x=f.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===0):T!==2||(this.onEnd(0),!(E.avail_out=0))},g.prototype.onData=function(O){this.chunks.push(O)},g.prototype.onEnd=function(O){O===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},h.Deflate=g,h.deflate=v,h.deflateRaw=function(O,_){return(_=_||{}).raw=!0,v(O,_)},h.gzip=function(O,_){return(_=_||{}).gzip=!0,v(O,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(c,u,h){var f=c("./zlib/inflate"),p=c("./utils/common"),d=c("./utils/strings"),m=c("./zlib/constants"),b=c("./zlib/messages"),A=c("./zlib/zstream"),g=c("./zlib/gzheader"),v=Object.prototype.toString;function O(x){if(!(this instanceof O))return new O(x);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},x||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||x&&x.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&(15&T.windowBits)==0&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var E=f.inflateInit2(this.strm,T.windowBits);if(E!==m.Z_OK)throw new Error(b[E]);this.header=new g,f.inflateGetHeader(this.strm,this.header)}function _(x,T){var E=new O(T);if(E.push(x,!0),E.err)throw E.msg||b[E.err];return E.result}O.prototype.push=function(x,T){var E,S,C,B,M,D,L=this.strm,P=this.options.chunkSize,X=this.options.dictionary,Z=!1;if(this.ended)return!1;S=T===~~T?T:T===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof x=="string"?L.input=d.binstring2buf(x):v.call(x)==="[object ArrayBuffer]"?L.input=new Uint8Array(x):L.input=x,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new p.Buf8(P),L.next_out=0,L.avail_out=P),(E=f.inflate(L,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&X&&(D=typeof X=="string"?d.string2buf(X):v.call(X)==="[object ArrayBuffer]"?new Uint8Array(X):X,E=f.inflateSetDictionary(this.strm,D)),E===m.Z_BUF_ERROR&&Z===!0&&(E=m.Z_OK,Z=!1),E!==m.Z_STREAM_END&&E!==m.Z_OK)return this.onEnd(E),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&E!==m.Z_STREAM_END&&(L.avail_in!==0||S!==m.Z_FINISH&&S!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=d.utf8border(L.output,L.next_out),B=L.next_out-C,M=d.buf2string(L.output,C),L.next_out=B,L.avail_out=P-B,B&&p.arraySet(L.output,L.output,C,B,0),this.onData(M)):this.onData(p.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(Z=!0)}while((0<L.avail_in||L.avail_out===0)&&E!==m.Z_STREAM_END);return E===m.Z_STREAM_END&&(S=m.Z_FINISH),S===m.Z_FINISH?(E=f.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===m.Z_OK):S!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(L.avail_out=0))},O.prototype.onData=function(x){this.chunks.push(x)},O.prototype.onEnd=function(x){x===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},h.Inflate=O,h.inflate=_,h.inflateRaw=function(x,T){return(T=T||{}).raw=!0,_(x,T)},h.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(c,u,h){var f=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";h.assign=function(m){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var A=b.shift();if(A){if(typeof A!="object")throw new TypeError(A+"must be non-object");for(var g in A)A.hasOwnProperty(g)&&(m[g]=A[g])}}return m},h.shrinkBuf=function(m,b){return m.length===b?m:m.subarray?m.subarray(0,b):(m.length=b,m)};var p={arraySet:function(m,b,A,g,v){if(b.subarray&&m.subarray)m.set(b.subarray(A,A+g),v);else for(var O=0;O<g;O++)m[v+O]=b[A+O]},flattenChunks:function(m){var b,A,g,v,O,_;for(b=g=0,A=m.length;b<A;b++)g+=m[b].length;for(_=new Uint8Array(g),b=v=0,A=m.length;b<A;b++)O=m[b],_.set(O,v),v+=O.length;return _}},d={arraySet:function(m,b,A,g,v){for(var O=0;O<g;O++)m[v+O]=b[A+O]},flattenChunks:function(m){return[].concat.apply([],m)}};h.setTyped=function(m){m?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,p)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,d))},h.setTyped(f)},{}],42:[function(c,u,h){var f=c("./common"),p=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{p=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var m=new f.Buf8(256),b=0;b<256;b++)m[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;function A(g,v){if(v<65537&&(g.subarray&&d||!g.subarray&&p))return String.fromCharCode.apply(null,f.shrinkBuf(g,v));for(var O="",_=0;_<v;_++)O+=String.fromCharCode(g[_]);return O}m[254]=m[254]=1,h.string2buf=function(g){var v,O,_,x,T,E=g.length,S=0;for(x=0;x<E;x++)(64512&(O=g.charCodeAt(x)))==55296&&x+1<E&&(64512&(_=g.charCodeAt(x+1)))==56320&&(O=65536+(O-55296<<10)+(_-56320),x++),S+=O<128?1:O<2048?2:O<65536?3:4;for(v=new f.Buf8(S),x=T=0;T<S;x++)(64512&(O=g.charCodeAt(x)))==55296&&x+1<E&&(64512&(_=g.charCodeAt(x+1)))==56320&&(O=65536+(O-55296<<10)+(_-56320),x++),O<128?v[T++]=O:(O<2048?v[T++]=192|O>>>6:(O<65536?v[T++]=224|O>>>12:(v[T++]=240|O>>>18,v[T++]=128|O>>>12&63),v[T++]=128|O>>>6&63),v[T++]=128|63&O);return v},h.buf2binstring=function(g){return A(g,g.length)},h.binstring2buf=function(g){for(var v=new f.Buf8(g.length),O=0,_=v.length;O<_;O++)v[O]=g.charCodeAt(O);return v},h.buf2string=function(g,v){var O,_,x,T,E=v||g.length,S=new Array(2*E);for(O=_=0;O<E;)if((x=g[O++])<128)S[_++]=x;else if(4<(T=m[x]))S[_++]=65533,O+=T-1;else{for(x&=T===2?31:T===3?15:7;1<T&&O<E;)x=x<<6|63&g[O++],T--;1<T?S[_++]=65533:x<65536?S[_++]=x:(x-=65536,S[_++]=55296|x>>10&1023,S[_++]=56320|1023&x)}return A(S,_)},h.utf8border=function(g,v){var O;for((v=v||g.length)>g.length&&(v=g.length),O=v-1;0<=O&&(192&g[O])==128;)O--;return O<0||O===0?v:O+m[g[O]]>v?O:v}},{"./common":41}],43:[function(c,u,h){u.exports=function(f,p,d,m){for(var b=65535&f|0,A=f>>>16&65535|0,g=0;d!==0;){for(d-=g=2e3<d?2e3:d;A=A+(b=b+p[m++]|0)|0,--g;);b%=65521,A%=65521}return b|A<<16|0}},{}],44:[function(c,u,h){u.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(c,u,h){var f=function(){for(var p,d=[],m=0;m<256;m++){p=m;for(var b=0;b<8;b++)p=1&p?3988292384^p>>>1:p>>>1;d[m]=p}return d}();u.exports=function(p,d,m,b){var A=f,g=b+m;p^=-1;for(var v=b;v<g;v++)p=p>>>8^A[255&(p^d[v])];return-1^p}},{}],46:[function(c,u,h){var f,p=c("../utils/common"),d=c("./trees"),m=c("./adler32"),b=c("./crc32"),A=c("./messages"),g=-2,v=258,O=262,_=113;function x(k,j){return k.msg=A[j],j}function T(k){return(k<<1)-(4<k?9:0)}function E(k){for(var j=k.length;0<=--j;)k[j]=0}function S(k){var j=k.state,V=j.pending;V>k.avail_out&&(V=k.avail_out),V!==0&&(p.arraySet(k.output,j.pending_buf,j.pending_out,V,k.next_out),k.next_out+=V,j.pending_out+=V,k.total_out+=V,k.avail_out-=V,j.pending-=V,j.pending===0&&(j.pending_out=0))}function C(k,j){d._tr_flush_block(k,0<=k.block_start?k.block_start:-1,k.strstart-k.block_start,j),k.block_start=k.strstart,S(k.strm)}function B(k,j){k.pending_buf[k.pending++]=j}function M(k,j){k.pending_buf[k.pending++]=j>>>8&255,k.pending_buf[k.pending++]=255&j}function D(k,j){var V,H,q=k.max_chain_length,le=k.strstart,be=k.prev_length,ae=k.nice_match,he=k.strstart>k.w_size-O?k.strstart-(k.w_size-O):0,U=k.window,R=k.w_mask,Q=k.prev,F=k.strstart+v,ie=U[le+be-1],me=U[le+be];k.prev_length>=k.good_match&&(q>>=2),ae>k.lookahead&&(ae=k.lookahead);do if(U[(V=j)+be]===me&&U[V+be-1]===ie&&U[V]===U[le]&&U[++V]===U[le+1]){le+=2,V++;do;while(U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&le<F);if(H=v-(F-le),le=F-v,be<H){if(k.match_start=j,ae<=(be=H))break;ie=U[le+be-1],me=U[le+be]}}while((j=Q[j&R])>he&&--q!=0);return be<=k.lookahead?be:k.lookahead}function L(k){var j,V,H,q,le,be,ae,he,U,R,Q=k.w_size;do{if(q=k.window_size-k.lookahead-k.strstart,k.strstart>=Q+(Q-O)){for(p.arraySet(k.window,k.window,Q,Q,0),k.match_start-=Q,k.strstart-=Q,k.block_start-=Q,j=V=k.hash_size;H=k.head[--j],k.head[j]=Q<=H?H-Q:0,--V;);for(j=V=Q;H=k.prev[--j],k.prev[j]=Q<=H?H-Q:0,--V;);q+=Q}if(k.strm.avail_in===0)break;if(be=k.strm,ae=k.window,he=k.strstart+k.lookahead,R=void 0,(U=q)<(R=be.avail_in)&&(R=U),V=R===0?0:(be.avail_in-=R,p.arraySet(ae,be.input,be.next_in,R,he),be.state.wrap===1?be.adler=m(be.adler,ae,R,he):be.state.wrap===2&&(be.adler=b(be.adler,ae,R,he)),be.next_in+=R,be.total_in+=R,R),k.lookahead+=V,k.lookahead+k.insert>=3)for(le=k.strstart-k.insert,k.ins_h=k.window[le],k.ins_h=(k.ins_h<<k.hash_shift^k.window[le+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[le+3-1])&k.hash_mask,k.prev[le&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=le,le++,k.insert--,!(k.lookahead+k.insert<3)););}while(k.lookahead<O&&k.strm.avail_in!==0)}function P(k,j){for(var V,H;;){if(k.lookahead<O){if(L(k),k.lookahead<O&&j===0)return 1;if(k.lookahead===0)break}if(V=0,k.lookahead>=3&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+3-1])&k.hash_mask,V=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),V!==0&&k.strstart-V<=k.w_size-O&&(k.match_length=D(k,V)),k.match_length>=3)if(H=d._tr_tally(k,k.strstart-k.match_start,k.match_length-3),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=3){for(k.match_length--;k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+3-1])&k.hash_mask,V=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart,--k.match_length!=0;);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else H=d._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(H&&(C(k,!1),k.strm.avail_out===0))return 1}return k.insert=k.strstart<2?k.strstart:2,j===4?(C(k,!0),k.strm.avail_out===0?3:4):k.last_lit&&(C(k,!1),k.strm.avail_out===0)?1:2}function X(k,j){for(var V,H,q;;){if(k.lookahead<O){if(L(k),k.lookahead<O&&j===0)return 1;if(k.lookahead===0)break}if(V=0,k.lookahead>=3&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+3-1])&k.hash_mask,V=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=2,V!==0&&k.prev_length<k.max_lazy_match&&k.strstart-V<=k.w_size-O&&(k.match_length=D(k,V),k.match_length<=5&&(k.strategy===1||k.match_length===3&&4096<k.strstart-k.match_start)&&(k.match_length=2)),k.prev_length>=3&&k.match_length<=k.prev_length){for(q=k.strstart+k.lookahead-3,H=d._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-3),k.lookahead-=k.prev_length-1,k.prev_length-=2;++k.strstart<=q&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+3-1])&k.hash_mask,V=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),--k.prev_length!=0;);if(k.match_available=0,k.match_length=2,k.strstart++,H&&(C(k,!1),k.strm.avail_out===0))return 1}else if(k.match_available){if((H=d._tr_tally(k,0,k.window[k.strstart-1]))&&C(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return 1}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(H=d._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<2?k.strstart:2,j===4?(C(k,!0),k.strm.avail_out===0?3:4):k.last_lit&&(C(k,!1),k.strm.avail_out===0)?1:2}function Z(k,j,V,H,q){this.good_length=k,this.max_lazy=j,this.nice_length=V,this.max_chain=H,this.func=q}function K(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new p.Buf16(1146),this.dyn_dtree=new p.Buf16(122),this.bl_tree=new p.Buf16(78),E(this.dyn_ltree),E(this.dyn_dtree),E(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new p.Buf16(16),this.heap=new p.Buf16(573),E(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new p.Buf16(573),E(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ee(k){var j;return k&&k.state?(k.total_in=k.total_out=0,k.data_type=2,(j=k.state).pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?42:_,k.adler=j.wrap===2?0:1,j.last_flush=0,d._tr_init(j),0):x(k,g)}function J(k){var j=ee(k);return j===0&&function(V){V.window_size=2*V.w_size,E(V.head),V.max_lazy_match=f[V.level].max_lazy,V.good_match=f[V.level].good_length,V.nice_match=f[V.level].nice_length,V.max_chain_length=f[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=2,V.match_available=0,V.ins_h=0}(k.state),j}function ge(k,j,V,H,q,le){if(!k)return g;var be=1;if(j===-1&&(j=6),H<0?(be=0,H=-H):15<H&&(be=2,H-=16),q<1||9<q||V!==8||H<8||15<H||j<0||9<j||le<0||4<le)return x(k,g);H===8&&(H=9);var ae=new K;return(k.state=ae).strm=k,ae.wrap=be,ae.gzhead=null,ae.w_bits=H,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=q+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+3-1)/3),ae.window=new p.Buf8(2*ae.w_size),ae.head=new p.Buf16(ae.hash_size),ae.prev=new p.Buf16(ae.w_size),ae.lit_bufsize=1<<q+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new p.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=j,ae.strategy=le,ae.method=V,J(k)}f=[new Z(0,0,0,0,function(k,j){var V=65535;for(V>k.pending_buf_size-5&&(V=k.pending_buf_size-5);;){if(k.lookahead<=1){if(L(k),k.lookahead===0&&j===0)return 1;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var H=k.block_start+V;if((k.strstart===0||k.strstart>=H)&&(k.lookahead=k.strstart-H,k.strstart=H,C(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-O&&(C(k,!1),k.strm.avail_out===0))return 1}return k.insert=0,j===4?(C(k,!0),k.strm.avail_out===0?3:4):(k.strstart>k.block_start&&(C(k,!1),k.strm.avail_out),1)}),new Z(4,4,8,4,P),new Z(4,5,16,8,P),new Z(4,6,32,32,P),new Z(4,4,16,16,X),new Z(8,16,32,32,X),new Z(8,16,128,128,X),new Z(8,32,128,256,X),new Z(32,128,258,1024,X),new Z(32,258,258,4096,X)],h.deflateInit=function(k,j){return ge(k,j,8,15,8,0)},h.deflateInit2=ge,h.deflateReset=J,h.deflateResetKeep=ee,h.deflateSetHeader=function(k,j){return k&&k.state?k.state.wrap!==2?g:(k.state.gzhead=j,0):g},h.deflate=function(k,j){var V,H,q,le;if(!k||!k.state||5<j||j<0)return k?x(k,g):g;if(H=k.state,!k.output||!k.input&&k.avail_in!==0||H.status===666&&j!==4)return x(k,k.avail_out===0?-5:g);if(H.strm=k,V=H.last_flush,H.last_flush=j,H.status===42)if(H.wrap===2)k.adler=0,B(H,31),B(H,139),B(H,8),H.gzhead?(B(H,(H.gzhead.text?1:0)+(H.gzhead.hcrc?2:0)+(H.gzhead.extra?4:0)+(H.gzhead.name?8:0)+(H.gzhead.comment?16:0)),B(H,255&H.gzhead.time),B(H,H.gzhead.time>>8&255),B(H,H.gzhead.time>>16&255),B(H,H.gzhead.time>>24&255),B(H,H.level===9?2:2<=H.strategy||H.level<2?4:0),B(H,255&H.gzhead.os),H.gzhead.extra&&H.gzhead.extra.length&&(B(H,255&H.gzhead.extra.length),B(H,H.gzhead.extra.length>>8&255)),H.gzhead.hcrc&&(k.adler=b(k.adler,H.pending_buf,H.pending,0)),H.gzindex=0,H.status=69):(B(H,0),B(H,0),B(H,0),B(H,0),B(H,0),B(H,H.level===9?2:2<=H.strategy||H.level<2?4:0),B(H,3),H.status=_);else{var be=8+(H.w_bits-8<<4)<<8;be|=(2<=H.strategy||H.level<2?0:H.level<6?1:H.level===6?2:3)<<6,H.strstart!==0&&(be|=32),be+=31-be%31,H.status=_,M(H,be),H.strstart!==0&&(M(H,k.adler>>>16),M(H,65535&k.adler)),k.adler=1}if(H.status===69)if(H.gzhead.extra){for(q=H.pending;H.gzindex<(65535&H.gzhead.extra.length)&&(H.pending!==H.pending_buf_size||(H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),S(k),q=H.pending,H.pending!==H.pending_buf_size));)B(H,255&H.gzhead.extra[H.gzindex]),H.gzindex++;H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),H.gzindex===H.gzhead.extra.length&&(H.gzindex=0,H.status=73)}else H.status=73;if(H.status===73)if(H.gzhead.name){q=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),S(k),q=H.pending,H.pending===H.pending_buf_size)){le=1;break}le=H.gzindex<H.gzhead.name.length?255&H.gzhead.name.charCodeAt(H.gzindex++):0,B(H,le)}while(le!==0);H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),le===0&&(H.gzindex=0,H.status=91)}else H.status=91;if(H.status===91)if(H.gzhead.comment){q=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),S(k),q=H.pending,H.pending===H.pending_buf_size)){le=1;break}le=H.gzindex<H.gzhead.comment.length?255&H.gzhead.comment.charCodeAt(H.gzindex++):0,B(H,le)}while(le!==0);H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),le===0&&(H.status=103)}else H.status=103;if(H.status===103&&(H.gzhead.hcrc?(H.pending+2>H.pending_buf_size&&S(k),H.pending+2<=H.pending_buf_size&&(B(H,255&k.adler),B(H,k.adler>>8&255),k.adler=0,H.status=_)):H.status=_),H.pending!==0){if(S(k),k.avail_out===0)return H.last_flush=-1,0}else if(k.avail_in===0&&T(j)<=T(V)&&j!==4)return x(k,-5);if(H.status===666&&k.avail_in!==0)return x(k,-5);if(k.avail_in!==0||H.lookahead!==0||j!==0&&H.status!==666){var ae=H.strategy===2?function(he,U){for(var R;;){if(he.lookahead===0&&(L(he),he.lookahead===0)){if(U===0)return 1;break}if(he.match_length=0,R=d._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++,R&&(C(he,!1),he.strm.avail_out===0))return 1}return he.insert=0,U===4?(C(he,!0),he.strm.avail_out===0?3:4):he.last_lit&&(C(he,!1),he.strm.avail_out===0)?1:2}(H,j):H.strategy===3?function(he,U){for(var R,Q,F,ie,me=he.window;;){if(he.lookahead<=v){if(L(he),he.lookahead<=v&&U===0)return 1;if(he.lookahead===0)break}if(he.match_length=0,he.lookahead>=3&&0<he.strstart&&(Q=me[F=he.strstart-1])===me[++F]&&Q===me[++F]&&Q===me[++F]){ie=he.strstart+v;do;while(Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&F<ie);he.match_length=v-(ie-F),he.match_length>he.lookahead&&(he.match_length=he.lookahead)}if(he.match_length>=3?(R=d._tr_tally(he,1,he.match_length-3),he.lookahead-=he.match_length,he.strstart+=he.match_length,he.match_length=0):(R=d._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++),R&&(C(he,!1),he.strm.avail_out===0))return 1}return he.insert=0,U===4?(C(he,!0),he.strm.avail_out===0?3:4):he.last_lit&&(C(he,!1),he.strm.avail_out===0)?1:2}(H,j):f[H.level].func(H,j);if(ae!==3&&ae!==4||(H.status=666),ae===1||ae===3)return k.avail_out===0&&(H.last_flush=-1),0;if(ae===2&&(j===1?d._tr_align(H):j!==5&&(d._tr_stored_block(H,0,0,!1),j===3&&(E(H.head),H.lookahead===0&&(H.strstart=0,H.block_start=0,H.insert=0))),S(k),k.avail_out===0))return H.last_flush=-1,0}return j!==4?0:H.wrap<=0?1:(H.wrap===2?(B(H,255&k.adler),B(H,k.adler>>8&255),B(H,k.adler>>16&255),B(H,k.adler>>24&255),B(H,255&k.total_in),B(H,k.total_in>>8&255),B(H,k.total_in>>16&255),B(H,k.total_in>>24&255)):(M(H,k.adler>>>16),M(H,65535&k.adler)),S(k),0<H.wrap&&(H.wrap=-H.wrap),H.pending!==0?0:1)},h.deflateEnd=function(k){var j;return k&&k.state?(j=k.state.status)!==42&&j!==69&&j!==73&&j!==91&&j!==103&&j!==_&&j!==666?x(k,g):(k.state=null,j===_?x(k,-3):0):g},h.deflateSetDictionary=function(k,j){var V,H,q,le,be,ae,he,U,R=j.length;if(!k||!k.state||(le=(V=k.state).wrap)===2||le===1&&V.status!==42||V.lookahead)return g;for(le===1&&(k.adler=m(k.adler,j,R,0)),V.wrap=0,R>=V.w_size&&(le===0&&(E(V.head),V.strstart=0,V.block_start=0,V.insert=0),U=new p.Buf8(V.w_size),p.arraySet(U,j,R-V.w_size,V.w_size,0),j=U,R=V.w_size),be=k.avail_in,ae=k.next_in,he=k.input,k.avail_in=R,k.next_in=0,k.input=j,L(V);V.lookahead>=3;){for(H=V.strstart,q=V.lookahead-2;V.ins_h=(V.ins_h<<V.hash_shift^V.window[H+3-1])&V.hash_mask,V.prev[H&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=H,H++,--q;);V.strstart=H,V.lookahead=2,L(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=2,V.match_available=0,k.next_in=ae,k.input=he,k.avail_in=be,V.wrap=le,0},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(c,u,h){u.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(c,u,h){u.exports=function(f,p){var d,m,b,A,g,v,O,_,x,T,E,S,C,B,M,D,L,P,X,Z,K,ee,J,ge,k;d=f.state,m=f.next_in,ge=f.input,b=m+(f.avail_in-5),A=f.next_out,k=f.output,g=A-(p-f.avail_out),v=A+(f.avail_out-257),O=d.dmax,_=d.wsize,x=d.whave,T=d.wnext,E=d.window,S=d.hold,C=d.bits,B=d.lencode,M=d.distcode,D=(1<<d.lenbits)-1,L=(1<<d.distbits)-1;e:do{C<15&&(S+=ge[m++]<<C,C+=8,S+=ge[m++]<<C,C+=8),P=B[S&D];t:for(;;){if(S>>>=X=P>>>24,C-=X,(X=P>>>16&255)==0)k[A++]=65535&P;else{if(!(16&X)){if((64&X)==0){P=B[(65535&P)+(S&(1<<X)-1)];continue t}if(32&X){d.mode=12;break e}f.msg="invalid literal/length code",d.mode=30;break e}Z=65535&P,(X&=15)&&(C<X&&(S+=ge[m++]<<C,C+=8),Z+=S&(1<<X)-1,S>>>=X,C-=X),C<15&&(S+=ge[m++]<<C,C+=8,S+=ge[m++]<<C,C+=8),P=M[S&L];n:for(;;){if(S>>>=X=P>>>24,C-=X,!(16&(X=P>>>16&255))){if((64&X)==0){P=M[(65535&P)+(S&(1<<X)-1)];continue n}f.msg="invalid distance code",d.mode=30;break e}if(K=65535&P,C<(X&=15)&&(S+=ge[m++]<<C,(C+=8)<X&&(S+=ge[m++]<<C,C+=8)),O<(K+=S&(1<<X)-1)){f.msg="invalid distance too far back",d.mode=30;break e}if(S>>>=X,C-=X,(X=A-g)<K){if(x<(X=K-X)&&d.sane){f.msg="invalid distance too far back",d.mode=30;break e}if(J=E,(ee=0)===T){if(ee+=_-X,X<Z){for(Z-=X;k[A++]=E[ee++],--X;);ee=A-K,J=k}}else if(T<X){if(ee+=_+T-X,(X-=T)<Z){for(Z-=X;k[A++]=E[ee++],--X;);if(ee=0,T<Z){for(Z-=X=T;k[A++]=E[ee++],--X;);ee=A-K,J=k}}}else if(ee+=T-X,X<Z){for(Z-=X;k[A++]=E[ee++],--X;);ee=A-K,J=k}for(;2<Z;)k[A++]=J[ee++],k[A++]=J[ee++],k[A++]=J[ee++],Z-=3;Z&&(k[A++]=J[ee++],1<Z&&(k[A++]=J[ee++]))}else{for(ee=A-K;k[A++]=k[ee++],k[A++]=k[ee++],k[A++]=k[ee++],2<(Z-=3););Z&&(k[A++]=k[ee++],1<Z&&(k[A++]=k[ee++]))}break}}break}}while(m<b&&A<v);m-=Z=C>>3,S&=(1<<(C-=Z<<3))-1,f.next_in=m,f.next_out=A,f.avail_in=m<b?b-m+5:5-(m-b),f.avail_out=A<v?v-A+257:257-(A-v),d.hold=S,d.bits=C}},{}],49:[function(c,u,h){var f=c("../utils/common"),p=c("./adler32"),d=c("./crc32"),m=c("./inffast"),b=c("./inftrees"),A=-2;function g(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(D){var L;return D&&D.state?(L=D.state,D.total_in=D.total_out=L.total=0,D.msg="",L.wrap&&(D.adler=1&L.wrap),L.mode=1,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new f.Buf32(852),L.distcode=L.distdyn=new f.Buf32(592),L.sane=1,L.back=-1,0):A}function _(D){var L;return D&&D.state?((L=D.state).wsize=0,L.whave=0,L.wnext=0,O(D)):A}function x(D,L){var P,X;return D&&D.state?(X=D.state,L<0?(P=0,L=-L):(P=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?A:(X.window!==null&&X.wbits!==L&&(X.window=null),X.wrap=P,X.wbits=L,_(D))):A}function T(D,L){var P,X;return D?(X=new v,(D.state=X).window=null,(P=x(D,L))!==0&&(D.state=null),P):A}var E,S,C=!0;function B(D){if(C){var L;for(E=new f.Buf32(512),S=new f.Buf32(32),L=0;L<144;)D.lens[L++]=8;for(;L<256;)D.lens[L++]=9;for(;L<280;)D.lens[L++]=7;for(;L<288;)D.lens[L++]=8;for(b(1,D.lens,0,288,E,0,D.work,{bits:9}),L=0;L<32;)D.lens[L++]=5;b(2,D.lens,0,32,S,0,D.work,{bits:5}),C=!1}D.lencode=E,D.lenbits=9,D.distcode=S,D.distbits=5}function M(D,L,P,X){var Z,K=D.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new f.Buf8(K.wsize)),X>=K.wsize?(f.arraySet(K.window,L,P-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(X<(Z=K.wsize-K.wnext)&&(Z=X),f.arraySet(K.window,L,P-X,Z,K.wnext),(X-=Z)?(f.arraySet(K.window,L,P-X,X,0),K.wnext=X,K.whave=K.wsize):(K.wnext+=Z,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=Z))),0}h.inflateReset=_,h.inflateReset2=x,h.inflateResetKeep=O,h.inflateInit=function(D){return T(D,15)},h.inflateInit2=T,h.inflate=function(D,L){var P,X,Z,K,ee,J,ge,k,j,V,H,q,le,be,ae,he,U,R,Q,F,ie,me,oe,ue,de=0,pe=new f.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return A;(P=D.state).mode===12&&(P.mode=13),ee=D.next_out,Z=D.output,ge=D.avail_out,K=D.next_in,X=D.input,J=D.avail_in,k=P.hold,j=P.bits,V=J,H=ge,me=0;e:for(;;)switch(P.mode){case 1:if(P.wrap===0){P.mode=13;break}for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(2&P.wrap&&k===35615){pe[P.check=0]=255&k,pe[1]=k>>>8&255,P.check=d(P.check,pe,2,0),j=k=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&k)<<8)+(k>>8))%31){D.msg="incorrect header check",P.mode=30;break}if((15&k)!=8){D.msg="unknown compression method",P.mode=30;break}if(j-=4,ie=8+(15&(k>>>=4)),P.wbits===0)P.wbits=ie;else if(ie>P.wbits){D.msg="invalid window size",P.mode=30;break}P.dmax=1<<ie,D.adler=P.check=1,P.mode=512&k?10:12,j=k=0;break;case 2:for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(P.flags=k,(255&P.flags)!=8){D.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){D.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=k>>8&1),512&P.flags&&(pe[0]=255&k,pe[1]=k>>>8&255,P.check=d(P.check,pe,2,0)),j=k=0,P.mode=3;case 3:for(;j<32;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.head&&(P.head.time=k),512&P.flags&&(pe[0]=255&k,pe[1]=k>>>8&255,pe[2]=k>>>16&255,pe[3]=k>>>24&255,P.check=d(P.check,pe,4,0)),j=k=0,P.mode=4;case 4:for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.head&&(P.head.xflags=255&k,P.head.os=k>>8),512&P.flags&&(pe[0]=255&k,pe[1]=k>>>8&255,P.check=d(P.check,pe,2,0)),j=k=0,P.mode=5;case 5:if(1024&P.flags){for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.length=k,P.head&&(P.head.extra_len=k),512&P.flags&&(pe[0]=255&k,pe[1]=k>>>8&255,P.check=d(P.check,pe,2,0)),j=k=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(J<(q=P.length)&&(q=J),q&&(P.head&&(ie=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),f.arraySet(P.head.extra,X,K,q,ie)),512&P.flags&&(P.check=d(P.check,X,q,K)),J-=q,K+=q,P.length-=q),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(J===0)break e;for(q=0;ie=X[K+q++],P.head&&ie&&P.length<65536&&(P.head.name+=String.fromCharCode(ie)),ie&&q<J;);if(512&P.flags&&(P.check=d(P.check,X,q,K)),J-=q,K+=q,ie)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(J===0)break e;for(q=0;ie=X[K+q++],P.head&&ie&&P.length<65536&&(P.head.comment+=String.fromCharCode(ie)),ie&&q<J;);if(512&P.flags&&(P.check=d(P.check,X,q,K)),J-=q,K+=q,ie)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(k!==(65535&P.check)){D.msg="header crc mismatch",P.mode=30;break}j=k=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),D.adler=P.check=0,P.mode=12;break;case 10:for(;j<32;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}D.adler=P.check=g(k),j=k=0,P.mode=11;case 11:if(P.havedict===0)return D.next_out=ee,D.avail_out=ge,D.next_in=K,D.avail_in=J,P.hold=k,P.bits=j,2;D.adler=P.check=1,P.mode=12;case 12:if(L===5||L===6)break e;case 13:if(P.last){k>>>=7&j,j-=7&j,P.mode=27;break}for(;j<3;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}switch(P.last=1&k,j-=1,3&(k>>>=1)){case 0:P.mode=14;break;case 1:if(B(P),P.mode=20,L!==6)break;k>>>=2,j-=2;break e;case 2:P.mode=17;break;case 3:D.msg="invalid block type",P.mode=30}k>>>=2,j-=2;break;case 14:for(k>>>=7&j,j-=7&j;j<32;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if((65535&k)!=(k>>>16^65535)){D.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&k,j=k=0,P.mode=15,L===6)break e;case 15:P.mode=16;case 16:if(q=P.length){if(J<q&&(q=J),ge<q&&(q=ge),q===0)break e;f.arraySet(Z,X,K,q,ee),J-=q,K+=q,ge-=q,ee+=q,P.length-=q;break}P.mode=12;break;case 17:for(;j<14;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(P.nlen=257+(31&k),k>>>=5,j-=5,P.ndist=1+(31&k),k>>>=5,j-=5,P.ncode=4+(15&k),k>>>=4,j-=4,286<P.nlen||30<P.ndist){D.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;j<3;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.lens[xe[P.have++]]=7&k,k>>>=3,j-=3}for(;P.have<19;)P.lens[xe[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,oe={bits:P.lenbits},me=b(0,P.lens,0,19,P.lencode,0,P.work,oe),P.lenbits=oe.bits,me){D.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;he=(de=P.lencode[k&(1<<P.lenbits)-1])>>>16&255,U=65535&de,!((ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(U<16)k>>>=ae,j-=ae,P.lens[P.have++]=U;else{if(U===16){for(ue=ae+2;j<ue;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(k>>>=ae,j-=ae,P.have===0){D.msg="invalid bit length repeat",P.mode=30;break}ie=P.lens[P.have-1],q=3+(3&k),k>>>=2,j-=2}else if(U===17){for(ue=ae+3;j<ue;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}j-=ae,ie=0,q=3+(7&(k>>>=ae)),k>>>=3,j-=3}else{for(ue=ae+7;j<ue;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}j-=ae,ie=0,q=11+(127&(k>>>=ae)),k>>>=7,j-=7}if(P.have+q>P.nlen+P.ndist){D.msg="invalid bit length repeat",P.mode=30;break}for(;q--;)P.lens[P.have++]=ie}}if(P.mode===30)break;if(P.lens[256]===0){D.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,oe={bits:P.lenbits},me=b(1,P.lens,0,P.nlen,P.lencode,0,P.work,oe),P.lenbits=oe.bits,me){D.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,oe={bits:P.distbits},me=b(2,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,oe),P.distbits=oe.bits,me){D.msg="invalid distances set",P.mode=30;break}if(P.mode=20,L===6)break e;case 20:P.mode=21;case 21:if(6<=J&&258<=ge){D.next_out=ee,D.avail_out=ge,D.next_in=K,D.avail_in=J,P.hold=k,P.bits=j,m(D,H),ee=D.next_out,Z=D.output,ge=D.avail_out,K=D.next_in,X=D.input,J=D.avail_in,k=P.hold,j=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;he=(de=P.lencode[k&(1<<P.lenbits)-1])>>>16&255,U=65535&de,!((ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(he&&(240&he)==0){for(R=ae,Q=he,F=U;he=(de=P.lencode[F+((k&(1<<R+Q)-1)>>R)])>>>16&255,U=65535&de,!(R+(ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}k>>>=R,j-=R,P.back+=R}if(k>>>=ae,j-=ae,P.back+=ae,P.length=U,he===0){P.mode=26;break}if(32&he){P.back=-1,P.mode=12;break}if(64&he){D.msg="invalid literal/length code",P.mode=30;break}P.extra=15&he,P.mode=22;case 22:if(P.extra){for(ue=P.extra;j<ue;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.length+=k&(1<<P.extra)-1,k>>>=P.extra,j-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;he=(de=P.distcode[k&(1<<P.distbits)-1])>>>16&255,U=65535&de,!((ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if((240&he)==0){for(R=ae,Q=he,F=U;he=(de=P.distcode[F+((k&(1<<R+Q)-1)>>R)])>>>16&255,U=65535&de,!(R+(ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}k>>>=R,j-=R,P.back+=R}if(k>>>=ae,j-=ae,P.back+=ae,64&he){D.msg="invalid distance code",P.mode=30;break}P.offset=U,P.extra=15&he,P.mode=24;case 24:if(P.extra){for(ue=P.extra;j<ue;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.offset+=k&(1<<P.extra)-1,k>>>=P.extra,j-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){D.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(ge===0)break e;if(q=H-ge,P.offset>q){if((q=P.offset-q)>P.whave&&P.sane){D.msg="invalid distance too far back",P.mode=30;break}le=q>P.wnext?(q-=P.wnext,P.wsize-q):P.wnext-q,q>P.length&&(q=P.length),be=P.window}else be=Z,le=ee-P.offset,q=P.length;for(ge<q&&(q=ge),ge-=q,P.length-=q;Z[ee++]=be[le++],--q;);P.length===0&&(P.mode=21);break;case 26:if(ge===0)break e;Z[ee++]=P.length,ge--,P.mode=21;break;case 27:if(P.wrap){for(;j<32;){if(J===0)break e;J--,k|=X[K++]<<j,j+=8}if(H-=ge,D.total_out+=H,P.total+=H,H&&(D.adler=P.check=P.flags?d(P.check,Z,H,ee-H):p(P.check,Z,H,ee-H)),H=ge,(P.flags?k:g(k))!==P.check){D.msg="incorrect data check",P.mode=30;break}j=k=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;j<32;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(k!==(4294967295&P.total)){D.msg="incorrect length check",P.mode=30;break}j=k=0}P.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;default:return A}return D.next_out=ee,D.avail_out=ge,D.next_in=K,D.avail_in=J,P.hold=k,P.bits=j,(P.wsize||H!==D.avail_out&&P.mode<30&&(P.mode<27||L!==4))&&M(D,D.output,D.next_out,H-D.avail_out)?(P.mode=31,-4):(V-=D.avail_in,H-=D.avail_out,D.total_in+=V,D.total_out+=H,P.total+=H,P.wrap&&H&&(D.adler=P.check=P.flags?d(P.check,Z,H,D.next_out-H):p(P.check,Z,H,D.next_out-H)),D.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(V==0&&H===0||L===4)&&me===0&&(me=-5),me)},h.inflateEnd=function(D){if(!D||!D.state)return A;var L=D.state;return L.window&&(L.window=null),D.state=null,0},h.inflateGetHeader=function(D,L){var P;return D&&D.state?(2&(P=D.state).wrap)==0?A:((P.head=L).done=!1,0):A},h.inflateSetDictionary=function(D,L){var P,X=L.length;return D&&D.state?(P=D.state).wrap!==0&&P.mode!==11?A:P.mode===11&&p(1,L,X,0)!==P.check?-3:M(D,L,X,X)?(P.mode=31,-4):(P.havedict=1,0):A},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(c,u,h){var f=c("../utils/common"),p=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];u.exports=function(A,g,v,O,_,x,T,E){var S,C,B,M,D,L,P,X,Z,K=E.bits,ee=0,J=0,ge=0,k=0,j=0,V=0,H=0,q=0,le=0,be=0,ae=null,he=0,U=new f.Buf16(16),R=new f.Buf16(16),Q=null,F=0;for(ee=0;ee<=15;ee++)U[ee]=0;for(J=0;J<O;J++)U[g[v+J]]++;for(j=K,k=15;1<=k&&U[k]===0;k--);if(k<j&&(j=k),k===0)return _[x++]=20971520,_[x++]=20971520,E.bits=1,0;for(ge=1;ge<k&&U[ge]===0;ge++);for(j<ge&&(j=ge),ee=q=1;ee<=15;ee++)if(q<<=1,(q-=U[ee])<0)return-1;if(0<q&&(A===0||k!==1))return-1;for(R[1]=0,ee=1;ee<15;ee++)R[ee+1]=R[ee]+U[ee];for(J=0;J<O;J++)g[v+J]!==0&&(T[R[g[v+J]]++]=J);if(L=A===0?(ae=Q=T,19):A===1?(ae=p,he-=257,Q=d,F-=257,256):(ae=m,Q=b,-1),ee=ge,D=x,H=J=be=0,B=-1,M=(le=1<<(V=j))-1,A===1&&852<le||A===2&&592<le)return 1;for(;;){for(P=ee-H,Z=T[J]<L?(X=0,T[J]):T[J]>L?(X=Q[F+T[J]],ae[he+T[J]]):(X=96,0),S=1<<ee-H,ge=C=1<<V;_[D+(be>>H)+(C-=S)]=P<<24|X<<16|Z|0,C!==0;);for(S=1<<ee-1;be&S;)S>>=1;if(S!==0?(be&=S-1,be+=S):be=0,J++,--U[ee]==0){if(ee===k)break;ee=g[v+T[J]]}if(j<ee&&(be&M)!==B){for(H===0&&(H=j),D+=ge,q=1<<(V=ee-H);V+H<k&&!((q-=U[V+H])<=0);)V++,q<<=1;if(le+=1<<V,A===1&&852<le||A===2&&592<le)return 1;_[B=be&M]=j<<24|V<<16|D-x|0}}return be!==0&&(_[D+be]=ee-H<<24|4194304|0),E.bits=j,0}},{"../utils/common":41}],51:[function(c,u,h){u.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(c,u,h){var f=c("../utils/common");function p(Q){for(var F=Q.length;0<=--F;)Q[F]=0}var d=256,m=286,b=30,A=15,g=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],v=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(576);p(x);var T=new Array(60);p(T);var E=new Array(512);p(E);var S=new Array(256);p(S);var C=new Array(29);p(C);var B,M,D,L=new Array(b);function P(Q,F,ie,me,oe){this.static_tree=Q,this.extra_bits=F,this.extra_base=ie,this.elems=me,this.max_length=oe,this.has_stree=Q&&Q.length}function X(Q,F){this.dyn_tree=Q,this.max_code=0,this.stat_desc=F}function Z(Q){return Q<256?E[Q]:E[256+(Q>>>7)]}function K(Q,F){Q.pending_buf[Q.pending++]=255&F,Q.pending_buf[Q.pending++]=F>>>8&255}function ee(Q,F,ie){Q.bi_valid>16-ie?(Q.bi_buf|=F<<Q.bi_valid&65535,K(Q,Q.bi_buf),Q.bi_buf=F>>16-Q.bi_valid,Q.bi_valid+=ie-16):(Q.bi_buf|=F<<Q.bi_valid&65535,Q.bi_valid+=ie)}function J(Q,F,ie){ee(Q,ie[2*F],ie[2*F+1])}function ge(Q,F){for(var ie=0;ie|=1&Q,Q>>>=1,ie<<=1,0<--F;);return ie>>>1}function k(Q,F,ie){var me,oe,ue=new Array(16),de=0;for(me=1;me<=A;me++)ue[me]=de=de+ie[me-1]<<1;for(oe=0;oe<=F;oe++){var pe=Q[2*oe+1];pe!==0&&(Q[2*oe]=ge(ue[pe]++,pe))}}function j(Q){var F;for(F=0;F<m;F++)Q.dyn_ltree[2*F]=0;for(F=0;F<b;F++)Q.dyn_dtree[2*F]=0;for(F=0;F<19;F++)Q.bl_tree[2*F]=0;Q.dyn_ltree[512]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0}function V(Q){8<Q.bi_valid?K(Q,Q.bi_buf):0<Q.bi_valid&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0}function H(Q,F,ie,me){var oe=2*F,ue=2*ie;return Q[oe]<Q[ue]||Q[oe]===Q[ue]&&me[F]<=me[ie]}function q(Q,F,ie){for(var me=Q.heap[ie],oe=ie<<1;oe<=Q.heap_len&&(oe<Q.heap_len&&H(F,Q.heap[oe+1],Q.heap[oe],Q.depth)&&oe++,!H(F,me,Q.heap[oe],Q.depth));)Q.heap[ie]=Q.heap[oe],ie=oe,oe<<=1;Q.heap[ie]=me}function le(Q,F,ie){var me,oe,ue,de,pe=0;if(Q.last_lit!==0)for(;me=Q.pending_buf[Q.d_buf+2*pe]<<8|Q.pending_buf[Q.d_buf+2*pe+1],oe=Q.pending_buf[Q.l_buf+pe],pe++,me===0?J(Q,oe,F):(J(Q,(ue=S[oe])+d+1,F),(de=g[ue])!==0&&ee(Q,oe-=C[ue],de),J(Q,ue=Z(--me),ie),(de=v[ue])!==0&&ee(Q,me-=L[ue],de)),pe<Q.last_lit;);J(Q,256,F)}function be(Q,F){var ie,me,oe,ue=F.dyn_tree,de=F.stat_desc.static_tree,pe=F.stat_desc.has_stree,xe=F.stat_desc.elems,Fe=-1;for(Q.heap_len=0,Q.heap_max=573,ie=0;ie<xe;ie++)ue[2*ie]!==0?(Q.heap[++Q.heap_len]=Fe=ie,Q.depth[ie]=0):ue[2*ie+1]=0;for(;Q.heap_len<2;)ue[2*(oe=Q.heap[++Q.heap_len]=Fe<2?++Fe:0)]=1,Q.depth[oe]=0,Q.opt_len--,pe&&(Q.static_len-=de[2*oe+1]);for(F.max_code=Fe,ie=Q.heap_len>>1;1<=ie;ie--)q(Q,ue,ie);for(oe=xe;ie=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],q(Q,ue,1),me=Q.heap[1],Q.heap[--Q.heap_max]=ie,Q.heap[--Q.heap_max]=me,ue[2*oe]=ue[2*ie]+ue[2*me],Q.depth[oe]=(Q.depth[ie]>=Q.depth[me]?Q.depth[ie]:Q.depth[me])+1,ue[2*ie+1]=ue[2*me+1]=oe,Q.heap[1]=oe++,q(Q,ue,1),2<=Q.heap_len;);Q.heap[--Q.heap_max]=Q.heap[1],function(st,I){var N,z,te,se,ce,Oe,ze=I.dyn_tree,Ve=I.max_code,Rt=I.stat_desc.static_tree,ot=I.stat_desc.has_stree,Tt=I.stat_desc.extra_bits,ja=I.stat_desc.extra_base,Ls=I.stat_desc.max_length,So=0;for(se=0;se<=A;se++)st.bl_count[se]=0;for(ze[2*st.heap[st.heap_max]+1]=0,N=st.heap_max+1;N<573;N++)Ls<(se=ze[2*ze[2*(z=st.heap[N])+1]+1]+1)&&(se=Ls,So++),ze[2*z+1]=se,Ve<z||(st.bl_count[se]++,ce=0,ja<=z&&(ce=Tt[z-ja]),Oe=ze[2*z],st.opt_len+=Oe*(se+ce),ot&&(st.static_len+=Oe*(Rt[2*z+1]+ce)));if(So!==0){do{for(se=Ls-1;st.bl_count[se]===0;)se--;st.bl_count[se]--,st.bl_count[se+1]+=2,st.bl_count[Ls]--,So-=2}while(0<So);for(se=Ls;se!==0;se--)for(z=st.bl_count[se];z!==0;)Ve<(te=st.heap[--N])||(ze[2*te+1]!==se&&(st.opt_len+=(se-ze[2*te+1])*ze[2*te],ze[2*te+1]=se),z--)}}(Q,F),k(ue,Fe,Q.bl_count)}function ae(Q,F,ie){var me,oe,ue=-1,de=F[1],pe=0,xe=7,Fe=4;for(de===0&&(xe=138,Fe=3),F[2*(ie+1)+1]=65535,me=0;me<=ie;me++)oe=de,de=F[2*(me+1)+1],++pe<xe&&oe===de||(pe<Fe?Q.bl_tree[2*oe]+=pe:oe!==0?(oe!==ue&&Q.bl_tree[2*oe]++,Q.bl_tree[32]++):pe<=10?Q.bl_tree[34]++:Q.bl_tree[36]++,ue=oe,Fe=(pe=0)===de?(xe=138,3):oe===de?(xe=6,3):(xe=7,4))}function he(Q,F,ie){var me,oe,ue=-1,de=F[1],pe=0,xe=7,Fe=4;for(de===0&&(xe=138,Fe=3),me=0;me<=ie;me++)if(oe=de,de=F[2*(me+1)+1],!(++pe<xe&&oe===de)){if(pe<Fe)for(;J(Q,oe,Q.bl_tree),--pe!=0;);else oe!==0?(oe!==ue&&(J(Q,oe,Q.bl_tree),pe--),J(Q,16,Q.bl_tree),ee(Q,pe-3,2)):pe<=10?(J(Q,17,Q.bl_tree),ee(Q,pe-3,3)):(J(Q,18,Q.bl_tree),ee(Q,pe-11,7));ue=oe,Fe=(pe=0)===de?(xe=138,3):oe===de?(xe=6,3):(xe=7,4)}}p(L);var U=!1;function R(Q,F,ie,me){ee(Q,0+(me?1:0),3),function(oe,ue,de,pe){V(oe),K(oe,de),K(oe,~de),f.arraySet(oe.pending_buf,oe.window,ue,de,oe.pending),oe.pending+=de}(Q,F,ie)}h._tr_init=function(Q){U||(function(){var F,ie,me,oe,ue,de=new Array(16);for(oe=me=0;oe<28;oe++)for(C[oe]=me,F=0;F<1<<g[oe];F++)S[me++]=oe;for(S[me-1]=oe,oe=ue=0;oe<16;oe++)for(L[oe]=ue,F=0;F<1<<v[oe];F++)E[ue++]=oe;for(ue>>=7;oe<b;oe++)for(L[oe]=ue<<7,F=0;F<1<<v[oe]-7;F++)E[256+ue++]=oe;for(ie=0;ie<=A;ie++)de[ie]=0;for(F=0;F<=143;)x[2*F+1]=8,F++,de[8]++;for(;F<=255;)x[2*F+1]=9,F++,de[9]++;for(;F<=279;)x[2*F+1]=7,F++,de[7]++;for(;F<=287;)x[2*F+1]=8,F++,de[8]++;for(k(x,287,de),F=0;F<b;F++)T[2*F+1]=5,T[2*F]=ge(F,5);B=new P(x,g,257,m,A),M=new P(T,v,0,b,A),D=new P(new Array(0),O,0,19,7)}(),U=!0),Q.l_desc=new X(Q.dyn_ltree,B),Q.d_desc=new X(Q.dyn_dtree,M),Q.bl_desc=new X(Q.bl_tree,D),Q.bi_buf=0,Q.bi_valid=0,j(Q)},h._tr_stored_block=R,h._tr_flush_block=function(Q,F,ie,me){var oe,ue,de=0;0<Q.level?(Q.strm.data_type===2&&(Q.strm.data_type=function(pe){var xe,Fe=4093624447;for(xe=0;xe<=31;xe++,Fe>>>=1)if(1&Fe&&pe.dyn_ltree[2*xe]!==0)return 0;if(pe.dyn_ltree[18]!==0||pe.dyn_ltree[20]!==0||pe.dyn_ltree[26]!==0)return 1;for(xe=32;xe<d;xe++)if(pe.dyn_ltree[2*xe]!==0)return 1;return 0}(Q)),be(Q,Q.l_desc),be(Q,Q.d_desc),de=function(pe){var xe;for(ae(pe,pe.dyn_ltree,pe.l_desc.max_code),ae(pe,pe.dyn_dtree,pe.d_desc.max_code),be(pe,pe.bl_desc),xe=18;3<=xe&&pe.bl_tree[2*_[xe]+1]===0;xe--);return pe.opt_len+=3*(xe+1)+5+5+4,xe}(Q),oe=Q.opt_len+3+7>>>3,(ue=Q.static_len+3+7>>>3)<=oe&&(oe=ue)):oe=ue=ie+5,ie+4<=oe&&F!==-1?R(Q,F,ie,me):Q.strategy===4||ue===oe?(ee(Q,2+(me?1:0),3),le(Q,x,T)):(ee(Q,4+(me?1:0),3),function(pe,xe,Fe,st){var I;for(ee(pe,xe-257,5),ee(pe,Fe-1,5),ee(pe,st-4,4),I=0;I<st;I++)ee(pe,pe.bl_tree[2*_[I]+1],3);he(pe,pe.dyn_ltree,xe-1),he(pe,pe.dyn_dtree,Fe-1)}(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,de+1),le(Q,Q.dyn_ltree,Q.dyn_dtree)),j(Q),me&&V(Q)},h._tr_tally=function(Q,F,ie){return Q.pending_buf[Q.d_buf+2*Q.last_lit]=F>>>8&255,Q.pending_buf[Q.d_buf+2*Q.last_lit+1]=255&F,Q.pending_buf[Q.l_buf+Q.last_lit]=255&ie,Q.last_lit++,F===0?Q.dyn_ltree[2*ie]++:(Q.matches++,F--,Q.dyn_ltree[2*(S[ie]+d+1)]++,Q.dyn_dtree[2*Z(F)]++),Q.last_lit===Q.lit_bufsize-1},h._tr_align=function(Q){ee(Q,2,3),J(Q,256,x),function(F){F.bi_valid===16?(K(F,F.bi_buf),F.bi_buf=0,F.bi_valid=0):8<=F.bi_valid&&(F.pending_buf[F.pending++]=255&F.bi_buf,F.bi_buf>>=8,F.bi_valid-=8)}(Q)}},{"../utils/common":41}],53:[function(c,u,h){u.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(c,u,h){u.exports=typeof setImmediate=="function"?setImmediate:function(){var f=[].slice.apply(arguments);f.splice(1,0,0),setTimeout.apply(null,f)}},{}]},{},[10])(10)},155:o=>{var a,l,c=o.exports={};function u(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function f(_){if(a===setTimeout)return setTimeout(_,0);if((a===u||!a)&&setTimeout)return a=setTimeout,setTimeout(_,0);try{return a(_,0)}catch{try{return a.call(null,_,0)}catch{return a.call(this,_,0)}}}(function(){try{a=typeof setTimeout=="function"?setTimeout:u}catch{a=u}try{l=typeof clearTimeout=="function"?clearTimeout:h}catch{l=h}})();var p,d=[],m=!1,b=-1;function A(){m&&p&&(m=!1,p.length?d=p.concat(d):b=-1,d.length&&g())}function g(){if(!m){var _=f(A);m=!0;for(var x=d.length;x;){for(p=d,d=[];++b<x;)p&&p[b].run();b=-1,x=d.length}p=null,m=!1,function(T){if(l===clearTimeout)return clearTimeout(T);if((l===h||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(T);try{l(T)}catch{try{return l.call(null,T)}catch{return l.call(this,T)}}}(_)}}function v(_,x){this.fun=_,this.array=x}function O(){}c.nextTick=function(_){var x=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)x[T-1]=arguments[T];d.push(new v(_,x)),d.length!==1||m||f(g)},v.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=O,c.addListener=O,c.once=O,c.off=O,c.removeListener=O,c.removeAllListeners=O,c.emit=O,c.prependListener=O,c.prependOnceListener=O,c.listeners=function(_){return[]},c.binding=function(_){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(_){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},509:(o,a,l)=>{var c=l(764),u=c.Buffer;function h(p,d){for(var m in p)d[m]=p[m]}function f(p,d,m){return u(p,d,m)}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?o.exports=c:(h(c,a),a.Buffer=f),h(u,f),f.from=function(p,d,m){if(typeof p=="number")throw new TypeError("Argument must not be a number");return u(p,d,m)},f.alloc=function(p,d,m){if(typeof p!="number")throw new TypeError("Argument must be a number");var b=u(p);return d!==void 0?typeof m=="string"?b.fill(d,m):b.fill(d):b.fill(0),b},f.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return u(p)},f.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return c.SlowBuffer(p)}},99:(o,a,l)=>{(function(c){c.parser=function(U,R){return new f(U,R)},c.SAXParser=f,c.SAXStream=d,c.createStream=function(U,R){return new d(U,R)},c.MAX_BUFFER_LENGTH=65536;var u,h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function f(U,R){if(!(this instanceof f))return new f(U,R);var Q=this;(function(F){for(var ie=0,me=h.length;ie<me;ie++)F[h[ie]]=""})(Q),Q.q=Q.c="",Q.bufferCheckPosition=c.MAX_BUFFER_LENGTH,Q.opt=R||{},Q.opt.lowercase=Q.opt.lowercase||Q.opt.lowercasetags,Q.looseCase=Q.opt.lowercase?"toLowerCase":"toUpperCase",Q.tags=[],Q.closed=Q.closedRoot=Q.sawRoot=!1,Q.tag=Q.error=null,Q.strict=!!U,Q.noscript=!(!U&&!Q.opt.noscript),Q.state=L.BEGIN,Q.strictEntities=Q.opt.strictEntities,Q.ENTITIES=Q.strictEntities?Object.create(c.XML_ENTITIES):Object.create(c.ENTITIES),Q.attribList=[],Q.opt.xmlns&&(Q.ns=Object.create(A)),Q.trackPosition=Q.opt.position!==!1,Q.trackPosition&&(Q.position=Q.line=Q.column=0),X(Q,"onready")}c.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(U){function R(){}return R.prototype=U,new R}),Object.keys||(Object.keys=function(U){var R=[];for(var Q in U)U.hasOwnProperty(Q)&&R.push(Q);return R}),f.prototype={end:function(){ge(this)},write:function(U){var R=this;if(this.error)throw this.error;if(R.closed)return J(R,"Cannot write after close. Assign an onready handler.");if(U===null)return ge(R);typeof U=="object"&&(U=U.toString());for(var Q=0,F="";F=he(U,Q++),R.c=F,F;)switch(R.trackPosition&&(R.position++,F===`
`?(R.line++,R.column=0):R.column++),R.state){case L.BEGIN:if(R.state=L.BEGIN_WHITESPACE,F==="\uFEFF")continue;ae(R,F);continue;case L.BEGIN_WHITESPACE:ae(R,F);continue;case L.TEXT:if(R.sawRoot&&!R.closedRoot){for(var ie=Q-1;F&&F!=="<"&&F!=="&";)(F=he(U,Q++))&&R.trackPosition&&(R.position++,F===`
`?(R.line++,R.column=0):R.column++);R.textNode+=U.substring(ie,Q-1)}F!=="<"||R.sawRoot&&R.closedRoot&&!R.strict?(x(F)||R.sawRoot&&!R.closedRoot||k(R,"Text data outside of root node."),F==="&"?R.state=L.TEXT_ENTITY:R.textNode+=F):(R.state=L.OPEN_WAKA,R.startTagPosition=R.position);continue;case L.SCRIPT:F==="<"?R.state=L.SCRIPT_ENDING:R.script+=F;continue;case L.SCRIPT_ENDING:F==="/"?R.state=L.CLOSE_TAG:(R.script+="<"+F,R.state=L.SCRIPT);continue;case L.OPEN_WAKA:if(F==="!")R.state=L.SGML_DECL,R.sgmlDecl="";else if(!x(F))if(S(g,F))R.state=L.OPEN_TAG,R.tagName=F;else if(F==="/")R.state=L.CLOSE_TAG,R.tagName="";else if(F==="?")R.state=L.PROC_INST,R.procInstName=R.procInstBody="";else{if(k(R,"Unencoded <"),R.startTagPosition+1<R.position){var me=R.position-R.startTagPosition;F=new Array(me).join(" ")+F}R.textNode+="<"+F,R.state=L.TEXT}continue;case L.SGML_DECL:(R.sgmlDecl+F).toUpperCase()==="[CDATA["?(Z(R,"onopencdata"),R.state=L.CDATA,R.sgmlDecl="",R.cdata=""):R.sgmlDecl+F==="--"?(R.state=L.COMMENT,R.comment="",R.sgmlDecl=""):(R.sgmlDecl+F).toUpperCase()==="DOCTYPE"?(R.state=L.DOCTYPE,(R.doctype||R.sawRoot)&&k(R,"Inappropriately located doctype declaration"),R.doctype="",R.sgmlDecl=""):F===">"?(Z(R,"onsgmldeclaration",R.sgmlDecl),R.sgmlDecl="",R.state=L.TEXT):(T(F)&&(R.state=L.SGML_DECL_QUOTED),R.sgmlDecl+=F);continue;case L.SGML_DECL_QUOTED:F===R.q&&(R.state=L.SGML_DECL,R.q=""),R.sgmlDecl+=F;continue;case L.DOCTYPE:F===">"?(R.state=L.TEXT,Z(R,"ondoctype",R.doctype),R.doctype=!0):(R.doctype+=F,F==="["?R.state=L.DOCTYPE_DTD:T(F)&&(R.state=L.DOCTYPE_QUOTED,R.q=F));continue;case L.DOCTYPE_QUOTED:R.doctype+=F,F===R.q&&(R.q="",R.state=L.DOCTYPE);continue;case L.DOCTYPE_DTD:R.doctype+=F,F==="]"?R.state=L.DOCTYPE:T(F)&&(R.state=L.DOCTYPE_DTD_QUOTED,R.q=F);continue;case L.DOCTYPE_DTD_QUOTED:R.doctype+=F,F===R.q&&(R.state=L.DOCTYPE_DTD,R.q="");continue;case L.COMMENT:F==="-"?R.state=L.COMMENT_ENDING:R.comment+=F;continue;case L.COMMENT_ENDING:F==="-"?(R.state=L.COMMENT_ENDED,R.comment=ee(R.opt,R.comment),R.comment&&Z(R,"oncomment",R.comment),R.comment=""):(R.comment+="-"+F,R.state=L.COMMENT);continue;case L.COMMENT_ENDED:F!==">"?(k(R,"Malformed comment"),R.comment+="--"+F,R.state=L.COMMENT):R.state=L.TEXT;continue;case L.CDATA:F==="]"?R.state=L.CDATA_ENDING:R.cdata+=F;continue;case L.CDATA_ENDING:F==="]"?R.state=L.CDATA_ENDING_2:(R.cdata+="]"+F,R.state=L.CDATA);continue;case L.CDATA_ENDING_2:F===">"?(R.cdata&&Z(R,"oncdata",R.cdata),Z(R,"onclosecdata"),R.cdata="",R.state=L.TEXT):F==="]"?R.cdata+="]":(R.cdata+="]]"+F,R.state=L.CDATA);continue;case L.PROC_INST:F==="?"?R.state=L.PROC_INST_ENDING:x(F)?R.state=L.PROC_INST_BODY:R.procInstName+=F;continue;case L.PROC_INST_BODY:if(!R.procInstBody&&x(F))continue;F==="?"?R.state=L.PROC_INST_ENDING:R.procInstBody+=F;continue;case L.PROC_INST_ENDING:F===">"?(Z(R,"onprocessinginstruction",{name:R.procInstName,body:R.procInstBody}),R.procInstName=R.procInstBody="",R.state=L.TEXT):(R.procInstBody+="?"+F,R.state=L.PROC_INST_BODY);continue;case L.OPEN_TAG:S(v,F)?R.tagName+=F:(j(R),F===">"?q(R):F==="/"?R.state=L.OPEN_TAG_SLASH:(x(F)||k(R,"Invalid character in tag name"),R.state=L.ATTRIB));continue;case L.OPEN_TAG_SLASH:F===">"?(q(R,!0),le(R)):(k(R,"Forward-slash in opening tag not followed by >"),R.state=L.ATTRIB);continue;case L.ATTRIB:if(x(F))continue;F===">"?q(R):F==="/"?R.state=L.OPEN_TAG_SLASH:S(g,F)?(R.attribName=F,R.attribValue="",R.state=L.ATTRIB_NAME):k(R,"Invalid attribute name");continue;case L.ATTRIB_NAME:F==="="?R.state=L.ATTRIB_VALUE:F===">"?(k(R,"Attribute without value"),R.attribValue=R.attribName,H(R),q(R)):x(F)?R.state=L.ATTRIB_NAME_SAW_WHITE:S(v,F)?R.attribName+=F:k(R,"Invalid attribute name");continue;case L.ATTRIB_NAME_SAW_WHITE:if(F==="=")R.state=L.ATTRIB_VALUE;else{if(x(F))continue;k(R,"Attribute without value"),R.tag.attributes[R.attribName]="",R.attribValue="",Z(R,"onattribute",{name:R.attribName,value:""}),R.attribName="",F===">"?q(R):S(g,F)?(R.attribName=F,R.state=L.ATTRIB_NAME):(k(R,"Invalid attribute name"),R.state=L.ATTRIB)}continue;case L.ATTRIB_VALUE:if(x(F))continue;T(F)?(R.q=F,R.state=L.ATTRIB_VALUE_QUOTED):(k(R,"Unquoted attribute value"),R.state=L.ATTRIB_VALUE_UNQUOTED,R.attribValue=F);continue;case L.ATTRIB_VALUE_QUOTED:if(F!==R.q){F==="&"?R.state=L.ATTRIB_VALUE_ENTITY_Q:R.attribValue+=F;continue}H(R),R.q="",R.state=L.ATTRIB_VALUE_CLOSED;continue;case L.ATTRIB_VALUE_CLOSED:x(F)?R.state=L.ATTRIB:F===">"?q(R):F==="/"?R.state=L.OPEN_TAG_SLASH:S(g,F)?(k(R,"No whitespace between attributes"),R.attribName=F,R.attribValue="",R.state=L.ATTRIB_NAME):k(R,"Invalid attribute name");continue;case L.ATTRIB_VALUE_UNQUOTED:if(!E(F)){F==="&"?R.state=L.ATTRIB_VALUE_ENTITY_U:R.attribValue+=F;continue}H(R),F===">"?q(R):R.state=L.ATTRIB;continue;case L.CLOSE_TAG:if(R.tagName)F===">"?le(R):S(v,F)?R.tagName+=F:R.script?(R.script+="</"+R.tagName,R.tagName="",R.state=L.SCRIPT):(x(F)||k(R,"Invalid tagname in closing tag"),R.state=L.CLOSE_TAG_SAW_WHITE);else{if(x(F))continue;C(g,F)?R.script?(R.script+="</"+F,R.state=L.SCRIPT):k(R,"Invalid tagname in closing tag."):R.tagName=F}continue;case L.CLOSE_TAG_SAW_WHITE:if(x(F))continue;F===">"?le(R):k(R,"Invalid characters in closing tag");continue;case L.TEXT_ENTITY:case L.ATTRIB_VALUE_ENTITY_Q:case L.ATTRIB_VALUE_ENTITY_U:var oe,ue;switch(R.state){case L.TEXT_ENTITY:oe=L.TEXT,ue="textNode";break;case L.ATTRIB_VALUE_ENTITY_Q:oe=L.ATTRIB_VALUE_QUOTED,ue="attribValue";break;case L.ATTRIB_VALUE_ENTITY_U:oe=L.ATTRIB_VALUE_UNQUOTED,ue="attribValue"}F===";"?(R[ue]+=be(R),R.entity="",R.state=oe):S(R.entity.length?_:O,F)?R.entity+=F:(k(R,"Invalid character in entity name"),R[ue]+="&"+R.entity+F,R.entity="",R.state=oe);continue;default:throw new Error(R,"Unknown state: "+R.state)}return R.position>=R.bufferCheckPosition&&function(de){for(var pe=Math.max(c.MAX_BUFFER_LENGTH,10),xe=0,Fe=0,st=h.length;Fe<st;Fe++){var I=de[h[Fe]].length;if(I>pe)switch(h[Fe]){case"textNode":K(de);break;case"cdata":Z(de,"oncdata",de.cdata),de.cdata="";break;case"script":Z(de,"onscript",de.script),de.script="";break;default:J(de,"Max buffer length exceeded: "+h[Fe])}xe=Math.max(xe,I)}var N=c.MAX_BUFFER_LENGTH-xe;de.bufferCheckPosition=N+de.position}(R),R},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var U;K(U=this),U.cdata!==""&&(Z(U,"oncdata",U.cdata),U.cdata=""),U.script!==""&&(Z(U,"onscript",U.script),U.script="")}};try{u=l(830).Stream}catch{u=function(){}}var p=c.EVENTS.filter(function(U){return U!=="error"&&U!=="end"});function d(U,R){if(!(this instanceof d))return new d(U,R);u.apply(this),this._parser=new f(U,R),this.writable=!0,this.readable=!0;var Q=this;this._parser.onend=function(){Q.emit("end")},this._parser.onerror=function(F){Q.emit("error",F),Q._parser.error=null},this._decoder=null,p.forEach(function(F){Object.defineProperty(Q,"on"+F,{get:function(){return Q._parser["on"+F]},set:function(ie){if(!ie)return Q.removeAllListeners(F),Q._parser["on"+F]=ie,ie;Q.on(F,ie)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(u.prototype,{constructor:{value:d}}),d.prototype.write=function(U){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(U)){if(!this._decoder){var R=l(553).s;this._decoder=new R("utf8")}U=this._decoder.write(U)}return this._parser.write(U.toString()),this.emit("data",U),!0},d.prototype.end=function(U){return U&&U.length&&this.write(U),this._parser.end(),!0},d.prototype.on=function(U,R){var Q=this;return Q._parser["on"+U]||p.indexOf(U)===-1||(Q._parser["on"+U]=function(){var F=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);F.splice(0,0,U),Q.emit.apply(Q,F)}),u.prototype.on.call(Q,U,R)};var m="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",A={xml:m,xmlns:b},g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function x(U){return U===" "||U===`
`||U==="\r"||U==="	"}function T(U){return U==='"'||U==="'"}function E(U){return U===">"||x(U)}function S(U,R){return U.test(R)}function C(U,R){return!S(U,R)}var B,M,D,L=0;for(var P in c.STATE={BEGIN:L++,BEGIN_WHITESPACE:L++,TEXT:L++,TEXT_ENTITY:L++,OPEN_WAKA:L++,SGML_DECL:L++,SGML_DECL_QUOTED:L++,DOCTYPE:L++,DOCTYPE_QUOTED:L++,DOCTYPE_DTD:L++,DOCTYPE_DTD_QUOTED:L++,COMMENT_STARTING:L++,COMMENT:L++,COMMENT_ENDING:L++,COMMENT_ENDED:L++,CDATA:L++,CDATA_ENDING:L++,CDATA_ENDING_2:L++,PROC_INST:L++,PROC_INST_BODY:L++,PROC_INST_ENDING:L++,OPEN_TAG:L++,OPEN_TAG_SLASH:L++,ATTRIB:L++,ATTRIB_NAME:L++,ATTRIB_NAME_SAW_WHITE:L++,ATTRIB_VALUE:L++,ATTRIB_VALUE_QUOTED:L++,ATTRIB_VALUE_CLOSED:L++,ATTRIB_VALUE_UNQUOTED:L++,ATTRIB_VALUE_ENTITY_Q:L++,ATTRIB_VALUE_ENTITY_U:L++,CLOSE_TAG:L++,CLOSE_TAG_SAW_WHITE:L++,SCRIPT:L++,SCRIPT_ENDING:L++},c.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},c.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(c.ENTITIES).forEach(function(U){var R=c.ENTITIES[U],Q=typeof R=="number"?String.fromCharCode(R):R;c.ENTITIES[U]=Q}),c.STATE)c.STATE[c.STATE[P]]=P;function X(U,R,Q){U[R]&&U[R](Q)}function Z(U,R,Q){U.textNode&&K(U),X(U,R,Q)}function K(U){U.textNode=ee(U.opt,U.textNode),U.textNode&&X(U,"ontext",U.textNode),U.textNode=""}function ee(U,R){return U.trim&&(R=R.trim()),U.normalize&&(R=R.replace(/\s+/g," ")),R}function J(U,R){return K(U),U.trackPosition&&(R+=`
Line: `+U.line+`
Column: `+U.column+`
Char: `+U.c),R=new Error(R),U.error=R,X(U,"onerror",R),U}function ge(U){return U.sawRoot&&!U.closedRoot&&k(U,"Unclosed root tag"),U.state!==L.BEGIN&&U.state!==L.BEGIN_WHITESPACE&&U.state!==L.TEXT&&J(U,"Unexpected end"),K(U),U.c="",U.closed=!0,X(U,"onend"),f.call(U,U.strict,U.opt),U}function k(U,R){if(typeof U!="object"||!(U instanceof f))throw new Error("bad call to strictFail");U.strict&&J(U,R)}function j(U){U.strict||(U.tagName=U.tagName[U.looseCase]());var R=U.tags[U.tags.length-1]||U,Q=U.tag={name:U.tagName,attributes:{}};U.opt.xmlns&&(Q.ns=R.ns),U.attribList.length=0,Z(U,"onopentagstart",Q)}function V(U,R){var Q=U.indexOf(":")<0?["",U]:U.split(":"),F=Q[0],ie=Q[1];return R&&U==="xmlns"&&(F="xmlns",ie=""),{prefix:F,local:ie}}function H(U){if(U.strict||(U.attribName=U.attribName[U.looseCase]()),U.attribList.indexOf(U.attribName)!==-1||U.tag.attributes.hasOwnProperty(U.attribName))U.attribName=U.attribValue="";else{if(U.opt.xmlns){var R=V(U.attribName,!0),Q=R.prefix,F=R.local;if(Q==="xmlns")if(F==="xml"&&U.attribValue!==m)k(U,"xml: prefix must be bound to "+m+`
Actual: `+U.attribValue);else if(F==="xmlns"&&U.attribValue!==b)k(U,"xmlns: prefix must be bound to "+b+`
Actual: `+U.attribValue);else{var ie=U.tag,me=U.tags[U.tags.length-1]||U;ie.ns===me.ns&&(ie.ns=Object.create(me.ns)),ie.ns[F]=U.attribValue}U.attribList.push([U.attribName,U.attribValue])}else U.tag.attributes[U.attribName]=U.attribValue,Z(U,"onattribute",{name:U.attribName,value:U.attribValue});U.attribName=U.attribValue=""}}function q(U,R){if(U.opt.xmlns){var Q=U.tag,F=V(U.tagName);Q.prefix=F.prefix,Q.local=F.local,Q.uri=Q.ns[F.prefix]||"",Q.prefix&&!Q.uri&&(k(U,"Unbound namespace prefix: "+JSON.stringify(U.tagName)),Q.uri=F.prefix);var ie=U.tags[U.tags.length-1]||U;Q.ns&&ie.ns!==Q.ns&&Object.keys(Q.ns).forEach(function(z){Z(U,"onopennamespace",{prefix:z,uri:Q.ns[z]})});for(var me=0,oe=U.attribList.length;me<oe;me++){var ue=U.attribList[me],de=ue[0],pe=ue[1],xe=V(de,!0),Fe=xe.prefix,st=xe.local,I=Fe===""?"":Q.ns[Fe]||"",N={name:de,value:pe,prefix:Fe,local:st,uri:I};Fe&&Fe!=="xmlns"&&!I&&(k(U,"Unbound namespace prefix: "+JSON.stringify(Fe)),N.uri=Fe),U.tag.attributes[de]=N,Z(U,"onattribute",N)}U.attribList.length=0}U.tag.isSelfClosing=!!R,U.sawRoot=!0,U.tags.push(U.tag),Z(U,"onopentag",U.tag),R||(U.noscript||U.tagName.toLowerCase()!=="script"?U.state=L.TEXT:U.state=L.SCRIPT,U.tag=null,U.tagName=""),U.attribName=U.attribValue="",U.attribList.length=0}function le(U){if(!U.tagName)return k(U,"Weird empty close tag."),U.textNode+="</>",void(U.state=L.TEXT);if(U.script){if(U.tagName!=="script")return U.script+="</"+U.tagName+">",U.tagName="",void(U.state=L.SCRIPT);Z(U,"onscript",U.script),U.script=""}var R=U.tags.length,Q=U.tagName;U.strict||(Q=Q[U.looseCase]());for(var F=Q;R--&&U.tags[R].name!==F;)k(U,"Unexpected close tag");if(R<0)return k(U,"Unmatched closing tag: "+U.tagName),U.textNode+="</"+U.tagName+">",void(U.state=L.TEXT);U.tagName=Q;for(var ie=U.tags.length;ie-- >R;){var me=U.tag=U.tags.pop();U.tagName=U.tag.name,Z(U,"onclosetag",U.tagName);var oe={};for(var ue in me.ns)oe[ue]=me.ns[ue];var de=U.tags[U.tags.length-1]||U;U.opt.xmlns&&me.ns!==de.ns&&Object.keys(me.ns).forEach(function(pe){var xe=me.ns[pe];Z(U,"onclosenamespace",{prefix:pe,uri:xe})})}R===0&&(U.closedRoot=!0),U.tagName=U.attribValue=U.attribName="",U.attribList.length=0,U.state=L.TEXT}function be(U){var R,Q=U.entity,F=Q.toLowerCase(),ie="";return U.ENTITIES[Q]?U.ENTITIES[Q]:U.ENTITIES[F]?U.ENTITIES[F]:((Q=F).charAt(0)==="#"&&(Q.charAt(1)==="x"?(Q=Q.slice(2),ie=(R=parseInt(Q,16)).toString(16)):(Q=Q.slice(1),ie=(R=parseInt(Q,10)).toString(10))),Q=Q.replace(/^0+/,""),isNaN(R)||ie.toLowerCase()!==Q?(k(U,"Invalid character entity"),"&"+U.entity+";"):String.fromCodePoint(R))}function ae(U,R){R==="<"?(U.state=L.OPEN_WAKA,U.startTagPosition=U.position):x(R)||(k(U,"Non-whitespace before first tag."),U.textNode=R,U.state=L.TEXT)}function he(U,R){var Q="";return R<U.length&&(Q=U.charAt(R)),Q}L=c.STATE,String.fromCodePoint||(B=String.fromCharCode,M=Math.floor,D=function(){var U,R,Q=16384,F=[],ie=-1,me=arguments.length;if(!me)return"";for(var oe="";++ie<me;){var ue=Number(arguments[ie]);if(!isFinite(ue)||ue<0||ue>1114111||M(ue)!==ue)throw RangeError("Invalid code point: "+ue);ue<=65535?F.push(ue):(U=55296+((ue-=65536)>>10),R=ue%1024+56320,F.push(U,R)),(ie+1===me||F.length>Q)&&(oe+=B.apply(null,F),F.length=0)}return oe},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:D,configurable:!0,writable:!0}):String.fromCodePoint=D)})(a)},830:(o,a,l)=>{o.exports=u;var c=l(187).EventEmitter;function u(){c.call(this)}l(717)(u,c),u.Readable=l(577),u.Writable=l(323),u.Duplex=l(656),u.Transform=l(473),u.PassThrough=l(366),u.finished=l(86),u.pipeline=l(472),u.Stream=u,u.prototype.pipe=function(h,f){var p=this;function d(_){h.writable&&h.write(_)===!1&&p.pause&&p.pause()}function m(){p.readable&&p.resume&&p.resume()}p.on("data",d),h.on("drain",m),h._isStdio||f&&f.end===!1||(p.on("end",A),p.on("close",g));var b=!1;function A(){b||(b=!0,h.end())}function g(){b||(b=!0,typeof h.destroy=="function"&&h.destroy())}function v(_){if(O(),c.listenerCount(this,"error")===0)throw _}function O(){p.removeListener("data",d),h.removeListener("drain",m),p.removeListener("end",A),p.removeListener("close",g),p.removeListener("error",v),h.removeListener("error",v),p.removeListener("end",O),p.removeListener("close",O),h.removeListener("close",O)}return p.on("error",v),h.on("error",v),p.on("end",O),p.on("close",O),h.on("close",O),h.emit("pipe",p),h}},106:o=>{var a={};function l(u,h,f){f||(f=Error);var p=function(d){var m,b;function A(g,v,O){return d.call(this,function(_,x,T){return typeof h=="string"?h:h(_,x,T)}(g,v,O))||this}return b=d,(m=A).prototype=Object.create(b.prototype),m.prototype.constructor=m,m.__proto__=b,A}(f);p.prototype.name=f.name,p.prototype.code=u,a[u]=p}function c(u,h){if(Array.isArray(u)){var f=u.length;return u=u.map(function(p){return String(p)}),f>2?"one of ".concat(h," ").concat(u.slice(0,f-1).join(", "),", or ")+u[f-1]:f===2?"one of ".concat(h," ").concat(u[0]," or ").concat(u[1]):"of ".concat(h," ").concat(u[0])}return"of ".concat(h," ").concat(String(u))}l("ERR_INVALID_OPT_VALUE",function(u,h){return'The value "'+h+'" is invalid for option "'+u+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(u,h,f){var p,d,m,b,A;if(typeof h=="string"&&(d="not ",h.substr(0,d.length)===d)?(p="must not be",h=h.replace(/^not /,"")):p="must be",function(v,O,_){return(_===void 0||_>v.length)&&(_=v.length),v.substring(_-O.length,_)===O}(u," argument"))m="The ".concat(u," ").concat(p," ").concat(c(h,"type"));else{var g=(typeof A!="number"&&(A=0),A+1>(b=u).length||b.indexOf(".",A)===-1?"argument":"property");m='The "'.concat(u,'" ').concat(g," ").concat(p," ").concat(c(h,"type"))}return m+". Received type ".concat(typeof f)},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(u){return"The "+u+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(u){return"Cannot call "+u+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(u){return"Unknown encoding: "+u},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),o.exports.q=a},656:(o,a,l)=>{var c=l(155),u=Object.keys||function(v){var O=[];for(var _ in v)O.push(_);return O};o.exports=b;var h=l(577),f=l(323);l(717)(b,h);for(var p=u(f.prototype),d=0;d<p.length;d++){var m=p[d];b.prototype[m]||(b.prototype[m]=f.prototype[m])}function b(v){if(!(this instanceof b))return new b(v);h.call(this,v),f.call(this,v),this.allowHalfOpen=!0,v&&(v.readable===!1&&(this.readable=!1),v.writable===!1&&(this.writable=!1),v.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",A)))}function A(){this._writableState.ended||c.nextTick(g,this)}function g(v){v.end()}Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}})},366:(o,a,l)=>{o.exports=u;var c=l(473);function u(h){if(!(this instanceof u))return new u(h);c.call(this,h)}l(717)(u,c),u.prototype._transform=function(h,f,p){p(null,h)}},577:(o,a,l)=>{var c,u=l(155);o.exports=P,P.ReadableState=L,l(187).EventEmitter;var h,f=function(R,Q){return R.listeners(Q).length},p=l(194),d=l(764).Buffer,m=l.g.Uint8Array||function(){},b=l(964);h=b&&b.debuglog?b.debuglog("stream"):function(){};var A,g,v,O=l(686),_=l(29),x=l(94).getHighWaterMark,T=l(106).q,E=T.ERR_INVALID_ARG_TYPE,S=T.ERR_STREAM_PUSH_AFTER_EOF,C=T.ERR_METHOD_NOT_IMPLEMENTED,B=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;l(717)(P,p);var M=_.errorOrDestroy,D=["error","close","destroy","pause","resume"];function L(R,Q,F){c=c||l(656),R=R||{},typeof F!="boolean"&&(F=Q instanceof c),this.objectMode=!!R.objectMode,F&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=x(this,R,"readableHighWaterMark",F),this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(A||(A=l(553).s),this.decoder=new A(R.encoding),this.encoding=R.encoding)}function P(R){if(c=c||l(656),!(this instanceof P))return new P(R);var Q=this instanceof c;this._readableState=new L(R,this,Q),this.readable=!0,R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy)),p.call(this)}function X(R,Q,F,ie,me){h("readableAddChunk",Q);var oe,ue=R._readableState;if(Q===null)ue.reading=!1,function(de,pe){if(h("onEofChunk"),!pe.ended){if(pe.decoder){var xe=pe.decoder.end();xe&&xe.length&&(pe.buffer.push(xe),pe.length+=pe.objectMode?1:xe.length)}pe.ended=!0,pe.sync?J(de):(pe.needReadable=!1,pe.emittedReadable||(pe.emittedReadable=!0,ge(de)))}}(R,ue);else if(me||(oe=function(de,pe){var xe,Fe;return Fe=pe,d.isBuffer(Fe)||Fe instanceof m||typeof pe=="string"||pe===void 0||de.objectMode||(xe=new E("chunk",["string","Buffer","Uint8Array"],pe)),xe}(ue,Q)),oe)M(R,oe);else if(ue.objectMode||Q&&Q.length>0)if(typeof Q=="string"||ue.objectMode||Object.getPrototypeOf(Q)===d.prototype||(Q=function(de){return d.from(de)}(Q)),ie)ue.endEmitted?M(R,new B):Z(R,ue,Q,!0);else if(ue.ended)M(R,new S);else{if(ue.destroyed)return!1;ue.reading=!1,ue.decoder&&!F?(Q=ue.decoder.write(Q),ue.objectMode||Q.length!==0?Z(R,ue,Q,!1):k(R,ue)):Z(R,ue,Q,!1)}else ie||(ue.reading=!1,k(R,ue));return!ue.ended&&(ue.length<ue.highWaterMark||ue.length===0)}function Z(R,Q,F,ie){Q.flowing&&Q.length===0&&!Q.sync?(Q.awaitDrain=0,R.emit("data",F)):(Q.length+=Q.objectMode?1:F.length,ie?Q.buffer.unshift(F):Q.buffer.push(F),Q.needReadable&&J(R)),k(R,Q)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),P.prototype.destroy=_.destroy,P.prototype._undestroy=_.undestroy,P.prototype._destroy=function(R,Q){Q(R)},P.prototype.push=function(R,Q){var F,ie=this._readableState;return ie.objectMode?F=!0:typeof R=="string"&&((Q=Q||ie.defaultEncoding)!==ie.encoding&&(R=d.from(R,Q),Q=""),F=!0),X(this,R,Q,!1,F)},P.prototype.unshift=function(R){return X(this,R,null,!0,!1)},P.prototype.isPaused=function(){return this._readableState.flowing===!1},P.prototype.setEncoding=function(R){A||(A=l(553).s);var Q=new A(R);this._readableState.decoder=Q,this._readableState.encoding=this._readableState.decoder.encoding;for(var F=this._readableState.buffer.head,ie="";F!==null;)ie+=Q.write(F.data),F=F.next;return this._readableState.buffer.clear(),ie!==""&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this};var K=1073741824;function ee(R,Q){return R<=0||Q.length===0&&Q.ended?0:Q.objectMode?1:R!=R?Q.flowing&&Q.length?Q.buffer.head.data.length:Q.length:(R>Q.highWaterMark&&(Q.highWaterMark=function(F){return F>=K?F=K:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}(R)),R<=Q.length?R:Q.ended?Q.length:(Q.needReadable=!0,0))}function J(R){var Q=R._readableState;h("emitReadable",Q.needReadable,Q.emittedReadable),Q.needReadable=!1,Q.emittedReadable||(h("emitReadable",Q.flowing),Q.emittedReadable=!0,u.nextTick(ge,R))}function ge(R){var Q=R._readableState;h("emitReadable_",Q.destroyed,Q.length,Q.ended),Q.destroyed||!Q.length&&!Q.ended||(R.emit("readable"),Q.emittedReadable=!1),Q.needReadable=!Q.flowing&&!Q.ended&&Q.length<=Q.highWaterMark,le(R)}function k(R,Q){Q.readingMore||(Q.readingMore=!0,u.nextTick(j,R,Q))}function j(R,Q){for(;!Q.reading&&!Q.ended&&(Q.length<Q.highWaterMark||Q.flowing&&Q.length===0);){var F=Q.length;if(h("maybeReadMore read 0"),R.read(0),F===Q.length)break}Q.readingMore=!1}function V(R){var Q=R._readableState;Q.readableListening=R.listenerCount("readable")>0,Q.resumeScheduled&&!Q.paused?Q.flowing=!0:R.listenerCount("data")>0&&R.resume()}function H(R){h("readable nexttick read 0"),R.read(0)}function q(R,Q){h("resume",Q.reading),Q.reading||R.read(0),Q.resumeScheduled=!1,R.emit("resume"),le(R),Q.flowing&&!Q.reading&&R.read(0)}function le(R){var Q=R._readableState;for(h("flow",Q.flowing);Q.flowing&&R.read()!==null;);}function be(R,Q){return Q.length===0?null:(Q.objectMode?F=Q.buffer.shift():!R||R>=Q.length?(F=Q.decoder?Q.buffer.join(""):Q.buffer.length===1?Q.buffer.first():Q.buffer.concat(Q.length),Q.buffer.clear()):F=Q.buffer.consume(R,Q.decoder),F);var F}function ae(R){var Q=R._readableState;h("endReadable",Q.endEmitted),Q.endEmitted||(Q.ended=!0,u.nextTick(he,Q,R))}function he(R,Q){if(h("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&R.length===0&&(R.endEmitted=!0,Q.readable=!1,Q.emit("end"),R.autoDestroy)){var F=Q._writableState;(!F||F.autoDestroy&&F.finished)&&Q.destroy()}}function U(R,Q){for(var F=0,ie=R.length;F<ie;F++)if(R[F]===Q)return F;return-1}P.prototype.read=function(R){h("read",R),R=parseInt(R,10);var Q=this._readableState,F=R;if(R!==0&&(Q.emittedReadable=!1),R===0&&Q.needReadable&&((Q.highWaterMark!==0?Q.length>=Q.highWaterMark:Q.length>0)||Q.ended))return h("read: emitReadable",Q.length,Q.ended),Q.length===0&&Q.ended?ae(this):J(this),null;if((R=ee(R,Q))===0&&Q.ended)return Q.length===0&&ae(this),null;var ie,me=Q.needReadable;return h("need readable",me),(Q.length===0||Q.length-R<Q.highWaterMark)&&h("length less than watermark",me=!0),Q.ended||Q.reading?h("reading or ended",me=!1):me&&(h("do read"),Q.reading=!0,Q.sync=!0,Q.length===0&&(Q.needReadable=!0),this._read(Q.highWaterMark),Q.sync=!1,Q.reading||(R=ee(F,Q))),(ie=R>0?be(R,Q):null)===null?(Q.needReadable=Q.length<=Q.highWaterMark,R=0):(Q.length-=R,Q.awaitDrain=0),Q.length===0&&(Q.ended||(Q.needReadable=!0),F!==R&&Q.ended&&ae(this)),ie!==null&&this.emit("data",ie),ie},P.prototype._read=function(R){M(this,new C("_read()"))},P.prototype.pipe=function(R,Q){var F=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=R;break;case 1:ie.pipes=[ie.pipes,R];break;default:ie.pipes.push(R)}ie.pipesCount+=1,h("pipe count=%d opts=%j",ie.pipesCount,Q);var me=Q&&Q.end===!1||R===u.stdout||R===u.stderr?I:oe;function oe(){h("onend"),R.end()}ie.endEmitted?u.nextTick(me):F.once("end",me),R.on("unpipe",function N(z,te){h("onunpipe"),z===F&&te&&te.hasUnpiped===!1&&(te.hasUnpiped=!0,h("cleanup"),R.removeListener("close",Fe),R.removeListener("finish",st),R.removeListener("drain",ue),R.removeListener("error",xe),R.removeListener("unpipe",N),F.removeListener("end",oe),F.removeListener("end",I),F.removeListener("data",pe),de=!0,!ie.awaitDrain||R._writableState&&!R._writableState.needDrain||ue())});var ue=function(N){return function(){var z=N._readableState;h("pipeOnDrain",z.awaitDrain),z.awaitDrain&&z.awaitDrain--,z.awaitDrain===0&&f(N,"data")&&(z.flowing=!0,le(N))}}(F);R.on("drain",ue);var de=!1;function pe(N){h("ondata");var z=R.write(N);h("dest.write",z),z===!1&&((ie.pipesCount===1&&ie.pipes===R||ie.pipesCount>1&&U(ie.pipes,R)!==-1)&&!de&&(h("false write response, pause",ie.awaitDrain),ie.awaitDrain++),F.pause())}function xe(N){h("onerror",N),I(),R.removeListener("error",xe),f(R,"error")===0&&M(R,N)}function Fe(){R.removeListener("finish",st),I()}function st(){h("onfinish"),R.removeListener("close",Fe),I()}function I(){h("unpipe"),F.unpipe(R)}return F.on("data",pe),function(N,z,te){if(typeof N.prependListener=="function")return N.prependListener(z,te);N._events&&N._events.error?Array.isArray(N._events.error)?N._events.error.unshift(te):N._events.error=[te,N._events.error]:N.on(z,te)}(R,"error",xe),R.once("close",Fe),R.once("finish",st),R.emit("pipe",F),ie.flowing||(h("pipe resume"),F.resume()),R},P.prototype.unpipe=function(R){var Q=this._readableState,F={hasUnpiped:!1};if(Q.pipesCount===0)return this;if(Q.pipesCount===1)return R&&R!==Q.pipes||(R||(R=Q.pipes),Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,R&&R.emit("unpipe",this,F)),this;if(!R){var ie=Q.pipes,me=Q.pipesCount;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var oe=0;oe<me;oe++)ie[oe].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=U(Q.pipes,R);return ue===-1||(Q.pipes.splice(ue,1),Q.pipesCount-=1,Q.pipesCount===1&&(Q.pipes=Q.pipes[0]),R.emit("unpipe",this,F)),this},P.prototype.on=function(R,Q){var F=p.prototype.on.call(this,R,Q),ie=this._readableState;return R==="data"?(ie.readableListening=this.listenerCount("readable")>0,ie.flowing!==!1&&this.resume()):R==="readable"&&(ie.endEmitted||ie.readableListening||(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,h("on readable",ie.length,ie.reading),ie.length?J(this):ie.reading||u.nextTick(H,this))),F},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(R,Q){var F=p.prototype.removeListener.call(this,R,Q);return R==="readable"&&u.nextTick(V,this),F},P.prototype.removeAllListeners=function(R){var Q=p.prototype.removeAllListeners.apply(this,arguments);return R!=="readable"&&R!==void 0||u.nextTick(V,this),Q},P.prototype.resume=function(){var R=this._readableState;return R.flowing||(h("resume"),R.flowing=!R.readableListening,function(Q,F){F.resumeScheduled||(F.resumeScheduled=!0,u.nextTick(q,Q,F))}(this,R)),R.paused=!1,this},P.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(R){var Q=this,F=this._readableState,ie=!1;for(var me in R.on("end",function(){if(h("wrapped end"),F.decoder&&!F.ended){var ue=F.decoder.end();ue&&ue.length&&Q.push(ue)}Q.push(null)}),R.on("data",function(ue){h("wrapped data"),F.decoder&&(ue=F.decoder.write(ue)),F.objectMode&&ue==null||(F.objectMode||ue&&ue.length)&&(Q.push(ue)||(ie=!0,R.pause()))}),R)this[me]===void 0&&typeof R[me]=="function"&&(this[me]=function(ue){return function(){return R[ue].apply(R,arguments)}}(me));for(var oe=0;oe<D.length;oe++)R.on(D[oe],this.emit.bind(this,D[oe]));return this._read=function(ue){h("wrapped _read",ue),ie&&(ie=!1,R.resume())},this},typeof Symbol=="function"&&(P.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=l(828)),g(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),P._fromList=be,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(P.from=function(R,Q){return v===void 0&&(v=l(265)),v(P,R,Q)})},473:(o,a,l)=>{o.exports=b;var c=l(106).q,u=c.ERR_METHOD_NOT_IMPLEMENTED,h=c.ERR_MULTIPLE_CALLBACK,f=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,p=c.ERR_TRANSFORM_WITH_LENGTH_0,d=l(656);function m(v,O){var _=this._transformState;_.transforming=!1;var x=_.writecb;if(x===null)return this.emit("error",new h);_.writechunk=null,_.writecb=null,O!=null&&this.push(O),x(v);var T=this._readableState;T.reading=!1,(T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}function b(v){if(!(this instanceof b))return new b(v);d.call(this,v),this._transformState={afterTransform:m.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),this.on("prefinish",A)}function A(){var v=this;typeof this._flush!="function"||this._readableState.destroyed?g(this,null,null):this._flush(function(O,_){g(v,O,_)})}function g(v,O,_){if(O)return v.emit("error",O);if(_!=null&&v.push(_),v._writableState.length)throw new p;if(v._transformState.transforming)throw new f;return v.push(null)}l(717)(b,d),b.prototype.push=function(v,O){return this._transformState.needTransform=!1,d.prototype.push.call(this,v,O)},b.prototype._transform=function(v,O,_){_(new u("_transform()"))},b.prototype._write=function(v,O,_){var x=this._transformState;if(x.writecb=_,x.writechunk=v,x.writeencoding=O,!x.transforming){var T=this._readableState;(x.needTransform||T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}},b.prototype._read=function(v){var O=this._transformState;O.writechunk===null||O.transforming?O.needTransform=!0:(O.transforming=!0,this._transform(O.writechunk,O.writeencoding,O.afterTransform))},b.prototype._destroy=function(v,O){d.prototype._destroy.call(this,v,function(_){O(_)})}},323:(o,a,l)=>{var c,u=l(155);function h(k){var j=this;this.next=null,this.entry=null,this.finish=function(){(function(V,H,q){var le=V.entry;for(V.entry=null;le;){var be=le.callback;H.pendingcb--,be(void 0),le=le.next}H.corkedRequestsFree.next=V})(j,k)}}o.exports=P,P.WritableState=L;var f,p={deprecate:l(927)},d=l(194),m=l(764).Buffer,b=l.g.Uint8Array||function(){},A=l(29),g=l(94).getHighWaterMark,v=l(106).q,O=v.ERR_INVALID_ARG_TYPE,_=v.ERR_METHOD_NOT_IMPLEMENTED,x=v.ERR_MULTIPLE_CALLBACK,T=v.ERR_STREAM_CANNOT_PIPE,E=v.ERR_STREAM_DESTROYED,S=v.ERR_STREAM_NULL_VALUES,C=v.ERR_STREAM_WRITE_AFTER_END,B=v.ERR_UNKNOWN_ENCODING,M=A.errorOrDestroy;function D(){}function L(k,j,V){c=c||l(656),k=k||{},typeof V!="boolean"&&(V=j instanceof c),this.objectMode=!!k.objectMode,V&&(this.objectMode=this.objectMode||!!k.writableObjectMode),this.highWaterMark=g(this,k,"writableHighWaterMark",V),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=k.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=k.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(q){(function(le,be){var ae=le._writableState,he=ae.sync,U=ae.writecb;if(typeof U!="function")throw new x;if(function(Q){Q.writing=!1,Q.writecb=null,Q.length-=Q.writelen,Q.writelen=0}(ae),be)(function(Q,F,ie,me,oe){--F.pendingcb,ie?(u.nextTick(oe,me),u.nextTick(ge,Q,F),Q._writableState.errorEmitted=!0,M(Q,me)):(oe(me),Q._writableState.errorEmitted=!0,M(Q,me),ge(Q,F))})(le,ae,he,be,U);else{var R=ee(ae)||le.destroyed;R||ae.corked||ae.bufferProcessing||!ae.bufferedRequest||K(le,ae),he?u.nextTick(Z,le,ae,R,U):Z(le,ae,R,U)}})(j,q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=k.emitClose!==!1,this.autoDestroy=!!k.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function P(k){var j=this instanceof(c=c||l(656));if(!j&&!f.call(P,this))return new P(k);this._writableState=new L(k,this,j),this.writable=!0,k&&(typeof k.write=="function"&&(this._write=k.write),typeof k.writev=="function"&&(this._writev=k.writev),typeof k.destroy=="function"&&(this._destroy=k.destroy),typeof k.final=="function"&&(this._final=k.final)),d.call(this)}function X(k,j,V,H,q,le,be){j.writelen=H,j.writecb=be,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new E("write")):V?k._writev(q,j.onwrite):k._write(q,le,j.onwrite),j.sync=!1}function Z(k,j,V,H){V||function(q,le){le.length===0&&le.needDrain&&(le.needDrain=!1,q.emit("drain"))}(k,j),j.pendingcb--,H(),ge(k,j)}function K(k,j){j.bufferProcessing=!0;var V=j.bufferedRequest;if(k._writev&&V&&V.next){var H=j.bufferedRequestCount,q=new Array(H),le=j.corkedRequestsFree;le.entry=V;for(var be=0,ae=!0;V;)q[be]=V,V.isBuf||(ae=!1),V=V.next,be+=1;q.allBuffers=ae,X(k,j,!0,j.length,q,"",le.finish),j.pendingcb++,j.lastBufferedRequest=null,le.next?(j.corkedRequestsFree=le.next,le.next=null):j.corkedRequestsFree=new h(j),j.bufferedRequestCount=0}else{for(;V;){var he=V.chunk,U=V.encoding,R=V.callback;if(X(k,j,!1,j.objectMode?1:he.length,he,U,R),V=V.next,j.bufferedRequestCount--,j.writing)break}V===null&&(j.lastBufferedRequest=null)}j.bufferedRequest=V,j.bufferProcessing=!1}function ee(k){return k.ending&&k.length===0&&k.bufferedRequest===null&&!k.finished&&!k.writing}function J(k,j){k._final(function(V){j.pendingcb--,V&&M(k,V),j.prefinished=!0,k.emit("prefinish"),ge(k,j)})}function ge(k,j){var V=ee(j);if(V&&(function(q,le){le.prefinished||le.finalCalled||(typeof q._final!="function"||le.destroyed?(le.prefinished=!0,q.emit("prefinish")):(le.pendingcb++,le.finalCalled=!0,u.nextTick(J,q,le)))}(k,j),j.pendingcb===0&&(j.finished=!0,k.emit("finish"),j.autoDestroy))){var H=k._readableState;(!H||H.autoDestroy&&H.endEmitted)&&k.destroy()}return V}l(717)(P,d),L.prototype.getBuffer=function(){for(var k=this.bufferedRequest,j=[];k;)j.push(k),k=k.next;return j},function(){try{Object.defineProperty(L.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(k){return!!f.call(this,k)||this===P&&k&&k._writableState instanceof L}})):f=function(k){return k instanceof this},P.prototype.pipe=function(){M(this,new T)},P.prototype.write=function(k,j,V){var H,q=this._writableState,le=!1,be=!q.objectMode&&(H=k,m.isBuffer(H)||H instanceof b);return be&&!m.isBuffer(k)&&(k=function(ae){return m.from(ae)}(k)),typeof j=="function"&&(V=j,j=null),be?j="buffer":j||(j=q.defaultEncoding),typeof V!="function"&&(V=D),q.ending?function(ae,he){var U=new C;M(ae,U),u.nextTick(he,U)}(this,V):(be||function(ae,he,U,R){var Q;return U===null?Q=new S:typeof U=="string"||he.objectMode||(Q=new O("chunk",["string","Buffer"],U)),!Q||(M(ae,Q),u.nextTick(R,Q),!1)}(this,q,k,V))&&(q.pendingcb++,le=function(ae,he,U,R,Q,F){if(!U){var ie=function(de,pe,xe){return de.objectMode||de.decodeStrings===!1||typeof pe!="string"||(pe=m.from(pe,xe)),pe}(he,R,Q);R!==ie&&(U=!0,Q="buffer",R=ie)}var me=he.objectMode?1:R.length;he.length+=me;var oe=he.length<he.highWaterMark;if(oe||(he.needDrain=!0),he.writing||he.corked){var ue=he.lastBufferedRequest;he.lastBufferedRequest={chunk:R,encoding:Q,isBuf:U,callback:F,next:null},ue?ue.next=he.lastBufferedRequest:he.bufferedRequest=he.lastBufferedRequest,he.bufferedRequestCount+=1}else X(ae,he,!1,me,R,Q,F);return oe}(this,q,be,k,j,V)),le},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var k=this._writableState;k.corked&&(k.corked--,k.writing||k.corked||k.bufferProcessing||!k.bufferedRequest||K(this,k))},P.prototype.setDefaultEncoding=function(k){if(typeof k=="string"&&(k=k.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((k+"").toLowerCase())>-1))throw new B(k);return this._writableState.defaultEncoding=k,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(k,j,V){V(new _("_write()"))},P.prototype._writev=null,P.prototype.end=function(k,j,V){var H=this._writableState;return typeof k=="function"?(V=k,k=null,j=null):typeof j=="function"&&(V=j,j=null),k!=null&&this.write(k,j),H.corked&&(H.corked=1,this.uncork()),H.ending||function(q,le,be){le.ending=!0,ge(q,le),be&&(le.finished?u.nextTick(be):q.once("finish",be)),le.ended=!0,q.writable=!1}(this,H,V),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(k){this._writableState&&(this._writableState.destroyed=k)}}),P.prototype.destroy=A.destroy,P.prototype._undestroy=A.undestroy,P.prototype._destroy=function(k,j){j(k)}},828:(o,a,l)=>{var c,u=l(155);function h(S,C,B){return C in S?Object.defineProperty(S,C,{value:B,enumerable:!0,configurable:!0,writable:!0}):S[C]=B,S}var f=l(86),p=Symbol("lastResolve"),d=Symbol("lastReject"),m=Symbol("error"),b=Symbol("ended"),A=Symbol("lastPromise"),g=Symbol("handlePromise"),v=Symbol("stream");function O(S,C){return{value:S,done:C}}function _(S){var C=S[p];if(C!==null){var B=S[v].read();B!==null&&(S[A]=null,S[p]=null,S[d]=null,C(O(B,!1)))}}function x(S){u.nextTick(_,S)}var T=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((h(c={get stream(){return this[v]},next:function(){var S=this,C=this[m];if(C!==null)return Promise.reject(C);if(this[b])return Promise.resolve(O(void 0,!0));if(this[v].destroyed)return new Promise(function(L,P){u.nextTick(function(){S[m]?P(S[m]):L(O(void 0,!0))})});var B,M=this[A];if(M)B=new Promise(function(L,P){return function(X,Z){L.then(function(){P[b]?X(O(void 0,!0)):P[g](X,Z)},Z)}}(M,this));else{var D=this[v].read();if(D!==null)return Promise.resolve(O(D,!1));B=new Promise(this[g])}return this[A]=B,B}},Symbol.asyncIterator,function(){return this}),h(c,"return",function(){var S=this;return new Promise(function(C,B){S[v].destroy(null,function(M){M?B(M):C(O(void 0,!0))})})}),c),T);o.exports=function(S){var C,B=Object.create(E,(h(C={},v,{value:S,writable:!0}),h(C,p,{value:null,writable:!0}),h(C,d,{value:null,writable:!0}),h(C,m,{value:null,writable:!0}),h(C,b,{value:S._readableState.endEmitted,writable:!0}),h(C,g,{value:function(M,D){var L=B[v].read();L?(B[A]=null,B[p]=null,B[d]=null,M(O(L,!1))):(B[p]=M,B[d]=D)},writable:!0}),C));return B[A]=null,f(S,function(M){if(M&&M.code!=="ERR_STREAM_PREMATURE_CLOSE"){var D=B[d];return D!==null&&(B[A]=null,B[p]=null,B[d]=null,D(M)),void(B[m]=M)}var L=B[p];L!==null&&(B[A]=null,B[p]=null,B[d]=null,L(O(void 0,!0))),B[b]=!0}),S.on("readable",x.bind(null,B)),B}},686:(o,a,l)=>{function c(m,b){var A=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);b&&(g=g.filter(function(v){return Object.getOwnPropertyDescriptor(m,v).enumerable})),A.push.apply(A,g)}return A}function u(m,b,A){return b in m?Object.defineProperty(m,b,{value:A,enumerable:!0,configurable:!0,writable:!0}):m[b]=A,m}function h(m,b){for(var A=0;A<b.length;A++){var g=b[A];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var f=l(764).Buffer,p=l(862).inspect,d=p&&p.custom||"inspect";o.exports=function(){function m(){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,m),this.head=null,this.tail=null,this.length=0}var b,A;return b=m,A=[{key:"push",value:function(g){var v={data:g,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(g){var v={data:g,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var v=this.head,O=""+v.data;v=v.next;)O+=g+v.data;return O}},{key:"concat",value:function(g){if(this.length===0)return f.alloc(0);for(var v,O,_,x=f.allocUnsafe(g>>>0),T=this.head,E=0;T;)v=T.data,O=x,_=E,f.prototype.copy.call(v,O,_),E+=T.data.length,T=T.next;return x}},{key:"consume",value:function(g,v){var O;return g<this.head.data.length?(O=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):O=g===this.head.data.length?this.shift():v?this._getString(g):this._getBuffer(g),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var v=this.head,O=1,_=v.data;for(g-=_.length;v=v.next;){var x=v.data,T=g>x.length?x.length:g;if(T===x.length?_+=x:_+=x.slice(0,g),(g-=T)==0){T===x.length?(++O,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=x.slice(T));break}++O}return this.length-=O,_}},{key:"_getBuffer",value:function(g){var v=f.allocUnsafe(g),O=this.head,_=1;for(O.data.copy(v),g-=O.data.length;O=O.next;){var x=O.data,T=g>x.length?x.length:g;if(x.copy(v,v.length-g,0,T),(g-=T)==0){T===x.length?(++_,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=x.slice(T));break}++_}return this.length-=_,v}},{key:d,value:function(g,v){return p(this,function(O){for(var _=1;_<arguments.length;_++){var x=arguments[_]!=null?arguments[_]:{};_%2?c(Object(x),!0).forEach(function(T){u(O,T,x[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(T){Object.defineProperty(O,T,Object.getOwnPropertyDescriptor(x,T))})}return O}({},v,{depth:0,customInspect:!1}))}}],A&&h(b.prototype,A),m}()},29:(o,a,l)=>{var c=l(155);function u(p,d){f(p,d),h(p)}function h(p){p._writableState&&!p._writableState.emitClose||p._readableState&&!p._readableState.emitClose||p.emit("close")}function f(p,d){p.emit("error",d)}o.exports={destroy:function(p,d){var m=this,b=this._readableState&&this._readableState.destroyed,A=this._writableState&&this._writableState.destroyed;return b||A?(d?d(p):p&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(f,this,p)):c.nextTick(f,this,p)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(p||null,function(g){!d&&g?m._writableState?m._writableState.errorEmitted?c.nextTick(h,m):(m._writableState.errorEmitted=!0,c.nextTick(u,m,g)):c.nextTick(u,m,g):d?(c.nextTick(h,m),d(g)):c.nextTick(h,m)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(p,d){var m=p._readableState,b=p._writableState;m&&m.autoDestroy||b&&b.autoDestroy?p.destroy(d):p.emit("error",d)}}},86:(o,a,l)=>{var c=l(106).q.ERR_STREAM_PREMATURE_CLOSE;function u(){}o.exports=function h(f,p,d){if(typeof p=="function")return h(f,null,p);p||(p={}),d=function(S){var C=!1;return function(){if(!C){C=!0;for(var B=arguments.length,M=new Array(B),D=0;D<B;D++)M[D]=arguments[D];S.apply(this,M)}}}(d||u);var m=p.readable||p.readable!==!1&&f.readable,b=p.writable||p.writable!==!1&&f.writable,A=function(){f.writable||v()},g=f._writableState&&f._writableState.finished,v=function(){b=!1,g=!0,m||d.call(f)},O=f._readableState&&f._readableState.endEmitted,_=function(){m=!1,O=!0,b||d.call(f)},x=function(S){d.call(f,S)},T=function(){var S;return m&&!O?(f._readableState&&f._readableState.ended||(S=new c),d.call(f,S)):b&&!g?(f._writableState&&f._writableState.ended||(S=new c),d.call(f,S)):void 0},E=function(){f.req.on("finish",v)};return function(S){return S.setHeader&&typeof S.abort=="function"}(f)?(f.on("complete",v),f.on("abort",T),f.req?E():f.on("request",E)):b&&!f._writableState&&(f.on("end",A),f.on("close",A)),f.on("end",_),f.on("finish",v),p.error!==!1&&f.on("error",x),f.on("close",T),function(){f.removeListener("complete",v),f.removeListener("abort",T),f.removeListener("request",E),f.req&&f.req.removeListener("finish",v),f.removeListener("end",A),f.removeListener("close",A),f.removeListener("finish",v),f.removeListener("end",_),f.removeListener("error",x),f.removeListener("close",T)}}},265:o=>{o.exports=function(){throw new Error("Readable.from is not available in the browser")}},472:(o,a,l)=>{var c,u=l(106).q,h=u.ERR_MISSING_ARGS,f=u.ERR_STREAM_DESTROYED;function p(g){if(g)throw g}function d(g,v,O,_){_=function(E){var S=!1;return function(){S||(S=!0,E.apply(void 0,arguments))}}(_);var x=!1;g.on("close",function(){x=!0}),c===void 0&&(c=l(86)),c(g,{readable:v,writable:O},function(E){if(E)return _(E);x=!0,_()});var T=!1;return function(E){if(!x&&!T)return T=!0,function(S){return S.setHeader&&typeof S.abort=="function"}(g)?g.abort():typeof g.destroy=="function"?g.destroy():void _(E||new f("pipe"))}}function m(g){g()}function b(g,v){return g.pipe(v)}function A(g){return g.length?typeof g[g.length-1]!="function"?p:g.pop():p}o.exports=function(){for(var g=arguments.length,v=new Array(g),O=0;O<g;O++)v[O]=arguments[O];var _,x=A(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new h("streams");var T=v.map(function(E,S){var C=S<v.length-1;return d(E,C,S>0,function(B){_||(_=B),B&&T.forEach(m),C||(T.forEach(m),x(_))})});return v.reduce(b)}},94:(o,a,l)=>{var c=l(106).q.ERR_INVALID_OPT_VALUE;o.exports={getHighWaterMark:function(u,h,f,p){var d=function(m,b,A){return m.highWaterMark!=null?m.highWaterMark:b?m[A]:null}(h,p,f);if(d!=null){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new c(p?f:"highWaterMark",d);return Math.floor(d)}return u.objectMode?16:16384}}},194:(o,a,l)=>{o.exports=l(187).EventEmitter},553:(o,a,l)=>{var c=l(509).Buffer,u=c.isEncoding||function(O){switch((O=""+O)&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function h(O){var _;switch(this.encoding=function(x){var T=function(E){if(!E)return"utf8";for(var S;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(S)return;E=(""+E).toLowerCase(),S=!0}}(x);if(typeof T!="string"&&(c.isEncoding===u||!u(x)))throw new Error("Unknown encoding: "+x);return T||x}(O),this.encoding){case"utf16le":this.text=d,this.end=m,_=4;break;case"utf8":this.fillLast=p,_=4;break;case"base64":this.text=b,this.end=A,_=3;break;default:return this.write=g,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(_)}function f(O){return O<=127?0:O>>5==6?2:O>>4==14?3:O>>3==30?4:O>>6==2?-1:-2}function p(O){var _=this.lastTotal-this.lastNeed,x=function(T,E,S){if((192&E[0])!=128)return T.lastNeed=0,"\uFFFD";if(T.lastNeed>1&&E.length>1){if((192&E[1])!=128)return T.lastNeed=1,"\uFFFD";if(T.lastNeed>2&&E.length>2&&(192&E[2])!=128)return T.lastNeed=2,"\uFFFD"}}(this,O);return x!==void 0?x:this.lastNeed<=O.length?(O.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(O.copy(this.lastChar,_,0,O.length),void(this.lastNeed-=O.length))}function d(O,_){if((O.length-_)%2==0){var x=O.toString("utf16le",_);if(x){var T=x.charCodeAt(x.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",_,O.length-1)}function m(O){var _=O&&O.length?this.write(O):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,x)}return _}function b(O,_){var x=(O.length-_)%3;return x===0?O.toString("base64",_):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",_,O.length-x))}function A(O){var _=O&&O.length?this.write(O):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function g(O){return O.toString(this.encoding)}function v(O){return O&&O.length?this.write(O):""}a.s=h,h.prototype.write=function(O){if(O.length===0)return"";var _,x;if(this.lastNeed){if((_=this.fillLast(O))===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<O.length?_?_+this.text(O,x):this.text(O,x):_||""},h.prototype.end=function(O){var _=O&&O.length?this.write(O):"";return this.lastNeed?_+"\uFFFD":_},h.prototype.text=function(O,_){var x=function(E,S,C){var B=S.length-1;if(B<C)return 0;var M=f(S[B]);return M>=0?(M>0&&(E.lastNeed=M-1),M):--B<C||M===-2?0:(M=f(S[B]))>=0?(M>0&&(E.lastNeed=M-2),M):--B<C||M===-2?0:(M=f(S[B]))>=0?(M>0&&(M===2?M=0:E.lastNeed=M-3),M):0}(this,O,_);if(!this.lastNeed)return O.toString("utf8",_);this.lastTotal=x;var T=O.length-(x-this.lastNeed);return O.copy(this.lastChar,0,T),O.toString("utf8",_,T)},h.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length}},927:(o,a,l)=>{function c(u){try{if(!l.g.localStorage)return!1}catch{return!1}var h=l.g.localStorage[u];return h!=null&&String(h).toLowerCase()==="true"}o.exports=function(u,h){if(c("noDeprecation"))return u;var f=!1;return function(){if(!f){if(c("throwDeprecation"))throw new Error(h);c("traceDeprecation")?console.trace(h):console.warn(h),f=!0}return u.apply(this,arguments)}}},881:o=>{o.exports={isArray:function(a){return Array.isArray?Array.isArray(a):Object.prototype.toString.call(a)==="[object Array]"}}},888:(o,a,l)=>{var c=l(229),u=l(388),h=l(501),f=l(673);o.exports={xml2js:c,xml2json:u,js2xml:h,json2xml:f}},501:(o,a,l)=>{var c,u,h=l(740),f=l(881).isArray;function p(S,C,B){return(!B&&S.spaces?`
`:"")+Array(C+1).join(S.spaces)}function d(S,C,B){if(C.ignoreAttributes)return"";"attributesFn"in C&&(S=C.attributesFn(S,u,c));var M,D,L,P,X=[];for(M in S)S.hasOwnProperty(M)&&S[M]!==null&&S[M]!==void 0&&(P=C.noQuotesForNativeAttributes&&typeof S[M]!="string"?"":'"',D=(D=""+S[M]).replace(/"/g,"&quot;"),L="attributeNameFn"in C?C.attributeNameFn(M,D,u,c):M,X.push(C.spaces&&C.indentAttributes?p(C,B+1,!1):" "),X.push(L+"="+P+("attributeValueFn"in C?C.attributeValueFn(D,M,u,c):D)+P));return S&&Object.keys(S).length&&C.spaces&&C.indentAttributes&&X.push(p(C,B,!1)),X.join("")}function m(S,C,B){return c=S,u="xml",C.ignoreDeclaration?"":"<?xml"+d(S[C.attributesKey],C,B)+"?>"}function b(S,C,B){if(C.ignoreInstruction)return"";var M;for(M in S)if(S.hasOwnProperty(M))break;var D="instructionNameFn"in C?C.instructionNameFn(M,S[M],u,c):M;if(typeof S[M]=="object")return c=S,u=D,"<?"+D+d(S[M][C.attributesKey],C,B)+"?>";var L=S[M]?S[M]:"";return"instructionFn"in C&&(L=C.instructionFn(L,M,u,c)),"<?"+D+(L?" "+L:"")+"?>"}function A(S,C){return C.ignoreComment?"":"<!--"+("commentFn"in C?C.commentFn(S,u,c):S)+"-->"}function g(S,C){return C.ignoreCdata?"":"<![CDATA["+("cdataFn"in C?C.cdataFn(S,u,c):S.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function v(S,C){return C.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in C?C.doctypeFn(S,u,c):S)+">"}function O(S,C){return C.ignoreText?"":(S=(S=(S=""+S).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in C?C.textFn(S,u,c):S)}function _(S,C,B,M){return S.reduce(function(D,L){var P=p(C,B,M&&!D);switch(L.type){case"element":return D+P+function(Z,K,ee){c=Z,u=Z.name;var J=[],ge="elementNameFn"in K?K.elementNameFn(Z.name,Z):Z.name;J.push("<"+ge),Z[K.attributesKey]&&J.push(d(Z[K.attributesKey],K,ee));var k=Z[K.elementsKey]&&Z[K.elementsKey].length||Z[K.attributesKey]&&Z[K.attributesKey]["xml:space"]==="preserve";return k||(k="fullTagEmptyElementFn"in K?K.fullTagEmptyElementFn(Z.name,Z):K.fullTagEmptyElement),k?(J.push(">"),Z[K.elementsKey]&&Z[K.elementsKey].length&&(J.push(_(Z[K.elementsKey],K,ee+1)),c=Z,u=Z.name),J.push(K.spaces&&function(j,V){var H;if(j.elements&&j.elements.length)for(H=0;H<j.elements.length;++H)switch(j.elements[H][V.typeKey]){case"text":if(V.indentText)return!0;break;case"cdata":if(V.indentCdata)return!0;break;case"instruction":if(V.indentInstruction)return!0;break;default:return!0}return!1}(Z,K)?`
`+Array(ee+1).join(K.spaces):""),J.push("</"+ge+">")):J.push("/>"),J.join("")}(L,C,B);case"comment":return D+P+A(L[C.commentKey],C);case"doctype":return D+P+v(L[C.doctypeKey],C);case"cdata":return D+(C.indentCdata?P:"")+g(L[C.cdataKey],C);case"text":return D+(C.indentText?P:"")+O(L[C.textKey],C);case"instruction":var X={};return X[L[C.nameKey]]=L[C.attributesKey]?L:L[C.instructionKey],D+(C.indentInstruction?P:"")+b(X,C,B)}},"")}function x(S,C,B){var M;for(M in S)if(S.hasOwnProperty(M))switch(M){case C.parentKey:case C.attributesKey:break;case C.textKey:if(C.indentText||B)return!0;break;case C.cdataKey:if(C.indentCdata||B)return!0;break;case C.instructionKey:if(C.indentInstruction||B)return!0;break;case C.doctypeKey:case C.commentKey:default:return!0}return!1}function T(S,C,B,M,D){c=S,u=C;var L="elementNameFn"in B?B.elementNameFn(C,S):C;if(S==null||S==="")return"fullTagEmptyElementFn"in B&&B.fullTagEmptyElementFn(C,S)||B.fullTagEmptyElement?"<"+L+"></"+L+">":"<"+L+"/>";var P=[];if(C){if(P.push("<"+L),typeof S!="object")return P.push(">"+O(S,B)+"</"+L+">"),P.join("");S[B.attributesKey]&&P.push(d(S[B.attributesKey],B,M));var X=x(S,B,!0)||S[B.attributesKey]&&S[B.attributesKey]["xml:space"]==="preserve";if(X||(X="fullTagEmptyElementFn"in B?B.fullTagEmptyElementFn(C,S):B.fullTagEmptyElement),!X)return P.push("/>"),P.join("");P.push(">")}return P.push(E(S,B,M+1,!1)),c=S,u=C,C&&P.push((D?p(B,M,!1):"")+"</"+L+">"),P.join("")}function E(S,C,B,M){var D,L,P,X=[];for(L in S)if(S.hasOwnProperty(L))for(P=f(S[L])?S[L]:[S[L]],D=0;D<P.length;++D){switch(L){case C.declarationKey:X.push(m(P[D],C,B));break;case C.instructionKey:X.push((C.indentInstruction?p(C,B,M):"")+b(P[D],C,B));break;case C.attributesKey:case C.parentKey:break;case C.textKey:X.push((C.indentText?p(C,B,M):"")+O(P[D],C));break;case C.cdataKey:X.push((C.indentCdata?p(C,B,M):"")+g(P[D],C));break;case C.doctypeKey:X.push(p(C,B,M)+v(P[D],C));break;case C.commentKey:X.push(p(C,B,M)+A(P[D],C));break;default:X.push(p(C,B,M)+T(P[D],L,C,B,x(P[D],C)))}M=M&&!X.length}return X.join("")}o.exports=function(S,C){C=function(M){var D=h.copyOptions(M);return h.ensureFlagExists("ignoreDeclaration",D),h.ensureFlagExists("ignoreInstruction",D),h.ensureFlagExists("ignoreAttributes",D),h.ensureFlagExists("ignoreText",D),h.ensureFlagExists("ignoreComment",D),h.ensureFlagExists("ignoreCdata",D),h.ensureFlagExists("ignoreDoctype",D),h.ensureFlagExists("compact",D),h.ensureFlagExists("indentText",D),h.ensureFlagExists("indentCdata",D),h.ensureFlagExists("indentAttributes",D),h.ensureFlagExists("indentInstruction",D),h.ensureFlagExists("fullTagEmptyElement",D),h.ensureFlagExists("noQuotesForNativeAttributes",D),h.ensureSpacesExists(D),typeof D.spaces=="number"&&(D.spaces=Array(D.spaces+1).join(" ")),h.ensureKeyExists("declaration",D),h.ensureKeyExists("instruction",D),h.ensureKeyExists("attributes",D),h.ensureKeyExists("text",D),h.ensureKeyExists("comment",D),h.ensureKeyExists("cdata",D),h.ensureKeyExists("doctype",D),h.ensureKeyExists("type",D),h.ensureKeyExists("name",D),h.ensureKeyExists("elements",D),h.checkFnExists("doctype",D),h.checkFnExists("instruction",D),h.checkFnExists("cdata",D),h.checkFnExists("comment",D),h.checkFnExists("text",D),h.checkFnExists("instructionName",D),h.checkFnExists("elementName",D),h.checkFnExists("attributeName",D),h.checkFnExists("attributeValue",D),h.checkFnExists("attributes",D),h.checkFnExists("fullTagEmptyElement",D),D}(C);var B=[];return c=S,u="_root_",C.compact?B.push(E(S,C,0,!0)):(S[C.declarationKey]&&B.push(m(S[C.declarationKey],C,0)),S[C.elementsKey]&&S[C.elementsKey].length&&B.push(_(S[C.elementsKey],C,0,!B.length))),B.join("")}},673:(o,a,l)=>{var c=l(501);o.exports=function(u,h){u instanceof Buffer&&(u=u.toString());var f=null;if(typeof u=="string")try{f=JSON.parse(u)}catch{throw new Error("The JSON structure is invalid")}else f=u;return c(f,h)}},740:(o,a,l)=>{var c=l(881).isArray;o.exports={copyOptions:function(u){var h,f={};for(h in u)u.hasOwnProperty(h)&&(f[h]=u[h]);return f},ensureFlagExists:function(u,h){u in h&&typeof h[u]=="boolean"||(h[u]=!1)},ensureSpacesExists:function(u){(!("spaces"in u)||typeof u.spaces!="number"&&typeof u.spaces!="string")&&(u.spaces=0)},ensureAlwaysArrayExists:function(u){"alwaysArray"in u&&(typeof u.alwaysArray=="boolean"||c(u.alwaysArray))||(u.alwaysArray=!1)},ensureKeyExists:function(u,h){u+"Key"in h&&typeof h[u+"Key"]=="string"||(h[u+"Key"]=h.compact?"_"+u:u)},checkFnExists:function(u,h){return u+"Fn"in h}}},229:(o,a,l)=>{var c,u,h=l(99),f=l(740),p=l(881).isArray;function d(S){var C=Number(S);if(!isNaN(C))return C;var B=S.toLowerCase();return B==="true"||B!=="false"&&S}function m(S,C){var B;if(c.compact){if(!u[c[S+"Key"]]&&(p(c.alwaysArray)?c.alwaysArray.indexOf(c[S+"Key"])!==-1:c.alwaysArray)&&(u[c[S+"Key"]]=[]),u[c[S+"Key"]]&&!p(u[c[S+"Key"]])&&(u[c[S+"Key"]]=[u[c[S+"Key"]]]),S+"Fn"in c&&typeof C=="string"&&(C=c[S+"Fn"](C,u)),S==="instruction"&&("instructionFn"in c||"instructionNameFn"in c)){for(B in C)if(C.hasOwnProperty(B))if("instructionFn"in c)C[B]=c.instructionFn(C[B],B,u);else{var M=C[B];delete C[B],C[c.instructionNameFn(B,M,u)]=M}}p(u[c[S+"Key"]])?u[c[S+"Key"]].push(C):u[c[S+"Key"]]=C}else{u[c.elementsKey]||(u[c.elementsKey]=[]);var D={};if(D[c.typeKey]=S,S==="instruction"){for(B in C)if(C.hasOwnProperty(B))break;D[c.nameKey]="instructionNameFn"in c?c.instructionNameFn(B,C,u):B,c.instructionHasAttributes?(D[c.attributesKey]=C[B][c.attributesKey],"instructionFn"in c&&(D[c.attributesKey]=c.instructionFn(D[c.attributesKey],B,u))):("instructionFn"in c&&(C[B]=c.instructionFn(C[B],B,u)),D[c.instructionKey]=C[B])}else S+"Fn"in c&&(C=c[S+"Fn"](C,u)),D[c[S+"Key"]]=C;c.addParent&&(D[c.parentKey]=u),u[c.elementsKey].push(D)}}function b(S){var C;if("attributesFn"in c&&S&&(S=c.attributesFn(S,u)),(c.trim||"attributeValueFn"in c||"attributeNameFn"in c||c.nativeTypeAttributes)&&S){for(C in S)if(S.hasOwnProperty(C)&&(c.trim&&(S[C]=S[C].trim()),c.nativeTypeAttributes&&(S[C]=d(S[C])),"attributeValueFn"in c&&(S[C]=c.attributeValueFn(S[C],C,u)),"attributeNameFn"in c)){var B=S[C];delete S[C],S[c.attributeNameFn(C,S[C],u)]=B}}return S}function A(S){var C={};if(S.body&&(S.name.toLowerCase()==="xml"||c.instructionHasAttributes)){for(var B,M=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;(B=M.exec(S.body))!==null;)C[B[1]]=B[2]||B[3]||B[4];C=b(C)}if(S.name.toLowerCase()==="xml"){if(c.ignoreDeclaration)return;u[c.declarationKey]={},Object.keys(C).length&&(u[c.declarationKey][c.attributesKey]=C),c.addParent&&(u[c.declarationKey][c.parentKey]=u)}else{if(c.ignoreInstruction)return;c.trim&&(S.body=S.body.trim());var D={};c.instructionHasAttributes&&Object.keys(C).length?(D[S.name]={},D[S.name][c.attributesKey]=C):D[S.name]=S.body,m("instruction",D)}}function g(S,C){var B;if(typeof S=="object"&&(C=S.attributes,S=S.name),C=b(C),"elementNameFn"in c&&(S=c.elementNameFn(S,u)),c.compact){var M;if(B={},!c.ignoreAttributes&&C&&Object.keys(C).length)for(M in B[c.attributesKey]={},C)C.hasOwnProperty(M)&&(B[c.attributesKey][M]=C[M]);!(S in u)&&(p(c.alwaysArray)?c.alwaysArray.indexOf(S)!==-1:c.alwaysArray)&&(u[S]=[]),u[S]&&!p(u[S])&&(u[S]=[u[S]]),p(u[S])?u[S].push(B):u[S]=B}else u[c.elementsKey]||(u[c.elementsKey]=[]),(B={})[c.typeKey]="element",B[c.nameKey]=S,!c.ignoreAttributes&&C&&Object.keys(C).length&&(B[c.attributesKey]=C),c.alwaysChildren&&(B[c.elementsKey]=[]),u[c.elementsKey].push(B);B[c.parentKey]=u,u=B}function v(S){c.ignoreText||(S.trim()||c.captureSpacesBetweenElements)&&(c.trim&&(S=S.trim()),c.nativeType&&(S=d(S)),c.sanitize&&(S=S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),m("text",S))}function O(S){c.ignoreComment||(c.trim&&(S=S.trim()),m("comment",S))}function _(S){var C=u[c.parentKey];c.addParent||delete u[c.parentKey],u=C}function x(S){c.ignoreCdata||(c.trim&&(S=S.trim()),m("cdata",S))}function T(S){c.ignoreDoctype||(S=S.replace(/^ /,""),c.trim&&(S=S.trim()),m("doctype",S))}function E(S){S.note=S}o.exports=function(S,C){var B=h.parser(!0,{}),M={};if(u=M,c=function(L){return c=f.copyOptions(L),f.ensureFlagExists("ignoreDeclaration",c),f.ensureFlagExists("ignoreInstruction",c),f.ensureFlagExists("ignoreAttributes",c),f.ensureFlagExists("ignoreText",c),f.ensureFlagExists("ignoreComment",c),f.ensureFlagExists("ignoreCdata",c),f.ensureFlagExists("ignoreDoctype",c),f.ensureFlagExists("compact",c),f.ensureFlagExists("alwaysChildren",c),f.ensureFlagExists("addParent",c),f.ensureFlagExists("trim",c),f.ensureFlagExists("nativeType",c),f.ensureFlagExists("nativeTypeAttributes",c),f.ensureFlagExists("sanitize",c),f.ensureFlagExists("instructionHasAttributes",c),f.ensureFlagExists("captureSpacesBetweenElements",c),f.ensureAlwaysArrayExists(c),f.ensureKeyExists("declaration",c),f.ensureKeyExists("instruction",c),f.ensureKeyExists("attributes",c),f.ensureKeyExists("text",c),f.ensureKeyExists("comment",c),f.ensureKeyExists("cdata",c),f.ensureKeyExists("doctype",c),f.ensureKeyExists("type",c),f.ensureKeyExists("name",c),f.ensureKeyExists("elements",c),f.ensureKeyExists("parent",c),f.checkFnExists("doctype",c),f.checkFnExists("instruction",c),f.checkFnExists("cdata",c),f.checkFnExists("comment",c),f.checkFnExists("text",c),f.checkFnExists("instructionName",c),f.checkFnExists("elementName",c),f.checkFnExists("attributeName",c),f.checkFnExists("attributeValue",c),f.checkFnExists("attributes",c),c}(C),B.opt={strictEntities:!0},B.onopentag=g,B.ontext=v,B.oncomment=O,B.onclosetag=_,B.onerror=E,B.oncdata=x,B.ondoctype=T,B.onprocessinginstruction=A,B.write(S).close(),M[c.elementsKey]){var D=M[c.elementsKey];delete M[c.elementsKey],M[c.elementsKey]=D,delete M.text}return M}},388:(o,a,l)=>{var c=l(740),u=l(229);o.exports=function(h,f){var p,d,m;return p=function(b){var A=c.copyOptions(b);return c.ensureSpacesExists(A),A}(f),d=u(h,p),m="compact"in p&&p.compact?"_parent":"parent",("addParent"in p&&p.addParent?JSON.stringify(d,function(b,A){return b===m?"_":A},p.spaces):JSON.stringify(d,null,p.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},255:o=>{var a={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};o.exports=function(l){return l&&l.replace?l.replace(/([&"<>'])/g,function(c,u){return a[u]}):l}},479:(o,a,l)=>{var c=l(155),u=l(255),h=l(830).Stream;function f(d,m,b){b=b||0;var A,g,v=(A=m,new Array(b||0).join(A||"")),O=d;if(typeof d=="object"&&(O=d[g=Object.keys(d)[0]])&&O._elem)return O._elem.name=g,O._elem.icount=b,O._elem.indent=m,O._elem.indents=v,O._elem.interrupt=O,O._elem;var _,x=[],T=[];function E(S){Object.keys(S).forEach(function(C){x.push(function(B,M){return B+'="'+u(M)+'"'}(C,S[C]))})}switch(typeof O){case"object":if(O===null)break;O._attr&&E(O._attr),O._cdata&&T.push(("<![CDATA["+O._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),O.forEach&&(_=!1,T.push(""),O.forEach(function(S){typeof S=="object"?Object.keys(S)[0]=="_attr"?E(S._attr):T.push(f(S,m,b+1)):(T.pop(),_=!0,T.push(u(S)))}),_||T.push(""));break;default:T.push(u(O))}return{name:g,interrupt:!1,attributes:x,content:T,icount:b,indents:v,indent:m}}function p(d,m,b){if(typeof m!="object")return d(!1,m);var A=m.interrupt?1:m.content.length;function g(){for(;m.content.length;){var O=m.content.shift();if(O!==void 0){if(v(O))return;p(d,O)}}d(!1,(A>1?m.indents:"")+(m.name?"</"+m.name+">":"")+(m.indent&&!b?`
`:"")),b&&b()}function v(O){return!!O.interrupt&&(O.interrupt.append=d,O.interrupt.end=g,O.interrupt=!1,d(!0),!0)}if(d(!1,m.indents+(m.name?"<"+m.name:"")+(m.attributes.length?" "+m.attributes.join(" "):"")+(A?m.name?">":"":m.name?"/>":"")+(m.indent&&A>1?`
`:"")),!A)return d(!1,m.indent?`
`:"");v(m)||g()}o.exports=function(d,m){typeof m!="object"&&(m={indent:m});var b,A,g=m.stream?new h:null,v="",O=!1,_=m.indent?m.indent===!0?"    ":m.indent:"",x=!0;function T(B){x?c.nextTick(B):B()}function E(B,M){if(M!==void 0&&(v+=M),B&&!O&&(g=g||new h,O=!0),B&&O){var D=v;T(function(){g.emit("data",D)}),v=""}}function S(B,M){p(E,f(B,_,_?1:0),M)}function C(){if(g){var B=v;T(function(){g.emit("data",B),g.emit("end"),g.readable=!1,g.emit("close")})}}return T(function(){x=!1}),m.declaration&&(A={version:"1.0",encoding:(b=m.declaration).encoding||"UTF-8"},b.standalone&&(A.standalone=b.standalone),S({"?xml":{_attr:A}}),v=v.replace("/>","?>")),d&&d.forEach?d.forEach(function(B,M){var D;M+1===d.length&&(D=C),S(B,D)}):S(d,C),g?(g.readable=!0,g):v},o.exports.element=o.exports.Element=function(){var d=Array.prototype.slice.call(arguments),m={_elem:f(d),push:function(b){if(!this.append)throw new Error("not assigned to a parent!");var A=this,g=this._elem.indent;p(this.append,f(b,g,this._elem.icount+(g?1:0)),function(){A.append(!0)})},close:function(b){b!==void 0&&this.push(b),this.end&&this.end()}};return m}},862:()=>{},964:()=>{}},r={};function i(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return t[o](l,l.exports,i),l.exports}i.d=(o,a)=>{for(var l in a)i.o(a,l)&&!i.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:a[l]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a),i.r=o=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var s={};return(()=>{i.r(s),i.d(s,{AbstractNumbering:()=>Rp,Alignment:()=>me,AlignmentAttributes:()=>ie,AlignmentType:()=>le,Attributes:()=>h,BaseEmphasisMark:()=>Tt,BaseXmlComponent:()=>o,Body:()=>Av,Bookmark:()=>Jb,BookmarkEnd:()=>tv,BookmarkStart:()=>ev,Border:()=>de,BorderElement:()=>oe,BorderStyle:()=>be,Column:()=>cP,ColumnAttributes:()=>_v,ColumnBreak:()=>XQ,Columns:()=>sv,ColumnsAttributes:()=>iv,ConcreteHyperlink:()=>up,ConcreteNumbering:()=>Qp,DeletedTextRun:()=>wL,DocGridAttributes:()=>ov,Document:()=>fw,DocumentAttributes:()=>Eo,DocumentBackground:()=>kv,DocumentBackgroundAttributes:()=>xv,DocumentDefaults:()=>cw,DocumentGrid:()=>av,DocumentGridType:()=>ep,DotEmphasisMark:()=>Ls,Drawing:()=>Hb,DropCapType:()=>fp,EMPTY_OBJECT:()=>a,EmphasisMark:()=>ja,EmphasisMarkType:()=>R,ExternalHyperlink:()=>Kb,File:()=>fw,FootNoteReferenceRunAttributes:()=>dw,FootNotes:()=>tw,Footer:()=>pL,FooterWrapper:()=>kp,FootnoteReference:()=>pw,FootnoteReferenceRun:()=>mL,FrameAnchorType:()=>dp,FrameProperties:()=>Ev,FramePropertiesAttributes:()=>Tv,FrameWrap:()=>pp,GridSpan:()=>jv,Header:()=>dL,HeaderFooterReference:()=>pu,HeaderFooterReferenceType:()=>hi,HeaderFooterType:()=>Ya,HeaderWrapper:()=>Tp,HeadingLevel:()=>Yd,HeightRule:()=>xp,HorizontalPosition:()=>Lb,HorizontalPositionAlign:()=>Dp,HorizontalPositionRelativeFrom:()=>lu,HpsMeasureElement:()=>j,HyperlinkType:()=>Kd,IgnoreIfEmptyXmlComponent:()=>c,ImageRun:()=>FQ,ImportDotx:()=>TL,ImportedRootElementAttributes:()=>b,ImportedXmlComponent:()=>m,Indent:()=>Fe,InitializableXmlComponent:()=>g,InsertedTextRun:()=>gL,InternalHyperlink:()=>tP,LeaderType:()=>Zd,Level:()=>nw,LevelBase:()=>Ip,LevelForOverride:()=>CD,LevelFormat:()=>hr,LevelOverride:()=>rw,LevelSuffix:()=>Cp,LineNumberAttributes:()=>lv,LineNumberRestartFormat:()=>tp,LineNumberType:()=>cv,LineRuleType:()=>To,Math:()=>fP,MathAccentCharacter:()=>Rv,MathAngledBrackets:()=>$P,MathBase:()=>ur,MathCurlyBrackets:()=>MP,MathDegree:()=>Mv,MathDenominator:()=>Cv,MathFraction:()=>mP,MathFunction:()=>RP,MathFunctionName:()=>Fv,MathFunctionProperties:()=>Wv,MathLimitLocation:()=>Qv,MathNArayProperties:()=>Pv,MathNumerator:()=>Iv,MathPreSubSuperScript:()=>SP,MathPreSubSuperScriptProperties:()=>Bv,MathRadical:()=>IP,MathRadicalProperties:()=>$v,MathRoundBrackets:()=>NP,MathRun:()=>pP,MathSquareBrackets:()=>BP,MathSubScript:()=>xP,MathSubScriptElement:()=>Ja,MathSubScriptProperties:()=>Lv,MathSubSuperScript:()=>kP,MathSubSuperScriptProperties:()=>Nv,MathSum:()=>AP,MathSuperScript:()=>_P,MathSuperScriptElement:()=>el,MathSuperScriptProperties:()=>Dv,Media:()=>Ep,NumberFormat:()=>Np,NumberProperties:()=>cp,NumberValueElement:()=>H,Numbering:()=>iw,OnOffElement:()=>k,OutlineLevel:()=>nv,OverlapType:()=>bp,Packer:()=>yw,PageBorderDisplay:()=>np,PageBorderOffsetFrom:()=>rp,PageBorderZOrder:()=>ip,PageBorders:()=>hv,PageBreak:()=>VQ,PageBreakBefore:()=>Xb,PageMargin:()=>dv,PageMarginAttributes:()=>fv,PageNumber:()=>F,PageNumberSeparator:()=>sp,PageNumberType:()=>mv,PageNumberTypeAttributes:()=>pv,PageOrientation:()=>Za,PageReference:()=>oP,PageSize:()=>yv,PageSizeAttributes:()=>gv,PageTextDirection:()=>Ov,PageTextDirectionType:()=>op,Paragraph:()=>Ui,ParagraphProperties:()=>Bs,ParagraphPropertiesDefaults:()=>aw,RelativeHorizontalPosition:()=>wp,RelativeVerticalPosition:()=>Ap,Run:()=>$n,RunFonts:()=>au,RunProperties:()=>Fi,RunPropertiesChange:()=>Ib,RunPropertiesDefaults:()=>lw,SectionProperties:()=>wv,SectionType:()=>ap,SectionTypeAttributes:()=>bv,SequentialIdentifier:()=>zQ,Shading:()=>ot,ShadingType:()=>U,SimpleField:()=>Gb,SimpleMailMergeField:()=>GQ,SimplePos:()=>Qb,Spacing:()=>Yb,StringContainer:()=>q,StringValueElement:()=>V,Style:()=>qa,StyleForCharacter:()=>rl,StyleForParagraph:()=>nl,StyleLevel:()=>fL,Styles:()=>bu,SymbolRun:()=>XR,TDirection:()=>Hv,Tab:()=>jQ,TabAttributes:()=>Zb,TabStop:()=>du,TabStopItem:()=>qb,TabStopPosition:()=>qd,TabStopType:()=>Xa,Table:()=>ZP,TableAnchorType:()=>vp,TableBorders:()=>Op,TableCell:()=>yp,TableCellBorders:()=>zv,TableFloatOptionsAttributes:()=>Vv,TableFloatProperties:()=>Xv,TableLayout:()=>Yv,TableLayoutType:()=>_p,TableOfContents:()=>hL,TableOverlap:()=>Gv,TableProperties:()=>Zv,TableRow:()=>qP,TableRowHeight:()=>Kv,TableRowHeightAttributes:()=>qv,TableRowProperties:()=>Jv,TableWidthElement:()=>zi,TextDirection:()=>mp,TextRun:()=>Ha,TextWrappingSide:()=>uu,TextWrappingType:()=>Ns,ThematicBreak:()=>pe,Type:()=>vv,Underline:()=>Cb,UnderlineType:()=>Q,VerticalAlign:()=>Jd,VerticalAlignAttributes:()=>rv,VerticalAlignElement:()=>hp,VerticalMerge:()=>gp,VerticalMergeType:()=>tl,VerticalPosition:()=>Nb,VerticalPositionAlign:()=>Lp,VerticalPositionRelativeFrom:()=>cu,WORKAROUND:()=>iL,WORKAROUND2:()=>_D,WORKAROUND3:()=>A,WORKAROUND4:()=>TP,WidthType:()=>Co,WrapNone:()=>lp,WrapSquare:()=>Mb,WrapTight:()=>$b,WrapTopAndBottom:()=>Fb,XmlAttributeComponent:()=>u,XmlComponent:()=>l,convertInchesToTwip:()=>cr,convertMillimetersToTwip:()=>ZR,convertToXmlComponent:()=>p,dateTimeValue:()=>ge,decimalNumber:()=>v,eighthPointMeasureValue:()=>ee,hexColorValue:()=>M,hpsMeasureValue:()=>L,longHexNumber:()=>x,measurementOrPercentValue:()=>K,percentageValue:()=>Z,pointMeasureValue:()=>J,positiveUniversalMeasureValue:()=>B,sectionMarginDefaults:()=>Wi,sectionPageSizeDefaults:()=>mu,shortHexNumber:()=>T,signedHpsMeasureValue:()=>P,signedTwipsMeasureValue:()=>D,twipsMeasureValue:()=>X,uCharHexNumber:()=>E,uniqueId:()=>Va,uniqueNumericId:()=>Ga,universalMeasureValue:()=>S,unsignedDecimalNumber:()=>O});class o{constructor(y){this.rootKey=y}}const a=Object.seal({});class l extends o{constructor(y){super(y),this.root=new Array}prepForXml(y){var $;const ne=this.root.map(ye=>ye instanceof o?ye.prepForXml(y):ye).filter(ye=>ye!==void 0);return{[this.rootKey]:ne.length?ne.length===1&&(($=ne[0])===null||$===void 0?void 0:$._attr)?ne[0]:ne:a}}addChildElement(y){return this.root.push(y),this}}class c extends l{prepForXml(y){const $=super.prepForXml(y);if($&&(typeof $[this.rootKey]!="object"||Object.keys($[this.rootKey]).length))return $}}class u extends o{constructor(y){super("_attr"),this.root=y}prepForXml(y){const $={};return Object.keys(this.root).forEach(ne=>{const ye=this.root[ne];if(ye!==void 0){const we=this.xmlKeys&&this.xmlKeys[ne]||ne;$[we]=ye}}),{_attr:$}}set(y){this.root=y}}class h extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"}}}var f=i(888);function p(w){switch(w.type){case void 0:case"element":const y=new m(w.name,w.attributes),$=w.elements||[];for(const ne of $){const ye=p(ne);ye!==void 0&&y.push(ye)}return y;case"text":return w.text;default:return}}class d extends u{}class m extends l{static fromXmlString(y){return p((0,f.xml2js)(y,{compact:!1}))}constructor(y,$){super(y),$&&this.root.push(new d($))}push(y){this.root.push(y)}}class b extends l{constructor(y){super(""),this._attr=y}prepForXml(y){return{_attr:this._attr}}}const A="";class g extends l{constructor(y,$){super(y),$&&(this.root=$.root)}}function v(w){if(isNaN(w))throw new Error(`Invalid value '${w}' specified. Must be an integer.`);return Math.floor(w)}function O(w){const y=v(w);if(y<0)throw new Error(`Invalid value '${w}' specified. Must be a positive integer.`);return y}function _(w,y){const $=2*y;if(w.length!==$||isNaN(Number("0x"+w)))throw new Error(`Invalid hex value '${w}'. Expected ${$} digit hex value`);return w}function x(w){return _(w,4)}function T(w){return _(w,2)}function E(w){return _(w,1)}function S(w){const y=w.slice(-2);if(!C.includes(y))throw new Error(`Invalid unit '${y}' specified. Valid units are ${C.join(", ")}`);const $=w.substring(0,w.length-2);if(isNaN(Number($)))throw new Error(`Invalid value '${$}' specified. Expected a valid number.`);return`${Number($)}${y}`}const C=["mm","cm","in","pt","pc","pi"];function B(w){const y=S(w);if(parseFloat(y)<0)throw new Error(`Invalid value '${y}' specified. Expected a positive number.`);return y}function M(w){return w==="auto"?w:_(w.charAt(0)==="#"?w.substring(1):w,3)}function D(w){return typeof w=="string"?S(w):v(w)}function L(w){return typeof w=="string"?B(w):O(w)}function P(w){return typeof w=="string"?S(w):v(w)}function X(w){return typeof w=="string"?B(w):O(w)}function Z(w){if(w.slice(-1)!=="%")throw new Error(`Invalid value '${w}'. Expected percentage value (eg '55%')`);const y=w.substring(0,w.length-1);if(isNaN(Number(y)))throw new Error(`Invalid value '${y}' specified. Expected a valid number.`);return`${Number(y)}%`}function K(w){return typeof w=="number"?v(w):w.slice(-1)==="%"?Z(w):S(w)}const ee=O,J=O;function ge(w){return w.toISOString()}class k extends l{constructor(y,$=!0){super(y),$!==!0&&this.root.push(new h({val:$}))}}class j extends l{constructor(y,$){super(y),this.root.push(new h({val:L($)}))}}class V extends l{constructor(y,$){super(y),this.root.push(new h({val:$}))}}class H extends l{constructor(y,$){super(y),this.root.push(new h({val:$}))}}class q extends l{constructor(y,$){super(y),this.root.push($)}}var le,be,ae,he,U,R,Q,F;(function(w){w.START="start",w.END="end",w.CENTER="center",w.BOTH="both",w.JUSTIFIED="both",w.DISTRIBUTE="distribute",w.LEFT="left",w.RIGHT="right"})(le||(le={}));class ie extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class me extends l{constructor(y){super("w:jc"),this.root.push(new ie({val:y}))}}class oe extends l{constructor(y,{color:$,size:ne,space:ye,style:we}){super(y),this.root.push(new ue({style:we,color:$===void 0?void 0:M($),size:ne===void 0?void 0:ee(ne),space:ye===void 0?void 0:J(ye)}))}}class ue extends u{constructor(){super(...arguments),this.xmlKeys={style:"w:val",color:"w:color",size:"w:sz",space:"w:space"}}}(function(w){w.SINGLE="single",w.DASH_DOT_STROKED="dashDotStroked",w.DASHED="dashed",w.DASH_SMALL_GAP="dashSmallGap",w.DOT_DASH="dotDash",w.DOT_DOT_DASH="dotDotDash",w.DOTTED="dotted",w.DOUBLE="double",w.DOUBLE_WAVE="doubleWave",w.INSET="inset",w.NIL="nil",w.NONE="none",w.OUTSET="outset",w.THICK="thick",w.THICK_THIN_LARGE_GAP="thickThinLargeGap",w.THICK_THIN_MEDIUM_GAP="thickThinMediumGap",w.THICK_THIN_SMALL_GAP="thickThinSmallGap",w.THIN_THICK_LARGE_GAP="thinThickLargeGap",w.THIN_THICK_MEDIUM_GAP="thinThickMediumGap",w.THIN_THICK_SMALL_GAP="thinThickSmallGap",w.THIN_THICK_THIN_LARGE_GAP="thinThickThinLargeGap",w.THIN_THICK_THIN_MEDIUM_GAP="thinThickThinMediumGap",w.THIN_THICK_THIN_SMALL_GAP="thinThickThinSmallGap",w.THREE_D_EMBOSS="threeDEmboss",w.THREE_D_ENGRAVE="threeDEngrave",w.TRIPLE="triple",w.WAVE="wave"})(be||(be={}));class de extends c{constructor(y){super("w:pBdr"),y.top&&this.root.push(new oe("w:top",y.top)),y.bottom&&this.root.push(new oe("w:bottom",y.bottom)),y.left&&this.root.push(new oe("w:left",y.left)),y.right&&this.root.push(new oe("w:right",y.right))}}class pe extends l{constructor(){super("w:pBdr");const y=new oe("w:bottom",{color:"auto",space:1,style:be.SINGLE,size:6});this.root.push(y)}}class xe extends u{constructor(){super(...arguments),this.xmlKeys={start:"w:start",end:"w:end",left:"w:left",right:"w:right",hanging:"w:hanging",firstLine:"w:firstLine"}}}class Fe extends l{constructor({start:y,end:$,left:ne,right:ye,hanging:we,firstLine:Le}){super("w:ind"),this.root.push(new xe({start:y===void 0?void 0:D(y),end:$===void 0?void 0:D($),left:ne===void 0?void 0:D(ne),right:ye===void 0?void 0:D(ye),hanging:we===void 0?void 0:X(we),firstLine:Le===void 0?void 0:X(Le)}))}}class st extends l{constructor(){super("w:br")}}(function(w){w.BEGIN="begin",w.END="end",w.SEPARATE="separate"})(ae||(ae={}));class I extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:fldCharType",dirty:"w:dirty"}}}class N extends l{constructor(y){super("w:fldChar"),this.root.push(new I({type:ae.BEGIN,dirty:y}))}}class z extends l{constructor(y){super("w:fldChar"),this.root.push(new I({type:ae.SEPARATE,dirty:y}))}}class te extends l{constructor(y){super("w:fldChar"),this.root.push(new I({type:ae.END,dirty:y}))}}(function(w){w.DEFAULT="default",w.PRESERVE="preserve"})(he||(he={}));class se extends u{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class ce extends l{constructor(){super("w:instrText"),this.root.push(new se({space:he.PRESERVE})),this.root.push("PAGE")}}class Oe extends l{constructor(){super("w:instrText"),this.root.push(new se({space:he.PRESERVE})),this.root.push("NUMPAGES")}}class ze extends l{constructor(){super("w:instrText"),this.root.push(new se({space:he.PRESERVE})),this.root.push("SECTIONPAGES")}}class Ve extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id",author:"w:author",date:"w:date"}}}class Rt extends u{constructor(){super(...arguments),this.xmlKeys={fill:"w:fill",color:"w:color",type:"w:val"}}}class ot extends l{constructor({fill:y,color:$,type:ne}){super("w:shd"),this.root.push(new Rt({fill:y===void 0?void 0:M(y),color:$===void 0?void 0:M($),type:ne}))}}(function(w){w.CLEAR="clear",w.DIAGONAL_CROSS="diagCross",w.DIAGONAL_STRIPE="diagStripe",w.HORIZONTAL_CROSS="horzCross",w.HORIZONTAL_STRIPE="horzStripe",w.NIL="nil",w.PERCENT_5="pct5",w.PERCENT_10="pct10",w.PERCENT_12="pct12",w.PERCENT_15="pct15",w.PERCENT_20="pct20",w.PERCENT_25="pct25",w.PERCENT_30="pct30",w.PERCENT_35="pct35",w.PERCENT_37="pct37",w.PERCENT_40="pct40",w.PERCENT_45="pct45",w.PERCENT_50="pct50",w.PERCENT_55="pct55",w.PERCENT_60="pct60",w.PERCENT_62="pct62",w.PERCENT_65="pct65",w.PERCENT_70="pct70",w.PERCENT_75="pct75",w.PERCENT_80="pct80",w.PERCENT_85="pct85",w.PERCENT_87="pct87",w.PERCENT_90="pct90",w.PERCENT_95="pct95",w.REVERSE_DIAGONAL_STRIPE="reverseDiagStripe",w.SOLID="solid",w.THIN_DIAGONAL_CROSS="thinDiagCross",w.THIN_DIAGONAL_STRIPE="thinDiagStripe",w.THIN_HORIZONTAL_CROSS="thinHorzCross",w.THIN_REVERSE_DIAGONAL_STRIPE="thinReverseDiagStripe",w.THIN_VERTICAL_STRIPE="thinVertStripe",w.VERTICAL_STRIPE="vertStripe"})(U||(U={})),function(w){w.DOT="dot"}(R||(R={}));class Tt extends l{constructor(y){super("w:em"),this.root.push(new h({val:y}))}}class ja extends Tt{constructor(y=R.DOT){super(y)}}class Ls extends Tt{constructor(){super(R.DOT)}}class So extends l{constructor(y){super("w:spacing"),this.root.push(new h({val:D(y)}))}}class WR extends l{constructor(y){super("w:color"),this.root.push(new h({val:M(y)}))}}class UR extends l{constructor(y){super("w:highlight"),this.root.push(new h({val:y}))}}class zR extends l{constructor(y){super("w:highlightCs"),this.root.push(new h({val:y}))}}class Tb extends u{constructor(){super(...arguments),this.xmlKeys={ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"}}}class au extends l{constructor(y,$){if(super("w:rFonts"),typeof y=="string"){const ne=y;this.root.push(new Tb({ascii:ne,cs:ne,eastAsia:ne,hAnsi:ne,hint:$}))}else{const ne=y;this.root.push(new Tb(ne))}}}class Eb extends l{constructor(y){super("w:vertAlign"),this.root.push(new h({val:y}))}}class jR extends Eb{constructor(){super("superscript")}}class HR extends Eb{constructor(){super("subscript")}}(function(w){w.SINGLE="single",w.WORDS="words",w.DOUBLE="double",w.THICK="thick",w.DOTTED="dotted",w.DOTTEDHEAVY="dottedHeavy",w.DASH="dash",w.DASHEDHEAVY="dashedHeavy",w.DASHLONG="dashLong",w.DASHLONGHEAVY="dashLongHeavy",w.DOTDASH="dotDash",w.DASHDOTHEAVY="dashDotHeavy",w.DOTDOTDASH="dotDotDash",w.DASHDOTDOTHEAVY="dashDotDotHeavy",w.WAVE="wave",w.WAVYHEAVY="wavyHeavy",w.WAVYDOUBLE="wavyDouble"})(Q||(Q={}));class Cb extends l{constructor(y=Q.SINGLE,$){super("w:u"),this.root.push(new h({val:y,color:$===void 0?void 0:M($)}))}}class Fi extends c{constructor(y){var $,ne;if(super("w:rPr"),!y)return;y.bold!==void 0&&this.push(new k("w:b",y.bold)),(y.boldComplexScript===void 0&&y.bold!==void 0||y.boldComplexScript)&&this.push(new k("w:bCs",($=y.boldComplexScript)!==null&&$!==void 0?$:y.bold)),y.italics!==void 0&&this.push(new k("w:i",y.italics)),(y.italicsComplexScript===void 0&&y.italics!==void 0||y.italicsComplexScript)&&this.push(new k("w:iCs",(ne=y.italicsComplexScript)!==null&&ne!==void 0?ne:y.italics)),y.underline&&this.push(new Cb(y.underline.type,y.underline.color)),y.emphasisMark&&this.push(new ja(y.emphasisMark.type)),y.color&&this.push(new WR(y.color)),y.size!==void 0&&this.push(new j("w:sz",y.size));const ye=y.sizeComplexScript===void 0||y.sizeComplexScript===!0?y.size:y.sizeComplexScript;ye&&this.push(new j("w:szCs",ye)),y.rightToLeft!==void 0&&this.push(new k("w:rtl",y.rightToLeft)),y.smallCaps!==void 0?this.push(new k("w:smallCaps",y.smallCaps)):y.allCaps!==void 0&&this.push(new k("w:caps",y.allCaps)),y.strike!==void 0&&this.push(new k("w:strike",y.strike)),y.doubleStrike!==void 0&&this.push(new k("w:dstrike",y.doubleStrike)),y.subScript&&this.push(new HR),y.superScript&&this.push(new jR),y.style&&this.push(new V("w:rStyle",y.style)),y.font&&(typeof y.font=="string"?this.push(new au(y.font)):"name"in y.font?this.push(new au(y.font.name,y.font.hint)):this.push(new au(y.font))),y.highlight&&this.push(new UR(y.highlight));const we=y.highlightComplexScript===void 0||y.highlightComplexScript===!0?y.highlight:y.highlightComplexScript;we&&this.push(new zR(we)),y.characterSpacing&&this.push(new So(y.characterSpacing)),y.emboss!==void 0&&this.push(new k("w:emboss",y.emboss)),y.imprint!==void 0&&this.push(new k("w:imprint",y.imprint)),y.shading&&this.push(new ot(y.shading)),y.revision&&this.push(new Ib(y.revision))}push(y){this.root.push(y)}}class Ib extends l{constructor(y){super("w:rPrChange"),this.root.push(new Ve({id:y.id,author:y.author,date:y.date})),this.addChildElement(new Fi(y))}}class GR extends u{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class Xd extends l{constructor(y){super("w:t"),this.root.push(new GR({space:he.PRESERVE})),this.root.push(y)}}(function(w){w.CURRENT="CURRENT",w.TOTAL_PAGES="TOTAL_PAGES",w.TOTAL_PAGES_IN_SECTION="TOTAL_PAGES_IN_SECTION"})(F||(F={}));class $n extends l{constructor(y){if(super("w:r"),this.properties=new Fi(y),this.root.push(this.properties),y.break)for(let $=0;$<y.break;$++)this.root.push(new st);if(y.children)for(const $ of y.children)if(typeof $!="string")this.root.push($);else switch($){case F.CURRENT:this.root.push(new N),this.root.push(new ce),this.root.push(new z),this.root.push(new te);break;case F.TOTAL_PAGES:this.root.push(new N),this.root.push(new Oe),this.root.push(new z),this.root.push(new te);break;case F.TOTAL_PAGES_IN_SECTION:this.root.push(new N),this.root.push(new ze),this.root.push(new z),this.root.push(new te);break;default:this.root.push(new Xd($))}else y.text&&this.root.push(new Xd(y.text))}}class Ha extends $n{constructor(y){if(typeof y=="string")return super({}),this.root.push(new Xd(y)),this;super(y)}}class VR extends u{constructor(){super(...arguments),this.xmlKeys={char:"w:char",symbolfont:"w:font"}}}class Rb extends l{constructor(y="",$="Wingdings"){super("w:sym"),this.root.push(new VR({char:y,symbolfont:$}))}}class XR extends $n{constructor(y){if(typeof y=="string")return super({}),void this.root.push(new Rb(y));super(y),this.root.push(new Rb(y.char,y.symbolfont))}}let YR=0;const ZR=w=>Math.floor(w/25.4*72*20),cr=w=>Math.floor(72*w*20),Ga=()=>++YR,Va=()=>((w=21)=>{let y="",$=w;for(;$--;)y+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return y})().toLowerCase();var lu,cu,Ns,uu,hu,To,Yd,Xa,Zd,qd,fu,Kd,Jd,hi,Ya,ep,tp,np,rp,ip,sp,Za,op,ap;(function(w){w.CHARACTER="character",w.COLUMN="column",w.INSIDE_MARGIN="insideMargin",w.LEFT_MARGIN="leftMargin",w.MARGIN="margin",w.OUTSIDE_MARGIN="outsideMargin",w.PAGE="page",w.RIGHT_MARGIN="rightMargin"})(lu||(lu={})),function(w){w.BOTTOM_MARGIN="bottomMargin",w.INSIDE_MARGIN="insideMargin",w.LINE="line",w.MARGIN="margin",w.OUTSIDE_MARGIN="outsideMargin",w.PAGE="page",w.PARAGRAPH="paragraph",w.TOP_MARGIN="topMargin"}(cu||(cu={}));class qR extends u{constructor(){super(...arguments),this.xmlKeys={x:"x",y:"y"}}}class Qb extends l{constructor(){super("wp:simplePos"),this.root.push(new qR({x:0,y:0}))}}class Pb extends l{constructor(y){super("wp:align"),this.root.push(y)}}class Db extends l{constructor(y){super("wp:posOffset"),this.root.push(y.toString())}}class KR extends u{constructor(){super(...arguments),this.xmlKeys={relativeFrom:"relativeFrom"}}}class Lb extends l{constructor(y){if(super("wp:positionH"),this.root.push(new KR({relativeFrom:y.relative||lu.PAGE})),y.align)this.root.push(new Pb(y.align));else{if(y.offset===void 0)throw new Error("There is no configuration provided for floating position (Align or offset)");this.root.push(new Db(y.offset))}}}class JR extends u{constructor(){super(...arguments),this.xmlKeys={relativeFrom:"relativeFrom"}}}class Nb extends l{constructor(y){if(super("wp:positionV"),this.root.push(new JR({relativeFrom:y.relative||cu.PAGE})),y.align)this.root.push(new Pb(y.align));else{if(y.offset===void 0)throw new Error("There is no configuration provided for floating position (Align or offset)");this.root.push(new Db(y.offset))}}}class eQ extends u{constructor(){super(...arguments),this.xmlKeys={uri:"uri"}}}class tQ extends u{constructor(){super(...arguments),this.xmlKeys={embed:"r:embed",cstate:"cstate"}}}class nQ extends l{constructor(y){super("a:blip"),this.root.push(new tQ({embed:`rId{${y.fileName}}`,cstate:"none"}))}}class rQ extends l{constructor(){super("a:srcRect")}}class iQ extends l{constructor(){super("a:fillRect")}}class sQ extends l{constructor(){super("a:stretch"),this.root.push(new iQ)}}class oQ extends l{constructor(y){super("pic:blipFill"),this.root.push(new nQ(y)),this.root.push(new rQ),this.root.push(new sQ)}}class aQ extends u{constructor(){super(...arguments),this.xmlKeys={noChangeAspect:"noChangeAspect",noChangeArrowheads:"noChangeArrowheads"}}}class lQ extends l{constructor(){super("a:picLocks"),this.root.push(new aQ({noChangeAspect:1,noChangeArrowheads:1}))}}class cQ extends l{constructor(){super("pic:cNvPicPr"),this.root.push(new lQ)}}class uQ extends u{constructor(){super(...arguments),this.xmlKeys={id:"id",name:"name",descr:"descr"}}}class hQ extends l{constructor(){super("pic:cNvPr"),this.root.push(new uQ({id:0,name:"",descr:""}))}}class fQ extends l{constructor(){super("pic:nvPicPr"),this.root.push(new hQ),this.root.push(new cQ)}}class dQ extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns:pic"}}}class pQ extends u{constructor(){super(...arguments),this.xmlKeys={cx:"cx",cy:"cy"}}}class mQ extends l{constructor(y,$){super("a:ext"),this.attributes=new pQ({cx:y,cy:$}),this.root.push(this.attributes)}}class gQ extends u{constructor(){super(...arguments),this.xmlKeys={x:"x",y:"y"}}}class yQ extends l{constructor(){super("a:off"),this.root.push(new gQ({x:0,y:0}))}}class OQ extends u{constructor(){super(...arguments),this.xmlKeys={flipVertical:"flipV",flipHorizontal:"flipH",rotation:"rot"}}}class bQ extends l{constructor(y){var $,ne;super("a:xfrm"),this.root.push(new OQ({flipVertical:($=y.flip)===null||$===void 0?void 0:$.vertical,flipHorizontal:(ne=y.flip)===null||ne===void 0?void 0:ne.horizontal,rotation:y.rotation})),this.extents=new mQ(y.emus.x,y.emus.y),this.root.push(new yQ),this.root.push(this.extents)}}class vQ extends l{constructor(){super("a:avLst")}}class wQ extends u{constructor(){super(...arguments),this.xmlKeys={prst:"prst"}}}class AQ extends l{constructor(){super("a:prstGeom"),this.root.push(new wQ({prst:"rect"})),this.root.push(new vQ)}}class _Q extends u{constructor(){super(...arguments),this.xmlKeys={bwMode:"bwMode"}}}class xQ extends l{constructor(y){super("pic:spPr"),this.root.push(new _Q({bwMode:"auto"})),this.form=new bQ(y),this.root.push(this.form),this.root.push(new AQ)}}class kQ extends l{constructor(y,$){super("pic:pic"),this.root.push(new dQ({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.root.push(new fQ),this.root.push(new oQ(y)),this.root.push(new xQ($))}}class SQ extends l{constructor(y,$){super("a:graphicData"),this.root.push(new eQ({uri:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.pic=new kQ(y,$),this.root.push(this.pic)}}class TQ extends u{constructor(){super(...arguments),this.xmlKeys={a:"xmlns:a"}}}class Bb extends l{constructor(y,$){super("a:graphic"),this.root.push(new TQ({a:"http://schemas.openxmlformats.org/drawingml/2006/main"})),this.data=new SQ(y,$),this.root.push(this.data)}}(function(w){w[w.NONE=0]="NONE",w[w.SQUARE=1]="SQUARE",w[w.TIGHT=2]="TIGHT",w[w.TOP_AND_BOTTOM=3]="TOP_AND_BOTTOM"})(Ns||(Ns={})),function(w){w.BOTH_SIDES="bothSides",w.LEFT="left",w.RIGHT="right",w.LARGEST="largest"}(uu||(uu={}));class lp extends l{constructor(){super("wp:wrapNone")}}class EQ extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR",wrapText:"wrapText"}}}class Mb extends l{constructor(y,$={top:0,bottom:0,left:0,right:0}){super("wp:wrapSquare"),this.root.push(new EQ({wrapText:y.side||uu.BOTH_SIDES,distT:$.top,distB:$.bottom,distL:$.left,distR:$.right}))}}class CQ extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB"}}}class $b extends l{constructor(y={top:0,bottom:0}){super("wp:wrapTight"),this.root.push(new CQ({distT:y.top,distB:y.bottom}))}}class IQ extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB"}}}class Fb extends l{constructor(y={top:0,bottom:0}){super("wp:wrapTopAndBottom"),this.root.push(new IQ({distT:y.top,distB:y.bottom}))}}class RQ extends u{constructor(){super(...arguments),this.xmlKeys={id:"id",name:"name",descr:"descr"}}}class Wb extends l{constructor(){super("wp:docPr"),this.root.push(new RQ({id:0,name:"",descr:""}))}}class QQ extends u{constructor(){super(...arguments),this.xmlKeys={b:"b",l:"l",r:"r",t:"t"}}}class Ub extends l{constructor(){super("wp:effectExtent"),this.root.push(new QQ({b:0,l:0,r:0,t:0}))}}class PQ extends u{constructor(){super(...arguments),this.xmlKeys={cx:"cx",cy:"cy"}}}class zb extends l{constructor(y,$){super("wp:extent"),this.attributes=new PQ({cx:y,cy:$}),this.root.push(this.attributes)}}class DQ extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns:a",noChangeAspect:"noChangeAspect"}}}class LQ extends l{constructor(){super("a:graphicFrameLocks"),this.root.push(new DQ({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/main",noChangeAspect:1}))}}class jb extends l{constructor(){super("wp:cNvGraphicFramePr"),this.root.push(new LQ)}}class NQ extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR",allowOverlap:"allowOverlap",behindDoc:"behindDoc",layoutInCell:"layoutInCell",locked:"locked",relativeHeight:"relativeHeight",simplePos:"simplePos"}}}class BQ extends l{constructor(y,$,ne){super("wp:anchor");const ye=Object.assign({allowOverlap:!0,behindDocument:!1,lockAnchor:!1,layoutInCell:!0,verticalPosition:{},horizontalPosition:{}},ne.floating);if(this.root.push(new NQ({distT:ye.margins&&ye.margins.top||0,distB:ye.margins&&ye.margins.bottom||0,distL:ye.margins&&ye.margins.left||0,distR:ye.margins&&ye.margins.right||0,simplePos:"0",allowOverlap:ye.allowOverlap===!0?"1":"0",behindDoc:ye.behindDocument===!0?"1":"0",locked:ye.lockAnchor===!0?"1":"0",layoutInCell:ye.layoutInCell===!0?"1":"0",relativeHeight:ye.zIndex?ye.zIndex:$.emus.y})),this.root.push(new Qb),this.root.push(new Lb(ye.horizontalPosition)),this.root.push(new Nb(ye.verticalPosition)),this.root.push(new zb($.emus.x,$.emus.y)),this.root.push(new Ub),ne.floating!==void 0&&ne.floating.wrap!==void 0)switch(ne.floating.wrap.type){case Ns.SQUARE:this.root.push(new Mb(ne.floating.wrap,ne.floating.margins));break;case Ns.TIGHT:this.root.push(new $b(ne.floating.margins));break;case Ns.TOP_AND_BOTTOM:this.root.push(new Fb(ne.floating.margins));break;case Ns.NONE:default:this.root.push(new lp)}else this.root.push(new lp);this.root.push(new Wb),this.root.push(new jb),this.root.push(new Bb(y,$))}}class MQ extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR"}}}class $Q extends l{constructor(y,$){super("wp:inline"),this.root.push(new MQ({distT:0,distB:0,distL:0,distR:0})),this.extent=new zb($.emus.x,$.emus.y),this.graphic=new Bb(y,$),this.root.push(this.extent),this.root.push(new Ub),this.root.push(new Wb),this.root.push(new jb),this.root.push(this.graphic)}}class Hb extends l{constructor(y,$={}){super("w:drawing"),$.floating?this.root.push(new BQ(y,y.transformation,$)):(this.inline=new $Q(y,y.transformation),this.root.push(this.inline))}}class FQ extends $n{constructor(y){super({}),this.key=`${Va()}.png`;const $=typeof y.data=="string"?this.convertDataURIToBinary(y.data):y.data;this.imageData={stream:$,fileName:this.key,transformation:{pixels:{x:Math.round(y.transformation.width),y:Math.round(y.transformation.height)},emus:{x:Math.round(9525*y.transformation.width),y:Math.round(9525*y.transformation.height)},flip:y.transformation.flip,rotation:y.transformation.rotation?6e4*y.transformation.rotation:void 0}};const ne=new Hb(this.imageData,{floating:y.floating});this.root.push(ne)}prepForXml(y){return y.file.Media.addImage(this.key,this.imageData),super.prepForXml(y)}convertDataURIToBinary(y){const $=";base64,",ne=y.indexOf($)+$.length;return typeof atob=="function"?new Uint8Array(atob(y.substring(ne)).split("").map(ye=>ye.charCodeAt(0))):new(i(764)).Buffer(y,"base64")}}class WQ extends u{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class UQ extends l{constructor(y){super("w:instrText"),this.root.push(new WQ({space:he.PRESERVE})),this.root.push(`SEQ ${y}`)}}class zQ extends $n{constructor(y){super({}),this.root.push(new N(!0)),this.root.push(new UQ(y)),this.root.push(new z),this.root.push(new te)}}class jQ extends l{constructor(){super("w:tab")}}class HQ extends u{constructor(){super(...arguments),this.xmlKeys={instr:"w:instr"}}}class Gb extends l{constructor(y,$){super("w:fldSimple"),this.root.push(new HQ({instr:y})),$!==void 0&&this.root.push(new Ha($))}}class GQ extends Gb{constructor(y){super(` MERGEFIELD ${y} `,`\xAB${y}\xBB`)}}(function(w){w.COLUMN="column",w.PAGE="page"})(hu||(hu={}));class Vb extends l{constructor(y){super("w:br"),this.root.push(new h({type:y}))}}class VQ extends $n{constructor(){super({}),this.root.push(new Vb(hu.PAGE))}}class XQ extends $n{constructor(){super({}),this.root.push(new Vb(hu.COLUMN))}}class Xb extends l{constructor(){super("w:pageBreakBefore")}}(function(w){w.AT_LEAST="atLeast",w.EXACTLY="exactly",w.AUTO="auto"})(To||(To={}));class YQ extends u{constructor(){super(...arguments),this.xmlKeys={after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule"}}}class Yb extends l{constructor(y){super("w:spacing"),this.root.push(new YQ(y))}}(function(w){w.HEADING_1="Heading1",w.HEADING_2="Heading2",w.HEADING_3="Heading3",w.HEADING_4="Heading4",w.HEADING_5="Heading5",w.HEADING_6="Heading6",w.TITLE="Title"})(Yd||(Yd={}));class qa extends l{constructor(y){super("w:pStyle"),this.root.push(new h({val:y}))}}class du extends l{constructor(y,$,ne){super("w:tabs"),this.root.push(new qb(y,$,ne))}}(function(w){w.LEFT="left",w.RIGHT="right",w.CENTER="center",w.BAR="bar",w.CLEAR="clear",w.DECIMAL="decimal",w.END="end",w.NUM="num",w.START="start"})(Xa||(Xa={})),function(w){w.DOT="dot",w.HYPHEN="hyphen",w.MIDDLE_DOT="middleDot",w.NONE="none",w.UNDERSCORE="underscore"}(Zd||(Zd={})),function(w){w[w.MAX=9026]="MAX"}(qd||(qd={}));class Zb extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val",pos:"w:pos",leader:"w:leader"}}}class qb extends l{constructor(y,$,ne){super("w:tab"),this.root.push(new Zb({val:y,pos:$,leader:ne}))}}class cp extends l{constructor(y,$){super("w:numPr"),this.root.push(new ZQ($)),this.root.push(new qQ(y))}}class ZQ extends l{constructor(y){if(super("w:ilvl"),y>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new h({val:y}))}}class qQ extends l{constructor(y){super("w:numId"),this.root.push(new h({val:typeof y=="string"?`{${y}}`:y}))}}class KQ extends u{constructor(){super(...arguments),this.xmlKeys={id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"}}}(function(w){w.EXTERNAL="External"})(fu||(fu={}));class JQ extends l{constructor(y,$,ne,ye){super("Relationship"),this.root.push(new KQ({id:y,type:$,target:ne,targetMode:ye}))}}class eP extends u{constructor(){super(...arguments),this.xmlKeys={id:"r:id",history:"w:history",anchor:"w:anchor"}}}(function(w){w.INTERNAL="INTERNAL",w.EXTERNAL="EXTERNAL"})(Kd||(Kd={}));class up extends l{constructor(y,$,ne){super("w:hyperlink"),this.linkId=$;const ye={history:1,anchor:ne||void 0,id:ne?void 0:`rId${this.linkId}`},we=new eP(ye);this.root.push(we),y.forEach(Le=>{this.root.push(Le)})}}class tP extends up{constructor(y){super(y.children,Va(),y.anchor)}}class Kb{constructor(y){this.options=y}}class nP extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id",name:"w:name"}}}class rP extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id"}}}class Jb{constructor(y){const $=Ga();this.start=new ev(y.id,$),this.children=y.children,this.end=new tv($)}}class ev extends l{constructor(y,$){super("w:bookmarkStart");const ne=new nP({name:y,id:$});this.root.push(ne)}}class tv extends l{constructor(y){super("w:bookmarkEnd");const $=new rP({id:y});this.root.push($)}}class nv extends l{constructor(y){super("w:outlineLvl"),this.level=y,this.root.push(new h({val:y}))}}class iP extends u{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class sP extends l{constructor(y,$={}){super("w:instrText"),this.root.push(new iP({space:he.PRESERVE}));let ne=`PAGEREF ${y}`;$.hyperlink&&(ne=`${ne} \\h`),$.useRelativePosition&&(ne=`${ne} \\p`),this.root.push(ne)}}class oP extends $n{constructor(y,$={}){super({children:[new N(!0),new sP(y,$),new te]})}}(function(w){w.BOTH="both",w.BOTTOM="bottom",w.CENTER="center",w.TOP="top"})(Jd||(Jd={}));class rv extends u{constructor(){super(...arguments),this.xmlKeys={verticalAlign:"w:val"}}}class hp extends l{constructor(y){super("w:vAlign"),this.root.push(new rv({verticalAlign:y}))}}(function(w){w.DEFAULT="default",w.FIRST="first",w.EVEN="even"})(hi||(hi={}));class aP extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",id:"r:id"}}}(function(w){w.HEADER="w:headerReference",w.FOOTER="w:footerReference"})(Ya||(Ya={}));class pu extends l{constructor(y,$){super(y),this.root.push(new aP({type:$.type||hi.DEFAULT,id:`rId${$.id}`}))}}class iv extends u{constructor(){super(...arguments),this.xmlKeys={space:"w:space",count:"w:num",separate:"w:sep",equalWidth:"w:equalWidth"}}}class sv extends l{constructor({space:y,count:$,separate:ne,equalWidth:ye,children:we}){super("w:cols"),this.root.push(new iv({space:y===void 0?void 0:X(y),count:$===void 0?void 0:v($),separate:ne,equalWidth:ye})),!ye&&we&&we.forEach(Le=>this.addChildElement(Le))}}(function(w){w.DEFAULT="default",w.LINES="lines",w.LINES_AND_CHARS="linesAndChars",w.SNAP_TO_CHARS="snapToChars"})(ep||(ep={}));class ov extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",linePitch:"w:linePitch",charSpace:"w:charSpace"}}}class av extends l{constructor(y,$,ne){super("w:docGrid"),this.root.push(new ov({type:ne,linePitch:v(y),charSpace:$?v($):void 0}))}}(function(w){w.NEW_PAGE="newPage",w.NEW_SECTION="newSection",w.CONTINUOUS="continuous"})(tp||(tp={}));class lv extends u{constructor(){super(...arguments),this.xmlKeys={countBy:"w:countBy",start:"w:start",restart:"w:restart",distance:"w:distance"}}}class cv extends l{constructor({countBy:y,start:$,restart:ne,distance:ye}){super("w:lnNumType"),this.root.push(new lv({countBy:y===void 0?void 0:v(y),start:$===void 0?void 0:v($),restart:ne,distance:ye===void 0?void 0:X(ye)}))}}(function(w){w.ALL_PAGES="allPages",w.FIRST_PAGE="firstPage",w.NOT_FIRST_PAGE="notFirstPage"})(np||(np={})),function(w){w.PAGE="page",w.TEXT="text"}(rp||(rp={})),function(w){w.BACK="back",w.FRONT="front"}(ip||(ip={}));class uv extends u{constructor(){super(...arguments),this.xmlKeys={display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"}}}class hv extends c{constructor(y){super("w:pgBorders"),y&&(y.pageBorders?this.root.push(new uv({display:y.pageBorders.display,offsetFrom:y.pageBorders.offsetFrom,zOrder:y.pageBorders.zOrder})):this.root.push(new uv({})),y.pageBorderTop&&this.root.push(new oe("w:top",y.pageBorderTop)),y.pageBorderLeft&&this.root.push(new oe("w:left",y.pageBorderLeft)),y.pageBorderBottom&&this.root.push(new oe("w:bottom",y.pageBorderBottom)),y.pageBorderRight&&this.root.push(new oe("w:right",y.pageBorderRight)))}}class fv extends u{constructor(){super(...arguments),this.xmlKeys={top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter"}}}class dv extends l{constructor(y,$,ne,ye,we,Le,Ge){super("w:pgMar"),this.root.push(new fv({top:D(y),right:X($),bottom:D(ne),left:X(ye),header:X(we),footer:X(Le),gutter:X(Ge)}))}}(function(w){w.HYPHEN="hyphen",w.PERIOD="period",w.COLON="colon",w.EM_DASH="emDash",w.EN_DASH="endash"})(sp||(sp={}));class pv extends u{constructor(){super(...arguments),this.xmlKeys={start:"w:start",formatType:"w:fmt",separator:"w:chapSep"}}}class mv extends l{constructor({start:y,formatType:$,separator:ne}){super("w:pgNumType"),this.root.push(new pv({start:y===void 0?void 0:v(y),formatType:$,separator:ne}))}}(function(w){w.PORTRAIT="portrait",w.LANDSCAPE="landscape"})(Za||(Za={}));class gv extends u{constructor(){super(...arguments),this.xmlKeys={width:"w:w",height:"w:h",orientation:"w:orient"}}}class yv extends l{constructor(y,$,ne){super("w:pgSz");const ye=ne===Za.LANDSCAPE,we=X(y),Le=X($);this.root.push(new gv({width:ye?Le:we,height:ye?we:Le,orientation:ne}))}}(function(w){w.LEFT_TO_RIGHT_TOP_TO_BOTTOM="lrTb",w.TOP_TO_BOTTOM_RIGHT_TO_LEFT="tbRl"})(op||(op={}));class lP extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class Ov extends l{constructor(y){super("w:textDirection"),this.root.push(new lP({val:y}))}}(function(w){w.NEXT_PAGE="nextPage",w.NEXT_COLUMN="nextColumn",w.CONTINUOUS="continuous",w.EVEN_PAGE="evenPage",w.ODD_PAGE="oddPage"})(ap||(ap={}));class bv extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class vv extends l{constructor(y){super("w:type"),this.root.push(new bv({val:y}))}}const Wi={TOP:"1in",RIGHT:"1in",BOTTOM:"1in",LEFT:"1in",HEADER:708,FOOTER:708,GUTTER:0},mu={WIDTH:11906,HEIGHT:16838,ORIENTATION:Za.PORTRAIT};class wv extends l{constructor({page:{size:{width:y=mu.WIDTH,height:$=mu.HEIGHT,orientation:ne=mu.ORIENTATION}={},margin:{top:ye=Wi.TOP,right:we=Wi.RIGHT,bottom:Le=Wi.BOTTOM,left:Ge=Wi.LEFT,header:nt=Wi.HEADER,footer:De=Wi.FOOTER,gutter:mt=Wi.GUTTER}={},pageNumbers:Jt={},borders:zt,textDirection:an}={},grid:{linePitch:fr=360,charSpace:Fn,type:Mp}={},headerWrapperGroup:EL={},footerWrapperGroup:CL={},lineNumbers:Ow,titlePage:bw,verticalAlign:vw,column:ww,type:Aw}={}){super("w:sectPr"),this.addHeaderFooterGroup(Ya.HEADER,EL),this.addHeaderFooterGroup(Ya.FOOTER,CL),Aw&&this.root.push(new vv(Aw)),this.root.push(new yv(y,$,ne)),this.root.push(new dv(ye,we,Le,Ge,nt,De,mt)),zt&&this.root.push(new hv(zt)),Ow&&this.root.push(new cv(Ow)),this.root.push(new mv(Jt)),ww&&this.root.push(new sv(ww)),vw&&this.root.push(new hp(vw)),bw!==void 0&&this.root.push(new k("w:titlePg",bw)),an&&this.root.push(new Ov(an)),this.root.push(new av(fr,Fn,Mp))}addHeaderFooterGroup(y,$){$.default&&this.root.push(new pu(y,{type:hi.DEFAULT,id:$.default.View.ReferenceId})),$.first&&this.root.push(new pu(y,{type:hi.FIRST,id:$.first.View.ReferenceId})),$.even&&this.root.push(new pu(y,{type:hi.EVEN,id:$.even.View.ReferenceId}))}}class Av extends l{constructor(){super("w:body"),this.sections=[]}addSection(y){const $=this.sections.pop();this.root.push(this.createSectionParagraph($)),this.sections.push(new wv(y))}prepForXml(y){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(y)}push(y){this.root.push(y)}createSectionParagraph(y){const $=new Ui({}),ne=new Bs({});return ne.push(y),$.addChildElement(ne),$}}class _v extends u{constructor(){super(...arguments),this.xmlKeys={width:"w:w",space:"w:space"}}}class cP extends l{constructor({width:y,space:$}){super("w:col"),this.root.push(new _v({width:X(y),space:$===void 0?void 0:X($)}))}}class Eo extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"}}}class xv extends u{constructor(){super(...arguments),this.xmlKeys={color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"}}}class kv extends l{constructor(y){super("w:background"),this.root.push(new xv({color:y.color===void 0?void 0:M(y.color),themeColor:y.themeColor,themeShade:y.themeShade===void 0?void 0:E(y.themeShade),themeTint:y.themeTint===void 0?void 0:E(y.themeTint)}))}}class uP extends l{constructor(y){super("w:document"),this.root.push(new Eo({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.body=new Av,this.root.push(new kv(y.background)),this.root.push(this.body)}add(y){return this.body.push(y),this}get Body(){return this.body}}class hP extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns"}}}class Ka extends l{constructor(){super("Relationships"),this.root.push(new hP({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}addRelationship(y){this.root.push(y)}createRelationship(y,$,ne,ye){const we=new JQ(`rId${y}`,$,ne,ye);return this.addRelationship(we),we}get RelationshipCount(){return this.root.length-1}}class Sv{constructor(y){this.document=new uP(y),this.relationships=new Ka}get View(){return this.document}get Relationships(){return this.relationships}}var fp,dp,pp;(function(w){w.NONE="none",w.DROP="drop",w.MARGIN="margin"})(fp||(fp={})),function(w){w.MARGIN="margin",w.PAGE="page",w.TEXT="text"}(dp||(dp={})),function(w){w.AROUND="around",w.AUTO="auto",w.NONE="none",w.NOT_BESIDE="notBeside",w.THROUGH="through",w.TIGHT="tight"}(pp||(pp={}));class Tv extends u{constructor(){super(...arguments),this.xmlKeys={anchorLock:"w:anchorLock",dropCap:"w:dropCap",width:"w:w",height:"w:h",x:"w:x",y:"w:y",anchorHorizontal:"w:hAnchor",anchorVertical:"w:vAnchor",spaceHorizontal:"w:hSpace",spaceVertical:"w:vSpace",rule:"w:hRule",alignmentX:"w:xAlign",alignmentY:"w:yAlign",lines:"w:lines",wrap:"w:wrap"}}}class Ev extends l{constructor(y){var $,ne;super("w:framePr"),this.root.push(new Tv({anchorLock:y.anchorLock,dropCap:y.dropCap,width:y.width,height:y.height,x:y.position.x,y:y.position.y,anchorHorizontal:y.anchor.horizontal,anchorVertical:y.anchor.vertical,spaceHorizontal:($=y.space)===null||$===void 0?void 0:$.horizontal,spaceVertical:(ne=y.space)===null||ne===void 0?void 0:ne.vertical,rule:y.rule,alignmentX:y.alignment.x,alignmentY:y.alignment.y,lines:y.lines,wrap:y.wrap}))}}class Bs extends c{constructor(y){var $,ne;if(super("w:pPr"),this.numberingReferences=[],!y)return this;if(y.heading&&this.push(new qa(y.heading)),y.bullet&&this.push(new qa("ListParagraph")),y.numbering&&(y.style||y.heading||y.numbering.custom||this.push(new qa("ListParagraph"))),y.style&&this.push(new qa(y.style)),y.keepNext!==void 0&&this.push(new k("w:keepNext",y.keepNext)),y.keepLines!==void 0&&this.push(new k("w:keepLines",y.keepLines)),y.pageBreakBefore&&this.push(new Xb),y.frame&&this.push(new Ev(y.frame)),y.widowControl!==void 0&&this.push(new k("w:widowControl",y.widowControl)),y.bullet&&this.push(new cp(1,y.bullet.level)),y.numbering&&(this.numberingReferences.push({reference:y.numbering.reference,instance:($=y.numbering.instance)!==null&&$!==void 0?$:0}),this.push(new cp(`${y.numbering.reference}-${(ne=y.numbering.instance)!==null&&ne!==void 0?ne:0}`,y.numbering.level))),y.border&&this.push(new de(y.border)),y.thematicBreak&&this.push(new pe),y.shading&&this.push(new ot(y.shading)),y.rightTabStop&&this.push(new du(Xa.RIGHT,y.rightTabStop)),y.tabStops)for(const ye of y.tabStops)this.push(new du(ye.type,ye.position,ye.leader));y.leftTabStop&&this.push(new du(Xa.LEFT,y.leftTabStop)),y.bidirectional!==void 0&&this.push(new k("w:bidi",y.bidirectional)),y.spacing&&this.push(new Yb(y.spacing)),y.indent&&this.push(new Fe(y.indent)),y.contextualSpacing!==void 0&&this.push(new k("w:contextualSpacing",y.contextualSpacing)),y.alignment&&this.push(new me(y.alignment)),y.outlineLevel!==void 0&&this.push(new nv(y.outlineLevel)),y.suppressLineNumbers!==void 0&&this.push(new k("w:suppressLineNumbers",y.suppressLineNumbers))}push(y){this.root.push(y)}prepForXml(y){if(y.viewWrapper instanceof Sv)for(const $ of this.numberingReferences)y.file.Numbering.createConcreteNumberingInstance($.reference,$.instance);return super.prepForXml(y)}}class Ui extends l{constructor(y){if(super("w:p"),typeof y=="string")return this.properties=new Bs({}),this.root.push(this.properties),this.root.push(new Ha(y)),this;if(this.properties=new Bs(y),this.root.push(this.properties),y.text&&this.root.push(new Ha(y.text)),y.children)for(const $ of y.children)if($ instanceof Jb){this.root.push($.start);for(const ne of $.children)this.root.push(ne);this.root.push($.end)}else this.root.push($)}prepForXml(y){for(const $ of this.root)if($ instanceof Kb){const ne=this.root.indexOf($),ye=new up($.options.children,Va());y.viewWrapper.Relationships.createRelationship(ye.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",$.options.link,fu.EXTERNAL),this.root[ne]=ye}return super.prepForXml(y)}addRunToFront(y){return this.root.splice(1,0,y),this}}class fP extends l{constructor(y){super("m:oMath");for(const $ of y.children)this.root.push($)}}class dP extends l{constructor(y){super("m:t"),this.root.push(y)}}class pP extends l{constructor(y){super("m:r"),this.root.push(new dP(y))}}class Cv extends l{constructor(y){super("m:den");for(const $ of y)this.root.push($)}}class Iv extends l{constructor(y){super("m:num");for(const $ of y)this.root.push($)}}class mP extends l{constructor(y){super("m:f"),this.root.push(new Iv(y.numerator)),this.root.push(new Cv(y.denominator))}}class gP extends u{constructor(){super(...arguments),this.xmlKeys={accent:"m:val"}}}class Rv extends l{constructor(y){super("m:chr"),this.root.push(new gP({accent:y}))}}class ur extends l{constructor(y){super("m:e");for(const $ of y)this.root.push($)}}class yP extends u{constructor(){super(...arguments),this.xmlKeys={value:"m:val"}}}class Qv extends l{constructor(){super("m:limLoc"),this.root.push(new yP({value:"undOvr"}))}}class OP extends u{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"}}}class bP extends l{constructor(){super("m:subHide"),this.root.push(new OP({hide:1}))}}class vP extends u{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"}}}class wP extends l{constructor(){super("m:supHide"),this.root.push(new vP({hide:1}))}}class Pv extends l{constructor(y,$,ne){super("m:naryPr"),this.root.push(new Rv(y)),this.root.push(new Qv),$||this.root.push(new wP),ne||this.root.push(new bP)}}class Ja extends l{constructor(y){super("m:sub");for(const $ of y)this.root.push($)}}class el extends l{constructor(y){super("m:sup");for(const $ of y)this.root.push($)}}class AP extends l{constructor(y){super("m:nary"),this.root.push(new Pv("\u2211",!!y.superScript,!!y.subScript)),y.subScript&&this.root.push(new Ja(y.subScript)),y.superScript&&this.root.push(new el(y.superScript)),this.root.push(new ur(y.children))}}class Dv extends l{constructor(){super("m:sSupPr")}}class _P extends l{constructor(y){super("m:sSup"),this.root.push(new Dv),this.root.push(new ur(y.children)),this.root.push(new el(y.superScript))}}class Lv extends l{constructor(){super("m:sSubPr")}}class xP extends l{constructor(y){super("m:sSub"),this.root.push(new Lv),this.root.push(new ur(y.children)),this.root.push(new Ja(y.subScript))}}class Nv extends l{constructor(){super("m:sSubSupPr")}}class kP extends l{constructor(y){super("m:sSubSup"),this.root.push(new Nv),this.root.push(new ur(y.children)),this.root.push(new Ja(y.subScript)),this.root.push(new el(y.superScript))}}class Bv extends l{constructor(){super("m:sPrePr")}}class SP extends l{constructor(y){super("m:sPre"),this.root.push(new Bv),this.root.push(new ur(y.children)),this.root.push(new Ja(y.subScript)),this.root.push(new el(y.superScript))}}const TP="";class Mv extends l{constructor(y){if(super("m:deg"),y)for(const $ of y)this.root.push($)}}class EP extends u{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"}}}class CP extends l{constructor(){super("m:degHide"),this.root.push(new EP({hide:1}))}}class $v extends l{constructor(y){super("m:radPr"),y||this.root.push(new CP)}}class IP extends l{constructor(y){super("m:rad"),this.root.push(new $v(!!y.degree)),this.root.push(new Mv(y.degree)),this.root.push(new ur(y.children))}}class Fv extends l{constructor(y){super("m:fName");for(const $ of y)this.root.push($)}}class Wv extends l{constructor(){super("m:funcPr")}}class RP extends l{constructor(y){super("m:func"),this.root.push(new Wv),this.root.push(new Fv(y.name)),this.root.push(new ur(y.children))}}class QP extends u{constructor(){super(...arguments),this.xmlKeys={character:"m:val"}}}class PP extends l{constructor(y){super("m:begChr"),this.root.push(new QP({character:y}))}}class DP extends u{constructor(){super(...arguments),this.xmlKeys={character:"m:val"}}}class LP extends l{constructor(y){super("m:endChr"),this.root.push(new DP({character:y}))}}class gu extends l{constructor(y){super("m:dPr"),y&&(this.root.push(new PP(y.beginningCharacter)),this.root.push(new LP(y.endingCharacter)))}}class NP extends l{constructor(y){super("m:d"),this.root.push(new gu),this.root.push(new ur(y.children))}}class BP extends l{constructor(y){super("m:d"),this.root.push(new gu({beginningCharacter:"[",endingCharacter:"]"})),this.root.push(new ur(y.children))}}class MP extends l{constructor(y){super("m:d"),this.root.push(new gu({beginningCharacter:"{",endingCharacter:"}"})),this.root.push(new ur(y.children))}}class $P extends l{constructor(y){super("m:d"),this.root.push(new gu({beginningCharacter:"\u2329",endingCharacter:"\u232A"})),this.root.push(new ur(y.children))}}class FP extends l{constructor(y){super("w:tblGrid");for(const $ of y)this.root.push(new UP($))}}class WP extends u{constructor(){super(...arguments),this.xmlKeys={w:"w:w"}}}class UP extends l{constructor(y){super("w:gridCol"),y!==void 0&&this.root.push(new WP({w:X(y)}))}}var Co,yu,tl,mp;(function(w){w.AUTO="auto",w.DXA="dxa",w.NIL="nil",w.PERCENTAGE="pct"})(Co||(Co={}));class zP extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",size:"w:w"}}}class zi extends l{constructor(y,{type:$=Co.AUTO,size:ne}){super(y);let ye=ne;$===Co.PERCENTAGE&&typeof ne=="number"&&(ye=`${ne}%`),this.root.push(new zP({type:$,size:K(ye)}))}}(function(w){w.TABLE="w:tblCellMar",w.TABLE_CELL="w:tcMar"})(yu||(yu={}));class Uv extends c{constructor(y,{marginUnitType:$=Co.DXA,top:ne,left:ye,bottom:we,right:Le}){super(y),ne!==void 0&&this.root.push(new zi("w:top",{type:$,size:ne})),ye!==void 0&&this.root.push(new zi("w:left",{type:$,size:ye})),we!==void 0&&this.root.push(new zi("w:bottom",{type:$,size:we})),Le!==void 0&&this.root.push(new zi("w:right",{type:$,size:Le}))}}class zv extends c{constructor(y){super("w:tcBorders"),y.top&&this.root.push(new oe("w:top",y.top)),y.start&&this.root.push(new oe("w:start",y.start)),y.left&&this.root.push(new oe("w:left",y.left)),y.bottom&&this.root.push(new oe("w:bottom",y.bottom)),y.end&&this.root.push(new oe("w:end",y.end)),y.right&&this.root.push(new oe("w:right",y.right))}}class jP extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class jv extends l{constructor(y){super("w:gridSpan"),this.root.push(new jP({val:v(y)}))}}(function(w){w.CONTINUE="continue",w.RESTART="restart"})(tl||(tl={}));class HP extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class gp extends l{constructor(y){super("w:vMerge"),this.root.push(new HP({val:y}))}}(function(w){w.BOTTOM_TO_TOP_LEFT_TO_RIGHT="btLr",w.LEFT_TO_RIGHT_TOP_TO_BOTTOM="lrTb",w.TOP_TO_BOTTOM_RIGHT_TO_LEFT="tbRl"})(mp||(mp={}));class GP extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class Hv extends l{constructor(y){super("w:textDirection"),this.root.push(new GP({val:y}))}}class VP extends c{constructor(y){super("w:tcPr"),y.width&&this.root.push(new zi("w:tcW",y.width)),y.columnSpan&&this.root.push(new jv(y.columnSpan)),y.verticalMerge?this.root.push(new gp(y.verticalMerge)):y.rowSpan&&y.rowSpan>1&&this.root.push(new gp(tl.RESTART)),y.borders&&this.root.push(new zv(y.borders)),y.shading&&this.root.push(new ot(y.shading)),y.margins&&this.root.push(new Uv(yu.TABLE_CELL,y.margins)),y.textDirection&&this.root.push(new Hv(y.textDirection)),y.verticalAlign&&this.root.push(new hp(y.verticalAlign))}}class yp extends l{constructor(y){super("w:tc"),this.options=y,this.root.push(new VP(y));for(const $ of y.children)this.root.push($)}prepForXml(y){return this.root[this.root.length-1]instanceof Ui||this.root.push(new Ui({})),super.prepForXml(y)}}const Io={style:be.NONE,size:0,color:"auto"},Ro={style:be.SINGLE,size:4,color:"auto"};class Op extends l{constructor(y){super("w:tblBorders"),y.top?this.root.push(new oe("w:top",y.top)):this.root.push(new oe("w:top",Ro)),y.left?this.root.push(new oe("w:left",y.left)):this.root.push(new oe("w:left",Ro)),y.bottom?this.root.push(new oe("w:bottom",y.bottom)):this.root.push(new oe("w:bottom",Ro)),y.right?this.root.push(new oe("w:right",y.right)):this.root.push(new oe("w:right",Ro)),y.insideHorizontal?this.root.push(new oe("w:insideH",y.insideHorizontal)):this.root.push(new oe("w:insideH",Ro)),y.insideVertical?this.root.push(new oe("w:insideV",y.insideVertical)):this.root.push(new oe("w:insideV",Ro))}}var bp;Op.NONE={top:Io,bottom:Io,left:Io,right:Io,insideHorizontal:Io,insideVertical:Io},function(w){w.NEVER="never",w.OVERLAP="overlap"}(bp||(bp={}));class XP extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class Gv extends l{constructor(y){super("w:tblOverlap"),this.root.push(new XP({val:y}))}}var vp,wp,Ap,_p,xp,Ou;(function(w){w.MARGIN="margin",w.PAGE="page",w.TEXT="text"})(vp||(vp={})),function(w){w.CENTER="center",w.INSIDE="inside",w.LEFT="left",w.OUTSIDE="outside",w.RIGHT="right"}(wp||(wp={})),function(w){w.CENTER="center",w.INSIDE="inside",w.BOTTOM="bottom",w.OUTSIDE="outside",w.INLINE="inline",w.TOP="top"}(Ap||(Ap={}));class Vv extends u{constructor(){super(...arguments),this.xmlKeys={horizontalAnchor:"w:horzAnchor",verticalAnchor:"w:vertAnchor",absoluteHorizontalPosition:"w:tblpX",relativeHorizontalPosition:"w:tblpXSpec",absoluteVerticalPosition:"w:tblpY",relativeVerticalPosition:"w:tblpYSpec",bottomFromText:"w:bottomFromText",topFromText:"w:topFromText",leftFromText:"w:leftFromText",rightFromText:"w:rightFromText"}}}class Xv extends l{constructor(y){var{leftFromText:$,rightFromText:ne,topFromText:ye,bottomFromText:we,absoluteHorizontalPosition:Le,absoluteVerticalPosition:Ge}=y,nt=function(De,mt){var Jt={};for(var zt in De)Object.prototype.hasOwnProperty.call(De,zt)&&mt.indexOf(zt)<0&&(Jt[zt]=De[zt]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function"){var an=0;for(zt=Object.getOwnPropertySymbols(De);an<zt.length;an++)mt.indexOf(zt[an])<0&&Object.prototype.propertyIsEnumerable.call(De,zt[an])&&(Jt[zt[an]]=De[zt[an]])}return Jt}(y,["leftFromText","rightFromText","topFromText","bottomFromText","absoluteHorizontalPosition","absoluteVerticalPosition"]);super("w:tblpPr"),this.root.push(new Vv(Object.assign({leftFromText:$===void 0?void 0:X($),rightFromText:ne===void 0?void 0:X(ne),topFromText:ye===void 0?void 0:X(ye),bottomFromText:we===void 0?void 0:X(we),absoluteHorizontalPosition:Le===void 0?void 0:D(Le),absoluteVerticalPosition:Ge===void 0?void 0:D(Ge)},nt))),nt.overlap&&this.root.push(new Gv(nt.overlap))}}(function(w){w.AUTOFIT="autofit",w.FIXED="fixed"})(_p||(_p={}));class YP extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type"}}}class Yv extends l{constructor(y){super("w:tblLayout"),this.root.push(new YP({type:y}))}}class Zv extends c{constructor(y){super("w:tblPr"),y.style&&this.root.push(new V("w:tblStyle",y.style)),y.float&&this.root.push(new Xv(y.float)),y.visuallyRightToLeft!==void 0&&this.root.push(new k("w:bidiVisual",y.visuallyRightToLeft)),y.width&&this.root.push(new zi("w:tblW",y.width)),y.alignment&&this.root.push(new me(y.alignment)),y.indent&&this.root.push(new zi("w:tblInd",y.indent)),y.borders&&this.root.push(new Op(y.borders)),y.shading&&this.root.push(new ot(y.shading)),y.layout&&this.root.push(new Yv(y.layout)),y.cellMargin&&this.root.push(new Uv(yu.TABLE,y.cellMargin))}}class ZP extends l{constructor({rows:y,width:$,columnWidths:ne=Array(Math.max(...y.map(zt=>zt.CellCount))).fill(100),margins:ye,indent:we,float:Le,layout:Ge,style:nt,borders:De,alignment:mt,visuallyRightToLeft:Jt}){super("w:tbl"),this.root.push(new Zv({borders:De!=null?De:{},width:$!=null?$:{size:100},indent:we,float:Le,layout:Ge,style:nt,alignment:mt,cellMargin:ye,visuallyRightToLeft:Jt})),this.root.push(new FP(ne));for(const zt of y)this.root.push(zt);y.forEach((zt,an)=>{if(an===y.length-1)return;let fr=0;zt.cells.forEach(Fn=>{if(Fn.options.rowSpan&&Fn.options.rowSpan>1){const Mp=new yp({rowSpan:Fn.options.rowSpan-1,columnSpan:Fn.options.columnSpan,borders:Fn.options.borders,children:[],verticalMerge:tl.CONTINUE});y[an+1].addCellToColumnIndex(Mp,fr)}fr+=Fn.options.columnSpan||1})})}}(function(w){w.AUTO="auto",w.ATLEAST="atLeast",w.EXACT="exact"})(xp||(xp={}));class qv extends u{constructor(){super(...arguments),this.xmlKeys={value:"w:val",rule:"w:hRule"}}}class Kv extends l{constructor(y,$){super("w:trHeight"),this.root.push(new qv({value:X(y),rule:$}))}}class Jv extends c{constructor(y){super("w:trPr"),y.cantSplit!==void 0&&this.root.push(new k("w:cantSplit",y.cantSplit)),y.tableHeader!==void 0&&this.root.push(new k("w:tblHeader",y.tableHeader)),y.height&&this.root.push(new Kv(y.height.value,y.height.rule))}}class qP extends l{constructor(y){super("w:tr"),this.options=y,this.root.push(new Jv(y));for(const $ of y.children)this.root.push($)}get CellCount(){return this.options.children.length}get cells(){return this.root.filter(y=>y instanceof yp)}addCellToIndex(y,$){this.root.splice($+1,0,y)}addCellToColumnIndex(y,$){const ne=this.columnIndexToRootIndex($,!0);this.addCellToIndex(y,ne-1)}rootIndexToColumnIndex(y){if(y<1||y>=this.root.length)throw new Error("cell 'rootIndex' should between 1 to "+(this.root.length-1));let $=0;for(let ne=1;ne<y;ne++)$+=this.root[ne].options.columnSpan||1;return $}columnIndexToRootIndex(y,$=!1){if(y<0)throw new Error("cell 'columnIndex' should not less than zero");let ne=0,ye=1;for(;ne<=y;){if(ye>=this.root.length){if($)return this.root.length;throw new Error("cell 'columnIndex' should not great than "+(ne-1))}const we=this.root[ye];ye+=1,ne+=we&&we.options.columnSpan||1}return ye-1}}class KP extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns",vt:"xmlns:vt"}}}class JP extends l{constructor(){super("Properties"),this.root.push(new KP({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class eD extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns"}}}class tD extends u{constructor(){super(...arguments),this.xmlKeys={contentType:"ContentType",extension:"Extension"}}}class Ms extends l{constructor(y,$){super("Default"),this.root.push(new tD({contentType:y,extension:$}))}}class nD extends u{constructor(){super(...arguments),this.xmlKeys={contentType:"ContentType",partName:"PartName"}}}class Wr extends l{constructor(y,$){super("Override"),this.root.push(new nD({contentType:y,partName:$}))}}class rD extends l{constructor(){super("Types"),this.root.push(new eD({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Ms("image/png","png")),this.root.push(new Ms("image/jpeg","jpeg")),this.root.push(new Ms("image/jpeg","jpg")),this.root.push(new Ms("image/bmp","bmp")),this.root.push(new Ms("image/gif","gif")),this.root.push(new Ms("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Ms("application/xml","xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new Wr("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml"))}addFooter(y){this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${y}.xml`))}addHeader(y){this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${y}.xml`))}}class iD extends l{constructor(y){super("cp:coreProperties"),this.root.push(new Eo({cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"})),y.title&&this.root.push(new q("dc:title",y.title)),y.subject&&this.root.push(new q("dc:subject",y.subject)),y.creator&&this.root.push(new q("dc:creator",y.creator)),y.keywords&&this.root.push(new q("cp:keywords",y.keywords)),y.description&&this.root.push(new q("dc:description",y.description)),y.lastModifiedBy&&this.root.push(new q("cp:lastModifiedBy",y.lastModifiedBy)),y.revision&&this.root.push(new q("cp:revision",String(y.revision))),this.root.push(new ew("dcterms:created")),this.root.push(new ew("dcterms:modified"))}}class ew extends l{constructor(y){super(y),this.root.push(new Eo({type:"dcterms:W3CDTF"})),this.root.push(ge(new Date))}}class sD extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns",vt:"xmlns:vt"}}}class oD extends u{constructor(){super(...arguments),this.xmlKeys={fmtid:"fmtid",pid:"pid",name:"name"}}}class aD extends l{constructor(y,$){super("property"),this.root.push(new oD({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:y.toString(),name:$.name})),this.root.push(new lD($.value))}}class lD extends l{constructor(y){super("vt:lpwstr"),this.root.push(y)}}class cD extends l{constructor(y){super("Properties"),this.properties=[],this.root.push(new sD({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const $ of y)this.addCustomProperty($)}prepForXml(y){return this.properties.forEach($=>this.root.push($)),super.prepForXml(y)}addCustomProperty(y){this.properties.push(new aD(this.nextId++,y))}}class uD extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"}}}class hD extends g{constructor(y,$){super("w:ftr",$),this.refId=y,$||this.root.push(new uD({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(y){this.root.push(y)}}class kp{constructor(y,$,ne){this.media=y,this.footer=new hD($,ne),this.relationships=new Ka}add(y){this.footer.add(y)}addChildElement(y){this.footer.addChildElement(y)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class fD extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",id:"w:id"}}}class dD extends l{constructor(){super("w:footnoteRef")}}class pD extends $n{constructor(){super({style:"FootnoteReference"}),this.root.push(new dD)}}(function(w){w.SEPERATOR="separator",w.CONTINUATION_SEPERATOR="continuationSeparator"})(Ou||(Ou={}));class Sp extends l{constructor(y){super("w:footnote"),this.root.push(new fD({type:y.type,id:y.id}));for(let $=0;$<y.children.length;$++){const ne=y.children[$];$===0&&ne.addRunToFront(new pD),this.root.push(ne)}}}class mD extends l{constructor(){super("w:continuationSeparator")}}class gD extends $n{constructor(){super({}),this.root.push(new mD)}}class yD extends l{constructor(){super("w:separator")}}class OD extends $n{constructor(){super({}),this.root.push(new yD)}}class bD extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"}}}class tw extends l{constructor(){super("w:footnotes"),this.root.push(new bD({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const y=new Sp({id:-1,type:Ou.SEPERATOR,children:[new Ui({spacing:{after:0,line:240,lineRule:To.AUTO},children:[new OD]})]});this.root.push(y);const $=new Sp({id:0,type:Ou.CONTINUATION_SEPERATOR,children:[new Ui({spacing:{after:0,line:240,lineRule:To.AUTO},children:[new gD]})]});this.root.push($)}createFootNote(y,$){const ne=new Sp({id:y,children:$});this.root.push(ne)}}class vD{constructor(){this.footnotess=new tw,this.relationships=new Ka}get View(){return this.footnotess}get Relationships(){return this.relationships}}class wD extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"}}}class AD extends g{constructor(y,$){super("w:hdr",$),this.refId=y,$||this.root.push(new wD({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(y){this.root.push(y)}}class Tp{constructor(y,$,ne){this.media=y,this.header=new AD($,ne),this.relationships=new Ka}add(y){return this.header.add(y),this}addChildElement(y){this.header.addChildElement(y)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class Ep{constructor(){this.map=new Map}addMedia(y,$){const ne=`${Va()}.png`,ye={stream:typeof y=="string"?this.convertDataURIToBinary(y):y,fileName:ne,transformation:{pixels:{x:Math.round($.width),y:Math.round($.height)},emus:{x:Math.round(9525*$.width),y:Math.round(9525*$.height)},flip:$.flip,rotation:$.rotation?6e4*$.rotation:void 0}};return this.map.set(ne,ye),ye}addImage(y,$){this.map.set(y,$)}get Array(){return Array.from(this.map.values())}convertDataURIToBinary(y){const $=";base64,",ne=y.indexOf($)+$.length;return typeof atob=="function"?new Uint8Array(atob(y.substring(ne)).split("").map(ye=>ye.charCodeAt(0))):new(i(764)).Buffer(y,"base64")}}const _D="";var hr,Cp;(function(w){w.BULLET="bullet",w.CARDINAL_TEXT="cardinalText",w.CHICAGO="chicago",w.DECIMAL="decimal",w.DECIMAL_ENCLOSED_CIRCLE="decimalEnclosedCircle",w.DECIMAL_ENCLOSED_FULLSTOP="decimalEnclosedFullstop",w.DECIMAL_ENCLOSED_PARENTHESES="decimalEnclosedParen",w.DECIMAL_ZERO="decimalZero",w.LOWER_LETTER="lowerLetter",w.LOWER_ROMAN="lowerRoman",w.NONE="none",w.ORDINAL_TEXT="ordinalText",w.UPPER_LETTER="upperLetter",w.UPPER_ROMAN="upperRoman"})(hr||(hr={}));class xD extends u{constructor(){super(...arguments),this.xmlKeys={ilvl:"w:ilvl",tentative:"w15:tentative"}}}class kD extends l{constructor(y){super("w:numFmt"),this.root.push(new h({val:y}))}}class SD extends l{constructor(y){super("w:lvlText"),this.root.push(new h({val:y}))}}class TD extends l{constructor(y){super("w:lvlJc"),this.root.push(new h({val:y}))}}(function(w){w.NOTHING="nothing",w.SPACE="space",w.TAB="tab"})(Cp||(Cp={}));class ED extends l{constructor(y){super("w:suff"),this.root.push(new h({val:y}))}}class Ip extends l{constructor({level:y,format:$,text:ne,alignment:ye=le.START,start:we=1,style:Le,suffix:Ge}){if(super("w:lvl"),this.root.push(new H("w:start",v(we))),$&&this.root.push(new kD($)),Ge&&this.root.push(new ED(Ge)),ne&&this.root.push(new SD(ne)),this.root.push(new TD(ye)),this.paragraphProperties=new Bs(Le&&Le.paragraph),this.runProperties=new Fi(Le&&Le.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),y>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new xD({ilvl:v(y),tentative:1}))}}class nw extends Ip{constructor(y){super(y)}}class CD extends Ip{}class ID extends l{constructor(y){super("w:multiLevelType"),this.root.push(new h({val:y}))}}class RD extends u{constructor(){super(...arguments),this.xmlKeys={abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"}}}class Rp extends l{constructor(y,$){super("w:abstractNum"),this.root.push(new RD({abstractNumId:v(y),restartNumberingAfterBreak:0})),this.root.push(new ID("hybridMultilevel")),this.id=y;for(const ne of $)this.root.push(new nw(ne))}}class QD extends l{constructor(y){super("w:abstractNumId"),this.root.push(new h({val:y}))}}class PD extends u{constructor(){super(...arguments),this.xmlKeys={numId:"w:numId"}}}class Qp extends l{constructor(y){super("w:num"),this.numId=y.numId,this.reference=y.reference,this.instance=y.instance,this.root.push(new PD({numId:v(y.numId)})),this.root.push(new QD(v(y.abstractNumId))),y.overrideLevel&&this.root.push(new rw(y.overrideLevel.num,y.overrideLevel.start))}}class DD extends u{constructor(){super(...arguments),this.xmlKeys={ilvl:"w:ilvl"}}}class rw extends l{constructor(y,$){super("w:lvlOverride"),this.root.push(new DD({ilvl:y})),$!==void 0&&this.root.push(new ND($))}}class LD extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class ND extends l{constructor(y){super("w:startOverride"),this.root.push(new LD({val:y}))}}class iw extends l{constructor(y){super("w:numbering"),this.abstractNumberingMap=new Map,this.concreteNumberingMap=new Map,this.referenceConfigMap=new Map,this.root.push(new Eo({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const $=new Rp(Ga(),[{level:0,format:hr.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:cr(.5),hanging:cr(.25)}}}},{level:1,format:hr.BULLET,text:"\u25CB",alignment:le.LEFT,style:{paragraph:{indent:{left:cr(1),hanging:cr(.25)}}}},{level:2,format:hr.BULLET,text:"\u25A0",alignment:le.LEFT,style:{paragraph:{indent:{left:2160,hanging:cr(.25)}}}},{level:3,format:hr.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:2880,hanging:cr(.25)}}}},{level:4,format:hr.BULLET,text:"\u25CB",alignment:le.LEFT,style:{paragraph:{indent:{left:3600,hanging:cr(.25)}}}},{level:5,format:hr.BULLET,text:"\u25A0",alignment:le.LEFT,style:{paragraph:{indent:{left:4320,hanging:cr(.25)}}}},{level:6,format:hr.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:5040,hanging:cr(.25)}}}},{level:7,format:hr.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:5760,hanging:cr(.25)}}}},{level:8,format:hr.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:6480,hanging:cr(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new Qp({numId:1,abstractNumId:$.id,reference:"default-bullet-numbering",instance:0,overrideLevel:{num:0,start:1}})),this.abstractNumberingMap.set("default-bullet-numbering",$);for(const ne of y.config)this.abstractNumberingMap.set(ne.reference,new Rp(Ga(),ne.levels)),this.referenceConfigMap.set(ne.reference,ne.levels)}prepForXml(y){for(const $ of this.abstractNumberingMap.values())this.root.push($);for(const $ of this.concreteNumberingMap.values())this.root.push($);return super.prepForXml(y)}createConcreteNumberingInstance(y,$){const ne=this.abstractNumberingMap.get(y);if(!ne)return;const ye=`${y}-${$}`;if(this.concreteNumberingMap.has(ye))return;const we={numId:Ga(),abstractNumId:ne.id,reference:y,instance:$,overrideLevel:{num:0,start:1}},Le=this.referenceConfigMap.get(y),Ge=Le&&Le[0].start;Ge&&Number.isInteger(Ge)&&(we.overrideLevel={num:0,start:Ge}),this.concreteNumberingMap.set(ye,new Qp(we))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class BD extends u{constructor(){super(...arguments),this.xmlKeys={version:"w:val",name:"w:name",uri:"w:uri"}}}class MD extends l{constructor(y){super("w:compatSetting"),this.root.push(new BD({version:y,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class $D extends l{constructor(y){super("w:compat"),y.doNotExpandShiftReturn!==void 0&&this.root.push(new k("w:doNotExpandShiftReturn",y.doNotExpandShiftReturn)),y.version&&this.root.push(new MD(y.version))}}class FD extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"}}}class WD extends l{constructor(y){super("w:settings"),this.root.push(new FD({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new k("w:displayBackgroundShape",!0)),y.trackRevisions!==void 0&&this.root.push(new k("w:trackRevisions",y.trackRevisions)),y.evenAndOddHeaders!==void 0&&this.root.push(new k("w:evenAndOddHeaders",y.evenAndOddHeaders)),y.updateFields!==void 0&&this.root.push(new k("w:updateFields",y.updateFields)),this.root.push(new $D({version:y.compatabilityModeVersion||15}))}}class sw extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class UD extends l{constructor(y){super("w:name"),this.root.push(new sw({val:y}))}}class zD extends l{constructor(y){super("w:uiPriority"),this.root.push(new sw({val:v(y)}))}}class jD extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"}}}class ow extends l{constructor(y,$){super("w:style"),this.root.push(new jD(y)),$.name&&this.root.push(new UD($.name)),$.basedOn&&this.root.push(new V("w:basedOn",$.basedOn)),$.next&&this.root.push(new V("w:next",$.next)),$.link&&this.root.push(new V("w:link",$.link)),$.uiPriority!==void 0&&this.root.push(new zD($.uiPriority)),$.semiHidden!==void 0&&this.root.push(new k("w:semiHidden",$.semiHidden)),$.unhideWhenUsed!==void 0&&this.root.push(new k("w:unhideWhenUsed",$.unhideWhenUsed)),$.quickFormat!==void 0&&this.root.push(new k("w:qFormat",$.quickFormat))}}class nl extends ow{constructor(y){super({type:"paragraph",styleId:y.id},y),this.paragraphProperties=new Bs(y.paragraph),this.runProperties=new Fi(y.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class rl extends ow{constructor(y){super({type:"character",styleId:y.id},Object.assign({uiPriority:99,unhideWhenUsed:!0},y)),this.runProperties=new Fi(y.run),this.root.push(this.runProperties)}}class ji extends nl{constructor(y){super(Object.assign(Object.assign({},y),{basedOn:"Normal",next:"Normal",quickFormat:!0}))}}class HD extends ji{constructor(y){super(Object.assign(Object.assign({},y),{id:"Title",name:"Title"}))}}class GD extends ji{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading1",name:"Heading 1"}))}}class VD extends ji{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading2",name:"Heading 2"}))}}class XD extends ji{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading3",name:"Heading 3"}))}}class YD extends ji{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading4",name:"Heading 4"}))}}class ZD extends ji{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading5",name:"Heading 5"}))}}class qD extends ji{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading6",name:"Heading 6"}))}}class KD extends ji{constructor(y){super(Object.assign(Object.assign({},y),{id:"Strong",name:"Strong"}))}}class JD extends nl{constructor(y){super(Object.assign(Object.assign({},y),{id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0}))}}class eL extends nl{constructor(y){super(Object.assign(Object.assign({},y),{id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:To.AUTO}},run:{size:20}}))}}class tL extends rl{constructor(y){super(Object.assign(Object.assign({},y),{id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}}))}}class nL extends rl{constructor(y){super(Object.assign(Object.assign({},y),{id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}}))}}class rL extends rl{constructor(y){super(Object.assign(Object.assign({},y),{id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:Q.SINGLE}}}))}}class bu extends l{constructor(y){if(super("w:styles"),y.initialStyles&&this.root.push(y.initialStyles),y.importedStyles)for(const $ of y.importedStyles)this.root.push($);if(y.paragraphStyles)for(const $ of y.paragraphStyles)this.root.push(new nl($));if(y.characterStyles)for(const $ of y.characterStyles)this.root.push(new rl($))}}class aw extends l{constructor(y){super("w:pPrDefault"),this.root.push(new Bs(y))}}class lw extends l{constructor(y){super("w:rPrDefault"),this.root.push(new Fi(y))}}class cw extends l{constructor(y){super("w:docDefaults"),this.runPropertiesDefaults=new lw(y.run),this.paragraphPropertiesDefaults=new aw(y.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class uw{newInstance(y){const $=(0,f.xml2js)(y,{compact:!1});let ne;for(const we of $.elements||[])we.name==="w:styles"&&(ne=we);if(ne===void 0)throw new Error("can not find styles element");const ye=ne.elements||[];return new bu({initialStyles:new b(ne.attributes),importedStyles:ye.map(we=>p(we))})}}class hw{newInstance(y={}){var $;return{initialStyles:new Eo({mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",Ignorable:"w14 w15"}),importedStyles:[new cw(($=y.document)!==null&&$!==void 0?$:{}),new HD(Object.assign({run:{size:56}},y.title)),new GD(Object.assign({run:{color:"2E74B5",size:32}},y.heading1)),new VD(Object.assign({run:{color:"2E74B5",size:26}},y.heading2)),new XD(Object.assign({run:{color:"1F4D78",size:24}},y.heading3)),new YD(Object.assign({run:{color:"2E74B5",italics:!0}},y.heading4)),new ZD(Object.assign({run:{color:"2E74B5"}},y.heading5)),new qD(Object.assign({run:{color:"1F4D78"}},y.heading6)),new KD(Object.assign({run:{bold:!0}},y.strong)),new JD(y.listParagraph||{}),new rL(y.hyperlink||{}),new tL(y.footnoteReference||{}),new eL(y.footnoteText||{}),new nL(y.footnoteTextChar||{})]}}}class fw{constructor(y,$={}){var ne,ye,we,Le,Ge,nt;if(this.currentRelationshipId=1,this.headers=[],this.footers=[],this.coreProperties=new iD(Object.assign(Object.assign({},y),{creator:(ne=y.creator)!==null&&ne!==void 0?ne:"Un-named",revision:(ye=y.revision)!==null&&ye!==void 0?ye:1,lastModifiedBy:(we=y.lastModifiedBy)!==null&&we!==void 0?we:"Un-named"})),this.numbering=new iw(y.numbering?y.numbering:{config:[]}),this.fileRelationships=new Ka,this.customProperties=new cD((Le=y.customProperties)!==null&&Le!==void 0?Le:[]),this.appProperties=new JP,this.footnotesWrapper=new vD,this.contentTypes=new rD,this.documentWrapper=new Sv({background:y.background||{}}),this.settings=new WD({compatabilityModeVersion:y.compatabilityModeVersion,evenAndOddHeaders:!!y.evenAndOddHeaderAndFooters,trackRevisions:(Ge=y.features)===null||Ge===void 0?void 0:Ge.trackRevisions,updateFields:(nt=y.features)===null||nt===void 0?void 0:nt.updateFields}),this.media=$.template&&$.template.media?$.template.media:new Ep,$.template&&(this.currentRelationshipId=$.template.currentRelationshipId+1),$.template&&y.externalStyles)throw Error("can not use both template and external styles");if($.template){const De=new uw;this.styles=De.newInstance($.template.styles)}else if(y.externalStyles){const De=new uw;this.styles=De.newInstance(y.externalStyles)}else if(y.styles){const De=new hw().newInstance(y.styles.default);this.styles=new bu(Object.assign(Object.assign({},De),y.styles))}else{const De=new hw;this.styles=new bu(De.newInstance())}if(this.addDefaultRelationships(),$.template&&$.template.headers)for(const De of $.template.headers)this.addHeaderToDocument(De.header,De.type);if($.template&&$.template.footers)for(const De of $.template.footers)this.addFooterToDocument(De.footer,De.type);for(const De of y.sections)this.addSection(De);if(y.footnotes)for(const De in y.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(De),y.footnotes[De].children)}addSection({headers:y={},footers:$={},children:ne,properties:ye}){this.documentWrapper.View.Body.addSection(Object.assign(Object.assign({},ye),{headerWrapperGroup:{default:y.default?this.createHeader(y.default):void 0,first:y.first?this.createHeader(y.first):void 0,even:y.even?this.createHeader(y.even):void 0},footerWrapperGroup:{default:$.default?this.createFooter($.default):void 0,first:$.first?this.createFooter($.first):void 0,even:$.even?this.createFooter($.even):void 0}}));for(const we of ne)this.documentWrapper.View.add(we)}createHeader(y){const $=new Tp(this.media,this.currentRelationshipId++);for(const ne of y.options.children)$.add(ne);return this.addHeaderToDocument($),$}createFooter(y){const $=new kp(this.media,this.currentRelationshipId++);for(const ne of y.options.children)$.add(ne);return this.addFooterToDocument($),$}addHeaderToDocument(y,$=hi.DEFAULT){this.headers.push({header:y,type:$}),this.documentWrapper.Relationships.createRelationship(y.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(y,$=hi.DEFAULT){this.footers.push({footer:y,type:$}),this.documentWrapper.Relationships.createRelationship(y.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(y=>y.header)}get Footers(){return this.footers.map(y=>y.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}}const iL="";class sL extends u{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class oL extends l{constructor(y={}){super("w:instrText"),this.properties=y,this.root.push(new sL({space:he.PRESERVE}));let $="TOC";this.properties.captionLabel&&($=`${$} \\a "${this.properties.captionLabel}"`),this.properties.entriesFromBookmark&&($=`${$} \\b "${this.properties.entriesFromBookmark}"`),this.properties.captionLabelIncludingNumbers&&($=`${$} \\c "${this.properties.captionLabelIncludingNumbers}"`),this.properties.sequenceAndPageNumbersSeparator&&($=`${$} \\d "${this.properties.sequenceAndPageNumbersSeparator}"`),this.properties.tcFieldIdentifier&&($=`${$} \\f "${this.properties.tcFieldIdentifier}"`),this.properties.hyperlink&&($=`${$} \\h`),this.properties.tcFieldLevelRange&&($=`${$} \\l "${this.properties.tcFieldLevelRange}"`),this.properties.pageNumbersEntryLevelsRange&&($=`${$} \\n "${this.properties.pageNumbersEntryLevelsRange}"`),this.properties.headingStyleRange&&($=`${$} \\o "${this.properties.headingStyleRange}"`),this.properties.entryAndPageNumberSeparator&&($=`${$} \\p "${this.properties.entryAndPageNumberSeparator}"`),this.properties.seqFieldIdentifierForPrefix&&($=`${$} \\s "${this.properties.seqFieldIdentifierForPrefix}"`),this.properties.stylesWithLevels&&this.properties.stylesWithLevels.length&&($=`${$} \\t "${this.properties.stylesWithLevels.map(ne=>`${ne.styleName},${ne.level}`).join(",")}"`),this.properties.useAppliedParagraphOutlineLevel&&($=`${$} \\u`),this.properties.preserveTabInEntries&&($=`${$} \\w`),this.properties.preserveNewLineInEntries&&($=`${$} \\x`),this.properties.hideTabAndPageNumbersInWebView&&($=`${$} \\z`),this.root.push($)}}class aL extends l{constructor(){super("w:sdtContent")}}class lL extends u{constructor(){super(...arguments),this.xmlKeys={alias:"w:val"}}}class cL extends l{constructor(y){super("w:alias"),this.root.push(new lL({alias:y}))}}class uL extends l{constructor(y){super("w:sdtPr"),this.root.push(new cL(y))}}class hL extends l{constructor(y="Table of Contents",$){super("w:sdt"),this.root.push(new uL(y));const ne=new aL,ye=new Ui({children:[new $n({children:[new N(!0),new oL($),new z]})]});ne.addChildElement(ye);const we=new Ui({children:[new $n({children:[new te]})]});ne.addChildElement(we),this.root.push(ne)}}class fL{constructor(y,$){this.styleName=y,this.level=$}}class dL{constructor(y={children:[]}){this.options=y}}class pL{constructor(y={children:[]}){this.options=y}}class dw extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id"}}}class pw extends l{constructor(y){super("w:footnoteReference"),this.root.push(new dw({id:y}))}}class mL extends $n{constructor(y){super({style:"FootnoteReference"}),this.root.push(new pw(y))}}class gL extends l{constructor(y){super("w:ins"),this.root.push(new Ve({id:y.id,author:y.author,date:y.date})),this.addChildElement(new Ha(y))}}class Pp extends u{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class yL extends l{constructor(){super("w:delInstrText"),this.root.push(new Pp({space:he.PRESERVE})),this.root.push("PAGE")}}class OL extends l{constructor(){super("w:delInstrText"),this.root.push(new Pp({space:he.PRESERVE})),this.root.push("NUMPAGES")}}class bL extends l{constructor(){super("w:delInstrText"),this.root.push(new Pp({space:he.PRESERVE})),this.root.push("SECTIONPAGES")}}class vL extends u{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class mw extends l{constructor(y){super("w:delText"),this.root.push(new vL({space:he.PRESERVE})),this.root.push(y)}}class wL extends l{constructor(y){super("w:del"),this.root.push(new Ve({id:y.id,author:y.author,date:y.date})),this.deletedTextRunWrapper=new AL(y),this.addChildElement(this.deletedTextRunWrapper)}}class AL extends l{constructor(y){if(super("w:r"),this.root.push(new Fi(y)),y.children)for(const $ of y.children)if(typeof $!="string")this.root.push($);else switch($){case F.CURRENT:this.root.push(new N),this.root.push(new yL),this.root.push(new z),this.root.push(new te);break;case F.TOTAL_PAGES:this.root.push(new N),this.root.push(new OL),this.root.push(new z),this.root.push(new te);break;case F.TOTAL_PAGES_IN_SECTION:this.root.push(new N),this.root.push(new bL),this.root.push(new z),this.root.push(new te);break;default:this.root.push(new mw($))}else y.text&&this.root.push(new mw(y.text));if(y.break)for(let $=0;$<y.break;$++)this.root.splice(1,0,new st)}}var Dp,Lp,Np;(function(w){w.CENTER="center",w.INSIDE="inside",w.LEFT="left",w.OUTSIDE="outside",w.RIGHT="right"})(Dp||(Dp={})),function(w){w.BOTTOM="bottom",w.CENTER="center",w.INSIDE="inside",w.OUTSIDE="outside",w.TOP="top"}(Lp||(Lp={})),function(w){w.DECIMAL="decimal",w.UPPER_ROMAN="upperRoman",w.LOWER_ROMAN="lowerRoman",w.UPPER_LETTER="upperLetter",w.LOWER_LETTER="lowerLetter",w.ORDINAL="ordinal",w.CARDINAL_TEXT="cardinalText",w.ORDINAL_TEXT="ordinalText",w.HEX="hex",w.CHICAGO="chicago",w.IDEOGRAPH_DIGITAL="ideographDigital",w.JAPANESE_COUNTING="japaneseCounting",w.AIUEO="aiueo",w.IROHA="iroha",w.DECIMAL_FULL_WIDTH="decimalFullWidth",w.DECIMAL_HALF_WIDTH="decimalHalfWidth",w.JAPANESE_LEGAL="japaneseLegal",w.JAPANESE_DIGITAL_TEN_THOUSAND="japaneseDigitalTenThousand",w.DECIMAL_ENCLOSED_CIRCLE="decimalEnclosedCircle",w.DECIMAL_FULL_WIDTH_2="decimalFullWidth2",w.AIUEO_FULL_WIDTH="aiueoFullWidth",w.IROHA_FULL_WIDTH="irohaFullWidth",w.DECIMAL_ZERO="decimalZero",w.BULLET="bullet",w.GANADA="ganada",w.CHOSUNG="chosung",w.DECIMAL_ENCLOSED_FULL_STOP="decimalEnclosedFullstop",w.DECIMAL_ENCLOSED_PAREN="decimalEnclosedParen",w.DECIMAL_ENCLOSED_CIRCLE_CHINESE="decimalEnclosedCircleChinese",w.IDEOGRAPH_ENCLOSED_CIRCLE="ideographEnclosedCircle",w.IDEOGRAPH_TRADITIONAL="ideographTraditional",w.IDEOGRAPH_ZODIAC="ideographZodiac",w.IDEOGRAPH_ZODIAC_TRADITIONAL="ideographZodiacTraditional",w.TAIWANESE_COUNTING="taiwaneseCounting",w.IDEOGRAPH_LEGAL_TRADITIONAL="ideographLegalTraditional",w.TAIWANESE_COUNTING_THOUSAND="taiwaneseCountingThousand",w.TAIWANESE_DIGITAL="taiwaneseDigital",w.CHINESE_COUNTING="chineseCounting",w.CHINESE_LEGAL_SIMPLIFIED="chineseLegalSimplified",w.CHINESE_COUNTING_TEN_THOUSAND="chineseCountingThousand",w.KOREAN_DIGITAL="koreanDigital",w.KOREAN_COUNTING="koreanCounting",w.KOREAN_LEGAL="koreanLegal",w.KOREAN_DIGITAL_2="koreanDigital2",w.VIETNAMESE_COUNTING="vietnameseCounting",w.RUSSIAN_LOWER="russianLower",w.RUSSIAN_UPPER="russianUpper",w.NONE="none",w.NUMBER_IN_DASH="numberInDash",w.HEBREW_1="hebrew1",w.HEBREW_2="hebrew2",w.ARABIC_ALPHA="arabicAlpha",w.ARABIC_ABJAD="arabicAbjad",w.HINDI_VOWELS="hindiVowels",w.HINDI_CONSONANTS="hindiConsonants",w.HINDI_NUMBERS="hindiNumbers",w.HINDI_COUNTING="hindiCounting",w.THAI_LETTERS="thaiLetters",w.THAI_NUMBERS="thaiNumbers",w.THAI_COUNTING="thaiCounting",w.BAHT_TEXT="bahtText",w.DOLLAR_TEXT="dollarText"}(Np||(Np={}));var gw=i(733),on=i(479);class _L{format(y,$={}){const ne=y.prepForXml($);if(ne)return ne;throw Error("XMLComponent did not format correctly")}}class xL{replace(y,$,ne){let ye=y;return $.forEach((we,Le)=>{ye=ye.replace(new RegExp(`{${we.fileName}}`,"g"),(ne+Le).toString())}),ye}getMediaData(y,$){return $.Array.filter(ne=>y.search(`{${ne.fileName}}`)>0)}}class kL{replace(y,$){let ne=y;for(const ye of $)ne=ne.replace(new RegExp(`{${ye.reference}-${ye.instance}}`,"g"),ye.numId.toString());return ne}}var Bp=function(w,y,$,ne){return new($||($=Promise))(function(ye,we){function Le(De){try{nt(ne.next(De))}catch(mt){we(mt)}}function Ge(De){try{nt(ne.throw(De))}catch(mt){we(mt)}}function nt(De){var mt;De.done?ye(De.value):(mt=De.value,mt instanceof $?mt:new $(function(Jt){Jt(mt)})).then(Le,Ge)}nt((ne=ne.apply(w,y||[])).next())})};class yw{static toBuffer(y,$){return Bp(this,void 0,void 0,function*(){return yield this.compiler.compile(y,$).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBase64String(y,$){return Bp(this,void 0,void 0,function*(){return yield this.compiler.compile(y,$).generateAsync({type:"base64",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBlob(y,$){return Bp(this,void 0,void 0,function*(){return yield this.compiler.compile(y,$).generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}}yw.compiler=new class{constructor(){this.formatter=new _L,this.imageReplacer=new xL,this.numberingReplacer=new kL}compile(w,y){const $=new gw,ne=this.xmlifyFile(w,y),ye=new Map(Object.entries(ne));for(const[,we]of ye)if(Array.isArray(we))for(const Le of we)$.file(Le.path,Le.data);else $.file(we.path,we.data);for(const we of w.Media.Array){const Le=we.stream;$.file(`word/media/${we.fileName}`,Le)}return $}xmlifyFile(w,y){const $=w.Document.Relationships.RelationshipCount+1,ne=on(this.formatter.format(w.Document.View,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),ye=this.imageReplacer.getMediaData(ne,w.Media);return{Relationships:{data:(()=>(ye.forEach((we,Le)=>{w.Document.Relationships.createRelationship($+Le,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${we.fileName}`)}),on(this.formatter.format(w.Document.Relationships,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{encoding:"UTF-8"}})))(),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const we=this.imageReplacer.replace(ne,ye,$);return this.numberingReplacer.replace(we,w.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const we=on(this.formatter.format(w.Styles,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(we,w.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:on(this.formatter.format(w.CoreProperties,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:on(this.formatter.format(w.Numbering,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:on(this.formatter.format(w.FileRelationships,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:w.Headers.map((we,Le)=>{const Ge=on(this.formatter.format(we.View,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(Ge,w.Media).forEach((nt,De)=>{we.Relationships.createRelationship(De,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${nt.fileName}`)}),{data:on(this.formatter.format(we.Relationships,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${Le+1}.xml.rels`}}),FooterRelationships:w.Footers.map((we,Le)=>{const Ge=on(this.formatter.format(we.View,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(Ge,w.Media).forEach((nt,De)=>{we.Relationships.createRelationship(De,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${nt.fileName}`)}),{data:on(this.formatter.format(we.Relationships,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${Le+1}.xml.rels`}}),Headers:w.Headers.map((we,Le)=>{const Ge=on(this.formatter.format(we.View,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),nt=this.imageReplacer.getMediaData(Ge,w.Media);return{data:this.imageReplacer.replace(Ge,nt,0),path:`word/header${Le+1}.xml`}}),Footers:w.Footers.map((we,Le)=>{const Ge=on(this.formatter.format(we.View,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),nt=this.imageReplacer.getMediaData(Ge,w.Media);return{data:this.imageReplacer.replace(Ge,nt,0),path:`word/footer${Le+1}.xml`}}),ContentTypes:{data:on(this.formatter.format(w.ContentTypes,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:on(this.formatter.format(w.CustomProperties,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:on(this.formatter.format(w.AppProperties,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:on(this.formatter.format(w.FootNotes.View,{viewWrapper:w.FootNotes,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:on(this.formatter.format(w.FootNotes.Relationships,{viewWrapper:w.FootNotes,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:on(this.formatter.format(w.Settings,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"}}}};var Qo=function(w,y,$,ne){return new($||($=Promise))(function(ye,we){function Le(De){try{nt(ne.next(De))}catch(mt){we(mt)}}function Ge(De){try{nt(ne.throw(De))}catch(mt){we(mt)}}function nt(De){var mt;De.done?ye(De.value):(mt=De.value,mt instanceof $?mt:new $(function(Jt){Jt(mt)})).then(Le,Ge)}nt((ne=ne.apply(w,y||[])).next())})};const SL={"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header":"header","http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer":"footer","http://schemas.openxmlformats.org/officeDocument/2006/relationships/image":"image","http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink":"hyperlink"};var vu;(function(w){w.HEADER="header",w.FOOTER="footer",w.IMAGE="image",w.HYPERLINK="hyperlink"})(vu||(vu={}));class TL{extract(y){return Qo(this,void 0,void 0,function*(){const $=yield gw.loadAsync(y),ne=yield $.files["word/document.xml"].async("text"),ye=yield $.files["word/_rels/document.xml.rels"].async("text"),we=this.extractDocumentRefs(ne),Le=this.findReferenceFiles(ye),Ge=new Ep;return{headers:yield this.createHeaders($,we,Le,Ge,0),footers:yield this.createFooters($,we,Le,Ge,we.headers.length),currentRelationshipId:we.footers.length+we.headers.length,styles:yield $.files["word/styles.xml"].async("text"),titlePageIsDefined:this.checkIfTitlePageIsDefined(ne),media:Ge}})}createFooters(y,$,ne,ye,we){return Qo(this,void 0,void 0,function*(){const Le=$.footers.map((Ge,nt)=>Qo(this,void 0,void 0,function*(){const De=ne.find(fr=>fr.id===Ge.id);if(De===null||!De)throw new Error(`Can not find target file for id ${Ge.id}`);const mt=yield y.files[`word/${De.target}`].async("text"),Jt=(0,f.xml2js)(mt,{compact:!1,captureSpacesBetweenElements:!0});if(!Jt.elements)return;const zt=p(Jt.elements.reduce((fr,Fn)=>Fn.name==="w:ftr"?Fn:fr)),an=new kp(ye,we+nt,zt);return yield this.addRelationshipToWrapper(De,y,an,ye),{type:Ge.type,footer:an}})).filter(Ge=>!!Ge);return Promise.all(Le)})}createHeaders(y,$,ne,ye,we){return Qo(this,void 0,void 0,function*(){const Le=$.headers.map((Ge,nt)=>Qo(this,void 0,void 0,function*(){const De=ne.find(fr=>fr.id===Ge.id);if(De===null||!De)throw new Error(`Can not find target file for id ${Ge.id}`);const mt=yield y.files[`word/${De.target}`].async("text"),Jt=(0,f.xml2js)(mt,{compact:!1,captureSpacesBetweenElements:!0});if(!Jt.elements)return;const zt=p(Jt.elements.reduce((fr,Fn)=>Fn.name==="w:hdr"?Fn:fr)),an=new Tp(ye,we+nt,zt);return yield this.addRelationshipToWrapper(De,y,an,ye),{type:Ge.type,header:an}})).filter(Ge=>!!Ge);return Promise.all(Le)})}addRelationshipToWrapper(y,$,ne,ye){return Qo(this,void 0,void 0,function*(){const we=$.files[`word/_rels/${y.target}.rels`];if(!we)return;const Le=yield we.async("text"),Ge=this.findReferenceFiles(Le).filter(De=>De.type===vu.IMAGE),nt=this.findReferenceFiles(Le).filter(De=>De.type===vu.HYPERLINK);for(const De of Ge){const mt=yield $.files[`word/${De.target}`].async("nodebuffer"),Jt=ye.addMedia(mt,{width:100,height:100});ne.Relationships.createRelationship(De.id,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${Jt.fileName}`)}for(const De of nt)ne.Relationships.createRelationship(De.id,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",De.target,fu.EXTERNAL)})}findReferenceFiles(y){const $=(0,f.xml2js)(y,{compact:!0});return(Array.isArray($.Relationships.Relationship)?$.Relationships.Relationship:[$.Relationships.Relationship]).map(ne=>{if(ne._attributes===void 0)throw Error("relationship element has no attributes");return{id:this.parseRefId(ne._attributes.Id),type:SL[ne._attributes.Type],target:ne._attributes.Target}}).filter(ne=>ne.type!==null)}extractDocumentRefs(y){const $=(0,f.xml2js)(y,{compact:!0})["w:document"]["w:body"]["w:sectPr"],ne=$["w:headerReference"];let ye;ye=ne===void 0?[]:Array.isArray(ne)?ne:[ne];const we=ye.map(nt=>{if(nt._attributes===void 0)throw Error("header reference element has no attributes");return{type:nt._attributes["w:type"],id:this.parseRefId(nt._attributes["r:id"])}}),Le=$["w:footerReference"];let Ge;return Ge=Le===void 0?[]:Array.isArray(Le)?Le:[Le],{headers:we,footers:Ge.map(nt=>{if(nt._attributes===void 0)throw Error("footer reference element has no attributes");return{type:nt._attributes["w:type"],id:this.parseRefId(nt._attributes["r:id"])}})}}checkIfTitlePageIsDefined(y){return(0,f.xml2js)(y,{compact:!0})["w:document"]["w:body"]["w:sectPr"]["w:titlePg"]!==void 0}parseRefId(y){const $=/^rId(\d+)$/.exec(y);if($===null)throw new Error("Invalid ref id");return parseInt($[1],10)}}})(),s})()})})(uS);var Yn=YL(uS.exports);const Yw=n=>{for(var e,t=[],r=document.createTreeWalker(n,NodeFilter.SHOW_TEXT);e=r.nextNode();)t.push(e);return t},hS=["<b>","</b>","<i>","</i>","<u>","</u>"],fS=()=>({html:n=>hS.includes(n.trim().toLowerCase())?n.trim().toLowerCase():ro(n),paragraph:n=>`${n}`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:()=>"",code:()=>"",link:()=>""}),_M=(n,e,t)=>({html:r=>hS.includes(r.trim().toLowerCase())?r.trim().toLowerCase():ro(r),paragraph:r=>`<p>${r}</p>`,strong:r=>`<b>${r}</b>`,em:r=>`<i>${r}</i>`,codespan:r=>"",code:(r,i)=>"",link:(r,i,s)=>{const o=r.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<mage-link to="${a}">${Ri(e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t}),fS())}</mage-link>`}}),xM=n=>{const e=yo(n),t=T0(e.properties),r=[],i=e.properties.title||"magebook";for(let[o,a]of e.chapters){const l=t.titleStyle=="inline";//!isNumber(key)
const{text:c}=a,u=t.renameAnchor({key:o,book:e}),h=t.renameTitle({book:e,chapter:a,key:o,title:a.title?a.title.trim():""}),f=document.createElement("p");f.innerHTML=Ri(h,fS())||"";const p=[];Yw(f).forEach(g=>{let v=!1,O=!1,_=!1,x=g.parentNode;for(;x.tagName!=="P";){const T=x.tagName;T==="B"&&(v=!0),T==="I"&&(O=!0),T==="U"&&(_=!0),x=x.parentNode}p.push(new Yn.TextRun({bold:v,italics:O,underline:_,text:g.nodeValue}))});const d=new Yn.Bookmark({id:`${u}`,children:p}),m=document.createElement("div");m.innerHTML=Ri(c,_M(e,t,a)).replaceAll("<br>","</p><p>")||"<p></p>";const b=[];l||b.push(new Yn.Paragraph({children:[d],alignment:"center",heading:Yn.HeadingLevel.HEADING_3})),m.childNodes.forEach((g,v)=>{const O=[];Yw(g).forEach(x=>{let T=!1,E=!1,S=!1,C=x.parentNode;for(;C.tagName!=="P";){const B=C.tagName;if(B==="MAGE-LINK"){const M=C.getAttribute("to");O.push(new Yn.InternalHyperlink({children:[new Yn.TextRun({bold:T,italics:E,text:x.nodeValue,style:"Hyperlink",underline:S?null:{type:null,color:"#000000"}})],anchor:`${M}`}));return}B==="B"&&(T=!0),B==="I"&&(E=!0),B==="U"&&(S=!0),C=C.parentNode}O.push(new Yn.TextRun({bold:T,italics:E,underline:S,text:x.nodeValue}))});let _="both";b.push(new Yn.Paragraph({children:[...l&&v===0?[d,new Yn.TextRun({text:" "})]:[],...O],alignment:_}))}),b.push(new Yn.Paragraph({children:[new Yn.TextRun("")]})),r.push(...b)}const s=new Yn.Document({styles:{paragraphStyles:[{id:"Normal",name:"Normal",next:"Normal",quickFormat:!1,run:{size:Math.floor(Number(t.textFont.size.replace("pt",""))*2),font:t.textFont.family},paragraph:{spacing:{line:Math.floor(Number(t.textFont.spacing.replace("%",""))*2.4)}}},{id:"Heading3",name:"Heading 3",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:Math.floor(Number(t.titleFont.size.replace("pt",""))*2),font:t.titleFont.family,bold:!1},paragraph:{spacing:{line:Math.floor(Number(t.titleFont.spacing.replace("%",""))*2.4)}}}]},sections:[{headers:{default:null},properties:{page:{size:{width:t.page.width+"cm",height:t.page.height+"cm"},margin:{top:t.page.margins[0]+"cm",right:t.page.margins[1]+"cm",bottom:t.page.margins[2]+"cm",left:t.page.margins[3]+"cm"}}},children:r}]});Yn.Packer.toBlob(s).then(o=>{AM(o,i+".docx")})};var kM={encode:xM};const SM="text/html",TM=(n,e,t,r,i)=>`<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <meta name="author" content="${e}">


  <title>${n}</title>
  <style>
    body { margin: 30px calc(26vw - 70px); }
    body, html { font-family: ${i.textFont.family}; font-size: ${i.textFont.size};}
    h1 { text-align: center;}
    p  { margin-bottom: 8rem; line-height: ${i.textFont.spacing};  }
    h2 { 
      margin-bottom: -1rem; line-height: 4rem; page-break-before: always;
      font-family: ${i.titleFont.family}; font-size: ${i.titleFont.size}; line-height: ${i.titleFont.spacing};  
    }
    br { margin-bottom: 8px; content: ""; display: block; }
  </style>
</head>
<body>
<p style="display:none">
${t}
</p>

<h1>${n}</h1>
${r}
</body>
</html>`,Zw=(n,e,t)=>({html:r=>r,paragraph:r=>`${r}<br>
`,strong:r=>`<b>${r}</b>`,em:r=>`<i>${r}</i>`,codespan:()=>"",code:()=>"",link:(r,i,s)=>{const o=r.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<a href="#${a}">${e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t})}</a>`}}),EM=n=>{const e=yo(n),t=T0(e.properties);let r="",i="";for(const[o,a]of e.chapters){const{text:l}=a,c=t.renameAnchor({key:o,book:e}),u=t.renameTitle({book:e,chapter:a,key:o,title:a.title?a.title.trim():""});r+=`  <a href="#${c}">${u}</a>
`,t.titleStyle=="inline"?i+=`
<p for="${c}"><span class="title" id="${c}">${u}</span>
${Ri(l,Zw(e,t)).trim()||""}
</p>
`:(i+=`

<h2 class="title" id="${c}">${u}</h2>
`,i+=`
<p for="${c}">
${Ri(l,Zw(e,t)).trim()||""}
</p>
`)}const s=document.createElement("p");return s.innerHTML=i,i=s.innerHTML,TM(e.properties.title,e.properties.author,r,i,t)};var CM={encode:EM,mimetype:SM};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ct=function(){return ct=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ct.apply(this,arguments)};function pg(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Pt=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,qt=Object.keys,Cn=Array.isArray;typeof Promise!="undefined"&&!Pt.Promise&&(Pt.Promise=Promise);function Mn(n,e){return typeof e!="object"||qt(e).forEach(function(t){n[t]=e[t]}),n}var Zl=Object.getPrototypeOf,IM={}.hasOwnProperty;function or(n,e){return IM.call(n,e)}function oa(n,e){typeof e=="function"&&(e=e(Zl(n))),(typeof Reflect=="undefined"?qt:Reflect.ownKeys)(e).forEach(function(t){Qi(n,t,e[t])})}var dS=Object.defineProperty;function Qi(n,e,t,r){dS(n,e,Mn(t&&or(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function Ca(n){return{from:function(e){return n.prototype=Object.create(e.prototype),Qi(n.prototype,"constructor",n),{extend:oa.bind(null,n.prototype)}}}}var RM=Object.getOwnPropertyDescriptor;function E0(n,e){var t=RM(n,e),r;return t||(r=Zl(n))&&E0(r,e)}var QM=[].slice;function Kf(n,e,t){return QM.call(n,e,t)}function pS(n,e){return e(n)}function vl(n){if(!n)throw new Error("Assertion Failed")}function mS(n){Pt.setImmediate?setImmediate(n):setTimeout(n,0)}function gS(n,e){return n.reduce(function(t,r,i){var s=e(r,i);return s&&(t[s[0]]=s[1]),t},{})}function PM(n,e,t){try{n.apply(null,t)}catch(r){e&&e(r)}}function ki(n,e){if(or(n,e))return n[e];if(!e)return n;if(typeof e!="string"){for(var t=[],r=0,i=e.length;r<i;++r){var s=ki(n,e[r]);t.push(s)}return t}var o=e.indexOf(".");if(o!==-1){var a=n[e.substr(0,o)];return a===void 0?void 0:ki(a,e.substr(o+1))}}function Br(n,e,t){if(!(!n||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof e!="string"&&"length"in e){vl(typeof t!="string"&&"length"in t);for(var r=0,i=e.length;r<i;++r)Br(n,e[r],t[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")t===void 0?Cn(n)&&!isNaN(parseInt(o))?n.splice(o,1):delete n[o]:n[o]=t;else{var l=n[o];(!l||!or(n,o))&&(l=n[o]={}),Br(l,a,t)}}else t===void 0?Cn(n)&&!isNaN(parseInt(e))?n.splice(e,1):delete n[e]:n[e]=t}}function DM(n,e){typeof e=="string"?Br(n,e,void 0):"length"in e&&[].map.call(e,function(t){Br(n,t,void 0)})}function yS(n){var e={};for(var t in n)or(n,t)&&(e[t]=n[t]);return e}var LM=[].concat;function OS(n){return LM.apply([],n)}var bS="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(OS([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(e){return e+n+"Array"})}))).filter(function(n){return Pt[n]}),NM=bS.map(function(n){return Pt[n]});gS(bS,function(n){return[n,!0]});var Xi=null;function Lc(n){Xi=typeof WeakMap!="undefined"&&new WeakMap;var e=mg(n);return Xi=null,e}function mg(n){if(!n||typeof n!="object")return n;var e=Xi&&Xi.get(n);if(e)return e;if(Cn(n)){e=[],Xi&&Xi.set(n,e);for(var t=0,r=n.length;t<r;++t)e.push(mg(n[t]))}else if(NM.indexOf(n.constructor)>=0)e=n;else{var i=Zl(n);e=i===Object.prototype?{}:Object.create(i),Xi&&Xi.set(n,e);for(var s in n)or(n,s)&&(e[s]=mg(n[s]))}return e}var BM={}.toString;function gg(n){return BM.call(n).slice(8,-1)}var yg=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",MM=typeof yg=="symbol"?function(n){var e;return n!=null&&(e=n[yg])&&e.apply(n)}:function(){return null},Fo={};function yi(n){var e,t,r,i;if(arguments.length===1){if(Cn(n))return n.slice();if(this===Fo&&typeof n=="string")return[n];if(i=MM(n)){for(t=[];r=i.next(),!r.done;)t.push(r.value);return t}if(n==null)return[n];if(e=n.length,typeof e=="number"){for(t=new Array(e);e--;)t[e]=n[e];return t}return[n]}for(e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return t}var C0=typeof Symbol!="undefined"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ai=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function vS(n,e){ai=n,wS=e}var wS=function(){return!0},$M=!new Error("").stack;function Oo(){if($M)try{throw Oo.arguments,new Error}catch(n){return n}return new Error}function Og(n,e){var t=n.stack;return t?(e=e||0,t.indexOf(n.name)===0&&(e+=(n.name+n.message).split(`
`).length),t.split(`
`).slice(e).filter(wS).map(function(r){return`
`+r}).join("")):""}var FM=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],AS=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],I0=FM.concat(AS),WM={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ia(n,e){this._e=Oo(),this.name=n,this.message=e}Ca(Ia).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Og(this._e,2))}},toString:function(){return this.name+": "+this.message}});function _S(n,e){return n+". Errors: "+Object.keys(e).map(function(t){return e[t].toString()}).filter(function(t,r,i){return i.indexOf(t)===r}).join(`
`)}function Rh(n,e,t,r){this._e=Oo(),this.failures=e,this.failedKeys=r,this.successCount=t,this.message=_S(n,e)}Ca(Rh).from(Ia);function Rl(n,e){this._e=Oo(),this.name="BulkError",this.failures=Object.keys(e).map(function(t){return e[t]}),this.failuresByPos=e,this.message=_S(n,e)}Ca(Rl).from(Ia);var R0=I0.reduce(function(n,e){return n[e]=e+"Error",n},{}),UM=Ia,Je=I0.reduce(function(n,e){var t=e+"Error";function r(i,s){this._e=Oo(),this.name=t,i?typeof i=="string"?(this.message=""+i+(s?`
 `+s:""),this.inner=s||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=WM[e]||t,this.inner=null)}return Ca(r).from(UM),n[e]=r,n},{});Je.Syntax=SyntaxError;Je.Type=TypeError;Je.Range=RangeError;var qw=AS.reduce(function(n,e){return n[e+"Error"]=Je[e],n},{});function zM(n,e){if(!n||n instanceof Ia||n instanceof TypeError||n instanceof SyntaxError||!n.name||!qw[n.name])return n;var t=new qw[n.name](e||n.message,n);return"stack"in n&&Qi(t,"stack",{get:function(){return this.inner.stack}}),t}var Jf=I0.reduce(function(n,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(n[e+"Error"]=Je[e]),n},{});Jf.ModifyError=Rh;Jf.DexieError=Ia;Jf.BulkError=Rl;function kt(){}function Nc(n){return n}function jM(n,e){return n==null||n===Nc?e:function(t){return e(n(t))}}function io(n,e){return function(){n.apply(this,arguments),e.apply(this,arguments)}}function HM(n,e){return n===kt?e:function(){var t=n.apply(this,arguments);t!==void 0&&(arguments[0]=t);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?io(r,this.onsuccess):r),i&&(this.onerror=this.onerror?io(i,this.onerror):i),s!==void 0?s:t}}function GM(n,e){return n===kt?e:function(){n.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?io(t,this.onsuccess):t),r&&(this.onerror=this.onerror?io(r,this.onerror):r)}}function VM(n,e){return n===kt?e:function(t){var r=n.apply(this,arguments);Mn(t,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?io(i,this.onsuccess):i),s&&(this.onerror=this.onerror?io(s,this.onerror):s),r===void 0?o===void 0?void 0:o:Mn(r,o)}}function XM(n,e){return n===kt?e:function(){return e.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function Q0(n,e){return n===kt?e:function(){var t=n.apply(this,arguments);if(t&&typeof t.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return t.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}var ql={},YM=100,ZM=20,xS=100,P0=typeof Promise=="undefined"?[]:function(){var n=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[n,Zl(n),n];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Zl(e),n]}(),bg=P0[0],Qh=P0[1],vg=P0[2],kS=Qh&&Qh.then,uh=bg&&bg.constructor,D0=!!vg,wg=!1,qM=vg?function(){vg.then(Tu)}:Pt.setImmediate?setImmediate.bind(null,Tu):Pt.MutationObserver?function(){var n=document.createElement("div");new MutationObserver(function(){Tu(),n=null}).observe(n,{attributes:!0}),n.setAttribute("i","1")}:function(){setTimeout(Tu,0)},Kl=function(n,e){wl.push([n,e]),Ph&&(qM(),Ph=!1)},Ag=!0,Ph=!0,Ks=[],hh=[],_g=null,xg=Nc,Vo={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:eA,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(n){try{eA(n[0],n[1])}catch{}})}},Xe=Vo,wl=[],Js=0,fh=[];function Be(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=kt,this._lib=!1;var e=this._PSD=Xe;if(ai&&(this._stackHolder=Oo(),this._prev=null,this._numPrev=0),typeof n!="function"){if(n!==ql)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Sg(this,this._value);return}this._state=null,this._value=null,++e.ref,TS(this,n)}var kg={get:function(){var n=Xe,e=Dh;function t(r,i){var s=this,o=!n.global&&(n!==Xe||e!==Dh),a=o&&!Pi(),l=new Be(function(c,u){L0(s,new SS(Nh(r,n,o,a),Nh(i,n,o,a),c,u,n))});return ai&&IS(l,this),l}return t.prototype=ql,t},set:function(n){Qi(this,"then",n&&n.prototype===ql?kg:{get:function(){return n},set:kg.set})}};oa(Be.prototype,{then:kg,_then:function(n,e){L0(this,new SS(null,null,n,e,Xe))},catch:function(n){if(arguments.length===1)return this.then(null,n);var e=arguments[0],t=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?t(r):dh(r)}):this.then(null,function(r){return r&&r.name===e?t(r):dh(r)})},finally:function(n){return this.then(function(e){return n(),e},function(e){return n(),dh(e)})},stack:{get:function(){if(this._stack)return this._stack;try{wg=!0;var n=CS(this,[],ZM),e=n.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{wg=!1}}},timeout:function(n,e){var t=this;return n<1/0?new Be(function(r,i){var s=setTimeout(function(){return i(new Je.Timeout(e))},n);t.then(r,i).finally(clearTimeout.bind(null,s))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&Qi(Be.prototype,Symbol.toStringTag,"Dexie.Promise");Vo.env=RS();function SS(n,e,t,r,i){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof e=="function"?e:null,this.resolve=t,this.reject=r,this.psd=i}oa(Be,{all:function(){var n=yi.apply(null,arguments).map(Lh);return new Be(function(e,t){n.length===0&&e([]);var r=n.length;n.forEach(function(i,s){return Be.resolve(i).then(function(o){n[s]=o,--r||e(n)},t)})})},resolve:function(n){if(n instanceof Be)return n;if(n&&typeof n.then=="function")return new Be(function(t,r){n.then(t,r)});var e=new Be(ql,!0,n);return IS(e,_g),e},reject:dh,race:function(){var n=yi.apply(null,arguments).map(Lh);return new Be(function(e,t){n.map(function(r){return Be.resolve(r).then(e,t)})})},PSD:{get:function(){return Xe},set:function(n){return Xe=n}},totalEchoes:{get:function(){return Dh}},newPSD:ys,usePSD:Qa,scheduler:{get:function(){return Kl},set:function(n){Kl=n}},rejectionMapper:{get:function(){return xg},set:function(n){xg=n}},follow:function(n,e){return new Be(function(t,r){return ys(function(i,s){var o=Xe;o.unhandleds=[],o.onunhandled=s,o.finalize=io(function(){var a=this;JM(function(){a.unhandleds.length===0?i():s(a.unhandleds[0])})},o.finalize),n()},e,t,r)})}});uh&&(uh.allSettled&&Qi(Be,"allSettled",function(){var n=yi.apply(null,arguments).map(Lh);return new Be(function(e){n.length===0&&e([]);var t=n.length,r=new Array(t);n.forEach(function(i,s){return Be.resolve(i).then(function(o){return r[s]={status:"fulfilled",value:o}},function(o){return r[s]={status:"rejected",reason:o}}).then(function(){return--t||e(r)})})})}),uh.any&&typeof AggregateError!="undefined"&&Qi(Be,"any",function(){var n=yi.apply(null,arguments).map(Lh);return new Be(function(e,t){n.length===0&&t(new AggregateError([]));var r=n.length,i=new Array(r);n.forEach(function(s,o){return Be.resolve(s).then(function(a){return e(a)},function(a){i[o]=a,--r||t(new AggregateError(i))})})})}));function TS(n,e){try{e(function(t){if(n._state===null){if(t===n)throw new TypeError("A promise cannot be resolved with itself.");var r=n._lib&&Bc();t&&typeof t.then=="function"?TS(n,function(i,s){t instanceof Be?t._then(i,s):t.then(i,s)}):(n._state=!0,n._value=t,ES(n)),r&&Mc()}},Sg.bind(null,n))}catch(t){Sg(n,t)}}function Sg(n,e){if(hh.push(e),n._state===null){var t=n._lib&&Bc();e=xg(e),n._state=!1,n._value=e,ai&&e!==null&&typeof e=="object"&&!e._promise&&PM(function(){var r=E0(e,"stack");e._promise=n,Qi(e,"stack",{get:function(){return wg?r&&(r.get?r.get.apply(e):r.value):n.stack}})}),e5(n),ES(n),t&&Mc()}}function ES(n){var e=n._listeners;n._listeners=[];for(var t=0,r=e.length;t<r;++t)L0(n,e[t]);var i=n._PSD;--i.ref||i.finalize(),Js===0&&(++Js,Kl(function(){--Js===0&&N0()},[]))}function L0(n,e){if(n._state===null){n._listeners.push(e);return}var t=n._state?e.onFulfilled:e.onRejected;if(t===null)return(n._state?e.resolve:e.reject)(n._value);++e.psd.ref,++Js,Kl(KM,[t,n,e])}function KM(n,e,t){try{_g=e;var r,i=e._value;e._state?r=n(i):(hh.length&&(hh=[]),r=n(i),hh.indexOf(i)===-1&&t5(e)),t.resolve(r)}catch(s){t.reject(s)}finally{_g=null,--Js===0&&N0(),--t.psd.ref||t.psd.finalize()}}function CS(n,e,t){if(e.length===t)return e;var r="";if(n._state===!1){var i=n._value,s,o;i!=null?(s=i.name||"Error",o=i.message||i,r=Og(i,0)):(s=i,o=""),e.push(s+(o?": "+o:"")+r)}return ai&&(r=Og(n._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),n._prev&&CS(n._prev,e,t)),e}function IS(n,e){var t=e?e._numPrev+1:0;t<YM&&(n._prev=e,n._numPrev=t)}function Tu(){Bc()&&Mc()}function Bc(){var n=Ag;return Ag=!1,Ph=!1,n}function Mc(){var n,e,t;do for(;wl.length>0;)for(n=wl,wl=[],t=n.length,e=0;e<t;++e){var r=n[e];r[0].apply(null,r[1])}while(wl.length>0);Ag=!0,Ph=!0}function N0(){var n=Ks;Ks=[],n.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=fh.slice(0),t=e.length;t;)e[--t]()}function JM(n){function e(){n(),fh.splice(fh.indexOf(e),1)}fh.push(e),++Js,Kl(function(){--Js===0&&N0()},[])}function e5(n){Ks.some(function(e){return e._value===n._value})||Ks.push(n)}function t5(n){for(var e=Ks.length;e;)if(Ks[--e]._value===n._value){Ks.splice(e,1);return}}function dh(n){return new Be(ql,!1,n)}function Mt(n,e){var t=Xe;return function(){var r=Bc(),i=Xe;try{return Os(t,!0),n.apply(this,arguments)}catch(s){e&&e(s)}finally{Os(i,!1),r&&Mc()}}}var En={awaits:0,echoes:0,id:0},n5=0,ph=[],Vp=0,Dh=0,r5=0;function ys(n,e,t,r){var i=Xe,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++r5;var o=Vo.env;s.env=D0?{Promise:Be,PromiseProp:{value:Be,configurable:!0,writable:!0},all:Be.all,race:Be.race,allSettled:Be.allSettled,any:Be.any,resolve:Be.resolve,reject:Be.reject,nthen:Kw(o.nthen,s),gthen:Kw(o.gthen,s)}:{},e&&Mn(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Qa(s,n,t,r);return s.ref===0&&s.finalize(),a}function Ra(){return En.id||(En.id=++n5),++En.awaits,En.echoes+=xS,En.id}function Pi(){return En.awaits?(--En.awaits===0&&(En.id=0),En.echoes=En.awaits*xS,!0):!1}(""+kS).indexOf("[native code]")===-1&&(Ra=Pi=kt);function Lh(n){return En.echoes&&n&&n.constructor===uh?(Ra(),n.then(function(e){return Pi(),e},function(e){return Pi(),rn(e)})):n}function i5(n){++Dh,(!En.echoes||--En.echoes===0)&&(En.echoes=En.id=0),ph.push(Xe),Os(n,!0)}function s5(){var n=ph[ph.length-1];ph.pop(),Os(n,!1)}function Os(n,e){var t=Xe;if((e?En.echoes&&(!Vp++||n!==Xe):Vp&&(!--Vp||n!==Xe))&&QS(e?i5.bind(null,n):s5),n!==Xe&&(Xe=n,t===Vo&&(Vo.env=RS()),D0)){var r=Vo.env.Promise,i=n.env;Qh.then=i.nthen,r.prototype.then=i.gthen,(t.global||n.global)&&(Object.defineProperty(Pt,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function RS(){var n=Pt.Promise;return D0?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(Pt,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject,nthen:Qh.then,gthen:n.prototype.then}:{}}function Qa(n,e,t,r,i){var s=Xe;try{return Os(n,!0),e(t,r,i)}finally{Os(s,!1)}}function QS(n){kS.call(bg,n)}function Nh(n,e,t,r){return typeof n!="function"?n:function(){var i=Xe;t&&Ra(),Os(e,!0);try{return n.apply(this,arguments)}finally{Os(i,!1),r&&QS(Pi)}}}function Kw(n,e){return function(t,r){return n.call(this,Nh(t,e),Nh(r,e))}}var Jw="unhandledrejection";function eA(n,e){var t;try{t=e.onuncatched(n)}catch{}if(t!==!1)try{var r,i={promise:e,reason:n};if(Pt.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Jw,!0,!0),Mn(r,i)):Pt.CustomEvent&&(r=new CustomEvent(Jw,{detail:i}),Mn(r,i)),r&&Pt.dispatchEvent&&(dispatchEvent(r),!Pt.PromiseRejectionEvent&&Pt.onunhandledrejection))try{Pt.onunhandledrejection(r)}catch{}ai&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(n.stack||n))}catch{}}var rn=Be.reject;function Tg(n,e,t,r){if(!n.idbdb||!n._state.openComplete&&!Xe.letThrough&&!n._vip){if(n._state.openComplete)return rn(new Je.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen)return rn(new Je.DatabaseClosed);n.open().catch(kt)}return n._state.dbReadyPromise.then(function(){return Tg(n,e,t,r)})}else{var i=n._createTransaction(e,t,n._dbSchema);try{i.create(),n._state.PR1398_maxLoop=3}catch(s){return s.name===R0.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(function(){return Tg(n,e,t,r)})):rn(s)}return i._promise(e,function(s,o){return ys(function(){return Xe.trans=i,r(s,o,i)})}).then(function(s){return i._completion.then(function(){return s})})}}var tA="3.2.2",Gs=String.fromCharCode(65535),Eg=-1/0,fi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",PS="String expected.",Ql=[],ed=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),o5=ed,a5=ed,DS=function(n){return!/(dexie\.js|dexie\.min\.js)/.test(n)},td="__dbnames",Xp="readonly",Yp="readwrite";function so(n,e){return n?e?function(){return n.apply(this,arguments)&&e.apply(this,arguments)}:n:e}var LS={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Eu(n){return typeof n=="string"&&!/\./.test(n)?function(e){return e[n]===void 0&&n in e&&(e=Lc(e),delete e[n]),e}:function(e){return e}}var l5=function(){function n(){}return n.prototype._trans=function(e,t,r){var i=this._tx||Xe.trans,s=this.name;function o(l,c,u){if(!u.schema[s])throw new Je.NotFound("Table "+s+" not part of transaction");return t(u.idbtrans,u)}var a=Bc();try{return i&&i.db===this.db?i===Xe.trans?i._promise(e,o,r):ys(function(){return i._promise(e,o,r)},{trans:i,transless:Xe.transless||Xe}):Tg(this.db,e,[this.name],o)}finally{a&&Mc()}},n.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(s){return r.hook.reading.fire(s)})}).then(t)},n.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(Cn(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=qt(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(u){return u.compound&&t.every(function(h){return u.keyPath.indexOf(h)>=0})&&u.keyPath.every(function(h){return t.indexOf(h)>=0})})[0];if(r&&this.db._maxKey!==Gs)return this.where(r.name).equals(r.keyPath.map(function(u){return e[u]}));!r&&ai&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+t.join("+")+"]"));var i=this.schema.idxByName,s=this.db._deps.indexedDB;function o(u,h){try{return s.cmp(u,h)===0}catch{return!1}}var a=t.reduce(function(u,h){var f=u[0],p=u[1],d=i[h],m=e[h];return[f||d,f||!d?so(p,d&&d.multi?function(b){var A=ki(b,h);return Cn(A)&&A.some(function(g){return o(m,g)})}:function(b){return o(m,ki(b,h))}):p]},[null,null]),l=a[0],c=a[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(c):r?this.filter(c):this.where(t).equals("")},n.prototype.filter=function(e){return this.toCollection().and(e)},n.prototype.count=function(e){return this.toCollection().count(e)},n.prototype.offset=function(e){return this.toCollection().offset(e)},n.prototype.limit=function(e){return this.toCollection().limit(e)},n.prototype.each=function(e){return this.toCollection().each(e)},n.prototype.toArray=function(e){return this.toCollection().toArray(e)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,Cn(e)?"["+e.join("+")+"]":e))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var s in r)if(or(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},n.prototype.defineClass=function(){function e(t){Mn(this,t)}return this.mapToClass(e)},n.prototype.add=function(e,t){var r=this,i=this.schema.primKey,s=i.auto,o=i.keyPath,a=e;return o&&s&&(a=Eu(o)(e)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"add",keys:t!=null?[t]:null,values:[a]})}).then(function(l){return l.numFailures?Be.reject(l.failures[0]):l.lastResult}).then(function(l){if(o)try{Br(e,o,l)}catch{}return l})},n.prototype.update=function(e,t){if(typeof e=="object"&&!Cn(e)){var r=ki(e,this.schema.primKey.keyPath);if(r===void 0)return rn(new Je.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?qt(t).forEach(function(i){Br(e,i,t[i])}):t(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(t)}else return this.where(":id").equals(e).modify(t)},n.prototype.put=function(e,t){var r=this,i=this.schema.primKey,s=i.auto,o=i.keyPath,a=e;return o&&s&&(a=Eu(o)(e)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"put",values:[a],keys:t!=null?[t]:null})}).then(function(l){return l.numFailures?Be.reject(l.failures[0]):l.lastResult}).then(function(l){if(o)try{Br(e,o,l)}catch{}return l})},n.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?Be.reject(r.failures[0]):void 0})},n.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:LS})}).then(function(t){return t.numFailures?Be.reject(t.failures[0]):void 0})},n.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(s){return t.hook.reading.fire(s)})})})},n.prototype.bulkAdd=function(e,t,r){var i=this,s=Array.isArray(t)?t:void 0;r=r||(s?void 0:t);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(a){var l=i.schema.primKey,c=l.auto,u=l.keyPath;if(u&&s)throw new Je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new Je.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,f=u&&c?e.map(Eu(u)):e;return i.core.mutate({trans:a,type:"add",keys:s,values:f,wantResults:o}).then(function(p){var d=p.numFailures,m=p.results,b=p.lastResult,A=p.failures,g=o?m:b;if(d===0)return g;throw new Rl(i.name+".bulkAdd(): "+d+" of "+h+" operations failed",A)})})},n.prototype.bulkPut=function(e,t,r){var i=this,s=Array.isArray(t)?t:void 0;r=r||(s?void 0:t);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(a){var l=i.schema.primKey,c=l.auto,u=l.keyPath;if(u&&s)throw new Je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new Je.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,f=u&&c?e.map(Eu(u)):e;return i.core.mutate({trans:a,type:"put",keys:s,values:f,wantResults:o}).then(function(p){var d=p.numFailures,m=p.results,b=p.lastResult,A=p.failures,g=o?m:b;if(d===0)return g;throw new Rl(i.name+".bulkPut(): "+d+" of "+h+" operations failed",A)})})},n.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var s=i.numFailures,o=i.lastResult,a=i.failures;if(s===0)return o;throw new Rl(t.name+".bulkDelete(): "+s+" of "+r+" operations failed",a)})},n}();function $c(n){var e={},t=function(a,l){if(l){for(var c=arguments.length,u=new Array(c-1);--c;)u[c-1]=arguments[c];return e[a].subscribe.apply(null,u),n}else if(typeof a=="string")return e[a]};t.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return t;function s(a,l,c){if(typeof a=="object")return o(a);l||(l=XM),c||(c=kt);var u={subscribers:[],fire:c,subscribe:function(h){u.subscribers.indexOf(h)===-1&&(u.subscribers.push(h),u.fire=l(u.fire,h))},unsubscribe:function(h){u.subscribers=u.subscribers.filter(function(f){return f!==h}),u.fire=u.subscribers.reduce(l,c)}};return e[a]=t[a]=u,u}function o(a){qt(a).forEach(function(l){var c=a[l];if(Cn(c))s(l,a[l][0],a[l][1]);else if(c==="asap")var u=s(l,Nc,function(){for(var f=arguments.length,p=new Array(f);f--;)p[f]=arguments[f];u.subscribers.forEach(function(d){mS(function(){d.apply(null,p)})})});else throw new Je.InvalidArgument("Invalid event config")})}}function Fc(n,e){return Ca(e).from({prototype:n}),e}function c5(n){return Fc(l5.prototype,function(t,r,i){this.db=n,this._tx=i,this.name=t,this.schema=r,this.hook=n._allTables[t]?n._allTables[t].hook:$c(null,{creating:[HM,kt],reading:[jM,Nc],updating:[VM,kt],deleting:[GM,kt]})})}function Do(n,e){return!(n.filter||n.algorithm||n.or)&&(e?n.justLimit:!n.replayFilter)}function Zp(n,e){n.filter=so(n.filter,e)}function qp(n,e,t){var r=n.replayFilter;n.replayFilter=r?function(){return so(r(),e())}:e,n.justLimit=t&&!r}function u5(n,e){n.isMatch=so(n.isMatch,e)}function mh(n,e){if(n.isPrimKey)return e.primaryKey;var t=e.getIndexByKeyPath(n.index);if(!t)throw new Je.Schema("KeyPath "+n.index+" on object store "+e.name+" is not indexed");return t}function nA(n,e,t){var r=mh(n,e.schema);return e.openCursor({trans:t,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:r,range:n.range}})}function Cu(n,e,t,r){var i=n.replayFilter?so(n.filter,n.replayFilter()):n.filter;if(n.or){var s={},o=function(a,l,c){if(!i||i(l,c,function(f){return l.stop(f)},function(f){return l.fail(f)})){var u=l.primaryKey,h=""+u;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(u)),or(s,h)||(s[h]=!0,e(a,l,c))}};return Promise.all([n.or._iterate(o,t),rA(nA(n,r,t),n.algorithm,o,!n.keysOnly&&n.valueMapper)])}else return rA(nA(n,r,t),so(n.algorithm,i),e,!n.keysOnly&&n.valueMapper)}function rA(n,e,t,r){var i=r?function(o,a,l){return t(r(o),a,l)}:t,s=Mt(i);return n.then(function(o){if(o)return o.start(function(){var a=function(){return o.continue()};(!e||e(o,function(l){return a=l},function(l){o.stop(l),a=kt},function(l){o.fail(l),a=kt}))&&s(o.value,o,function(l){return a=l}),a()})})}function Pn(n,e){try{var t=iA(n),r=iA(e);if(t!==r)return t==="Array"?1:r==="Array"?-1:t==="binary"?1:r==="binary"?-1:t==="string"?1:r==="string"?-1:t==="Date"?1:r!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return n>e?1:n<e?-1:0;case"binary":return f5(sA(n),sA(e));case"Array":return h5(n,e)}}catch{}return NaN}function h5(n,e){for(var t=n.length,r=e.length,i=t<r?t:r,s=0;s<i;++s){var o=Pn(n[s],e[s]);if(o!==0)return o}return t===r?0:t<r?-1:1}function f5(n,e){for(var t=n.length,r=e.length,i=t<r?t:r,s=0;s<i;++s)if(n[s]!==e[s])return n[s]<e[s]?-1:1;return t===r?0:t<r?-1:1}function iA(n){var e=typeof n;if(e!=="object")return e;if(ArrayBuffer.isView(n))return"binary";var t=gg(n);return t==="ArrayBuffer"?"binary":t}function sA(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}var d5=function(){function n(){}return n.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,rn.bind(null,r.error)):r.table._trans("readonly",e).then(t)},n.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,rn.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},n.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=so(t.algorithm,e)},n.prototype._iterate=function(e,t){return Cu(this._ctx,e,t,this._ctx.table.core)},n.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Mn(r,e),t._ctx=r,t},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return Cu(t,e,r,t.table.core)})},n.prototype.count=function(e){var t=this;return this._read(function(r){var i=t._ctx,s=i.table.core;if(Do(i,!0))return s.count({trans:r,query:{index:mh(i,s.schema),range:i.range}}).then(function(a){return Math.min(a,i.limit)});var o=0;return Cu(i,function(){return++o,!1},r,s).then(function(){return o})}).then(e)},n.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(c,u){return u?o(c[r[u]],u-1):c[i]}var a=this._ctx.dir==="next"?1:-1;function l(c,u){var h=o(c,s),f=o(u,s);return h<f?-a:h>f?a:0}return this.toArray(function(c){return c.sort(l)}).then(t)},n.prototype.toArray=function(e){var t=this;return this._read(function(r){var i=t._ctx;if(i.dir==="next"&&Do(i,!0)&&i.limit>0){var s=i.valueMapper,o=mh(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(l){var c=l.result;return s?c.map(s):c})}else{var a=[];return Cu(i,function(l){return a.push(l)},r,i.table.core).then(function(){return a})}},e)},n.prototype.offset=function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,Do(t)?qp(t,function(){var r=e;return function(i,s){return r===0?!0:r===1?(--r,!1):(s(function(){i.advance(r),r=0}),!1)}}):qp(t,function(){var r=e;return function(){return--r<0}}),this)},n.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),qp(this._ctx,function(){var t=e;return function(r,i,s){return--t<=0&&i(s),t>=0}},!0),this},n.prototype.until=function(e,t){return Zp(this._ctx,function(r,i,s){return e(r.value)?(i(s),t):!0}),this},n.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},n.prototype.last=function(e){return this.reverse().first(e)},n.prototype.filter=function(e){return Zp(this._ctx,function(t){return e(t.value)}),u5(this._ctx,e),this},n.prototype.and=function(e){return this.filter(e)},n.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,i){e(i.key,i)})},n.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},n.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},n.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)},n.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Do(t,!0)&&t.limit>0)return this._read(function(i){var s=mh(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(function(i){var s=i.result;return s}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)},n.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},n.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},n.prototype.lastKey=function(e){return this.reverse().firstKey(e)},n.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return Zp(this._ctx,function(i){var s=i.primaryKey.toString(),o=or(r,s);return r[s]=!0,!o}),this},n.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(i){var s;if(typeof e=="function")s=e;else{var o=qt(e),a=o.length;s=function(A){for(var g=!1,v=0;v<a;++v){var O=o[v],_=e[O];ki(A,O)!==_&&(Br(A,O,_),g=!0)}return g}}var l=r.table.core,c=l.schema.primaryKey,u=c.outbound,h=c.extractKey,f=t.db._options.modifyChunkSize||200,p=[],d=0,m=[],b=function(A,g){var v=g.failures,O=g.numFailures;d+=A-O;for(var _=0,x=qt(v);_<x.length;_++){var T=x[_];p.push(v[T])}};return t.clone().primaryKeys().then(function(A){var g=function(v){var O=Math.min(f,A.length-v);return l.getMany({trans:i,keys:A.slice(v,v+O),cache:"immutable"}).then(function(_){for(var x=[],T=[],E=u?[]:null,S=[],C=0;C<O;++C){var B=_[C],M={value:Lc(B),primKey:A[v+C]};s.call(M,M.value,M)!==!1&&(M.value==null?S.push(A[v+C]):!u&&Pn(h(B),h(M.value))!==0?(S.push(A[v+C]),x.push(M.value)):(T.push(M.value),u&&E.push(A[v+C])))}var D=Do(r)&&r.limit===1/0&&(typeof e!="function"||e===Kp)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&l.mutate({trans:i,type:"add",values:x}).then(function(L){for(var P in L.failures)S.splice(parseInt(P),1);b(x.length,L)})).then(function(){return(T.length>0||D&&typeof e=="object")&&l.mutate({trans:i,type:"put",keys:E,values:T,criteria:D,changeSpec:typeof e!="function"&&e}).then(function(L){return b(T.length,L)})}).then(function(){return(S.length>0||D&&e===Kp)&&l.mutate({trans:i,type:"delete",keys:S,criteria:D}).then(function(L){return b(S.length,L)})}).then(function(){return A.length>v+O&&g(v+f)})})};return g(0).then(function(){if(p.length>0)throw new Rh("Error modifying one or more objects",p,d,m);return A.length})})})},n.prototype.delete=function(){var e=this._ctx,t=e.range;return Do(e)&&(e.isPrimKey&&!a5||t.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,s=t;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(function(o){return e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(function(a){var l=a.failures;a.lastResult,a.results;var c=a.numFailures;if(c)throw new Rh("Could not delete some values",Object.keys(l).map(function(u){return l[u]}),o-c);return o-c})})}):this.modify(Kp)},n}(),Kp=function(n,e){return e.value=null};function p5(n){return Fc(d5.prototype,function(t,r){this.db=n;var i=LS,s=null;if(r)try{i=r()}catch(c){s=c}var o=t._ctx,a=o.table,l=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:o.or,valueMapper:l!==Nc?l:null}})}function m5(n,e){return n<e?-1:n===e?0:1}function g5(n,e){return n>e?-1:n===e?0:1}function qn(n,e,t){var r=n instanceof BS?new n.Collection(n):n;return r._ctx.error=t?new t(e):new TypeError(e),r}function Lo(n){return new n.Collection(n,function(){return NS("")}).limit(0)}function y5(n){return n==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function O5(n){return n==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function b5(n,e,t,r,i,s){for(var o=Math.min(n.length,r.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==r[l])return i(n[l],t[l])<0?n.substr(0,l)+t[l]+t.substr(l+1):i(n[l],r[l])<0?n.substr(0,l)+r[l]+t.substr(l+1):a>=0?n.substr(0,a)+e[a]+t.substr(a+1):null;i(n[l],c)<0&&(a=l)}return o<r.length&&s==="next"?n+t.substr(n.length):o<n.length&&s==="prev"?n.substr(0,t.length):a<0?null:n.substr(0,a)+r[a]+t.substr(a+1)}function Iu(n,e,t,r){var i,s,o,a,l,c,u,h=t.length;if(!t.every(function(m){return typeof m=="string"}))return qn(n,PS);function f(m){i=y5(m),s=O5(m),o=m==="next"?m5:g5;var b=t.map(function(A){return{lower:s(A),upper:i(A)}}).sort(function(A,g){return o(A.lower,g.lower)});a=b.map(function(A){return A.upper}),l=b.map(function(A){return A.lower}),c=m,u=m==="next"?"":r}f("next");var p=new n.Collection(n,function(){return Vi(a[0],l[h-1]+r)});p._ondirectionchange=function(m){f(m)};var d=0;return p._addAlgorithm(function(m,b,A){var g=m.key;if(typeof g!="string")return!1;var v=s(g);if(e(v,l,d))return!0;for(var O=null,_=d;_<h;++_){var x=b5(g,v,a[_],l[_],o,c);x===null&&O===null?d=_+1:(O===null||o(O,x)>0)&&(O=x)}return b(O!==null?function(){m.continue(O+u)}:A),!1}),p}function Vi(n,e,t,r){return{type:2,lower:n,upper:e,lowerOpen:t,upperOpen:r}}function NS(n){return{type:1,lower:n,upper:n}}var BS=function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(e,t,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,t)>0||this._cmp(e,t)===0&&(r||i)&&!(r&&i)?Lo(this):new this.Collection(this,function(){return Vi(e,t,!r,!i)})}catch{return qn(this,fi)}},n.prototype.equals=function(e){return e==null?qn(this,fi):new this.Collection(this,function(){return NS(e)})},n.prototype.above=function(e){return e==null?qn(this,fi):new this.Collection(this,function(){return Vi(e,void 0,!0)})},n.prototype.aboveOrEqual=function(e){return e==null?qn(this,fi):new this.Collection(this,function(){return Vi(e,void 0,!1)})},n.prototype.below=function(e){return e==null?qn(this,fi):new this.Collection(this,function(){return Vi(void 0,e,!1,!0)})},n.prototype.belowOrEqual=function(e){return e==null?qn(this,fi):new this.Collection(this,function(){return Vi(void 0,e)})},n.prototype.startsWith=function(e){return typeof e!="string"?qn(this,PS):this.between(e,e+Gs,!0,!0)},n.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Iu(this,function(t,r){return t.indexOf(r[0])===0},[e],Gs)},n.prototype.equalsIgnoreCase=function(e){return Iu(this,function(t,r){return t===r[0]},[e],"")},n.prototype.anyOfIgnoreCase=function(){var e=yi.apply(Fo,arguments);return e.length===0?Lo(this):Iu(this,function(t,r){return r.indexOf(t)!==-1},e,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var e=yi.apply(Fo,arguments);return e.length===0?Lo(this):Iu(this,function(t,r){return r.some(function(i){return t.indexOf(i)===0})},e,Gs)},n.prototype.anyOf=function(){var e=this,t=yi.apply(Fo,arguments),r=this._cmp;try{t.sort(r)}catch{return qn(this,fi)}if(t.length===0)return Lo(this);var i=new this.Collection(this,function(){return Vi(t[0],t[t.length-1])});i._ondirectionchange=function(o){r=o==="next"?e._ascending:e._descending,t.sort(r)};var s=0;return i._addAlgorithm(function(o,a,l){for(var c=o.key;r(c,t[s])>0;)if(++s,s===t.length)return a(l),!1;return r(c,t[s])===0?!0:(a(function(){o.continue(t[s])}),!1)}),i},n.prototype.notEqual=function(e){return this.inAnyRange([[Eg,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var e=yi.apply(Fo,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return qn(this,fi)}var t=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Eg,i]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(e,t){var r=this,i=this._cmp,s=this._ascending,o=this._descending,a=this._min,l=this._max;if(e.length===0)return Lo(this);if(!e.every(function(_){return _[0]!==void 0&&_[1]!==void 0&&s(_[0],_[1])<=0}))return qn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Je.InvalidArgument);var c=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;function h(_,x){for(var T=0,E=_.length;T<E;++T){var S=_[T];if(i(x[0],S[1])<0&&i(x[1],S[0])>0){S[0]=a(S[0],x[0]),S[1]=l(S[1],x[1]);break}}return T===E&&_.push(x),_}var f=s;function p(_,x){return f(_[0],x[0])}var d;try{d=e.reduce(h,[]),d.sort(p)}catch{return qn(this,fi)}var m=0,b=u?function(_){return s(_,d[m][1])>0}:function(_){return s(_,d[m][1])>=0},A=c?function(_){return o(_,d[m][0])>0}:function(_){return o(_,d[m][0])>=0};function g(_){return!b(_)&&!A(_)}var v=b,O=new this.Collection(this,function(){return Vi(d[0][0],d[d.length-1][1],!c,!u)});return O._ondirectionchange=function(_){_==="next"?(v=b,f=s):(v=A,f=o),d.sort(p)},O._addAlgorithm(function(_,x,T){for(var E=_.key;v(E);)if(++m,m===d.length)return x(T),!1;return g(E)?!0:(r._cmp(E,d[m][1])===0||r._cmp(E,d[m][0])===0||x(function(){f===s?_.continue(d[m][0]):_.continue(d[m][1])}),!1)}),O},n.prototype.startsWithAnyOf=function(){var e=yi.apply(Fo,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Lo(this):this.inAnyRange(e.map(function(t){return[t,t+Gs]})):qn(this,"startsWithAnyOf() only works with strings")},n}();function v5(n){return Fc(BS.prototype,function(t,r,i){this.db=n,this._ctx={table:t,index:r===":id"?null:r,or:i};var s=n._deps.indexedDB;if(!s)throw new Je.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=function(o,a){return s.cmp(a,o)},this._max=function(o,a){return s.cmp(o,a)>0?o:a},this._min=function(o,a){return s.cmp(o,a)<0?o:a},this._IDBKeyRange=n._deps.IDBKeyRange})}function Vr(n){return Mt(function(e){return Jl(e),n(e.target.error),!1})}function Jl(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var ec="storagemutated",ns="x-storagemutated-1",bs=$c(null,ec),w5=function(){function n(){}return n.prototype._lock=function(){return vl(!Xe.global),++this._reculock,this._reculock===1&&!Xe.global&&(Xe.lockOwnerFor=this),this},n.prototype._unlock=function(){if(vl(!Xe.global),--this._reculock===0)for(Xe.global||(Xe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Qa(e[1],e[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&Xe.lockOwnerFor!==this},n.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(vl(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new Je.DatabaseClosed(i);case"MissingAPIError":throw new Je.MissingAPI(i.message,i);default:throw new Je.OpenFailed(i)}if(!this.active)throw new Je.TransactionInactive;return vl(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=Mt(function(s){Jl(s),t._reject(e.error)}),e.onabort=Mt(function(s){Jl(s),t.active&&t._reject(new Je.Abort(e.error)),t.active=!1,t.on("abort").fire(s)}),e.oncomplete=Mt(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&bs.storagemutated.fire(e.mutatedParts)}),this},n.prototype._promise=function(e,t,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return rn(new Je.ReadOnly("Transaction is readonly"));if(!this.active)return rn(new Je.TransactionInactive);if(this._locked())return new Be(function(o,a){i._blockedFuncs.push([function(){i._promise(e,t,r).then(o,a)},Xe])});if(r)return ys(function(){var o=new Be(function(a,l){i._lock();var c=t(a,l,i);c&&c.then&&c.then(a,l)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var s=new Be(function(o,a){var l=t(o,a,i);l&&l.then&&l.then(o,a)});return s._lib=!0,s},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(e){var t=this._root(),r=Be.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return r});else{t._waitingFor=r,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new Be(function(o,a){r.then(function(l){return t._waitingQueue.push(Mt(o.bind(null,l)))},function(l){return t._waitingQueue.push(Mt(a.bind(null,l)))}).finally(function(){t._waitingFor===s&&(t._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Je.Abort))},n.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(or(t,e))return t[e];var r=this.schema[e];if(!r)throw new Je.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),t[e]=i,i},n}();function A5(n){return Fc(w5.prototype,function(t,r,i,s,o){var a=this;this.db=n,this.mode=t,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=$c(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Be(function(l,c){a._resolve=l,a._reject=c}),this._completion.then(function(){a.active=!1,a.on.complete.fire()},function(l){var c=a.active;return a.active=!1,a.on.error.fire(l),a.parent?a.parent._reject(l):c&&a.idbtrans&&a.idbtrans.abort(),rn(l)})})}function Cg(n,e,t,r,i,s,o){return{name:n,keyPath:e,unique:t,multi:r,auto:i,compound:s,src:(t&&!o?"&":"")+(r?"*":"")+(i?"++":"")+MS(e)}}function MS(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function $S(n,e,t){return{name:n,primKey:e,indexes:t,mappedClass:null,idxByName:gS(t,function(r){return[r.name,r]})}}function _5(n){return n.length===1?n[0]:n}var tc=function(n){try{return n.only([[]]),tc=function(){return[[]]},[[]]}catch{return tc=function(){return Gs},Gs}};function Ig(n){return n==null?function(){}:typeof n=="string"?x5(n):function(e){return ki(e,n)}}function x5(n){var e=n.split(".");return e.length===1?function(t){return t[n]}:function(t){return ki(t,n)}}function oA(n){return[].slice.call(n)}var k5=0;function Pl(n){return n==null?":id":typeof n=="string"?n:"["+n.join("+")+"]"}function S5(n,e,t){function r(h,f){var p=oA(h.objectStoreNames);return{schema:{name:h.name,tables:p.map(function(d){return f.objectStore(d)}).map(function(d){var m=d.keyPath,b=d.autoIncrement,A=Cn(m),g=m==null,v={},O={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:A,keyPath:m,autoIncrement:b,unique:!0,extractKey:Ig(m)},indexes:oA(d.indexNames).map(function(_){return d.index(_)}).map(function(_){var x=_.name,T=_.unique,E=_.multiEntry,S=_.keyPath,C=Cn(S),B={name:x,compound:C,keyPath:S,unique:T,multiEntry:E,extractKey:Ig(S)};return v[Pl(S)]=B,B}),getIndexByKeyPath:function(_){return v[Pl(_)]}};return v[":id"]=O.primaryKey,m!=null&&(v[Pl(m)]=O.primaryKey),O})},hasGetAll:p.length>0&&"getAll"in f.objectStore(p[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(h){if(h.type===3)return null;if(h.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var f=h.lower,p=h.upper,d=h.lowerOpen,m=h.upperOpen,b=f===void 0?p===void 0?null:e.upperBound(p,!!m):p===void 0?e.lowerBound(f,!!d):e.bound(f,p,!!d,!!m);return b}function s(h){var f=h.name;function p(b){var A=b.trans,g=b.type,v=b.keys,O=b.values,_=b.range;return new Promise(function(x,T){x=Mt(x);var E=A.objectStore(f),S=E.keyPath==null,C=g==="put"||g==="add";if(!C&&g!=="delete"&&g!=="deleteRange")throw new Error("Invalid operation type: "+g);var B=(v||O||{length:1}).length;if(v&&O&&v.length!==O.length)throw new Error("Given keys array must have same length as given values array.");if(B===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var M,D=[],L=[],P=0,X=function(k){++P,Jl(k)};if(g==="deleteRange"){if(_.type===4)return x({numFailures:P,failures:L,results:[],lastResult:void 0});_.type===3?D.push(M=E.clear()):D.push(M=E.delete(i(_)))}else{var Z=C?S?[O,v]:[O,null]:[v,null],K=Z[0],ee=Z[1];if(C)for(var J=0;J<B;++J)D.push(M=ee&&ee[J]!==void 0?E[g](K[J],ee[J]):E[g](K[J])),M.onerror=X;else for(var J=0;J<B;++J)D.push(M=E[g](K[J])),M.onerror=X}var ge=function(k){var j=k.target.result;D.forEach(function(V,H){return V.error!=null&&(L[H]=V.error)}),x({numFailures:P,failures:L,results:g==="delete"?v:D.map(function(V){return V.result}),lastResult:j})};M.onerror=function(k){X(k),ge(k)},M.onsuccess=ge})}function d(b){var A=b.trans,g=b.values,v=b.query,O=b.reverse,_=b.unique;return new Promise(function(x,T){x=Mt(x);var E=v.index,S=v.range,C=A.objectStore(f),B=E.isPrimaryKey?C:C.index(E.name),M=O?_?"prevunique":"prev":_?"nextunique":"next",D=g||!("openKeyCursor"in B)?B.openCursor(i(S),M):B.openKeyCursor(i(S),M);D.onerror=Vr(T),D.onsuccess=Mt(function(L){var P=D.result;if(!P){x(null);return}P.___id=++k5,P.done=!1;var X=P.continue.bind(P),Z=P.continuePrimaryKey;Z&&(Z=Z.bind(P));var K=P.advance.bind(P),ee=function(){throw new Error("Cursor not started")},J=function(){throw new Error("Cursor not stopped")};P.trans=A,P.stop=P.continue=P.continuePrimaryKey=P.advance=ee,P.fail=Mt(T),P.next=function(){var ge=this,k=1;return this.start(function(){return k--?ge.continue():ge.stop()}).then(function(){return ge})},P.start=function(ge){var k=new Promise(function(V,H){V=Mt(V),D.onerror=Vr(H),P.fail=H,P.stop=function(q){P.stop=P.continue=P.continuePrimaryKey=P.advance=J,V(q)}}),j=function(){if(D.result)try{ge()}catch(V){P.fail(V)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return D.onsuccess=Mt(function(V){D.onsuccess=j,j()}),P.continue=X,P.continuePrimaryKey=Z,P.advance=K,j(),k},x(P)},T)})}function m(b){return function(A){return new Promise(function(g,v){g=Mt(g);var O=A.trans,_=A.values,x=A.limit,T=A.query,E=x===1/0?void 0:x,S=T.index,C=T.range,B=O.objectStore(f),M=S.isPrimaryKey?B:B.index(S.name),D=i(C);if(x===0)return g({result:[]});if(b){var L=_?M.getAll(D,E):M.getAllKeys(D,E);L.onsuccess=function(K){return g({result:K.target.result})},L.onerror=Vr(v)}else{var P=0,X=_||!("openKeyCursor"in M)?M.openCursor(D):M.openKeyCursor(D),Z=[];X.onsuccess=function(K){var ee=X.result;if(!ee)return g({result:Z});if(Z.push(_?ee.value:ee.primaryKey),++P===x)return g({result:Z});ee.continue()},X.onerror=Vr(v)}})}}return{name:f,schema:h,mutate:p,getMany:function(b){var A=b.trans,g=b.keys;return new Promise(function(v,O){v=Mt(v);for(var _=A.objectStore(f),x=g.length,T=new Array(x),E=0,S=0,C,B=function(P){var X=P.target;(T[X._pos]=X.result)!=null,++S===E&&v(T)},M=Vr(O),D=0;D<x;++D){var L=g[D];L!=null&&(C=_.get(g[D]),C._pos=D,C.onsuccess=B,C.onerror=M,++E)}E===0&&v(T)})},get:function(b){var A=b.trans,g=b.key;return new Promise(function(v,O){v=Mt(v);var _=A.objectStore(f),x=_.get(g);x.onsuccess=function(T){return v(T.target.result)},x.onerror=Vr(O)})},query:m(l),openCursor:d,count:function(b){var A=b.query,g=b.trans,v=A.index,O=A.range;return new Promise(function(_,x){var T=g.objectStore(f),E=v.isPrimaryKey?T:T.index(v.name),S=i(O),C=S?E.count(S):E.count();C.onsuccess=Mt(function(B){return _(B.target.result)}),C.onerror=Vr(x)})}}}var o=r(n,t),a=o.schema,l=o.hasGetAll,c=a.tables.map(function(h){return s(h)}),u={};return c.forEach(function(h){return u[h.name]=h}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(h){var f=u[h];if(!f)throw new Error("Table '"+h+"' not found");return u[h]},MIN_KEY:-1/0,MAX_KEY:tc(e),schema:a}}function T5(n,e){return e.reduce(function(t,r){var i=r.create;return ct(ct({},t),i(t))},n)}function E5(n,e,t,r){var i=t.IDBKeyRange;t.indexedDB;var s=T5(S5(e,i,r),n.dbcore);return{dbcore:s}}function B0(n,e){var t=n._novip,r=e.db,i=E5(t._middlewares,r,t._deps,e);t.core=i.dbcore,t.tables.forEach(function(s){var o=s.name;t.core.schema.tables.some(function(a){return a.name===o})&&(s.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=s.core))})}function Bh(n,e,t,r){var i=n._novip;t.forEach(function(s){var o=r[s];e.forEach(function(a){var l=E0(a,s);(!l||"value"in l&&l.value===void 0)&&(a===i.Transaction.prototype||a instanceof i.Transaction?Qi(a,s,{get:function(){return this.table(s)},set:function(c){dS(this,s,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new i.Table(s,o))})})}function Rg(n,e){var t=n._novip;e.forEach(function(r){for(var i in r)r[i]instanceof t.Table&&delete r[i]})}function C5(n,e){return n._cfg.version-e._cfg.version}function I5(n,e,t,r){var i=n._dbSchema,s=n._createTransaction("readwrite",n._storeNames,i);s.create(t),s._completion.catch(r);var o=s._reject.bind(s),a=Xe.transless||Xe;ys(function(){Xe.trans=s,Xe.transless=a,e===0?(qt(i).forEach(function(l){M0(t,l,i[l].primKey,i[l].indexes)}),B0(n,t),Be.follow(function(){return n.on.populate.fire(s)}).catch(o)):R5(n,e,s,t).catch(o)})}function R5(n,e,t,r){var i=n._novip,s=[],o=i._versions,a=i._dbSchema=$0(i,i.idbdb,r),l=!1,c=o.filter(function(h){return h._cfg.version>=e});c.forEach(function(h){s.push(function(){var f=a,p=h._cfg.dbschema;Pg(i,f,r),Pg(i,p,r),a=i._dbSchema=p;var d=FS(f,p);d.add.forEach(function(O){M0(r,O[0],O[1].primKey,O[1].indexes)}),d.change.forEach(function(O){if(O.recreate)throw new Je.Upgrade("Not yet support for changing primary key");var _=r.objectStore(O.name);O.add.forEach(function(x){return Qg(_,x)}),O.change.forEach(function(x){_.deleteIndex(x.name),Qg(_,x)}),O.del.forEach(function(x){return _.deleteIndex(x)})});var m=h._cfg.contentUpgrade;if(m&&h._cfg.version>e){B0(i,r),t._memoizedTables={},l=!0;var b=yS(p);d.del.forEach(function(O){b[O]=f[O]}),Rg(i,[i.Transaction.prototype]),Bh(i,[i.Transaction.prototype],qt(b),b),t.schema=b;var A=C0(m);A&&Ra();var g,v=Be.follow(function(){if(g=m(t),g&&A){var O=Pi.bind(null,null);g.then(O,O)}});return g&&typeof g.then=="function"?Be.resolve(g):v.then(function(){return g})}}),s.push(function(f){if(!l||!o5){var p=h._cfg.dbschema;P5(p,f)}Rg(i,[i.Transaction.prototype]),Bh(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),t.schema=i._dbSchema})});function u(){return s.length?Be.resolve(s.shift()(t.idbtrans)).then(u):Be.resolve()}return u().then(function(){Q5(a,r)})}function FS(n,e){var t={del:[],add:[],change:[]},r;for(r in n)e[r]||t.del.push(r);for(r in e){var i=n[r],s=e[r];if(!i)t.add.push([r,s]);else{var o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!ed)o.recreate=!0,t.change.push(o);else{var a=i.idxByName,l=s.idxByName,c=void 0;for(c in a)l[c]||o.del.push(c);for(c in l){var u=a[c],h=l[c];u?u.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}}return t}function M0(n,e,t,r){var i=n.db.createObjectStore(e,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(function(s){return Qg(i,s)}),i}function Q5(n,e){qt(n).forEach(function(t){e.db.objectStoreNames.contains(t)||M0(e,t,n[t].primKey,n[t].indexes)})}function P5(n,e){[].slice.call(e.db.objectStoreNames).forEach(function(t){return n[t]==null&&e.db.deleteObjectStore(t)})}function Qg(n,e){n.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function $0(n,e,t){var r={},i=Kf(e.objectStoreNames,0);return i.forEach(function(s){for(var o=t.objectStore(s),a=o.keyPath,l=Cg(MS(a),a||"",!1,!1,!!o.autoIncrement,a&&typeof a!="string",!0),c=[],u=0;u<o.indexNames.length;++u){var h=o.index(o.indexNames[u]);a=h.keyPath;var f=Cg(h.name,a,!!h.unique,!!h.multiEntry,!1,a&&typeof a!="string",!1);c.push(f)}r[s]=$S(s,l,c)}),r}function D5(n,e,t){var r=n._novip;r.verno=e.version/10;var i=r._dbSchema=$0(r,e,t);r._storeNames=Kf(e.objectStoreNames,0),Bh(r,[r._allTables],qt(i),i)}function L5(n,e){var t=$0(n,n.idbdb,e),r=FS(t,n._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Pg(n,e,t){for(var r=n._novip,i=t.db.objectStoreNames,s=0;s<i.length;++s){var o=i[s],a=t.objectStore(o);r._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var c=a.indexNames[l],u=a.index(c).keyPath,h=typeof u=="string"?u:"["+Kf(u).join("+")+"]";if(e[o]){var f=e[o].idxByName[h];f&&(f.name=c,delete e[o].idxByName[h],e[o].idxByName[c]=f)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Pt.WorkerGlobalScope&&Pt instanceof Pt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function N5(n){return n.split(",").map(function(e,t){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Cg(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Cn(i),t===0)})}var B5=function(){function n(){}return n.prototype._parseStoresSpec=function(e,t){qt(e).forEach(function(r){if(e[r]!==null){var i=N5(e[r]),s=i.shift();if(s.multi)throw new Je.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new Je.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Je.Schema("Index must have a name and cannot be an empty string")}),t[r]=$S(r,s,i)}})},n.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?Mn(this._cfg.storesSource,e):e;var r=t._versions,i={},s={};return r.forEach(function(o){Mn(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),t._dbSchema=s,Rg(t,[t._allTables,t,t.Transaction.prototype]),Bh(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],qt(s),s),t._storeNames=qt(s),this},n.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Q0(this._cfg.contentUpgrade||kt,e),this},n}();function M5(n){return Fc(B5.prototype,function(t){this.db=n,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function F0(n,e){var t=n._dbNamesDB;return t||(t=n._dbNamesDB=new j0(td,{addons:[],indexedDB:n,IDBKeyRange:e}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function W0(n){return n&&typeof n.databases=="function"}function $5(n){var e=n.indexedDB,t=n.IDBKeyRange;return W0(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==td})}):F0(e,t).toCollection().primaryKeys()}function F5(n,e){var t=n.indexedDB,r=n.IDBKeyRange;!W0(t)&&e!==td&&F0(t,r).put({name:e}).catch(kt)}function W5(n,e){var t=n.indexedDB,r=n.IDBKeyRange;!W0(t)&&e!==td&&F0(t,r).delete(e).catch(kt)}function Dg(n){return ys(function(){return Xe.letThrough=!0,n()})}function U5(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(t){var r=function(){return indexedDB.databases().finally(t)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function z5(n){var e=n._state,t=n._deps.indexedDB;if(e.isBeingOpened||n.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?rn(e.dbOpenError):n});ai&&(e.openCanceller._stackHolder=Oo()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new Je.DatabaseClosed("db.open() was cancelled")}var s=e.dbReadyResolve,o=null,a=!1;return Be.race([r,(typeof navigator=="undefined"?Be.resolve():U5()).then(function(){return new Be(function(l,c){if(i(),!t)throw new Je.MissingAPI;var u=n.name,h=e.autoSchema?t.open(u):t.open(u,Math.round(n.verno*10));if(!h)throw new Je.MissingAPI;h.onerror=Vr(c),h.onblocked=Mt(n._fireOnBlocked),h.onupgradeneeded=Mt(function(f){if(o=h.transaction,e.autoSchema&&!n._options.allowEmptyDB){h.onerror=Jl,o.abort(),h.result.close();var p=t.deleteDatabase(u);p.onsuccess=p.onerror=Mt(function(){c(new Je.NoSuchDatabase("Database "+u+" doesnt exist"))})}else{o.onerror=Vr(c);var d=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;a=d<1,n._novip.idbdb=h.result,I5(n,d/10,o,c)}},c),h.onsuccess=Mt(function(){o=null;var f=n._novip.idbdb=h.result,p=Kf(f.objectStoreNames);if(p.length>0)try{var d=f.transaction(_5(p),"readonly");e.autoSchema?D5(n,f,d):(Pg(n,n._dbSchema,d),L5(n,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),B0(n,d)}catch{}Ql.push(n),f.onversionchange=Mt(function(m){e.vcFired=!0,n.on("versionchange").fire(m)}),f.onclose=Mt(function(m){n.on("close").fire(m)}),a&&F5(n._deps,u),l()},c)})})]).then(function(){return i(),e.onReadyBeingFired=[],Be.resolve(Dg(function(){return n.on.ready.fire(n.vip)})).then(function l(){if(e.onReadyBeingFired.length>0){var c=e.onReadyBeingFired.reduce(Q0,kt);return e.onReadyBeingFired=[],Be.resolve(Dg(function(){return c(n.vip)})).then(l)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return n}).catch(function(l){e.dbOpenError=l;try{o&&o.abort()}catch{}return r===e.openCanceller&&n._close(),rn(l)}).finally(function(){e.openComplete=!0,s()})}function Lg(n){var e=function(o){return n.next(o)},t=function(o){return n.throw(o)},r=s(e),i=s(t);function s(o){return function(a){var l=o(a),c=l.value;return l.done?c:!c||typeof c.then!="function"?Cn(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return s(e)()}function j5(n,e,t){var r=arguments.length;if(r<2)throw new Je.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];t=i.pop();var s=OS(i);return[n,s,t]}function WS(n,e,t,r,i){return Be.resolve().then(function(){var s=Xe.transless||Xe,o=n._createTransaction(e,t,n._dbSchema,r),a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),n._state.PR1398_maxLoop=3}catch(h){return h.name===R0.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(function(){return WS(n,e,t,null,i)})):rn(h)}var l=C0(i);l&&Ra();var c,u=Be.follow(function(){if(c=i.call(o,o),c)if(l){var h=Pi.bind(null,null);c.then(h,h)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Lg(c))},a);return(c&&typeof c.then=="function"?Be.resolve(c).then(function(h){return o.active?h:rn(new Je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return c})).then(function(h){return r&&o._resolve(),o._completion.then(function(){return h})}).catch(function(h){return o._reject(h),rn(h)})})}function Ru(n,e,t){for(var r=Cn(n)?n.slice():[n],i=0;i<t;++i)r.push(e);return r}function H5(n){return ct(ct({},n),{table:function(e){var t=n.table(e),r=t.schema,i={},s=[];function o(m,b,A){var g=Pl(m),v=i[g]=i[g]||[],O=m==null?0:typeof m=="string"?1:m.length,_=b>0,x=ct(ct({},A),{isVirtual:_,keyTail:b,keyLength:O,extractKey:Ig(m),unique:!_&&A.unique});if(v.push(x),x.isPrimaryKey||s.push(x),O>1){var T=O===2?m[0]:m.slice(0,O-1);o(T,b+1,A)}return v.sort(function(E,S){return E.keyTail-S.keyTail}),x}var a=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(var l=0,c=r.indexes;l<c.length;l++){var u=c[l];o(u.keyPath,0,u)}function h(m){var b=i[Pl(m)];return b&&b[0]}function f(m,b){return{type:m.type===1?2:m.type,lower:Ru(m.lower,m.lowerOpen?n.MAX_KEY:n.MIN_KEY,b),lowerOpen:!0,upper:Ru(m.upper,m.upperOpen?n.MIN_KEY:n.MAX_KEY,b),upperOpen:!0}}function p(m){var b=m.query.index;return b.isVirtual?ct(ct({},m),{query:{index:b,range:f(m.query.range,b.keyTail)}}):m}var d=ct(ct({},t),{schema:ct(ct({},r),{primaryKey:a,indexes:s,getIndexByKeyPath:h}),count:function(m){return t.count(p(m))},query:function(m){return t.query(p(m))},openCursor:function(m){var b=m.query.index,A=b.keyTail,g=b.isVirtual,v=b.keyLength;if(!g)return t.openCursor(m);function O(_){function x(E){E!=null?_.continue(Ru(E,m.reverse?n.MAX_KEY:n.MIN_KEY,A)):m.unique?_.continue(_.key.slice(0,v).concat(m.reverse?n.MIN_KEY:n.MAX_KEY,A)):_.continue()}var T=Object.create(_,{continue:{value:x},continuePrimaryKey:{value:function(E,S){_.continuePrimaryKey(Ru(E,n.MAX_KEY,A),S)}},primaryKey:{get:function(){return _.primaryKey}},key:{get:function(){var E=_.key;return v===1?E[0]:E.slice(0,v)}},value:{get:function(){return _.value}}});return T}return t.openCursor(p(m)).then(function(_){return _&&O(_)})}});return d}})}var G5={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:H5};function U0(n,e,t,r){return t=t||{},r=r||"",qt(n).forEach(function(i){if(!or(e,i))t[r+i]=void 0;else{var s=n[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){var a=gg(s),l=gg(o);a!==l?t[r+i]=e[i]:a==="Object"?U0(s,o,t,r+i+"."):s!==o&&(t[r+i]=e[i])}else s!==o&&(t[r+i]=e[i])}}),qt(e).forEach(function(i){or(n,i)||(t[r+i]=e[i])}),t}function V5(n,e){return e.type==="delete"?e.keys:e.keys||e.values.map(n.extractKey)}var X5={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return ct(ct({},n),{table:function(e){var t=n.table(e),r=t.schema.primaryKey,i=ct(ct({},t),{mutate:function(s){var o=Xe.trans,a=o.table(e).hook,l=a.deleting,c=a.creating,u=a.updating;switch(s.type){case"add":if(c.fire===kt)break;return o._promise("readwrite",function(){return h(s)},!0);case"put":if(c.fire===kt&&u.fire===kt)break;return o._promise("readwrite",function(){return h(s)},!0);case"delete":if(l.fire===kt)break;return o._promise("readwrite",function(){return h(s)},!0);case"deleteRange":if(l.fire===kt)break;return o._promise("readwrite",function(){return f(s)},!0)}return t.mutate(s);function h(d){var m=Xe.trans,b=d.keys||V5(r,d);if(!b)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?ct(ct({},d),{keys:b}):ct({},d),d.type!=="delete"&&(d.values=pg([],d.values,!0)),d.keys&&(d.keys=pg([],d.keys,!0)),Y5(t,d,b).then(function(A){var g=b.map(function(v,O){var _=A[O],x={onerror:null,onsuccess:null};if(d.type==="delete")l.fire.call(x,v,_,m);else if(d.type==="add"||_===void 0){var T=c.fire.call(x,v,d.values[O],m);v==null&&T!=null&&(v=T,d.keys[O]=v,r.outbound||Br(d.values[O],r.keyPath,v))}else{var E=U0(_,d.values[O]),S=u.fire.call(x,E,v,_,m);if(S){var C=d.values[O];Object.keys(S).forEach(function(B){or(C,B)?C[B]=S[B]:Br(C,B,S[B])})}}return x});return t.mutate(d).then(function(v){for(var O=v.failures,_=v.results,x=v.numFailures,T=v.lastResult,E=0;E<b.length;++E){var S=_?_[E]:b[E],C=g[E];S==null?C.onerror&&C.onerror(O[E]):C.onsuccess&&C.onsuccess(d.type==="put"&&A[E]?d.values[E]:S)}return{failures:O,results:_,numFailures:x,lastResult:T}}).catch(function(v){return g.forEach(function(O){return O.onerror&&O.onerror(v)}),Promise.reject(v)})})}function f(d){return p(d.trans,d.range,1e4)}function p(d,m,b){return t.query({trans:d,values:!1,query:{index:r,range:m},limit:b}).then(function(A){var g=A.result;return h({type:"delete",keys:g,trans:d}).then(function(v){return v.numFailures>0?Promise.reject(v.failures[0]):g.length<b?{failures:[],numFailures:0,lastResult:void 0}:p(d,ct(ct({},m),{lower:g[g.length-1],lowerOpen:!0}),b)})})}}});return i}})}};function Y5(n,e,t){return e.type==="add"?Promise.resolve([]):n.getMany({trans:e.trans,keys:t,cache:"immutable"})}function US(n,e,t){try{if(!e||e.keys.length<n.length)return null;for(var r=[],i=0,s=0;i<e.keys.length&&s<n.length;++i)Pn(e.keys[i],n[s])===0&&(r.push(t?Lc(e.values[i]):e.values[i]),++s);return r.length===n.length?r:null}catch{return null}}var Z5={stack:"dbcore",level:-1,create:function(n){return{table:function(e){var t=n.table(e);return ct(ct({},t),{getMany:function(r){if(!r.cache)return t.getMany(r);var i=US(r.keys,r.trans._cache,r.cache==="clone");return i?Be.resolve(i):t.getMany(r).then(function(s){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Lc(s):s},s})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),t.mutate(r)}})}}}},Jp;function z0(n){return!("from"in n)}var mi=function(n,e){if(this)Mn(this,arguments.length?{d:1,from:n,to:arguments.length>1?e:n}:{d:0});else{var t=new mi;return n&&"d"in n&&Mn(t,n),t}};oa(mi.prototype,(Jp={add:function(n){return Mh(this,n),this},addKey:function(n){return nc(this,n,n),this},addKeys:function(n){var e=this;return n.forEach(function(t){return nc(e,t,t)}),this}},Jp[yg]=function(){return Ng(this)},Jp));function nc(n,e,t){var r=Pn(e,t);if(!isNaN(r)){if(r>0)throw RangeError();if(z0(n))return Mn(n,{from:e,to:t,d:1});var i=n.l,s=n.r;if(Pn(t,n.from)<0)return i?nc(i,e,t):n.l={from:e,to:t,d:1,l:null,r:null},aA(n);if(Pn(e,n.to)>0)return s?nc(s,e,t):n.r={from:e,to:t,d:1,l:null,r:null},aA(n);Pn(e,n.from)<0&&(n.from=e,n.l=null,n.d=s?s.d+1:1),Pn(t,n.to)>0&&(n.to=t,n.r=null,n.d=n.l?n.l.d+1:1);var o=!n.r;i&&!n.l&&Mh(n,i),s&&o&&Mh(n,s)}}function Mh(n,e){function t(r,i){var s=i.from,o=i.to,a=i.l,l=i.r;nc(r,s,o),a&&t(r,a),l&&t(r,l)}z0(e)||t(n,e)}function q5(n,e){var t=Ng(e),r=t.next();if(r.done)return!1;for(var i=r.value,s=Ng(n),o=s.next(i.from),a=o.value;!r.done&&!o.done;){if(Pn(a.from,i.to)<=0&&Pn(a.to,i.from)>=0)return!0;Pn(i.from,a.from)<0?i=(r=t.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function Ng(n){var e=z0(n)?null:{s:0,n};return{next:function(t){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Pn(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Pn(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function aA(n){var e,t,r=(((e=n.r)===null||e===void 0?void 0:e.d)||0)-(((t=n.l)===null||t===void 0?void 0:t.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var s=i==="r"?"l":"r",o=ct({},n),a=n[i];n.from=a.from,n.to=a.to,n[i]=a[i],o[i]=a[s],n[s]=o,o.d=lA(o)}n.d=lA(n)}function lA(n){var e=n.r,t=n.l;return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}var K5={stack:"dbcore",level:0,create:function(n){var e=n.schema.name,t=new mi(n.MIN_KEY,n.MAX_KEY);return ct(ct({},n),{table:function(r){var i=n.table(r),s=i.schema,o=s.primaryKey,a=o.extractKey,l=o.outbound,c=ct(ct({},i),{mutate:function(f){var p=f.trans,d=p.mutatedParts||(p.mutatedParts={}),m=function(T){var E="idb://"+e+"/"+r+"/"+T;return d[E]||(d[E]=new mi)},b=m(""),A=m(":dels"),g=f.type,v=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[],O=v[0],_=v[1],x=f.trans._cache;return i.mutate(f).then(function(T){if(Cn(O)){g!=="delete"&&(O=T.results),b.addKeys(O);var E=US(O,x);!E&&g!=="add"&&A.addKeys(O),(E||_)&&J5(m,s,E,_)}else if(O){var S={from:O.lower,to:O.upper};A.add(S),b.add(S)}else b.add(t),A.add(t),s.indexes.forEach(function(C){return m(C.name).add(t)});return T})}}),u=function(f){var p,d,m=f.query,b=m.index,A=m.range;return[b,new mi((p=A.lower)!==null&&p!==void 0?p:n.MIN_KEY,(d=A.upper)!==null&&d!==void 0?d:n.MAX_KEY)]},h={get:function(f){return[o,new mi(f.key)]},getMany:function(f){return[o,new mi().addKeys(f.keys)]},count:u,query:u,openCursor:u};return qt(h).forEach(function(f){c[f]=function(p){var d=Xe.subscr;if(d){var m=function(x){var T="idb://"+e+"/"+r+"/"+x;return d[T]||(d[T]=new mi)},b=m(""),A=m(":dels"),g=h[f](p),v=g[0],O=g[1];if(m(v.name||"").add(O),!v.isPrimaryKey)if(f==="count")A.add(t);else{var _=f==="query"&&l&&p.values&&i.query(ct(ct({},p),{values:!1}));return i[f].apply(this,arguments).then(function(x){if(f==="query"){if(l&&p.values)return _.then(function(C){var B=C.result;return b.addKeys(B),x});var T=p.values?x.result.map(a):x.result;p.values?b.addKeys(T):A.addKeys(T)}else if(f==="openCursor"){var E=x,S=p.values;return E&&Object.create(E,{key:{get:function(){return A.addKey(E.primaryKey),E.key}},primaryKey:{get:function(){var C=E.primaryKey;return A.addKey(C),C}},value:{get:function(){return S&&b.addKey(E.primaryKey),E.value}}})}return x})}}return i[f].apply(this,arguments)}}),c}})}};function J5(n,e,t,r){function i(s){var o=n(s.name||"");function a(c){return c!=null?s.extractKey(c):null}var l=function(c){return s.multiEntry&&Cn(c)?c.forEach(function(u){return o.addKey(u)}):o.addKey(c)};(t||r).forEach(function(c,u){var h=t&&a(t[u]),f=r&&a(r[u]);Pn(h,f)!==0&&(h!=null&&l(h),f!=null&&l(f))})}e.indexes.forEach(i)}var j0=function(){function n(e,t){var r=this;this._middlewares={},this.verno=0;var i=n.dependencies;this._options=t=ct({addons:n.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};var s=t.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:kt,dbReadyPromise:null,cancelOpen:kt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new Be(function(a){o.dbReadyResolve=a}),o.openCanceller=new Be(function(a,l){o.cancelOpen=l}),this._state=o,this.name=e,this.on=$c(this,"populate","blocked","versionchange","close",{ready:[Q0,kt]}),this.on.ready.subscribe=pS(this.on.ready.subscribe,function(a){return function(l,c){n.vip(function(){var u=r._state;if(u.openComplete)u.dbOpenError||Be.resolve().then(l),c&&a(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&a(l);else{a(l);var h=r;c||a(function f(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(f)})}})}}),this.Collection=p5(this),this.Table=c5(this),this.Transaction=A5(this),this.Version=M5(this),this.WhereClause=v5(this),this.on("versionchange",function(a){a.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+a.oldVersion/10)}),this._maxKey=tc(t.IDBKeyRange),this._createTransaction=function(a,l,c,u){return new r.Transaction(a,l,c,r._options.chromeTransactionDurability,u)},this._fireOnBlocked=function(a){r.on("blocked").fire(a),Ql.filter(function(l){return l.name===r.name&&l!==r&&!l._state.vcFired}).map(function(l){return l.on("versionchange").fire(a)})},this.use(G5),this.use(X5),this.use(K5),this.use(Z5),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(function(a){return a(r)})}return n.prototype.version=function(e){if(isNaN(e)||e<.1)throw new Je.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new Je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(C5),r.stores({}),this._state.autoSchema=!1,r)},n.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Xe.letThrough||this._vip)?e():new Be(function(r,i){if(t._state.openComplete)return i(new Je.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen){i(new Je.DatabaseClosed);return}t.open().catch(kt)}t._state.dbReadyPromise.then(r,i)}).then(e)},n.prototype.use=function(e){var t=e.stack,r=e.create,i=e.level,s=e.name;s&&this.unuse({stack:t,name:s});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:r,level:i==null?10:i,name:s}),o.sort(function(a,l){return a.level-l.level}),this},n.prototype.unuse=function(e){var t=e.stack,r=e.name,i=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(s){return i?s.create!==i:r?s.name!==r:!1})),this},n.prototype.open=function(){return z5(this)},n.prototype._close=function(){var e=this._state,t=Ql.indexOf(this);if(t>=0&&Ql.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new Be(function(r){e.dbReadyResolve=r}),e.openCanceller=new Be(function(r,i){e.cancelOpen=i})},n.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Je.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},n.prototype.delete=function(){var e=this,t=arguments.length>0,r=this._state;return new Be(function(i,s){var o=function(){e.close();var a=e._deps.indexedDB.deleteDatabase(e.name);a.onsuccess=Mt(function(){W5(e._deps,e.name),i()}),a.onerror=Vr(s),a.onblocked=e._fireOnBlocked};if(t)throw new Je.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var e=this;return qt(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var e=j5.apply(this,arguments);return this._transaction.apply(this,e)},n.prototype._transaction=function(e,t,r){var i=this,s=Xe.trans;(!s||s.db!==this||e.indexOf("!")!==-1)&&(s=null);var o=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var a,l;try{if(l=t.map(function(u){var h=u instanceof i.Table?u.name:u;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),e=="r"||e===Xp)a=Xp;else if(e=="rw"||e==Yp)a=Yp;else throw new Je.InvalidArgument("Invalid transaction mode: "+e);if(s){if(s.mode===Xp&&a===Yp)if(o)s=null;else throw new Je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s&&l.forEach(function(u){if(s&&s.storeNames.indexOf(u)===-1)if(o)s=null;else throw new Je.SubTransaction("Table "+u+" not included in parent transaction.")}),o&&s&&!s.active&&(s=null)}}catch(u){return s?s._promise(null,function(h,f){f(u)}):rn(u)}var c=WS.bind(null,this,a,l,s,r);return s?s._promise(a,c,"lock"):Xe.trans?Qa(Xe.transless,function(){return i._whenReady(c)}):this._whenReady(c)},n.prototype.table=function(e){if(!or(this._allTables,e))throw new Je.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},n}(),e$=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",t$=function(){function n(e){this._subscribe=e}return n.prototype.subscribe=function(e,t,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:t,complete:r}:e)},n.prototype[e$]=function(){return this},n}();function zS(n,e){return qt(e).forEach(function(t){var r=n[t]||(n[t]=new mi);Mh(r,e[t])}),n}function n$(n){return new t$(function(e){var t=C0(n);function r(p){t&&Ra();var d=function(){return ys(n,{subscr:p,trans:null})},m=Xe.trans?Qa(Xe.transless,d):d();return t&&m.then(Pi,Pi),m}var i=!1,s={},o={},a={get closed(){return i},unsubscribe:function(){i=!0,bs.storagemutated.unsubscribe(h)}};e.start&&e.start(a);var l=!1,c=!1;function u(){return qt(o).some(function(p){return s[p]&&q5(s[p],o[p])})}var h=function(p){zS(s,p),u()&&f()},f=function(){if(!(l||i)){s={};var p={},d=r(p);c||(bs(ec,h),c=!0),l=!0,Promise.resolve(d).then(function(m){l=!1,!i&&(u()?f():(s={},o=p,e.next&&e.next(m)))},function(m){l=!1,e.error&&e.error(m),a.unsubscribe()})}};return f(),a})}var Bg;try{Bg={indexedDB:Pt.indexedDB||Pt.mozIndexedDB||Pt.webkitIndexedDB||Pt.msIndexedDB,IDBKeyRange:Pt.IDBKeyRange||Pt.webkitIDBKeyRange}}catch{Bg={indexedDB:null,IDBKeyRange:null}}var zs=j0;oa(zs,ct(ct({},Jf),{delete:function(n){var e=new zs(n,{addons:[]});return e.delete()},exists:function(n){return new zs(n,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return $5(zs.dependencies).then(n)}catch{return rn(new Je.MissingAPI)}},defineClass:function(){function n(e){Mn(this,e)}return n},ignoreTransaction:function(n){return Xe.trans?Qa(Xe.transless,n):n()},vip:Dg,async:function(n){return function(){try{var e=Lg(n.apply(this,arguments));return!e||typeof e.then!="function"?Be.resolve(e):e}catch(t){return rn(t)}}},spawn:function(n,e,t){try{var r=Lg(n.apply(t,e||[]));return!r||typeof r.then!="function"?Be.resolve(r):r}catch(i){return rn(i)}},currentTransaction:{get:function(){return Xe.trans||null}},waitFor:function(n,e){var t=Be.resolve(typeof n=="function"?zs.ignoreTransaction(n):n).timeout(e||6e4);return Xe.trans?Xe.trans.waitFor(t):t},Promise:Be,debug:{get:function(){return ai},set:function(n){vS(n,n==="dexie"?function(){return!0}:DS)}},derive:Ca,extend:Mn,props:oa,override:pS,Events:$c,on:bs,liveQuery:n$,extendObservabilitySet:zS,getByKeyPath:ki,setByKeyPath:Br,delByKeyPath:DM,shallowClone:yS,deepClone:Lc,getObjectDiff:U0,cmp:Pn,asap:mS,minKey:Eg,addons:[],connections:Ql,errnames:R0,dependencies:Bg,semVer:tA,version:tA.split(".").map(function(n){return parseInt(n)}).reduce(function(n,e,t){return n+e/Math.pow(10,t*2)})}));zs.maxKey=tc(zs.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(bs(ec,function(n){if(!_i){var e;ed?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ns,!0,!0,n)):e=new CustomEvent(ns,{detail:n}),_i=!0,dispatchEvent(e),_i=!1}}),addEventListener(ns,function(n){var e=n.detail;_i||$h(e)}));function $h(n){var e=_i;try{_i=!0,bs.storagemutated.fire(n)}finally{_i=e}}var _i=!1;if(typeof BroadcastChannel!="undefined"){var cA=new BroadcastChannel(ns);bs(ec,function(n){_i||cA.postMessage(n)}),cA.onmessage=function(n){n.data&&$h(n.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){bs(ec,function(n){try{_i||(typeof localStorage!="undefined"&&localStorage.setItem(ns,JSON.stringify({trig:Math.random(),changedParts:n})),typeof self.clients=="object"&&pg([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:ns,changedParts:n})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(n){if(n.key===ns){var e=JSON.parse(n.newValue);e&&$h(e.changedParts)}});var uA=self.document&&navigator.serviceWorker;uA&&uA.addEventListener("message",r$)}function r$(n){var e=n.data;e&&e.type===ns&&$h(e.changedParts)}Be.rejectionMapper=zM;vS(ai,DS);var jS={},i$=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),HS="%[a-f0-9]{2}",hA=new RegExp(HS,"gi"),fA=new RegExp("("+HS+")+","gi");function Mg(n,e){try{return decodeURIComponent(n.join(""))}catch{}if(n.length===1)return n;e=e||1;var t=n.slice(0,e),r=n.slice(e);return Array.prototype.concat.call([],Mg(t),Mg(r))}function s$(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(hA),t=1;t<e.length;t++)n=Mg(e,t).join(""),e=n.match(hA);return n}}function o$(n){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=fA.exec(n);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var r=s$(t[0]);r!==t[0]&&(e[t[0]]=r)}t=fA.exec(n)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];n=n.replace(new RegExp(o,"g"),e[o])}return n}var a$=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return o$(n)}},l$=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]},c$=function(n,e){for(var t={},r=Object.keys(n),i=Array.isArray(e),s=0;s<r.length;s++){var o=r[s],a=n[o];(i?e.indexOf(o)!==-1:e(o,a,n))&&(t[o]=a)}return t};(function(n){const e=i$,t=a$,r=l$,i=c$,s=g=>g==null,o=Symbol("encodeFragmentIdentifier");function a(g){switch(g.arrayFormat){case"index":return v=>(O,_)=>{const x=O.length;return _===void 0||g.skipNull&&_===null||g.skipEmptyString&&_===""?O:_===null?[...O,[u(v,g),"[",x,"]"].join("")]:[...O,[u(v,g),"[",u(x,g),"]=",u(_,g)].join("")]};case"bracket":return v=>(O,_)=>_===void 0||g.skipNull&&_===null||g.skipEmptyString&&_===""?O:_===null?[...O,[u(v,g),"[]"].join("")]:[...O,[u(v,g),"[]=",u(_,g)].join("")];case"colon-list-separator":return v=>(O,_)=>_===void 0||g.skipNull&&_===null||g.skipEmptyString&&_===""?O:_===null?[...O,[u(v,g),":list="].join("")]:[...O,[u(v,g),":list=",u(_,g)].join("")];case"comma":case"separator":case"bracket-separator":{const v=g.arrayFormat==="bracket-separator"?"[]=":"=";return O=>(_,x)=>x===void 0||g.skipNull&&x===null||g.skipEmptyString&&x===""?_:(x=x===null?"":x,_.length===0?[[u(O,g),v,u(x,g)].join("")]:[[_,u(x,g)].join(g.arrayFormatSeparator)])}default:return v=>(O,_)=>_===void 0||g.skipNull&&_===null||g.skipEmptyString&&_===""?O:_===null?[...O,u(v,g)]:[...O,[u(v,g),"=",u(_,g)].join("")]}}function l(g){let v;switch(g.arrayFormat){case"index":return(O,_,x)=>{if(v=/\[(\d*)\]$/.exec(O),O=O.replace(/\[\d*\]$/,""),!v){x[O]=_;return}x[O]===void 0&&(x[O]={}),x[O][v[1]]=_};case"bracket":return(O,_,x)=>{if(v=/(\[\])$/.exec(O),O=O.replace(/\[\]$/,""),!v){x[O]=_;return}if(x[O]===void 0){x[O]=[_];return}x[O]=[].concat(x[O],_)};case"colon-list-separator":return(O,_,x)=>{if(v=/(:list)$/.exec(O),O=O.replace(/:list$/,""),!v){x[O]=_;return}if(x[O]===void 0){x[O]=[_];return}x[O]=[].concat(x[O],_)};case"comma":case"separator":return(O,_,x)=>{const T=typeof _=="string"&&_.includes(g.arrayFormatSeparator),E=typeof _=="string"&&!T&&h(_,g).includes(g.arrayFormatSeparator);_=E?h(_,g):_;const S=T||E?_.split(g.arrayFormatSeparator).map(C=>h(C,g)):_===null?_:h(_,g);x[O]=S};case"bracket-separator":return(O,_,x)=>{const T=/(\[\])$/.test(O);if(O=O.replace(/\[\]$/,""),!T){x[O]=_&&h(_,g);return}const E=_===null?[]:_.split(g.arrayFormatSeparator).map(S=>h(S,g));if(x[O]===void 0){x[O]=E;return}x[O]=[].concat(x[O],E)};default:return(O,_,x)=>{if(x[O]===void 0){x[O]=_;return}x[O]=[].concat(x[O],_)}}}function c(g){if(typeof g!="string"||g.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(g,v){return v.encode?v.strict?e(g):encodeURIComponent(g):g}function h(g,v){return v.decode?t(g):g}function f(g){return Array.isArray(g)?g.sort():typeof g=="object"?f(Object.keys(g)).sort((v,O)=>Number(v)-Number(O)).map(v=>g[v]):g}function p(g){const v=g.indexOf("#");return v!==-1&&(g=g.slice(0,v)),g}function d(g){let v="";const O=g.indexOf("#");return O!==-1&&(v=g.slice(O)),v}function m(g){g=p(g);const v=g.indexOf("?");return v===-1?"":g.slice(v+1)}function b(g,v){return v.parseNumbers&&!Number.isNaN(Number(g))&&typeof g=="string"&&g.trim()!==""?g=Number(g):v.parseBooleans&&g!==null&&(g.toLowerCase()==="true"||g.toLowerCase()==="false")&&(g=g.toLowerCase()==="true"),g}function A(g,v){v=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},v),c(v.arrayFormatSeparator);const O=l(v),_=Object.create(null);if(typeof g!="string"||(g=g.trim().replace(/^[?#&]/,""),!g))return _;for(const x of g.split("&")){if(x==="")continue;let[T,E]=r(v.decode?x.replace(/\+/g," "):x,"=");E=E===void 0?null:["comma","separator","bracket-separator"].includes(v.arrayFormat)?E:h(E,v),O(h(T,v),E,_)}for(const x of Object.keys(_)){const T=_[x];if(typeof T=="object"&&T!==null)for(const E of Object.keys(T))T[E]=b(T[E],v);else _[x]=b(T,v)}return v.sort===!1?_:(v.sort===!0?Object.keys(_).sort():Object.keys(_).sort(v.sort)).reduce((x,T)=>{const E=_[T];return Boolean(E)&&typeof E=="object"&&!Array.isArray(E)?x[T]=f(E):x[T]=E,x},Object.create(null))}n.extract=m,n.parse=A,n.stringify=(g,v)=>{if(!g)return"";v=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},v),c(v.arrayFormatSeparator);const O=E=>v.skipNull&&s(g[E])||v.skipEmptyString&&g[E]==="",_=a(v),x={};for(const E of Object.keys(g))O(E)||(x[E]=g[E]);const T=Object.keys(x);return v.sort!==!1&&T.sort(v.sort),T.map(E=>{const S=g[E];return S===void 0?"":S===null?u(E,v):Array.isArray(S)?S.length===0&&v.arrayFormat==="bracket-separator"?u(E,v)+"[]":S.reduce(_(E),[]).join("&"):u(E,v)+"="+u(S,v)}).filter(E=>E.length>0).join("&")},n.parseUrl=(g,v)=>{v=Object.assign({decode:!0},v);const[O,_]=r(g,"#");return Object.assign({url:O.split("?")[0]||"",query:A(m(g),v)},v&&v.parseFragmentIdentifier&&_?{fragmentIdentifier:h(_,v)}:{})},n.stringifyUrl=(g,v)=>{v=Object.assign({encode:!0,strict:!0,[o]:!0},v);const O=p(g.url).split("?")[0]||"",_=n.extract(g.url),x=n.parse(_,{sort:!1}),T=Object.assign(x,g.query);let E=n.stringify(T,v);E&&(E=`?${E}`);let S=d(g.url);return g.fragmentIdentifier&&(S=`#${v[o]?u(g.fragmentIdentifier,v):g.fragmentIdentifier}`),`${O}${E}${S}`},n.pick=(g,v,O)=>{O=Object.assign({parseFragmentIdentifier:!0,[o]:!1},O);const{url:_,query:x,fragmentIdentifier:T}=n.parseUrl(g,O);return n.stringifyUrl({url:_,query:i(x,v),fragmentIdentifier:T},O)},n.exclude=(g,v,O)=>{const _=Array.isArray(v)?x=>!v.includes(x):(x,T)=>!v(x,T);return n.pick(g,_,O)}})(jS);const u$=typeof atob=="function",h$=typeof btoa=="function",Pa=typeof Buffer=="function",dA=typeof TextDecoder=="function"?new TextDecoder:void 0,pA=typeof TextEncoder=="function"?new TextEncoder:void 0,f$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Al=Array.prototype.slice.call(f$),Qu=(n=>{let e={};return n.forEach((t,r)=>e[t]=r),e})(Al),d$=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,vn=String.fromCharCode.bind(String),mA=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(n,e=t=>t)=>new Uint8Array(Array.prototype.slice.call(n,0).map(e)),p$=n=>n.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),GS=n=>n.replace(/[^A-Za-z0-9\+\/]/g,""),m$=n=>{let e,t,r,i,s="";const o=n.length%3;for(let a=0;a<n.length;){if((t=n.charCodeAt(a++))>255||(r=n.charCodeAt(a++))>255||(i=n.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=t<<16|r<<8|i,s+=Al[e>>18&63]+Al[e>>12&63]+Al[e>>6&63]+Al[e&63]}return o?s.slice(0,o-3)+"===".substring(o):s},VS=h$?n=>btoa(n):Pa?n=>Buffer.from(n,"binary").toString("base64"):m$,g$=Pa?n=>Buffer.from(n).toString("base64"):n=>{let t=[];for(let r=0,i=n.length;r<i;r+=4096)t.push(vn.apply(null,n.subarray(r,r+4096)));return VS(t.join(""))},y$=n=>{if(n.length<2){var e=n.charCodeAt(0);return e<128?n:e<2048?vn(192|e>>>6)+vn(128|e&63):vn(224|e>>>12&15)+vn(128|e>>>6&63)+vn(128|e&63)}else{var e=65536+(n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320);return vn(240|e>>>18&7)+vn(128|e>>>12&63)+vn(128|e>>>6&63)+vn(128|e&63)}},O$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,b$=n=>n.replace(O$,y$),gA=Pa?n=>Buffer.from(n,"utf8").toString("base64"):pA?n=>g$(pA.encode(n)):n=>VS(b$(n)),XS=(n,e=!1)=>e?p$(gA(n)):gA(n),v$=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,w$=n=>{switch(n.length){case 4:var e=(7&n.charCodeAt(0))<<18|(63&n.charCodeAt(1))<<12|(63&n.charCodeAt(2))<<6|63&n.charCodeAt(3),t=e-65536;return vn((t>>>10)+55296)+vn((t&1023)+56320);case 3:return vn((15&n.charCodeAt(0))<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2));default:return vn((31&n.charCodeAt(0))<<6|63&n.charCodeAt(1))}},A$=n=>n.replace(v$,w$),_$=n=>{if(n=n.replace(/\s+/g,""),!d$.test(n))throw new TypeError("malformed base64.");n+="==".slice(2-(n.length&3));let e,t="",r,i;for(let s=0;s<n.length;)e=Qu[n.charAt(s++)]<<18|Qu[n.charAt(s++)]<<12|(r=Qu[n.charAt(s++)])<<6|(i=Qu[n.charAt(s++)]),t+=r===64?vn(e>>16&255):i===64?vn(e>>16&255,e>>8&255):vn(e>>16&255,e>>8&255,e&255);return t},YS=u$?n=>atob(GS(n)):Pa?n=>Buffer.from(n,"base64").toString("binary"):_$,x$=Pa?n=>mA(Buffer.from(n,"base64")):n=>mA(YS(n),e=>e.charCodeAt(0)),k$=Pa?n=>Buffer.from(n,"base64").toString("utf8"):dA?n=>dA.decode(x$(n)):n=>A$(YS(n)),S$=n=>GS(n.replace(/[-_]/g,e=>e=="-"?"+":"/")),T$=n=>k$(S$(n)),H0=(n,e=null)=>{let t,r=e;const{subscribe:i,set:s,update:o}=Nt(e),a=()=>(clearTimeout(t),s(r),r);return{subscribe:i,flush:a,get:a,set:l=>{r=l,a()},lazySet:l=>{r=l,clearTimeout(t),t=setTimeout(()=>{s(r)},n)}}},Wc=Nt(!1),At=H0(100,""),Oi={},Vn=kr(At,n=>(Object.assign(Oi,_0(n)),Oi));class Ot{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Zr.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),Zr.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Dl(this),s=new Dl(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Dl(this,e)}iterRange(e,t=this.length){return new ZS(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new qS(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ot.empty:e.length<=32?new Yt(e):Zr.from(Yt.split(e,[]))}}class Yt extends Ot{constructor(e,t=E$(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new C$(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new Yt(yA(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=gh(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Yt(a,o.length+s.length));else{let l=a.length>>1;r.push(new Yt(a.slice(0,l)),new Yt(a.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof Yt))return super.replace(e,t,r);let i=gh(this.text,gh(r.text,yA(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new Yt(i,s):Zr.from(Yt.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new Yt(r,i)),r=[],i=-1);return i>-1&&t.push(new Yt(r,i)),t}}class Zr extends Ot{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let c=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!c?r.push(a):a.decompose(e-o,t-o,r,c)}o=l+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let u=this.children.slice();return u[i]=l,new Zr(u,this.length-(t-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Zr))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let p=[];for(let d of e)d.flatten(p);return new Yt(p,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function h(p){let d;if(p.lines>s&&p instanceof Zr)for(let m of p.children)h(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof Yt&&l&&(d=u[u.length-1])instanceof Yt&&p.lines+d.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new Yt(d.text.concat(p.text),d.length+1+p.length)):(l+p.lines>i&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:Zr.from(u,c)),c=-1,l=u.length=0)}for(let p of e)h(p);return f(),a.length==1?a[0]:new Zr(a,t)}}Ot.empty=new Yt([""],0);function E$(n){let e=-1;for(let t of n)e+=t.length+1;return e}function gh(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function yA(n,e,t){return gh(n,[""],e,t)}class Dl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Yt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Yt?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Yt){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Yt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ZS{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Dl(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class qS{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Ot.prototype[Symbol.iterator]=function(){return this.iter()},Dl.prototype[Symbol.iterator]=ZS.prototype[Symbol.iterator]=qS.prototype[Symbol.iterator]=function(){return this});class C${constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let Xo="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Xo.length;n++)Xo[n]+=Xo[n-1];function I$(n){for(let e=1;e<Xo.length;e+=2)if(Xo[e]>n)return Xo[e-1]<=n;return!1}function OA(n){return n>=127462&&n<=127487}const bA=8205;function rr(n,e,t=!0,r=!0){return(t?KS:R$)(n,e,r)}function KS(n,e,t){if(e==n.length)return e;e&&JS(n.charCodeAt(e))&&eT(n.charCodeAt(e-1))&&e--;let r=Tn(n,e);for(e+=pr(r);e<n.length;){let i=Tn(n,e);if(r==bA||i==bA||t&&I$(i))e+=pr(i),r=i;else if(OA(i)){let s=0,o=e-2;for(;o>=0&&OA(Tn(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function R$(n,e,t){for(;e>0;){let r=KS(n,e-2,t);if(r<e)return r;e--}return 0}function JS(n){return n>=56320&&n<57344}function eT(n){return n>=55296&&n<56320}function Tn(n,e){let t=n.charCodeAt(e);if(!eT(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return JS(r)?(t-55296<<10)+(r-56320)+65536:t}function G0(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function pr(n){return n<65536?1:2}const $g=/\r\n?|\n/;var An=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(An||(An={}));class ei{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){Fg(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new ei(e)}composeDesc(e){return this.empty?e:e.empty?this:tT(this,e)}mapDesc(e,t=!1){return e.empty?this:Wg(this,e,t)}mapPos(e,t=-1,r=An.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=An.Simple&&c>=e&&(r==An.TrackDel&&i<e&&c>e||r==An.TrackBefore&&i<e||r==An.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!a)return e==i||t<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ei(e)}static create(e){return new ei(e)}}class en extends ei{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Fg(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return Wg(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Ot.empty);r.push(o?e.slice(s,s+o):Ot.empty)}s+=o}return new en(t,r)}compose(e){return this.empty?e:e.empty?this:tT(this,e,!0)}map(e,t=!1){return e.empty?this:Wg(this,e,t,!0)}iterChanges(e,t=!1){Fg(this,e,t)}get desc(){return ei.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new rc(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Qn(i,u,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Qn(t,u,h),h>0&&Vs(r,t,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Qn(t,u,-1),Qn(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new en(t,r),filtered:ei.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<t&&Qn(i,t-o,-1);let h=new en(i,s);a=a?a.compose(h.map(a)):h,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let h of u)c(h);else if(u instanceof en){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:h,to:f=h,insert:p}=u;if(h>f||h<0||f>t)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${t})`);let d=p?typeof p=="string"?Ot.of(p.split(r||$g)):p:Ot.empty,m=d.length;if(h==f&&m==0)return;h<o&&l(),h>o&&Qn(i,h-o,-1),Qn(i,f-h,m),Vs(s,i,d),o=f}}return c(e),l(!a),a}static empty(e){return new en(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(Ot.empty);r[i]=Ot.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new en(t,r)}static createSet(e,t){return new en(e,t)}}function Qn(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Vs(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Ot.empty);n.push(t)}}function Fg(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,h=Ot.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(i,c,s,u,h),i=c,s=u}}}function Wg(n,e,t,r=!1){let i=[],s=r?[]:null,o=new rc(n),a=new rc(e);for(let l=0,c=0;;)if(o.ins==-1)l+=o.len,o.next();else if(a.ins==-1&&c<l){let u=Math.min(a.len,l-c);a.forward(u),Qn(i,u,-1),c+=u}else if(a.ins>=0&&(o.done||c<l||c==l&&(a.len<o.len||a.len==o.len&&!t))){for(Qn(i,a.ins,-1);l>c&&!o.done&&l+o.len<c+a.len;)l+=o.len,o.next();c+=a.len,a.next()}else if(o.ins>=0){let u=0,h=l+o.len;for(;;)if(a.ins>=0&&c>l&&c+a.len<h)u+=a.ins,c+=a.len,a.next();else if(a.ins==-1&&c<h){let f=Math.min(a.len,h-c);u+=f,a.forward(f),c+=f}else break;Qn(i,u,o.ins),s&&Vs(s,i,o.text),l=h,o.next()}else{if(o.done&&a.done)return s?en.createSet(i,s):ei.create(i);throw new Error("Mismatched change set lengths")}}function tT(n,e,t=!1){let r=[],i=t?[]:null,s=new rc(n),o=new rc(e);for(let a=!1;;){if(s.done&&o.done)return i?en.createSet(r,i):ei.create(r);if(s.ins==0)Qn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Qn(r,0,o.ins,a),i&&Vs(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Qn(r,l,u,a),i&&u&&Vs(i,r,o.text)}else o.ins==-1?(Qn(r,s.off?0:s.len,l,a),i&&Vs(i,r,s.textBit(l))):(Qn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Vs(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class rc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ot.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Ot.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Xs{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Xs(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ve.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ve.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ve.range(e.anchor,e.head)}static create(e,t,r){return new Xs(e,t,r)}}class ve{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ve.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ve([this.main],0)}addRange(e,t=!0){return ve.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,ve.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ve(e.ranges.map(t=>Xs.fromJSON(t)),e.main)}static single(e,t=e){return new ve([ve.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return ve.normalized(e.slice(),t);r=s.to}return new ve(e,t)}static cursor(e,t=0,r,i){return Xs.create(e,e,(t==0?0:t<0?4:8)|(r==null?3:Math.min(2,r))|(i!=null?i:33554431)<<5)}static range(e,t,r){let i=(r!=null?r:33554431)<<5;return t<e?Xs.create(t,e,16|i|8):Xs.create(e,t,i|(t>e?4:0))}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?ve.range(l,a):ve.range(a,l))}}return new ve(e,t)}}function nT(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let V0=0;class je{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.extensions=s,this.id=V0++,this.default=e([])}static define(e={}){return new je(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:X0),!!e.static,e.enables)}of(e){return new yh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new yh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new yh(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function X0(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class yh{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=V0++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?c=!0:(((t=e[h.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||Ug(h,u)){let p=r(h);if(a?!vA(p,h.values[o],i):!i(p,h.values[o]))return h.values[o]=p,1}return 0},reconfigure:(h,f)=>{let p=r(h),d=f.config.address[s];if(d!=null){let m=Wh(f,d);if(this.dependencies.every(b=>b instanceof je?f.facet(b)===h.facet(b):b instanceof yn?f.field(b,!1)==h.field(b,!1):!0)||(a?vA(p,m,i):i(p,m)))return h.values[o]=m,0}return h.values[o]=p,1}}}}function vA(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function Ug(n,e){let t=!1;for(let r of e)Ll(n,r)&1&&(t=!0);return t}function Q$(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let h=Wh(l,r[u]);if(i[u]==2)for(let f of h)c.push(f);else c.push(h)}return e.combine(c)}return{create(l){for(let c of r)Ll(l,c);return l.values[o]=a(l),1},update(l,c){if(!Ug(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=Ug(l,r),h=c.config.facets[e.id],f=c.facet(e);if(h&&!u&&X0(t,h))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const wA=je.define({static:!0});class yn{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new yn(V0++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(wA).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,wA.of({field:this,create:e})]}get extension(){return this}}const Wo={lowest:4,low:3,default:2,high:1,highest:0};function sl(n){return e=>new rT(e,n)}const bo={highest:sl(Wo.highest),high:sl(Wo.high),default:sl(Wo.default),low:sl(Wo.low),lowest:sl(Wo.lowest)};class rT{constructor(e,t){this.inner=e,this.prec=t}}class nd{of(e){return new zg(this,e)}reconfigure(e){return nd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class zg{constructor(e,t){this.compartment=e,this.inner=t}}class Fh{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let f of P$(e,t,o))f instanceof yn?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=r==null?void 0:r.config.facets;for(let f in s){let p=s[f],d=p[0].facet,m=u&&u[f]||[];if(p.every(b=>b.type==0))if(a[d.id]=l.length<<1|1,X0(m,p))l.push(r.facet(d));else{let b=d.combine(p.map(A=>A.value));l.push(r&&d.compare(b,r.facet(d))?r.facet(d):b)}else{for(let b of p)b.type==0?(a[b.id]=l.length<<1|1,l.push(b.value)):(a[b.id]=c.length<<1,c.push(A=>b.dynamicSlot(A)));a[d.id]=c.length<<1,c.push(b=>Q$(b,d,p))}}let h=c.map(f=>f(a));return new Fh(e,o,h,a,l,s)}}function P$(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof zg&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof zg){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,a)}else if(o instanceof rT)s(o.inner,o.prec);else if(o instanceof yn)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof yh)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,a);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(n,Wo.default),r.reduce((o,a)=>o.concat(a))}function Ll(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function Wh(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const iT=je.define(),sT=je.define({combine:n=>n.some(e=>e),static:!0}),oT=je.define({combine:n=>n.length?n[0]:void 0,static:!0}),aT=je.define(),lT=je.define(),cT=je.define(),uT=je.define({combine:n=>n.length?n[0]:!1});class Di{constructor(e,t){this.type=e,this.value=t}static define(){return new D$}}class D${of(e){return new Di(this,e)}}class L${constructor(e){this.map=e}of(e){return new et(this,e)}}class et{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new et(this.type,t)}is(e){return this.type==e}static define(e={}){return new L$(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}et.reconfigure=et.define();et.appendConfig=et.define();class nn{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&nT(r,t.newLength),s.some(a=>a.type==nn.time)||(this.annotations=s.concat(nn.time.of(Date.now())))}static create(e,t,r,i,s,o){return new nn(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(nn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}nn.time=Di.define();nn.userEvent=Di.define();nn.addToHistory=Di.define();nn.remote=Di.define();function N$(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function hT(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=en.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:et.mapEffects(n.effects,i).concat(et.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function jg(n,e,t){let r=e.selection,i=Yo(e.annotations);return e.userEvent&&(i=i.concat(nn.userEvent.of(e.userEvent))),{changes:e.changes instanceof en?e.changes:en.of(e.changes||[],t,n.facet(oT)),selection:r&&(r instanceof ve?r:ve.single(r.anchor,r.head)),effects:Yo(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function fT(n,e,t){let r=jg(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=hT(r,jg(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=nn.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return M$(t?B$(i):i)}function B$(n){let e=n.startState,t=!0;for(let i of e.facet(aT)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:N$(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=en.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.invertedDesc}n=nn.create(e,i,n.selection&&n.selection.map(s),et.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(lT);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof nn?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof nn?n=s[0]:n=fT(e,Yo(s),!1)}return n}function M$(n){let e=n.startState,t=e.facet(cT),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=hT(n,jg(e,s,n.changes.newLength),!0))}return r==n?n:nn.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const $$=[];function Yo(n){return n==null?$$:Array.isArray(n)?n:[n]}var Ln=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Ln||(Ln={}));const F$=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Hg;try{Hg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function W$(n){if(Hg)return Hg.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||F$.test(t)))return!0}return!1}function U$(n){return e=>{if(!/\S/.test(e))return Ln.Space;if(W$(e))return Ln.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Ln.Word;return Ln.Other}}class ft{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ll(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Ll(this,r),Wh(this,r)}update(...e){return fT(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let o of e.effects)o.is(nd.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,l)=>i.set(l,a)),t=null),i.set(o.value.compartment,o.value.extension)):o.is(et.reconfigure)?(t=null,r=o.value):o.is(et.appendConfig)&&(t=null,r=Yo(r).concat(o.value));let s;t?s=e.startState.values.slice():(t=Fh.resolve(r,i,this),s=new ft(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new ft(t,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ve.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Yo(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(u);let h=i.mapDesc(c,!0);s.push(l.range.map(h)),i=i.compose(u),o=et.mapEffects(o,u).concat(et.mapEffects(Yo(l.effects),h))}return{changes:i,selection:ve.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof en?e:en.of(e,this.doc.length,this.facet(ft.lineSeparator))}toText(e){return Ot.of(e.split(this.facet(ft.lineSeparator)||$g))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Ll(this,t),Wh(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof yn&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r)for(let s in r){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}return ft.create({doc:e.doc,selection:ve.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Fh.resolve(e.extensions||[],new Map),r=e.doc instanceof Ot?e.doc:Ot.of((e.doc||"").split(t.staticFacet(ft.lineSeparator)||$g)),i=e.selection?e.selection instanceof ve?e.selection:ve.single(e.selection.anchor,e.selection.head):ve.single(0);return nT(i,r.length),t.staticFacet(sT)||(i=i.asSingle()),new ft(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ft.tabSize)}get lineBreak(){return this.facet(ft.lineSeparator)||`
`}get readOnly(){return this.facet(uT)}phrase(e,...t){for(let r of this.facet(ft.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(iT))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return U$(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=rr(t,o,!1);if(s(t.slice(l,o))!=Ln.Word)break;o=l}for(;a<i;){let l=rr(t,a);if(s(t.slice(a,l))!=Ln.Word)break;a=l}return o==a?null:ve.range(o+r,a+r)}}ft.allowMultipleSelections=sT;ft.tabSize=je.define({combine:n=>n.length?n[0]:4});ft.lineSeparator=oT;ft.readOnly=uT;ft.phrases=je.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});ft.languageData=iT;ft.changeFilter=aT;ft.transactionFilter=lT;ft.transactionExtender=cT;nd.reconfigure=et.define();function Bi(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class oo{eq(e){return this==e}range(e,t=e){return ic.create(e,t,this)}}oo.prototype.startSide=oo.prototype.endSide=0;oo.prototype.point=!1;oo.prototype.mapMode=An.TrackDel;class ic{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new ic(e,t,r)}}function Gg(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Y0{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,h=this.to[l]+e,f,p;if(u==h){let d=t.mapPos(u,c.startSide,c.mapMode);if(d==null||(f=p=d,c.startSide!=c.endSide&&(p=t.mapPos(u,c.endSide),p<f)))continue}else if(f=t.mapPos(u,c.startSide),p=t.mapPos(h,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),r.push(c),i.push(f-o),s.push(p-o))}return{mapped:r.length?new Y0(i,s,r,a):null,pos:o}}}class vt{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new vt(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(Gg)),this.isEmpty)return t.length?vt.of(t):this;let a=new dT(this,null,-1).goto(0),l=0,c=[],u=new vs;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let h=t[l++];u.addInner(h.from,h.to,h.value)||c.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(ic.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?vt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:h}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),t.push(u),r.push(h))}}let s=this.nextLayer.map(e);return t.length==0?s:new vt(r,t,s||vt.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return sc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return sc.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=AA(o,a,r),c=new ol(o,l,s),u=new ol(a,l,s);r.iterGaps((h,f,p)=>_A(c,h,u,f,p,i)),r.empty&&r.length==0&&_A(c,0,u,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=1e9);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=AA(s,o),l=new ol(s,a,0).goto(r),c=new ol(o,a,0).goto(r);for(;;){if(l.to!=c.to||!Vg(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,t,r,i,s=-1){let o=new ol(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point?(i.point(a,c,o.point,o.activeForPoint(o.to),l,o.pointRank),l=o.openEnd(c)+(o.to>c?1:0)):c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c)),o.to>r)break;a=o.to,o.next()}return l}static of(e,t=!1){let r=new vs;for(let i of e instanceof ic?[e]:t?z$(e):e)r.add(i.from,i.to,i.value);return r.finish()}}vt.empty=new vt([],[],null,-1);function z$(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(Gg(e,r)>0)return n.slice().sort(Gg);e=r}return n}vt.empty.nextLayer=vt.empty;class vs{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Y0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new vs)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(vt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=vt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function AA(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class dT{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class sc{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new dT(o,t,r,s));return i.length==1?i[0]:new sc(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)em(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)em(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),em(this.heap,0)}}}function em(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class ol{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=sc.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Pu(this.active,e),Pu(this.activeTo,e),Pu(this.activeRank,e),this.minActive=xA(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;Du(this.active,t,r),Du(this.activeTo,t,i),Du(this.activeRank,t,s),e&&Du(e,t,this.cursor.from),this.minActive=xA(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null,i=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Pu(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(i=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){let s=0;for(;s<r.length&&r[s]<e;)s++;this.openStart=s+i}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function _A(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=n.to+l-t.to||n.endSide-t.endSide,u=c<0?n.to+l:t.to,h=Math.min(u,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Vg(n.activeForPoint(n.to+l),t.activeForPoint(t.to))||s.comparePoint(a,h,n.point,t.point):h>a&&!Vg(n.active,t.active)&&s.compareRange(a,h,n.active,t.active),u>o)break;a=u,c<=0&&n.next(),c>=0&&t.next()}}function Vg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Pu(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Du(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function xA(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Uc(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=rr(n,i));return r}function Xg(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=rr(n,i)}return r===!0?-1:n.length}const Yg="\u037C",kA=typeof Symbol=="undefined"?"__"+Yg:Symbol.for(Yg),Zg=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),SA=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class ws{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],h=/^@(\w+)\b/.exec(o[0]),f=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let p in a){let d=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(b=>m.replace(/&/,b))).reduce((m,b)=>m.concat(b)),d,l);else if(d&&typeof d=="object"){if(!h)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(i(p),d,u,f)}else d!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+d+";")}(u.length||f)&&l.push((r&&!h&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=SA[kA]||1;return SA[kA]=e+1,Yg+e.toString(36)}static mount(e,t){(e[Zg]||new j$(e)).mount(Array.isArray(t)?t:[t])}}let Lu=null;class j${constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet!="undefined"){if(Lu)return e.adoptedStyleSheets=[Lu.sheet].concat(e.adoptedStyleSheets),e[Zg]=Lu;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Lu=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Zg]=this}mount(e){let t=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),t)for(let l=0;l<o.rules.length;l++)t.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!t){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var As={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Uh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},TA=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),H$=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),G$=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),EA=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),V$=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),X$=TA&&(EA||+TA[1]<57)||G$&&EA;for(var wn=0;wn<10;wn++)As[48+wn]=As[96+wn]=String(wn);for(var wn=1;wn<=24;wn++)As[wn+111]="F"+wn;for(var wn=65;wn<=90;wn++)As[wn]=String.fromCharCode(wn+32),Uh[wn]=String.fromCharCode(wn);for(var tm in As)Uh.hasOwnProperty(tm)||(Uh[tm]=As[tm]);function Y$(n){var e=X$&&(n.ctrlKey||n.altKey||n.metaKey)||(H$||V$)&&n.shiftKey&&n.key&&n.key.length==1,t=!e&&n.key||(n.shiftKey?Uh:As)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function zh(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function aa(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Z$(){let n=document.activeElement;for(;n&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function qg(n,e){if(!e.anchorNode)return!1;try{return aa(n,e.anchorNode)}catch{return!1}}function oc(n){return n.nodeType==3?ac(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function jh(n,e,t,r){return t?CA(n,e,t,r,-1)||CA(n,e,t,r,1):!1}function Kg(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function CA(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Hh(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Kg(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Hh(n):0}else return!1}}function Hh(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const pT={left:0,right:0,top:0,bottom:0};function rd(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function q$(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function K$(n,e,t,r,i,s,o,a){let l=n.ownerDocument,c=l.defaultView;for(let u=n;u;)if(u.nodeType==1){let h,f=u==l.body;if(f)h=q$(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let m=u.getBoundingClientRect();h={left:m.left,right:m.left+u.clientWidth,top:m.top,bottom:m.top+u.clientHeight}}let p=0,d=0;if(i=="nearest")e.top<h.top?(d=-(h.top-e.top+o),t>0&&e.bottom>h.bottom+d&&(d=e.bottom-h.bottom+d+o)):e.bottom>h.bottom&&(d=e.bottom-h.bottom+o,t<0&&e.top-d<h.top&&(d=-(h.top+d-e.top+o)));else{let m=e.bottom-e.top,b=h.bottom-h.top;d=(i=="center"&&m<=b?e.top+m/2-b/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-b+o)-h.top}if(r=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),t>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,t<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||d)if(f)c.scrollBy(p,d);else{if(d){let m=u.scrollTop;u.scrollTop+=d,d=u.scrollTop-m}if(p){let m=u.scrollLeft;u.scrollLeft+=p,p=u.scrollLeft-m}e={left:e.left-p,top:e.top-d,right:e.right-p,bottom:e.bottom-d}}if(f)break;u=u.assignedSlot||u.parentNode,r=i="nearest"}else if(u.nodeType==11)u=u.host;else break}class J${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let No=null;function mT(n){if(n.setActive)return n.setActive();if(No)return n.focus(No);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(No==null?{get preventScroll(){return No={preventScroll:!0},!0}}:void 0),!No){No=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let IA;function ac(n,e,t=e){let r=IA||(IA=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Nl(n,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,n.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function eF(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function gT(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}class _n{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new _n(e.parentNode,Kg(e),t)}static after(e,t){return new _n(e.parentNode,Kg(e)+1,t)}}const Z0=[];class Ut{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,r=null,i;for(let s of this.children){if(s.dirty){if(!s.dom&&(i=r?r.nextSibling:t.firstChild)){let o=Ut.get(i);(!o||!o.parent&&o.constructor==s.constructor)&&s.reuseDOM(i)}s.sync(e),s.dirty=0}if(i=r?r.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&i!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;i&&i!=s.dom;)i=RA(i);else t.insertBefore(s.dom,i);r=s.dom}for(i=r?r.nextSibling:t.firstChild,i&&e&&e.node==t&&(e.written=!0);i;)i=RA(i)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=Hh(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Ut.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let h=this.children[l],f=c+h.length;if(c<e&&f>t)return h.domBoundsAround(e,t,c);if(f>=e&&i==-1&&(i=l,s=c),c>t&&h.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+h.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=Z0){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new yT(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,r,i,s,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}Ut.prototype.breakAfter=0;function RA(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class yT{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function OT(n,e,t,r,i,s,o,a,l){let{children:c}=n,u=c.length?c[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:o;if(!(e==r&&u&&!o&&!f&&s.length<2&&u.merge(t,i,s.length?h:null,t==0,a,l))){if(r<c.length){let p=c[r];p&&i<p.length?(e==r&&(p=p.split(i),i=0),!f&&h&&p.merge(0,i,h,!0,0,l)?s[s.length-1]=p:(i&&p.merge(0,i,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(h?h.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function bT(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),h=e-t;for(let f of r)h+=f.length;n.length+=h,OT(n,c,u,a,l,r,0,i,s)}let er=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Jg=typeof document!="undefined"?document:{documentElement:{style:{}}};const ey=/Edge\/(\d+)/.exec(er.userAgent),vT=/MSIE \d/.test(er.userAgent),ty=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(er.userAgent),id=!!(vT||ty||ey),QA=!id&&/gecko\/(\d+)/i.test(er.userAgent),nm=!id&&/Chrome\/(\d+)/.exec(er.userAgent),PA="webkitFontSmoothing"in Jg.documentElement.style,wT=!id&&/Apple Computer/.test(er.vendor),DA=wT&&(/Mobile\/\w+/.test(er.userAgent)||er.maxTouchPoints>2);var He={mac:DA||/Mac/.test(er.platform),windows:/Win/.test(er.platform),linux:/Linux|X11/.test(er.platform),ie:id,ie_version:vT?Jg.documentMode||6:ty?+ty[1]:ey?+ey[1]:0,gecko:QA,gecko_version:QA?+(/Firefox\/(\d+)/.exec(er.userAgent)||[0,0])[1]:0,chrome:!!nm,chrome_version:nm?+nm[1]:0,ios:DA,android:/Android\b/.test(er.userAgent),webkit:PA,safari:wT,webkit_version:PA?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Jg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const tF=256;class _s extends Ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return r&&(!(r instanceof _s)||this.length-(t-e)+r.length>tF)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new _s(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new _n(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return ny(this.dom,e,t)}}class ni extends Ut{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(gT(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,r,i,s,o){return r&&(!(r instanceof ni&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(bT(this,e,t,r?r.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new ni(this.mark,t,o)}domAtPos(e){return xT(this.dom,this.children,e)}coordsAt(e,t){return ST(this,e,t)}}function ny(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?He.chrome||He.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=ac(n,i,s).getClientRects();if(!a.length)return pT;let l=a[(o?o<0:t>=0)?0:a.length-1];return He.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?rd(l,o<0):l||null}class rs extends Ut{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||rs)(e,t,r)}split(e){let t=rs.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof rs)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof rs&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ot.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Ot.empty}domAtPos(e){return e==0?_n.before(this.dom):_n.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.dom.getClientRects(),i=null;if(!r.length)return pT;for(let s=e>0?r.length-1:0;i=r[s],!(e>0?s==0:s==r.length-1||i.top<i.bottom);s+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?i:rd(i,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class AT extends rs{domAtPos(e){let{topView:t,text:r}=this.widget;return t?ry(e,0,t,r,(i,s)=>i.domAtPos(s),i=>new _n(r,Math.min(i,r.nodeValue.length))):new _n(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:i}=this.widget;return r?_T(e,t,r,i):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:i}=this.widget;return r?ry(e,t,r,i,(s,o,a)=>s.coordsAt(o,a),(s,o)=>ny(i,s,o)):ny(i,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function ry(n,e,t,r,i,s){if(t instanceof ni){for(let o of t.children){let a=aa(o.dom,r),l=a?r.nodeValue.length:o.length;if(n<l||n==l&&o.getSide()<=0)return a?ry(n,e,o,r,i,s):i(o,n,e);n-=l}return i(t,t.length,-1)}else return t.dom==r?s(n,e):i(t,n,e)}function _T(n,e,t,r){if(t instanceof ni)for(let i of t.children){let s=0,o=aa(i.dom,r);if(aa(i.dom,n))return s+(o?_T(n,e,i,r):i.localPosFromDOM(n,e));s+=o?r.nodeValue.length:i.length}else if(t.dom==r)return Math.min(e,r.nodeValue.length);return t.localPosFromDOM(n,e)}class la extends Ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof la&&e.side==this.side}split(){return new la(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return _n.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),r=nF(this,this.side>0?-1:1);return r&&r.top<t.bottom&&r.bottom>t.top?{left:t.left,right:t.right,top:r.top,bottom:r.bottom}:t}get overrideDOMText(){return Ot.empty}}_s.prototype.children=rs.prototype.children=la.prototype.children=Z0;function nF(n,e){let t=n.parent,r=t?t.children.indexOf(n):-1;for(;t&&r>=0;)if(e<0?r>0:r<t.children.length){let i=t.children[r+e];if(i instanceof _s){let s=i.coordsAt(e<0?i.length:0,e);if(s)return s}r+=e}else if(t instanceof ni&&t.parent)r=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let i=t.dom.lastChild;if(i&&i.nodeName=="BR")return i.getClientRects()[0];break}}function xT(n,e,t){let r=0;for(let i=0;r<e.length;r++){let s=e[r],o=i+s.length;if(!(o==i&&s.getSide()<=0)){if(t>i&&t<o&&s.dom.parentNode==n)return s.domAtPos(t-i);if(t<=i)break;i=o}}for(;r>0;r--){let i=e[r-1].dom;if(i.parentNode==n)return _n.after(i)}return new _n(n,0)}function kT(n,e,t){let r,{children:i}=n;t>0&&e instanceof ni&&i.length&&(r=i[i.length-1])instanceof ni&&r.mark.eq(e.mark)?kT(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function ST(n,e,t){for(let s=0,o=0;o<n.children.length;o++){let a=n.children[o],l=s+a.length,c;if((t<=0||l==n.length||a.getSide()>0?l>=e:l>e)&&(e<l||o+1==n.children.length||(c=n.children[o+1]).length||c.getSide()>0)){let u=0;if(l==s){if(a.getSide()<=0)continue;u=t=-a.getSide()}let h=a.coordsAt(Math.max(0,e-s),t);return u&&h?rd(h,t<0):h}s=l}let r=n.dom.lastChild;if(!r)return n.dom.getBoundingClientRect();let i=oc(r);return i[i.length-1]||null}function iy(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function q0(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i of t)if(r.indexOf(i)==-1||n[i]!==e[i])return!1;return!0}function sy(n,e,t){let r=null;if(e)for(let i in e)t&&i in t||n.removeAttribute(r=i);if(t)for(let i in t)e&&e[i]==t[i]||n.setAttribute(r=i,t[i]);return!!r}class Mi{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Ct=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Ct||(Ct={}));class Me extends oo{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new sd(e)}static widget(e){let t=e.side||0,r=!!e.block;return t+=r?t>0?3e8:-4e8:t>0?1e8:-1e8,new ao(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=TT(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new ao(e,r,i,t,e.widget||null,!0)}static line(e){return new zc(e)}static set(e,t=!1){return vt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Me.none=vt.empty;class sd extends Me{constructor(e){let{start:t,end:r}=TT(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof sd&&this.tagName==e.tagName&&this.class==e.class&&q0(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}sd.prototype.point=!1;class zc extends Me{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof zc&&q0(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}zc.prototype.mapMode=An.TrackBefore;zc.prototype.point=!0;class ao extends Me{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?An.TrackBefore:An.TrackAfter:An.TrackDel}get type(){return this.startSide<this.endSide?Ct.WidgetRange:this.startSide<=0?Ct.WidgetBefore:Ct.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof ao&&rF(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ao.prototype.point=!0;function TT(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t!=null?t:e,end:r!=null?r:e}}function rF(n,e){return n==e||!!(n&&e&&n.compare(e))}function oy(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Nn extends Ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof Nn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),bT(this,e,t,r?r.children:[],s,o),!0}split(e){let t=new Nn;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){q0(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){kT(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=iy(t,this.attrs||{})),r&&(this.attrs=iy({class:r},this.attrs||{}))}domAtPos(e){return xT(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(gT(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(sy(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let r=this.dom.lastChild;for(;r&&Ut.get(r)instanceof ni;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((t=Ut.get(r))===null||t===void 0?void 0:t.isEditable)==!1&&(!He.ios||!this.children.some(i=>i instanceof _s))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof _s))return null;let r=oc(t.dom);if(r.length!=1)return null;e+=r[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return ST(this,e,t)}become(e){return!1}get type(){return Ct.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof Nn)return s;if(o>t)break}i=o+s.breakAfter}return null}}class eo extends Ut{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof eo)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?_n.before(this.dom):_n.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new eo(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return Z0}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ot.empty}domBoundsAround(){return null}become(e){return e instanceof eo&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class K0{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof eo&&e.type==Ct.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Nn),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Nu(new la(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,r)),this.getLine().append(Nu(new _s(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof ao){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof ao)if(r.block){let{type:l}=r;l==Ct.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new eo(r.widget||new LA("div"),a,l))}else{let l=rs.create(r.widget||new LA("span"),a,r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),u=!l.isEditable&&(e<t||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(Nu(new la(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(Nu(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new K0(e,t,r,s);return o.openEnd=vt.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Nu(n,e){for(let t of e)n=new ni(t,[n],n.length);return n}class LA extends Mi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const ET=je.define(),CT=je.define(),IT=je.define(),RT=je.define(),ay=je.define(),QT=je.define(),PT=je.define({combine:n=>n.some(e=>e)});class Gh{constructor(e,t="nearest",r="nearest",i=5,s=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new Gh(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const NA=et.define({map:(n,e)=>n.map(e)});function sr(n,e,t){let r=n.facet(RT);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const jc=je.define({combine:n=>n.length?n[0]:!0});let iF=0;const _l=je.define();class Zt{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:s}=t||{};return new Zt(iF++,e,r,o=>{let a=[_l.of(o)];return s&&a.push(lc.of(l=>{let c=l.plugin(o);return c?s(c):Me.none})),i&&a.push(i(o)),a})}static fromClass(e,t){return Zt.define(r=>new e(r),t)}}class rm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(sr(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){sr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){sr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const DT=je.define(),LT=je.define(),lc=je.define(),NT=je.define(),BT=je.define(),xl=je.define();class Si{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new Si(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<t.length&&t[s]<u;){let h=t[s],f=t[s+1],p=Math.max(a,h),d=Math.min(u,f);if(p<=d&&new Si(p+c,d+c,p,d).addToSet(r),f>u)break;s+=2}if(!l)return r;new Si(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class Vh{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=en.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,a,l,c)=>i.push(new Si(o,a,l,c))),this.changedRanges=i;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,r){return new Vh(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Gt=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Gt||(Gt={}));const ly=Gt.LTR,sF=Gt.RTL;function MT(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const oF=MT("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),aF=MT("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),cy=Object.create(null),Ur=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);cy[e]=t,cy[t]=-e}function lF(n){return n<=247?oF[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?aF[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203||n==8204?256:1}const cF=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Zo{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?sF:ly}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const jt=[];function uF(n,e){let t=n.length,r=e==ly?1:2,i=e==ly?2:1;if(!n||r==1&&!cF.test(n))return $T(t);for(let o=0,a=r,l=r;o<t;o++){let c=lF(n.charCodeAt(o));c==512?c=a:c==8&&l==4&&(c=16),jt[o]=c==4?2:c,c&7&&(l=c),a=c}for(let o=0,a=r,l=r;o<t;o++){let c=jt[o];if(c==128)o<t-1&&a==jt[o+1]&&a&24?c=jt[o]=a:jt[o]=256;else if(c==64){let u=o+1;for(;u<t&&jt[u]==64;)u++;let h=o&&a==8||u<t&&jt[u]==8?l==1?1:8:256;for(let f=o;f<u;f++)jt[f]=h;o=u-1}else c==8&&l==1&&(jt[o]=1);a=c,c&7&&(l=c)}for(let o=0,a=0,l=0,c,u,h;o<t;o++)if(u=cy[c=n.charCodeAt(o)])if(u<0){for(let f=a-3;f>=0;f-=3)if(Ur[f+1]==-u){let p=Ur[f+2],d=p&2?r:p&4?p&1?i:r:0;d&&(jt[o]=jt[Ur[f]]=d),a=f;break}}else{if(Ur.length==189)break;Ur[a++]=o,Ur[a++]=c,Ur[a++]=l}else if((h=jt[o])==2||h==1){let f=h==r;l=f?0:1;for(let p=a-3;p>=0;p-=3){let d=Ur[p+2];if(d&2)break;if(f)Ur[p+2]|=2;else{if(d&4)break;Ur[p+2]|=4}}}for(let o=0;o<t;o++)if(jt[o]==256){let a=o+1;for(;a<t&&jt[a]==256;)a++;let l=(o?jt[o-1]:r)==1,c=(a<t?jt[a]:r)==1,u=l==c?l?1:2:r;for(let h=o;h<a;h++)jt[h]=u;o=a-1}let s=[];if(r==1)for(let o=0;o<t;){let a=o,l=jt[o++]!=1;for(;o<t&&l==(jt[o]!=1);)o++;if(l)for(let c=o;c>a;){let u=c,h=jt[--c]!=2;for(;c>a&&h==(jt[c-1]!=2);)c--;s.push(new Zo(c,u,h?2:1))}else s.push(new Zo(a,o,0))}else for(let o=0;o<t;){let a=o,l=jt[o++]==2;for(;o<t&&l==(jt[o]==2);)o++;s.push(new Zo(a,o,l?1:2))}return s}function $T(n){return[new Zo(0,n,0)]}let FT="";function hF(n,e,t,r,i){var s;let o=r.head-n.from,a=-1;if(o==0){if(!i||!n.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),a=0)}else if(o==n.length){if(i)return null;let f=e[e.length-1];f.level!=t&&(o=f.side(!0,t),a=e.length-1)}a<0&&(a=Zo.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc));let l=e[a];o==l.side(i,t)&&(l=e[a+=i?1:-1],o=l.side(!i,t));let c=i==(l.dir==t),u=rr(n.text,o,c);if(FT=n.text.slice(Math.min(o,u),Math.max(o,u)),u!=l.side(i,t))return ve.cursor(u+n.from,c?-1:1,l.level);let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!h&&l.level!=t?ve.cursor(i?n.to:n.from,i?-1:1,t):h&&h.level<l.level?ve.cursor(h.side(!i,t)+n.from,i?1:-1,h.level):ve.cursor(u+n.from,i?-1:1,l.level)}const is="\uFFFF";class WT{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ft.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=is}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let s=i.nextSibling;if(s==t)break;let o=Ut.get(i),a=Ut.get(s);(o&&a?o.breakAfter:(o?o.breakAfter:BA(i))||BA(s)&&(i.nodeName!="BR"||i.cmIgnore))&&this.lineBreak(),i=s}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=Ut.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function BA(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class MA{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class $A extends Ut{constructor(e){super(),this.view=e,this.compositionDeco=Me.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Nn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Si(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:a})=>a<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Me.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=dF(this.view,e.changes)),(He.ie||He.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,i=this.updateDeco(),s=yF(r,i,e.changes);return t=Si.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=He.chrome||He.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof eo&&s.widget instanceof FA&&i.push(s.dom);r.updateGaps(i)}updateChildren(e,t){let r=this.childCursor(t);for(let i=e.length-1;;i--){let s=i>=0?e[i]:null;if(!s)break;let{fromA:o,toA:a,fromB:l,toB:c}=s,{content:u,breakAtStart:h,openStart:f,openEnd:p}=K0.build(this.view.state.doc,l,c,this.decorations,this.dynamicDecorationMap),{i:d,off:m}=r.findPos(a,1),{i:b,off:A}=r.findPos(o,-1);OT(this,b,A,d,m,u,h,f,p)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||He.ios&&this.view.inputState.rapidCompositionStart)return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,s=this.domAtPos(i.anchor),o=i.empty?s:this.domAtPos(i.head);if(He.gecko&&i.empty&&fF(s)){let l=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(l,s.node.childNodes[s.offset]||null)),s=o=new _n(l,0),r=!0}let a=this.view.observer.selectionRange;(r||!a.focusNode||!jh(s.node,s.offset,a.anchorNode,a.anchorOffset)||!jh(o.node,o.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{He.android&&He.chrome&&this.dom.contains(a.focusNode)&&OF(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=zh(this.root);if(i.empty){if(He.gecko){let c=mF(s.node,s.offset);if(c&&c!=3){let u=zT(s.node,s.offset,c==1?1:-1);u&&(s=new _n(u,c==1?0:u.nodeValue.length))}}l.collapse(s.node,s.offset),i.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=i.bidiLevel)}else if(l.extend)l.collapse(s.node,s.offset),l.extend(o.node,o.offset);else{let c=document.createRange();i.anchor>i.head&&([s,o]=[o,s]),c.setEnd(o.node,o.offset),c.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(c)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new _n(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new _n(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=zh(this.root);if(!e.empty||!e.assoc||!t.modify)return;let r=Nn.find(this,e.head);if(!r)return;let i=r.posAtStart;if(e.head==i||e.head==i+r.length)return;let s=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!s||!o||s.bottom>o.top)return;let a=this.domAtPos(e.head+e.assoc);t.collapse(a.node,a.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(jc)?this.root.activeElement==this.dom:qg(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let r=Ut.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof Nn)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],o=r-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Ct.WidgetBefore&&s.type!=Ct.WidgetAfter&&(!i||t==2||this.children[i-1].breakAfter||this.children[i-1].type==Ct.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);r=o}}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Gt.LTR;for(let c=0,u=0;u<this.children.length;u++){let h=this.children[u],f=c+h.length;if(f>i)break;if(c>=r){let p=h.dom.getBoundingClientRect();if(t.push(p.height),o){let d=h.dom.lastChild,m=d?oc(d):[];if(m.length){let b=m[m.length-1],A=l?b.right-p.left:p.right-b.left;A>a&&(a=A,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Gt.RTL:Gt.LTR}measureTextSize(){for(let i of this.children)if(i instanceof Nn){let s=i.measureTextSize();if(s)return s}let e=document.createElement("div"),t,r;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=oc(e.firstChild)[0];t=e.getBoundingClientRect().height,r=i?i.width/27:7,e.remove()}),{lineHeight:t,charWidth:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new yT(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=t.lineBlockAt(o).bottom-t.lineBlockAt(r).top;e.push(Me.replace({widget:new FA(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Me.set(e)}updateDeco(){let e=this.view.state.facet(lc).map((t,r)=>(this.dynamicDecorationMap[r]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=0,o=0,a=0,l=0;for(let u of this.view.state.facet(BT).map(h=>h(this.view)))if(u){let{left:h,right:f,top:p,bottom:d}=u;h!=null&&(s=Math.max(s,h)),f!=null&&(o=Math.max(o,f)),p!=null&&(a=Math.max(a,p)),d!=null&&(l=Math.max(l,d))}let c={left:r.left-s,top:r.top-a,right:r.right+o,bottom:r.bottom+l};K$(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Gt.LTR)}}function fF(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class FA extends Mi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function UT(n){let e=n.observer.selectionRange,t=e.focusNode&&zT(e.focusNode,e.focusOffset,0);if(!t)return null;let r=n.docView.nearest(t);if(!r)return null;if(r instanceof Nn){let i=t;for(;i.parentNode!=r.dom;)i=i.parentNode;let s=i.previousSibling;for(;s&&!Ut.get(s);)s=s.previousSibling;let o=s?Ut.get(s).posAtEnd:r.posAtStart;return{from:o,to:o,node:i,text:t}}else{for(;;){let{parent:s}=r;if(!s)return null;if(s instanceof Nn)break;r=s}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:t}}}function dF(n,e){let t=UT(n);if(!t)return Me.none;let{from:r,to:i,node:s,text:o}=t,a=e.mapPos(r,1),l=Math.max(a,e.mapPos(i,-1)),{state:c}=n,u=s.nodeType==3?s.nodeValue:new WT([],c).readRange(s.firstChild,null).text;if(l-a<u.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+u.length),is)==u)l=a+u.length;else if(c.doc.sliceString(Math.max(0,l-u.length),l,is)==u)a=l-u.length;else return Me.none;else if(c.doc.sliceString(a,l,is)!=u)return Me.none;let h=Ut.get(s);return h instanceof AT?h=h.widget.topView:h&&(h.parent=null),Me.set(Me.replace({widget:new pF(s,o,h),inclusive:!0}).range(a,l))}class pF extends Mi{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return AT}}function zT(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=Hh(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function mF(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class gF{constructor(){this.changes=[]}compareRange(e,t){oy(e,t,this.changes)}comparePoint(e,t){oy(e,t,this.changes)}}function yF(n,e,t){let r=new gF;return vt.compare(n,e,t,r),r.changes}function OF(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function bF(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return ve.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=rr(i.text,s,!1):a=rr(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=rr(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=rr(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return ve.range(o+i.from,a+i.from)}function vF(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function wF(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function im(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function WA(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function UA(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function uy(n,e,t){let r,i,s,o,a,l,c,u;for(let p=n.firstChild;p;p=p.nextSibling){let d=oc(p);for(let m=0;m<d.length;m++){let b=d[m];i&&im(i,b)&&(b=WA(UA(b,i.bottom),i.top));let A=vF(e,b),g=wF(t,b);if(A==0&&g==0)return p.nodeType==3?zA(p,e,t):uy(p,e,t);(!r||o>g||o==g&&s>A)&&(r=p,i=b,s=A,o=g),A==0?t>b.bottom&&(!c||c.bottom<b.bottom)?(a=p,c=b):t<b.top&&(!u||u.top>b.top)&&(l=p,u=b):c&&im(c,b)?c=UA(c,b.bottom):u&&im(u,b)&&(u=WA(u,b.top))}}if(c&&c.bottom>=t?(r=a,i=c):u&&u.top<=t&&(r=l,i=u),!r)return{node:n,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return zA(r,h,t);if(!s&&r.contentEditable=="true")return uy(r,h,t);let f=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:f}}function zA(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=ac(n,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let h=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&h<s){let f=e>=(u.left+u.right)/2,p=f;if((He.chrome||He.gecko)&&ac(n,a).getBoundingClientRect().left==u.right&&(p=!f),h<=0)return{node:n,offset:a+(p?1:0)};i=a+(p?1:0),s=h}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function jT(n,{x:e,y:t},r,i=-1){var s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:c}=n.viewState,u=t-a;if(u<0)return 0;if(u>c)return n.state.doc.length;for(let A=n.defaultLineHeight/2,g=!1;l=n.elementAtHeight(u),l.type!=Ct.Text;)for(;u=i>0?l.bottom+A:l.top-A,!(u>=0&&u<=c);){if(g)return r?null:0;g=!0,i=-i}t=a+u;let h=l.from;if(h<n.viewport.from)return n.viewport.from==0?0:r?null:jA(n,o,l,e,t);if(h>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:r?null:jA(n,o,l,e,t);let f=n.dom.ownerDocument,p=n.root.elementFromPoint?n.root:f,d=p.elementFromPoint(e,t);d&&!n.contentDOM.contains(d)&&(d=null),d||(e=Math.max(o.left+1,Math.min(o.right-1,e)),d=p.elementFromPoint(e,t),d&&!n.contentDOM.contains(d)&&(d=null));let m,b=-1;if(d&&((s=n.docView.nearest(d))===null||s===void 0?void 0:s.isEditable)!=!1){if(f.caretPositionFromPoint){let A=f.caretPositionFromPoint(e,t);A&&({offsetNode:m,offset:b}=A)}else if(f.caretRangeFromPoint){let A=f.caretRangeFromPoint(e,t);A&&({startContainer:m,startOffset:b}=A,He.safari&&AF(m,b,e)&&(m=void 0))}}if(!m||!n.docView.dom.contains(m)){let A=Nn.find(n.docView,h);if(!A)return u>l.top+l.height/2?l.to:l.from;({node:m,offset:b}=uy(A.dom,e,t))}return n.docView.posFromDOM(m,b)}function jA(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);n.lineWrapping&&t.height>n.defaultLineHeight*1.5&&(s+=Math.floor((i-t.top)/n.defaultLineHeight)*n.viewState.heightOracle.lineLength);let o=n.state.sliceDoc(t.from,t.to);return t.from+Xg(o,s,n.state.tabSize)}function AF(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return ac(n,r-1,r).getBoundingClientRect().left>t}function _F(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=!r||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=n.dom.getBoundingClientRect(),c=n.textDirectionAt(i.from),u=n.posAtCoords({x:t==(c==Gt.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(u!=null)return ve.cursor(u,t?-1:1)}let o=Nn.find(n.docView,e.head),a=o?t?o.posAtEnd:o.posAtStart:t?i.to:i.from;return ve.cursor(a,t?-1:1)}function HA(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,l=null;;){let c=hF(i,s,o,a,t),u=FT;if(!c){if(i.number==(t?n.state.doc.lines:1))return a;u=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),c=ve.cursor(t?i.from:i.to)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function xF(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==Ln.Space&&(i=o),i==o}}function kF(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return ve.cursor(i,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(i),u=n.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-p.from))),a=(s<0?p.top:p.bottom)+u}let h=l.left+o,f=r!=null?r:n.defaultLineHeight>>1;for(let p=0;;p+=10){let d=a+(f+p)*s,m=jT(n,{x:h,y:d},!1,s);if(d<l.top||d>l.bottom||(s<0?m<i:m>i))return ve.cursor(m,e.assoc,void 0,o)}}function sm(n,e,t){let r=n.state.facet(NT).map(i=>i(n));for(;;){let i=!1;for(let s of r)s.between(t.from-1,t.from+1,(o,a,l)=>{t.from>o&&t.from<a&&(t=e.from>t.from?ve.cursor(o,1):ve.cursor(a,-1),i=!0)});if(!i)return t}}class SF{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in pn){let r=pn[t];e.contentDOM.addEventListener(t,i=>{!GA(e,i)||this.ignoreDuringComposition(i)||t=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,i)?i.preventDefault():r(e,i))}),this.registeredEvents.push(t)}He.chrome&&He.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,He.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let s of t)if(i=(r=s.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let o in i)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{!GA(e,a)||this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(o){sr(t.state,o)}}return!1}runScrollHandlers(e,t){for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(s){sr(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(He.android&&He.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return He.ios&&(r=HT.find(i=>i.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=r,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Nl(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:He.safari&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!He.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const HT=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],GT=[16,17,18,20,91,92,224,225];class TF{constructor(e,t,r,i){this.view=e,this.style=r,this.mustSelect=i,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ft.allowMultipleSelections)&&EF(e,t),this.dragMove=CF(e,t),this.dragging=IF(e,t)&&J0(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function EF(n,e){let t=n.state.facet(ET);return t.length?t[0](e):He.mac?e.metaKey:e.ctrlKey}function CF(n,e){let t=n.state.facet(CT);return t.length?t[0](e):He.mac?!e.altKey:!e.ctrlKey}function IF(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=zh(n.root);if(r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function GA(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Ut.get(t))&&r.ignoreEvent(e))return!1;return!0}const pn=Object.create(null),VT=He.ie&&He.ie_version<15||He.ios&&He.webkit_version<604;function RF(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),XT(n,t.value)},50)}function XT(n,e){let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(hy!=null&&t.selection.ranges.every(l=>l.empty)&&hy==s.toString()){let l=-1;r=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let h=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:h},range:ve.cursor(c.from+h.length)}})}else o?r=t.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:ve.cursor(l.from+c.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}pn.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():GT.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};let YT=0;pn.touchstart=(n,e)=>{YT=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};pn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};pn.mousedown=(n,e)=>{if(n.observer.flush(),YT>Date.now()-2e3&&J0(e)==1)return;let t=null;for(let r of n.state.facet(IT))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=DF(n,e)),t){let r=n.root.activeElement!=n.contentDOM;r&&n.observer.ignore(()=>mT(n.contentDOM)),n.inputState.startMouseSelection(new TF(n,e,t,r))}};function VA(n,e,t,r){if(r==1)return ve.cursor(e,t);if(r==2)return bF(n.state,e,t);{let i=Nn.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,ve.range(o,a)}}let ZT=(n,e)=>n>=e.top&&n<=e.bottom,XA=(n,e,t)=>ZT(e,t)&&n>=t.left&&n<=t.right;function QF(n,e,t,r){let i=Nn.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&XA(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&XA(t,r,a)?1:o&&ZT(r,o)?-1:1}function YA(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:QF(n,t,e.clientX,e.clientY)}}const PF=He.ie&&He.ie_version<=11;let ZA=null,qA=0,KA=0;function J0(n){if(!PF)return n.detail;let e=ZA,t=KA;return ZA=n,KA=Date.now(),qA=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(qA+1)%3:1}function DF(n,e){let t=YA(n,e),r=J0(e),i=n.state.selection,s=t,o=e;return{update(a){a.docChanged&&(t&&(t.pos=a.changes.mapPos(t.pos)),i=i.map(a.changes),o=null)},get(a,l,c){let u;if(o&&a.clientX==o.clientX&&a.clientY==o.clientY?u=s:(u=s=YA(n,a),o=a),!u||!t)return i;let h=VA(n,u.pos,u.bias,r);if(t.pos!=u.pos&&!l){let f=VA(n,t.pos,t.bias,r),p=Math.min(f.from,h.from),d=Math.max(f.to,h.to);h=p<h.from?ve.range(p,d):ve.range(d,p)}return l?i.replaceRange(i.main.extend(h.from,h.to)):c?i.addRange(h):ve.create([h])}}}pn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:r}=n.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function JA(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=n.inputState,o=r&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,a={from:i,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}pn.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),i=0,s=()=>{++i==t.length&&JA(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}}else JA(n,e,e.dataTransfer.getData("Text"),!0)};pn.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=VT?null:e.clipboardData;t?(XT(n,t.getData("text/plain")),e.preventDefault()):RF(n)};function LF(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function NF(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}let hy=null;pn.copy=pn.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=NF(n.state);if(!t&&!i)return;hy=i?t:null;let s=VT?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):LF(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};function qT(n){setTimeout(()=>{n.hasFocus!=n.inputState.notifiedFocused&&n.update([])},10)}pn.focus=qT;pn.blur=n=>{n.observer.clearSelectionRange(),qT(n)};function KT(n,e){if(n.docView.compositionDeco.size){n.inputState.rapidCompositionStart=e;try{n.update([])}finally{n.inputState.rapidCompositionStart=!1}}}pn.compositionstart=pn.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0,n.docView.compositionDeco.size&&(n.observer.flush(),KT(n,!0)))};pn.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,setTimeout(()=>{n.inputState.composing<0&&KT(n,!1)},50)};pn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};pn.beforeinput=(n,e)=>{var t;let r;if(He.chrome&&He.android&&(r=HT.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const e1=["pre-wrap","normal","pre-line","break-spaces"];class BF{constructor(){this.doc=Ot.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength)),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return e1.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s){let o=e1.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=r,this.lineLength=i,a){this.heightSamples={};for(let l=0;l<s.length;l++){let c=s[l];c<0?l++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class MF{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ss{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new ss(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Qt=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Qt||(Qt={}));const Oh=.001;class Hn{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Oh&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return Hn.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:c,toB:u}=i[o],h=s.lineAt(a,Qt.ByPosNoHeight,t,0,0),f=h.to>=l?h:s.lineAt(l,Qt.ByPosNoHeight,t,0,0);for(u+=f.to-l,l=f.to;o>0&&h.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<h.from&&(h=s.lineAt(a,Qt.ByPosNoHeight,t,0,0));c+=h.from-a,a=h.from;let p=eO.build(r,e,c,u);s=s.replace(a,l,p)}return s.updateHeight(r,0)}static empty(){return new Jn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new $F(Hn.of(e.slice(0,t)),o,Hn.of(e.slice(r)))}}Hn.prototype.size=1;class JT extends Hn{constructor(e,t,r){super(e,t),this.type=r}blockAt(e,t,r,i){return new ss(i,this.length,r,this.height,this.type)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Jn extends JT{constructor(e,t){super(e,t,Ct.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof Jn||i instanceof bn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof bn?i=new Jn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Hn.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class bn extends Hn{constructor(e){super(e,0)}lines(e,t){let r=e.lineAt(t).number,i=e.lineAt(t+this.length).number;return{firstLine:r,lastLine:i,lineHeight:this.height/(i-r+1)}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,lineHeight:a}=this.lines(t,i),l=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:u}=t.line(s+l);return new ss(c,u,r+a*l,a,Ct.Text)}lineAt(e,t,r,i,s){if(t==Qt.ByHeight)return this.blockAt(e,r,i,s);if(t==Qt.ByPosNoHeight){let{from:h,to:f}=r.lineAt(e);return new ss(h,f-h,0,0,Ct.Text)}let{firstLine:o,lineHeight:a}=this.lines(r,s),{from:l,length:c,number:u}=r.lineAt(e);return new ss(l,c,i+a*(u-o),a,Ct.Text)}forEachLine(e,t,r,i,s,o){let{firstLine:a,lineHeight:l}=this.lines(r,s);for(let c=Math.max(e,s),u=Math.min(s+this.length,t);c<=u;){let h=r.lineAt(c);c==e&&(i+=l*(h.number-a)),o(new ss(h.from,h.length,i,l,Ct.Text)),i+=l,c=h.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof bn?r[r.length-1]=new bn(s.length+i):r.push(null,new bn(i-1))}if(e>0){let s=r[0];s instanceof bn?r[0]=new bn(e+s.length):r.unshift(new bn(e-1),null)}return Hn.of(r)}decomposeLeft(e,t){t.push(new bn(e-1),null)}decomposeRight(e,t){t.push(null,new bn(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1,c=e.heightChanged;for(i.from>t&&o.push(new bn(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let h=e.doc.lineAt(a).length;o.length&&o.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=Oh&&(l=-2);let p=new Jn(h,f);p.outdated=!1,o.push(p),a+=h+1}a<=s&&o.push(null,new bn(s-a).updateHeight(e,a));let u=Hn.of(o);return e.heightChanged=c||l<0||Math.abs(u.height-this.height)>=Oh||Math.abs(l-this.lines(e.doc,t).lineHeight)>=Oh,u}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class $F extends Hn{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=t==Qt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=t==Qt.ByPosNoHeight?Qt.ByPosNoHeight:Qt.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,o),t>=l&&this.right.forEachLine(e,t,r,a,l,o);else{let c=this.lineAt(l,Qt.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,r,a,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&t1(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),t1(s,a)}return Hn.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Hn.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function t1(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof bn&&(r=n[e+1])instanceof bn&&n.splice(e-1,3,new bn(t.length+1+r.length))}const FF=5;class eO{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Jn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Jn(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;r.block?this.addBlock(new JT(s,i,r.type)):(s||i>=FF)&&this.addLineDeco(i,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Jn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new bn(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Jn)return e;let t=new Jn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==Ct.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Ct.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Jn)&&!this.isCovered?this.nodes.push(new Jn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Jn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new eO(r,e);return vt.spans(t,r,i,s,0),s.finish(r)}}function WF(n,e,t){let r=new UF;return vt.compare(n,e,t,r,0),r.changes}class UF{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&oy(e,t,this.changes,5)}}function zF(n,e){let t=n.getBoundingClientRect(),r=Math.max(0,t.left),i=Math.min(innerWidth,t.right),s=Math.max(0,t.top),o=Math.min(innerHeight,t.bottom),a=n.ownerDocument.body;for(let l=n.parentNode;l&&l!=a;)if(l.nodeType==1){let c=l,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let h=c.getBoundingClientRect();r=Math.max(r,h.left),i=Math.min(i,h.right),s=Math.max(s,h.top),o=Math.min(o,h.bottom)}l=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(l.nodeType==11)l=l.host;else break;return{left:r-t.left,right:Math.max(r,i)-t.left,top:s-(t.top+e),bottom:Math.max(s,o)-(t.top+e)}}function jF(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class om{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return Me.replace({widget:new HF(this.size,e)}).range(this.from,this.to)}}class HF extends Mi{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class n1{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new BF,this.scaler=s1,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Gt.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(lc).filter(t=>typeof t!="function"),this.heightMap=Hn.empty().applyChanges(this.stateDeco,Ot.empty,this.heightOracle.setDoc(e.doc),[new Si(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Me.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Bu(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?s1:new XF(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:kl(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(lc).filter(c=>typeof c!="function");let i=e.changedRanges,s=Si.extendWithRanges(i,WF(r,this.stateDeco,e?e.changes:en.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Gt.RTL:Gt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let l=0,c=0,u=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;(this.paddingTop!=u||this.paddingBottom!=h)&&(this.paddingTop=u,this.paddingBottom=h,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let f=(this.printing?jF:zF)(t,this.paddingTop),p=f.top-this.pixelViewport.top,d=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView)return 0;let b=t.clientWidth;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=b,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let g=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(g)&&(o=!0),o||i.lineWrapping&&Math.abs(b-this.contentDOMWidth)>i.charWidth){let{lineHeight:v,charWidth:O}=e.docView.measureTextSize();o=i.refresh(s,v,O,b/O,g),o&&(e.docView.minWidth=0,l|=8)}p>0&&d>0?c=Math.max(p,d):p<0&&d<0&&(c=Math.min(p,d)),i.heightChanged=!1;for(let v of this.viewports){let O=v.from==this.viewport.from?g:e.docView.measureVisibleLineHeights(v);this.heightMap=this.heightMap.updateHeight(i,0,o,new MF(v.from,O))}i.heightChanged&&(l|=2)}let A=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return A&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(l&2||A)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:a}=this,l=new Bu(i.lineAt(o-r*1e3,Qt.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,Qt.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(c,Qt.ByPos,s,0,0),f;t.y=="center"?f=(h.top+h.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<l.from?f=h.top:f=h.bottom-u,l=new Bu(i.lineAt(f-1e3/2,Qt.ByHeight,s,0,0).from,i.lineAt(f+u+1e3/2,Qt.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Bu(this.heightMap.lineAt(r,Qt.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,Qt.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Qt.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,Qt.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new om(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Gt.LTR)return t;for(let r of this.viewportLines){if(r.length<4e3)continue;let i=GF(r.from,r.to,this.stateDeco);if(i.total<4e3)continue;let s,o;if(this.heightOracle.lineWrapping){let c=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;s=Mu(i,(this.visibleTop-r.top-c)/r.height),o=Mu(i,(this.visibleBottom-r.top+c)/r.height)}else{let c=i.total*this.heightOracle.charWidth,u=2e3*this.heightOracle.charWidth;s=Mu(i,(this.pixelViewport.left-u)/c),o=Mu(i,(this.pixelViewport.right+u)/c)}let a=[];s>r.from&&a.push({from:r.from,to:s}),o<r.to&&a.push({from:o,to:r.to});let l=this.state.selection.main;l.from>=r.from&&l.from<=r.to&&i1(a,l.from-10,l.from+10),!l.empty&&l.to>=r.from&&l.to<=r.to&&i1(a,l.to-10,l.to+10);for(let{from:c,to:u}of a)u-c>1e3&&t.push(VF(e,h=>h.from>=r.from&&h.to<=r.to&&Math.abs(h.from-c)<1e3&&Math.abs(h.to-u)<1e3)||new om(c,u,this.gapSize(r,c,u,i)))}return t}gapSize(e,t,r,i){let s=r1(i,r)-r1(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){om.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Me.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];vt.spans(e,this.viewport.from,this.viewport.to,{span(i,s){t.push({from:i,to:s})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=t[s].from||i.to!=t[s].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||kl(this.heightMap.lineAt(e,Qt.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return kl(this.heightMap.lineAt(this.scaler.fromDOM(e),Qt.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return kl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Bu{constructor(e,t){this.from=e,this.to=t}}function GF(n,e,t){let r=[],i=n,s=0;return vt.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Mu({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function r1(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function i1(n,e,t){for(let r=0;r<n.length;r++){let i=n[r];if(i.from<t&&i.to>e){let s=[];i.from<e&&s.push({from:i.from,to:e}),i.to>t&&s.push({from:t,to:i.to}),n.splice(r,1,...s),r+=s.length-1}}}function VF(n,e){for(let t of n)if(e(t))return t}const s1={toDOM(n){return n},fromDOM(n){return n},scale:1};class XF{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=t.lineAt(a,Qt.ByPos,e,0,0).top,u=t.lineAt(l,Qt.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function kl(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new ss(n.from,n.length,t,r-t,Array.isArray(n.type)?n.type.map(i=>kl(i,e)):n.type)}const $u=je.define({combine:n=>n.join(" ")}),fy=je.define({combine:n=>n.indexOf(!0)>-1}),dy=ws.newName(),eE=ws.newName(),tE=ws.newName(),nE={"&light":"."+eE,"&dark":"."+tE};function py(n,e,t){return new ws(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const YF=py("."+dy,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},nE),ZF={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},am=He.ie&&He.ie_version<=11;class qF{constructor(e,t,r){this.view=e,this.onChange=t,this.onScrollChanged=r,this.active=!1,this.selectionRange=new J$,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let s of i)this.queue.push(s);(He.ie&&He.ie_version<=11||He.ios&&e.composing)&&i.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),am&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,r=this.selectionRange;if(t.state.facet(jc)?t.root.activeElement!=this.dom:!qg(t.dom,r))return;let i=r.anchorNode&&t.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)||((He.ie&&He.ie_version<=11||He.android&&He.chrome)&&!t.state.selection.main.empty&&r.focusNode&&jh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=zh(e),r=He.safari&&e.nodeType==11&&Z$()==this.view.contentDOM&&KF(this.view)||t;return this.selectionRange.eq(r)?!1:(this.selectionRange.setRange(r),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ZF),am&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),am&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let r=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Nl(this.view.contentDOM,r.key,r.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:r,typeOver:i}=this.processRecords(),s=this.selectionChanged&&qg(this.dom,this.selectionRange);if(t<0&&!s)return;this.selectionChanged=!1;let o=this.view.state,a=this.onChange(t,r,i);return this.view.state==o&&this.view.update([]),a}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let r=o1(t,e.previousSibling||e.target.previousSibling,-1),i=o1(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resize)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function o1(n,e,t){for(;e;){let r=Ut.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function KF(n){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return jh(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}function JF(n,e,t,r){let i,s,o=n.state.selection.main;if(e>-1){let a=n.docView.domBoundsAround(e,t,0);if(!a||n.state.readOnly)return!1;let{from:l,to:c}=a,u=n.docView.impreciseHead||n.docView.impreciseAnchor?[]:t3(n),h=new WT(u,n.state);h.readRange(a.startDOM,a.endDOM);let f=o.from,p=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||He.android&&h.text.length<c-l)&&(f=o.to,p="end");let d=e3(n.state.doc.sliceString(l,c,is),h.text,f-l,p);d&&(He.chrome&&n.inputState.lastKeyCode==13&&d.toB==d.from+2&&h.text.slice(d.from,d.toB)==is+is&&d.toB--,i={from:l+d.from,to:l+d.toA,insert:Ot.of(h.text.slice(d.from,d.toB).split(is))}),s=n3(u,l)}else if(n.hasFocus||!n.state.facet(jc)){let a=n.observer.selectionRange,{impreciseHead:l,impreciseAnchor:c}=n.docView,u=l&&l.node==a.focusNode&&l.offset==a.focusOffset||!aa(n.contentDOM,a.focusNode)?n.state.selection.main.head:n.docView.posFromDOM(a.focusNode,a.focusOffset),h=c&&c.node==a.anchorNode&&c.offset==a.anchorOffset||!aa(n.contentDOM,a.anchorNode)?n.state.selection.main.anchor:n.docView.posFromDOM(a.anchorNode,a.anchorOffset);(u!=o.head||h!=o.anchor)&&(s=ve.single(h,u))}if(!i&&!s)return!1;if(!i&&r&&!o.empty&&s&&s.main.empty?i={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,o.to)}:i&&i.from>=o.from&&i.to<=o.to&&(i.from!=o.from||i.to!=o.to)&&o.to-o.from-(i.to-i.from)<=4?i={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,i.from).append(i.insert).append(n.state.doc.slice(i.to,o.to))}:(He.mac||He.android)&&i&&i.from==i.to&&i.from==o.head-1&&i.insert.toString()=="."&&(i={from:o.from,to:o.to,insert:Ot.of([" "])}),i){let a=n.state;if(He.ios&&n.inputState.flushIOSKey(n)||He.android&&(i.from==o.from&&i.to==o.to&&i.insert.length==1&&i.insert.lines==2&&Nl(n.contentDOM,"Enter",13)||i.from==o.from-1&&i.to==o.to&&i.insert.length==0&&Nl(n.contentDOM,"Backspace",8)||i.from==o.from&&i.to==o.to+1&&i.insert.length==0&&Nl(n.contentDOM,"Delete",46)))return!0;let l=i.insert.toString();if(n.state.facet(QT).some(h=>h(n,i.from,i.to,l)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let c;if(i.from>=o.from&&i.to<=o.to&&i.to-i.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==i.from+i.insert.length)&&n.inputState.composing<0){let h=o.from<i.from?a.sliceDoc(o.from,i.from):"",f=o.to>i.to?a.sliceDoc(i.to,o.to):"";c=a.replaceSelection(n.state.toText(h+i.insert.sliceString(0,void 0,n.state.lineBreak)+f))}else{let h=a.changes(i),f=s&&!a.selection.main.eq(s.main)&&s.main.to<=h.newLength?s.main:void 0;if(a.selection.ranges.length>1&&n.inputState.composing>=0&&i.to<=o.to&&i.to>=o.to-10){let p=n.state.sliceDoc(i.from,i.to),d=UT(n)||n.state.doc.lineAt(o.head),m=o.to-i.to,b=o.to-o.from;c=a.changeByRange(A=>{if(A.from==o.from&&A.to==o.to)return{changes:h,range:f||A.map(h)};let g=A.to-m,v=g-p.length;if(A.to-A.from!=b||n.state.sliceDoc(v,g)!=p||d&&A.to>=d.from&&A.from<=d.to)return{range:A};let O=a.changes({from:v,to:g,insert:i.insert}),_=A.to-o.to;return{changes:O,range:f?ve.range(Math.max(0,f.anchor+_),Math.max(0,f.head+_)):A.map(O)}})}else c={changes:h,selection:f&&a.selection.replaceRange(f)}}let u="input.type";return n.composing&&(u+=".compose",n.inputState.compositionFirstChange&&(u+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(c,{scrollIntoView:!0,userEvent:u}),!0}else if(s&&!s.main.eq(o)){let a=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:s,scrollIntoView:a,userEvent:l}),!0}else return!1}function e3(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}return o<s&&n.length<e.length?(s-=t<=s&&t>=o?s-t:0,a=s+(a-o),o=s):a<s&&(s-=t<=s&&t>=a?s-t:0,o=s+(o-a),a=s),{from:s,toA:o,toB:a}}function t3(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new MA(t,r)),(i!=t||s!=r)&&e.push(new MA(i,s))),e}function n3(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?ve.single(t+e,r+e):null}class We{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||eF(e.parent)||document,this.viewState=new n1(e.state||ft.create(e)),this.plugins=this.state.facet(_l).map(t=>new rm(t));for(let t of this.plugins)t.update(this);this.observer=new qF(this,(t,r,i)=>JF(this,t,r,i),t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new SF(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new $A(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof nn?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let a of e){if(a.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=a.state}if(this.destroyed){this.viewState.state=s;return}if(this.observer.clear(),s.facet(ft.phrases)!=this.state.facet(ft.phrases))return this.setState(s);i=Vh.create(this,s,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let a of e){if(o&&(o=o.map(a.changes)),a.scrollIntoView){let{main:l}=a.state.selection;o=new Gh(l.empty?l:ve.cursor(l.head,l.head>l.anchor?-1:1))}for(let l of a.effects)l.is(NA)&&(o=l.value)}this.viewState.update(i,o),this.bidiCache=Xh.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(xl)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(a=>a.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet($u)!=i.state.facet($u)&&(this.viewState.mustMeasureContent=!0),(t||r||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let a of this.state.facet(ay))a(i)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new n1(e),this.plugins=e.facet(_l).map(r=>new rm(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new $A(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(_l),r=e.state.facet(_l);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new rm(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let r=0;;r++){this.updateState=1;let i=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(r>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let o=[];s&4||([this.measureRequests,o]=[o,this.measureRequests]);let a=o.map(h=>{try{return h.read(this)}catch(f){return sr(this.state,f),a1}}),l=Vh.create(this,this.state,[]),c=!1,u=!1;l.flags|=s,t?t.flags|=s:t=l,this.updateState=2,l.empty||(this.updatePlugins(l),this.inputState.update(l),this.updateAttrs(),c=this.docView.update(l));for(let h=0;h<o.length;h++)if(a[h]!=a1)try{let f=o[h];f.write&&f.write(a[h],this)}catch(f){sr(this.state,f)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0),c&&this.docView.updateSelection(!0),this.viewport.from==i.from&&this.viewport.to==i.to&&!u&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let r of this.state.facet(ay))r(t)}get themeClasses(){return dy+" "+(this.state.facet(fy)?tE:eE)+" "+this.state.facet($u)}updateAttrs(){let e=l1(this,DT,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(jc)?"true":"false",class:"cm-content",style:`${He.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),l1(this,LT,t);let r=this.observer.ignore(()=>{let i=sy(this.contentDOM,this.contentAttrs,t),s=sy(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(We.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(xl),ws.mount(this.root,this.styleModules.concat(YF).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return sm(this,e,HA(this,e,t,r))}moveByGroup(e,t){return sm(this,e,HA(this,e,t,r=>xF(this,e.head,r)))}moveToLineBoundary(e,t,r=!0){return _F(this,e,t,r)}moveVertically(e,t,r){return sm(this,e,kF(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),jT(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Zo.find(s,e-i.from,-1,t)];return rd(r,o.dir==Gt.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(PT)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>r3)return $T(e.length);let t=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==t)return i.order;let r=uF(e.text,t);return this.bidiCache.push(new Xh(e.from,e.to,t,r)),r}get hasFocus(){var e;return(document.hasFocus()||He.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{mT(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return NA.of(new Gh(typeof e=="number"?ve.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Zt.define(()=>({}),{eventHandlers:e})}static theme(e,t){let r=ws.newName(),i=[$u.of(r),xl.of(py(`.${r}`,e))];return t&&t.dark&&i.push(fy.of(!0)),i}static baseTheme(e){return bo.lowest(xl.of(py("."+dy,e,nE)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Ut.get(r)||Ut.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}We.styleModule=xl;We.inputHandler=QT;We.perLineTextDirection=PT;We.exceptionSink=RT;We.updateListener=ay;We.editable=jc;We.mouseSelectionStyle=IT;We.dragMovesSelection=CT;We.clickAddsSelectionRange=ET;We.decorations=lc;We.atomicRanges=NT;We.scrollMargins=BT;We.darkTheme=fy;We.contentAttributes=LT;We.editorAttributes=DT;We.lineWrapping=We.contentAttributes.of({class:"cm-lineWrapping"});We.announce=et.define();const r3=4096,a1={};class Xh{constructor(e,t,r,i){this.from=e,this.to=t,this.dir=r,this.order=i}static update(e,t){if(t.empty)return e;let r=[],i=e.length?e[e.length-1].dir:Gt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new Xh(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return r}}function l1(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&iy(o,t)}return t}const i3=He.mac?"mac":He.windows?"win":He.linux?"linux":"key";function s3(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function lm(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const o3=We.domEventHandlers({keydown(n,e){return iE(rE(e.state),n,e,"editor")}}),vo=je.define({enables:o3}),c1=new WeakMap;function rE(n){let e=n.facet(vo),t=c1.get(e);return t||c1.set(e,t=c3(e.reduce((r,i)=>r.concat(i),[]))),t}function a3(n,e,t){return iE(rE(n.state),e,n,t)}let Ki=null;const l3=4e3;function c3(n,e=i3){let t=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c)=>{let u=t[o]||(t[o]=Object.create(null)),h=a.split(/ (?!$)/).map(d=>s3(d,e));for(let d=1;d<h.length;d++){let m=h.slice(0,d).join(" ");i(m,!0),u[m]||(u[m]={preventDefault:!0,commands:[b=>{let A=Ki={view:b,prefix:m,scope:o};return setTimeout(()=>{Ki==A&&(Ki=null)},l3),!0}]})}let f=h.join(" ");i(f,!1);let p=u[f]||(u[f]={preventDefault:!1,commands:[]});p.commands.push(l),c&&(p.preventDefault=!0)};for(let o of n){let a=o[e]||o.key;if(!!a)for(let l of o.scope?o.scope.split(" "):["editor"])s(l,a,o.run,o.preventDefault),o.shift&&s(l,"Shift-"+a,o.shift,o.preventDefault)}return t}function iE(n,e,t,r){let i=Y$(e),s=i.length==1&&i!=" ",o="",a=!1;Ki&&Ki.view==t&&Ki.scope==r&&(o=Ki.prefix+" ",(a=GT.indexOf(e.keyCode)<0)&&(Ki=null));let l=h=>{if(h){for(let f of h.commands)if(f(t))return!0;h.preventDefault&&(a=!0)}return!1},c=n[r],u;if(c){if(l(c[o+lm(i,e,!s)]))return!0;if(s&&(e.shiftKey||e.altKey||e.metaKey)&&(u=As[e.keyCode])&&u!=i){if(l(c[o+lm(u,e,!0)]))return!0}else if(s&&e.shiftKey&&l(c[o+lm(i,e,!0)]))return!0}return a}const sE=!He.ios,Sl=je.define({combine(n){return Bi(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function oE(n={}){return[Sl.of(n),u3,h3]}class aE{constructor(e,t,r,i,s){this.left=e,this.top=t,this.width=r,this.height=i,this.className=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const u3=Zt.fromClass(class{constructor(n){this.view=n,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=n.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=n.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),n.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Sl).cursorBlinkRate+"ms"}update(n){let e=n.startState.facet(Sl)!=n.state.facet(Sl);(e||n.selectionSet||n.geometryChanged||n.viewportChanged)&&this.view.requestMeasure(this.measureReq),n.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:n}=this.view,e=n.facet(Sl),t=n.selection.ranges.map(i=>i.empty?[]:f3(this.view,i)).reduce((i,s)=>i.concat(s)),r=[];for(let i of n.selection.ranges){let s=i==n.selection.main;if(i.empty?!s||sE:e.drawRangeCursor){let o=d3(this.view,i,s);o&&r.push(o)}}return{rangePieces:t,cursors:r}}drawSel({rangePieces:n,cursors:e}){if(n.length!=this.rangePieces.length||n.some((t,r)=>!t.eq(this.rangePieces[r]))){this.selectionLayer.textContent="";for(let t of n)this.selectionLayer.appendChild(t.draw());this.rangePieces=n}if(e.length!=this.cursors.length||e.some((t,r)=>!t.eq(this.cursors[r]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const r of e)this.cursorLayer.appendChild(r.draw())}else e.forEach((r,i)=>r.adjust(t[i]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),lE={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};sE&&(lE[".cm-line"].caretColor="transparent !important");const h3=bo.highest(We.theme(lE));function cE(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Gt.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function u1(n,e,t){let r=ve.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(r,!0,!0).from),type:Ct.Text}}function h1(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==Ct.Text))return r}return t}function f3(n,e){if(e.to<=n.viewport.from||e.from>=n.viewport.to)return[];let t=Math.max(e.from,n.viewport.from),r=Math.min(e.to,n.viewport.to),i=n.textDirection==Gt.LTR,s=n.contentDOM,o=s.getBoundingClientRect(),a=cE(n),l=window.getComputedStyle(s.firstChild),c=o.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),u=o.right-parseInt(l.paddingRight),h=h1(n,t),f=h1(n,r),p=h.type==Ct.Text?h:null,d=f.type==Ct.Text?f:null;if(n.lineWrapping&&(p&&(p=u1(n,t,p)),d&&(d=u1(n,r,d))),p&&d&&p.from==d.from)return b(A(e.from,e.to,p));{let v=p?A(e.from,null,p):g(h,!1),O=d?A(null,e.to,d):g(f,!0),_=[];return(p||h).to<(d||f).from-1?_.push(m(c,v.bottom,u,O.top)):v.bottom<O.top&&n.elementAtHeight((v.bottom+O.top)/2).type==Ct.Text&&(v.bottom=O.top=(v.bottom+O.top)/2),b(v).concat(_).concat(b(O))}function m(v,O,_,x){return new aE(v-a.left,O-a.top-.01,_-v,x-O+.01,"cm-selectionBackground")}function b({top:v,bottom:O,horizontal:_}){let x=[];for(let T=0;T<_.length;T+=2)x.push(m(_[T],v,_[T+1],O));return x}function A(v,O,_){let x=1e9,T=-1e9,E=[];function S(M,D,L,P,X){let Z=n.coordsAtPos(M,M==_.to?-2:2),K=n.coordsAtPos(L,L==_.from?2:-2);x=Math.min(Z.top,K.top,x),T=Math.max(Z.bottom,K.bottom,T),X==Gt.LTR?E.push(i&&D?c:Z.left,i&&P?u:K.right):E.push(!i&&P?c:K.left,!i&&D?u:Z.right)}let C=v!=null?v:_.from,B=O!=null?O:_.to;for(let M of n.visibleRanges)if(M.to>C&&M.from<B)for(let D=Math.max(M.from,C),L=Math.min(M.to,B);;){let P=n.state.doc.lineAt(D);for(let X of n.bidiSpans(P)){let Z=X.from+P.from,K=X.to+P.from;if(Z>=L)break;K>D&&S(Math.max(Z,D),v==null&&Z<=C,Math.min(K,L),O==null&&K>=B,X.dir)}if(D=P.to+1,D>=L)break}return E.length==0&&S(C,v==null,B,O==null,n.textDirection),{top:x,bottom:T,horizontal:E}}function g(v,O){let _=o.top+(O?v.top:v.bottom);return{top:_,bottom:_,horizontal:[]}}}function d3(n,e,t){let r=n.coordsAtPos(e.head,e.assoc||1);if(!r)return null;let i=cE(n);return new aE(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const uE=et.define({map(n,e){return n==null?null:e.mapPos(n)}}),Tl=yn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(uE)?r.value:t,n)}}),p3=Zt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Tl);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Tl)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(Tl),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Tl)!=n&&this.view.dispatch({effects:uE.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function m3(){return[Tl,p3]}function f1(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,o+a.index+a[0].length,a)}function g3(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class y3{constructor(e){let{regexp:t,decoration:r,boundary:i,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco=typeof r=="function"?r:()=>r,this.boundary=i,this.maxLength=s}createDeco(e){let t=new vs;for(let{from:r,to:i}of g3(e,this.maxLength))f1(e.state.doc,this.regexp,r,i,(s,o,a)=>t.add(s,o,this.getDeco(a,e,s)));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),h=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){h=a;break}}let f=[],p;if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<h-l.from;){let d=p.index+l.from;f.push(this.getDeco(p,e,d).range(d,d+p[0].length))}else f1(e.state.doc,this.regexp,u,h,(d,m,b)=>f.push(this.getDeco(b,e,d).range(d,m)));t=t.update({filterFrom:u,filterTo:h,filter:(d,m)=>d<u||m>h,add:f})}}return t}}const my=/x/.unicode!=null?"gu":"g",O3=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\uFEFF\uFFF9-\uFFFC]`,my),b3={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let cm=null;function v3(){var n;if(cm==null&&typeof document!="undefined"&&document.body){let e=document.body.style;cm=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return cm||!1}const bh=je.define({combine(n){let e=Bi(n,{render:null,specialChars:O3,addSpecialChars:null});return(e.replaceTabs=!v3())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,my)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,my)),e}});function hE(n={}){return[bh.of(n),w3()]}let d1=null;function w3(){return d1||(d1=Zt.fromClass(class{constructor(n){this.view=n,this.decorations=Me.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(bh)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new y3({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=Tn(e[0],0);if(s==9){let o=i.lineAt(r),a=t.state.tabSize,l=Uc(o.text,a,r-o.from);return Me.replace({widget:new k3((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Me.replace({widget:new x3(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(bh);n.startState.facet(bh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const A3="\u2022";function _3(n){return n>=32?A3:n==10?"\u2424":String.fromCharCode(9216+n)}class x3 extends Mi{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=_3(this.code),r=e.state.phrase("Control character")+" "+(b3[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class k3 extends Mi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function fE(){return T3}const S3=Me.line({class:"cm-activeLine"}),T3=Zt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){if(!r.empty)return Me.none;let i=n.lineBlockAt(r.head);i.from>e&&(t.push(S3.range(i.from)),e=i.from)}return Me.set(t)}},{decorations:n=>n.decorations}),gy=2e3;function E3(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>gy||t.off>gy||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let c=n.doc.line(l);c.length<=a&&s.push(ve.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let c=n.doc.line(l),u=Xg(c.text,o,n.tabSize,!0);if(u>-1){let h=Xg(c.text,a,n.tabSize);s.push(ve.range(c.from+u,c.from+h))}}}return s}function C3(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function p1(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>gy?-1:i==r.length?C3(n,e.clientX):Uc(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function I3(n,e){let t=p1(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=p1(n,i);if(!a)return r;let l=E3(n.state,t,a);return l.length?o?ve.create(l.concat(r.ranges)):ve.create(l):r}}:null}function R3(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return We.mouseSelectionStyle.of((t,r)=>e(r)?I3(t,r):null)}const Q3={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},P3={style:"cursor: crosshair"};function D3(n={}){let[e,t]=Q3[n.key||"Alt"],r=Zt.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)}}});return[r,We.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?P3:null})]}const um="-10000px";class dE{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){let t=e.state.facet(this.facet),r=t.filter(s=>s);if(t===this.input){for(let s of this.tooltipViews)s.update&&s.update(e);return!1}let i=[];for(let s=0;s<r.length;s++){let o=r[s],a=-1;if(!!o){for(let l=0;l<this.tooltips.length;l++){let c=this.tooltips[l];c&&c.create==o.create&&(a=l)}if(a<0)i[s]=this.createTooltipView(o);else{let l=i[s]=this.tooltipViews[a];l.update&&l.update(e)}}}for(let s of this.tooltipViews)i.indexOf(s)<0&&s.dom.remove();return this.input=t,this.tooltips=r,this.tooltipViews=i,!0}}function L3(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const hm=je.define({combine:n=>{var e,t,r;return{position:He.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||L3}}}),pE=Zt.fromClass(class{constructor(n){var e;this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=n.state.facet(hm);this.position=t.position,this.parent=t.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new dE(n,tO,r=>this.createTooltip(r)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(e=n.dom.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(hm);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=um,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;(n=this.view.dom.ownerDocument.defaultView)===null||n===void 0||n.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(hm).tooltipSpace(this.view)}}writeMeasure(n){let{editor:e,space:t}=n,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let s=this.manager.tooltips[i],o=this.manager.tooltipViews[i],{dom:a}=o,l=n.pos[i],c=n.size[i];if(!l||l.bottom<=Math.max(e.top,t.top)||l.top>=Math.min(e.bottom,t.bottom)||l.right<Math.max(e.left,t.left)-.1||l.left>Math.min(e.right,t.right)+.1){a.style.top=um;continue}let u=s.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,h=u?7:0,f=c.right-c.left,p=c.bottom-c.top,d=o.offset||B3,m=this.view.textDirection==Gt.LTR,b=c.width>t.right-t.left?m?t.left:t.right-c.width:m?Math.min(l.left-(u?14:0)+d.x,t.right-f):Math.max(t.left,l.left-f+(u?14:0)-d.x),A=!!s.above;!s.strictSide&&(A?l.top-(c.bottom-c.top)-d.y<t.top:l.bottom+(c.bottom-c.top)+d.y>t.bottom)&&A==t.bottom-l.bottom>l.top-t.top&&(A=!A);let g=A?l.top-p-h-d.y:l.bottom+h+d.y,v=b+f;if(o.overlap!==!0)for(let O of r)O.left<v&&O.right>b&&O.top<g+p&&O.bottom>g&&(g=A?O.top-p-2-h:O.bottom+h+2);this.position=="absolute"?(a.style.top=g-n.parent.top+"px",a.style.left=b-n.parent.left+"px"):(a.style.top=g+"px",a.style.left=b+"px"),u&&(u.style.left=`${l.left+(m?d.x:-d.x)-(b+14-7)}px`),o.overlap!==!0&&r.push({left:b,top:g,right:v,bottom:g+p}),a.classList.toggle("cm-tooltip-above",A),a.classList.toggle("cm-tooltip-below",!A),o.positioned&&o.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=um}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),N3=We.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),B3={x:0,y:0},tO=je.define({enables:[pE,N3]}),Yh=je.define();class nO{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new dE(e,Yh,t=>this.createHostedView(t))}static create(e){return new nO(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const M3=tO.compute([Yh],n=>{let e=n.facet(Yh).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:nO.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class $3{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let r=this.view.coordsAtPos(t);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(a=>a.from<=t&&a.to>=t),s=i&&i.dir==Gt.RTL?-1:1,o=this.source(this.view,t,e.x<r.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:t};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>sr(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!F3(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,s=(t=r==null?void 0:r.end)!==null&&t!==void 0?t:i;(i==s?this.view.posAtCoords(this.lastMove)!=i:!W3(this.view,i,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function F3(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function W3(n,e,t,r,i,s){let o=document.createRange(),a=n.domAtPos(e),l=n.domAtPos(t);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let c=o.getClientRects();o.detach();for(let u=0;u<c.length;u++){let h=c[u];if(Math.max(h.top-i,i-h.bottom,h.left-r,r-h.right)<=s)return!0}return!1}function U3(n,e={}){let t=et.define(),r=yn.define({create(){return null},update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let o=s.changes.mapPos(i.pos,-1,An.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),i);a.pos=o,i.end!=null&&(a.end=s.changes.mapPos(i.end)),i=a}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(j3)&&(i=null);return i},provide:i=>Yh.from(i)});return[r,Zt.define(i=>new $3(i,n,r,t,e.hoverTime||300)),M3]}function z3(n,e){let t=n.plugin(pE);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const j3=et.define(),m1=je.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function cc(n,e){let t=n.plugin(mE),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const mE=Zt.fromClass(class{constructor(n){this.input=n.state.facet(uc),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(m1);this.top=new Fu(n,!0,e.topContainer),this.bottom=new Fu(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(m1);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Fu(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Fu(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(uc);if(t!=this.input){let r=t.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(n.view),a.push(u)):(u=this.panels[c],u.update&&u.update(n)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>We.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Fu{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=g1(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=g1(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function g1(n){let e=n.nextSibling;return n.remove(),e}const uc=je.define({enables:mE});class Li extends oo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Li.prototype.elementClass="";Li.prototype.toDOM=void 0;Li.prototype.mapMode=An.TrackBefore;Li.prototype.startSide=Li.prototype.endSide=-1;Li.prototype.point=!0;const vh=je.define(),H3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>vt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Bl=je.define();function G3(n){return[gE(),Bl.of(Object.assign(Object.assign({},H3),n))]}const yy=je.define({combine:n=>n.some(e=>e)});function gE(n){let e=[V3];return n&&n.fixed===!1&&e.push(yy.of(!0)),e}const V3=Zt.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(Bl).map(e=>new O1(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(yy),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(yy)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=vt.iter(this.view.state.facet(vh),this.view.viewport.from),r=[],i=this.gutters.map(s=>new X3(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let o;if(Array.isArray(s.type)){for(let a of s.type)if(a.type==Ct.Text){o=a;break}}else o=s.type==Ct.Text?s:void 0;if(!!o){r.length&&(r=[]),yE(t,r,s.from);for(let a of i)a.line(this.view,o,r)}}for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Bl),t=n.state.facet(Bl),r=n.docChanged||n.heightChanged||n.viewportChanged||!vt.eq(n.startState.facet(vh),n.state.facet(vh),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new O1(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>We.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Gt.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function y1(n){return Array.isArray(n)?n:[n]}function yE(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class X3{constructor(e,t,r){this.gutter=e,this.height=r,this.localMarkers=[],this.i=0,this.cursor=vt.iter(e.markers,t.from)}line(e,t,r){this.localMarkers.length&&(this.localMarkers=[]),yE(this.cursor,this.localMarkers,t.from);let i=r.length?this.localMarkers.concat(r):this.localMarkers,s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;if(i.length==0&&!o.config.renderEmptyElements)return;let a=t.top-this.height;if(this.i==o.elements.length){let l=new OE(e,t.height,a,i);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,i);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class O1{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=e.lineBlockAtHeight(i.clientY-e.documentTop);t.domEventHandlers[r](e,s,i)&&i.preventDefault()});this.markers=y1(t.markers(e)),t.initialSpacer&&(this.spacer=new OE(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=y1(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!vt.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class OE{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Y3(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function Y3(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const Z3=je.define(),Ho=je.define({combine(n){return Bi(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class fm extends Li{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function dm(n,e){return n.state.facet(Ho).formatNumber(e,n.state)}const q3=Bl.compute([Ho],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Z3)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new fm(dm(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(Ho)!=e.state.facet(Ho),initialSpacer(e){return new fm(dm(e,b1(e.state.doc.lines)))},updateSpacer(e,t){let r=dm(t.view,b1(t.view.state.doc.lines));return r==e.number?e:new fm(r)},domEventHandlers:n.facet(Ho).domEventHandlers}));function K3(n={}){return[Ho.of(n),gE(),q3]}function b1(n){let e=9;for(;e<n;)e=e*10+9;return e}const J3=new class extends Li{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},eW=vh.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges)if(r.empty){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(J3.range(i)))}return vt.of(e)});function tW(){return eW}const bE=1024;let nW=0;class yr{constructor(e,t){this.from=e,this.to=t}}class tt{constructor(e={}){this.id=nW++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=sn.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}tt.closedBy=new tt({deserialize:n=>n.split(" ")});tt.openedBy=new tt({deserialize:n=>n.split(" ")});tt.group=new tt({deserialize:n=>n.split(" ")});tt.contextHash=new tt({perNode:!0});tt.lookAhead=new tt({perNode:!0});tt.mounted=new tt({perNode:!0});class rW{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}}const iW=Object.create(null);class sn{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):iW,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new sn(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(tt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(tt.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}sn.none=new sn("",Object.create(null),0,8);class Hc{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new sn(r.name,i,r.id,r.flags):r)}return new Hc(t)}}const Wu=new WeakMap,v1=new WeakMap;var Ft;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Ft||(Ft={}));class wt{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(tt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new hc(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Wu.get(this)||this.topNode,s=new hc(i);return s.moveTo(e,t),Wu.set(this,s._tree),s}get topNode(){return new _r(this,0,0,null)}resolve(e,t=0){let r=ca(Wu.get(this)||this.topNode,e,t,!1);return Wu.set(this,r),r}resolveInner(e,t=0){let r=ca(v1.get(this)||this.topNode,e,t,!0);return v1.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Ft.IncludeAnonymous);;){let a=!1;if(o.from<=s&&o.to>=i&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;a=!0}for(;a&&r&&!o.type.isAnonymous&&r(o),!o.nextSibling();){if(!o.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:sO(sn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new wt(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new wt(sn.none,t,r,i)))}static build(e){return oW(e)}}wt.empty=new wt(sn.none,[],[],0);class rO{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new rO(this.buffer,this.index)}}class wo{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return sn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(vE(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,t,r,i){let s=this.buffer,o=new Uint16Array(t-e);for(let a=e,l=0;a<t;)o[l++]=s[a++],o[l++]=s[a++]-r,o[l++]=s[a++]-r,o[l++]=s[a++]-e;return new wo(o,i-r,this.set)}}function vE(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function wE(n,e){let t=n.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}function ca(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof _r&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:Ft.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof _r&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class _r{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let u=a[e],h=l[e]+o.from;if(!!vE(i,r,h,h+u.length)){if(u instanceof wo){if(s&Ft.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,t,r-h,i);if(f>-1)return new qr(new sW(o,u,e,h),null,f)}else if(s&Ft.IncludeAnonymous||!u.type.isAnonymous||iO(u)){let f;if(!(s&Ft.IgnoreMounts)&&u.props&&(f=u.prop(tt.mounted))&&!f.overlay)return new _r(f.tree,h,e,o);let p=new _r(u,h,e,o);return s&Ft.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,r,i)}}}if(s&Ft.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&Ft.IgnoreOverlays)&&(i=this._tree.prop(tt.mounted))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new _r(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new hc(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ca(this,e,t,!1)}resolveInner(e,t=0){return ca(this,e,t,!0)}enterUnfinishedNodesBefore(e){return wE(this,e)}getChild(e,t=null,r=null){let i=Zh(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Zh(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return qh(this,e)}}function Zh(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(;!i.type.is(t);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function qh(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class sW{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class qr{constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new qr(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Ft.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new qr(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new qr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new qr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new hc(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1],a=r.buffer[this.index+2];e.push(r.slice(i,s,o,a)),t.push(0)}return new wt(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ca(this,e,t,!1)}resolveInner(e,t=0){return ca(this,e,t,!0)}enterUnfinishedNodesBefore(e){return wE(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=Zh(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Zh(this,e,t,r)}get node(){return this}matchContext(e){return qh(this,e)}}class hc{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof _r)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof _r?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&Ft.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ft.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ft.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Ft.IncludeAnonymous||a instanceof wo||!a.type.isAnonymous||iO(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer){e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}}for(let i=r;i<this.stack.length;i++)t=new qr(this.buffer,t,this.stack[i]);return this.bufferNode=new qr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return qh(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return qh(this.node,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function iO(n){return n.children.some(e=>e instanceof wo||!e.type.isAnonymous||iO(e))}function oW(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=bE,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new rO(t,t.length):t,l=r.types,c=0,u=0;function h(O,_,x,T,E){let{id:S,start:C,end:B,size:M}=a,D=u;for(;M<0;)if(a.next(),M==-1){let K=s[S];x.push(K),T.push(C-O);return}else if(M==-3){c=S;return}else if(M==-4){u=S;return}else throw new RangeError(`Unrecognized record size: ${M}`);let L=l[S],P,X,Z=C-O;if(B-C<=i&&(X=m(a.pos-_,E))){let K=new Uint16Array(X.size-X.skip),ee=a.pos-X.size,J=K.length;for(;a.pos>ee;)J=b(X.start,K,J);P=new wo(K,B-X.start,r),Z=X.start-O}else{let K=a.pos-M;a.next();let ee=[],J=[],ge=S>=o?S:-1,k=0,j=B;for(;a.pos>K;)ge>=0&&a.id==ge&&a.size>=0?(a.end<=j-i&&(p(ee,J,C,k,a.end,j,ge,D),k=ee.length,j=a.end),a.next()):h(C,K,ee,J,ge);if(ge>=0&&k>0&&k<ee.length&&p(ee,J,C,k,C,j,ge,D),ee.reverse(),J.reverse(),ge>-1&&k>0){let V=f(L);P=sO(L,ee,J,0,ee.length,0,B-C,V,V)}else P=d(L,ee,J,B-C,D-B)}x.push(P),T.push(Z)}function f(O){return(_,x,T)=>{let E=0,S=_.length-1,C,B;if(S>=0&&(C=_[S])instanceof wt){if(!S&&C.type==O&&C.length==T)return C;(B=C.prop(tt.lookAhead))&&(E=x[S]+C.length+B)}return d(O,_,x,T,E)}}function p(O,_,x,T,E,S,C,B){let M=[],D=[];for(;O.length>T;)M.push(O.pop()),D.push(_.pop()+x-E);O.push(d(r.types[C],M,D,S-E,B-S)),_.push(E-x)}function d(O,_,x,T,E=0,S){if(c){let C=[tt.contextHash,c];S=S?[C].concat(S):[C]}if(E>25){let C=[tt.lookAhead,E];S=S?[C].concat(S):[C]}return new wt(O,_,x,T,S)}function m(O,_){let x=a.fork(),T=0,E=0,S=0,C=x.end-i,B={size:0,start:0,skip:0};e:for(let M=x.pos-O;x.pos>M;){let D=x.size;if(x.id==_&&D>=0){B.size=T,B.start=E,B.skip=S,S+=4,T+=4,x.next();continue}let L=x.pos-D;if(D<0||L<M||x.start<C)break;let P=x.id>=o?4:0,X=x.start;for(x.next();x.pos>L;){if(x.size<0)if(x.size==-3)P+=4;else break e;else x.id>=o&&(P+=4);x.next()}E=X,T+=D,S+=P}return(_<0||T==O)&&(B.size=T,B.start=E,B.skip=S),B.size>4?B:void 0}function b(O,_,x){let{id:T,start:E,end:S,size:C}=a;if(a.next(),C>=0&&T<o){let B=x;if(C>4){let M=a.pos-(C-4);for(;a.pos>M;)x=b(O,_,x)}_[--x]=B,_[--x]=S-O,_[--x]=E-O,_[--x]=T}else C==-3?c=T:C==-4&&(u=T);return x}let A=[],g=[];for(;a.pos>0;)h(n.start||0,n.bufferStart||0,A,g,-1);let v=(e=n.length)!==null&&e!==void 0?e:A.length?g[0]+A[0].length:0;return new wt(l[n.topID],A.reverse(),g.reverse(),v)}const w1=new WeakMap;function wh(n,e){if(!n.isAnonymous||e instanceof wo||e.type!=n)return 1;let t=w1.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof wt)){t=1;break}t+=wh(n,r)}w1.set(e,t)}return t}function sO(n,e,t,r,i,s,o,a,l){let c=0;for(let d=r;d<i;d++)c+=wh(n,e[d]);let u=Math.ceil(c*1.5/8),h=[],f=[];function p(d,m,b,A,g){for(let v=b;v<A;){let O=v,_=m[v],x=wh(n,d[v]);for(v++;v<A;v++){let T=wh(n,d[v]);if(x+T>=u)break;x+=T}if(v==O+1){if(x>u){let T=d[O];p(T.children,T.positions,0,T.children.length,m[O]+g);continue}h.push(d[O])}else{let T=m[v-1]+d[v-1].length-_;h.push(sO(n,d,m,O,v,_,T,null,l))}f.push(_+g-s)}}return p(e,t,r,i,0),(a||l)(h,f,o)}class aW{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof qr?this.setBuffer(e.context.buffer,e.index,t):e instanceof _r&&this.map.set(e.tree,t)}get(e){return e instanceof qr?this.getBuffer(e.context.buffer,e.index):e instanceof _r?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Ti{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new Ti(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<t.length?t[a]:null,h=u?u.fromA:1e9;if(h-l>=r)for(;o&&o.from<h;){let f=o;if(l>=f.from||h<=f.to||c){let p=Math.max(f.from,l)-c,d=Math.min(f.to,h)-c;f=p>=d?null:new Ti(p,d,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>h)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class oO{startParse(e,t,r){return typeof e=="string"&&(e=new lW(e)),r=r?r.length?r.map(i=>new yr(i.from,i.to)):[new yr(0,0)]:[new yr(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class lW{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function AE(n){return(e,t,r,i)=>new uW(e,n,t,r,i)}class A1{constructor(e,t,r,i,s){this.parser=e,this.parse=t,this.overlay=r,this.target=i,this.ranges=s}}class cW{constructor(e,t,r,i,s,o,a){this.parser=e,this.predicate=t,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const Oy=new tt({perNode:!0});class uW{constructor(e,t,r,i,s){this.nest=t,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new wt(r.type,r.children,r.positions,r.length,r.propValues.concat([[Oy,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[tt.mounted.id]=new rW(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new dW(this.fragments),t=null,r=null,i=new hc(new _r(this.baseTree,this.ranges[0].from,0,null),Ft.IncludeAnonymous|Ft.IgnoreMounts);e:for(let s,o;this.stoppedAt==null||i.from<this.stoppedAt;){let a=!0,l;if(e.hasNode(i)){if(t){let c=t.mounts.find(u=>u.frag.from<=i.from&&u.frag.to>=i.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let h=u.from+c.pos,f=u.to+c.pos;h>=i.from&&f<=i.to&&!t.ranges.some(p=>p.from<f&&p.to>h)&&t.ranges.push({from:h,to:f})}}a=!1}else if(r&&(o=hW(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&i.from<i.to&&(s=this.nest(i,this.input))){i.tree||fW(i);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")t=new cW(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,t);else{let u=k1(this.ranges,s.overlay||[new yr(i.from,i.to)]);u.length&&this.inner.push(new A1(s.parser,s.parser.startParse(this.input,S1(c,u),u),s.overlay?s.overlay.map(h=>new yr(h.from-i.from,h.to-i.from)):null,i.tree,u)),s.overlay?u.length&&(r={ranges:u,depth:0,prev:r}):a=!1}}else t&&(l=t.predicate(i))&&(l===!0&&(l=new yr(i.from,i.to)),l.from<l.to&&t.ranges.push(l));if(a&&i.firstChild())t&&t.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let c=k1(this.ranges,t.ranges);c.length&&this.inner.splice(t.index,0,new A1(t.parser,t.parser.startParse(this.input,S1(t.mounts,c),c),t.ranges.map(u=>new yr(u.from-t.start,u.to-t.start)),t.target,c)),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}}function hW(n,e,t){for(let r of n){if(r.from>=t)break;if(r.to>e)return r.from<=e&&r.to>=t?2:1}return 0}function _1(n,e,t,r,i,s){if(e<t){let o=n.buffer[e+1],a=n.buffer[t-2];r.push(n.slice(e,t,o,a)),i.push(o-s)}}function fW(n){let{node:e}=n,t=0;do n.parent(),t++;while(!n.tree);let r=0,i=n.tree,s=0;for(;s=i.positions[r]+n.from,!(s<=e.from&&s+i.children[r].length>=e.to);r++);let o=i.children[r],a=o.buffer;function l(c,u,h,f,p){let d=c;for(;a[d+2]+s<=e.from;)d=a[d+3];let m=[],b=[];_1(o,c,d,m,b,f);let A=a[d+1],g=a[d+2],v=A+s==e.from&&g+s==e.to&&a[d]==e.type.id;return m.push(v?e.toTree():l(d+4,a[d+3],o.set.types[a[d]],A,g-A)),b.push(A-f),_1(o,a[d+3],u,m,b,f),new wt(h,m,b,p)}i.children[r]=l(0,a.length,sn.none,0,o.length);for(let c=0;c<=t;c++)n.childAfter(e.from)}class x1{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Ft.IncludeAnonymous|Ft.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,Ft.IgnoreOverlays|Ft.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof wt)t=t.children[0];else break}return!1}}class dW{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(Oy))!==null&&t!==void 0?t:r.to,this.inner=new x1(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Oy))!==null&&e!==void 0?e:t.to,this.inner=new x1(t.tree,-t.offset)}}findMounts(e,t){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(tt.mounted);if(o&&o.parser==t)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function k1(n,e){let t=null,r=e;for(let i=1,s=0;i<n.length;i++){let o=n[i-1].to,a=n[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(t||(r=t=e.slice()),l.from<o?(t[s]=new yr(l.from,o),l.to>a&&t.splice(s+1,0,new yr(a,l.to))):l.to>a?t[s--]=new yr(a,l.to):t.splice(s--,1))}}return r}function pW(n,e,t,r){let i=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==n.length?1e9:o?n[i].to:n[i].from,h=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let f=Math.max(l,t),p=Math.min(u,h,r);f<p&&c.push(new yr(f,p))}if(l=Math.min(u,h),l==1e9)break;u==l&&(o?(o=!1,i++):o=!0),h==l&&(a?(a=!1,s++):a=!0)}return c}function S1(n,e){let t=[];for(let{pos:r,mount:i,frag:s}of n){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(i.overlay){let u=i.overlay.map(f=>new yr(f.from+r,f.to+r)),h=pW(e,u,l,c);for(let f=0,p=l;;f++){let d=f==h.length,m=d?c:h[f].from;if(m>p&&t.push(new Ti(p,m,i.tree,-o,s.from>=p,s.to<=m)),d)break;p=h[f].to}}else t.push(new Ti(l,c,i.tree,-o,s.from>=o,s.to<=a))}return t}let mW=0;class Pr{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=mW++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Pr([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new Kh;return t=>t.modified.indexOf(e)>-1?t:Kh.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let gW=0;class Kh{constructor(){this.instances=[],this.id=gW++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&yW(t,a.modified));if(r)return r;let i=[],s=new Pr(i,e,t);for(let a of t)a.instances.push(s);let o=_E(t);for(let a of e.set)for(let l of o)i.push(Kh.get(a,l));return s}}function yW(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function _E(n){let e=[n];for(let t=0;t<n.length;t++)for(let r of _E(n.slice(0,t).concat(n.slice(t+1))))e.push(r);return e}function Da(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let h=0;;){if(a=="..."&&h>0&&h+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let p=i[h++];if(h==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);a=i.slice(h)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new OW(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return xE.add(e)}const xE=new tt;class OW{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function kE(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function bW(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function vW(n,e,t,r=0,i=n.length){let s=new wW(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class wW{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=t)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=i,u=o.prop(xE),h=!1;for(;u;){if(!u.context||e.matchContext(u.context)){let p=bW(s,u.tags);p&&(c&&(c+=" "),c+=p,u.mode==1?i+=(i?" ":"")+p:u.mode==0&&(h=!0));break}u=u.next}if(this.startSpan(e.from,c),h)return;let f=e.tree&&e.tree.prop(tt.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),d=this.highlighters.filter(b=>!b.scope||b.scope(f.tree.type)),m=e.firstChild();for(let b=0,A=a;;b++){let g=b<f.overlay.length?f.overlay[b]:null,v=g?g.from+a:l,O=Math.max(t,A),_=Math.min(r,v);if(O<_&&m)for(;e.from<_&&(this.highlightRange(e,O,_,i,s),this.startSpan(Math.min(r,e.to),c),!(e.to>=v||!e.nextSibling())););if(!g||v>r)break;A=g.to+a,A>t&&(this.highlightRange(p.cursor(),Math.max(t,g.from+a),Math.min(r,A),i,d),this.startSpan(A,c))}m&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}const Re=Pr.define,Uu=Re(),Yi=Re(),T1=Re(Yi),E1=Re(Yi),Zi=Re(),zu=Re(Zi),pm=Re(Zi),Hr=Re(),$s=Re(Hr),zr=Re(),jr=Re(),by=Re(),al=Re(by),ju=Re(),re={comment:Uu,lineComment:Re(Uu),blockComment:Re(Uu),docComment:Re(Uu),name:Yi,variableName:Re(Yi),typeName:T1,tagName:Re(T1),propertyName:E1,attributeName:Re(E1),className:Re(Yi),labelName:Re(Yi),namespace:Re(Yi),macroName:Re(Yi),literal:Zi,string:zu,docString:Re(zu),character:Re(zu),attributeValue:Re(zu),number:pm,integer:Re(pm),float:Re(pm),bool:Re(Zi),regexp:Re(Zi),escape:Re(Zi),color:Re(Zi),url:Re(Zi),keyword:zr,self:Re(zr),null:Re(zr),atom:Re(zr),unit:Re(zr),modifier:Re(zr),operatorKeyword:Re(zr),controlKeyword:Re(zr),definitionKeyword:Re(zr),moduleKeyword:Re(zr),operator:jr,derefOperator:Re(jr),arithmeticOperator:Re(jr),logicOperator:Re(jr),bitwiseOperator:Re(jr),compareOperator:Re(jr),updateOperator:Re(jr),definitionOperator:Re(jr),typeOperator:Re(jr),controlOperator:Re(jr),punctuation:by,separator:Re(by),bracket:al,angleBracket:Re(al),squareBracket:Re(al),paren:Re(al),brace:Re(al),content:Hr,heading:$s,heading1:Re($s),heading2:Re($s),heading3:Re($s),heading4:Re($s),heading5:Re($s),heading6:Re($s),contentSeparator:Re(Hr),list:Re(Hr),quote:Re(Hr),emphasis:Re(Hr),strong:Re(Hr),link:Re(Hr),monospace:Re(Hr),strikethrough:Re(Hr),inserted:Re(),deleted:Re(),changed:Re(),invalid:Re(),meta:ju,documentMeta:Re(ju),annotation:Re(ju),processingInstruction:Re(ju),definition:Pr.defineModifier(),constant:Pr.defineModifier(),function:Pr.defineModifier(),standard:Pr.defineModifier(),local:Pr.defineModifier(),special:Pr.defineModifier()},AW=kE([{tag:re.link,class:"tok-link"},{tag:re.heading,class:"tok-heading"},{tag:re.emphasis,class:"tok-emphasis"},{tag:re.strong,class:"tok-strong"},{tag:re.keyword,class:"tok-keyword"},{tag:re.atom,class:"tok-atom"},{tag:re.bool,class:"tok-bool"},{tag:re.url,class:"tok-url"},{tag:re.labelName,class:"tok-labelName"},{tag:re.inserted,class:"tok-inserted"},{tag:re.deleted,class:"tok-deleted"},{tag:re.literal,class:"tok-literal"},{tag:re.string,class:"tok-string"},{tag:re.number,class:"tok-number"},{tag:[re.regexp,re.escape,re.special(re.string)],class:"tok-string2"},{tag:re.variableName,class:"tok-variableName"},{tag:re.local(re.variableName),class:"tok-variableName tok-local"},{tag:re.definition(re.variableName),class:"tok-variableName tok-definition"},{tag:re.special(re.variableName),class:"tok-variableName2"},{tag:re.definition(re.propertyName),class:"tok-propertyName tok-definition"},{tag:re.typeName,class:"tok-typeName"},{tag:re.namespace,class:"tok-namespace"},{tag:re.className,class:"tok-className"},{tag:re.macroName,class:"tok-macroName"},{tag:re.propertyName,class:"tok-propertyName"},{tag:re.operator,class:"tok-operator"},{tag:re.comment,class:"tok-comment"},{tag:re.meta,class:"tok-meta"},{tag:re.invalid,class:"tok-invalid"},{tag:re.punctuation,class:"tok-punctuation"}]);var mm;const ua=new tt;function SE(n){return je.define({combine:n?e=>e.concat(n):void 0})}class Or{constructor(e,t,r=[]){this.data=e,ft.prototype.hasOwnProperty("tree")||Object.defineProperty(ft.prototype,"tree",{get(){return Lt(this)}}),this.parser=t,this.extension=[xs.of(this),ft.languageData.of((i,s,o)=>i.facet(C1(i,s,o)))].concat(r)}isActiveAt(e,t,r=-1){return C1(e,t,r)==this.data}findRegions(e){let t=e.facet(xs);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(ua)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(tt.mounted);if(a){if(a.tree.prop(ua)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof wt&&i(c,s.positions[l]+o)}};return i(Lt(e),0),r}get allowsNesting(){return!0}}Or.setState=et.define();function C1(n,e,t){let r=n.facet(xs);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let s=Lt(n).topNode;s;s=s.enter(e,t,Ft.ExcludeBuffers))i=s.type.prop(ua)||i;return i}class ha extends Or{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=SE(e.languageData);return new ha(t,e.parser.configure({props:[ua.add(r=>r.isTop?t:void 0)]}))}configure(e){return new ha(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function Lt(n){let e=n.field(Or.state,!1);return e?e.tree:wt.empty}class _W{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let ll=null;class fc{constructor(e,t,r=[],i,s,o,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new fc(e,t,[],wt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new _W(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=wt.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Ti.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ti.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ll;ll=this;try{return e()}finally{ll=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=I1(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,h,f)=>l.push({fromA:c,toA:u,fromB:h,toB:f})),r=Ti.applyChanges(r,l),i=wt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);u<h&&a.push({from:u,to:h})}}}return new fc(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=I1(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends oO{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=ll;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new wt(sn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ll}}function I1(n,e,t){return Ti.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class fa{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new fa(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=fc.create(e.facet(xs).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new fa(r)}}Or.state=yn.define({create:fa.init,update(n,e){for(let t of e.effects)if(t.is(Or.setState))return t.value;return e.startState.facet(xs)!=e.state.facet(xs)?fa.init(e.state):n.apply(e)}});let TE=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(TE=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const gm=typeof navigator!="undefined"&&((mm=navigator.scheduling)===null||mm===void 0?void 0:mm.isInputPending)?()=>navigator.scheduling.isInputPending():null,xW=Zt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Or.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Or.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=TE(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Or.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!gm?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>gm&&gm()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Or.setState.of(new fa(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>sr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),xs=je.define({combine(n){return n.length?n[0]:null},enables:[Or.state,xW]});class dc{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class Jh{constructor(e,t,r,i,s,o=void 0){this.name=e,this.alias=t,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:r}=e;if(!t){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(r)}return new Jh(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,t,r)}static matchFilename(e,t){for(let i of e)if(i.filename&&i.filename.test(t))return i;let r=/\.([^.]+)$/.exec(t);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,t,r=!0){t=t.toLowerCase();for(let i of e)if(i.alias.some(s=>s==t))return i;if(r)for(let i of e)for(let s of i.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return i}return null}}const kW=je.define(),od=je.define({combine:n=>{if(!n.length)return"  ";if(!/^(?: +|\t+)$/.test(n[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return n[0]}});function ef(n){let e=n.facet(od);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function pc(n,e){let t="",r=n.tabSize;if(n.facet(od).charCodeAt(0)==9)for(;e>=r;)t+="	",e-=r;for(let i=0;i<e;i++)t+=" ";return t}function aO(n,e){n instanceof ft&&(n=new ad(n));for(let r of n.state.facet(kW)){let i=r(n,e);if(i!=null)return i}let t=Lt(n.state);return t?SW(n,t,e):null}class ad{constructor(e,t={}){this.state=e,this.options=t,this.unit=ef(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Uc(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Gc=new tt;function SW(n,e,t){return EE(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function TW(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function EW(n){let e=n.type.prop(Gc);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(tt.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>CE(o,!0,1,void 0,s&&!TW(o)?i.from:void 0)}return n.parent==null?CW:null}function EE(n,e,t){for(;n;n=n.parent){let r=EW(n);if(r)return r(lO.create(t,e,n))}return null}function CW(){return 0}class lO extends ad{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new lO(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(IW(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?EE(e,this.pos,this.base):0}}function IW(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function RW(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?t:null;a=l.to}}function QW({closing:n,align:e=!0,units:t=1}){return r=>CE(r,e,t,n)}function CE(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==n.pos+o,l=e?RW(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const PW=n=>n.baseIndent;function Ah({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const DW=200;function LW(){return ft.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+DW)return n;let s=t.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let h=aO(o,u.from);if(h==null)continue;let f=/^\s*/.exec(u.text)[0],p=pc(o,h);f!=p&&l.push({from:u.from,to:u.from+f.length,insert:p})}return l.length?[n,{changes:l,sequential:!0}]:n})}const NW=je.define(),Vc=new tt;function IE(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function BW(n,e,t){let r=Lt(n);if(r.length<t)return null;let i=r.resolveInner(t),s=null;for(let o=i;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let a=o.type.prop(Vc);if(a&&(o.to<r.length-50||r.length==n.doc.length||!MW(o))){let l=a(o,n);l&&l.from<=t&&l.from>=e&&l.to>t&&(s=l)}}return s}function MW(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function tf(n,e,t){for(let r of n.facet(NW)){let i=r(n,e,t);if(i)return i}return BW(n,e,t)}function RE(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const ld=et.define({map:RE}),Xc=et.define({map:RE});function QE(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const lo=yn.define({create(){return Me.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(ld)&&!$W(n,t.value.from,t.value.to)?n=n.update({add:[GW.range(t.value.from,t.value.to)]}):t.is(Xc)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>We.decorations.from(n)});function nf(n,e,t){var r;let i=null;return(r=n.field(lo,!1))===null||r===void 0||r.between(e,t,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function $W(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function PE(n,e){return n.field(lo,!1)?e:e.concat(et.appendConfig.of(NE()))}const FW=n=>{for(let e of QE(n)){let t=tf(n.state,e.from,e.to);if(t)return n.dispatch({effects:PE(n.state,[ld.of(t),DE(n,t)])}),!0}return!1},WW=n=>{if(!n.state.field(lo,!1))return!1;let e=[];for(let t of QE(n)){let r=nf(n.state,t.from,t.to);r&&e.push(Xc.of(r),DE(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function DE(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return We.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const UW=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=tf(e,i.from,i.to);s&&t.push(ld.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:PE(n.state,t)}),!!t.length},zW=n=>{let e=n.state.field(lo,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Xc.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},jW=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:FW},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:WW},{key:"Ctrl-Alt-[",run:UW},{key:"Ctrl-Alt-]",run:zW}],HW={placeholderDOM:null,placeholderText:"\u2026"},LE=je.define({combine(n){return Bi(n,HW)}});function NE(n){let e=[lo,YW];return n&&e.push(LE.of(n)),e}const GW=Me.replace({widget:new class extends Mi{toDOM(n){let{state:e}=n,t=e.facet(LE),r=s=>{let o=n.lineBlockAt(n.posAtDOM(s.target)),a=nf(n.state,o.from,o.to);a&&n.dispatch({effects:Xc.of(a)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,r);let i=document.createElement("span");return i.textContent=t.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),VW={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ym extends Li{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function XW(n={}){let e=Object.assign(Object.assign({},VW),n),t=new ym(e,!0),r=new ym(e,!1),i=Zt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(xs)!=o.state.facet(xs)||o.startState.field(lo,!1)!=o.state.field(lo,!1)||Lt(o.startState)!=Lt(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new vs;for(let l of o.viewportLineBlocks){let c=nf(o.state,l.from,l.to)?r:tf(o.state,l.from,l.to)?t:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,G3({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||vt.empty},initialSpacer(){return new ym(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=nf(o.state,a.from,a.to);if(c)return o.dispatch({effects:Xc.of(c)}),!0;let u=tf(o.state,a.from,a.to);return u?(o.dispatch({effects:ld.of(u)}),!0):!1}})}),NE()]}const YW=We.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class cd{constructor(e,t){let r;function i(a){let l=ws.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Or?a=>a.prop(ua)==o.data:o?a=>a==o:void 0,this.style=kE(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new ws(r):null,this.themeType=t.themeType}static define(e,t){return new cd(e,t||{})}}const vy=je.define(),BE=je.define({combine(n){return n.length?[n[0]]:null}});function Om(n){let e=n.facet(vy);return e.length?e:n.facet(BE)}function cO(n,e){let t=[qW],r;return n instanceof cd&&(n.module&&t.push(We.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(BE.of(n)):r?t.push(vy.computeN([We.darkTheme],i=>i.facet(We.darkTheme)==(r=="dark")?[n]:[])):t.push(vy.of(n)),t}class ZW{constructor(e){this.markCache=Object.create(null),this.tree=Lt(e.state),this.decorations=this.buildDeco(e,Om(e.state))}update(e){let t=Lt(e.state),r=Om(e.state),i=r!=Om(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return Me.none;let r=new vs;for(let{from:i,to:s}of e.visibleRanges)vW(this.tree,t,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Me.mark({class:l})))},i,s);return r.finish()}}const qW=bo.high(Zt.fromClass(ZW,{decorations:n=>n.decorations})),ME=cd.define([{tag:re.meta,color:"#7a757a"},{tag:re.link,textDecoration:"underline"},{tag:re.heading,textDecoration:"underline",fontWeight:"bold"},{tag:re.emphasis,fontStyle:"italic"},{tag:re.strong,fontWeight:"bold"},{tag:re.strikethrough,textDecoration:"line-through"},{tag:re.keyword,color:"#708"},{tag:[re.atom,re.bool,re.url,re.contentSeparator,re.labelName],color:"#219"},{tag:[re.literal,re.inserted],color:"#164"},{tag:[re.string,re.deleted],color:"#a11"},{tag:[re.regexp,re.escape,re.special(re.string)],color:"#e40"},{tag:re.definition(re.variableName),color:"#00f"},{tag:re.local(re.variableName),color:"#30a"},{tag:[re.typeName,re.namespace],color:"#085"},{tag:re.className,color:"#167"},{tag:[re.special(re.variableName),re.macroName],color:"#256"},{tag:re.definition(re.propertyName),color:"#00c"},{tag:re.comment,color:"#940"},{tag:re.invalid,color:"#f00"}]),KW=We.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),$E=1e4,FE="()[]{}",WE=je.define({combine(n){return Bi(n,{afterCursor:!0,brackets:FE,maxScanDistance:$E,renderMatch:t4})}}),JW=Me.mark({class:"cm-matchingBracket"}),e4=Me.mark({class:"cm-nonmatchingBracket"});function t4(n){let e=[],t=n.matched?JW:e4;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const n4=yn.define({create(){return Me.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(WE);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Kr(e.state,i.head,-1,r)||i.head>0&&Kr(e.state,i.head-1,1,r)||r.afterCursor&&(Kr(e.state,i.head,1,r)||i.head<e.state.doc.length&&Kr(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return Me.set(t,!0)},provide:n=>We.decorations.from(n)}),r4=[n4,KW];function i4(n={}){return[WE.of(n),r4]}function wy(n,e,t){let r=n.prop(e<0?tt.openedBy:tt.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Kr(n,e,t,r={}){let i=r.maxScanDistance||$E,s=r.brackets||FE,o=Lt(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let c=wy(l.type,t,s);if(c&&l.from<l.to)return s4(n,e,t,l,c,s)}return o4(n,e,t,o,a.type,i,s)}function s4(n,e,t,r,i,s){let o=r.parent,a={from:r.from,to:r.to},l=0,c=o==null?void 0:o.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(l==0&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(wy(c.type,t,s))l++;else if(wy(c.type,-t,s)&&(l--,l==0))return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function o4(n,e,t,r,i,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),h=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;t<0&&(f+=p.length);let d=e+f*t;for(let m=t>0?0:p.length-1,b=t>0?p.length:-1;m!=b;m+=t){let A=o.indexOf(p[m]);if(!(A<0||r.resolve(d+m,1).type!=i))if(A%2==0==t>0)h++;else{if(h==1)return{start:c,end:{from:d+m,to:d+m+1},matched:A>>1==l>>1};h--}}t>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}const a4=Object.create(null),R1=[sn.none],Q1=[],l4=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])l4[n]=c4(a4,e);function bm(n,e){Q1.indexOf(n)>-1||(Q1.push(n),console.warn(e))}function c4(n,e){let t=null;for(let s of e.split(".")){let o=n[s]||re[s];o?typeof o=="function"?t?t=o(t):bm(s,`Modifier ${s} used at start of tag`):t?bm(s,`Tag ${s} used as modifier`):t=o:bm(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),i=sn.define({id:R1.length,name:r,props:[Da({[r]:t})]});return R1.push(i),i.id}const u4=n=>{let e=hO(n.state);return e.line?h4(n):e.block?d4(n):!1};function uO(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const h4=uO(g4,0),f4=uO(UE,0),d4=uO((n,e)=>UE(n,e,m4(e)),0);function hO(n,e=n.selection.main.head){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const cl=50;function p4(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-cl,r),o=n.sliceDoc(i,i+cl),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,h;i-r<=2*cl?u=h=n.sliceDoc(r,i):(u=n.sliceDoc(r,r+cl),h=n.sliceDoc(i-cl,i));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(h)[0].length,d=h.length-p-t.length;return u.slice(f,f+e.length)==e&&h.slice(d,d+t.length)==t?{open:{pos:r+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(h.charAt(d-1))?1:0}}:null}function m4(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from,to:i.to})}return e}function UE(n,e,t=e.selection.ranges){let r=t.map(s=>hO(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>p4(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function g4(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let a=r.length,l=1e9;for(let c=s;c<=o;){let u=e.doc.lineAt(c);if(u.from>i&&(s==o||o>u.from)){i=u.from;let h=hO(e,c).line;if(!h)continue;let f=/^\s*/.exec(u.text)[0].length,p=f==u.length,d=u.text.slice(f,f+h.length)==h?f:-1;f<u.text.length&&f<l&&(l=f),r.push({line:u,comment:d,token:h,indent:f,empty:p,single:!1})}c=u.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:h}of r)(h||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Ay=Di.define(),y4=Di.define(),O4=je.define(),zE=je.define({combine(n){return Bi(n,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function b4(n){let e=0;return n.iterChangedRanges((t,r)=>e=r),e}const jE=yn.define({create(){return Jr.empty},update(n,e){let t=e.state.facet(zE),r=e.annotation(Ay);if(r){let l=e.docChanged?ve.single(b4(e.changes)):void 0,c=zn.fromTransaction(e,l),u=r.side,h=u==0?n.undone:n.done;return c?h=rf(h,h.length,t.minDepth,c):h=VE(h,e.startState.selection),new Jr(u==0?r.rest:h,u==0?h:r.rest)}let i=e.annotation(y4);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(nn.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=zn.fromTransaction(e),o=e.annotation(nn.time),a=e.annotation(nn.userEvent);return s?n=n.addChanges(s,o,a,t.newGroupDelay,t.minDepth):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Jr(n.done.map(zn.fromJSON),n.undone.map(zn.fromJSON))}});function HE(n={}){return[jE,zE.of(n),We.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?fO:e.inputType=="historyRedo"?dO:null;return r?(e.preventDefault(),r(t)):!1}})]}function ud(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(jE,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const fO=ud(0,!1),dO=ud(1,!1),v4=ud(0,!0),w4=ud(1,!0);class zn{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new zn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new zn(e.changes&&en.fromJSON(e.changes),[],e.mapped&&ei.fromJSON(e.mapped),e.startSelection&&ve.fromJSON(e.startSelection),e.selectionsAfter.map(ve.fromJSON))}static fromTransaction(e,t){let r=br;for(let i of e.startState.facet(O4)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new zn(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,br)}static selection(e){return new zn(void 0,br,void 0,void 0,e)}}function rf(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function A4(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<t.length;){let c=t[l++],u=t[l++];a>=c&&o<=u&&(r=!0)}}),r}function _4(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function GE(n,e){return n.length?e.length?n.concat(e):n:e}const br=[],x4=200;function VE(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-x4));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),rf(n,n.length-1,1e9,t.setSelAfter(r)))}else return[zn.selection([e])]}function k4(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function vm(n,e){if(!n.length)return n;let t=n.length,r=br;for(;t;){let i=S4(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[zn.selection(r)]:br}function S4(n,e,t){let r=GE(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):br,t);if(!n.changes)return zn.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new zn(i,et.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const T4=/^(input\.type|delete)($|\.)/;class Jr{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Jr(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||T4.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i&&A4(a.changes,e.changes)||r=="input.type.compose")?o=rf(o,o.length-1,s,new zn(e.changes.compose(a.changes),GE(e.effects,a.effects),a.mapped,a.startSelection,br)):o=rf(o,o.length,s,e),new Jr(o,br,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:br;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&_4(s[s.length-1],e)?this:new Jr(VE(this.done,e),this.undone,t,r)}addMapping(e){return new Jr(vm(this.done,e),vm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1];if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Ay.of({side:e,rest:k4(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?br:i.slice(0,i.length-1);return s.mapped&&(o=vm(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Ay.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Jr.empty=new Jr(br,br);const pO=[{key:"Mod-z",run:fO,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:dO,preventDefault:!0},{key:"Mod-u",run:v4,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:w4,preventDefault:!0}];function La(n,e){return ve.create(n.ranges.map(e),n.mainIndex)}function li(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function $i({state:n,dispatch:e},t){let r=La(n.selection,t);return r.eq(n.selection)?!1:(e(li(n,r)),!0)}function hd(n,e){return ve.cursor(e?n.to:n.from)}function XE(n,e){return $i(n,t=>t.empty?n.moveByChar(t,e):hd(t,e))}function Sr(n){return n.textDirectionAt(n.state.selection.main.head)==Gt.LTR}const YE=n=>XE(n,!Sr(n)),ZE=n=>XE(n,Sr(n));function qE(n,e){return $i(n,t=>t.empty?n.moveByGroup(t,e):hd(t,e))}const E4=n=>qE(n,!Sr(n)),C4=n=>qE(n,Sr(n));function I4(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function fd(n,e,t){let r=Lt(n).resolveInner(e.head),i=t?tt.closedBy:tt.openedBy;for(let l=e.head;;){let c=t?r.childAfter(l):r.childBefore(l);if(!c)break;I4(n,c,i)?r=c:l=t?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=t?Kr(n,r.from,1):Kr(n,r.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?r.to:r.from,ve.cursor(a,t?-1:1)}const R4=n=>$i(n,e=>fd(n.state,e,!Sr(n))),Q4=n=>$i(n,e=>fd(n.state,e,Sr(n)));function KE(n,e){return $i(n,t=>{if(!t.empty)return hd(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const JE=n=>KE(n,!1),eC=n=>KE(n,!0);function tC(n){return Math.max(n.defaultLineHeight,Math.min(n.dom.clientHeight,innerHeight)-5)}function nC(n,e){let{state:t}=n,r=La(t.selection,a=>a.empty?n.moveVertically(a,e,tC(n)):hd(a,e));if(r.eq(t.selection))return!1;let i=n.coordsAtPos(t.selection.main.head),s=n.scrollDOM.getBoundingClientRect(),o;return i&&i.top>s.top&&i.bottom<s.bottom&&i.top-s.top<=n.scrollDOM.scrollHeight-n.scrollDOM.scrollTop-n.scrollDOM.clientHeight&&(o=We.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-s.top})),n.dispatch(li(t,r),{effects:o}),!0}const P1=n=>nC(n,!1),_y=n=>nC(n,!0);function dd(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=ve.cursor(r.from+s))}return i}const D1=n=>$i(n,e=>dd(n,e,!0)),L1=n=>$i(n,e=>dd(n,e,!1)),P4=n=>$i(n,e=>ve.cursor(n.lineBlockAt(e.head).from,1)),D4=n=>$i(n,e=>ve.cursor(n.lineBlockAt(e.head).to,-1));function L4(n,e,t){let r=!1,i=La(n.selection,s=>{let o=Kr(n,s.head,-1)||Kr(n,s.head,1)||s.head>0&&Kr(n,s.head-1,1)||s.head<n.doc.length&&Kr(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return t?ve.range(s.anchor,a):ve.cursor(a)});return r?(e(li(n,i)),!0):!1}const N4=({state:n,dispatch:e})=>L4(n,e,!1);function ci(n,e){let t=La(n.state.selection,r=>{let i=e(r);return ve.range(r.anchor,i.head,i.goalColumn)});return t.eq(n.state.selection)?!1:(n.dispatch(li(n.state,t)),!0)}function rC(n,e){return ci(n,t=>n.moveByChar(t,e))}const iC=n=>rC(n,!Sr(n)),sC=n=>rC(n,Sr(n));function oC(n,e){return ci(n,t=>n.moveByGroup(t,e))}const B4=n=>oC(n,!Sr(n)),M4=n=>oC(n,Sr(n)),$4=n=>ci(n,e=>fd(n.state,e,!Sr(n))),F4=n=>ci(n,e=>fd(n.state,e,Sr(n)));function aC(n,e){return ci(n,t=>n.moveVertically(t,e))}const lC=n=>aC(n,!1),cC=n=>aC(n,!0);function uC(n,e){return ci(n,t=>n.moveVertically(t,e,tC(n)))}const N1=n=>uC(n,!1),B1=n=>uC(n,!0),M1=n=>ci(n,e=>dd(n,e,!0)),$1=n=>ci(n,e=>dd(n,e,!1)),W4=n=>ci(n,e=>ve.cursor(n.lineBlockAt(e.head).from)),U4=n=>ci(n,e=>ve.cursor(n.lineBlockAt(e.head).to)),F1=({state:n,dispatch:e})=>(e(li(n,{anchor:0})),!0),W1=({state:n,dispatch:e})=>(e(li(n,{anchor:n.doc.length})),!0),U1=({state:n,dispatch:e})=>(e(li(n,{anchor:n.selection.main.anchor,head:0})),!0),z1=({state:n,dispatch:e})=>(e(li(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),z4=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),j4=({state:n,dispatch:e})=>{let t=gd(n).map(({from:r,to:i})=>ve.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:ve.create(t),userEvent:"select"})),!0},H4=({state:n,dispatch:e})=>{let t=La(n.selection,r=>{var i;let s=Lt(n).resolveInner(r.head,1);for(;!(s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from||!(!((i=s.parent)===null||i===void 0)&&i.parent));)s=s.parent;return ve.range(s.to,s.from)});return e(li(n,t)),!0},G4=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=ve.create([t.main]):t.main.empty||(r=ve.create([ve.cursor(t.main.head)])),r?(e(li(n,r)),!0):!1};function pd({state:n,dispatch:e},t){if(n.readOnly)return!1;let r="delete.selection",i=n.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=t(o);l<o?r="delete.backward":l>o&&(r="delete.forward"),o=Math.min(o,l),a=Math.max(a,l)}return o==a?{range:s}:{changes:{from:o,to:a},range:ve.cursor(o)}});return i.changes.empty?!1:(e(n.update(i,{scrollIntoView:!0,userEvent:r})),!0)}function md(n,e,t){if(n instanceof We)for(let r of n.state.facet(We.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const hC=(n,e)=>pd(n,t=>{let{state:r}=n,i=r.doc.lineAt(t),s,o;if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,t-i.from))){if(s[s.length-1]=="	")return t-1;let a=Uc(s,r.tabSize),l=a%ef(r)||ef(r);for(let c=0;c<l&&s[s.length-1-c]==" ";c++)t--;o=t}else o=rr(i.text,t-i.from,e,e)+i.from,o==t&&i.number!=(e?r.doc.lines:1)&&(o+=e?1:-1);return md(n,o,e)}),xy=n=>hC(n,!1),fC=n=>hC(n,!0),dC=(n,e)=>pd(n,t=>{let r=t,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==t&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=rr(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=t)&&(a=u),r=l}return md(n,r,e)}),pC=n=>dC(n,!1),V4=n=>dC(n,!0),mC=n=>pd(n,e=>{let t=n.lineBlockAt(e).to;return md(n,e<t?t:Math.min(n.state.doc.length,e+1),!0)}),X4=n=>pd(n,e=>{let t=n.lineBlockAt(e).from;return md(n,e>t?t:Math.max(0,e-1),!1)}),Y4=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ot.of(["",""])},range:ve.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Z4=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:rr(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:rr(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(o,i))},range:ve.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function gd(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function gC(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of gd(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)i.push(ve.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)i.push(ve.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:ve.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const q4=({state:n,dispatch:e})=>gC(n,e,!1),K4=({state:n,dispatch:e})=>gC(n,e,!0);function yC(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of gd(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const J4=({state:n,dispatch:e})=>yC(n,e,!1),e8=({state:n,dispatch:e})=>yC(n,e,!0),t8=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(gd(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=La(e.selection,i=>n.moveVertically(i,!0)).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function n8(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Lt(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(tt.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const r8=OC(!1),i8=OC(!0);function OC(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!n&&s==o&&n8(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new ad(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=aO(c,s);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let h=["",pc(e,u)];return l&&h.push(pc(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ot.of(h)},range:ve.cursor(s+1+h[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function mO(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=n.doc.lineAt(o);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),o=a.to+1}let s=n.changes(i);return{changes:i,range:ve.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const s8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new ad(n,{overrideIndentation:s=>{let o=t[s];return o==null?-1:o}}),i=mO(n,(s,o,a)=>{let l=aO(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=pc(n,l);(c!=u||a.from<s.from+c.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},o8=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(mO(n,(t,r)=>{r.push({from:t.from,insert:n.facet(od)})}),{userEvent:"input.indent"})),!0),a8=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(mO(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Uc(i,n.tabSize),o=0,a=pc(n,Math.max(0,s-ef(n)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),l8=[{key:"Ctrl-b",run:YE,shift:iC,preventDefault:!0},{key:"Ctrl-f",run:ZE,shift:sC},{key:"Ctrl-p",run:JE,shift:lC},{key:"Ctrl-n",run:eC,shift:cC},{key:"Ctrl-a",run:P4,shift:W4},{key:"Ctrl-e",run:D4,shift:U4},{key:"Ctrl-d",run:fC},{key:"Ctrl-h",run:xy},{key:"Ctrl-k",run:mC},{key:"Ctrl-Alt-h",run:pC},{key:"Ctrl-o",run:Y4},{key:"Ctrl-t",run:Z4},{key:"Ctrl-v",run:_y}],c8=[{key:"ArrowLeft",run:YE,shift:iC,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:E4,shift:B4},{mac:"Cmd-ArrowLeft",run:L1,shift:$1},{key:"ArrowRight",run:ZE,shift:sC,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:C4,shift:M4},{mac:"Cmd-ArrowRight",run:D1,shift:M1},{key:"ArrowUp",run:JE,shift:lC,preventDefault:!0},{mac:"Cmd-ArrowUp",run:F1,shift:U1},{mac:"Ctrl-ArrowUp",run:P1,shift:N1},{key:"ArrowDown",run:eC,shift:cC,preventDefault:!0},{mac:"Cmd-ArrowDown",run:W1,shift:z1},{mac:"Ctrl-ArrowDown",run:_y,shift:B1},{key:"PageUp",run:P1,shift:N1},{key:"PageDown",run:_y,shift:B1},{key:"Home",run:L1,shift:$1,preventDefault:!0},{key:"Mod-Home",run:F1,shift:U1},{key:"End",run:D1,shift:M1,preventDefault:!0},{key:"Mod-End",run:W1,shift:z1},{key:"Enter",run:r8},{key:"Mod-a",run:z4},{key:"Backspace",run:xy,shift:xy},{key:"Delete",run:fC},{key:"Mod-Backspace",mac:"Alt-Backspace",run:pC},{key:"Mod-Delete",mac:"Alt-Delete",run:V4},{mac:"Mod-Backspace",run:X4},{mac:"Mod-Delete",run:mC}].concat(l8.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),bC=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:R4,shift:$4},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Q4,shift:F4},{key:"Alt-ArrowUp",run:q4},{key:"Shift-Alt-ArrowUp",run:J4},{key:"Alt-ArrowDown",run:K4},{key:"Shift-Alt-ArrowDown",run:e8},{key:"Escape",run:G4},{key:"Mod-Enter",run:i8},{key:"Alt-l",mac:"Ctrl-l",run:j4},{key:"Mod-i",run:H4,preventDefault:!0},{key:"Mod-[",run:a8},{key:"Mod-]",run:o8},{key:"Mod-Alt-\\",run:s8},{key:"Shift-Mod-k",run:t8},{key:"Shift-Mod-\\",run:N4},{key:"Mod-/",run:u4},{key:"Alt-A",run:f4}].concat(c8);function $t(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)vC(n,arguments[e]);return n}function vC(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)vC(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const j1=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class da{constructor(e,t,r=0,i=e.length,s){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(j1(o)):j1,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Tn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=G0(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=pr(e);let i=this.normalize(t);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(l)return this.value=l,this;if(s==i.length-1)break;o==r&&s<t.length&&t.charCodeAt(s)==a&&o++}}}match(e,t){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:t+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:t+1}:this.matches.push(1,t)),r}}typeof Symbol!="undefined"&&(da.prototype[Symbol.iterator]=function(){return this});const wC={from:-1,to:-1,match:/.*/.exec("")},gO="gm"+(/x/.unicode==null?"":"u");class AC{constructor(e,t,r,i=0,s=e.length){if(this.to=s,this.curLine="",this.done=!1,this.value=wC,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new _C(e,t,r,i,s);this.re=new RegExp(t,gO+(r!=null&&r.ignoreCase?"i":"")),this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=i,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=i+(r==i?1:0),r==this.curLine.length&&this.nextLine(),r<i||r>this.value.to)return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const wm=new WeakMap;class qo{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=wm.get(e);if(!i||i.from>=r||i.to<=t){let a=new qo(t,e.sliceString(t,r));return wm.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:s,from:o}=i;return o>t&&(s=e.sliceString(t,o)+s,o=t),i.to<r&&(s+=e.sliceString(i.to,r)),wm.set(e,new qo(o,s)),new qo(t,s.slice(t-o,r-o))}}class _C{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=wC,this.matchPos=i,this.re=new RegExp(t,gO+(r!=null&&r.ignoreCase?"i":"")),this.flat=qo.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let r=this.flat.from+t.index,i=r+t[0].length;return this.value={from:r,to:i,match:t},this.matchPos=i+(r==i?1:0),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=qo.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}typeof Symbol!="undefined"&&(AC.prototype[Symbol.iterator]=_C.prototype[Symbol.iterator]=function(){return this});function u8(n){try{return new RegExp(n,gO),!0}catch{return!1}}function ky(n){let e=$t("input",{class:"cm-textfield",name:"line"}),t=$t("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),n.dispatch({effects:sf.of(!1)}),n.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},$t("label",n.state.phrase("Go to line"),": ",e)," ",$t("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:s}=n,o=s.doc.lineAt(s.selection.main.head),[,a,l,c,u]=i,h=c?+c.slice(1):0,f=l?+l:o.number;if(l&&u){let d=f/100;a&&(d=d*(a=="-"?-1:1)+o.number/s.doc.lines),f=Math.round(s.doc.lines*d)}else l&&a&&(f=f*(a=="-"?-1:1)+o.number);let p=s.doc.line(Math.max(1,Math.min(s.doc.lines,f)));n.dispatch({effects:sf.of(!1),selection:ve.cursor(p.from+Math.max(0,Math.min(h,p.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const sf=et.define(),H1=yn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(sf)&&(n=t.value);return n},provide:n=>uc.from(n,e=>e?ky:null)}),h8=n=>{let e=cc(n,ky);if(!e){let t=[sf.of(!0)];n.state.field(H1,!1)==null&&t.push(et.appendConfig.of([H1,f8])),n.dispatch({effects:t}),e=cc(n,ky)}return e&&e.dom.querySelector("input").focus(),!0},f8=We.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),d8={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},xC=je.define({combine(n){return Bi(n,d8,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function p8(n){let e=[b8,O8];return n&&e.push(xC.of(n)),e}const m8=Me.mark({class:"cm-selectionMatch"}),g8=Me.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function G1(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=Ln.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=Ln.Word)}function y8(n,e,t,r){return n(e.sliceDoc(t,t+1))==Ln.Word&&n(e.sliceDoc(r-1,r))==Ln.Word}const O8=Zt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(xC),{state:t}=n,r=t.selection;if(r.ranges.length>1)return Me.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Me.none;let l=t.wordAt(i.head);if(!l)return Me.none;o=t.charCategorizer(i.head),s=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Me.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(G1(o,t,i.from,i.to)&&y8(o,t,i.from,i.to)))return Me.none}else if(s=t.sliceDoc(i.from,i.to).trim(),!s)return Me.none}let a=[];for(let l of n.visibleRanges){let c=new da(t.doc,s,l.from,l.to);for(;!c.next().done;){let{from:u,to:h}=c.value;if((!o||G1(o,t,u,h))&&(i.empty&&u<=i.from&&h>=i.to?a.push(g8.range(u,h)):(u>=i.to||h<=i.from)&&a.push(m8.range(u,h)),a.length>e.maxMatches))return Me.none}}return Me.set(a)}},{decorations:n=>n.decorations}),b8=We.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),v8=({state:n,dispatch:e})=>{let{selection:t}=n,r=ve.create(t.ranges.map(i=>n.wordAt(i.head)||ve.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function w8(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let o=!1,a=new da(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new da(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const A8=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return v8({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=w8(n,r);return i?(e(n.update({selection:n.selection.addRange(ve.range(i.from,i.to),!1),effects:We.scrollIntoView(i.to)})),!0):!1},yd=je.define({combine(n){var e;return{top:n.reduce((t,r)=>t!=null?t:r.top,void 0)||!1,caseSensitive:n.reduce((t,r)=>t!=null?t:r.caseSensitive,void 0)||!1,createPanel:((e=n.find(t=>t.createPanel))===null||e===void 0?void 0:e.createPanel)||(t=>new Q8(t))}}});function _8(n){return n?[yd.of(n),Ty]:Ty}class kC{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||u8(this.search)),this.unquoted=e.literal?this.search:this.search.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new k8(this):new x8(this)}getCursor(e,t=0,r=e.length){return this.regexp?zo(this,e,t,r):Uo(this,e,t,r)}}class SC{constructor(e){this.spec=e}}function Uo(n,e,t,r){return new da(e,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase())}class x8 extends SC{constructor(e){super(e)}nextMatch(e,t,r){let i=Uo(this.spec,e,r,e.length).nextOverlapping();return i.done&&(i=Uo(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),o=Uo(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let r=Uo(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Uo(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function zo(n,e,t,r){return new AC(e,n.search,n.caseSensitive?void 0:{ignoreCase:!0},t,r)}class k8 extends SC{nextMatch(e,t,r){let i=zo(this.spec,e,r,e.length).next();return i.done&&(i=zo(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),o=zo(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==t||a.from>s+10))return a;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t)}matchAll(e,t){let r=zo(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=zo(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const mc=et.define(),yO=et.define(),ls=yn.define({create(n){return new Am(Sy(n).create(),null)},update(n,e){for(let t of e.effects)t.is(mc)?n=new Am(t.value.create(),n.panel):t.is(yO)&&(n=new Am(n.query,t.value?OO:null));return n},provide:n=>uc.from(n,e=>e.panel)});class Am{constructor(e,t){this.query=e,this.panel=t}}const S8=Me.mark({class:"cm-searchMatch"}),T8=Me.mark({class:"cm-searchMatch cm-searchMatch-selected"}),E8=Zt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(ls))}update(n){let e=n.state.field(ls);(e!=n.startState.field(ls)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Me.none;let{view:t}=this,r=new vs;for(let i=0,s=t.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;n.highlight(t.state.doc,a,l,(c,u)=>{let h=t.state.selection.ranges.some(f=>f.from==c&&f.to==u);r.add(c,u,h?T8:S8)})}return r.finish()}},{decorations:n=>n.decorations});function Yc(n){return e=>{let t=e.state.field(ls,!1);return t&&t.query.spec.valid?n(e,t):bO(e)}}const of=Yc((n,{query:e})=>{let{from:t,to:r}=n.state.selection.main,i=e.nextMatch(n.state.doc,t,r);return!i||i.from==t&&i.to==r?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:vO(n,i),userEvent:"select.search"}),!0)}),af=Yc((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main,s=e.prevMatch(t.doc,r,i);return s?(n.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:vO(n,s),userEvent:"select.search"}),!0):!1}),C8=Yc((n,{query:e})=>{let t=e.matchAll(n.state.doc,1e3);return!t||!t.length?!1:(n.dispatch({selection:ve.create(t.map(r=>ve.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),I8=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],o=0;for(let a=new da(n.doc,n.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(ve.range(a.value.from,a.value.to))}return e(n.update({selection:ve.create(s,o),userEvent:"select.search.matches"})),!0},V1=Yc((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t.doc,r,r);if(!s)return!1;let o=[],a,l,c=[];if(s.from==r&&s.to==i&&(l=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(t.doc,s.from,s.to),c.push(We.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a={anchor:s.from-u,head:s.to-u},c.push(vO(n,s))}return n.dispatch({changes:o,selection:a,scrollIntoView:!!a,effects:c,userEvent:"input.replace"}),!0}),R8=Yc((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state.doc,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:We.announce.of(r),userEvent:"input.replace.all"}),!0});function OO(n){return n.state.facet(yd).createPanel(n)}function Sy(n,e){var t;let r=n.selection.main,i=r.empty||r.to>r.from+100?"":n.sliceDoc(r.from,r.to),s=(t=e==null?void 0:e.caseSensitive)!==null&&t!==void 0?t:n.facet(yd).caseSensitive;return e&&!i?e:new kC({search:i.replace(/\n/g,"\\n"),caseSensitive:s})}const bO=n=>{let e=n.state.field(ls,!1);if(e&&e.panel){let t=cc(n,OO);if(!t)return!1;let r=t.dom.querySelector("[main-field]");if(r&&r!=n.root.activeElement){let i=Sy(n.state,e.query.spec);i.valid&&n.dispatch({effects:mc.of(i)}),r.focus(),r.select()}}else n.dispatch({effects:[yO.of(!0),e?mc.of(Sy(n.state,e.query.spec)):et.appendConfig.of(Ty)]});return!0},TC=n=>{let e=n.state.field(ls,!1);if(!e||!e.panel)return!1;let t=cc(n,OO);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:yO.of(!1)}),!0},EC=[{key:"Mod-f",run:bO,scope:"editor search-panel"},{key:"F3",run:of,shift:af,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:of,shift:af,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:TC,scope:"editor search-panel"},{key:"Mod-Shift-l",run:I8},{key:"Alt-g",run:h8},{key:"Mod-d",run:A8,preventDefault:!0}];class Q8{constructor(e){this.view=e;let t=this.query=e.state.field(ls).query.spec;this.commit=this.commit.bind(this),this.searchField=$t("input",{value:t.search,placeholder:dr(e,"Find"),"aria-label":dr(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$t("input",{value:t.replace,placeholder:dr(e,"Replace"),"aria-label":dr(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=$t("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=$t("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit});function r(i,s,o){return $t("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=$t("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>of(e),[dr(e,"next")]),r("prev",()=>af(e),[dr(e,"previous")]),r("select",()=>C8(e),[dr(e,"all")]),$t("label",null,[this.caseField,dr(e,"match case")]),$t("label",null,[this.reField,dr(e,"regexp")]),...e.state.readOnly?[]:[$t("br"),this.replaceField,r("replace",()=>V1(e),[dr(e,"replace")]),r("replaceAll",()=>R8(e),[dr(e,"replace all")]),$t("button",{name:"close",onclick:()=>TC(e),"aria-label":dr(e,"close"),type:"button"},["\xD7"])]])}commit(){let e=new kC({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:mc.of(e)}))}keydown(e){a3(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?af:of)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),V1(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(mc)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(yd).top}}function dr(n,e){return n.state.phrase(e)}const Hu=30,Gu=/[\s\.,:;?!]/;function vO(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-Hu),o=Math.min(i,t+Hu),a=n.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Hu;l++)if(!Gu.test(a[l+1])&&Gu.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Hu;l--)if(!Gu.test(a[l-1])&&Gu.test(a[l])){a=a.slice(0,l);break}}return We.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const P8=We.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Ty=[ls,bo.lowest(E8),P8];class CC{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=Lt(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(RC(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function X1(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function D8(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=X1(e)+X1(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function IC(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:D8(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}function L8(n,e){return t=>{for(let r=Lt(t.state).resolveInner(t.pos,-1);r;r=r.parent)if(n.indexOf(r.name)>-1)return null;return e(t)}}class Y1{constructor(e,t,r){this.completion=e,this.source=t,this.match=r}}function cs(n){return n.selection.main.head}function RC(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}function N8(n,e,t,r){return Object.assign(Object.assign({},n.changeByRange(i=>{if(i==n.selection.main)return{changes:{from:t,to:r,insert:e},range:ve.cursor(t+e.length)};let s=r-t;return!i.empty||s&&n.sliceDoc(i.from-s,i.from)!=n.sliceDoc(t,r)?{range:i}:{changes:{from:i.from-s,to:i.from,insert:e},range:ve.cursor(i.from-s+e.length)}})),{userEvent:"input.complete"})}function QC(n,e){const t=e.completion.apply||e.completion.label;let r=e.source;typeof t=="string"?n.dispatch(N8(n.state,t,r.from,r.to)):t(n,e.completion,r.from,r.to)}const Z1=new WeakMap;function B8(n){if(!Array.isArray(n))return n;let e=Z1.get(n);return e||Z1.set(n,e=IC(n)),e}class M8{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let r=Tn(e,t),i=pr(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(Tn(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let g=Tn(e,0);return g==t[0]?[0,0,pr(g)]:g==r[0]?[-200,0,pr(g)]:null}let a=e.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let l=t.length,c=0;if(a<0){for(let g=0,v=Math.min(e.length,200);g<v&&c<l;){let O=Tn(e,g);(O==t[c]||O==r[c])&&(i[c++]=g),g+=pr(O)}if(c<l)return null}let u=0,h=0,f=!1,p=0,d=-1,m=-1,b=/[a-z]/.test(e),A=!0;for(let g=0,v=Math.min(e.length,200),O=0;g<v&&h<l;){let _=Tn(e,g);a<0&&(u<l&&_==t[u]&&(s[u++]=g),p<l&&(_==t[p]||_==r[p]?(p==0&&(d=g),m=g+1,p++):p=0));let x,T=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(x=G0(_))!=x.toLowerCase()?1:x!=x.toUpperCase()?2:0;(!g||T==1&&b||O==0&&T!=0)&&(t[h]==_||r[h]==_&&(f=!0)?o[h++]=g:o.length&&(A=!1)),O=T,g+=pr(_)}return h==l&&o[0]==0&&A?this.result(-100+(f?-200:0),o,e):p==l&&d==0?[-200-e.length,0,m]:a>-1?[-700-e.length,a,a+this.pattern.length]:p==l?[-200+-700-e.length,d,m]:h==l?this.result(-100+(f?-200:0)+-700+(A?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[e-r.length],s=1;for(let o of t){let a=o+(this.astral?pr(Tn(r,o)):1);s>1&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return i}}const ks=je.define({combine(n){return Bi(n,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>r=>$8(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})}});function $8(n,e){return n?e?n+" "+e:n:e}function F8(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let{label:o}=t,a=0;for(let l=1;l<i.length;){let c=i[l++],u=i[l++];c>a&&s.appendChild(document.createTextNode(o.slice(a,c)));let h=s.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(o.slice(c,u))),h.className="cm-completionMatchedText",a=u}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function q1(n,e,t){if(n<=t)return{from:0,to:n};if(e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class W8{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this};let r=e.state.field(t),{options:i,selected:s}=r.open,o=e.state.facet(ks);this.optionContent=F8(o),this.optionClass=o.optionClass,this.range=q1(i.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let l=a.target,c;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(c=/-(\d+)$/.exec(l.id))&&+c[1]<i.length){QC(e,i[+c[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=q1(t.options.length,t.selected,this.view.state.facet(ks).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>sr(this.view.state,o,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&z8(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect();if(i.top>Math.min(innerHeight,t.bottom)-10||i.bottom<Math.max(0,t.top)+10)return null;let s=Math.max(0,Math.min(i.top,innerHeight-r.height))-t.top,o=this.view.textDirection==Gt.RTL,a=t.left,l=innerWidth-t.right;return o&&a<Math.min(r.width,l)?o=!1:!o&&l<Math.min(r.width,a)&&(o=!0),{top:s,left:o}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=r.from;s<r.to;s++){let{completion:o,match:a}=e[s];const l=i.appendChild(document.createElement("li"));l.id=t+"-"+s,l.setAttribute("role","option");let c=this.optionClass(o);c&&(l.className=c);for(let u of this.optionContent){let h=u(o,this.view.state,a);h&&l.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function U8(n){return e=>new W8(e,n)}function z8(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<t.top?n.scrollTop-=t.top-r.top:r.bottom>t.bottom&&(n.scrollTop+=r.bottom-t.bottom)}function K1(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function j8(n,e){let t=[],r=0;for(let o of n)if(o.hasResult())if(o.result.filter===!1){let a=o.result.getMatch;for(let l of o.result.options){let c=[1e9-r++];if(a)for(let u of a(l))c.push(u);t.push(new Y1(l,o,c))}}else{let a=new M8(e.sliceDoc(o.from,o.to)),l;for(let c of o.result.options)(l=a.match(c.label))&&(c.boost!=null&&(l[0]+=c.boost),t.push(new Y1(c,o,l)))}let i=[],s=null;for(let o of t.sort(X8))!s||s.label!=o.completion.label||s.detail!=o.completion.detail||s.type!=null&&o.completion.type!=null&&s.type!=o.completion.type||s.apply!=o.completion.apply?i.push(o):K1(o.completion)>K1(s)&&(i[i.length-1]=o),s=o.completion;return i}class Ml{constructor(e,t,r,i,s){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ml(this.options,J1(t,e),this.tooltip,this.timestamp,e)}static build(e,t,r,i,s){let o=j8(e,t);if(!o.length)return null;let a=0;if(i&&i.selected){let l=i.options[i.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new Ml(o,J1(r,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:U8(mr),above:s.aboveCursor},i?i.timestamp:Date.now(),a)}map(e){return new Ml(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class lf{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new lf(V8,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(ks),s=(r.override||t.languageDataAt("autocomplete",cs(t)).map(B8)).map(a=>(this.active.find(c=>c.source==a)||new Wn(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!H8(s,this.active)?Ml.build(s,t,this.id,this.open,r):this.open&&e.docChanged?this.open.map(e.changes):this.open;!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Wn(a.source,0):a));for(let a of e.effects)a.is(DC)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new lf(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:G8}}function H8(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const G8={"aria-autocomplete":"list"};function J1(n,e){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":n+"-"+e,"aria-controls":n}}const V8=[];function X8(n,e){let t=e.match[0]-n.match[0];return t||n.completion.label.localeCompare(e.completion.label)}function Ey(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Wn{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=Ey(e),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Wn(i.source,0));for(let s of e.effects)if(s.is(wO))i=new Wn(i.source,1,s.value?cs(e.state):-1);else if(s.is(cf))i=new Wn(i.source,0);else if(s.is(PC))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,t,r){return t=="delete"||!r.activateOnTyping?this.map(e.changes):new Wn(this.source,1)}handleChange(e){return e.changes.touchesRange(cs(e.startState))?new Wn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Wn(this.source,this.state,e.mapPos(this.explicitPos))}}class $l extends Wn{constructor(e,t,r,i,s){super(e,2,t),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,t,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=cs(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||t=="delete"&&cs(e.startState)==this.from)return new Wn(this.source,t=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return Y8(this.result.validFor,e.state,s,o)?new $l(this.source,l,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new CC(e.state,a,l>=0)))?new $l(this.source,l,c,c.from,(i=c.to)!==null&&i!==void 0?i:cs(e.state)):new Wn(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Wn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new $l(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function Y8(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):RC(n,!0).test(i)}const wO=et.define(),cf=et.define(),PC=et.define({map(n,e){return n.map(t=>t.map(e))}}),DC=et.define(),mr=yn.define({create(){return lf.start()},update(n,e){return n.update(e)},provide:n=>[tO.from(n,e=>e.tooltip),We.contentAttributes.from(n,e=>e.attrs)]}),LC=75;function Vu(n,e="option"){return t=>{let r=t.state.field(mr,!1);if(!r||!r.open||Date.now()-r.open.timestamp<LC)return!1;let i=1,s;e=="page"&&(s=z3(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let o=r.open.selected+i*(n?1:-1),{length:a}=r.open.options;return o<0?o=e=="page"?0:a-1:o>=a&&(o=e=="page"?a-1:0),t.dispatch({effects:DC.of(o)}),!0}}const Z8=n=>{let e=n.state.field(mr,!1);return n.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<LC?!1:(QC(n,e.open.options[e.open.selected]),!0)},q8=n=>n.state.field(mr,!1)?(n.dispatch({effects:wO.of(!0)}),!0):!1,K8=n=>{let e=n.state.field(mr,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:cf.of(null)}),!0)};class J8{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const e_=50,e9=50,t9=1e3,n9=Zt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(mr).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(mr);if(!n.selectionSet&&!n.docChanged&&n.startState.field(mr)==e)return;let t=n.transactions.some(r=>(r.selection||r.docChanged)&&!Ey(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(t||i.updates.length+n.transactions.length>e9&&Date.now()-i.time>t9){for(let s of i.context.abortListeners)try{s()}catch(o){sr(this.view.state,o)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),e_):-1,this.composing!=0)for(let r of n.transactions)Ey(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(mr);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=cs(e),r=new CC(e,t,n.explicitPos==t),i=new J8(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:cf.of(null)}),sr(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),e_))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(ks);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let o=new $l(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:cs(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)o=o.update(a,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(mr).active.find(o=>o.source==i.active.source);if(s&&s.state==1)if(i.done==null){let o=new Wn(i.active.source,0);for(let a of i.updates)o=o.update(a,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:PC.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(mr,!1);n&&n.tooltip&&this.view.state.facet(ks).closeOnBlur&&this.view.dispatch({effects:cf.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:wO.of(!1)}),20),this.composing=0}}}),NC=We.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class r9{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class AO{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,An.TrackDel),r=e.mapPos(this.to,1,An.TrackDel);return t==null||r==null?null:new AO(this.field,t,r)}}class _O{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let h=0;h<u;h++)c+=e.facet(od);i.push(t+c.length-u),l=c+l.slice(u)}r.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new AO(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1;for(let u=0;u<t.length;u++)(a!=null?t[u].seq==a:l?t[u].name==l:!1)&&(c=u);if(c<0){let u=0;for(;u<t.length&&(a==null||t[u].seq!=null&&t[u].seq<a);)u++;t.splice(u,0,{seq:a,name:l}),c=u;for(let h of i)h.field>=c&&h.field++}i.push(new r9(c,r.length,s.index,s.index+l.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}for(let a;a=/([$#])\\{/.exec(o);){o=o.slice(0,a.index)+a[1]+"{"+o.slice(a.index+a[0].length);for(let l of i)l.line==r.length&&l.from>a.index&&(l.from--,l.to--)}r.push(o)}return new _O(r,i)}}let i9=Me.widget({widget:new class extends Mi{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),s9=Me.mark({class:"cm-snippetField"});class Na{constructor(e,t){this.ranges=e,this.active=t,this.deco=Me.set(e.map(r=>(r.from==r.to?i9:s9).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new Na(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const Zc=et.define({map(n,e){return n&&n.map(e)}}),o9=et.define(),gc=yn.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Zc))return t.value;if(t.is(o9)&&n)return new Na(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>We.decorations.from(n,e=>e?e.deco:Me.none)});function xO(n,e){return ve.create(n.filter(t=>t.field==e).map(t=>ve.range(t.from,t.to)))}function a9(n){let e=_O.parse(n);return(t,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(t.state,i),l={changes:{from:i,to:s,insert:Ot.of(o)},scrollIntoView:!0};if(a.length&&(l.selection=xO(a,0)),a.length>1){let c=new Na(a,0),u=l.effects=[Zc.of(c)];t.state.field(gc,!1)===void 0&&u.push(et.appendConfig.of([gc,f9,d9,NC]))}t.dispatch(t.state.update(l))}}function BC(n){return({state:e,dispatch:t})=>{let r=e.field(gc,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:xO(r.ranges,i),effects:Zc.of(s?null:new Na(r.ranges,i))})),!0}}const l9=({state:n,dispatch:e})=>n.field(gc,!1)?(e(n.update({effects:Zc.of(null)})),!0):!1,c9=BC(1),u9=BC(-1),h9=[{key:"Tab",run:c9,shift:u9},{key:"Escape",run:l9}],t_=je.define({combine(n){return n.length?n[0]:h9}}),f9=bo.highest(vo.compute([t_],n=>n.facet(t_)));function Cr(n,e){return Object.assign(Object.assign({},e),{apply:a9(n)})}const d9=We.domEventHandlers({mousedown(n,e){let t=e.state.field(gc,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:xO(t.ranges,i.field),effects:Zc.of(t.ranges.some(s=>s.field>i.field)?new Na(t.ranges,i.field):null)}),!0)}}),uf={brackets:["(","[","{","'",'"'],before:")]}:;>"},Ys=et.define({map(n,e){let t=e.mapPos(n,-1,An.TrackAfter);return t==null?void 0:t}}),kO=et.define({map(n,e){return e.mapPos(n)}}),SO=new class extends oo{};SO.startSide=1;SO.endSide=-1;const MC=yn.define({create(){return vt.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(r,-1)&&(n=vt.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(Ys)?n=n.update({add:[SO.range(t.value,t.value+1)]}):t.is(kO)&&(n=n.update({filter:r=>r!=t.value}));return n}});function p9(){return[g9,MC]}const _m="()[]{}<>";function $C(n){for(let e=0;e<_m.length;e+=2)if(_m.charCodeAt(e)==n)return _m.charAt(e+1);return G0(n<128?n:n+1)}function FC(n,e){return n.languageDataAt("closeBrackets",e)[0]||uf}const m9=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),g9=We.inputHandler.of((n,e,t,r)=>{if((m9?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&pr(Tn(r,0))==1||e!=i.from||t!=i.to)return!1;let s=b9(n.state,r);return s?(n.dispatch(s),!0):!1}),y9=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=FC(n,n.selection.main.head).brackets||uf.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let a=v9(n.doc,o.head);for(let l of r)if(l==a&&Od(n.doc,o.head)==$C(Tn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ve.cursor(o.head-l.length),userEvent:"delete.backward"}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0})),!i},O9=[{key:"Backspace",run:y9}];function b9(n,e){let t=FC(n,n.selection.main.head),r=t.brackets||uf.brackets;for(let i of r){let s=$C(Tn(i,0));if(e==i)return s==i?_9(n,i,r.indexOf(i+i+i)>-1):w9(n,i,s,t.before||uf.before);if(e==s&&WC(n,n.selection.main.from))return A9(n,i,s)}return null}function WC(n,e){let t=!1;return n.field(MC).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function Od(n,e){let t=n.sliceString(e,e+2);return t.slice(0,pr(Tn(t,0)))}function v9(n,e){let t=n.sliceString(e-2,e);return pr(Tn(t,0))==t.length?t:t.slice(1)}function w9(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Ys.of(o.to+e.length),range:ve.range(o.anchor+e.length,o.head+e.length)};let a=Od(n.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:Ys.of(o.head+e.length),range:ve.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function A9(n,e,t){let r=null,i=n.selection.ranges.map(s=>s.empty&&Od(n.doc,s.head)==t?ve.cursor(s.head+t.length):r=s);return r?null:n.update({selection:ve.create(i,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:s})=>kO.of(s))})}function _9(n,e,t){let r=null,i=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:Ys.of(s.to+e.length),range:ve.range(s.anchor+e.length,s.head+e.length)};let o=s.head,a=Od(n.doc,o);if(a==e){if(n_(n,o))return{changes:{insert:e+e,from:o},effects:Ys.of(o+e.length),range:ve.cursor(o+e.length)};if(WC(n,o)){let l=t&&n.sliceDoc(o,o+e.length*3)==e+e+e;return{range:ve.cursor(o+e.length*(l?3:1)),effects:kO.of(o)}}}else{if(t&&n.sliceDoc(o-2*e.length,o)==e+e&&n_(n,o-2*e.length))return{changes:{insert:e+e+e+e,from:o},effects:Ys.of(o+e.length),range:ve.cursor(o+e.length)};if(n.charCategorizer(o)(a)!=Ln.Word){let l=n.sliceDoc(o-1,o);if(l!=e&&n.charCategorizer(o)(l)!=Ln.Word&&!x9(n,o,e))return{changes:{insert:e+e,from:o},effects:Ys.of(o+e.length),range:ve.cursor(o+e.length)}}}return{range:r=s}});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function n_(n,e){let t=Lt(n).resolveInner(e+1);return t.parent&&t.from==e}function x9(n,e,t){let r=Lt(n).resolveInner(e,-1);for(let i=0;i<5;i++){if(n.sliceDoc(r.from,r.from+t.length)==t)return!0;let s=r.to==e&&r.parent;if(!s)break;r=s}return!1}function k9(n={}){return[mr,ks.of(n),n9,S9,NC]}const UC=[{key:"Ctrl-Space",run:q8},{key:"Escape",run:K8},{key:"ArrowDown",run:Vu(!0)},{key:"ArrowUp",run:Vu(!1)},{key:"PageDown",run:Vu(!0,"page")},{key:"PageUp",run:Vu(!1,"page")},{key:"Enter",run:Z8}],S9=bo.highest(vo.computeN([ks],n=>n.facet(ks).defaultKeymap?[UC]:[]));class T9{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class js{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,s=r.facet(Go).markerFilter;s&&(i=s(i));let o=Me.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Me.widget({widget:new B9(a),diagnostic:a}).range(a.from):Me.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new js(o,t,pa(o))}}function pa(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new T9(i,s,o.diagnostic),!1}),r}function E9(n,e){return!!(n.effects.some(t=>t.is(TO))||n.changes.touchesRange(e.pos))}function zC(n,e){return n.field(ir,!1)?e:e.concat(et.appendConfig.of([ir,We.decorations.compute([ir],t=>{let{selected:r,panel:i}=t.field(ir);return!r||!i||r.from==r.to?Me.none:Me.set([I9.range(r.from,r.to)])}),U3(R9,{hideOn:E9}),$9]))}function C9(n,e){return{effects:zC(n,[TO.of(e)])}}const TO=et.define(),EO=et.define(),jC=et.define(),ir=yn.define({create(){return new js(Me.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),r=null;if(n.selected){let i=e.changes.mapPos(n.selected.from,1);r=pa(t,n.selected.diagnostic,i)||pa(t,null,i)}n=new js(t,n.panel,r)}for(let t of e.effects)t.is(TO)?n=js.init(t.value,n.panel,e.state):t.is(EO)?n=new js(n.diagnostics,t.value?bd.open:null,n.selected):t.is(jC)&&(n=new js(n.diagnostics,n.panel,t.value));return n},provide:n=>[uc.from(n,e=>e.panel),We.decorations.from(n,e=>e.diagnostics)]}),I9=Me.mark({class:"cm-lintRange cm-lintRange-active"});function R9(n,e,t){let{diagnostics:r}=n.state.field(ir),i=[],s=2e8,o=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:u})=>{e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0))&&(i.push(u.diagnostic),s=Math.min(l,s),o=Math.max(c,o))});let a=n.state.facet(Go).tooltipFilter;return a&&(i=a(i)),i.length?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:Q9(n,i)}}}:null}function Q9(n,e){return $t("ul",{class:"cm-tooltip-lint"},e.map(t=>GC(n,t,!1)))}const P9=n=>{let e=n.state.field(ir,!1);(!e||!e.panel)&&n.dispatch({effects:zC(n.state,[EO.of(!0)])});let t=cc(n,bd.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},r_=n=>{let e=n.state.field(ir,!1);return!e||!e.panel?!1:(n.dispatch({effects:EO.of(!1)}),!0)},D9=n=>{let e=n.state.field(ir,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},L9=[{key:"Mod-Shift-m",run:P9},{key:"F8",run:D9}],N9=Zt.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Go);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Go);Promise.all(t.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(C9(this.view.state,i))},r=>{sr(this.view.state,r)})}}update(n){let e=n.state.facet(Go);(n.docChanged||e!=n.startState.facet(Go))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Go=je.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},Bi(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:N9});function HC(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function GC(n,e,t){var r;let i=t?HC(e.actions):[];return $t("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},$t("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=h=>{h.preventDefault();let f=pa(n.state.field(ir).diagnostics,e);f&&s.apply(n,f.from,f.to)},{name:l}=s,c=i[o]?l.indexOf(i[o]):-1,u=c<0?l:[l.slice(0,c),$t("u",l.slice(c,c+1)),l.slice(c+1)];return $t("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${c<0?"":` (access key "${i[o]})"`}.`},u)}),e.source&&$t("div",{class:"cm-diagnosticSource"},e.source))}class B9 extends Mi{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return $t("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class i_{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=GC(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class bd{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)r_(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=HC(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=pa(this.view.state.field(ir).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=$t("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=$t("div",{class:"cm-panel-lint"},this.list,$t("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>r_(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(ir).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(ir),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,u;for(let h=r;h<this.items.length;h++)if(this.items[h].diagnostic==l.diagnostic){c=h;break}c<0?(u=new i_(this.view,l.diagnostic),this.items.splice(r,0,u),i=!0):(u=this.items[c],c>r&&(this.items.splice(r,c-r),i=!0)),t&&u.diagnostic==t.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),s=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new i_(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(ir),r=pa(t.diagnostics,this.items[e].diagnostic);!r||this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:jC.of(r)})}static open(e){return new bd(e)}}function M9(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function xm(n){return M9(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const $9=We.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:xm("#d11")},".cm-lintRange-warning":{backgroundImage:xm("orange")},".cm-lintRange-info":{backgroundImage:xm("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});[...O9,...bC,...EC,...pO,...jW,...UC,...L9];const F9=[hE(),HE(),oE(),cO(ME,{fallback:!0}),vo.of([...bC,...pO])];class hf{constructor(e,t,r,i,s,o,a){this.type=e,this.value=t,this.from=r,this.hash=i,this.end=s,this.children=o,this.positions=a,this.hashProp=[[tt.contextHash,i]]}static create(e,t,r,i,s){let o=i+(i<<8)+e+(t<<4)|0;return new hf(e,t,r,o,s,[],[])}addChild(e,t){e.prop(tt.contextHash)!=this.hash&&(e=new wt(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let r=this.children.length-1;return r>=0&&(t=Math.max(t,this.positions[r]+this.children[r].length+this.from)),new wt(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(s,o,a)=>new wt(sn.none,s,o,a,this.hashProp)})}}var Ce;(function(n){n[n.Document=1]="Document",n[n.CodeBlock=2]="CodeBlock",n[n.FencedCode=3]="FencedCode",n[n.Blockquote=4]="Blockquote",n[n.HorizontalRule=5]="HorizontalRule",n[n.BulletList=6]="BulletList",n[n.OrderedList=7]="OrderedList",n[n.ListItem=8]="ListItem",n[n.ATXHeading1=9]="ATXHeading1",n[n.ATXHeading2=10]="ATXHeading2",n[n.ATXHeading3=11]="ATXHeading3",n[n.ATXHeading4=12]="ATXHeading4",n[n.ATXHeading5=13]="ATXHeading5",n[n.ATXHeading6=14]="ATXHeading6",n[n.SetextHeading1=15]="SetextHeading1",n[n.SetextHeading2=16]="SetextHeading2",n[n.HTMLBlock=17]="HTMLBlock",n[n.LinkReference=18]="LinkReference",n[n.Paragraph=19]="Paragraph",n[n.CommentBlock=20]="CommentBlock",n[n.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",n[n.Escape=22]="Escape",n[n.Entity=23]="Entity",n[n.HardBreak=24]="HardBreak",n[n.Emphasis=25]="Emphasis",n[n.StrongEmphasis=26]="StrongEmphasis",n[n.Link=27]="Link",n[n.Image=28]="Image",n[n.InlineCode=29]="InlineCode",n[n.HTMLTag=30]="HTMLTag",n[n.Comment=31]="Comment",n[n.ProcessingInstruction=32]="ProcessingInstruction",n[n.URL=33]="URL",n[n.HeaderMark=34]="HeaderMark",n[n.QuoteMark=35]="QuoteMark",n[n.ListMark=36]="ListMark",n[n.LinkMark=37]="LinkMark",n[n.EmphasisMark=38]="EmphasisMark",n[n.CodeMark=39]="CodeMark",n[n.CodeText=40]="CodeText",n[n.CodeInfo=41]="CodeInfo",n[n.LinkTitle=42]="LinkTitle",n[n.LinkLabel=43]="LinkLabel"})(Ce||(Ce={}));class W9{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class U9{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return Fl(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,r=0){for(let i=t;i<e;i++)r+=this.text.charCodeAt(i)==9?4-r%4:1;return r}findColumn(e){let t=0;for(let r=0;t<this.text.length&&r<e;t++)r+=this.text.charCodeAt(t)==9?4-r%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function s_(n,e,t){if(t.pos==t.text.length||n!=e.block&&t.indent>=e.stack[t.depth+1].value+t.baseIndent)return!0;if(t.indent>=t.baseIndent+4)return!1;let r=(n.type==Ce.OrderedList?RO:IO)(t,e,!1);return r>0&&(n.type!=Ce.BulletList||CO(t,e,!1)<0)&&t.text.charCodeAt(t.pos+r-1)==n.value}const VC={[Ce.Blockquote](n,e,t){return t.next!=62?!1:(t.markers.push(pt(Ce.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1)),t.moveBase(t.pos+(Tr(t.text.charCodeAt(t.pos+1))?2:1)),n.end=e.lineStart+t.text.length,!0)},[Ce.ListItem](n,e,t){return t.indent<t.baseIndent+n.value&&t.next>-1?!1:(t.moveBaseColumn(t.baseIndent+n.value),!0)},[Ce.OrderedList]:s_,[Ce.BulletList]:s_,[Ce.Document](){return!0}};function Tr(n){return n==32||n==9||n==10||n==13}function Fl(n,e=0){for(;e<n.length&&Tr(n.charCodeAt(e));)e++;return e}function o_(n,e,t){for(;e>t&&Tr(n.charCodeAt(e-1));)e--;return e}function XC(n){if(n.next!=96&&n.next!=126)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;if(e<n.pos+3)return-1;if(n.next==96){for(let t=e;t<n.text.length;t++)if(n.text.charCodeAt(t)==96)return-1}return e}function YC(n){return n.next!=62?-1:n.text.charCodeAt(n.pos+1)==32?2:1}function CO(n,e,t){if(n.next!=42&&n.next!=45&&n.next!=95)return-1;let r=1;for(let i=n.pos+1;i<n.text.length;i++){let s=n.text.charCodeAt(i);if(s==n.next)r++;else if(!Tr(s))return-1}return t&&n.next==45&&KC(n)>-1&&n.depth==e.stack.length||r<3?-1:1}function ZC(n,e){for(let t=n.stack.length-1;t>=0;t--)if(n.stack[t].type==e)return!0;return!1}function IO(n,e,t){return(n.next==45||n.next==43||n.next==42)&&(n.pos==n.text.length-1||Tr(n.text.charCodeAt(n.pos+1)))&&(!t||ZC(e,Ce.BulletList)||n.skipSpace(n.pos+2)<n.text.length)?1:-1}function RO(n,e,t){let r=n.pos,i=n.next;for(;i>=48&&i<=57;){r++;if(r==n.text.length)return-1;i=n.text.charCodeAt(r)}return r==n.pos||r>n.pos+9||i!=46&&i!=41||r<n.text.length-1&&!Tr(n.text.charCodeAt(r+1))||t&&!ZC(e,Ce.OrderedList)&&(n.skipSpace(r+1)==n.text.length||r>n.pos+1||n.next!=49)?-1:r+1-n.pos}function qC(n){if(n.next!=35)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==35;)e++;if(e<n.text.length&&n.text.charCodeAt(e)!=32)return-1;let t=e-n.pos;return t>6?-1:t}function KC(n){if(n.next!=45&&n.next!=61||n.indent>=n.baseIndent+4)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;let t=e;for(;e<n.text.length&&Tr(n.text.charCodeAt(e));)e++;return e==n.text.length?t:-1}const Cy=/^[ \t]*$/,JC=/-->/,e2=/\?>/,Iy=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,JC],[/^\s*<\?/,e2],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,Cy],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,Cy]];function t2(n,e,t){if(n.next!=60)return-1;let r=n.text.slice(n.pos);for(let i=0,s=Iy.length-(t?1:0);i<s;i++)if(Iy[i][0].test(r))return i;return-1}function a_(n,e){let t=n.countIndent(e,n.pos,n.indent),r=n.countIndent(n.skipSpace(e),e,t);return r>=t+5?t+1:r}function Fs(n,e,t){let r=n.length-1;r>=0&&n[r].to==e&&n[r].type==Ce.CodeText?n[r].to=t:n.push(pt(Ce.CodeText,e,t))}const Xu={LinkReference:void 0,IndentedCode(n,e){let t=e.baseIndent+4;if(e.indent<t)return!1;let r=e.findColumn(t),i=n.lineStart+r,s=n.lineStart+e.text.length,o=[],a=[];for(Fs(o,i,s);n.nextLine()&&e.depth>=n.stack.length;)if(e.pos==e.text.length){Fs(a,n.lineStart-1,n.lineStart);for(let l of e.markers)a.push(l)}else{if(e.indent<t)break;{if(a.length){for(let c of a)c.type==Ce.CodeText?Fs(o,c.from,c.to):o.push(c);a=[]}Fs(o,n.lineStart-1,n.lineStart);for(let c of e.markers)o.push(c);s=n.lineStart+e.text.length;let l=n.lineStart+e.findColumn(e.baseIndent+4);l<s&&Fs(o,l,s)}}return a.length&&(a=a.filter(l=>l.type!=Ce.CodeText),a.length&&(e.markers=a.concat(e.markers))),n.addNode(n.buffer.writeElements(o,-i).finish(Ce.CodeBlock,s-i),i),!0},FencedCode(n,e){let t=XC(e);if(t<0)return!1;let r=n.lineStart+e.pos,i=e.next,s=t-e.pos,o=e.skipSpace(t),a=o_(e.text,e.text.length,o),l=[pt(Ce.CodeMark,r,r+s)];o<a&&l.push(pt(Ce.CodeInfo,n.lineStart+o,n.lineStart+a));for(let c=!0;n.nextLine()&&e.depth>=n.stack.length;c=!1){let u=e.pos;if(e.indent-e.baseIndent<4)for(;u<e.text.length&&e.text.charCodeAt(u)==i;)u++;if(u-e.pos>=s&&e.skipSpace(u)==e.text.length){for(let h of e.markers)l.push(h);l.push(pt(Ce.CodeMark,n.lineStart+e.pos,n.lineStart+u)),n.nextLine();break}else{c||Fs(l,n.lineStart-1,n.lineStart);for(let p of e.markers)l.push(p);let h=n.lineStart+e.basePos,f=n.lineStart+e.text.length;h<f&&Fs(l,h,f)}}return n.addNode(n.buffer.writeElements(l,-r).finish(Ce.FencedCode,n.prevLineEnd()-r),r),!0},Blockquote(n,e){let t=YC(e);return t<0?!1:(n.startContext(Ce.Blockquote,e.pos),n.addNode(Ce.QuoteMark,n.lineStart+e.pos,n.lineStart+e.pos+1),e.moveBase(e.pos+t),null)},HorizontalRule(n,e){if(CO(e,n,!1)<0)return!1;let t=n.lineStart+e.pos;return n.nextLine(),n.addNode(Ce.HorizontalRule,t),!0},BulletList(n,e){let t=IO(e,n,!1);if(t<0)return!1;n.block.type!=Ce.BulletList&&n.startContext(Ce.BulletList,e.basePos,e.next);let r=a_(e,e.pos+1);return n.startContext(Ce.ListItem,e.basePos,r-e.baseIndent),n.addNode(Ce.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},OrderedList(n,e){let t=RO(e,n,!1);if(t<0)return!1;n.block.type!=Ce.OrderedList&&n.startContext(Ce.OrderedList,e.basePos,e.text.charCodeAt(e.pos+t-1));let r=a_(e,e.pos+t);return n.startContext(Ce.ListItem,e.basePos,r-e.baseIndent),n.addNode(Ce.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},ATXHeading(n,e){let t=qC(e);if(t<0)return!1;let r=e.pos,i=n.lineStart+r,s=o_(e.text,e.text.length,r),o=s;for(;o>r&&e.text.charCodeAt(o-1)==e.next;)o--;(o==s||o==r||!Tr(e.text.charCodeAt(o-1)))&&(o=e.text.length);let a=n.buffer.write(Ce.HeaderMark,0,t).writeElements(n.parser.parseInline(e.text.slice(r+t+1,o),i+t+1),-i);o<e.text.length&&a.write(Ce.HeaderMark,o-r,s-r);let l=a.finish(Ce.ATXHeading1-1+t,e.text.length-r);return n.nextLine(),n.addNode(l,i),!0},HTMLBlock(n,e){let t=t2(e,n,!1);if(t<0)return!1;let r=n.lineStart+e.pos,i=Iy[t][1],s=[],o=i!=Cy;for(;!i.test(e.text)&&n.nextLine();){if(e.depth<n.stack.length){o=!1;break}for(let c of e.markers)s.push(c)}o&&n.nextLine();let a=i==JC?Ce.CommentBlock:i==e2?Ce.ProcessingInstructionBlock:Ce.HTMLBlock,l=n.prevLineEnd();return n.addNode(n.buffer.writeElements(s,-r).finish(a,l-r),r),!0},SetextHeading:void 0};class z9{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,r){if(this.stage==-1)return!1;let i=r.content+`
`+t.scrub(),s=this.advance(i);return s>-1&&s<i.length?this.complete(e,r,s):!1}finish(e,t){return(this.stage==2||this.stage==3)&&Fl(t.content,this.pos)==t.content.length?this.complete(e,t,t.content.length):!1}complete(e,t,r){return e.addLeafElement(t,pt(Ce.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(u2(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(pt(Ce.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(l2(e,Fl(e,this.pos),this.start)))return-1}else if(this.stage==2){let t=Fl(e,this.pos),r=0;if(t>this.pos){let i=c2(e,t,this.start);if(i){let s=km(e,i.to-this.start);s>0&&(this.nextStage(i),r=s)}}return r||(r=km(e,this.pos)),r>0&&r<e.length?r:-1}else return km(e,this.pos)}}}function km(n,e){for(;e<n.length;e++){let t=n.charCodeAt(e);if(t==10)break;if(!Tr(t))return-1}return e}class j9{nextLine(e,t,r){let i=t.depth<e.stack.length?-1:KC(t),s=t.next;if(i<0)return!1;let o=pt(Ce.HeaderMark,e.lineStart+t.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,pt(s==61?Ce.SetextHeading1:Ce.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),o])),!0}finish(){return!1}}const H9={LinkReference(n,e){return e.content.charCodeAt(0)==91?new z9(e):null},SetextHeading(){return new j9}},G9=[(n,e)=>qC(e)>=0,(n,e)=>XC(e)>=0,(n,e)=>YC(e)>=0,(n,e)=>IO(e,n,!0)>=0,(n,e)=>RO(e,n,!0)>=0,(n,e)=>CO(e,n,!0)>=0,(n,e)=>t2(e,n,!0)>=0],V9={text:"",end:0};class X9{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.line=new U9,this.atEnd=!1,this.dontInject=new Set,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=hf.create(Ce.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new K9(r,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(;e.depth<this.stack.length;)this.finishContext();for(let r of e.markers)this.addNode(r.type,r.from,r.to);if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,e);if(i!=!1){if(i==!0)return null;e.forward();continue e}}break}let t=new W9(this.lineStart+e.pos,e.text.slice(e.pos));for(let r of this.parser.leafBlockParsers)if(r){let i=r(this,t);i&&t.parsers.push(i)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,e,t))break e}for(let r of t.parsers)if(r.nextLine(this,e,t))return null;t.content+=`
`+e.scrub();for(let r of e.markers)t.marks.push(r)}return this.finishLeaf(t),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);if(!t)return!1;let r=t,i=this.absoluteLineStart+t;for(let s=1;s<this.ranges.length;s++){let o=this.ranges[s-1].to,a=this.ranges[s].from;o>=this.lineStart&&a<i&&(r-=a-o)}return this.lineStart+=r,this.absoluteLineStart+=t,this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++}scanLine(e){let t=V9;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(t.end),t.end+=t.text.length,this.ranges.length>1){let r=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<t.end;){i++;let s=this.ranges[i].from,o=this.lineChunkAt(s);t.end=s+o.length,t.text=t.text.slice(0,this.ranges[i-1].to-r)+o,r=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(t);e.depth<this.stack.length;e.depth++){let i=this.stack[e.depth],s=this.parser.skipContextMarkup[i.type];if(!s)throw new Error("Unhandled block context "+Ce[i.type]);if(!s(i,this,e))break;e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),r;if(this.input.lineChunks)r=t==`
`?"":t;else{let i=t.indexOf(`
`);r=i<0?t:t.slice(0,i)}return e+r.length>this.to?r.slice(0,this.to-e):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,r=0){this.block=hf.create(e,r,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,r=0){this.startContext(this.parser.getNodeType(e),t,r)}addNode(e,t,r){typeof e=="number"&&(e=new wt(this.parser.nodeSet.types[e],ma,ma,(r!=null?r:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(Py(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?n2(this.ranges,0,e.topNode,this.ranges[0].from,this.dontInject):e}finishLeaf(e){for(let r of e.parsers)if(r.finish(this,e))return;let t=Py(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(Ce.Paragraph,e.content.length),e.start)}elt(e,t,r,i){return typeof e=="string"?pt(this.parser.getNodeType(e),t,r,i):new s2(e,t)}get buffer(){return new i2(this.parser.nodeSet)}}function n2(n,e,t,r,i){if(i.has(t.tree))return t.tree;let s=n[e].to,o=[],a=[],l=t.from+r;function c(u,h){for(;h?u>=s:u>s;){let f=n[e+1].from-s;r+=f,u+=f,e++,s=n[e].to}}for(let u=t.firstChild;u;u=u.nextSibling){c(u.from+r,!0);let h=u.from+r,f;u.to+r>s?(f=n2(n,e,u,r,i),c(u.to+r,!1)):f=u.toTree(),o.push(f),a.push(h-l)}return c(t.to+r,!1),new wt(t.type,o,a,t.to+r-l,t.tree?t.tree.propValues:void 0)}class vd extends oO{constructor(e,t,r,i,s,o,a,l,c){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=s,this.skipContextMarkup=o,this.inlineParsers=a,this.inlineNames=l,this.wrappers=c,this.nodeTypes=Object.create(null);for(let u of e.types)this.nodeTypes[u.name]=u.id}createParse(e,t,r){let i=new X9(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}configure(e){let t=Ry(e);if(!t)return this;let{nodeSet:r,skipContextMarkup:i}=this,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),a=this.blockNames.slice(),l=this.inlineParsers.slice(),c=this.inlineNames.slice(),u=this.endLeafBlock.slice(),h=this.wrappers;if(ul(t.defineNodes)){i=Object.assign({},i);let f=r.types.slice(),p;for(let d of t.defineNodes){let{name:m,block:b,composite:A,style:g}=typeof d=="string"?{name:d}:d;if(f.some(_=>_.name==m))continue;A&&(i[f.length]=(_,x,T)=>A(x,T,_.value));let v=f.length,O=A?["Block","BlockContext"]:b?v>=Ce.ATXHeading1&&v<=Ce.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;f.push(sn.define({id:v,name:m,props:O&&[[tt.group,O]]})),g&&(p||(p={}),Array.isArray(g)||g instanceof Pr?p[m]=g:Object.assign(p,g))}r=new Hc(f),p&&(r=r.extend(Da(p)))}if(ul(t.props)&&(r=r.extend(...t.props)),ul(t.remove))for(let f of t.remove){let p=this.blockNames.indexOf(f),d=this.inlineNames.indexOf(f);p>-1&&(s[p]=o[p]=void 0),d>-1&&(l[d]=void 0)}if(ul(t.parseBlock))for(let f of t.parseBlock){let p=a.indexOf(f.name);if(p>-1)s[p]=f.parse,o[p]=f.leaf;else{let d=f.before?Yu(a,f.before):f.after?Yu(a,f.after)+1:a.length-1;s.splice(d,0,f.parse),o.splice(d,0,f.leaf),a.splice(d,0,f.name)}f.endLeaf&&u.push(f.endLeaf)}if(ul(t.parseInline))for(let f of t.parseInline){let p=c.indexOf(f.name);if(p>-1)l[p]=f.parse;else{let d=f.before?Yu(c,f.before):f.after?Yu(c,f.after)+1:c.length-1;l.splice(d,0,f.parse),c.splice(d,0,f.name)}}return t.wrap&&(h=h.concat(t.wrap)),new vd(r,s,o,a,u,i,l,c,h)}getNodeType(e){let t=this.nodeTypes[e];if(t==null)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let r=new Z9(this,e,t);e:for(let i=t;i<r.end;){let s=r.char(i);for(let o of this.inlineParsers)if(o){let a=o(r,s,i);if(a>=0){i=a;continue e}}i++}return r.resolveMarkers(0)}}function ul(n){return n!=null&&n.length>0}function Ry(n){if(!Array.isArray(n))return n;if(n.length==0)return null;let e=Ry(n[0]);if(n.length==1)return e;let t=Ry(n.slice(1));if(!t||!e)return e||t;let r=(o,a)=>(o||ma).concat(a||ma),i=e.wrap,s=t.wrap;return{props:r(e.props,t.props),defineNodes:r(e.defineNodes,t.defineNodes),parseBlock:r(e.parseBlock,t.parseBlock),parseInline:r(e.parseInline,t.parseInline),remove:r(e.remove,t.remove),wrap:i?s?(o,a,l,c)=>i(s(o,a,l,c),a,l,c):i:s}}function Yu(n,e){let t=n.indexOf(e);if(t<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return t}let r2=[sn.none];for(let n=1,e;e=Ce[n];n++)r2[n]=sn.define({id:n,name:e,props:n>=Ce.Escape?[]:[[tt.group,n in VC?["Block","BlockContext"]:["Block","LeafBlock"]]]});const ma=[];class i2{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,r,i=0){return this.content.push(e,t,r,4+i*4),this}writeElements(e,t=0){for(let r of e)r.writeTo(this,t);return this}finish(e,t){return wt.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class yc{constructor(e,t,r,i=ma){this.type=e,this.from=t,this.to=r,this.children=i}writeTo(e,t){let r=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-r)}toTree(e){return new i2(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class s2{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return ma}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function pt(n,e,t,r){return new yc(n,e,t,r)}const o2={resolve:"Emphasis",mark:"EmphasisMark"},a2={resolve:"Emphasis",mark:"EmphasisMark"},hl={},l_={};class Dr{constructor(e,t,r,i){this.type=e,this.from=t,this.to=r,this.side=i}}const c_="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let Qy=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{Qy=new RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]","u")}catch{}const Sm={Escape(n,e,t){if(e!=92||t==n.end-1)return-1;let r=n.char(t+1);for(let i=0;i<c_.length;i++)if(c_.charCodeAt(i)==r)return n.append(pt(Ce.Escape,t,t+2));return-1},Entity(n,e,t){if(e!=38)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(n.slice(t+1,t+31));return r?n.append(pt(Ce.Entity,t,t+1+r[0].length)):-1},InlineCode(n,e,t){if(e!=96||t&&n.char(t-1)==96)return-1;let r=t+1;for(;r<n.end&&n.char(r)==96;)r++;let i=r-t,s=0;for(;r<n.end;r++)if(n.char(r)==96){if(s++,s==i&&n.char(r+1)!=96)return n.append(pt(Ce.InlineCode,t,r+1,[pt(Ce.CodeMark,t,t+i),pt(Ce.CodeMark,r+1-i,r+1)]))}else s=0;return-1},HTMLTag(n,e,t){if(e!=60||t==n.end-1)return-1;let r=n.slice(t+1,n.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return n.append(pt(Ce.URL,t,t+1+i[0].length));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(s)return n.append(pt(Ce.Comment,t,t+1+s[0].length));let o=/^\?[^]*?\?>/.exec(r);if(o)return n.append(pt(Ce.ProcessingInstruction,t,t+1+o[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return a?n.append(pt(Ce.HTMLTag,t,t+1+a[0].length)):-1},Emphasis(n,e,t){if(e!=95&&e!=42)return-1;let r=t+1;for(;n.char(r)==e;)r++;let i=n.slice(t-1,t),s=n.slice(r,r+1),o=Qy.test(i),a=Qy.test(s),l=/\s|^$/.test(i),c=/\s|^$/.test(s),u=!c&&(!a||l||o),h=!l&&(!o||c||a),f=u&&(e==42||!h||o),p=h&&(e==42||!u||a);return n.append(new Dr(e==95?o2:a2,t,r,(f?1:0)|(p?2:0)))},HardBreak(n,e,t){if(e==92&&n.char(t+1)==10)return n.append(pt(Ce.HardBreak,t,t+2));if(e==32){let r=t+1;for(;n.char(r)==32;)r++;if(n.char(r)==10&&r>=t+2)return n.append(pt(Ce.HardBreak,t,r+1))}return-1},Link(n,e,t){return e==91?n.append(new Dr(hl,t,t+1,1)):-1},Image(n,e,t){return e==33&&n.char(t+1)==91?n.append(new Dr(l_,t,t+2,1)):-1},LinkEnd(n,e,t){if(e!=93)return-1;for(let r=n.parts.length-1;r>=0;r--){let i=n.parts[r];if(i instanceof Dr&&(i.type==hl||i.type==l_)){if(!i.side||n.skipSpace(i.to)==t&&!/[(\[]/.test(n.slice(t+1,t+2)))return n.parts[r]=null,-1;let s=n.takeContent(r),o=n.parts[r]=Y9(n,s,i.type==hl?Ce.Link:Ce.Image,i.from,t+1);if(i.type==hl)for(let a=0;a<r;a++){let l=n.parts[a];l instanceof Dr&&l.type==hl&&(l.side=0)}return o.to}}return-1}};function Y9(n,e,t,r,i){let{text:s}=n,o=n.char(i),a=i;if(e.unshift(pt(Ce.LinkMark,r,r+(t==Ce.Image?2:1))),e.push(pt(Ce.LinkMark,i-1,i)),o==40){let l=n.skipSpace(i+1),c=l2(s,l-n.offset,n.offset),u;c&&(l=n.skipSpace(c.to),u=c2(s,l-n.offset,n.offset),u&&(l=n.skipSpace(u.to))),n.char(l)==41&&(e.push(pt(Ce.LinkMark,i,i+1)),a=l+1,c&&e.push(c),u&&e.push(u),e.push(pt(Ce.LinkMark,l,a)))}else if(o==91){let l=u2(s,i-n.offset,n.offset,!1);l&&(e.push(l),a=l.to)}return pt(t,r,a,e)}function l2(n,e,t){if(n.charCodeAt(e)==60){for(let i=e+1;i<n.length;i++){let s=n.charCodeAt(i);if(s==62)return pt(Ce.URL,e+t,i+1+t);if(s==60||s==10)return!1}return null}else{let i=0,s=e;for(let o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(Tr(a))break;if(o)o=!1;else if(a==40)i++;else if(a==41){if(!i)break;i--}else a==92&&(o=!0)}return s>e?pt(Ce.URL,e+t,s+t):s==n.length?null:!1}}function c2(n,e,t){let r=n.charCodeAt(e);if(r!=39&&r!=34&&r!=40)return!1;let i=r==40?41:r;for(let s=e+1,o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(o)o=!1;else{if(a==i)return pt(Ce.LinkTitle,e+t,s+1+t);a==92&&(o=!0)}}return null}function u2(n,e,t,r){for(let i=!1,s=e+1,o=Math.min(n.length,s+999);s<o;s++){let a=n.charCodeAt(s);if(i)i=!1;else{if(a==93)return r?!1:pt(Ce.LinkLabel,e+t,s+1+t);if(r&&!Tr(a)&&(r=!1),a==91)return!1;a==92&&(i=!0)}}return null}class Z9{constructor(e,t,r){this.parser=e,this.text=t,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,r,i,s){return this.append(new Dr(e,t,r,(i?1:0)|(s?2:0)))}addElement(e){return this.append(e)}resolveMarkers(e){for(let r=e;r<this.parts.length;r++){let i=this.parts[r];if(!(i instanceof Dr&&i.type.resolve&&i.side&2))continue;let s=i.type==o2||i.type==a2,o=i.to-i.from,a,l=r-1;for(;l>=e;l--){let m=this.parts[l];if(!(!(m instanceof Dr&&m.side&1&&m.type==i.type)||s&&(i.side&1||m.side&2)&&(m.to-m.from+o)%3==0&&((m.to-m.from)%3||o%3))){a=m;break}}if(!a)continue;let c=i.type.resolve,u=[],h=a.from,f=i.to;if(s){let m=Math.min(2,a.to-a.from,o);h=a.to-m,f=i.from+m,c=m==1?"Emphasis":"StrongEmphasis"}a.type.mark&&u.push(this.elt(a.type.mark,h,a.to));for(let m=l+1;m<r;m++)this.parts[m]instanceof yc&&u.push(this.parts[m]),this.parts[m]=null;i.type.mark&&u.push(this.elt(i.type.mark,i.from,f));let p=this.elt(c,h,f,u);this.parts[l]=s&&a.from!=h?new Dr(a.type,a.from,h,a.side):null,(this.parts[r]=s&&i.to!=f?new Dr(i.type,f,i.to,i.side):null)?this.parts.splice(r,0,p):this.parts[r]=p}let t=[];for(let r=e;r<this.parts.length;r++){let i=this.parts[r];i instanceof yc&&t.push(i)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let r=this.parts[t];if(r instanceof Dr&&r.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return Fl(this.text,e-this.offset)+this.offset}elt(e,t,r,i){return typeof e=="string"?pt(this.parser.getNodeType(e),t,r,i):new s2(e,t)}}function Py(n,e){if(!e.length)return n;if(!n.length)return e;let t=n.slice(),r=0;for(let i of e){for(;r<t.length&&t[r].to<i.to;)r++;if(r<t.length&&t[r].from<i.from){let s=t[r];s instanceof yc&&(t[r]=new yc(s.type,s.from,s.to,Py(s.children,[i])))}else t.splice(r++,0,i)}return t}const q9=[Ce.CodeBlock,Ce.ListItem,Ce.OrderedList,Ce.BulletList];class K9{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=t;if(!r.childAfter(i))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(tt.contextHash)==e}takeNodes(e){let t=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,o=s,a=e.block.children.length,l=o,c=a;for(;;){if(t.to-r>i){if(t.type.isAnonymous&&t.firstChild())continue;break}if(e.dontInject.add(t.tree),e.addNode(t.tree,t.from-r),t.type.is("Block")&&(q9.indexOf(t.type.id)<0?(o=t.to-r,a=e.block.children.length):(o=l,a=c,l=t.to-r,c=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>a;)e.block.children.pop(),e.block.positions.pop();return o-s}}const J9=Da({"Blockquote/...":re.quote,HorizontalRule:re.contentSeparator,"ATXHeading1/... SetextHeading1/...":re.heading1,"ATXHeading2/... SetextHeading2/...":re.heading2,"ATXHeading3/...":re.heading3,"ATXHeading4/...":re.heading4,"ATXHeading5/...":re.heading5,"ATXHeading6/...":re.heading6,"Comment CommentBlock":re.comment,Escape:re.escape,Entity:re.character,"Emphasis/...":re.emphasis,"StrongEmphasis/...":re.strong,"Link/... Image/...":re.link,"OrderedList/... BulletList/...":re.list,"BlockQuote/...":re.quote,"InlineCode CodeText":re.monospace,URL:re.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":re.processingInstruction,"CodeInfo LinkLabel":re.labelName,LinkTitle:re.string,Paragraph:re.content}),eU=new vd(new Hc(r2).extend(J9),Object.keys(Xu).map(n=>Xu[n]),Object.keys(Xu).map(n=>H9[n]),Object.keys(Xu),G9,VC,Object.keys(Sm).map(n=>Sm[n]),Object.keys(Sm),[]);function tU(n,e,t){let r=[];for(let i=n.firstChild,s=e;;i=i.nextSibling){let o=i?i.from:t;if(o>s&&r.push({from:s,to:o}),!i)break;s=i.to}return r}function nU(n){let{codeParser:e,htmlParser:t}=n;return{wrap:AE((i,s)=>{let o=i.type.id;if(e&&(o==Ce.CodeBlock||o==Ce.FencedCode)){let a="";if(o==Ce.FencedCode){let c=i.node.getChild(Ce.CodeInfo);c&&(a=s.read(c.from,c.to))}let l=e(a);if(l)return{parser:l,overlay:c=>c.type.id==Ce.CodeText}}else if(t&&(o==Ce.HTMLBlock||o==Ce.HTMLTag))return{parser:t,overlay:tU(i.node,i.from,i.to)};return null})}}const rU={resolve:"Strikethrough",mark:"StrikethroughMark"},iU={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":re.strikethrough}},{name:"StrikethroughMark",style:re.processingInstruction}],parseInline:[{name:"Strikethrough",parse(n,e,t){return e!=126||n.char(t+1)!=126?-1:n.addDelimiter(rU,t,t+2,!0,!0)},after:"Emphasis"}]};function Wl(n,e,t=0,r,i=0){let s=0,o=!0,a=-1,l=-1,c=!1,u=()=>{r.push(n.elt("TableCell",i+a,i+l,n.parser.parseInline(e.slice(a,l),i+a)))};for(let h=t;h<e.length;h++){let f=e.charCodeAt(h);f==124&&!c?((!o||a>-1)&&s++,o=!1,r&&(a>-1&&u(),r.push(n.elt("TableDelimiter",h+i,h+i+1))),a=l=-1):(c||f!=32&&f!=9)&&(a<0&&(a=h),l=h+1),c=!c&&f==92}return a>-1&&(s++,r&&u()),s}function u_(n,e){for(let t=e;t<n.length;t++){let r=n.charCodeAt(t);if(r==124)return!0;r==92&&t++}return!1}const h2=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class h_{constructor(){this.rows=null}nextLine(e,t,r){if(this.rows==null){this.rows=!1;let i;if((t.next==45||t.next==58||t.next==124)&&h2.test(i=t.text.slice(t.pos))){let s=[];Wl(e,r.content,0,s,r.start)==Wl(e,i,t.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,s),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let i=[];Wl(e,t.text,t.pos,i,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,i))}return!1}finish(e,t){return this.rows?(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0):!1}}const sU={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":re.heading}},"TableRow",{name:"TableCell",style:re.content},{name:"TableDelimiter",style:re.processingInstruction}],parseBlock:[{name:"Table",leaf(n,e){return u_(e.content,0)?new h_:null},endLeaf(n,e,t){if(t.parsers.some(i=>i instanceof h_)||!u_(e.text,e.basePos))return!1;let r=n.scanLine(n.absoluteLineEnd+1).text;return h2.test(r)&&Wl(n,e.text,e.basePos)==Wl(n,r,e.basePos)},before:"SetextHeading"}]};class oU{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const aU={defineNodes:[{name:"Task",block:!0,style:re.list},{name:"TaskMarker",style:re.atom}],parseBlock:[{name:"TaskList",leaf(n,e){return/^\[[ xX]\]/.test(e.content)&&n.parentType().name=="ListItem"?new oU:null},after:"SetextHeading"}]},lU=[sU,aU,iU];function f2(n,e,t){return(r,i,s)=>{if(i!=n||r.char(s+1)==n)return-1;let o=[r.elt(t,s,s+1)];for(let a=s+1;a<r.end;a++){let l=r.char(a);if(l==n)return r.addElement(r.elt(e,s,a+1,o.concat(r.elt(t,a,a+1))));if(l==92&&o.push(r.elt("Escape",a,a+++2)),Tr(l))break}return-1}}const cU={defineNodes:[{name:"Superscript",style:re.special(re.content)},{name:"SuperscriptMark",style:re.processingInstruction}],parseInline:[{name:"Superscript",parse:f2(94,"Superscript","SuperscriptMark")}]},uU={defineNodes:[{name:"Subscript",style:re.special(re.content)},{name:"SubscriptMark",style:re.processingInstruction}],parseInline:[{name:"Subscript",parse:f2(126,"Subscript","SubscriptMark")}]},hU={defineNodes:[{name:"Emoji",style:re.character}],parseInline:[{name:"Emoji",parse(n,e,t){let r;return e!=58||!(r=/^[a-zA-Z_0-9]+:/.exec(n.slice(t+1,n.end)))?-1:n.addElement(n.elt("Emoji",t,t+1+r[0].length))}}]};class ff{constructor(e,t,r,i,s,o,a,l,c,u=0,h){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=h}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new ff(e,[],t,r,r,0,[],0,i?new f_(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,r=e&65535,{parser:i}=this.p,s=i.dynamicPrecedence(r);if(s&&(this.score+=s),t==0){this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let o=this.stack.length-(t-1)*3-(e&262144?6:0),a=this.stack[o-2],l=this.stack[o-1],c=this.bufferBase+this.buffer.length-l;if(r<i.minRepeatTerm||e&131072){let u=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,a,u,c+4,!0)}if(e&262144)this.state=this.stack[o];else{let u=this.stack[o-3];this.state=i.getGoto(u,r,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(r,a)}storeNode(e,t,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==r)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,t,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,t,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,r){e&65536?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new ff(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new fU(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((r&65536)==0)return!0;if(r==0)return!1;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let i=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[s],o);if(this.stack.length<120)for(let s=0;i.length<4<<1&&s<t.length;s+=2){let o=t[s+1];i.some((a,l)=>l&1&&a==o)||i.push(t[s],o)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.score-=200,r.push(o)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let r=e>>19,i=e&65535,s=this.stack.length-r*3;if(s<0||t.getGoto(this.stack[s],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new f_(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class f_{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var d_;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(d_||(d_={}));class fU{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class df{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new df(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new df(this.stack,this.pos,this.index)}}class _h{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const p_=new _h;class dU{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=p_,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=p_,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class xh{constructor(e,t){this.data=e,this.id=t}token(e,t){pU(this.data,e,t,this.id)}}xh.prototype.contextual=xh.prototype.fallback=xh.prototype.extend=!1;class ui{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function pU(n,e,t,r){let i=0,s=1<<r,{parser:o}=t.p,{dialect:a}=o;e:for(;(s&n[i])!=0;){let l=n[i+1];for(let c=i+3;c<l;c+=2)if((n[c+1]&s)>0){let u=n[c];if(a.allows(u)&&(e.token.value==-1||e.token.value==u||o.overrides(u,e.token.value))){e.acceptToken(u);break}}for(let c=e.next,u=0,h=n[i+2];u<h;){let f=u+h>>1,p=l+f+(f<<1),d=n[p],m=n[p+1];if(c<d)h=f;else if(c>=m)u=f+1;else{i=n[p+2],e.advance();continue e}}break}}function Zu(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let o=n.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}t?t[i++]=s:t=new e(s)}return t}const Ir=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let Tm=null;var m_;(function(n){n[n.Margin=25]="Margin"})(m_||(m_={}));function g_(n,e,t){let r=n.cursor(Ft.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class mU{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?g_(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?g_(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof wt){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(tt.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class gU{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new _h)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<s.length;c++){if((1<<c&o)==0)continue;let u=s[c],h=this.tokens[c];if(!(r&&!u.fallback)&&((u.contextual||h.start!=e.pos||h.mask!=o||h.context!=a)&&(this.updateCachedToken(h,u,e),h.mask=o,h.context=a),h.lookAhead>h.end+25&&(l=Math.max(h.lookAhead,l)),h.value!=0)){let f=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!u.extend&&(r=h,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new _h,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new _h,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){if(t.token(this.stream.reset(r.pos,e),r),e.value>-1){let{parser:i}=r.p;for(let s=0;s<i.specialized.length;s++)if(i.specialized[s]==e.value){let o=i.specializers[s](this.stream.read(e.start,e.end),r);if(o>=0&&r.p.parser.dialect.allows(o>>1)){(o&1)==0?e.value=o>>1:e.extended=o>>1;break}}}else e.value=0,e.end=Math.min(r.p.stream.end,r.pos+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let c=o.stateSlot(s,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=gi(a,c+2);else{i==0&&a[c+1]==2&&(i=this.putAction(gi(a,c+2),t,r,i));break}a[c]==t&&(i=this.putAction(gi(a,c+1),t,r,i))}return i}}var y_;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo"})(y_||(y_={}));class yU{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new dU(t,i),this.tokens=new gU(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[ff.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new mU(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,s;for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=i&&bU(i);if(o)return this.stackToTree(o);if(this.parser.strict)throw Ir&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let c=r[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,o=Ir?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let h=this.fragments.nodeAt(i);h;){let f=this.parser.nodeSet.types[h.type.id]==h.type?s.getGoto(e.state,h.type.id):-1;if(f>-1&&h.length&&(!c||(h.prop(tt.contextHash)||0)==u))return e.useNode(h,f),Ir&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(h.type.id)})`),!0;if(!(h instanceof wt)||h.children.length==0||h.positions[0]>0)break;let p=h.children[0];if(p instanceof wt&&h.positions[0]==0)h=p;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),Ir&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],h=l[c++],f=l[c++],p=c==l.length||!r,d=p?e:e.split();if(d.apply(u,h,f),Ir&&console.log(o+this.stackID(d)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(h)} @ ${i}${d==e?"":", split"})`),p)return!0;d.pos>i?t.push(d):r.push(d)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return O_(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o<<1],c=t[(o<<1)+1],u=Ir?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),Ir&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let h=a.split(),f=u;for(let p=0;h.forceReduce()&&p<10&&(Ir&&console.log(f+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,r));p++)Ir&&(f=this.stackID(h)+" -> ");for(let p of a.recoverByInsert(l))Ir&&console.log(u+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,r);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),Ir&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),O_(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),wt.build({buffer:df.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Tm||(Tm=new WeakMap)).get(e);return t||Tm.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function O_(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class OU{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const Em=n=>n;class d2{constructor(e){this.start=e.start,this.shift=e.shift||Em,this.reduce=e.reduce||Em,this.reuse=e.reuse||Em,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class ga extends oO{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function s(a,l,c){i[a].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=tt[l]);for(let c=1;c<a.length;){let u=a[c++];if(u>=0)s(u,l,a[c++]);else{let h=a[c+-u];for(let f=-u;f>0;f--)s(a[c++],l,h);c++}}}this.nodeSet=new Hc(t.map((a,l)=>sn.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=bE;let o=Zu(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let a=0;a<e.specialized.length;a++)this.specialized[a]=e.specialized[a].term,this.specializers[a]=e.specialized[a].get;this.states=Zu(e.states,Uint32Array),this.data=Zu(e.stateData),this.goto=Zu(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new xh(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new yU(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&r)return l;for(let c=s+(o>>1);s<c;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=gi(r,s+2)];else{if(r[s+1]==2)return gi(r,s+2);break}if(o==t||o==0)return gi(r,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=gi(this.data,r+2);else return!1;if(t==gi(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=gi(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((s,o)=>o&1&&s==i)||t.push(this.data[r],i)}}return t}overrides(e,t){let r=b_(this.data,this.tokenPrecTable,t);return r<0||b_(this.data,this.tokenPrecTable,e)<r}configure(e){let t=Object.assign(Object.create(ga.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let o=this.dialects[t[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new OU(e,r,i)}static deserialize(e){return new ga(e)}}function gi(n,e){return n[e]|n[e+1]<<16}function b_(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function bU(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}const vU=53,wU=1,AU=54,_U=2,xU=55,kU=3,pf=4,p2=5,m2=6,g2=7,y2=8,SU=9,TU=10,EU=11,Cm=56,CU=12,v_=57,IU=18,RU=27,QU=30,PU=33,DU=35,LU=0,NU={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},BU={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},w_={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function MU(n){return n==45||n==46||n==58||n>=65&&n<=90||n==95||n>=97&&n<=122||n>=161}function O2(n){return n==9||n==10||n==13||n==32}let A_=null,__=null,x_=0;function Dy(n,e){let t=n.pos+e;if(x_==t&&__==n)return A_;let r=n.peek(e);for(;O2(r);)r=n.peek(++e);let i="";for(;MU(r);)i+=String.fromCharCode(r),r=n.peek(++e);return __=n,x_=t,A_=i?i.toLowerCase():r==$U||r==FU?void 0:null}const b2=60,v2=62,w2=47,$U=63,FU=33,WU=45;function k_(n,e){this.name=n,this.parent=e,this.hash=e?e.hash:0;for(let t=0;t<n.length;t++)this.hash+=(this.hash<<4)+n.charCodeAt(t)+(n.charCodeAt(t)<<8)}const UU=[pf,y2,p2,m2,g2],zU=new d2({start:null,shift(n,e,t,r){return UU.indexOf(e)>-1?new k_(Dy(r,1)||"",n):n},reduce(n,e){return e==IU&&n?n.parent:n},reuse(n,e,t,r){let i=e.type.id;return i==pf||i==DU?new k_(Dy(r,1)||"",n):n},hash(n){return n?n.hash:0},strict:!1}),jU=new ui((n,e)=>{if(n.next!=b2){n.next<0&&e.context&&n.acceptToken(Cm);return}n.advance();let t=n.next==w2;t&&n.advance();let r=Dy(n,0);if(r===void 0)return;if(!r)return n.acceptToken(t?CU:pf);let i=e.context?e.context.name:null;if(t){if(r==i)return n.acceptToken(SU);if(i&&BU[i])return n.acceptToken(Cm,-2);if(e.dialectEnabled(LU))return n.acceptToken(TU);for(let s=e.context;s;s=s.parent)if(s.name==r)return;n.acceptToken(EU)}else{if(r=="script")return n.acceptToken(p2);if(r=="style")return n.acceptToken(m2);if(r=="textarea")return n.acceptToken(g2);if(NU.hasOwnProperty(r))return n.acceptToken(y2);i&&w_[i]&&w_[i][r]?n.acceptToken(Cm,-1):n.acceptToken(pf)}},{contextual:!0}),HU=new ui(n=>{for(let e=0,t=0;;t++){if(n.next<0){t&&n.acceptToken(v_);break}if(n.next==WU)e++;else if(n.next==v2&&e>=2){t>3&&n.acceptToken(v_,-2);break}else e=0;n.advance()}});function QO(n,e,t){let r=2+n.length;return new ui(i=>{for(let s=0,o=0,a=0;;a++){if(i.next<0){a&&i.acceptToken(e);break}if(s==0&&i.next==b2||s==1&&i.next==w2||s>=2&&s<r&&i.next==n.charCodeAt(s-2))s++,o++;else if((s==2||s==r)&&O2(i.next))o++;else if(s==r&&i.next==v2){a>o?i.acceptToken(e,-o):i.acceptToken(t,-(o-2));break}else if((i.next==10||i.next==13)&&a){i.acceptToken(e,1);break}else s=o=0;i.advance()}})}const GU=QO("script",vU,wU),VU=QO("style",AU,_U),XU=QO("textarea",xU,kU),YU=Da({"Text RawText":re.content,"StartTag StartCloseTag SelfCloserEndTag EndTag SelfCloseEndTag":re.angleBracket,TagName:re.tagName,"MismatchedCloseTag/TagName":[re.tagName,re.invalid],AttributeName:re.attributeName,"AttributeValue UnquotedAttributeValue":re.attributeValue,Is:re.definitionOperator,"EntityReference CharacterReference":re.character,Comment:re.blockComment,ProcessingInst:re.processingInstruction,DoctypeDecl:re.documentMeta}),ZU=ga.deserialize({version:14,states:",xOVOxOOO!WQ!bO'#CoO!]Q!bO'#CyO!bQ!bO'#C|O!gQ!bO'#DPO!lQ!bO'#DRO!qOXO'#CnO!|OYO'#CnO#XO[O'#CnO$eOxO'#CnOOOW'#Cn'#CnO$lO!rO'#DSO$tQ!bO'#DUO$yQ!bO'#DVOOOW'#Dj'#DjOOOW'#DX'#DXQVOxOOO%OQ#tO,59ZO%WQ#tO,59eO%`Q#tO,59hO%hQ#tO,59kO%pQ#tO,59mOOOX'#D]'#D]O%xOXO'#CwO&TOXO,59YOOOY'#D^'#D^O&]OYO'#CzO&hOYO,59YOOO['#D_'#D_O&pO[O'#C}O&{O[O,59YOOOW'#D`'#D`O'TOxO,59YO'[Q!bO'#DQOOOW,59Y,59YOOO`'#Da'#DaO'aO!rO,59nOOOW,59n,59nO'iQ!bO,59pO'nQ!bO,59qOOOW-E7V-E7VO'sQ#tO'#CqOOQO'#DY'#DYO(OQ#tO1G.uOOOX1G.u1G.uO(WQ#tO1G/POOOY1G/P1G/PO(`Q#tO1G/SOOO[1G/S1G/SO(hQ#tO1G/VOOOW1G/V1G/VO(pQ#tO1G/XOOOW1G/X1G/XOOOX-E7Z-E7ZO(xQ!bO'#CxOOOW1G.t1G.tOOOY-E7[-E7[O(}Q!bO'#C{OOO[-E7]-E7]O)SQ!bO'#DOOOOW-E7^-E7^O)XQ!bO,59lOOO`-E7_-E7_OOOW1G/Y1G/YOOOW1G/[1G/[OOOW1G/]1G/]O)^Q&jO,59]OOQO-E7W-E7WOOOX7+$a7+$aOOOY7+$k7+$kOOO[7+$n7+$nOOOW7+$q7+$qOOOW7+$s7+$sO)iQ!bO,59dO)nQ!bO,59gO)sQ!bO,59jOOOW1G/W1G/WO)xO,UO'#CtO*WO7[O'#CtOOQO1G.w1G.wOOOW1G/O1G/OOOOW1G/R1G/ROOOW1G/U1G/UOOOO'#DZ'#DZO*fO,UO,59`OOQO,59`,59`OOOO'#D['#D[O*tO7[O,59`OOOO-E7X-E7XOOQO1G.z1G.zOOOO-E7Y-E7Y",stateData:"+[~O!]OS~OSSOTPOUQOVROWTOY]OZ[O[^O^^O_^O`^Oa^Ow^Oz_O!cZO~OdaO~OdbO~OdcO~OddO~OdeO~O!VfOPkP!YkP~O!WiOQnP!YnP~O!XlORqP!YqP~OSSOTPOUQOVROWTOXqOY]OZ[O[^O^^O_^O`^Oa^Ow^O!cZO~O!YrO~P#dO!ZsO!duO~OdvO~OdwO~OfyOj|O~OfyOj!OO~OfyOj!QO~OfyOj!SO~OfyOj!UO~O!VfOPkX!YkX~OP!WO!Y!XO~O!WiOQnX!YnX~OQ!ZO!Y!XO~O!XlORqX!YqX~OR!]O!Y!XO~O!Y!XO~P#dOd!_O~O!ZsO!d!aO~Oj!bO~Oj!cO~Og!dOfeXjeX~OfyOj!fO~OfyOj!gO~OfyOj!hO~OfyOj!iO~OfyOj!jO~Od!kO~Od!lO~Od!mO~Oj!nO~Oi!qO!_!oO!a!pO~Oj!rO~Oj!sO~Oj!tO~O_!uO`!uO!_!wO!`!uO~O_!xO`!xO!a!wO!b!xO~O_!uO`!uO!_!{O!`!uO~O_!xO`!xO!a!{O!b!xO~O`_a!cwz!c~",goto:"%o!_PPPPPPPPPPPPPPPPPP!`!fP!lPP!xPP!{#O#R#X#[#_#e#h#k#q#w!`P!`!`P#}$T$k$q$w$}%T%Z%aPPPPPPPP%gX^OX`pXUOX`pezabcde{}!P!R!TR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!TeZ!e{}!P!R!TQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"\u26A0 StartCloseTag StartCloseTag StartCloseTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue EndTag ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:66,context:zU,nodeProps:[["closedBy",-11,1,2,3,4,5,6,7,8,9,10,11,"EndTag",-4,19,29,32,35,"CloseTag"],["group",-9,12,15,16,17,18,38,39,40,41,"Entity",14,"Entity TextContent",-3,27,30,33,"TextContent Entity"],["openedBy",26,"StartTag StartCloseTag",-4,28,31,34,36,"OpenTag"]],propSources:[YU],skippedNodes:[0],repeatNodeCount:9,tokenData:"!#b!aR!WOX$kXY)sYZ)sZ]$k]^)s^p$kpq)sqr$krs*zsv$kvw+dwx2yx}$k}!O3f!O!P$k!P!Q7_!Q![$k![!]8u!]!^$k!^!_>b!_!`!!p!`!a8T!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U$k4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!Z$vc^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!R&[V^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&Rq&xT^P!bpOv&qwx'Xx!^&q!^!_'g!_~&qP'^R^POv'Xw!^'X!_~'Xp'lQ!bpOv'gx~'ga'yU^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r`(bR!``Or(]sv(]w~(]!Q(rT!``!bpOr(krs'gsv(kwx(]x~(kW)WXiWOX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!a*O^^P!``!bp!]^OX&RXY)sYZ)sZ]&R]^)s^p&Rpq)sqr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!Z+TT!_h^P!bpOv&qwx'Xx!^&q!^!_'g!_~&q!Z+kbiWaPOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst/]tw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^)R!^!a.Q!a$f,s$f$g.Q$g~,s!Z,xbiWOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst)Rtw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^.i!^!a.Q!a$f,s$f$g.Q$g~,s!R.TTOp.Qqs.Qt!].Q!]!^.d!^~.Q!R.iO_!R!Z.pXiW_!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z/baiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^)R!^!a1q!a$f0g$f$g1q$g~0g!Z0laiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^2V!^!a1q!a$f0g$f$g1q$g~0g!R1tSOp1qq!]1q!]!^2Q!^~1q!R2VO`!R!Z2^XiW`!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z3SU!ax^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r!]3qe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O5S!O!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!]5_d^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!`&R!`!a6m!a$f$k$f$g&R$g~$k!T6xV^P!``!bp!dQOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!X7hX^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_!`&R!`!a8T!a~&R!X8`VjU^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!a9U!YfSdQ^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O8u!O!P8u!P!Q&R!Q![8u![!]8u!]!^$k!^!_(k!_!a&R!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g$}$k$}%O8u%O%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U8u4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Je$k$Je$Jg8u$Jg$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!a=Pe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g;=`$k;=`<%l8u<%l~$k!R>iW!``!bpOq(kqr?Rrs'gsv(kwx(]x!a(k!a!bKj!b~(k!R?YZ!``!bpOr(krs'gsv(kwx(]x}(k}!O?{!O!f(k!f!gAR!g#W(k#W#XGz#X~(k!R@SV!``!bpOr(krs'gsv(kwx(]x}(k}!O@i!O~(k!R@rT!``!bp!cPOr(krs'gsv(kwx(]x~(k!RAYV!``!bpOr(krs'gsv(kwx(]x!q(k!q!rAo!r~(k!RAvV!``!bpOr(krs'gsv(kwx(]x!e(k!e!fB]!f~(k!RBdV!``!bpOr(krs'gsv(kwx(]x!v(k!v!wBy!w~(k!RCQV!``!bpOr(krs'gsv(kwx(]x!{(k!{!|Cg!|~(k!RCnV!``!bpOr(krs'gsv(kwx(]x!r(k!r!sDT!s~(k!RD[V!``!bpOr(krs'gsv(kwx(]x!g(k!g!hDq!h~(k!RDxW!``!bpOrDqrsEbsvDqvwEvwxFfx!`Dq!`!aGb!a~DqqEgT!bpOvEbvxEvx!`Eb!`!aFX!a~EbPEyRO!`Ev!`!aFS!a~EvPFXOzPqF`Q!bpzPOv'gx~'gaFkV!``OrFfrsEvsvFfvwEvw!`Ff!`!aGQ!a~FfaGXR!``zPOr(]sv(]w~(]!RGkT!``!bpzPOr(krs'gsv(kwx(]x~(k!RHRV!``!bpOr(krs'gsv(kwx(]x#c(k#c#dHh#d~(k!RHoV!``!bpOr(krs'gsv(kwx(]x#V(k#V#WIU#W~(k!RI]V!``!bpOr(krs'gsv(kwx(]x#h(k#h#iIr#i~(k!RIyV!``!bpOr(krs'gsv(kwx(]x#m(k#m#nJ`#n~(k!RJgV!``!bpOr(krs'gsv(kwx(]x#d(k#d#eJ|#e~(k!RKTV!``!bpOr(krs'gsv(kwx(]x#X(k#X#YDq#Y~(k!RKqW!``!bpOrKjrsLZsvKjvwLowxNPx!aKj!a!b! g!b~KjqL`T!bpOvLZvxLox!aLZ!a!bM^!b~LZPLrRO!aLo!a!bL{!b~LoPMORO!`Lo!`!aMX!a~LoPM^OwPqMcT!bpOvLZvxLox!`LZ!`!aMr!a~LZqMyQ!bpwPOv'gx~'gaNUV!``OrNPrsLosvNPvwLow!aNP!a!bNk!b~NPaNpV!``OrNPrsLosvNPvwLow!`NP!`!a! V!a~NPa! ^R!``wPOr(]sv(]w~(]!R! nW!``!bpOrKjrsLZsvKjvwLowxNPx!`Kj!`!a!!W!a~Kj!R!!aT!``!bpwPOr(krs'gsv(kwx(]x~(k!V!!{VgS^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R",tokenizers:[GU,VU,XU,jU,HU,0,1,2,3,4,5],topRules:{Document:[0,13]},dialects:{noMatch:0},tokenPrec:464});function qU(n,e){let t=Object.create(null);for(let r of n.firstChild.getChildren("Attribute")){let i=r.getChild("AttributeName"),s=r.getChild("AttributeValue")||r.getChild("UnquotedAttributeValue");i&&(t[e.read(i.from,i.to)]=s?s.name=="AttributeValue"?e.read(s.from+1,s.to-1):e.read(s.from,s.to):"")}return t}function Im(n,e,t){let r;for(let i of t)if(!i.attrs||i.attrs(r||(r=qU(n.node.parent,e))))return{parser:i.parser};return null}function KU(n){let e=[],t=[],r=[];for(let i of n){let s=i.tag=="script"?e:i.tag=="style"?t:i.tag=="textarea"?r:null;if(!s)throw new RangeError("Only script, style, and textarea tags can host nested parsers");s.push(i)}return AE((i,s)=>{let o=i.type.id;return o==RU?Im(i,s,e):o==QU?Im(i,s,t):o==PU?Im(i,s,r):null})}const JU=93,S_=1,e6=94,t6=95,T_=2,A2=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],n6=58,r6=40,_2=95,i6=91,kh=45,s6=46,o6=35,a6=37;function mf(n){return n>=65&&n<=90||n>=97&&n<=122||n>=161}function l6(n){return n>=48&&n<=57}const c6=new ui((n,e)=>{for(let t=!1,r=0,i=0;;i++){let{next:s}=n;if(mf(s)||s==kh||s==_2||t&&l6(s))!t&&(s!=kh||i>0)&&(t=!0),r===i&&s==kh&&r++,n.advance();else{t&&n.acceptToken(s==r6?e6:r==2&&e.canShift(T_)?T_:t6);break}}}),u6=new ui(n=>{if(A2.includes(n.peek(-1))){let{next:e}=n;(mf(e)||e==_2||e==o6||e==s6||e==i6||e==n6||e==kh)&&n.acceptToken(JU)}}),h6=new ui(n=>{if(!A2.includes(n.peek(-1))){let{next:e}=n;if(e==a6&&(n.advance(),n.acceptToken(S_)),mf(e)){do n.advance();while(mf(n.next));n.acceptToken(S_)}}}),f6=Da({"import charset namespace keyframes":re.definitionKeyword,"media supports":re.controlKeyword,"from to selector":re.keyword,NamespaceName:re.namespace,KeyframeName:re.labelName,TagName:re.tagName,ClassName:re.className,PseudoClassName:re.constant(re.className),IdName:re.labelName,"FeatureName PropertyName":re.propertyName,AttributeName:re.attributeName,NumberLiteral:re.number,KeywordQuery:re.keyword,UnaryQueryOp:re.operatorKeyword,"CallTag ValueName":re.atom,VariableName:re.variableName,Callee:re.operatorKeyword,Unit:re.unit,"UniversalSelector NestingSelector":re.definitionOperator,AtKeyword:re.keyword,MatchOp:re.compareOperator,"ChildOp SiblingOp, LogicOp":re.logicOperator,BinOp:re.arithmeticOperator,Important:re.modifier,Comment:re.blockComment,ParenthesizedContent:re.special(re.name),ColorLiteral:re.color,StringLiteral:re.string,":":re.punctuation,"PseudoOp #":re.derefOperator,"; ,":re.separator,"( )":re.paren,"[ ]":re.squareBracket,"{ }":re.brace}),d6={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,dir:32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},p6={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},m6={__proto__:null,not:128,only:128,from:158,to:160},g6=ga.deserialize({version:14,states:"7WOYQ[OOOOQP'#Cd'#CdOOQP'#Cc'#CcO!ZQ[O'#CfO!}QXO'#CaO#UQ[O'#ChO#aQ[O'#DPO#fQ[O'#DTOOQP'#Ec'#EcO#kQdO'#DeO$VQ[O'#DrO#kQdO'#DtO$hQ[O'#DvO$sQ[O'#DyO$xQ[O'#EPO%WQ[O'#EROOQS'#Eb'#EbOOQS'#ES'#ESQYQ[OOOOQP'#Cg'#CgOOQP,59Q,59QO!ZQ[O,59QO%_Q[O'#EVO%yQWO,58{O&RQ[O,59SO#aQ[O,59kO#fQ[O,59oO%_Q[O,59sO%_Q[O,59uO%_Q[O,59vO'bQ[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO'iQWO,59SO'nQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO'sQ`O,59oOOQS'#Cp'#CpO#kQdO'#CqO'{QvO'#CsO)VQtO,5:POOQO'#Cx'#CxO'iQWO'#CwO)kQWO'#CyOOQS'#Ef'#EfOOQO'#Dh'#DhO)pQ[O'#DoO*OQWO'#EiO$xQ[O'#DmO*^QWO'#DpOOQO'#Ej'#EjO%|QWO,5:^O*cQpO,5:`OOQS'#Dx'#DxO*kQWO,5:bO*pQ[O,5:bOOQO'#D{'#D{O*xQWO,5:eO*}QWO,5:kO+VQWO,5:mOOQS-E8Q-E8QOOQP1G.l1G.lO+yQXO,5:qOOQO-E8T-E8TOOQS1G.g1G.gOOQP1G.n1G.nO'iQWO1G.nO'nQWO1G.nOOQP1G/V1G/VO,WQ`O1G/ZO,qQXO1G/_O-XQXO1G/aO-oQXO1G/bO.VQXO'#CdO.zQWO'#DaOOQS,59z,59zO/PQWO,59zO/XQ[O,59zO/`QdO'#CoO/gQ[O'#DOOOQP1G/Z1G/ZO#kQdO1G/ZO/nQpO,59]OOQS,59_,59_O#kQdO,59aO/vQWO1G/kOOQS,59c,59cO/{Q!bO,59eO0TQWO'#DhO0`QWO,5:TO0eQWO,5:ZO$xQ[O,5:VO$xQ[O'#EYO0mQWO,5;TO0xQWO,5:XO%_Q[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O1ZQWO1G/|O1`QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XOOQP7+$Y7+$YOOQP7+$u7+$uO#kQdO7+$uO#kQdO,59{O1nQ[O'#EXO1xQWO1G/fOOQS1G/f1G/fO1xQWO1G/fO2QQtO'#ETO2uQdO'#EeO3PQWO,59ZO3UQXO'#EhO3]QWO,59jO3bQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO3jQWO1G/PO#kQdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO3oQWO,5:tOOQO-E8W-E8WO3}QXO1G/vOOQS7+%h7+%hO4UQYO'#CsO%|QWO'#EZO4^QdO,5:hOOQS,5:h,5:hO4lQpO<<HaO4tQtO1G/gOOQO,5:s,5:sO5XQ[O,5:sOOQO-E8V-E8VOOQS7+%Q7+%QO5cQWO7+%QOOQS-E8R-E8RO#kQdO'#EUO5kQWO,5;POOQT1G.u1G.uO5sQWO,5;SOOQP1G/U1G/UOOQP<<Ha<<HaOOQS7+$k7+$kO5{QdO7+%ZOOQO7+%b7+%bOOQS,5:u,5:uOOQS-E8X-E8XOOQS1G0S1G0SOOQPAN={AN={O6SQtO'#EWO#kQdO'#EWO6}QdO7+%ROOQO7+%R7+%ROOQO1G0_1G0_OOQS<<Hl<<HlO7_QdO,5:pOOQO-E8S-E8SOOQO<<Hu<<HuO7iQtO,5:rOOQS-E8U-E8UOOQO<<Hm<<Hm",stateData:"8j~O#TOSROS~OUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#RPO#WRO~O#RcO~O]hO^hOpfOtiOxjO|kO!PmO#PlO#WeO~O!RnO~P!`O`sO#QqO#RpO~O#RuO~O#RwO~OQ!QObzOf!QOh!QOn!PO#Q}O#RyO#Z{O~Ob!SO!b!UO!e!VO#R!RO!R#]P~Oh![On!PO#R!ZO~O#R!^O~Ob!SO!b!UO!e!VO#R!RO~O!W#]P~P$VOUWOXWO]TO^TOtUOxVO#RPO#WRO~OpfO!RnO~O`!hO#QqO#RpO~OQ!pOUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#R!oO#WRO~O!Q!qO~P&^Ob!tO~Ob!uO~Ov!vOz!wO~OP!yObgXjgX!WgX!bgX!egX#RgXagXQgXfgXhgXngXpgX#QgX#ZgXvgX!QgX!VgX~Ob!SOj!zO!b!UO!e!VO#R!RO!W#]P~Ob!}O~Ob!SO!b!UO!e!VO#R#OO~Op#SO!`#RO!R#]X!W#]X~Ob#VO~Oj!zO!W#XO~O!W#YO~Oh#ZOn!PO~O!R#[O~O!RnO!`#RO~O!RnO!W#_O~O]hO^hOtiOxjO|kO!PmO#PlO#WeO~Op!ya!R!yaa!ya~P+_Ov#aOz#bO~O]hO^hOtiOxjO#WeO~Op{i|{i!P{i!R{i#P{ia{i~P,`Op}i|}i!P}i!R}i#P}ia}i~P,`Op!Oi|!Oi!P!Oi!R!Oi#P!Oia!Oi~P,`O]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#PWX#WWX~O]#cO~O!Q#fO!W#dO~O!Q#fO~P&^Oa#XP~P#kOa#[P~P%_Oa#nOj!zO~O!W#pO~Oh#qOo#qO~O]!^Xa![X!`![X~O]#rO~Oa#sO!`#RO~Op#SO!R#]a!W#]a~O!`#ROp!aa!R!aa!W!aaa!aa~O!W#xO~O!Q#|O!q#zO!r#zO#Z#yO~O!Q!{X!W!{X~P&^O!Q$SO!W#dO~Oj!zOQ!wXa!wXb!wXf!wXh!wXn!wXp!wX#Q!wX#R!wX#Z!wX~Op$VOa#XX~P#kOa$XO~Oa#[X~P!`Oa$ZO~Oj!zOv$[O~Oa$]O~O!`#ROp!|a!R!|a!W!|a~Oa$_O~P+_OP!yO!RgX~O!Q$bO!q#zO!r#zO#Z#yO~Oj!zOv$cO~Oj!zOp$eO!V$gO!Q!Ti!W!Ti~P#kO!Q!{a!W!{a~P&^O!Q$iO!W#dO~Op$VOa#Xa~OpfOa#[a~Oa$lO~P#kOj!zOQ!zXb!zXf!zXh!zXn!zXp!zX!Q!zX!V!zX!W!zX#Q!zX#R!zX#Z!zX~Op$eO!V$oO!Q!Tq!W!Tq~P#kOa!xap!xa~P#kOj!zOQ!zab!zaf!zah!zan!zap!za!Q!za!V!za!W!za#Q!za#R!za#Z!za~Oo#Zj!Pj~",goto:",O#_PPPPP#`P#h#vP#h$U#hPP$[PPP$b$k$kP$}P$kP$k%e%wPPP&a&g#hP&mP#hP&sP#hP#h#hPPP&y']'iPP#`PP'o'o'y'oP'oP'o'oP#`P#`P#`P'|#`P(P(SPP#`P#`(V(e(s(y)T)Z)e)kPPPPPP)q)yP*e*hP+^+a+j]`Obn!s#d$QiWObfklmn!s!u#V#d$QiQObfklmn!s!u#V#d$QQdRR!ceQrTR!ghQ!gsQ!|!OR#`!hq!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jT#z#[#{q!OXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jQ![[R#Z!]QtTR!ihQ!gtR#`!iQvUR!jiQxVR!kjQoSQ!fgQ#W!XQ#^!`Q#_!aR$`#zQ!rnQ#g!sQ$P#dR$h$QX!pn!s#d$Qa!WY^_|!S!U#R#SR#P!SR!][R!_]R#]!_QbOU!bb!s$QQ!snR$Q#dQ#i!tU$U#i$^$jQ$^#rR$j$VQ$W#iR$k$WQgSS!eg$YR$Y#kQ$f$OR$n$fQ#e!rS$R#e$TR$T#gQ#T!TR#v#TQ#{#[R$a#{]aObn!s#d$Q[SObn!s#d$QQ!dfQ!lkQ!mlQ!nmQ#k!uR#w#VR#j!tQ|XQ!YZQ!xz[#h!t#i#r$V$^$jQ#m!wQ#o!zQ#}#bQ$O#cS$d$O$fR$m$eR#l!uQ!XYQ!a_R!{|U!TY_|Q!`^Q#Q!SQ#U!UQ#t#RR#u#S",nodeNames:"\u26A0 Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList from to SupportsStatement supports AtRule",maxTerm:106,nodeProps:[["openedBy",17,"(",48,"{"],["closedBy",18,")",49,"}"]],propSources:[f6],skippedNodes:[0,3],repeatNodeCount:8,tokenData:"Ay~R![OX$wX^%]^p$wpq%]qr(crs+}st,otu2Uuv$wvw2rwx2}xy3jyz3uz{3z{|4_|}8U}!O8a!O!P8x!P!Q9Z!Q![;e![!]<Y!]!^<x!^!_$w!_!`=T!`!a=`!a!b$w!b!c>O!c!}$w!}#O?[#O#P$w#P#Q?g#Q#R2U#R#T$w#T#U?r#U#c$w#c#d@q#d#o$w#o#pAQ#p#q2U#q#rA]#r#sAh#s#y$w#y#z%]#z$f$w$f$g%]$g#BY$w#BY#BZ%]#BZ$IS$w$IS$I_%]$I_$I|$w$I|$JO%]$JO$JT$w$JT$JU%]$JU$KV$w$KV$KW%]$KW&FU$w&FU&FV%]&FV~$wW$zQOy%Qz~%QW%VQoWOy%Qz~%Q~%bf#T~OX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q~&}f#T~oWOX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q^(fSOy%Qz#]%Q#]#^(r#^~%Q^(wSoWOy%Qz#a%Q#a#b)T#b~%Q^)YSoWOy%Qz#d%Q#d#e)f#e~%Q^)kSoWOy%Qz#c%Q#c#d)w#d~%Q^)|SoWOy%Qz#f%Q#f#g*Y#g~%Q^*_SoWOy%Qz#h%Q#h#i*k#i~%Q^*pSoWOy%Qz#T%Q#T#U*|#U~%Q^+RSoWOy%Qz#b%Q#b#c+_#c~%Q^+dSoWOy%Qz#h%Q#h#i+p#i~%Q^+wQ!VUoWOy%Qz~%Q~,QUOY+}Zr+}rs,ds#O+}#O#P,i#P~+}~,iOh~~,lPO~+}_,tWtPOy%Qz!Q%Q!Q![-^![!c%Q!c!i-^!i#T%Q#T#Z-^#Z~%Q^-cWoWOy%Qz!Q%Q!Q![-{![!c%Q!c!i-{!i#T%Q#T#Z-{#Z~%Q^.QWoWOy%Qz!Q%Q!Q![.j![!c%Q!c!i.j!i#T%Q#T#Z.j#Z~%Q^.qWfUoWOy%Qz!Q%Q!Q![/Z![!c%Q!c!i/Z!i#T%Q#T#Z/Z#Z~%Q^/bWfUoWOy%Qz!Q%Q!Q![/z![!c%Q!c!i/z!i#T%Q#T#Z/z#Z~%Q^0PWoWOy%Qz!Q%Q!Q![0i![!c%Q!c!i0i!i#T%Q#T#Z0i#Z~%Q^0pWfUoWOy%Qz!Q%Q!Q![1Y![!c%Q!c!i1Y!i#T%Q#T#Z1Y#Z~%Q^1_WoWOy%Qz!Q%Q!Q![1w![!c%Q!c!i1w!i#T%Q#T#Z1w#Z~%Q^2OQfUoWOy%Qz~%QY2XSOy%Qz!_%Q!_!`2e!`~%QY2lQzQoWOy%Qz~%QX2wQXPOy%Qz~%Q~3QUOY2}Zw2}wx,dx#O2}#O#P3d#P~2}~3gPO~2}_3oQbVOy%Qz~%Q~3zOa~_4RSUPjSOy%Qz!_%Q!_!`2e!`~%Q_4fUjS!PPOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q^4}SoWOy%Qz!Q%Q!Q![5Z![~%Q^5bWoW#ZUOy%Qz!Q%Q!Q![5Z![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q^6PWoWOy%Qz{%Q{|6i|}%Q}!O6i!O!Q%Q!Q![6z![~%Q^6nSoWOy%Qz!Q%Q!Q![6z![~%Q^7RSoW#ZUOy%Qz!Q%Q!Q![6z![~%Q^7fYoW#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q_8ZQpVOy%Qz~%Q^8fUjSOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q_8}S#WPOy%Qz!Q%Q!Q![5Z![~%Q~9`RjSOy%Qz{9i{~%Q~9nSoWOy9iyz9zz{:o{~9i~9}ROz9zz{:W{~9z~:ZTOz9zz{:W{!P9z!P!Q:j!Q~9z~:oOR~~:tUoWOy9iyz9zz{:o{!P9i!P!Q;W!Q~9i~;_QoWR~Oy%Qz~%Q^;jY#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%QX<_S]POy%Qz![%Q![!]<k!]~%QX<rQ^PoWOy%Qz~%Q_<}Q!WVOy%Qz~%QY=YQzQOy%Qz~%QX=eS|POy%Qz!`%Q!`!a=q!a~%QX=xQ|PoWOy%Qz~%QX>RUOy%Qz!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX>lY!YPoWOy%Qz}%Q}!O>e!O!Q%Q!Q![>e![!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX?aQxPOy%Qz~%Q^?lQvUOy%Qz~%QX?uSOy%Qz#b%Q#b#c@R#c~%QX@WSoWOy%Qz#W%Q#W#X@d#X~%QX@kQ!`PoWOy%Qz~%QX@tSOy%Qz#f%Q#f#g@d#g~%QXAVQ!RPOy%Qz~%Q_AbQ!QVOy%Qz~%QZAmS!PPOy%Qz!_%Q!_!`2e!`~%Q",tokenizers:[u6,h6,c6,0,1,2,3],topRules:{StyleSheet:[0,4]},specialized:[{term:94,get:n=>d6[n]||-1},{term:56,get:n=>p6[n]||-1},{term:95,get:n=>m6[n]||-1}],tokenPrec:1078});let Rm=null;function Qm(){if(!Rm&&typeof document=="object"&&document.body){let n=[];for(let e in document.body.style)/[A-Z]|^-|^(item|length)$/.test(e)||n.push(e);Rm=n.sort().map(e=>({type:"property",label:e}))}return Rm||[]}const E_=["active","after","before","checked","default","disabled","empty","enabled","first-child","first-letter","first-line","first-of-type","focus","hover","in-range","indeterminate","invalid","lang","last-child","last-of-type","link","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-of-type","only-child","optional","out-of-range","placeholder","read-only","read-write","required","root","selection","target","valid","visited"].map(n=>({type:"class",label:n})),C_=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(n=>({type:"keyword",label:n})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(n=>({type:"constant",label:n}))),y6=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(n=>({type:"type",label:n})),Gi=/^[\w-]*/,O6=n=>{let{state:e,pos:t}=n,r=Lt(e).resolveInner(t,-1);if(r.name=="PropertyName")return{from:r.from,options:Qm(),validFor:Gi};if(r.name=="ValueName")return{from:r.from,options:C_,validFor:Gi};if(r.name=="PseudoClassName")return{from:r.from,options:E_,validFor:Gi};if(r.name=="TagName"){for(let{parent:o}=r;o;o=o.parent)if(o.name=="Block")return{from:r.from,options:Qm(),validFor:Gi};return{from:r.from,options:y6,validFor:Gi}}if(!n.explicit)return null;let i=r.resolve(t),s=i.childBefore(t);return s&&s.name==":"&&i.name=="PseudoClassSelector"?{from:t,options:E_,validFor:Gi}:s&&s.name==":"&&i.name=="Declaration"||i.name=="ArgList"?{from:t,options:C_,validFor:Gi}:i.name=="Block"?{from:t,options:Qm(),validFor:Gi}:null},Ly=ha.define({parser:g6.configure({props:[Gc.add({Declaration:Ah()}),Vc.add({Block:IE})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function b6(){return new dc(Ly,Ly.data.of({autocomplete:O6}))}const I_=281,R_=1,v6=2,qu=282,w6=3,A6=283,Q_=284,_6=4,x6=286,k6=287,S6=5,T6=6,E6=1,C6=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],x2=125,I6=123,R6=59,P_=47,Q6=42,P6=43,D6=45,L6=36,N6=96,B6=92,M6=new d2({start:!1,shift(n,e){return e==S6||e==T6||e==x6?n:e==k6},strict:!1}),$6=new ui((n,e)=>{let{next:t}=n;(t==x2||t==-1||e.context)&&e.canShift(Q_)&&n.acceptToken(Q_)},{contextual:!0,fallback:!0}),F6=new ui((n,e)=>{let{next:t}=n,r;C6.indexOf(t)>-1||t==P_&&((r=n.peek(1))==P_||r==Q6)||t!=x2&&t!=R6&&t!=-1&&!e.context&&e.canShift(I_)&&n.acceptToken(I_)},{contextual:!0}),W6=new ui((n,e)=>{let{next:t}=n;if((t==P6||t==D6)&&(n.advance(),t==n.next)){n.advance();let r=!e.context&&e.canShift(R_);n.acceptToken(r?R_:v6)}},{contextual:!0}),U6=new ui(n=>{for(let e=!1,t=0;;t++){let{next:r}=n;if(r<0){t&&n.acceptToken(qu);break}else if(r==N6){t?n.acceptToken(qu):n.acceptToken(A6,1);break}else if(r==I6&&e){t==1?n.acceptToken(w6,1):n.acceptToken(qu,-1);break}else if(r==10&&t){n.advance(),n.acceptToken(qu);break}else r==B6&&n.advance();e=r==L6,n.advance()}});function z6(n,e){return n=="extends"&&e.dialectEnabled(E6)?_6:-1}const j6=Da({"get set async static":re.modifier,"for while do if else switch try catch finally return throw break continue default case":re.controlKeyword,"in of await yield void typeof delete instanceof":re.operatorKeyword,"let var const function class extends":re.definitionKeyword,"import export from":re.moduleKeyword,"with debugger as new":re.keyword,TemplateString:re.special(re.string),Super:re.atom,BooleanLiteral:re.bool,this:re.self,null:re.null,Star:re.modifier,VariableName:re.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":re.function(re.variableName),VariableDefinition:re.definition(re.variableName),Label:re.labelName,PropertyName:re.propertyName,PrivatePropertyName:re.special(re.propertyName),"CallExpression/MemberExpression/PropertyName":re.function(re.propertyName),"FunctionDeclaration/VariableDefinition":re.function(re.definition(re.variableName)),"ClassDeclaration/VariableDefinition":re.definition(re.className),PropertyDefinition:re.definition(re.propertyName),PrivatePropertyDefinition:re.definition(re.special(re.propertyName)),UpdateOp:re.updateOperator,LineComment:re.lineComment,BlockComment:re.blockComment,Number:re.number,String:re.string,ArithOp:re.arithmeticOperator,LogicOp:re.logicOperator,BitOp:re.bitwiseOperator,CompareOp:re.compareOperator,RegExp:re.regexp,Equals:re.definitionOperator,"Arrow : Spread":re.punctuation,"( )":re.paren,"[ ]":re.squareBracket,"{ }":re.brace,"InterpolationStart InterpolationEnd":re.special(re.brace),".":re.derefOperator,", ;":re.separator,TypeName:re.typeName,TypeDefinition:re.definition(re.typeName),"type enum interface implements namespace module declare":re.definitionKeyword,"abstract global Privacy readonly override":re.modifier,"is keyof unique infer":re.operatorKeyword,JSXAttributeValue:re.attributeValue,JSXText:re.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":re.angleBracket,"JSXIdentifier JSXNameSpacedName":re.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":re.attributeName}),H6={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},G6={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},V6={__proto__:null,"<":129},X6=ga.deserialize({version:14,states:"$4|O`QYOOO'QQ$IfO'#ChO'XOSO'#DVO)dQYO'#D]O)tQYO'#DhO){QYO'#DrO-xQYO'#DxOOQO'#E]'#E]O.]QWO'#E[O.bQWO'#E[OOQ$IU'#Ef'#EfO0aQ$IfO'#ItO2wQ$IfO'#IuO3eQWO'#EzO3jQpO'#FaOOQ$IU'#FS'#FSO3rO!bO'#FSO4QQWO'#FhO5_QWO'#FgOOQ$IU'#Iu'#IuOOQ$IS'#It'#ItOOQQ'#J^'#J^O5dQWO'#HpO5iQ$I[O'#HqOOQQ'#Ih'#IhOOQQ'#Hr'#HrQ`QYOOO){QYO'#DjO5qQWO'#G[O5vQ#tO'#CmO6UQWO'#EZO6aQWO'#EgO6fQ#tO'#FRO7QQWO'#G[O7VQWO'#G`O7bQWO'#G`O7pQWO'#GcO7pQWO'#GdO7pQWO'#GfO5qQWO'#GiO8aQWO'#GlO9oQWO'#CdO:PQWO'#GyO:XQWO'#HPO:XQWO'#HRO`QYO'#HTO:XQWO'#HVO:XQWO'#HYO:^QWO'#H`O:cQ$I]O'#HfO){QYO'#HhO:nQ$I]O'#HjO:yQ$I]O'#HlO5iQ$I[O'#HnO){QYO'#DWOOOS'#Ht'#HtO;UOSO,59qOOQ$IU,59q,59qO=gQbO'#ChO=qQYO'#HuO>UQWO'#IvO@TQbO'#IvO'dQYO'#IvO@[QWO,59wO@rQ&jO'#DbOAkQWO'#E]OAxQWO'#JROBTQWO'#JQOBTQWO'#JQOB]QWO,5:yOBbQWO'#JPOBiQWO'#DyO5vQ#tO'#EZOBwQWO'#EZOCSQ`O'#FROOQ$IU,5:S,5:SOC[QYO,5:SOEYQ$IfO,5:^OEvQWO,5:dOFaQ$I[O'#JOO7VQWO'#I}OFhQWO'#I}OFpQWO,5:xOFuQWO'#I}OGTQYO,5:vOITQWO'#EWOJ_QWO,5:vOKnQWO'#DlOKuQYO'#DqOLPQ&jO,5;PO){QYO,5;POOQQ'#Er'#ErOOQQ'#Et'#EtO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;ROOQQ'#Ex'#ExOLXQYO,5;cOOQ$IU,5;h,5;hOOQ$IU,5;i,5;iONXQWO,5;iOOQ$IU,5;j,5;jO){QYO'#IPON^Q$I[O,5<TONxQWO,5;RO){QYO,5;fO! bQpO'#JVO! PQpO'#JVO! iQpO'#JVO! zQpO,5;qOOOO,5;{,5;{O!!YQYO'#FcOOOO'#IO'#IOO3rO!bO,5;nO!!aQpO'#FeOOQ$IU,5;n,5;nO!!}Q,UO'#CrOOQ$IU'#Cu'#CuO!#bQWO'#CuO!#gOSO'#CyO!$TQ#tO,5<QO!$[QWO,5<SO!%hQWO'#FrO!%uQWO'#FsO!%zQWO'#FwO!&yQ&jO'#F{O!'lQ,UO'#IqOOQ$IU'#Iq'#IqO!'vQWO'#IpO!(UQWO'#IoOOQ$IU'#Cs'#CsOOQ$IU'#C|'#C|O!(^QWO'#DOOJdQWO'#FjOJdQWO'#FlO!(cQWO'#FnO!(hQWO'#FoO!(mQWO'#FuOJdQWO'#FzO!(rQWO'#E^O!)ZQWO,5<RO`QYO,5>[OOQQ'#Ik'#IkOOQQ,5>],5>]OOQQ-E;p-E;pO!+VQ$IfO,5:UOOQ$IS'#Cp'#CpO!+vQ#tO,5<vOOQO'#Cf'#CfO!,XQWO'#CqO!,aQ$I[O'#IlO5_QWO'#IlO:^QWO,59XO!,rQpO,59XO!,zQ#tO,59XO5vQ#tO,59XO!-VQWO,5:vO!-_QWO'#GxO!-mQWO'#JbO){QYO,5;kO!-uQ&jO,5;mO!-zQWO,5=cO!.PQWO,5=cO!.UQWO,5=cO5iQ$I[O,5=cO5qQWO,5<vO!.dQWO'#E_O!.xQ&jO'#E`OOQ$IS'#JP'#JPO!/ZQ$I[O'#J_O5iQ$I[O,5<zO7pQWO,5=QOOQO'#Cr'#CrO!/fQpO,5<}O!/nQ#tO,5=OO!/yQWO,5=QO!0OQ`O,5=TO:^QWO'#GnO5qQWO'#GpO!0WQWO'#GpO5vQ#tO'#GsO!0]QWO'#GsOOQQ,5=W,5=WO!0bQWO'#GtO!0jQWO'#CmO!0oQWO,59OO!0yQWO,59OO!2{QYO,59OOOQQ,59O,59OO!3YQ$I[O,59OO){QYO,59OO!3eQYO'#G{OOQQ'#G|'#G|OOQQ'#G}'#G}O`QYO,5=eO!3uQWO,5=eO){QYO'#DxO`QYO,5=kO`QYO,5=mO!3zQWO,5=oO`QYO,5=qO!4PQWO,5=tO!4UQYO,5=zOOQQ,5>Q,5>QO){QYO,5>QO5iQ$I[O,5>SOOQQ,5>U,5>UO!8VQWO,5>UOOQQ,5>W,5>WO!8VQWO,5>WOOQQ,5>Y,5>YO!8[Q`O,59rOOOS-E;r-E;rOOQ$IU1G/]1G/]O!8aQbO,5>aO'dQYO,5>aOOQO,5>f,5>fO!8kQYO'#HuOOQO-E;s-E;sO!8xQWO,5?bO!9QQbO,5?bO!9XQWO,5?lOOQ$IU1G/c1G/cO!9aQpO'#DTOOQO'#Ix'#IxO){QYO'#IxO!:OQpO'#IxO!:mQpO'#DcO!;OQ&jO'#DcO!=ZQYO'#DcO!=bQWO'#IwO!=jQWO,59|O!=oQWO'#EaO!=}QWO'#JSO!>VQWO,5:zO!>mQ&jO'#DcO){QYO,5?mO!>wQWO'#HzOOQO-E;x-E;xO!9XQWO,5?lOOQ$IS1G0e1G0eO!@TQ&jO'#D|OOQ$IU,5:e,5:eO){QYO,5:eOITQWO,5:eO!@[QWO,5:eO:^QWO,5:uO!,rQpO,5:uO!,zQ#tO,5:uO5vQ#tO,5:uOOQ$IU1G/n1G/nOOQ$IU1G0O1G0OOOQ$IS'#EV'#EVO){QYO,5?jO!@gQ$I[O,5?jO!@xQ$I[O,5?jO!APQWO,5?iO!AXQWO'#H|O!APQWO,5?iOOQ$IS1G0d1G0dO7VQWO,5?iOOQ$IU1G0b1G0bO!AsQ$IfO1G0bO!BdQ$IdO,5:rOOQ$IU'#Fq'#FqO!CQQ$IfO'#IqOGTQYO1G0bO!EPQ#tO'#IyO!EZQWO,5:WO!E`QbO'#IzO){QYO'#IzO!EjQWO,5:]OOQ$IU'#DT'#DTOOQ$IU1G0k1G0kO!EoQWO1G0kO!HQQ$IfO1G0mO!HXQ$IfO1G0mO!JlQ$IfO1G0mO!JsQ$IfO1G0mO!LzQ$IfO1G0mO!M_Q$IfO1G0mO#!OQ$IfO1G0mO#!VQ$IfO1G0mO#$jQ$IfO1G0mO#$qQ$IfO1G0mO#&fQ$IfO1G0mO#)`Q7^O'#ChO#+ZQ7^O1G0}O#-UQ7^O'#IuOOQ$IU1G1T1G1TO#-iQ$IfO,5>kOOQ$IS-E;}-E;}O#.YQ$IfO1G0mOOQ$IU1G0m1G0mO#0[Q$IfO1G1QO#0{QpO,5;sO#1QQpO,5;tO#1VQpO'#F[O#1kQWO'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#1pQpO1G1]OOQ$IU1G1]1G1]OOOO1G1f1G1fO#2OQ7^O'#ItO#2YQWO,5;}OLXQYO,5;}OOOO-E;|-E;|OOQ$IU1G1Y1G1YOOQ$IU,5<P,5<PO#2_QpO,5<POOQ$IU,59a,59aOITQWO'#C{OOOS'#Hs'#HsO#2dOSO,59eOOQ$IU,59e,59eO){QYO1G1lO!(hQWO'#IRO#2oQWO,5<eOOQ$IU,5<b,5<bOOQO'#GV'#GVOJdQWO,5<pOOQO'#GX'#GXOJdQWO,5<rOJdQWO,5<tOOQO1G1n1G1nO#2zQ`O'#CpO#3_Q`O,5<^O#3fQWO'#JZO5qQWO'#JZO#3tQWO,5<`OJdQWO,5<_O#3yQ`O'#FqO#4WQ`O'#J[O#4bQWO'#J[OITQWO'#J[O#4gQWO,5<cOOQ$IS'#Dg'#DgO#4lQWO'#FtO#4wQpO'#F|O!&tQ&jO'#F|O!&tQ&jO'#GOO#5YQWO'#GPO!(mQWO'#GSO#5_Q$I[O'#ITO#5jQ&jO,5<gOOQ$IU,5<g,5<gO#5qQ&jO'#F|O#6PQ&jO'#F}O#6XQ&jO'#F}OOQ$IU,5<u,5<uOJdQWO,5?[OJdQWO,5?[O#6^QWO'#IUO#6iQWO,5?ZOOQ$IU'#Ch'#ChO#7]Q#tO,59jOOQ$IU,59j,59jO#8OQ#tO,5<UO#8qQ#tO,5<WO#8{QWO,5<YOOQ$IU,5<Z,5<ZO#9QQWO,5<aO#9VQ#tO,5<fOGTQYO1G1mO#9gQWO1G1mOOQQ1G3v1G3vOOQ$IU1G/p1G/pONXQWO1G/pOOQQ1G2b1G2bOITQWO1G2bO){QYO1G2bOITQWO1G2bO#9lQWO1G2bO#9zQWO,59]O#;TQWO'#EWOOQ$IS,5?W,5?WO#;_Q$I[O,5?WOOQQ1G.s1G.sO:^QWO1G.sO!,rQpO1G.sO!,zQ#tO1G.sO#;pQWO1G0bO#;uQWO'#ChO#<QQWO'#JcO#<YQWO,5=dO#<_QWO'#JcO#<dQWO'#JcO#<lQWO'#I^O#<zQWO,5?|O#=SQbO1G1VOOQ$IU1G1X1G1XO5qQWO1G2}O#=ZQWO1G2}O#=`QWO1G2}O#=eQWO1G2}OOQQ1G2}1G2}O#=jQ#tO1G2bO7VQWO'#JQO7VQWO'#EaO7VQWO'#IWO#={Q$I[O,5?yOOQQ1G2f1G2fO!/yQWO1G2lOITQWO1G2iO#>WQWO1G2iOOQQ1G2j1G2jOITQWO1G2jO#>]QWO1G2jO#>eQ&jO'#GhOOQQ1G2l1G2lO!&tQ&jO'#IYO!0OQ`O1G2oOOQQ1G2o1G2oOOQQ,5=Y,5=YO#>mQ#tO,5=[O5qQWO,5=[O#5YQWO,5=_O5_QWO,5=_O!,rQpO,5=_O!,zQ#tO,5=_O5vQ#tO,5=_O#?OQWO'#JaO#?ZQWO,5=`OOQQ1G.j1G.jO#?`Q$I[O1G.jO#?kQWO1G.jO#?pQWO1G.jO5iQ$I[O1G.jO#?xQbO,5@OO#@SQWO,5@OO#@_QYO,5=gO#@fQWO,5=gO7VQWO,5@OOOQQ1G3P1G3PO`QYO1G3POOQQ1G3V1G3VOOQQ1G3X1G3XO:XQWO1G3ZO#@kQYO1G3]O#DfQYO'#H[OOQQ1G3`1G3`O#DsQWO'#HbO:^QWO'#HdOOQQ1G3f1G3fO#D{QYO1G3fO5iQ$I[O1G3lOOQQ1G3n1G3nOOQ$IS'#Fx'#FxO5iQ$I[O1G3pO5iQ$I[O1G3rOOOS1G/^1G/^O#HyQ`O,5<TO#IRQbO1G3{OOQO1G4Q1G4QO){QYO,5>aO#I]QWO1G4|O#IeQWO1G5WO#ImQWO,5?dOLXQYO,5:{O7VQWO,5:{O:^QWO,59}OLXQYO,59}O!,rQpO,59}O#IrQ7^O,59}OOQO,5:{,5:{O#I|Q&jO'#HvO#JdQWO,5?cOOQ$IU1G/h1G/hO#JlQ&jO'#H{O#KQQWO,5?nOOQ$IS1G0f1G0fO!;OQ&jO,59}O#KYQbO1G5XO7VQWO,5>fOOQ$IS'#ES'#ESO#KdQ$ItO'#ETO!?{Q&jO'#D}OOQO'#Hy'#HyO#LOQ&jO,5:hOOQ$IU,5:h,5:hO#LVQ&jO'#D}O#LhQ&jO'#D}O#LoQ&jO'#EYO#LrQ&jO'#ETO#MPQ&jO'#ETO!?{Q&jO'#ETO#MdQWO1G0PO#MiQ`O1G0POOQ$IU1G0P1G0PO){QYO1G0POITQWO1G0POOQ$IU1G0a1G0aO:^QWO1G0aO!,rQpO1G0aO!,zQ#tO1G0aO#MpQ$IfO1G5UO){QYO1G5UO#NQQ$I[O1G5UO#NcQWO1G5TO7VQWO,5>hOOQO,5>h,5>hO#NkQWO,5>hOOQO-E;z-E;zO#NcQWO1G5TO#NyQ$IfO,59jO$!xQ$IfO,5<UO$$zQ$IfO,5<WO$&|Q$IfO,5<fOOQ$IU7+%|7+%|O$)UQ$IfO7+%|O$)uQWO'#HwO$*PQWO,5?eOOQ$IU1G/r1G/rO$*XQYO'#HxO$*fQWO,5?fO$*nQbO,5?fOOQ$IU1G/w1G/wOOQ$IU7+&V7+&VO$*xQ7^O,5:^O){QYO7+&iO$+SQ7^O,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$+aQMhO,5;vOLXQYO,5;uOOQO-E;{-E;{OOQ$IU7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$+lQWO1G1iOOQ$IU1G1k1G1kO$+qQ`O,59gOOOS-E;q-E;qOOQ$IU1G/P1G/PO$+xQ$IfO7+'WOOQ$IU,5>m,5>mO$,iQWO,5>mOOQ$IU1G2P1G2PP$,nQWO'#IRPOQ$IU-E<P-E<PO$-_Q#tO1G2[O$.QQ#tO1G2^O$.[Q#tO1G2`OOQ$IU1G1x1G1xO$.cQWO'#IQO$.qQWO,5?uO$.qQWO,5?uO$.yQWO,5?uO$/UQWO,5?uOOQO1G1z1G1zO$/dQ#tO1G1yO$/tQWO'#ISO$0UQWO,5?vOITQWO,5?vO$0^Q`O,5?vOOQ$IU1G1}1G1}OOQ$IS,5<h,5<hOOQ$IS,5<i,5<iO$0hQWO,5<iO#5TQWO,5<iO!,rQpO,5<hO$0mQWO,5<jOOQ$IS,5<k,5<kO$0hQWO,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ$IU1G2R1G2RO!&tQ&jO,5<hO$0uQWO,5<iO!&tQ&jO,5<jO!&tQ&jO,5<iO$1QQ#tO1G4vO$1[Q#tO1G4vOOQO,5>p,5>pOOQO-E<S-E<SO!-uQ&jO,59lO){QYO,59lO$1iQWO1G1tOJdQWO1G1{O$1nQ$IfO7+'XOOQ$IU7+'X7+'XOGTQYO7+'XOOQ$IU7+%[7+%[O$2_Q`O'#J]O#MdQWO7+'|O$2iQWO7+'|O$2qQ`O7+'|OOQQ7+'|7+'|OITQWO7+'|O){QYO7+'|OITQWO7+'|OOQO1G.w1G.wO$2{Q$IdO'#ChO$3`Q$IdO,5<lO$4QQWO,5<lOOQ$IS1G4r1G4rOOQQ7+$_7+$_O:^QWO7+$_O!,rQpO7+$_OGTQYO7+%|O$4VQWO'#I]O$4hQWO,5?}OOQO1G3O1G3OO5qQWO,5?}O$4hQWO,5?}O$4pQWO,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ$IU7+&q7+&qO$4uQWO7+(iO5iQ$I[O7+(iO5qQWO7+(iO$4zQWO7+(iO$5PQWO7+'|OOQ$IS,5>r,5>rOOQ$IS-E<U-E<UOOQQ7+(W7+(WO$5_Q$IdO7+(TOITQWO7+(TO$5iQ`O7+(UOOQQ7+(U7+(UOITQWO7+(UO$5pQWO'#J`O$5{QWO,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQQ7+(Z7+(ZO$6uQ&jO'#GqOOQQ1G2v1G2vOITQWO1G2vO){QYO1G2vOITQWO1G2vO$6|QWO1G2vO$7[Q#tO1G2vO5iQ$I[O1G2yO#5YQWO1G2yO5_QWO1G2yO!,rQpO1G2yO!,zQ#tO1G2yO$7mQWO'#I[O$7xQWO,5?{O$8QQ&jO,5?{OOQ$IS1G2z1G2zOOQQ7+$U7+$UO$8YQWO7+$UO5iQ$I[O7+$UO$8_QWO7+$UO){QYO1G5jO){QYO1G5kO$8dQYO1G3RO$8kQWO1G3RO$8pQYO1G3RO$8wQ$I[O1G5jOOQQ7+(k7+(kO5iQ$I[O7+(uO`QYO7+(wOOQQ'#Jf'#JfOOQQ'#I_'#I_O$9RQYO,5=vOOQQ,5=v,5=vO){QYO'#H]O$9`QWO'#H_OOQQ,5=|,5=|O7VQWO,5=|OOQQ,5>O,5>OOOQQ7+)Q7+)QOOQQ7+)W7+)WOOQQ7+)[7+)[OOQQ7+)^7+)^OOQO1G5O1G5OO$9eQ7^O1G0gO$9oQWO1G0gOOQO1G/i1G/iO$9zQ7^O1G/iO:^QWO1G/iOLXQYO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!,rQpO1G/iO:^QWO,5:iOOQO,5:o,5:oO){QYO,5:oO$:UQ$I[O,5:oO$:aQ$I[O,5:oO!,rQpO,5:iOOQO-E;w-E;wOOQ$IU1G0S1G0SO!?{Q&jO,5:iO$:oQ&jO,5:iO$;QQ$ItO,5:oO$;lQ&jO,5:iO!?{Q&jO,5:oOOQO,5:t,5:tO$;sQ&jO,5:oO$<QQ$I[O,5:oOOQ$IU7+%k7+%kO#MdQWO7+%kO#MiQ`O7+%kOOQ$IU7+%{7+%{O:^QWO7+%{O!,rQpO7+%{O$<fQ$IfO7+*pO){QYO7+*pOOQO1G4S1G4SO7VQWO1G4SO$<vQWO7+*oO$=OQ$IfO1G2[O$?QQ$IfO1G2^O$ASQ$IfO1G1yO$C[Q#tO,5>cOOQO-E;u-E;uO$CfQbO,5>dO){QYO,5>dOOQO-E;v-E;vO$CpQWO1G5QO$CxQ7^O1G0bO$FPQ7^O1G0mO$FWQ7^O1G0mO$HXQ7^O1G0mO$H`Q7^O1G0mO$JTQ7^O1G0mO$JhQ7^O1G0mO$LuQ7^O1G0mO$L|Q7^O1G0mO$N}Q7^O1G0mO% UQ7^O1G0mO%!yQ7^O1G0mO%#^Q$IfO<<JTO%#}Q7^O1G0mO%&UQ7^O'#IqO%'nQ7^O1G1QOLXQYO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%'{QWO1G1aO%(QQ7^O,5>kOOOO7+'T7+'TOOOS1G/R1G/ROOQ$IU1G4X1G4XOJdQWO7+'zO%([QWO,5>lO5qQWO,5>lOOQO-E<O-E<OO%(jQWO1G5aO%(jQWO1G5aO%(rQWO1G5aO%(}Q`O,5>nO%)XQWO,5>nOITQWO,5>nOOQO-E<Q-E<QO%)^Q`O1G5bO%)hQWO1G5bOOQ$IS1G2T1G2TO$0hQWO1G2TOOQ$IS1G2S1G2SO%)pQWO1G2UOITQWO1G2UOOQ$IS1G2Y1G2YO!,rQpO1G2SO#5TQWO1G2TO%)uQWO1G2UO%)}QWO1G2TOJdQWO7+*bOOQ$IU1G/W1G/WO%*YQWO1G/WOOQ$IU7+'`7+'`O%*_Q#tO7+'gO%*oQ$IfO<<JsOOQ$IU<<Js<<JsOITQWO'#IVO%+`QWO,5?wOOQQ<<Kh<<KhOITQWO<<KhO#MdQWO<<KhO%+hQWO<<KhO%+pQ`O<<KhOITQWO1G2WOOQQ<<Gy<<GyO:^QWO<<GyO%+zQ$IfO<<IhOOQ$IU<<Ih<<IhOOQO,5>w,5>wO%,kQWO,5>wO%,pQWO,5>wOOQO-E<Z-E<ZO%,xQWO1G5iO%,xQWO1G5iO5qQWO1G5iO%-QQWO<<LTOOQQ<<LT<<LTO%-VQWO<<LTO5iQ$I[O<<LTO){QYO<<KhOITQWO<<KhOOQQ<<Ko<<KoO$5_Q$IdO<<KoOOQQ<<Kp<<KpO$5iQ`O<<KpO%-[Q&jO'#IXO%-gQWO,5?zOLXQYO,5?zOOQQ1G2n1G2nO#KdQ$ItO'#ETO!?{Q&jO'#GrOOQO'#IZ'#IZO%-oQ&jO,5=]OOQQ,5=],5=]O%-vQ&jO'#ETO%.RQ&jO'#ETO%.jQ&jO'#ETO%.tQ&jO'#GrO%/VQWO7+(bO%/[QWO7+(bO%/dQ`O7+(bOOQQ7+(b7+(bOITQWO7+(bO){QYO7+(bOITQWO7+(bO%/nQWO7+(bOOQQ7+(e7+(eO5iQ$I[O7+(eO#5YQWO7+(eO5_QWO7+(eO!,rQpO7+(eO%/|QWO,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%0XQWO1G5gO5iQ$I[O<<GpOOQQ<<Gp<<GpO%0aQWO<<GpO%0fQWO7++UO%0kQWO7++VOOQQ7+(m7+(mO%0pQWO7+(mO%0uQYO7+(mO%0|QWO7+(mO){QYO7++UO){QYO7++VOOQQ<<La<<LaOOQQ<<Lc<<LcOOQQ-E<]-E<]OOQQ1G3b1G3bO%1RQWO,5=wOOQQ,5=y,5=yO%1WQWO1G3hOLXQYO7+&ROOQO7+%T7+%TO%1]Q7^O1G5XO:^QWO7+%TOOQO1G0T1G0TO%1gQ$IfO1G0ZOOQO1G0Z1G0ZO){QYO1G0ZO%1qQ$I[O1G0ZO:^QWO1G0TO!,rQpO1G0TO!?{Q&jO1G0TO%1|Q$I[O1G0ZO%2[Q&jO1G0TO%2mQ$I[O1G0ZO%3RQ$ItO1G0ZO%3]Q&jO1G0TO!?{Q&jO1G0ZOOQ$IU<<IV<<IVOOQ$IU<<Ig<<IgO:^QWO<<IgO%3dQ$IfO<<N[OOQO7+)n7+)nO%3tQ$IfO7+'gO%5|QbO1G4OO%6WQ7^O7+%|O%6|Q7^O,59jO%8zQ7^O,5<UO%:{Q7^O,5<WO%<hQ7^O,5<fO%>WQ7^O7+'WO%>eQ7^O7+'XO%>rQWO,5;xOOQO7+&{7+&{O%>wQ#tO<<KfOOQO1G4W1G4WO%?XQWO1G4WO%?dQWO1G4WO%?rQWO7+*{O%?rQWO7+*{OITQWO1G4YO%?zQ`O1G4YO%@UQWO7+*|OOQ$IS7+'o7+'oO$0hQWO7+'pO%@^Q`O7+'pOOQ$IS7+'n7+'nO$0hQWO7+'oO%@eQWO7+'pOITQWO7+'pO#5TQWO7+'oO%@jQ#tO<<M|OOQ$IU7+$r7+$rO%@tQ`O,5>qOOQO-E<T-E<TO#MdQWOANASOOQQANASANASOITQWOANASO%AOQ$IdO7+'rOOQQAN=eAN=eO5qQWO1G4cOOQO1G4c1G4cO%A`QWO1G4cO%AeQWO7++TO%AeQWO7++TO5iQ$I[OANAoO%AmQWOANAoOOQQANAoANAoO%ArQWOANASO%AzQ`OANASOOQQANAZANAZOOQQANA[ANA[O%BUQWO,5>sOOQO-E<V-E<VO%BaQ7^O1G5fO#5YQWO,5=^O5_QWO,5=^O!,rQpO,5=^OOQO-E<X-E<XOOQQ1G2w1G2wO$;QQ$ItO,5:oO!?{Q&jO,5=^O%BkQ&jO,5=^O%B|Q&jO,5:oOOQQ<<K|<<K|OITQWO<<K|O%/VQWO<<K|O%CWQWO<<K|O%C`Q`O<<K|O){QYO<<K|OITQWO<<K|OOQQ<<LP<<LPO5iQ$I[O<<LPO#5YQWO<<LPO5_QWO<<LPO%CjQ&jO1G4bO%CrQWO7++ROOQQAN=[AN=[O5iQ$I[OAN=[OOQQ<<Np<<NpOOQQ<<Nq<<NqOOQQ<<LX<<LXO%CzQWO<<LXO%DPQYO<<LXO%DWQWO<<NpO%D]QWO<<NqOOQQ1G3c1G3cO:^QWO7+)SO%DbQ7^O<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%1gQ$IfO7+%uO){QYO7+%uOOQO7+%o7+%oO:^QWO7+%oO!,rQpO7+%oO%DlQ$I[O7+%uO!?{Q&jO7+%oO%DwQ$I[O7+%uO%EVQ&jO7+%oO%EhQ$I[O7+%uOOQ$IUAN?RAN?RO%E|Q$IfO<<KfO%HUQ7^O<<JTO%HcQ7^O1G1yO%JgQ7^O1G2[O%LhQ7^O1G2^O%NTQ7^O<<JsO%NbQ7^O<<IhOOQO1G1d1G1dOOQO7+)r7+)rO%NoQWO7+)rO%NzQWO<<NgO& SQ`O7+)tOOQ$IS<<K[<<K[O$0hQWO<<K[OOQ$IS<<KZ<<KZO& ^Q`O<<K[O$0hQWO<<KZOOQQG26nG26nO#MdQWOG26nOOQO7+)}7+)}O5qQWO7+)}O& eQWO<<NoOOQQG27ZG27ZO5iQ$I[OG27ZOITQWOG26nOLXQYO1G4_O& mQWO7++QO5iQ$I[O1G2xO#5YQWO1G2xO5_QWO1G2xO!,rQpO1G2xO!?{Q&jO1G2xO%3RQ$ItO1G0ZO& uQ&jO1G2xO%/VQWOANAhOOQQANAhANAhOITQWOANAhO&!WQWOANAhO&!`Q`OANAhOOQQANAkANAkO5iQ$I[OANAkO#5YQWOANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQQG22vG22vOOQQANAsANAsO&!jQWOANAsOOQQAND[AND[OOQQAND]AND]OOQQ<<Ln<<LnOOQO<<Ia<<IaO%1gQ$IfO<<IaOOQO<<IZ<<IZO:^QWO<<IZO){QYO<<IaO!,rQpO<<IZO&!oQ$I[O<<IaO!?{Q&jO<<IZO&!zQ$I[O<<IaO&#YQ7^O7+'gOOQO<<M^<<M^OOQ$ISAN@vAN@vO$0hQWOAN@vOOQ$ISAN@uAN@uOOQQLD,YLD,YOOQO<<Mi<<MiOOQQLD,uLD,uO#MdQWOLD,YO&$xQ7^O7+)yOOQO7+(d7+(dO5iQ$I[O7+(dO#5YQWO7+(dO5_QWO7+(dO!,rQpO7+(dO!?{Q&jO7+(dOOQQG27SG27SO%/VQWOG27SOITQWOG27SOOQQG27VG27VO5iQ$I[OG27VOOQQG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%1gQ$IfOAN>{O:^QWOAN>uO){QYOAN>{O!,rQpOAN>uO&%SQ$I[OAN>{O&%_Q7^O<<KfOOQ$ISG26bG26bOOQQ!$( t!$( tOOQO<<LO<<LOO5iQ$I[O<<LOO#5YQWO<<LOO5_QWO<<LOO!,rQpO<<LOOOQQLD,nLD,nO%/VQWOLD,nOOQQLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%1gQ$IfOG24gO:^QWOG24aO){QYOG24gO&&}QMhO,5:rO&'tQ!LQO'#IqOOQOANAjANAjO5iQ$I[OANAjO#5YQWOANAjO5_QWOANAjOOQQ!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%1gQ$IfOLD*RO&(hQMhO,59jO&)[QMhO,5<UO&*OQMhO,5<WO&*rQMhO,5<fOOQOG27UG27UO5iQ$I[OG27UO#5YQWOG27UOOQO!$'Mm!$'MmO&+iQMhO1G2[O&,]QMhO1G2^O&-PQMhO1G1yOOQOLD,pLD,pO5iQ$I[OLD,pO&-vQMhO7+'gOOQO!$(![!$(![O&.mQMhO<<KfOLXQYO'#DrO&/dQbO'#ItOLXQYO'#DjO&/kQ$IfO'#ChO&0UQbO'#ChO&0fQYO,5:vO&2fQWO'#EWOLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO'#IPO&3pQWO,5<TO&5SQWO,5;ROLXQYO,5;fO!(^QWO'#DOO!(^QWO'#DOO!(^QWO'#DOOITQWO'#FjO&2fQWO'#FjO&3xQWO'#FjOITQWO'#FlO&2fQWO'#FlO&3xQWO'#FlOITQWO'#FzO&2fQWO'#FzO&3xQWO'#FzOLXQYO,5?mO&0fQYO1G0bO&5ZQ7^O'#ChOLXQYO1G1lOITQWO,5<pO&2fQWO,5<pO&3xQWO,5<pOITQWO,5<rO&2fQWO,5<rO&3xQWO,5<rOITQWO,5<_O&2fQWO,5<_O&3xQWO,5<_O&0fQYO1G1mOLXQYO7+&iOITQWO1G1{O&2fQWO1G1{O&3xQWO1G1{O&0fQYO7+'XO&0fQYO7+%|OITQWO7+'zO&2fQWO7+'zO&3xQWO7+'zO&5eQWO7+'pO&5eQWO<<K[O&5eQWOAN@vO&5jQWO'#E[O&5oQWO'#E[O&5wQWO'#EzO&5|QWO'#EgO&6RQWO'#JRO&6^QWO'#JPO&6iQWO,5:vO&6nQ#tO,5<QO&6uQWO'#FsO&6zQWO'#FsO&7PQWO'#FsO&7UQWO,5<RO&7^QWO,5:vO&7fQ7^O1G0}O&7mQWO,5<aO&7rQWO,5<aO&7wQWO,5<aO&7|QWO1G1mO&8RQWO1G0bO&8WQ#tO1G2`O&8_Q#tO1G2`O&8fQ#tO1G2`O&8mQWO1G2UO&8rQ`O7+'pO&8yQWO7+'pO&9OQ`O<<K[O4QQWO'#FhO5_QWO'#FgOBwQWO'#EZOLXQYO,5;cO!(mQWO'#FuO!(mQWO'#FuO!(mQWO'#FuOJdQWO,5<tOJdQWO,5<tOJdQWO,5<tO&9VQWO,5<jOITQWO1G2UO&9_QWO1G2UOITQWO7+'pO!&tQ&jO'#GOO!&tQ&jO,5<j",stateData:"&:]~O'YOS'ZOSTOSUOS~OPTOQTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OP[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOR!WO'U!XO'V!ZO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9XO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOP'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']#pO'f#sO'a'cP~O!d$XO~O!]$ZO~O_$[O'W$[O~O']$`O~O!d$XO']$`O'^$bO'b$cO~Oc$iO!d$XO']$`O~O#c#TO~O]$rOu$nO!T$kO!d$mO%R$qO']$`O'^$bO^(UP~O!n$sO~Ox$tO!T$uO']$`O~Ox$tO!T$uO%Z$yO']$`O~O']$zO~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%TOc%SO!n%QO%P%RO%c%PO~P7uOb%WOcmO!T%VO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%ZO!{%^O%R%XO'^$bO~P8tO!d%_O!g%cO~O!d%dO~O!TSO~O_$[O'T%lO'W$[O~O_$[O'T%oO'W$[O~O_$[O'T%qO'W$[O~OR!WO'U!XO'V%uO~OP[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;aO!Q%wO!O&iX!O&nX!R&iX!R&nX~P'dO!R%yO!O'jX~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R%yO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>^O!O&OO~Ox&RO!W&]O!X&UO!Y&UO'^$bO~O]&SOk&SO!Q&VO'g&PO!S'kP!S'vP~P@aO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PAYO!{&^O!O'uX!R'uX~O!R&_O!O'tX~O!O&bO~O!{#eO~PAYOS&fO!T&cO!o&eO']$`O~Oc&kO!d$XO']$`O~Ou$nO!d$mO~O!S&lO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOP!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCcO!c&mO~O!]!wO!{&oO'p&nO!R'rX_'rX'W'rX~O!c'rX~PE{O!R&sO!c'qX~O!c&uO~Ox$tO!T$uO#V&vO']$`O~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO']&zO'f#sO~O#W&|O~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']&zO'f#sO~O'a'mP~PJdO!Q'QO!c'nP~P){O'g'SO'oYO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'iO~PITO!]'kO!T'yX#w'yX#z'yX$R'yX~Ou'lO~P! POu'lO!T'yX#w'yX#z'yX$R'yX~O!T'nO#w'rO#z'mO$R'sO~O!Q'vO~PLXO#z#fO$R'yO~Ou$eXx$eX!b$eX'p$eX'w$eX'x$eX~OSfX!RfX!{fX'afX'a$eX~P!!iOk'{O~OR'|O'U'}O'V(PO~Ou(ROx(SO'p#[O'w(UO'x(WO~O'a(QO~P!#rO'a(ZO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~O!Q(_O']([O!c'}P~P!$aO#W(aO~O!Q(eO'](bO!O(OP~P!$aOj(sOx(kO!W(qO!X(jO!Y(jO!d(hO!x(rO$w(mO'^$bO'g(gO~O!S(pO~P!&XO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'QOS(vO!{(uO!R'dX'a'dX~O!R(wO'a'cX~O'](yO~O!d)OO~O']&zO~O!d(hO~Ox$tO!Q!rO!T$uO#U!uO#V!rO']$`O!c'qP~O!]!wO#W)SO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)cOS)[O!T&cO!o)ZO%Q)YO'b$cO~O']$zO'a'cP~O!])_O!T'`X_'`X!R'`X'W'`X~O!d$XO'b$cO~O!d$XO']$`O'b$cO~O!]!wO#W&|O~O])jO%R)kO'])gO!S(VP~O!R)lO^(UX~O'g'SO~OZ)pO~O^)qO~O!T$kO']$`O'^$bO^(UP~Ox$tO!Q)vO!R&_O!T$uO']$`O!O'tP~O]&YOk&YO!Q)wO'g'SO!S'vP~O!R)xO_(RX'W(RX~O!{)|O'b$cO~OS*PO!T#yO'b$cO~O!T*RO~Ou*TO!TSO~O!n*YO~Oc*_O~O'](yO!S(TP~Oc$iO~O%RtO']$zO~P8tOZ*eO^*dO~OPTOQTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9WO~P!1RO^*dO_$[O'W$[O~O_*iO#d*kO%T*kO%U*kO~P){O!d%_O~O%t*pO~O!T*rO~O&V*tO&X*uOP&SaQ&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*zO~On*}O~O!O&ia!R&ia~P!)cO!Q+RO!O&iX!R&iX~P){O!R%yO!O'ja~O!O'ja~P>^O!R&_O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+WO!{+VO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+YO!d$XO'b$cO!R!VX!S!VX~O]&QOk&QOx&RO'g(gO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O'fQO'oYO'|:}O~O']9yO~P!;^O!R+^O!S'kX~O!S+`O~O!]+WO!{+VO!R#TX!S#TX~O!R+aO!S'vX~O!S+cO~O]&QOk&QOx&RO'^$bO'g(gO~O!X+dO!Y+dO~P!>[Ox$tO!Q+fO!T$uO']$`O!O&nX!R&nX~O_+jO!W+mO!X+iO!Y+iO!r+qO!s+oO!t+pO!u+nO!x+rO'^$bO'g(gO'o+gO~O!S+lO~P!?]OS+wO!T&cO!o+vO~O!{+}O!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@gO!R&sO!c'qa~Ox$tO!Q,QO!T$uO#U,SO#V,QO']$`O!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)cO#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!#rO#W'eXP'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'QO!R,]O'a'mX~P!#rO'a,_O~O!R,`O!c'nX~P!)cO!c,cO~O!O,dO~OP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!EtO#[#PO~P!EtOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!H`Oj#RO~P!H`OP#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!JzOZ#dO!a#TO#a#TO#b#TO#c#TO~P!JzOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!MrO'w!}O~P!MrOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P#!^O'x#OO~P#!^OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#$xOP[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#']OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO#j9fO'fQO'p#[O'w!}O'x#OO~O#m,fO~P#)gOP'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9jO#o9jO#c'iX#m'iX!S'iX~P#+bO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)cOP#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!#rO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)cO#z,hO~O#z,iO~O!]'kO!{,jO!T$OX#w$OX#z$OX$R$OX~O!Q,kO~O!T'nO#w,mO#z'mO$R,nO~O!R9gO!S'hX~P#)gO!S,oO~O$R,qO~OR'|O'U'}O'V,tO~O],wOk,wO!O,xO~O!RdX!]dX!cdX!c$eX'pdX~P!!iO!c-OO~P!#rO!R-PO!]!wO'p&nO!c'}X~O!c-UO~O!O$eX!R$eX!]$lX~P!!iO!R-WO!O(OX~P!#rO!]-YO~O!O-[O~O!Q(_O']$`O!c'}P~Oj-`O!]!wO!d$XO'b$cO'p&nO~O!])_O~O_$[O!R-eO'W$[O~O!S-gO~P!&XO!X-hO!Y-hO'^$bO'g(gO~Ox-jO'g(gO~O!x-kO~O']$zO!R&xX'a&xX~O!R(wO'a'ca~Ou-pOv-pOx-qO'pra'wra'xra!Rra!{ra~O'ara#mra~P#6qOu(ROx(SO'p$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#7gOu(ROx(SO'p$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#8YO]-rO~O#W-sO~O'a$na!R$na#m$na!{$na~P!#rO#W-vO~OS.PO!T&cO!o.OO%Q-}O~O'a.QO~O]#qOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~Oh.SO'].RO~P#:PO!])_O!T'`a_'`a!R'`a'W'`a~O#W.YO~OZ[X!RdX!SdX~O!R.ZO!S(VX~O!S.]O~OZ.^O~O].`O'])gO~O!T$kO']$`O^'QX!R'QX~O!R)lO^(Ua~O!c.cO~P!)cO].eO~OZ.fO~O^.gO~OS.PO!T&cO!o.OO%Q-}O'b$cO~O!R)xO_(Ra'W(Ra~O!{.mO~OS.pO!T#yO~O'g'SO!S(SP~OS.zO!T.vO!o.yO%Q.xO'b$cO~OZ/UO!R/SO!S(TX~O!S/VO~O^/XO_$[O'W$[O~O]/YO~O]/ZO'](yO~O#c/[O%r/]O~P0zO!{#eO#c/[O%r/]O~O_/^O~P){O_/`O~O%{/dOP%yiQ%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/jO!S/hO&Q/iO~P`O!TSO!d/lO~O&X*uOP&SiQ&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)cO!R%yO!O'ji~O!R&_O!O'ti~O!O/rO~O!R!Va!S!Va~P#)gO]&QOk&QO!Q/xO'g(gO!R&jX!S&jX~P@aO!R+^O!S'ka~O]&YOk&YO!Q)wO'g'SO!R&oX!S&oX~O!R+aO!S'va~O!O'ui!R'ui~P!)cO_$[O!]!wO!d$XO!j0SO!{0QO'W$[O'b$cO'p&nO~O!S0VO~P!?]O!X0WO!Y0WO'^$bO'g(gO'o+gO~O!W0XO~P#LVO!TSO!W0XO!u0ZO!x0[O~P#LVO!W0XO!s0^O!t0^O!u0ZO!x0[O~P#LVO!T&cO~O!T&cO~P!#rO!R'ri!c'ri_'ri'W'ri~P!)cO!{0gO!R'ri!c'ri_'ri'W'ri~O!R&sO!c'qi~Ox$tO!T$uO#V0iO']$`O~O#WraPraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra!cra!Ora!Tranra%Qra!]ra~P#6qO#W$^aP$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#7gO#W$`aP$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#8YO#W$naP$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!#rO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)cO!R&kX'a&kX~PJdO!R,]O'a'ma~O!Q0qO!R&lX!c&lX~P){O!R,`O!c'na~O!R,`O!c'na~P!)cO#m!fa!S!fa~PCcO#m!^a!R!^a!S!^a~P#)gO!T1UO#x^O$P1VO~O!S1ZO~On1[O~P!#rO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)cO!O1]O~O],wOk,wO~Ou(ROx(SO'x(WO'p$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$,vOu(ROx(SO'p$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$-iO#m1^O~P!#rO!Q1`O']$`O!R&tX!c&tX~O!R-PO!c'}a~O!R-PO!]!wO!c'}a~O!R-PO!]!wO'p&nO!c'}a~O'a$gi!R$gi#m$gi!{$gi~P!#rO!Q1gO'](bO!O&vX!R&vX~P!$aO!R-WO!O(Oa~O!R-WO!O(Oa~P!#rO!]!wO~O!]!wO#c1oO~Oj1rO!]!wO'p&nO~O!R'di'a'di~P!#rO!{1uO!R'di'a'di~P!#rO!c1xO~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)cO!R1|O!T(PX~P!#rO!T&cO%Q2PO~O!T&cO%Q2PO~P!#rO!T$eX$u[X_$eX!R$eX'W$eX~P!!iO$u2TOugXxgX!TgX'pgX'wgX'xgX_gX!RgX'WgX~O$u2TO~O]2ZO%R2[O'])gO!R'PX!S'PX~O!R.ZO!S(Va~OZ2`O~O^2aO~O]2dO~OS2fO!T&cO!o2eO%Q2PO~O_$[O'W$[O~P!#rO!T#yO~P!#rO!R2kO!{2mO!S(SX~O!S2nO~Ox;]O!W2wO!X2pO!Y2pO!r2vO!s2uO!t2uO!x2tO'^$bO'g(gO'o+gO~O!S2sO~P$6QOS3OO!T.vO!o2}O%Q2|O~OS3OO!T.vO!o2}O%Q2|O'b$cO~O'](yO!R'OX!S'OX~O!R/SO!S(Ta~O]3YO'g3XO~O]3ZO~O^3]O~O!c3`O~P){O_3bO~O_3bO~P){O#c3dO%r3eO~PE{O`/jO!S3iO&Q/iO~P`O!]3kO~O!R#Ti!S#Ti~P#)gO!{3mO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#)gO_$[O!{3tO'W$[O~O_$[O!]!wO!{3tO'W$[O~O!X3xO!Y3xO'^$bO'g(gO'o+gO~O_$[O!]!wO!d$XO!j3yO!{3tO'W$[O'b$cO'p&nO~O!W3zO~P$:oO!W3zO!u3}O!x4OO~P$:oO_$[O!]!wO!j3yO!{3tO'W$[O'p&nO~O!R'rq!c'rq_'rq'W'rq~P!)cO!R&sO!c'qq~O#W$xiP$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$,vO#W$ziP$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$-iO#W$giP$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!#rO!R&ka'a&ka~P!#rO!R&la!c&la~P!)cO!R,`O!c'ni~O#m#Oi!R#Oi!S#Oi~P#)gOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$DVO#[9[O~P$DVOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$F_Oj9^O~P$F_OP#^Oj9^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$HgOZ9iO!a9`O#a9`O#b9`O#c9`O~P$HgOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$J{O'w!}O~P$J{OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$MTO'x#OO~P$MTOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P% ]O_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)cOP#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi!R#Zi!S#Zi~P!#rO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!S'eX~OP'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX!R'eX~P%%mO#m#ni!R#ni!S#ni~P#)gO!S4`O~O!R&sa!S&sa~P#)gO!]!wO'p&nO!R&ta!c&ta~O!R-PO!c'}i~O!R-PO!]!wO!c'}i~O!O&va!R&va~P!#rO!]4gO~O!R-WO!O(Oi~P!#rO!R-WO!O(Oi~O!O4kO~O!]!wO#c4pO~Oj4qO!]!wO'p&nO~O!O4sO~O'a$iq!R$iq#m$iq!{$iq~P!#rO_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)cO!R1|O!T(Pa~O!T&cO%Q4xO~O!T&cO%Q4xO~P!#rO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)cOZ4{O~O]4}O'])gO~O!R.ZO!S(Vi~O]5QO~O^5RO~O'g'SO!R&{X!S&{X~O!R2kO!S(Sa~O!S5`O~P$6QOx;^O'g(gO'o+gO~O!W5cO!X5bO!Y5bO!x0[O'^$bO'g(gO'o+gO~O!s5dO!t5dO~P%.RO!X5bO!Y5bO'^$bO'g(gO'o+gO~O!T.vO~O!T.vO%Q5fO~O!T.vO%Q5fO~P!#rOS5kO!T.vO!o5jO%Q5fO~OZ5pO!R'Oa!S'Oa~O!R/SO!S(Ti~O]5sO~O!c5tO~O!c5uO~O!c5vO~O!c5vO~P){O_5xO~O!]5{O~O!c5|O~O!R'ui!S'ui~P#)gO_$[O'W$[O~P!)cO_$[O!{6RO'W$[O~O_$[O!]!wO!{6RO'W$[O~O!X6WO!Y6WO'^$bO'g(gO'o+gO~O_$[O!]!wO!j6XO!{6RO'W$[O'p&nO~O!d$XO'b$cO~P%2mO!W6YO~P%2[O!R'ry!c'ry_'ry'W'ry~P!)cO#W$iqP$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!#rO!R&li!c&li~P!)cO#m#Oq!R#Oq!S#Oq~P#)gOu-pOv-pOx-qO'pra'wra'xra!Sra~OPraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra!Rra~P%6eOu(ROx(SO'p$^a'w$^a'x$^a!S$^a~OP$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a!R$^a~P%8fOu(ROx(SO'p$`a'w$`a'x$`a!S$`a~OP$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a!R$`a~P%:gOP$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na!R$na!S$na~P!#rO#m$Yq!R$Yq!S$Yq~P#)gO#m$Zq!R$Zq!S$Zq~P#)gO!S6dO~O'a$|y!R$|y#m$|y!{$|y~P!#rO!]!wO!R&ti!c&ti~O!]!wO'p&nO!R&ti!c&ti~O!R-PO!c'}q~O!O&vi!R&vi~P!#rO!R-WO!O(Oq~O!O6jO~P!#rO!O6jO~O!R'dy'a'dy~P!#rO!R&ya!T&ya~P!#rO!T$tq_$tq!R$tq'W$tq~P!#rOZ6qO~O!R.ZO!S(Vq~O]6tO~O!T&cO%Q6uO~O!T&cO%Q6uO~P!#rO!{6vO!R&{a!S&{a~O!R2kO!S(Si~P#)gO!X6|O!Y6|O'^$bO'g(gO'o+gO~O!W7OO!x4OO~P%BkO!T.vO%Q7RO~O!T.vO%Q7RO~P!#rO]7YO'g7XO~O!R/SO!S(Tq~O!c7[O~O!c7[O~P){O!c7^O~O!c7_O~O!R#Ty!S#Ty~P#)gO_$[O!{7eO'W$[O~O_$[O!]!wO!{7eO'W$[O~O!X7hO!Y7hO'^$bO'g(gO'o+gO~O_$[O!]!wO!j7iO!{7eO'W$[O'p&nO~O#W$|yP$|yZ$|y_$|yj$|yv$|y!R$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y'W$|y'f$|y!c$|y!O$|y!T$|y!{$|yn$|y%Q$|y!]$|y~P!#rO#m#ky!R#ky!S#ky~P#)gOP$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi!R$gi!S$gi~P!#rOu(ROx(SO'x(WO'p$xi'w$xi!S$xi~OP$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi!R$xi~P%JROu(ROx(SO'p$zi'w$zi'x$zi!S$zi~OP$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi!R$zi~P%LSO#m$Zy!R$Zy!S$Zy~P#)gO#m#Oy!R#Oy!S#Oy~P#)gO!]!wO!R&tq!c&tq~O!R-PO!c'}y~O!O&vq!R&vq~P!#rO!O7mO~P!#rO!R.ZO!S(Vy~O!R2kO!S(Sq~O!X7yO!Y7yO'^$bO'g(gO'o+gO~O!T.vO%Q7|O~O!T.vO%Q7|O~P!#rO!c8PO~O_$[O!{8UO'W$[O~O_$[O!]!wO!{8UO'W$[O~OP$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq!R$iq!S$iq~P!#rO!R&{q!S&{q~P#)gO_$[O!{8hO'W$[O~OP$|yZ$|yj$|yv$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y#m$|y'f$|y!R$|y!S$|y~P!#rO!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P!#rO!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%%mO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%6eO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%8fO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%:gO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P!#rO!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%JRO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%LSO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P!#rO!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P!#rO!S$|y!W$|y!X$|y!Y$|y!r$|y!s$|y!t$|y!x$|y'^$|y'g$|y'o$|y~P!#rOn'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;aOP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!TSO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O]#qOh$OOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_;SO!d#vO#V9uO#t$TO$_9oO$a9rO$d$UO']&zO'f#sO~O!R9gO!S$]a~O]#qOh$OOj#rOk#qOl#qOq$POs9mOx#xO!T#yO!_;TO!d#vO#V9vO#t$TO$_9pO$a9sO$d$UO']&zO'f#sO~O#d'iO~P&3xO!S[X!SdX~P;aO!]9ZO~O#W9YO~O!]!wO#W9YO~O!{9jO~O#c9`O~O!{9wO!R'uX!S'uX~O!{9jO!R'sX!S'sX~O#W9xO~O'a9zO~P!#rO#W:RO~O#W:SO~O#W:TO~O!]!wO#W:UO~O!]!wO#W9xO~O#m:VO~P#)gO#W:WO~O#W:XO~O#W:YO~O#W:ZO~O#W:[O~O#m:]O~P!#rO#m:^O~P!#rO#m:_O~P!#rO!O:`O~O!O:aO~P!#rO!O:aO~O!O:bO~P!#rO!]!wO#c;YO~O!]!wO#c;[O~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Hc(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s5g5zP5zPPP5zP7t5zP5zP7xPP8OP8d<uPPPP<yPPPP<y?kPPP?qBSP<yPDgPPPPF`<yPPPPPHX<yPPKYLVPPPPLZMsPM{N|PLV<y<y!$^!'X!+z!+z!/ZPPP!/b!2W<yPPPPPPPPPP!4}P!6`PP<y!7mP<yP<y<y<y<yP<y!:[PP!=TP!?x!@Q!@U!@UP!=QP!@Y!@YP!B}P!CR<y<y!CX!E{5zP5zP5z5zP!GO5z5z!IU5z!Ki5z!Mi5z5z!NV#!]#!]#!a#!]#!iP#!]P5z##e5z#$y5z5z-zPPP#&cPP#&{#&{P#&{P#'b#&{PP#'hP#'_P#'_#'zMw#'_#(i#(o#(r([#(u([P#(|#(|#(|P([P([P([P([PP([P#)S#)VP#)V([P#)ZP#)^P([P([P([P([P([P([([#)d#)n#)t#)z#*Y#*`#*f#*p#*v#+V#+]#+k#+q#+w#,V#,l#.[#.j#.p#.v#.|#/S#/^#/d#/j#/t#0W#0^PPPPPPPP#0dPP#1W#4`PP#5v#5}#6VPP#;X#=l#Ch#Ck#Cn#Cy#C|PP#DP#DT#Dr#Ei#Em#FRPP#FV#F]#FaP#Fd#Fh#Fk#GZ#Gq#Gv#Gy#G|#HS#HV#HZ#H_mhOSj}!n$Z%b%e%f%h*m*r/d/gQ$hmQ$opQ%YyS&U!b+^Q&j!jS(j#y(oQ)e$iQ)r$qQ*^%SQ+d&]S+i&c+kQ+{&kQ-h(qQ/R*_Y0W+m+n+o+p+qS2p.v2rU3x0X0Z0^U5b2u2v2wS6W3z3}S6|5c5dQ7h6YR7y7O$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ(z$QQ)j$kQ*`%VQ*g%_Q,V9kQ.T)_Q.`)kQ/Z*eQ2Z.ZQ3V/SQ4X9mQ4}2[R8s9lpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gR*b%Z&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%y&R&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;P;Q[!cRU!]!`%w&VQ$alQ$gmS$lp$qv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ%OwQ&g!iQ&i!jS(^#v(hS)d$h$iQ)h$kQ)u$sQ*X%QQ*]%SS+z&j&kQ-T(_Q.X)eQ._)kQ.a)lQ.d)pQ.|*YS/Q*^*_Q0e+{Q1_-PQ2Y.ZQ2^.^Q2c.fQ3U/RQ4d1`Q4|2[Q5P2`Q6p4{R7p6q!Y$em!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VQ)]$aQ)}${Q*Q$|Q*[%SQ.h)uQ.{*XU/P*]*^*_Q3P.|S3T/Q/RQ5]2oQ5o3US6z5^5aS7w6{6}Q8_7xR8n8`W#|a$c(w:}S${t%XQ$|uQ$}vR){$y$o#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[T'}#s(OX({$Q9k9l9mU&Y!b$u+aQ'T!{Q)o$nQ.q*RQ1v-pR5X2k&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q$]#aZ!_!o$_%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,g,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pT!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ&W!bR/y+^Y&Q!b&U&]+^+dS(i#y(oS+h&c+kS-a(j(qQ-b(kQ-i(rQ.s*TU0T+i+m+nU0Y+o+p+qS0_+r2tQ1q-hQ1s-jQ1t-kS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hQ8`7yQ;X;]R;Z;^lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%j!QS&w!v9YQ)b$fQ*V%OQ*W%PQ+x&hS,Z&|9xS-u)S:UQ.V)cQ.u*UQ/k*tQ/m*uQ/u+XQ0]+oQ0c+yS1{-v:ZQ2U.WS2X.Y:[Q3n/wQ3q0OQ4Q0dQ4z2VQ6O3pQ6S3vQ6[4RQ7`5|Q7c6TQ8R7dQ8e8TR8q8g$W#`Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pW(t#z&{1S8jT)W$_,g$W#_Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pQ'e#`S)V$_,gR-w)W&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ%e{Q%f|Q%h!OQ%i!PR/c*pQ&d!iQ)X$aQ+u&gS-|)])uS0`+s+tW2O-y-z-{.hS4P0a0bU4w2Q2R2SU6n4v5T5UQ7o6oR8Z7rT+j&c+kS+h&c+kU0T+i+m+nU0Y+o+p+qS0_+r2tS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hR8`7yS+j&c+kT2q.v2rS&q!q/aQ-S(^Q-_(iS0S+h2oQ1d-TS1l-`-iU3y0Y0_5aQ4c1_S4n1r1tU6X3{3|6}Q6f4dQ6m4qR7i6ZQ!xXS&p!q/aQ)T$YQ)`$dQ)f$jQ,O&qQ-R(^Q-^(iQ-c(lQ.U)aQ.}*ZS0R+h2oS1c-S-TS1k-_-iQ1n-bQ1p-dQ3R/OW3u0S0Y0_5aQ4b1_Q4f1dS4j1l1tQ4o1sQ5m3SW6V3y3{3|6}S6e4c4dS6i4k:`Q6k4nQ6x5[Q7V5nS7g6X6ZQ7k6fS7l6j:aQ7n6mQ7u6yQ8O7WQ8W7iS8Y7m:bQ8]7vQ8l8^Q8x8mQ9P8yQ:i:dQ:t:nQ:u:oQ:y;XR:{;Z$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hS!xn!k!j:c#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:i;P$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ$Yb!Y$dm!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VS$jn!kQ)a$eQ*Z%SW/O*[*]*^*_U3S/P/Q/RQ5[2oS5n3T3UU6y5]5^5aQ7W5oU7v6z6{6}S8^7w7xS8m8_8`Q8y8n!j:d#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ:n;OR:o;P$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hY!hRU!]!`%wv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ*h%_!h:e#]#k'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:h&VS&Z!b$uR/{+a$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR*g%_$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ'T!{!k:f#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q!h#VZ!_$_%v%|&x'P'^'_'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U!R9b'c't+[,g/s/v0t0|0}1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d#XZ!_$_%v%|&x'P'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U}9d'c't+[,g/s/v0t1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!`#]Z!_$_%v%|&x'P'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9Un(Y#t&})R,}-V-l-m0n1y4a4r:j:v:w:xx;Q'c't+[,g/s/v0t1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d;U&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y;V8i8v8}9Q9SZ;W1R4[6_7j8X&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#l`#mR1V,j&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#g^#nT'm#i'qT#h^#nT'o#i'q&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QT#l`#mQ#o`R'x#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!k;O#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q#RdOSUj}!S!W!n!|#k$Z%Z%^%_%b%d%e%f%h%l&R&e'v)Z*i*m*r+v,k-q.O.y/[/]/^/`/d/g/i1U2e2}3b3d3e5j5xv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[Q)P$UQ,v(Rb1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^v#wa!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;WS(l#y(oQ)Q$VQ-d(m#Q:k!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b:l9Z9o9r9u9|:P:S:X:^b:m9i9p9s9v9}:Q:T:Y:_Q:q;RQ:r;SR:s;Tv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^lfOSj}!n$Z%b%e%f%h*m*r/d/gQ(d#xQ*{%oQ*|%qR1f-W$n#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[Q*O$|Q.o*QQ2i.nR5W2jT(n#y(oS(n#y(oT2q.v2rQ)`$dQ-c(lQ.U)aQ.}*ZQ3R/OQ5m3SQ6x5[Q7V5nQ7u6yQ8O7WQ8]7vQ8l8^Q8x8mR9P8yn(V#t&})R,}-V-l-m0n1y4a4r:j:v:w:x!d9{&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y9|8i8v8}9Q9SZ9}1R4[6_7j8Xp(X#t&})R,{,}-V-l-m0n1y4a4r:j:v:w:x!f:O&y'h(](c+t,Y,r-Z-x-{.l.n0b0k0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|[:P8i8v8{8}9Q9S]:Q1R4[6_6`7j8XpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ%UxR*i%_peOSjy}!n$Z%X%b%e%f%h*m*r/d/gR%UxQ*S$}R.k){qeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ.w*XS2{.{.|W5e2x2y2z3PU7Q5g5h5iU7z7P7S7TQ8a7{R8o8bQ%]yR*c%XR3Y/UR7Y5pS$lp$qR.a)lQ%bzR*m%cR*s%iT/e*r/gR*w%jQ*v%jR/n*wQjOQ!nST$^j!nQ(O#sR,s(OQ!YQR%t!YQ!^RU%z!^%{+SQ%{!_R+S%|Q+_&WR/z+_Q,^&}R0o,^Q,a'PS0r,a0sR0s,bQ+k&cR0U+kS!eR$tU&`!e&a+TQ&a!fR+T%}Q+b&ZR/|+bQ&t!sQ,P&rU,T&t,P0jR0j,UQ'q#iR,l'qQ#m`R'w#mQ#cZU'g#c+O9hQ+O9UR9h'tQ-Q(^W1a-Q1b4e6gU1b-R-S-TS4e1c1dR6g4f$Z(T#t&y&}'h(](c(|(})R+t,W,X,Y,r,{,|,}-V-Z-l-m-x-{.l.n0b0k0l0m0n1R1e1i1y2S2h2j2z4U4Y4Z4[4a4h4l4r4t4y5U5i6]6_6`6a6h6l7T7j8X8i8t8u8v8{8|8}9Q9S:j:v:w:x:z:|Q-X(cU1h-X1j4iQ1j-ZR4i1iQ(o#yR-f(oQ(x#}R-o(xQ1}-xR4u1}Q)y$wR.j)yQ2l.qS5Y2l6wR6w5ZQ*U%OR.t*UQ2r.vR5_2rQ/T*`S3W/T5qR5q3YQ.[)hW2].[2_5O6rQ2_._Q5O2^R6r5PQ)m$lR.b)mQ/g*rR3h/gWiOSj!nQ%g}Q)U$ZQ*l%bQ*n%eQ*o%fQ*q%hQ/b*mS/e*r/gR3g/dQ$]gQ%k!RQ%n!TQ%p!UQ%r!VQ)t$rQ)z$xQ*b%]Q*y%mQ-e(nS/W*c*fQ/o*xQ/p*{Q/q*|S0P+h2oQ2b.eQ2g.lQ3Q.}Q3[/YQ3f/cY3s0R0S0Y0_5aQ5S2dQ5V2hQ5l3RQ5r3Z[6P3r3u3y3{3|6}Q6s5QQ7U5mQ7Z5sW7a6Q6V6X6ZQ7q6tQ7t6xQ7}7VU8Q7b7g7iQ8[7uQ8c8OS8d8S8WQ8k8]Q8p8fQ8w8lQ8z8rQ9O8xR9R9PQ$fmQ&h!jU)c$g$h$iQ+X&TU+y&i&j&kQ-](iS.W)d)eQ/w+ZQ0O+hS0d+z+{Q1m-aQ2V.XQ3p/}S3v0T0YQ4R0eQ4m1qS6T3w3|Q7d6UQ8T7fR8g8VS#ua:}R)^$cU#}a$c:}R-n(wQ#taS&y!w)_Q&}!yQ'h#dQ(]#vQ(c#xQ(|$RQ(}$SQ)R$WQ+t&fQ,W9nQ,X9qQ,Y9tQ,r'|Q,{(VQ,|(XQ,}(YQ-V(aQ-Z(eQ-l(uQ-m(vd-x)Y-}.x2P2|4x5f6u7R7|Q-{)[Q.l)|Q.n*PQ0b+wQ0k9{Q0l:OQ0m:RQ0n,]Q1R9iQ1e-WQ1i-YQ1y-sQ2S.PQ2h.mQ2j.pQ2z.zQ4U:WQ4Y9pQ4Z9sQ4[9vQ4a1^Q4h1gQ4l1oQ4r1uQ4t1|Q4y2TQ5U2fQ5i3OQ6]:]Q6_:TQ6`9}Q6a:QQ6h4gQ6l4pQ7T5kQ7j:YQ8X:_Q8i9ZQ8t9oQ8u9rQ8v9uQ8{9|Q8|:PQ8}:SQ9Q:XQ9S:^Q:j:}Q:v;UQ:w;VQ:x;WQ:z;YR:|;[lgOSj}!n$Z%b%e%f%h*m*r/d/gS!pU%dQ%m!SQ%s!WQ'U!|Q'u#kS*f%Z%^Q*j%_Q*x%lQ+U&RQ+s&eQ,p'vQ-z)ZQ/_*iQ0a+vQ1X,kQ1w-qQ2R.OQ2y.yQ3^/[Q3_/]Q3a/^Q3c/`Q3j/iQ4_1UQ5T2eQ5h2}Q5w3bQ5y3dQ5z3eQ7S5jR7]5x!vZOSUj}!S!n!|$Z%Z%^%_%b%d%e%f%h%l&R&e)Z*i*m*r+v-q.O.y/[/]/^/`/d/g/i2e2}3b3d3e5j5xQ!_RQ!oTQ$_kS%v!]%yQ%|!`Q&x!vQ'P!zQ'V#PQ'W#QQ'X#RQ'Y#SQ'Z#TQ'[#UQ']#VQ'^#WQ'_#XQ'`#YQ'a#ZQ'c#]Q'f#bQ'j#eW't#k'v,k1UQ)n$mS+P%w+RS+[&V/xQ+e&^Q+|&oQ,[&|Q,b'QQ,e9TQ,g9VQ,u(QQ-t)SQ/s+VQ/v+YQ0f+}Q0p,`Q0t9YQ0u9[Q0v9]Q0w9^Q0x9_Q0y9`Q0z9aQ0{9bQ0|9cQ0}9dQ1O9eQ1P9fQ1Q,fQ1T9jQ1Y9gQ1z-vQ2W.YQ3o9wQ3r0QQ4S0gQ4V0qQ4W9xQ4]9zQ4^:UQ5Z2mQ5}3mQ6Q3tQ6^:VQ6b:ZQ6c:[Q7b6RQ7s6vQ8S7eQ8f8UQ8r8hQ9U!WR:p;QR!aRR&X!bS&T!b+^S+Z&U&]R/}+dR'O!yR'R!zT!tU$XS!sU$XU$wrs*kS&r!r!uQ,R&sQ,U&vQ.i)xS0h,Q,SR4T0i`!dR!]!`$t%w&_)v+fh!qUrs!r!u$X&s&v)x,Q,S0iQ/a*kQ/t+WQ3l/lT:g&V)wT!gR$tS!fR$tS%x!]&_S%}!`)vS+Q%w+fT+]&V)wT&[!b$uQ#i^R'z#nT'p#i'qR1W,jT(`#v(hR(f#xQ-y)YQ2Q-}Q2x.xQ4v2PQ5g2|Q6o4xQ7P5fQ7r6uQ7{7RR8b7|lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%[yR*b%XV$xrs*kR.r*RR*a%VQ$ppR)s$qR)i$kT%`z%cT%az%cT/f*r/g",nodeNames:"\u26A0 ArithOp ArithOp InterpolationStart extends LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:M6,nodeProps:[["closedBy",3,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[j6],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T'u(rZ$UW]!ROY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j'u*{R$P&j$UW]!RO!^%T!_#o%T#p~%T'm+ZV]!ROY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U'm+wO$P&j]!R'm+zROr+Urs,Ts~+U'm,[U$P&j]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R,sU]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R-[O]!R!R-_PO~,n'u-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k'u.VZ$P&j$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/PZ$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/yR$UW]!RO!^%T!_#o%T#p~%T!Z0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x2k0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`2k1g]$UW'o2cOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T6d5lU'x6[$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T'u6jZ$UW]!ROY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w'm8YV]!ROY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T'm8rROw8Twx8{x~8T'm9SU$P&j]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R9kU]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R:QPO~9f'u:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c'u:xZ$P&j$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z;rZ$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k%V=QR!d$}$UWO!^%T!_#o%T#p~%TZ=bR!cR$UWO!^%T!_#o%T#p~%T5s=tU'^2s#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T$u>rSj$m$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu6`$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%Ty@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%Ty@iR!Qq$UWO!^%T!_#o%T#p~%Ty@yZ$UWkqO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%TyAqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyBiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyCVV$UWkqO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Duy!0cd$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%Ty!1x_$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%Ty!3OR$UWkqO!^%T!_#o%T#p~%Ty!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%Ty!3}Y$UWkqO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%Ty!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%Ty!5`X$UWkqO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%Ty!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%Ty!6z]$UWkqO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T%w!7|R!]V$UW#m%hO!^%T!_#o%T#p~%T!P!8^R_w$UWO!^%T!_#o%T#p~%T6i!8rR'bd!a0`#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v%w!9kT!{%o$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%w!:gT'a!s#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T6i!<YV'p6a$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T)z!<vRv)r$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%TZ!={R!OR$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$P!>pR$UW'f#wO!^%T!_#o%T#p~%T~!?OO!T~6d!?VT'w6[$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T5g!?oR!S5]nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']%k'g2bOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[F6,W6,U6,0,1,2,3,4,5,6,7,8,9,$6],topRules:{Script:[0,7]},dialects:{jsx:11707,ts:11709},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:(n,e)=>z6(n,e)<<1},{term:289,get:n=>H6[n]||-1},{term:299,get:n=>G6[n]||-1},{term:63,get:n=>V6[n]||-1}],tokenPrec:11730}),Y6=[Cr("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Cr("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Cr("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Cr("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Cr("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Cr(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Cr("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Cr(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Cr(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Cr('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Cr('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],D_=new aW,k2=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function fl(n){return(e,t)=>{let r=e.node.getChild("VariableDefinition");return r&&t(r,n),!0}}const Z6=["FunctionDeclaration"],q6={FunctionDeclaration:fl("function"),ClassDeclaration:fl("class"),ClassExpression:()=>!0,EnumDeclaration:fl("constant"),TypeAliasDeclaration:fl("type"),NamespaceDeclaration:fl("namespace"),VariableDefinition(n,e){n.matchContext(Z6)||e(n,"variable")},TypeDefinition(n,e){e(n,"type")},__proto__:null};function S2(n,e){let t=D_.get(e);if(t)return t;let r=[],i=!0;function s(o,a){let l=n.sliceString(o.from,o.to);r.push({label:l,type:a})}return e.cursor(Ft.IncludeAnonymous).iterate(o=>{if(i)i=!1;else if(o.name){let a=q6[o.name];if(a&&a(o,s)||k2.has(o.name))return!1}else if(o.to-o.from>8192){for(let a of S2(n,o.node))r.push(a);return!1}}),D_.set(e,r),r}const L_=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/;function K6(n){let e=Lt(n.state).resolve(n.pos,-1);if(e.name=="TemplateString"||e.name=="String"||e.name=="LineComment"||e.name=="BlockComment")return null;let t=e.to-e.from<20&&L_.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let r=[];for(let i=e;i;i=i.parent)k2.has(i.name)&&(r=r.concat(S2(n.state.doc,i)));return{options:r,from:t?e.from:n.pos,validFor:L_}}const us=ha.define({parser:X6.configure({props:[Gc.add({IfStatement:Ah({except:/^\s*({|else\b)/}),TryStatement:Ah({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:PW,SwitchBody:n=>{let e=n.textAfter,t=/^\s*\}/.test(e),r=/^\s*(case|default)\b/.test(e);return n.baseIndent+(t?0:r?1:2)*n.unit},Block:QW({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>-1,"Statement Property":Ah({except:/^{/}),JSXElement(n){let e=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},JSXEscape(n){let e=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),Vc.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":IE,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),J6=us.configure({dialect:"ts"}),ez=us.configure({dialect:"jsx"}),tz=us.configure({dialect:"jsx ts"}),nz="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(n=>({label:n,type:"keyword"}));function rz(n={}){let e=n.jsx?n.typescript?tz:ez:n.typescript?J6:us;return new dc(e,[us.data.of({autocomplete:L8(["LineComment","BlockComment","String"],IC(Y6.concat(nz)))}),us.data.of({autocomplete:K6}),n.jsx?sz:[]])}function N_(n,e,t=n.length){if(!e)return"";let r=e.getChild("JSXIdentifier");return r?n.sliceString(r.from,Math.min(r.to,t)):""}const iz=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),sz=We.inputHandler.of((n,e,t,r)=>{if((iz?n.composing:n.compositionStarted)||n.state.readOnly||e!=t||r!=">"&&r!="/"||!us.isActiveAt(n.state,e,-1))return!1;let{state:i}=n,s=i.changeByRange(o=>{var a,l,c;let{head:u}=o,h=Lt(i).resolveInner(u,-1),f;if(h.name=="JSXStartTag"&&(h=h.parent),r==">"&&h.name=="JSXFragmentTag")return{range:ve.cursor(u+1),changes:{from:u,insert:"><>"}};if(r==">"&&h.name=="JSXIdentifier"){if(((l=(a=h.parent)===null||a===void 0?void 0:a.lastChild)===null||l===void 0?void 0:l.name)!="JSXEndTag"&&(f=N_(i.doc,h.parent,u)))return{range:ve.cursor(u+1),changes:{from:u,insert:`></${f}>`}}}else if(r=="/"&&h.name=="JSXFragmentTag"){let p=h.parent,d=p==null?void 0:p.parent;if(p.from==u-1&&((c=d.lastChild)===null||c===void 0?void 0:c.name)!="JSXEndTag"&&(f=N_(i.doc,d==null?void 0:d.firstChild,u))){let m=`/${f}>`;return{range:ve.cursor(u+m.length),changes:{from:u,insert:m}}}}return{range:o}});return s.changes.empty?!1:(n.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),dl=["_blank","_self","_top","_parent"],Pm=["ascii","utf-8","utf-16","latin1","latin1"],Dm=["get","post","put","delete"],Lm=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Zn=["true","false"],Pe={},wd={a:{attrs:{href:null,ping:null,type:null,media:null,target:dl,hreflang:null}},abbr:Pe,acronym:Pe,address:Pe,applet:Pe,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Pe,aside:Pe,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Pe,base:{attrs:{href:null,target:dl}},basefont:Pe,bdi:Pe,bdo:Pe,big:Pe,blockquote:{attrs:{cite:null}},body:Pe,br:Pe,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Lm,formmethod:Dm,formnovalidate:["novalidate"],formtarget:dl,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Pe,center:Pe,cite:Pe,code:Pe,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Pe,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Pe,dir:Pe,div:Pe,dl:Pe,dt:Pe,em:Pe,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Pe,figure:Pe,font:Pe,footer:Pe,form:{attrs:{action:null,name:null,"accept-charset":Pm,autocomplete:["on","off"],enctype:Lm,method:Dm,novalidate:["novalidate"],target:dl}},frame:Pe,frameset:Pe,h1:Pe,h2:Pe,h3:Pe,h4:Pe,h5:Pe,h6:Pe,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Pe,hgroup:Pe,hr:Pe,html:{attrs:{manifest:null}},i:Pe,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Lm,formmethod:Dm,formnovalidate:["novalidate"],formtarget:dl,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Pe,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Pe,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Pe,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Pm,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Pe,noframes:Pe,noscript:Pe,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Pe,param:{attrs:{name:null,value:null}},pre:Pe,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Pe,rt:Pe,ruby:Pe,s:Pe,samp:Pe,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Pm}},section:Pe,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Pe,source:{attrs:{src:null,type:null,media:null}},span:Pe,strike:Pe,strong:Pe,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Pe,summary:Pe,sup:Pe,table:Pe,tbody:Pe,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Pe,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Pe,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Pe,time:{attrs:{datetime:null}},title:Pe,tr:Pe,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},tt:Pe,u:Pe,ul:{children:["li","script","template","ul","ol"]},var:Pe,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Pe},T2={accesskey:null,class:null,contenteditable:Zn,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Zn,autocorrect:Zn,autocapitalize:Zn,style:null,tabindex:null,title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Zn,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Zn,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Zn,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Zn,"aria-hidden":Zn,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Zn,"aria-multiselectable":Zn,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Zn,"aria-relevant":null,"aria-required":Zn,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},oz=Object.keys(wd),B_=Object.keys(T2);function ya(n,e,t=n.length){if(!e)return"";let r=e.firstChild,i=r&&r.getChild("TagName");return i?n.sliceString(i.from,Math.min(i.to,t)):""}function Ad(n,e=!1){for(let t=n.parent;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function E2(n,e){let t=wd[ya(n,Ad(e,!0))];return(t==null?void 0:t.children)||oz}function PO(n,e){let t=[];for(let r=e;r=Ad(r);){let i=ya(n,r);if(i&&r.lastChild.name=="CloseTag")break;i&&t.indexOf(i)<0&&(e.name=="EndTag"||e.from>=r.firstChild.to)&&t.push(i)}return t}const C2=/^[:\-\.\w\u00b7-\uffff]*$/;function M_(n,e,t,r){let i=/\s*>/.test(n.sliceDoc(r,r+5))?"":">";return{from:t,to:r,options:E2(n.doc,e).map(s=>({label:s,type:"type"})).concat(PO(n.doc,e).map((s,o)=>({label:"/"+s,apply:"/"+s+i,type:"type",boost:99-o}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function $_(n,e,t,r){let i=/\s*>/.test(n.sliceDoc(r,r+5))?"":">";return{from:t,to:r,options:PO(n.doc,e).map((s,o)=>({label:s,apply:s+i,type:"type",boost:99-o})),validFor:C2}}function az(n,e,t){let r=[],i=0;for(let s of E2(n.doc,e))r.push({label:"<"+s,type:"type"});for(let s of PO(n.doc,e))r.push({label:"</"+s+">",type:"type",boost:99-i++});return{from:t,to:t,options:r,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function lz(n,e,t,r){let i=Ad(e),s=i?wd[ya(n.doc,i)]:null,o=s&&s.attrs?Object.keys(s.attrs).concat(B_):B_;return{from:t,to:r,options:o.map(a=>({label:a,type:"property"})),validFor:C2}}function cz(n,e,t,r){var i;let s=(i=e.parent)===null||i===void 0?void 0:i.getChild("AttributeName"),o=[],a;if(s){let l=n.sliceDoc(s.from,s.to),c=T2[l];if(!c){let u=Ad(e),h=u?wd[ya(n.doc,u)]:null;c=(h==null?void 0:h.attrs)&&h.attrs[l]}if(c){let u=n.sliceDoc(t,r).toLowerCase(),h='"',f='"';/^['"]/.test(u)?(a=u[0]=='"'?/^[^"]*$/:/^[^']*$/,h="",f=n.sliceDoc(r,r+1)==u[0]?"":u[0],u=u.slice(1),t++):a=/^[^\s<>='"]*$/;for(let p of c)o.push({label:p,apply:h+p+f,type:"constant"})}}return{from:t,to:r,options:o,validFor:a}}function uz(n){let{state:e,pos:t}=n,r=Lt(e).resolveInner(t),i=r.resolve(t,-1);for(let s=t,o;r==i&&(o=i.childBefore(s));){let a=o.lastChild;if(!a||!a.type.isError||a.from<a.to)break;r=i=o,s=a.from}return i.name=="TagName"?i.parent&&/CloseTag$/.test(i.parent.name)?$_(e,i,i.from,t):M_(e,i,i.from,t):i.name=="StartTag"?M_(e,i,t,t):i.name=="StartCloseTag"||i.name=="IncompleteCloseTag"?$_(e,i,t,t):n.explicit&&(i.name=="OpenTag"||i.name=="SelfClosingTag")||i.name=="AttributeName"?lz(e,i,i.name=="AttributeName"?i.from:t,t):i.name=="Is"||i.name=="AttributeValue"||i.name=="UnquotedAttributeValue"?cz(e,i,i.name=="Is"?t:i.from,t):n.explicit&&(r.name=="Element"||r.name=="Text"||r.name=="Document")?az(e,i,t):null}const Ny=ha.define({parser:ZU.configure({props:[Gc.add({Element(n){let e=/^(\s*)(<\/)?/.exec(n.textAfter);return n.node.to<=n.pos+e[0].length?n.continue():n.lineIndent(n.node.from)+(e[2]?0:n.unit)},"OpenTag CloseTag SelfClosingTag"(n){return n.column(n.node.from)+n.unit},Document(n){if(n.pos+/\s*/.exec(n.textAfter)[0].length<n.node.to)return n.continue();let e=null,t;for(let r=n.node;;){let i=r.lastChild;if(!i||i.name!="Element"||i.to!=r.to)break;e=r=i}return e&&!((t=e.lastChild)&&(t.name=="CloseTag"||t.name=="SelfClosingTag"))?n.lineIndent(e.from)+n.unit:null}}),Vc.add({Element(n){let e=n.firstChild,t=n.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:t.name=="CloseTag"?t.from:n.to}}})],wrap:KU([{tag:"script",attrs(n){return!n.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(n.type)},parser:us.parser},{tag:"style",attrs(n){return(!n.lang||n.lang=="css")&&(!n.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(n.type))},parser:Ly.parser}])}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}});function hz(n={}){let e=Ny;return n.matchClosingTags===!1&&(e=e.configure({dialect:"noMatch"})),new dc(e,[Ny.data.of({autocomplete:uz}),n.autoCloseTags!==!1?fz:[],rz().support,b6().support])}const fz=We.inputHandler.of((n,e,t,r)=>{if(n.composing||n.state.readOnly||e!=t||r!=">"&&r!="/"||!Ny.isActiveAt(n.state,e,-1))return!1;let{state:i}=n,s=i.changeByRange(o=>{var a,l,c;let{head:u}=o,h=Lt(i).resolveInner(u,-1),f;if((h.name=="TagName"||h.name=="StartTag")&&(h=h.parent),r==">"&&h.name=="OpenTag"){if(((l=(a=h.parent)===null||a===void 0?void 0:a.lastChild)===null||l===void 0?void 0:l.name)!="CloseTag"&&(f=ya(i.doc,h.parent,u)))return{range:ve.cursor(u+1),changes:{from:u,insert:`></${f}>`}}}else if(r=="/"&&h.name=="OpenTag"){let p=h.parent,d=p==null?void 0:p.parent;if(p.from==u-1&&((c=d.lastChild)===null||c===void 0?void 0:c.name)!="CloseTag"&&(f=ya(i.doc,d,u))){let m=`/${f}>`;return{range:ve.cursor(u+m.length),changes:{from:u,insert:m}}}}return{range:o}});return s.changes.empty?!1:(n.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),I2=SE({block:{open:"<!--",close:"-->"}}),R2=eU.configure({props:[Vc.add(n=>{if(!(!n.is("Block")||n.is("Document")))return(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})}),Gc.add({Document:()=>null}),ua.add({Document:I2})]});function DO(n){return new Or(I2,n)}const dz=DO(R2),pz=R2.configure([lU,uU,cU,hU]),Q2=DO(pz);function mz(n,e){return t=>{if(t&&n){let r=null;if(typeof n=="function"?r=n(t):r=Jh.matchLanguageName(n,t,!0),r instanceof Jh)return r.support?r.support.language.parser:fc.getSkippingParser(r.load());if(r)return r.parser}return e?e.parser:null}}function F_(n,e){return e.sliceString(n.from,n.from+50)}class Nm{constructor(e,t,r,i,s,o,a){this.node=e,this.from=t,this.to=r,this.spaceBefore=i,this.spaceAfter=s,this.type=o,this.item=a}blank(e=!0){let t=this.spaceBefore;if(this.node.name=="Blockquote")t+=">";else for(let r=this.to-this.from-t.length-this.spaceAfter.length;r>0;r--)t+=" ";return t+(e?this.spaceAfter:"")}marker(e,t){let r=this.node.name=="OrderedList"?String(+D2(this.item,e)[2]+t):"";return this.spaceBefore+r+this.type+this.spaceAfter}}function P2(n,e,t){let r=[];for(let o=n;o&&o.name!="Document";o=o.parent)(o.name=="ListItem"||o.name=="Blockquote")&&r.push(o);let i=[],s=0;for(let o=r.length-1;o>=0;o--){let a=r[o],l,c=s;if(a.name=="Blockquote"&&(l=/^[ \t]*>( ?)/.exec(e.slice(s))))s+=l[0].length,i.push(new Nm(a,c,s,"",l[1],">",null));else if(a.name=="ListItem"&&a.parent.name=="OrderedList"&&(l=/^([ \t]*)\d+([.)])([ \t]*)/.exec(F_(a,t)))){let u=l[3],h=l[0].length;u.length>=4&&(u=u.slice(0,u.length-4),h-=4),s+=h,i.push(new Nm(a.parent,c,s,l[1],u,l[2],a))}else if(a.name=="ListItem"&&a.parent.name=="BulletList"&&(l=/^([ \t]*)([-+*])([ \t]{1,4}\[[ xX]\])?([ \t]+)/.exec(F_(a,t)))){let u=l[4],h=l[0].length;u.length>4&&(u=u.slice(0,u.length-4),h-=4);let f=l[2];l[3]&&(f+=l[3].replace(/[xX]/," ")),s+=h,i.push(new Nm(a.parent,c,s,l[1],u,f,a))}}return i}function D2(n,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(n.from,n.from+10))}function Bm(n,e,t,r=0){for(let i=-1,s=n;;){if(s.name=="ListItem"){let a=D2(s,e),l=+a[2];if(i>=0){if(l!=i+1)return;t.push({from:s.from+a[1].length,to:s.from+a[0].length,insert:String(i+2+r)})}i=l}let o=s.nextSibling;if(!o)break;s=o}}const gz=({state:n,dispatch:e})=>{let t=Lt(n),{doc:r}=n,i=null,s=n.changeByRange(o=>{if(!o.empty||!Q2.isActiveAt(n,o.from))return i={range:o};let a=o.from,l=r.lineAt(a),c=P2(t.resolveInner(a,-1),l.text,r);for(;c.length&&c[c.length-1].from>a-l.from;)c.pop();if(!c.length)return i={range:o};let u=c[c.length-1];if(u.to-u.spaceAfter.length>a-l.from)return i={range:o};let h=a>=u.to-u.spaceAfter.length&&!/\S/.test(l.text.slice(u.to));if(u.item&&h)if(u.node.firstChild.to>=a||l.from>0&&!/[^\s>]/.test(r.lineAt(l.from-1).text)){let b=c.length>1?c[c.length-2]:null,A,g="";b&&b.item?(A=l.from+b.from,g=b.marker(r,1)):A=l.from+(b?b.to:0);let v=[{from:A,to:a,insert:g}];return u.node.name=="OrderedList"&&Bm(u.item,r,v,-2),b&&b.node.name=="OrderedList"&&Bm(b.item,r,v),{range:ve.cursor(A+g.length),changes:v}}else{let b="";for(let A=0,g=c.length-2;A<=g;A++)b+=c[A].blank(A<g);return b+=n.lineBreak,{range:ve.cursor(a+b.length),changes:{from:l.from,insert:b}}}if(u.node.name=="Blockquote"&&h&&l.from){let b=r.lineAt(l.from-1),A=/>\s*$/.exec(b.text);if(A&&A.index==u.from){let g=n.changes([{from:b.from+A.index,to:b.to},{from:l.from+u.from,to:l.to}]);return{range:o.map(g),changes:g}}}let f=[];u.node.name=="OrderedList"&&Bm(u.item,r,f);let p=n.lineBreak,d=u.item&&u.item.from<l.from;if(!d||/^[\s\d.)\-+*>]*/.exec(l.text)[0].length>=u.to)for(let b=0,A=c.length-1;b<=A;b++)p+=b==A&&!d?c[b].marker(r,1):c[b].blank();let m=a;for(;m>l.from&&/\s/.test(l.text.charAt(m-l.from-1));)m--;return f.push({from:m,to:a,insert:p}),{range:ve.cursor(m+p.length),changes:f}});return i?!1:(e(n.update(s,{scrollIntoView:!0,userEvent:"input"})),!0)};function W_(n){return n.name=="QuoteMark"||n.name=="ListMark"}function yz(n,e){let t=n.resolveInner(e,-1),r=e;W_(t)&&(r=t.from,t=t.parent);for(let i;i=t.childBefore(r);)if(W_(i))r=i.from;else if(i.name=="OrderedList"||i.name=="BulletList")t=i.lastChild,r=t.to;else break;return t}const Oz=({state:n,dispatch:e})=>{let t=Lt(n),r=null,i=n.changeByRange(s=>{let o=s.from,{doc:a}=n;if(s.empty&&Q2.isActiveAt(n,s.from)){let l=a.lineAt(o),c=P2(yz(t,o),l.text,a);if(c.length){let u=c[c.length-1],h=u.to-u.spaceAfter.length+(u.spaceAfter?1:0);if(o-l.from>h&&!/\S/.test(l.text.slice(h,o-l.from)))return{range:ve.cursor(l.from+h),changes:{from:l.from+h,to:o}};if(o-l.from==h){let f=l.from+u.from;if(u.item&&u.node.from<u.item.from&&/\S/.test(l.text.slice(u.from,u.to)))return{range:s,changes:{from:f,to:l.from+u.to,insert:u.blank()}};if(f<o)return{range:ve.cursor(f),changes:{from:f,to:o}}}}}return r={range:s}});return r?!1:(e(n.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},bz=[{key:"Enter",run:gz},{key:"Backspace",run:Oz}],U_=hz({matchClosingTags:!1});function vz(n={}){let{codeLanguages:e,defaultCodeLanguage:t,addKeymap:r=!0,base:{parser:i}=dz}=n;if(!(i instanceof vd))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let s=n.extensions?[n.extensions]:[],o=[U_.support],a;t instanceof dc?(o.push(t.support),a=t.language):t&&(a=t);let l=e||a?mz(e,a):void 0;return s.push(nU({codeParser:l,htmlParser:U_.language.parser})),r&&o.push(bo.high(vo.of(bz))),new dc(DO(i.configure(s)),o)}const Sh=()=>{const n=Sn(Vn);for(let e=1;e<1e4;e++)if(!n.chapters.has(String(e)))return String(e);return 1e4},By=({spacelines:n=2,key:e,title:t="",group:r="",flags:i=[],content:s})=>{let o=`
`.repeat(n);return o+=t?`### ${t} {#${e}}`:`### ${e}`,i&&i.length>0&&(o+=`
`+i.map(a=>`![][flag-${a}]`).join(" ")),r&&(o+=`
[group]:<> ("${r}")`),s&&(o+=`
${s}`),o},wz=n=>(n>0||String(n)==="0")&&Math.floor(n)===+n,L2=n=>{const e=Sn(Ua),t=Sn(Vn);if(!wz(n))return t.chapters.get(String(e)).contentEnd;const r=Math.floor(n);for(let i=r;i>=0;i--)if(t.chapters.has(String(i)))return t.chapters.get(String(i)).contentEnd;for(let i=r;i<1e4;i++)if(t.chapters.has(String(i)))return t.chapters.get(String(i)).start-1;return t.chapters.get(String(e))},gf=(n,e)=>{At.flush();const t=ht().state.doc.line(L2(n)+1).to;console.log("index",t),ht().dispatch({changes:{from:t,to:t,insert:`
`+e}}),At.flush()},El=[],LO=Nt(!1),Oa=(n,e=!0)=>{const t=ht(),r=Sn(Vn),i=Sn(Ua);r.chapters.has(n)||(gf(n,By({key:n,group:i?r.chapters.get(i).group:""})),At.flush()),e&&(El.push(i),LO.set(!0)),Nr.set(!1),t.dispatch({selection:{anchor:t.state.doc.line(r.chapters.get(n).contentEnd+1).to},effects:[We.scrollIntoView(t.state.doc.line(r.chapters.get(n).contentStart+1).to,{y:"start",yMargin:20})]}),t.focus()},Az=()=>{El.length!=0&&(El.length==1&&LO.set(!1),console.log(El.length),Oa(El.pop(),!1))},N2="main-editor",Ao=H0(10,{from:0,to:0}),Ku=Me.mark({class:"cm-mage-workinglink"}),Ju=Me.mark({class:"cm-mage-brokenlink"}),_z=Me.mark({class:"cm-mage-code"}),xz=Me.mark({class:"cm-mage-heading"}),kz=Me.mark({class:"cm-mage-booktitle"}),Sz=Me.mark({class:"cm-mage-group"}),Tz=Me.mark({class:"cm-mage-flag"}),Ez=Me.mark({class:"cm-mage-HTMLi"}),Cz=Me.mark({class:"cm-mage-HTMLb"}),Iz=Me.mark({class:"cm-mage-HTMLu"}),Cl=n=>n.includes("(#")?n.substring(n.indexOf("(#")+2,n.lastIndexOf(")")).trim():n.substring(n.indexOf("[")+1,n.indexOf("]")).trim(),z_=n=>{let e=[];for(let{from:t,to:r}of n.visibleRanges)Lt(n.state).iterate({from:t,to:r,enter:i=>{if(i.name=="Link"){const s=n.state.doc.sliceString(i.from,i.to);if(s==="[group]")e.push(Sz.range(i.from,i.to));else if(Oi.properties.disableShortLinks=="true"){if(s.includes("(#")){const o=Cl(s),a=Oi.chapters.has(o)?Ku:Ju;e.push(a.range(i.from,i.to))}}else{const o=s.indexOf("][");if(o!=-1){const a=Cl(s.substring(0,o+1)),l=Oi.chapters.has(a)?Ku:Ju;e.push(l.range(i.from,i.from+o+1));const c=Cl(s.substring(o+1)),u=Oi.chapters.has(c)?Ku:Ju;e.push(u.range(i.from+o+1,i.to))}else{const a=Cl(s),l=Oi.chapters.has(a)?Ku:Ju;e.push(l.range(i.from,i.to))}}}else if(i.name=="ATXHeading1")e.push(kz.range(i.from,i.to));else if(i.name=="ATXHeading3")e.push(xz.range(i.from,i.to));else if(i.name=="InlineCode"||i.name=="FencedCode")e.push(_z.range(i.from,i.to));else if(i.name=="Image")n.state.doc.sliceString(i.from,i.to).includes("][flag-")&&e.push(Tz.range(i.from,i.to));else if(i.name=="HTMLTag"){const s=n.state.doc.sliceString(i.from,i.to);s=="<i>"||s=="</i>"?e.push(Ez.range(i.from,i.to)):s=="<b>"||s=="</b>"?e.push(Cz.range(i.from,i.to)):(s=="<u>"||s=="</u>")&&e.push(Iz.range(i.from,i.to))}}});return Me.set(e)},Rz=Zt.fromClass(class{constructor(n){xw(this,"decorations");this.decorations=z_(n)}update(n){Ao.lazySet(n.view.state.selection.main),(n.docChanged||n.viewportChanged)&&(At.set(n.view.state.doc.toString()),this.decorations=z_(n.view))}},{decorations:n=>n.decorations,eventHandlers:{mousedown:(n,e)=>{let t=n.target;if(t.classList.contains("tok-link")&&(t=t.parentElement),t.classList.contains("cm-mage-workinglink")||t.classList.contains("cm-mage-brokenlink")){const r=Cl(t.innerText.trim());return Oa(r),n.preventDefault(),n.stopPropagation(),!1}}}}),B2=n=>{const e=[F9,fE(),vz(),_8(),We.lineWrapping,cO(AW),We.contentAttributes.of({spellcheck:"true"}),Rz,vo.of([...EC,wu(Hi({},pO[1]),{key:"Mod-Shift-z"})])],t=new We({doc:n,parent:document.getElementById(N2),extensions:e});return window.editor=t,window.$bookIndex=Oi,[t,e]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke=function(n,e){if(!n)throw Ba(e)},Ba=function(n){return new Error("Firebase Database ("+M2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Qz=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},NO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(t[u],t[h],t[f],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Qz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw Error();const f=s<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const d=c<<6&192|h;r.push(d)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},F2=function(n){const e=$2(n);return NO.encodeByteArray(e,!0)},yf=function(n){return F2(n).replace(/\./g,"")},j_=function(n){try{return NO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(n){return Oc(void 0,n)}function Oc(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Dz(t)||(n[t]=Oc(n[t],e[t]));return n}function Dz(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[yf(JSON.stringify(t)),yf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W2(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nz())}function Bz(){return typeof self=="object"&&self.self===self}function Mz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U2(){return M2.NODE_ADMIN===!0}function $z(){return typeof indexedDB=="object"}function Fz(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz="FirebaseError";class _d extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Wz,Object.setPrototypeOf(this,_d.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xd.prototype.create)}}class xd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Uz(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new _d(i,a,r)}}function Uz(n,e){return n.replace(zz,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n){return JSON.parse(n)}function tn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=bc(j_(s[0])||""),t=bc(j_(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}},jz=function(n){const e=z2(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Hz=function(n){const e=z2(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function co(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function My(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Of(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function $y(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(H_(s)&&H_(o)){if(!$y(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function H_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)r[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const f=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Xz(n,e){const t=new Yz(n,e);return t.subscribe.bind(t)}class Yz{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Zz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Mm),i.error===void 0&&(i.error=Mm),i.complete===void 0&&(i.complete=Mm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zz(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mm(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke=function(n,e,t,r){let i;if(r<e?i="at least "+e:r>t&&(i=t===0?"none":"no more than "+t),i){const s=n+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Gn(n,e){return`${n} failed: ${e} argument `}function hn(n,e,t,r){if(!(r&&!t)&&typeof t!="function")throw new Error(Gn(n,e)+"must be a valid function.")}function G_(n,e,t,r){if(!(r&&!t)&&(typeof t!="object"||t===null))throw new Error(Gn(n,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ke(r<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},kd=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(n){return n&&n._delegate?n._delegate:n}class Ss{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Un;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jz(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(!!r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kz(n){return n===Ws?void 0:n}function Jz(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new j2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=[];var _t;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_t||(_t={}));const G2={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},ej=_t.INFO,tj={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},nj=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=tj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sd{constructor(e){this.name=e,this._logLevel=ej,this._logHandler=nj,this._userLogHandler=null,BO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...e),this._logHandler(this,_t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...e),this._logHandler(this,_t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...e),this._logHandler(this,_t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...e),this._logHandler(this,_t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...e),this._logHandler(this,_t.ERROR,...e)}}function rj(n){BO.forEach(e=>{e.setLogLevel(n)})}function ij(n,e){for(const t of BO){let r=null;e&&e.level&&(r=G2[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r!=null?r:i.logLevel)&&n({level:_t[s].toLowerCase(),message:a,args:o,type:i.name})}}}const sj=(n,e)=>e.some(t=>n instanceof t);let V_,X_;function oj(){return V_||(V_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aj(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V2=new WeakMap,Fy=new WeakMap,X2=new WeakMap,$m=new WeakMap,MO=new WeakMap;function lj(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(hs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&V2.set(t,n)}).catch(()=>{}),MO.set(e,n),e}function cj(n){if(Fy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Fy.set(n,e)}let Wy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Fy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||X2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uj(n){Wy=n(Wy)}function hj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Fm(this),e,...t);return X2.set(r,e.sort?e.sort():[e]),hs(r)}:aj().includes(n)?function(...e){return n.apply(Fm(this),e),hs(V2.get(this))}:function(...e){return hs(n.apply(Fm(this),e))}}function fj(n){return typeof n=="function"?hj(n):(n instanceof IDBTransaction&&cj(n),sj(n,oj())?new Proxy(n,Wy):n)}function hs(n){if(n instanceof IDBRequest)return lj(n);if($m.has(n))return $m.get(n);const e=fj(n);return e!==n&&($m.set(n,e),MO.set(e,n)),e}const Fm=n=>MO.get(n);function dj(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=hs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(hs(o.result),l.oldVersion,l.newVersion,hs(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const pj=["get","getKey","getAll","getAllKeys","count"],mj=["put","add","delete","clear"],Wm=new Map;function Y_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Wm.get(e))return Wm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=mj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pj.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return Wm.set(e,s),s}uj(n=>wu(Hi({},n),{get:(e,t,r)=>Y_(e,t)||n.get(e,t,r),has:(e,t)=>!!Y_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yj(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function yj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uy="@firebase/app",Z_="0.7.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new Sd("@firebase/app"),Oj="@firebase/app-compat",bj="@firebase/analytics-compat",vj="@firebase/analytics",wj="@firebase/app-check-compat",Aj="@firebase/app-check",_j="@firebase/auth",xj="@firebase/auth-compat",kj="@firebase/database",Sj="@firebase/database-compat",Tj="@firebase/functions",Ej="@firebase/functions-compat",Cj="@firebase/installations",Ij="@firebase/installations-compat",Rj="@firebase/messaging",Qj="@firebase/messaging-compat",Pj="@firebase/performance",Dj="@firebase/performance-compat",Lj="@firebase/remote-config",Nj="@firebase/remote-config-compat",Bj="@firebase/storage",Mj="@firebase/storage-compat",$j="@firebase/firestore",Fj="@firebase/firestore-compat",Wj="firebase",Uj="9.8.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]",zj={[Uy]:"fire-core",[Oj]:"fire-core-compat",[vj]:"fire-analytics",[bj]:"fire-analytics-compat",[Aj]:"fire-app-check",[wj]:"fire-app-check-compat",[_j]:"fire-auth",[xj]:"fire-auth-compat",[kj]:"fire-rtdb",[Sj]:"fire-rtdb-compat",[Tj]:"fire-fn",[Ej]:"fire-fn-compat",[Cj]:"fire-iid",[Ij]:"fire-iid-compat",[Rj]:"fire-fcm",[Qj]:"fire-fcm-compat",[Pj]:"fire-perf",[Dj]:"fire-perf-compat",[Lj]:"fire-rc",[Nj]:"fire-rc-compat",[Bj]:"fire-gcs",[Mj]:"fire-gcs-compat",[$j]:"fire-fst",[Fj]:"fire-fst-compat","fire-js":"fire-js",[Wj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Map,vc=new Map;function bf(n,e){try{n.container.addComponent(e)}catch(t){$O.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Y2(n,e){n.container.addOrOverwriteComponent(e)}function ba(n){const e=n.name;if(vc.has(e))return $O.debug(`There were multiple attempts to register component ${e}.`),!1;vc.set(e,n);for(const t of Ts.values())bf(t,n);return!0}function Z2(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jj(n,e,t=uo){Z2(n,e).clearInstance(t)}function Hj(){vc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},Es=new xd("app","Firebase",Gj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=Uj;function q2(n,e={}){typeof e!="object"&&(e={name:e});const t=Object.assign({name:uo,automaticDataCollectionEnabled:!1},e),r=t.name;if(typeof r!="string"||!r)throw Es.create("bad-app-name",{appName:String(r)});const i=Ts.get(r);if(i){if($y(n,i.options)&&$y(t,i.config))return i;throw Es.create("duplicate-app",{appName:r})}const s=new H2(r);for(const a of vc.values())s.addComponent(a);const o=new Vj(n,t,s);return Ts.set(r,o),o}function Xj(n=uo){const e=Ts.get(n);if(!e)throw Es.create("no-app",{appName:n});return e}function Yj(){return Array.from(Ts.values())}async function K2(n){const e=n.name;Ts.has(e)&&(Ts.delete(e),await Promise.all(n.container.getProviders().map(t=>t.delete())),n.isDeleted=!0)}function fs(n,e,t){var r;let i=(r=zj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$O.warn(a.join(" "));return}ba(new Ss(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function J2(n,e){if(n!==null&&typeof n!="function")throw Es.create("invalid-log-argument");ij(n,e)}function eI(n){rj(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="firebase-heartbeat-database",qj=1,wc="firebase-heartbeat-store";let Um=null;function tI(){return Um||(Um=dj(Zj,qj,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(wc)}}}).catch(n=>{throw Es.create("storage-open",{originalErrorMessage:n.message})})),Um}async function Kj(n){var e;try{return(await tI()).transaction(wc).objectStore(wc).get(nI(n))}catch(t){throw Es.create("storage-get",{originalErrorMessage:(e=t)===null||e===void 0?void 0:e.message})}}async function q_(n,e){var t;try{const i=(await tI()).transaction(wc,"readwrite");return await i.objectStore(wc).put(e,nI(n)),i.done}catch(r){throw Es.create("storage-set",{originalErrorMessage:(t=r)===null||t===void 0?void 0:t.message})}}function nI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=1024,eH=30*24*60*60*1e3;class tH{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rH(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=K_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=eH}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=K_(),{heartbeatsToSend:t,unsentEntries:r}=nH(this._heartbeatsCache.heartbeats),i=yf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function K_(){return new Date().toISOString().substring(0,10)}function nH(n,e=Jj){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),J_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),J_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class rH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $z()?Fz().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Kj(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return q_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return q_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function J_(n){return yf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(n){ba(new Ss("platform-logger",e=>new gj(e),"PRIVATE")),ba(new Ss("heartbeat",e=>new tH(e),"PRIVATE")),fs(Uy,Z_,n),fs(Uy,Z_,"esm2017"),fs("fire-js","")}iH("");var sH=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:FO,_DEFAULT_ENTRY_NAME:uo,_addComponent:bf,_addOrOverwriteComponent:Y2,_apps:Ts,_clearComponents:Hj,_components:vc,_getProvider:Z2,_registerComponent:ba,_removeServiceInstance:jj,deleteApp:K2,getApp:Xj,getApps:Yj,initializeApp:q2,onLog:J2,registerVersion:fs,setLogLevel:eI,FirebaseError:_d},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e,t){this._delegate=e,this.firebase=t,bf(e,new Ss("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),K2(this._delegate)))}_getService(e,t=uo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=uo){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){bf(this._delegate,e)}_addOrOverwriteComponent(e){Y2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},ex=new xd("app-compat","Firebase",aH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:fs,setLogLevel:eI,onLog:J2,apps:null,SDK_VERSION:FO,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:sH}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||uo,!ar(e,c))throw ex.create("no-app",{appName:c});return e[c]}i.App=n;function s(c,u={}){const h=q2(c,u);if(ar(e,h.name))return e[h.name];const f=new n(h,t);return e[h.name]=f,f}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,h=u.replace("-compat","");if(ba(c)&&c.type==="PUBLIC"){const f=(p=i())=>{if(typeof p[h]!="function")throw ex.create("invalid-app-argument",{appName:u});return p[h]()};c.serviceProps!==void 0&&Oc(f,c.serviceProps),t[h]=f,n.prototype[h]=function(...p){return this._getService.bind(this,u).apply(this,c.multipleInstances?p:[])}}return c.type==="PUBLIC"?t[h]:null}function l(c,u){return u==="serverAuth"?null:u}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){const n=lH(oH);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:rI,extendNamespace:e,createSubscribe:Xz,ErrorFactory:xd,deepExtend:Oc});function e(t){Oc(n,t)}return n}const cH=rI();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Sd("@firebase/app-compat"),uH="@firebase/app-compat",hH="0.1.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(n){fs(uH,hH,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Bz()&&self.firebase!==void 0){tx.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&tx.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Ac=cH;fH();var dH="firebase",pH="9.8.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ac.registerVersion(dH,pH,"app-compat");const nx="@firebase/database",rx="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iI="";function sI(n){iI=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),tn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:bc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ar(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=function(n){try{if(typeof window!="undefined"&&typeof window[n]!="undefined"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mH(e)}}catch{}return new gH},Zs=oI("localStorage"),zy=oI("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new Sd("@firebase/database"),aI=function(){let n=1;return function(){return n++}}(),lI=function(n){const e=qz(n),t=new Vz;t.update(e);const r=t.digest();return NO.encodeByteArray(r)},qc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=qc.apply(null,r):typeof r=="object"?e+=tn(r):e+=r,e+=" "}return e};let to=null,ix=!0;const cI=function(n,e){ke(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Ko.logLevel=_t.VERBOSE,to=Ko.log.bind(Ko),e&&zy.set("logging_enabled",!0)):typeof n=="function"?to=n:(to=null,zy.remove("logging_enabled"))},dn=function(...n){if(ix===!0&&(ix=!1,to===null&&zy.get("logging_enabled")===!0&&cI(!0)),to){const e=qc.apply(null,n);to(e)}},Kc=function(n){return function(...e){dn(n,...e)}},jy=function(...n){const e="FIREBASE INTERNAL ERROR: "+qc(...n);Ko.error(e)},ri=function(...n){const e=`FIREBASE FATAL ERROR: ${qc(...n)}`;throw Ko.error(e),new Error(e)},In=function(...n){const e="FIREBASE WARNING: "+qc(...n);Ko.warn(e)},yH=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&In("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Td=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},OH=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ni="[MIN_NAME]",ii="[MAX_NAME]",_o=function(n,e){if(n===e)return 0;if(n===Ni||e===ii)return-1;if(e===Ni||n===ii)return 1;{const t=vf(n),r=vf(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},bH=function(n,e){return n===e?0:n<e?-1:1},pl=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+tn(e))},WO=function(n){if(typeof n!="object"||n===null)return tn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=tn(e[r]),t+=":",t+=WO(n[e[r]]);return t+="}",t},uI=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const hI=function(n){ke(!Td(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let i,s,o,a,l;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));const c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},vH=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},wH=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function AH(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}const _H=new RegExp("^-?(0*)\\d{1,10}$"),fI=-2147483648,UO=2147483647,vf=function(n){if(_H.test(n)){const e=Number(n);if(e>=fI&&e<=UO)return e}return null},Ma=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw In("Exception was thrown by user callback.",t),e},Math.floor(0))}},xH=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ul=function(n,e){const t=setTimeout(n,e);return typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){In(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',In(e)}}class Jo{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Jo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="5",dI="v",pI="s",mI="r",gI="f",yI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,OI="ls",bI="p",Hy="ac",vI="websocket",wI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t,r,i,s=!1,o="",a=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function TH(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function _I(n,e,t){ke(typeof e=="string","typeof type must == string"),ke(typeof t=="object","typeof params must == object");let r;if(e===vI)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===wI)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);TH(n)&&(t.ns=n.namespace);const i=[];return mn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(){this.counters_={}}incrementCounter(e,t=1){ar(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Pz(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm={},jm={};function jO(n){const e=n.toString();return zm[e]||(zm[e]=new EH),zm[e]}function CH(n,e){const t=n.toString();return jm[t]||(jm[t]=e()),jm[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ma(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="start",RH="close",QH="pLPCommand",PH="pRTLPCB",xI="id",kI="pw",SI="ser",DH="cb",LH="seg",NH="ts",BH="d",MH="dframe",TI=1870,EI=30,$H=TI-EI,FH=25e3,WH=3e4;class os{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kc(e),this.stats_=jO(t),this.urlFn=l=>(this.appCheckToken&&(l[Hy]=this.appCheckToken),_I(t,wI,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new IH(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(WH)),OH(()=>{if(this.isClosed_)return;this.scriptTagHolder=new HO((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===sx)this.id=a,this.password=l;else if(o===RH)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[sx]="t",r[SI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[DH]=this.scriptTagHolder.uniqueCallbackIdentifier),r[dI]=zO,this.transportSessionId&&(r[pI]=this.transportSessionId),this.lastSessionId&&(r[OI]=this.lastSessionId),this.applicationId&&(r[bI]=this.applicationId),this.appCheckToken&&(r[Hy]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&yI.test(location.hostname)&&(r[mI]=gI);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){os.forceAllow_=!0}static forceDisallow(){os.forceDisallow_=!0}static isAvailable(){return os.forceAllow_?!0:!os.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!vH()&&!wH()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=F2(t),i=uI(r,$H);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[MH]="t",r[xI]=e,r[kI]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=tn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class HO{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=aI(),window[QH+this.uniqueCallbackIdentifier]=e,window[PH+this.uniqueCallbackIdentifier]=t,this.myIFrame=HO.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){dn("frame writing exception"),a.stack&&dn(a.stack),dn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[xI]=this.myID,e[kI]=this.myPW,e[SI]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+EI+r.length<=TI;){const o=this.pendingSegs.shift();r=r+"&"+LH+i+"="+o.seg+"&"+NH+i+"="+o.ts+"&"+BH+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(FH)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH=16384,zH=45e3;let wf=null;typeof MozWebSocket!="undefined"?wf=MozWebSocket:typeof WebSocket!="undefined"&&(wf=WebSocket);class gr{constructor(e,t,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kc(this.connId),this.stats_=jO(t),this.connURL=gr.connectionURL_(t,o,a,i,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,i,s){const o={};return o[dI]=zO,typeof location!="undefined"&&location.hostname&&yI.test(location.hostname)&&(o[mI]=gI),t&&(o[pI]=t),r&&(o[OI]=r),i&&(o[Hy]=i),s&&(o[bI]=s),_I(e,vI,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zs.set("previous_websocket_failure",!0);try{let r;U2(),this.mySock=new wf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){gr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&wf!==null&&!gr.forceDisallow_}static previouslyFailed(){return Zs.isInMemoryStorage||Zs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=bc(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ke(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=uI(t,UH);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(zH))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}gr.responsesRequiredToBeHealthy=2;gr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[os,gr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=gr&&gr.isAvailable();let r=t&&!gr.previouslyFailed();if(e.webSocketOnly&&(t||In("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[gr];else{const i=this.transports_=[];for(const s of va.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);va.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}va.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH=6e4,HH=5e3,GH=10*1024,VH=100*1024,Hm="t",ox="d",XH="s",ax="r",YH="e",lx="o",cx="a",ux="n",hx="p",ZH="h";class qH{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kc("c:"+this.id+":"),this.transportManager_=new va(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ul(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>VH?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>GH?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Hm in e){const t=e[Hm];t===cx?this.upgradeIfSecondaryHealthy_():t===ax?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===lx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=pl("t",e),r=pl("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:hx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ux,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=pl("t",e),r=pl("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=pl(Hm,e);if(ox in e){const r=e[ox];if(t===ZH)this.onHandshake_(r);else if(t===ux){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===XH?this.onConnectionShutdown_(r):t===ax?this.onReset_(r):t===YH?jy("Server Error: "+r):t===lx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),zO!==r&&In("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ul(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(jH))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ul(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(HH))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:hx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.allowedEvents_=e,this.listeners_={},ke(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ke(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends II{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!W2()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Af}getInitialEvent(e){return ke(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=32,dx=768;class bt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function dt(){return new bt("")}function rt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Cs(n){return n.pieces_.length-n.pieceNum_}function xt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bt(n.pieces_,e)}function GO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function KH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function _c(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function RI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bt(e,0)}function Wt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof bt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new bt(t,0)}function it(n){return n.pieceNum_>=n.pieces_.length}function Bn(n,e){const t=rt(n),r=rt(e);if(t===null)return e;if(t===r)return Bn(xt(n),xt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function JH(n,e){const t=_c(n,0),r=_c(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=_o(t[i],r[i]);if(s!==0)return s}return t.length===r.length?0:t.length<r.length?-1:1}function VO(n,e){if(Cs(n)!==Cs(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function vr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Cs(n)>Cs(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class eG{constructor(e,t){this.errorPrefix_=t,this.parts_=_c(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=kd(this.parts_[r]);QI(this)}}function tG(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=kd(e),QI(n)}function nG(n){const e=n.parts_.pop();n.byteLength_-=kd(e),n.parts_.length>0&&(n.byteLength_-=1)}function QI(n){if(n.byteLength_>dx)throw new Error(n.errorPrefix_+"has a key path longer than "+dx+" bytes ("+n.byteLength_+").");if(n.parts_.length>fx)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fx+") or object contains a cycle "+Us(n))}function Us(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO extends II{constructor(){super(["visible"]);let e,t;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(t="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new XO}getInitialEvent(e){return ke(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=1e3,rG=60*5*1e3,iG=3*1e3,px=30*1e3,sG=1.3,oG=3e4,aG="server_kill",mx=3;class Ei extends CI{constructor(e,t,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ei.nextPersistentConnectionId_++,this.log_=Kc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ml,this.maxReconnectDelay_=rG,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!U2())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");XO.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Af.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const i=++this.requestNumber_,s={r:i,a:e,b:t};this.log_(tn(s)),ke(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const t=new Un,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:o=>{const a=o.d;o.s==="ok"?(this.onDataUpdate_(r.p,a,!1,null),t.resolve(a)):t.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const o=this.outstandingGets_[s];o===void 0||i!==o||(delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),t.reject(new Error("Client is offline.")))},iG),this.connected_&&this.sendGet_(s),t.promise}listen(e,t,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ke(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ke(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Ei.warnOnListenWarnings_(l,t),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ar(e,"w")){const r=co(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();In(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Hz(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=px)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=jz(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ke(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,t)}sendUnlisten_(e,t,r,i){this.log_("Unlisten on "+e+" for "+t);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,i){const s={p:t,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,t,r,i){this.putInternal("p",e,t,r,i)}merge(e,t,r,i){this.putInternal("m",e,t,r,i)}putInternal(e,t,r,i,s){this.initConnection_();const o={p:t,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+tn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):jy("Unrecognized action received from server: "+tn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ke(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ml,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ml,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>oG&&(this.reconnectDelay_=ml),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sG)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ei.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){ke(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new qH(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,p=>{In(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(aG)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&In(h),l())}}}interrupt(e){dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],My(this.interruptReasons_)&&(this.reconnectDelay_=ml,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(s=>WO(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const r=new bt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(t),s.delete(t),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,t){dn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=mx&&(this.reconnectDelay_=px,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){dn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=mx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+iI.replace(/\./g,"-")]=1,W2()?e["framework.cordova"]=1:Mz()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Af.getInstance().currentlyOnline();return My(this.interruptReasons_)&&e}}Ei.nextPersistentConnectionId_=0;Ei.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new at(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new at(Ni,e),i=new at(Ni,t);return this.compare(r,i)!==0}minPost(){return at.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh;class PI extends Ed{static get __EMPTY_NODE(){return eh}static set __EMPTY_NODE(e){eh=e}compare(e,t){return _o(e.name,t.name)}isDefinedOn(e){throw Ba("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return at.MIN}maxPost(){return new at(ii,eh)}makePost(e,t){return ke(typeof e=="string","KeyIndex indexValue must always be a string."),new at(e,eh)}toString(){return".key"}}const ti=new PI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class fn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r!=null?r:fn.RED,this.left=i!=null?i:jn.EMPTY_NODE,this.right=s!=null?s:jn.EMPTY_NODE}copy(e,t,r,i,s){return new fn(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return jn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,i;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return jn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}fn.RED=!0;fn.BLACK=!1;class lG{copy(e,t,r,i,s){return this}insert(e,t,r){return new fn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class jn{constructor(e,t=jn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new jn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fn.BLACK,null,null))}remove(e){return new jn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new th(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new th(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new th(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new th(this.root_,null,this.comparator_,!0,e)}}jn.EMPTY_NODE=new lG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(n,e){return _o(n.name,e.name)}function YO(n,e){return _o(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gy;function uG(n){Gy=n}const DI=function(n){return typeof n=="number"?"number:"+hI(n):"string:"+n},LI=function(n){if(n.isLeafNode()){const e=n.val();ke(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ar(e,".sv"),"Priority must be a string or number.")}else ke(n===Gy||n.isEmpty(),"priority of unexpected type.");ke(n===Gy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gx;class un{constructor(e,t=un.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ke(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),LI(this.priorityNode_)}static set __childrenNodeConstructor(e){gx=e}static get __childrenNodeConstructor(){return gx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new un(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:un.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return it(e)?this:rt(e)===".priority"?this.priorityNode_:un.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:un.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=rt(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ke(r!==".priority"||Cs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,un.__childrenNodeConstructor.EMPTY_NODE.updateChild(xt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+DI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=hI(this.value_):e+=this.value_,this.lazyHash_=lI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===un.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof un.__childrenNodeConstructor?-1:(ke(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,i=un.VALUE_TYPE_ORDER.indexOf(t),s=un.VALUE_TYPE_ORDER.indexOf(r);return ke(i>=0,"Unknown leaf type: "+t),ke(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}un.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NI,BI;function hG(n){NI=n}function fG(n){BI=n}class dG extends Ed{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?_o(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return at.MIN}maxPost(){return new at(ii,new un("[PRIORITY-POST]",BI))}makePost(e,t){const r=NI(e);return new at(t,new un("[PRIORITY-POST]",r))}toString(){return".priority"}}const It=new dG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG=Math.log(2);class mG{constructor(e){const t=s=>parseInt(Math.log(s)/pG,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _f=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let h,f;if(u===0)return null;if(u===1)return h=n[l],f=t?t(h):h,new fn(f,h.node,fn.BLACK,null,null);{const p=parseInt(u/2,10)+l,d=i(l,p),m=i(p+1,c);return h=n[p],f=t?t(h):h,new fn(f,h.node,fn.BLACK,d,m)}},s=function(l){let c=null,u=null,h=n.length;const f=function(d,m){const b=h-d,A=h;h-=d;const g=i(b+1,A),v=n[b],O=t?t(v):v;p(new fn(O,v.node,m,null,g))},p=function(d){c?(c.left=d,c=d):(u=d,c=d)};for(let d=0;d<l.count;++d){const m=l.nextBitIsOne(),b=Math.pow(2,l.count-(d+1));m?f(b,fn.BLACK):(f(b,fn.BLACK),f(b,fn.RED))}return u},o=new mG(n.length),a=s(o);return new jn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm;const Bo={};class xi{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return ke(Bo&&It,"ChildrenNode.ts has not been loaded"),Gm=Gm||new xi({".priority":Bo},{".priority":It}),Gm}get(e){const t=co(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof jn?t:null}hasIndex(e){return ar(this.indexSet_,e.toString())}addIndex(e,t){ke(e!==ti,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(at.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=_f(r,e.getCompare()):a=Bo;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new xi(u,c)}addToIndexes(e,t){const r=Of(this.indexes_,(i,s)=>{const o=co(this.indexSet_,s);if(ke(o,"Missing index implementation for "+s),i===Bo)if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(at.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),_f(a,o.getCompare())}else return Bo;else{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new at(e.name,a))),l.insert(e,e.node)}});return new xi(r,this.indexSet_)}removeFromIndexes(e,t){const r=Of(this.indexes_,i=>{if(i===Bo)return i;{const s=t.get(e.name);return s?i.remove(new at(e.name,s)):i}});return new xi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl;class qe{constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&LI(this.priorityNode_),this.children_.isEmpty()&&ke(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gl||(gl=new qe(new jn(YO),null,xi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gl}updatePriority(e){return this.children_.isEmpty()?this:new qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?gl:t}}getChild(e){const t=rt(e);return t===null?this:this.getImmediateChild(t).getChild(xt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ke(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new at(e,t);let i,s;t.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?gl:this.priorityNode_;return new qe(i,o,s)}}updateChild(e,t){const r=rt(e);if(r===null)return t;{ke(rt(e)!==".priority"||Cs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(xt(e),t);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,i=0,s=!0;if(this.forEachChild(It,(o,a)=>{t[o]=a.val(e),r++,s&&qe.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+DI(this.getPriority().val())+":"),this.forEachChild(It,(t,r)=>{const i=r.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":lI(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new at(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new at(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new at(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,at.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,at.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Jc?-1:0}withIndex(e){if(e===ti||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new qe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ti||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(It),i=t.getIterator(It);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ti?null:this.indexMap_.get(e.toString())}}qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class gG extends qe{constructor(){super(new jn(YO),qe.EMPTY_NODE,xi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qe.EMPTY_NODE}isEmpty(){return!1}}const Jc=new gG;Object.defineProperties(at,{MIN:{value:new at(Ni,qe.EMPTY_NODE)},MAX:{value:new at(ii,Jc)}});PI.__EMPTY_NODE=qe.EMPTY_NODE;un.__childrenNodeConstructor=qe;uG(Jc);fG(Jc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG=!0;function Ht(n,e=null){if(n===null)return qe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ke(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new un(t,Ht(e))}if(!(n instanceof Array)&&yG){const t=[];let r=!1;if(mn(n,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ht(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new at(o,l)))}}),t.length===0)return qe.EMPTY_NODE;const s=_f(t,cG,o=>o.name,YO);if(r){const o=_f(t,It.getCompare());return new qe(s,Ht(e),new xi({".priority":o},{".priority":It}))}else return new qe(s,Ht(e),xi.Default)}else{let t=qe.EMPTY_NODE;return mn(n,(r,i)=>{if(ar(n,r)&&r.substring(0,1)!=="."){const s=Ht(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Ht(e))}}hG(Ht);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO extends Ed{constructor(e){super(),this.indexPath_=e,ke(!it(e)&&rt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?_o(e.name,t.name):s}makePost(e,t){const r=Ht(e),i=qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new at(t,i)}maxPost(){const e=qe.EMPTY_NODE.updateChild(this.indexPath_,Jc);return new at(ii,e)}toString(){return _c(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG extends Ed{compare(e,t){const r=e.node.compareTo(t.node);return r===0?_o(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return at.MIN}maxPost(){return at.MAX}makePost(e,t){const r=Ht(e);return new at(t,r)}toString(){return".value"}}const qO=new OG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Vy="-",MI="z",$I=786,bG=function(){let n=0;const e=[];return function(t){const r=t===n;n=t;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=wa.charAt(t%64),t=Math.floor(t/64);ke(t===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=wa.charAt(e[i]);return ke(o.length===20,"nextPushId: Length should be 20."),o}}(),yx=function(n){if(n===""+UO)return Vy;const e=vf(n);if(e!=null)return""+(e+1);const t=new Array(n.length);for(let o=0;o<t.length;o++)t[o]=n.charAt(o);if(t.length<$I)return t.push(Vy),t.join("");let r=t.length-1;for(;r>=0&&t[r]===MI;)r--;if(r===-1)return ii;const i=t[r],s=wa.charAt(wa.indexOf(i)+1);return t[r]=s,t.slice(0,r+1).join("")},Ox=function(n){if(n===""+fI)return Ni;const e=vf(n);if(e!=null)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return t[t.length-1]===Vy?t.length===1?""+UO:(delete t[t.length-1],t.join("")):(t[t.length-1]=wa.charAt(wa.indexOf(t[t.length-1])-1),t.join("")+MI.repeat($I-t.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(n){return{type:"value",snapshotNode:n}}function Aa(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function xc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function kc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function vG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){ke(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(xc(t,a)):ke(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Aa(t,r)):o.trackChildChange(kc(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(It,(i,s)=>{t.hasChild(i)||r.trackChildChange(xc(i,s))}),t.isLeafNode()||t.forEachChild(It,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(kc(i,s,o))}else r.trackChildChange(Aa(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this.indexedFilter_=new KO(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Sc.getStartPost_(e),this.endPost_=Sc.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,o){return this.matches(new at(t,r))||(r=qe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qe.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(qe.EMPTY_NODE);const s=this;return t.forEachChild(It,(o,a)=>{s.matches(new at(o,a))||(i=i.updateImmediateChild(o,qe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e){this.rangedFilter_=new Sc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new at(t,r))||(r=qe.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=qe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=qe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:l=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(a.name,a.node),o++;else break}}else{i=t.withIndex(this.index_),i=i.updatePriority(qe.EMPTY_NODE);let s,o,a,l;if(this.reverse_){l=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const h=this.index_.getCompare();a=(f,p)=>h(p,f)}else l=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const h=l.getNext();!u&&a(s,h)<=0&&(u=!0),u&&c<this.limit_&&a(h,o)<=0?c++:i=i.updateImmediateChild(h.name,qe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();const a=e;ke(a.numChildren()===this.limit_,"");const l=new at(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const h=a.getImmediateChild(t);let f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,l);if(u&&!r.isEmpty()&&p>=0)return s!=null&&s.trackChildChange(kc(t,r,h)),a.updateImmediateChild(t,r);{s!=null&&s.trackChildChange(xc(t,h));const m=a.updateImmediateChild(t,qe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Aa(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}else return r.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(xc(c.name,c.node)),s.trackChildChange(Aa(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,qe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=It}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ke(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ke(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ni}hasEnd(){return this.endSet_}getIndexEndValue(){return ke(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ke(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ii}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ke(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===It}copy(){const e=new Cd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function AG(n){return n.loadsAllData()?new KO(n.getIndex()):n.hasLimit()?new wG(n):new Sc(n)}function _G(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function xG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function Xy(n,e,t){const r=n.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,t!=null?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function kG(n,e,t){let r;if(n.index_===ti)typeof e=="string"&&(e=yx(e)),r=Xy(n,e,t);else{let i;t==null?i=ii:i=yx(t),r=Xy(n,e,i)}return r.startAfterSet_=!0,r}function Yy(n,e,t){const r=n.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,t!==void 0?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function SG(n,e,t){let r,i;return n.index_===ti?(typeof e=="string"&&(e=Ox(e)),i=Yy(n,e,t)):(t==null?r=Ni:r=Ox(t),i=Yy(n,e,r)),i.endBeforeSet_=!0,i}function Id(n,e){const t=n.copy();return t.index_=e,t}function bx(n){const e={};if(n.isDefault())return e;let t;return n.index_===It?t="$priority":n.index_===qO?t="$value":n.index_===ti?t="$key":(ke(n.index_ instanceof ZO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=tn(t),n.startSet_&&(e.startAt=tn(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+tn(n.indexStartName_))),n.endSet_&&(e.endAt=tn(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+tn(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function vx(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==It&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends CI{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Kc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ke(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=xf.getListenId_(e,r),a={};this.listens_[o]=a;const l=bx(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,r),co(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,t){const r=xf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=bx(e._queryParams),r=e._path.toString(),i=new Un;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Gz(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=bc(a.responseText)}catch{In("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&In("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(){this.rootNode_=qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(){return{value:null,children:new Map}}function $a(n,e,t){if(it(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=rt(e);n.children.has(r)||n.children.set(r,kf());const i=n.children.get(r);e=xt(e),$a(i,e,t)}}function Zy(n,e){if(it(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(It,(r,i)=>{$a(n,new bt(r),i)}),Zy(n,e)}}else if(n.children.size>0){const t=rt(e);return e=xt(e),n.children.has(t)&&Zy(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function qy(n,e,t){n.value!==null?t(e,n.value):EG(n,(r,i)=>{const s=new bt(e.toString()+"/"+r);qy(i,s,t)})}function EG(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&mn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=10*1e3,IG=30*1e3,RG=5*60*1e3;class QG{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new CG(e);const r=wx+(IG-wx)*Math.random();Ul(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;mn(e,(i,s)=>{s>0&&ar(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Ul(this.reportStats_.bind(this),Math.floor(Math.random()*2*RG))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Lr||(Lr={}));function JO(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function eb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tb(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Lr.ACK_USER_WRITE,this.source=JO()}operationForChild(e){if(it(this.path)){if(this.affectedTree.value!=null)return ke(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bt(e));return new Sf(dt(),t,this.revert)}}else return ke(rt(this.path)===e,"operationForChild called for unrelated child."),new Sf(xt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.source=e,this.path=t,this.type=Lr.LISTEN_COMPLETE}operationForChild(e){return it(this.path)?new Tc(this.source,dt()):new Tc(this.source,xt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Lr.OVERWRITE}operationForChild(e){return it(this.path)?new ho(this.source,dt(),this.snap.getImmediateChild(e)):new ho(this.source,xt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Lr.MERGE}operationForChild(e){if(it(this.path)){const t=this.children.subtree(new bt(e));return t.isEmpty()?null:t.value?new ho(this.source,dt(),t.value):new _a(this.source,dt(),t)}else return ke(rt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _a(this.source,xt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(it(e))return this.isFullyInitialized()&&!this.filtered_;const t=rt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function DG(n,e,t,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(vG(o.childName,o.snapshotNode))}),yl(n,i,"child_removed",e,r,t),yl(n,i,"child_added",e,r,t),yl(n,i,"child_moved",s,r,t),yl(n,i,"child_changed",e,r,t),yl(n,i,"value",e,r,t),i}function yl(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>NG(n,a,l)),o.forEach(a=>{const l=LG(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function LG(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function NG(n,e,t){if(e.childName==null||t.childName==null)throw Ba("Should only compare child_ events.");const r=new at(e.childName,e.snapshotNode),i=new at(t.childName,t.snapshotNode);return n.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(n,e){return{eventCache:n,serverCache:e}}function zl(n,e,t,r){return Rd(new Is(e,t,r),n.serverCache)}function WI(n,e,t,r){return Rd(n.eventCache,new Is(e,t,r))}function Tf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function fo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm;const BG=()=>(Vm||(Vm=new jn(bH)),Vm);class Et{constructor(e,t=BG()){this.value=e,this.children=t}static fromObject(e){let t=new Et(null);return mn(e,(r,i)=>{t=t.set(new bt(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:dt(),value:this.value};if(it(e))return null;{const r=rt(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(xt(e),t);return s!=null?{path:Wt(new bt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(it(e))return this;{const t=rt(e),r=this.children.get(t);return r!==null?r.subtree(xt(e)):new Et(null)}}set(e,t){if(it(e))return new Et(t,this.children);{const r=rt(e),s=(this.children.get(r)||new Et(null)).set(xt(e),t),o=this.children.insert(r,s);return new Et(this.value,o)}}remove(e){if(it(e))return this.children.isEmpty()?new Et(null):new Et(null,this.children);{const t=rt(e),r=this.children.get(t);if(r){const i=r.remove(xt(e));let s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new Et(null):new Et(this.value,s)}else return this}}get(e){if(it(e))return this.value;{const t=rt(e),r=this.children.get(t);return r?r.get(xt(e)):null}}setTree(e,t){if(it(e))return t;{const r=rt(e),s=(this.children.get(r)||new Et(null)).setTree(xt(e),t);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Et(this.value,o)}}fold(e){return this.fold_(dt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Wt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,dt(),t)}findOnPath_(e,t,r){const i=this.value?r(t,this.value):!1;if(i)return i;if(it(e))return null;{const s=rt(e),o=this.children.get(s);return o?o.findOnPath_(xt(e),Wt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,dt(),t)}foreachOnPath_(e,t,r){if(it(e))return this;{this.value&&r(t,this.value);const i=rt(e),s=this.children.get(i);return s?s.foreachOnPath_(xt(e),Wt(t,i),r):new Et(null)}}foreach(e){this.foreach_(dt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Wt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.writeTree_=e}static empty(){return new Mr(new Et(null))}}function jl(n,e,t){if(it(e))return new Mr(new Et(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Bn(i,e);return s=s.updateChild(o,t),new Mr(n.writeTree_.set(i,s))}else{const i=new Et(t),s=n.writeTree_.setTree(e,i);return new Mr(s)}}}function Ky(n,e,t){let r=n;return mn(t,(i,s)=>{r=jl(r,Wt(e,i),s)}),r}function Ax(n,e){if(it(e))return Mr.empty();{const t=n.writeTree_.setTree(e,new Et(null));return new Mr(t)}}function Jy(n,e){return xo(n,e)!=null}function xo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Bn(t.path,e)):null}function _x(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(It,(r,i)=>{e.push(new at(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new at(r,i.value))}),e}function ds(n,e){if(it(e))return n;{const t=xo(n,e);return t!=null?new Mr(new Et(t)):new Mr(n.writeTree_.subtree(e))}}function e0(n){return n.writeTree_.isEmpty()}function xa(n,e){return UI(dt(),n.writeTree_,e)}function UI(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ke(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=UI(Wt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Wt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n,e){return GI(e,n)}function MG(n,e,t,r,i){ke(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=jl(n.visibleWrites,e,t)),n.lastWriteId=r}function $G(n,e,t,r){ke(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Ky(n.visibleWrites,e,t),n.lastWriteId=r}function FG(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function WG(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);ke(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&UG(a,r.path)?i=!1:vr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return zG(n),!0;if(r.snap)n.visibleWrites=Ax(n.visibleWrites,r.path);else{const a=r.children;mn(a,l=>{n.visibleWrites=Ax(n.visibleWrites,Wt(r.path,l))})}return!0}else return!1}function UG(n,e){if(n.snap)return vr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&vr(Wt(n.path,t),e))return!0;return!1}function zG(n){n.visibleWrites=zI(n.allWrites,jG,dt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function jG(n){return n.visible}function zI(n,e,t){let r=Mr.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)vr(t,o)?(a=Bn(t,o),r=jl(r,a,s.snap)):vr(o,t)&&(a=Bn(o,t),r=jl(r,dt(),s.snap.getChild(a)));else if(s.children){if(vr(t,o))a=Bn(t,o),r=Ky(r,a,s.children);else if(vr(o,t))if(a=Bn(o,t),it(a))r=Ky(r,dt(),s.children);else{const l=co(s.children,rt(a));if(l){const c=l.getChild(xt(a));r=jl(r,dt(),c)}}}else throw Ba("WriteRecord should have .snap or .children")}}return r}function jI(n,e,t,r,i){if(!r&&!i){const s=xo(n.visibleWrites,e);if(s!=null)return s;{const o=ds(n.visibleWrites,e);if(e0(o))return t;if(t==null&&!Jy(o,dt()))return null;{const a=t||qe.EMPTY_NODE;return xa(o,a)}}}else{const s=ds(n.visibleWrites,e);if(!i&&e0(s))return t;if(!i&&t==null&&!Jy(s,dt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(vr(c.path,e)||vr(e,c.path))},a=zI(n.allWrites,o,e),l=t||qe.EMPTY_NODE;return xa(a,l)}}}function HG(n,e,t){let r=qe.EMPTY_NODE;const i=xo(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(It,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=ds(n.visibleWrites,e);return t.forEachChild(It,(o,a)=>{const l=xa(ds(s,new bt(o)),a);r=r.updateImmediateChild(o,l)}),_x(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ds(n.visibleWrites,e);return _x(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function GG(n,e,t,r,i){ke(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Wt(e,t);if(Jy(n.visibleWrites,s))return null;{const o=ds(n.visibleWrites,s);return e0(o)?i.getChild(t):xa(o,i.getChild(t))}}function VG(n,e,t,r){const i=Wt(e,t),s=xo(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){const o=ds(n.visibleWrites,i);return xa(o,r.getNode().getImmediateChild(t))}else return null}function XG(n,e){return xo(n.visibleWrites,e)}function YG(n,e,t,r,i,s,o){let a;const l=ds(n.visibleWrites,e),c=xo(l,dt());if(c!=null)a=c;else if(t!=null)a=xa(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=f.getNext();for(;p&&u.length<i;)h(p,r)!==0&&u.push(p),p=f.getNext();return u}else return[]}function ZG(){return{visibleWrites:Mr.empty(),allWrites:[],lastWriteId:-1}}function Ef(n,e,t,r){return jI(n.writeTree,n.treePath,e,t,r)}function nb(n,e){return HG(n.writeTree,n.treePath,e)}function xx(n,e,t,r){return GG(n.writeTree,n.treePath,e,t,r)}function Cf(n,e){return XG(n.writeTree,Wt(n.treePath,e))}function qG(n,e,t,r,i,s){return YG(n.writeTree,n.treePath,e,t,r,i,s)}function rb(n,e,t){return VG(n.writeTree,n.treePath,e,t)}function HI(n,e){return GI(Wt(n.treePath,e),n.writeTree)}function GI(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ke(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ke(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,kc(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,xc(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,Aa(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,kc(r,e.snapshotNode,i.oldSnap));else throw Ba("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const VI=new JG;class ib{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Is(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rb(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:fo(this.viewCache_),s=qG(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(n){return{filter:n}}function t7(n,e){ke(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ke(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function n7(n,e,t,r,i){const s=new KG;let o,a;if(t.type===Lr.OVERWRITE){const c=t;c.source.fromUser?o=t0(n,e,c.path,c.snap,r,i,s):(ke(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!it(c.path),o=If(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===Lr.MERGE){const c=t;c.source.fromUser?o=i7(n,e,c.path,c.children,r,i,s):(ke(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=n0(n,e,c.path,c.children,r,i,a,s))}else if(t.type===Lr.ACK_USER_WRITE){const c=t;c.revert?o=a7(n,e,c.path,r,i,s):o=s7(n,e,c.path,c.affectedTree,r,i,s)}else if(t.type===Lr.LISTEN_COMPLETE)o=o7(n,e,t.path,r,s);else throw Ba("Unknown operation type: "+t.type);const l=s.getChanges();return r7(e,o,l),{viewCache:o,changes:l}}function r7(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Tf(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(FI(Tf(e)))}}function XI(n,e,t,r,i,s){const o=e.eventCache;if(Cf(r,t)!=null)return e;{let a,l;if(it(t))if(ke(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=fo(e),u=c instanceof qe?c:qe.EMPTY_NODE,h=nb(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=Ef(r,fo(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=rt(t);if(c===".priority"){ke(Cs(t)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=xx(r,t,u,l);h!=null?a=n.filter.updatePriority(u,h):a=o.getNode()}else{const u=xt(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=xx(r,t,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=rb(r,c,e.serverCache);h!=null?a=n.filter.updateChild(o.getNode(),c,h,u,i,s):a=o.getNode()}}return zl(e,a,o.isFullyInitialized()||it(t),n.filter.filtersNodes())}}function If(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(it(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),p,null)}else{const p=rt(t);if(!l.isCompleteForPath(t)&&Cs(t)>1)return e;const d=xt(t),b=l.getNode().getImmediateChild(p).updateChild(d,r);p===".priority"?c=u.updatePriority(l.getNode(),b):c=u.updateChild(l.getNode(),p,b,d,VI,null)}const h=WI(e,c,l.isFullyInitialized()||it(t),u.filtersNodes()),f=new ib(i,h,s);return XI(n,h,t,i,f,a)}function t0(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new ib(i,e,s);if(it(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=zl(e,c,!0,n.filter.filtersNodes());else{const h=rt(t);if(h===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),r),l=zl(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=xt(t),p=a.getNode().getImmediateChild(h);let d;if(it(f))d=r;else{const m=u.getCompleteChild(h);m!=null?GO(f)===".priority"&&m.getChild(RI(f)).isEmpty()?d=m:d=m.updateChild(f,r):d=qe.EMPTY_NODE}if(p.equals(d))l=e;else{const m=n.filter.updateChild(a.getNode(),h,d,f,u,o);l=zl(e,m,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function kx(n,e){return n.eventCache.isCompleteForChild(e)}function i7(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Wt(t,l);kx(e,rt(u))&&(a=t0(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Wt(t,l);kx(e,rt(u))||(a=t0(n,a,u,c,i,s,o))}),a}function Sx(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function n0(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;it(t)?c=r:c=new Et(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),d=Sx(n,p,f);l=If(n,l,new bt(h),d,i,s,o,a)}}),c.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===void 0;if(!u.hasChild(h)&&!p){const d=e.serverCache.getNode().getImmediateChild(h),m=Sx(n,d,f);l=If(n,l,new bt(h),m,i,s,o,a)}}),l}function s7(n,e,t,r,i,s,o){if(Cf(i,t)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(it(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return If(n,e,t,l.getNode().getChild(t),i,s,a,o);if(it(t)){let c=new Et(null);return l.getNode().forEachChild(ti,(u,h)=>{c=c.set(new bt(u),h)}),n0(n,e,t,c,i,s,a,o)}else return e}else{let c=new Et(null);return r.foreach((u,h)=>{const f=Wt(t,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),n0(n,e,t,c,i,s,a,o)}}function o7(n,e,t,r,i){const s=e.serverCache,o=WI(e,s.getNode(),s.isFullyInitialized()||it(t),s.isFiltered());return XI(n,o,t,r,VI,i)}function a7(n,e,t,r,i,s){let o;if(Cf(r,t)!=null)return e;{const a=new ib(r,e,i),l=e.eventCache.getNode();let c;if(it(t)||rt(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Ef(r,fo(e));else{const h=e.serverCache.getNode();ke(h instanceof qe,"serverChildren would be complete if leaf node"),u=nb(r,h)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=rt(t);let h=rb(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=n.filter.updateChild(l,u,h,xt(t),a,s):e.eventCache.getNode().hasChild(u)?c=n.filter.updateChild(l,u,qe.EMPTY_NODE,xt(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ef(r,fo(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Cf(r,dt())!=null,zl(e,c,o,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new KO(r.getIndex()),s=AG(r);this.processor_=e7(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(qe.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(qe.EMPTY_NODE,a.getNode(),null),u=new Is(l,o.isFullyInitialized(),i.filtersNodes()),h=new Is(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Rd(h,u),this.eventGenerator_=new PG(this.query_)}get query(){return this.query_}}function c7(n){return n.viewCache_.serverCache.getNode()}function u7(n){return Tf(n.viewCache_)}function h7(n,e){const t=fo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!it(e)&&!t.getImmediateChild(rt(e)).isEmpty())?t.getChild(e):null}function Tx(n){return n.eventRegistrations_.length===0}function f7(n,e){n.eventRegistrations_.push(e)}function Ex(n,e,t){const r=[];if(t){ke(e==null,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Cx(n,e,t,r){e.type===Lr.MERGE&&e.source.queryId!==null&&(ke(fo(n.viewCache_),"We should always have a full cache before handling merges"),ke(Tf(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=n7(n.processor_,i,e,t,r);return t7(n.processor_,s.viewCache),ke(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,YI(n,s.changes,s.viewCache.eventCache.getNode(),null)}function d7(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(It,(s,o)=>{r.push(Aa(s,o))}),t.isFullyInitialized()&&r.push(FI(t.getNode())),YI(n,r,t.getNode(),e)}function YI(n,e,t,r){const i=r?[r]:n.eventRegistrations_;return DG(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf;class ZI{constructor(){this.views=new Map}}function p7(n){ke(!Rf,"__referenceConstructor has already been defined"),Rf=n}function m7(){return ke(Rf,"Reference.ts has not been loaded"),Rf}function g7(n){return n.views.size===0}function sb(n,e,t,r){const i=e.source.queryId;if(i!==null){const s=n.views.get(i);return ke(s!=null,"SyncTree gave us an op for an invalid query."),Cx(s,e,t,r)}else{let s=[];for(const o of n.views.values())s=s.concat(Cx(o,e,t,r));return s}}function qI(n,e,t,r,i){const s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Ef(t,i?r:null),l=!1;a?l=!0:r instanceof qe?(a=nb(t,r),l=!1):(a=qe.EMPTY_NODE,l=!1);const c=Rd(new Is(a,l,!1),new Is(r,i,!1));return new l7(e,c)}return o}function y7(n,e,t,r,i,s){const o=qI(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),f7(o,t),d7(o,t)}function O7(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Rs(n);if(i==="default")for(const[l,c]of n.views.entries())o=o.concat(Ex(c,t,r)),Tx(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(Ex(l,t,r)),Tx(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Rs(n)&&s.push(new(m7())(e._repo,e._path)),{removed:s,events:o}}function KI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ps(n,e){let t=null;for(const r of n.views.values())t=t||h7(r,e);return t}function JI(n,e){if(e._queryParams.loadsAllData())return Pd(n);{const r=e._queryIdentifier;return n.views.get(r)}}function eR(n,e){return JI(n,e)!=null}function Rs(n){return Pd(n)!=null}function Pd(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qf;function b7(n){ke(!Qf,"__referenceConstructor has already been defined"),Qf=n}function v7(){return ke(Qf,"Reference.ts has not been loaded"),Qf}let w7=1;class Ix{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Et(null),this.pendingWriteTree_=ZG(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ob(n,e,t,r,i){return MG(n.pendingWriteTree_,e,t,r,i),i?Fa(n,new ho(JO(),e,t)):[]}function A7(n,e,t,r){$G(n.pendingWriteTree_,e,t,r);const i=Et.fromObject(t);return Fa(n,new _a(JO(),e,i))}function as(n,e,t=!1){const r=FG(n.pendingWriteTree_,e);if(WG(n.pendingWriteTree_,e)){let s=new Et(null);return r.snap!=null?s=s.set(dt(),!0):mn(r.children,o=>{s=s.set(new bt(o),!0)}),Fa(n,new Sf(r.path,s,t))}else return[]}function eu(n,e,t){return Fa(n,new ho(eb(),e,t))}function _7(n,e,t){const r=Et.fromObject(t);return Fa(n,new _a(eb(),e,r))}function x7(n,e){return Fa(n,new Tc(eb(),e))}function k7(n,e,t){const r=ab(n,t);if(r){const i=lb(r),s=i.path,o=i.queryId,a=Bn(s,e),l=new Tc(tb(o),a);return cb(n,s,l)}else return[]}function r0(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let o=[];if(s&&(e._queryIdentifier==="default"||eR(s,e))){const a=O7(s,e,t,r);g7(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const l=a.removed;o=a.events;const c=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=n.syncPointTree_.findOnPath(i,(h,f)=>Rs(f));if(c&&!u){const h=n.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=C7(h);for(let p=0;p<f.length;++p){const d=f[p],m=d.query,b=rR(n,d);n.listenProvider_.startListening(Hl(m),Pf(n,m),b.hashFn,b.onComplete)}}}!u&&l.length>0&&!r&&(c?n.listenProvider_.stopListening(Hl(e),null):l.forEach(h=>{const f=n.queryToTagMap.get(Ld(h));n.listenProvider_.stopListening(Hl(h),f)})),I7(n,l)}return o}function S7(n,e,t,r){const i=ab(n,r);if(i!=null){const s=lb(i),o=s.path,a=s.queryId,l=Bn(o,e),c=new ho(tb(a),l,t);return cb(n,o,c)}else return[]}function T7(n,e,t,r){const i=ab(n,r);if(i){const s=lb(i),o=s.path,a=s.queryId,l=Bn(o,e),c=Et.fromObject(t),u=new _a(tb(a),l,c);return cb(n,o,u)}else return[]}function Rx(n,e,t){const r=e._path;let i=null,s=!1;n.syncPointTree_.foreachOnPath(r,(h,f)=>{const p=Bn(h,r);i=i||ps(f,p),s=s||Rs(f)});let o=n.syncPointTree_.get(r);o?(s=s||Rs(o),i=i||ps(o,dt())):(o=new ZI,n.syncPointTree_=n.syncPointTree_.set(r,o));let a;i!=null?a=!0:(a=!1,i=qe.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((f,p)=>{const d=ps(p,dt());d&&(i=i.updateImmediateChild(f,d))}));const l=eR(o,e);if(!l&&!e._queryParams.loadsAllData()){const h=Ld(e);ke(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=R7();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}const c=Qd(n.pendingWriteTree_,r);let u=y7(o,e,t,c,i,a);if(!l&&!s){const h=JI(o,e);u=u.concat(Q7(n,e,h))}return u}function Dd(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=Bn(o,e),c=ps(a,l);if(c)return c});return jI(i,e,s,t,!0)}function E7(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const h=Bn(c,t);r=r||ps(u,h)});let i=n.syncPointTree_.get(t);i?r=r||ps(i,dt()):(i=new ZI,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=r!=null,o=s?new Is(r,!0,!1):null,a=Qd(n.pendingWriteTree_,e._path),l=qI(i,e,a,s?o.getNode():qe.EMPTY_NODE,s);return u7(l)}function Fa(n,e){return tR(e,n.syncPointTree_,null,Qd(n.pendingWriteTree_,dt()))}function tR(n,e,t,r){if(it(n.path))return nR(n,e,t,r);{const i=e.get(dt());t==null&&i!=null&&(t=ps(i,dt()));let s=[];const o=rt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=HI(r,o);s=s.concat(tR(a,l,c,u))}return i&&(s=s.concat(sb(i,n,r,t))),s}}function nR(n,e,t,r){const i=e.get(dt());t==null&&i!=null&&(t=ps(i,dt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=HI(r,o),u=n.operationForChild(o);u&&(s=s.concat(nR(u,a,l,c)))}),i&&(s=s.concat(sb(i,n,r,t))),s}function rR(n,e){const t=e.query,r=Pf(n,t);return{hashFn:()=>(c7(e)||qe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?k7(n,t._path,r):x7(n,t._path);{const s=AH(i,t);return r0(n,t,null,s)}}}}function Pf(n,e){const t=Ld(e);return n.queryToTagMap.get(t)}function Ld(n){return n._path.toString()+"$"+n._queryIdentifier}function ab(n,e){return n.tagToQueryMap.get(e)}function lb(n){const e=n.indexOf("$");return ke(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bt(n.substr(0,e))}}function cb(n,e,t){const r=n.syncPointTree_.get(e);ke(r,"Missing sync point for query tag that we're tracking");const i=Qd(n.pendingWriteTree_,e);return sb(r,t,i,null)}function C7(n){return n.fold((e,t,r)=>{if(t&&Rs(t))return[Pd(t)];{let i=[];return t&&(i=KI(t)),mn(r,(s,o)=>{i=i.concat(o)}),i}})}function Hl(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(v7())(n._repo,n._path):n}function I7(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Ld(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function R7(){return w7++}function Q7(n,e,t){const r=e._path,i=Pf(n,e),s=rR(n,t),o=n.listenProvider_.startListening(Hl(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)ke(!Rs(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!it(c)&&u&&Rs(u))return[Pd(u).query];{let f=[];return u&&(f=f.concat(KI(u).map(p=>p.query))),mn(h,(p,d)=>{f=f.concat(d)}),f}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(Hl(u),Pf(n,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ub(t)}node(){return this.node_}}class hb{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wt(this.path_,e);return new hb(this.syncTree_,t)}node(){return Dd(this.syncTree_,this.path_)}}const P7=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Qx=function(n,e,t){if(!n||typeof n!="object")return n;if(ke(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return D7(n[".sv"],e,t);if(typeof n[".sv"]=="object")return L7(n[".sv"],e);ke(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},D7=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ke(!1,"Unexpected server value: "+n)}},L7=function(n,e,t){n.hasOwnProperty("increment")||ke(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ke(!1,"Unexpected increment value: "+r);const i=e.node();if(ke(i!==null&&typeof i!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},iR=function(n,e,t,r){return db(e,new hb(t,n),r)},fb=function(n,e,t){return db(n,new ub(e),t)};function db(n,e,t){const r=n.getPriority().val(),i=Qx(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=Qx(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new un(a,Ht(i)):n}else{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new un(i))),o.forEachChild(It,(a,l)=>{const c=db(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Nd(n,e){let t=e instanceof bt?e:new bt(e),r=n,i=rt(t);for(;i!==null;){const s=co(r.node.children,i)||{children:{},childCount:0};r=new pb(i,r,s),t=xt(t),i=rt(t)}return r}function ko(n){return n.node.value}function mb(n,e){n.node.value=e,i0(n)}function sR(n){return n.node.childCount>0}function N7(n){return ko(n)===void 0&&!sR(n)}function Bd(n,e){mn(n.node.children,(t,r)=>{e(new pb(t,n,r))})}function oR(n,e,t,r){t&&!r&&e(n),Bd(n,i=>{oR(i,e,!0,r)}),t&&r&&e(n)}function B7(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function tu(n){return new bt(n.parent===null?n.name:tu(n.parent)+"/"+n.name)}function i0(n){n.parent!==null&&M7(n.parent,n.name,n)}function M7(n,e,t){const r=N7(t),i=ar(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,i0(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,i0(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=/[\[\].#$\/\u0000-\u001F\u007F]/,F7=/[\[\].#$\u0000-\u001F\u007F]/,Xm=10*1024*1024,Md=function(n){return typeof n=="string"&&n.length!==0&&!$7.test(n)},aR=function(n){return typeof n=="string"&&n.length!==0&&!F7.test(n)},W7=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aR(n)},Ec=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Td(n)||n&&typeof n=="object"&&ar(n,".sv")},si=function(n,e,t,r){r&&e===void 0||nu(Gn(n,"value"),e,t)},nu=function(n,e,t){const r=t instanceof bt?new eG(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Us(r));if(typeof e=="function")throw new Error(n+"contains a function "+Us(r)+" with contents = "+e.toString());if(Td(e))throw new Error(n+"contains "+e.toString()+" "+Us(r));if(typeof e=="string"&&e.length>Xm/3&&kd(e)>Xm)throw new Error(n+"contains a string greater than "+Xm+" utf8 bytes "+Us(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(mn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Md(o)))throw new Error(n+" contains an invalid key ("+o+") "+Us(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);tG(r,o),nu(n,a,r),nG(r)}),i&&s)throw new Error(n+' contains ".value" child '+Us(r)+" in addition to actual children.")}},U7=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=_c(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Md(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(JH);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&vr(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},lR=function(n,e,t,r){if(r&&e===void 0)return;const i=Gn(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];mn(e,(o,a)=>{const l=new bt(o);if(nu(i,a,Wt(t,l)),GO(l)===".priority"&&!Ec(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),U7(i,s)},gb=function(n,e,t){if(!(t&&e===void 0)){if(Td(e))throw new Error(Gn(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ec(e))throw new Error(Gn(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ru=function(n,e,t,r){if(!(r&&t===void 0)&&!Md(t))throw new Error(Gn(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Cc=function(n,e,t,r){if(!(r&&t===void 0)&&!aR(t))throw new Error(Gn(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},z7=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Cc(n,e,t,r)},wr=function(n,e){if(rt(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},cR=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Md(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!W7(t))throw new Error(Gn(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $d(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();t!==null&&!VO(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function yb(n,e,t){$d(n,t),uR(n,r=>VO(r,e))}function xr(n,e,t){$d(n,t),uR(n,r=>vr(r,e)||vr(e,r))}function uR(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];if(i){const s=i.path;e(s)?(H7(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function H7(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();to&&dn("event: "+t.toString()),Ma(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="repo_interrupt",G7=25;class V7{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new j7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kf(),this.transactionQueueTree_=new pb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function X7(n,e,t){if(n.stats_=jO(n.repoInfo_),n.forceRestClient_||xH())n.server_=new xf(n.repoInfo_,(r,i,s,o)=>{Px(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Dx(n,!0),0);else{if(typeof t!="undefined"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ei(n.repoInfo_,e,(r,i,s,o)=>{Px(n,r,i,s,o)},r=>{Dx(n,r)},r=>{Y7(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=CH(n.repoInfo_,()=>new QG(n.stats_,n.server_)),n.infoData_=new TG,n.infoSyncTree_=new Ix({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=eu(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ob(n,"connected",!1),n.serverSyncTree_=new Ix({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);xr(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function fR(n){const t=n.infoData_.getNode(new bt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function iu(n){return P7({timestamp:fR(n)})}function Px(n,e,t,r,i){n.dataUpdateCount++;const s=new bt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=Of(t,c=>Ht(c));o=T7(n.serverSyncTree_,s,l,i)}else{const l=Ht(t);o=S7(n.serverSyncTree_,s,l,i)}else if(r){const l=Of(t,c=>Ht(c));o=_7(n.serverSyncTree_,s,l)}else{const l=Ht(t);o=eu(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ka(n,s)),xr(n.eventQueue_,a,o)}function Dx(n,e){Ob(n,"connected",e),e===!1&&K7(n)}function Y7(n,e){mn(e,(t,r)=>{Ob(n,t,r)})}function Ob(n,e,t){const r=new bt("/.info/"+e),i=Ht(t);n.infoData_.updateSnapshot(r,i);const s=eu(n.infoSyncTree_,r,i);xr(n.eventQueue_,r,s)}function Fd(n){return n.nextWriteId_++}function Z7(n,e){const t=E7(n.serverSyncTree_,e);return t!=null?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Ht(r).withIndex(e._queryParams.getIndex()),s=eu(n.serverSyncTree_,e._path,i);return yb(n.eventQueue_,e._path,s),Promise.resolve(i)},r=>(Wa(n,"get for query "+tn(e)+" failed: "+r),Promise.reject(new Error(r))))}function bb(n,e,t,r,i){Wa(n,"set",{path:e.toString(),value:t,priority:r});const s=iu(n),o=Ht(t,r),a=Dd(n.serverSyncTree_,e),l=fb(o,a,s),c=Fd(n),u=ob(n.serverSyncTree_,e,l,c,!0);$d(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(f,p)=>{const d=f==="ok";d||In("set at "+e+" failed: "+f);const m=as(n.serverSyncTree_,c,!d);xr(n.eventQueue_,e,m),Qs(n,i,f,p)});const h=wb(n,e);ka(n,h),xr(n.eventQueue_,h,[])}function q7(n,e,t,r){Wa(n,"update",{path:e.toString(),value:t});let i=!0;const s=iu(n),o={};if(mn(t,(a,l)=>{i=!1,o[a]=iR(Wt(e,a),Ht(l),n.serverSyncTree_,s)}),i)dn("update() called with empty data.  Don't do anything."),Qs(n,r,"ok",void 0);else{const a=Fd(n),l=A7(n.serverSyncTree_,e,o,a);$d(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{const h=c==="ok";h||In("update at "+e+" failed: "+c);const f=as(n.serverSyncTree_,a,!h),p=f.length>0?ka(n,e):e;xr(n.eventQueue_,p,f),Qs(n,r,c,u)}),mn(t,c=>{const u=wb(n,Wt(e,c));ka(n,u)}),xr(n.eventQueue_,e,[])}}function K7(n){Wa(n,"onDisconnectEvents");const e=iu(n),t=kf();qy(n.onDisconnect_,dt(),(i,s)=>{const o=iR(i,s,n.serverSyncTree_,e);$a(t,i,o)});let r=[];qy(t,dt(),(i,s)=>{r=r.concat(eu(n.serverSyncTree_,i,s));const o=wb(n,i);ka(n,o)}),n.onDisconnect_=kf(),xr(n.eventQueue_,dt(),r)}function J7(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&Zy(n.onDisconnect_,e),Qs(n,t,r,i)})}function Lx(n,e,t,r){const i=Ht(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&$a(n.onDisconnect_,e,i),Qs(n,r,s,o)})}function eV(n,e,t,r,i){const s=Ht(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&$a(n.onDisconnect_,e,s),Qs(n,i,o,a)})}function tV(n,e,t,r){if(My(t)){dn("onDisconnect().update() called with empty data.  Don't do anything."),Qs(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{i==="ok"&&mn(t,(o,a)=>{const l=Ht(a);$a(n.onDisconnect_,Wt(e,o),l)}),Qs(n,r,i,s)})}function nV(n,e,t){let r;rt(e._path)===".info"?r=Rx(n.infoSyncTree_,e,t):r=Rx(n.serverSyncTree_,e,t),yb(n.eventQueue_,e._path,r)}function s0(n,e,t){let r;rt(e._path)===".info"?r=r0(n.infoSyncTree_,e,t):r=r0(n.serverSyncTree_,e,t),yb(n.eventQueue_,e._path,r)}function dR(n){n.persistentConnection_&&n.persistentConnection_.interrupt(hR)}function rV(n){n.persistentConnection_&&n.persistentConnection_.resume(hR)}function Wa(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),dn(t,...e)}function Qs(n,e,t,r){e&&Ma(()=>{if(t==="ok")e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function iV(n,e,t,r,i,s){Wa(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:aI(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=vb(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{nu("transaction failed: Data returned ",l,o.path),o.status=0;const c=Nd(n.transactionQueueTree_,e),u=ko(c)||[];u.push(o),mb(c,u);let h;typeof l=="object"&&l!==null&&ar(l,".priority")?(h=co(l,".priority"),ke(Ec(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(Dd(n.serverSyncTree_,e)||qe.EMPTY_NODE).getPriority().val();const f=iu(n),p=Ht(l,h),d=fb(p,a,f);o.currentOutputSnapshotRaw=p,o.currentOutputSnapshotResolved=d,o.currentWriteId=Fd(n);const m=ob(n.serverSyncTree_,e,d,o.currentWriteId,o.applyLocally);xr(n.eventQueue_,e,m),Wd(n,n.transactionQueueTree_)}}function vb(n,e,t){return Dd(n.serverSyncTree_,e,t)||qe.EMPTY_NODE}function Wd(n,e=n.transactionQueueTree_){if(e||Ud(n,e),ko(e)){const t=mR(n,e);ke(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&sV(n,tu(e),t)}else sR(e)&&Bd(e,t=>{Wd(n,t)})}function sV(n,e,t){const r=t.map(c=>c.currentWriteId),i=vb(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];ke(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Bn(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Wa(n,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(as(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&h.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();Ud(n,Nd(n.transactionQueueTree_,e)),Wd(n,n.transactionQueueTree_),xr(n.eventQueue_,e,u);for(let f=0;f<h.length;f++)Ma(h[f])}else{if(c==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{In("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}ka(n,e)}},o)}function ka(n,e){const t=pR(n,e),r=tu(t),i=mR(n,t);return oV(n,i,r),r}function oV(n,e,t){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Bn(t,l.path);let u=!1,h;if(ke(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(as(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=G7)u=!0,h="maxretry",i=i.concat(as(n.serverSyncTree_,l.currentWriteId,!0));else{const f=vb(n,l.path,o);l.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){nu("transaction failed: Data returned ",p,l.path);let d=Ht(p);typeof p=="object"&&p!=null&&ar(p,".priority")||(d=d.updatePriority(f.getPriority()));const b=l.currentWriteId,A=iu(n),g=fb(d,f,A);l.currentOutputSnapshotRaw=d,l.currentOutputSnapshotResolved=g,l.currentWriteId=Fd(n),o.splice(o.indexOf(b),1),i=i.concat(ob(n.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),i=i.concat(as(n.serverSyncTree_,b,!0))}else u=!0,h="nodata",i=i.concat(as(n.serverSyncTree_,l.currentWriteId,!0))}xr(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Ud(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Ma(r[a]);Wd(n,n.transactionQueueTree_)}function pR(n,e){let t,r=n.transactionQueueTree_;for(t=rt(e);t!==null&&ko(r)===void 0;)r=Nd(r,t),e=xt(e),t=rt(e);return r}function mR(n,e){const t=[];return gR(n,e,t),t.sort((r,i)=>r.order-i.order),t}function gR(n,e,t){const r=ko(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Bd(e,i=>{gR(n,i,t)})}function Ud(n,e){const t=ko(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,mb(e,t.length>0?t:void 0)}Bd(e,r=>{Ud(n,r)})}function wb(n,e){const t=tu(pR(n,e)),r=Nd(n.transactionQueueTree_,e);return B7(r,i=>{Ym(n,i)}),Ym(n,r),oR(r,i=>{Ym(n,i)}),t}function Ym(n,e){const t=ko(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(ke(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(ke(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(as(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?mb(e,void 0):t.length=s+1,xr(n.eventQueue_,tu(e),i);for(let o=0;o<r.length;o++)Ma(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function lV(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):In(`Invalid query segment '${t}' in query '${n}'`)}return e}const o0=function(n,e){const t=cV(n),r=t.namespace;t.domain==="firebase.com"&&ri(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&ri("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||yH();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new AI(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new bt(t.pathString)}},cV=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");u===-1&&(u=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=aV(n.substring(u,h)));const f=lV(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{const d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),t=e.substring(d+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+tn(this.snapshot.exportVal())}}class OR{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ke(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Un;return J7(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){wr("OnDisconnect.remove",this._path);const e=new Un;return Lx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){wr("OnDisconnect.set",this._path),si("OnDisconnect.set",e,this._path,!1);const t=new Un;return Lx(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){wr("OnDisconnect.setWithPriority",this._path),si("OnDisconnect.setWithPriority",e,this._path,!1),gb("OnDisconnect.setWithPriority",t,!1);const r=new Un;return eV(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){wr("OnDisconnect.update",this._path),lR("OnDisconnect.update",e,this._path,!1);const t=new Un;return tV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return it(this._path)?null:GO(this._path)}get ref(){return new Er(this._repo,this._path)}get _queryIdentifier(){const e=vx(this._queryParams),t=WO(e);return t==="{}"?"default":t}get _queryObject(){return vx(this._queryParams)}isEqual(e){if(e=lr(e),!(e instanceof Xn))return!1;const t=this._repo===e._repo,r=VO(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+KH(this._path)}}function zd(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ds(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ti){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ni)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ii)throw new Error(r);if(typeof t!="string")throw new Error(i)}}else if(n.getIndex()===It){if(e!=null&&!Ec(e)||t!=null&&!Ec(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ke(n.getIndex()instanceof ZO||n.getIndex()===qO,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jd(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Er extends Xn{constructor(e,t){super(e,t,new Cd,!1)}get parent(){const e=RI(this._path);return e===null?null:new Er(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class po{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bt(e),r=mo(this.ref,e);return new po(this._node.getChild(t),r,It)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new po(i,mo(this.ref,r),It)))}hasChild(e){const t=new bt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function vR(n,e){return n=lr(n),n._checkNotDeleted("ref"),e!==void 0?mo(n._root,e):n._root}function Nx(n,e){n=lr(n),n._checkNotDeleted("refFromURL");const t=o0(e,n._repo.repoInfo_.nodeAdmin);cR("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ri("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),vR(n,t.path.toString())}function mo(n,e){return n=lr(n),rt(n._path)===null?z7("child","path",e,!1):Cc("child","path",e,!1),new Er(n._repo,Wt(n._path,e))}function hV(n,e){n=lr(n),wr("push",n._path),si("push",e,n._path,!0);const t=fR(n._repo),r=bG(t),i=mo(n,r),s=mo(n,r);let o;return e!=null?o=Ab(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function fV(n){return wr("remove",n._path),Ab(n,null)}function Ab(n,e){n=lr(n),wr("set",n._path),si("set",e,n._path,!1);const t=new Un;return bb(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function dV(n,e){n=lr(n),wr("setPriority",n._path),gb("setPriority",e,!1);const t=new Un;return bb(n._repo,Wt(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function pV(n,e,t){if(wr("setWithPriority",n._path),si("setWithPriority",e,n._path,!1),gb("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new Un;return bb(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}function mV(n,e){lR("update",e,n._path,!1);const t=new Un;return q7(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function gV(n){return n=lr(n),Z7(n._repo,n).then(e=>new po(e,new Er(n._repo,n._path),n._queryParams.getIndex()))}class Hd{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const r=t._queryParams.getIndex();return new yR("value",this,new po(e.snapshotNode,new Er(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new OR(this,e,t):null}matches(e){return e instanceof Hd?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Gd{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new OR(this,e,t):null}createEvent(e,t){ke(e.childName!=null,"Child events should have a childName.");const r=mo(new Er(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new yR(e.type,this,new po(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Gd?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function su(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=t,c=(u,h)=>{s0(n._repo,n,a),l(u,h)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new bR(t,s||void 0),a=e==="value"?new Hd(o):new Gd(e,o);return nV(n._repo,n,a),()=>s0(n._repo,n,a)}function a0(n,e,t,r){return su(n,"value",e,t,r)}function Bx(n,e,t,r){return su(n,"child_added",e,t,r)}function Mx(n,e,t,r){return su(n,"child_changed",e,t,r)}function $x(n,e,t,r){return su(n,"child_moved",e,t,r)}function Fx(n,e,t,r){return su(n,"child_removed",e,t,r)}function Wx(n,e,t){let r=null;const i=t?new bR(t):null;e==="value"?r=new Hd(i):e&&(r=new Gd(e,i)),s0(n._repo,n,r)}class Fr{}class wR extends Fr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){si("endAt",this._value,e._path,!0);const t=Yy(e._queryParams,this._value,this._key);if(jd(t),Ds(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xn(e._repo,e._path,t,e._orderByCalled)}}function yV(n,e){return ru("endAt","key",e,!0),new wR(n,e)}class OV extends Fr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){si("endBefore",this._value,e._path,!1);const t=SG(e._queryParams,this._value,this._key);if(jd(t),Ds(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xn(e._repo,e._path,t,e._orderByCalled)}}function bV(n,e){return ru("endBefore","key",e,!0),new OV(n,e)}class AR extends Fr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){si("startAt",this._value,e._path,!0);const t=Xy(e._queryParams,this._value,this._key);if(jd(t),Ds(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Xn(e._repo,e._path,t,e._orderByCalled)}}function vV(n=null,e){return ru("startAt","key",e,!0),new AR(n,e)}class wV extends Fr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){si("startAfter",this._value,e._path,!1);const t=kG(e._queryParams,this._value,this._key);if(jd(t),Ds(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Xn(e._repo,e._path,t,e._orderByCalled)}}function AV(n,e){return ru("startAfter","key",e,!0),new wV(n,e)}class _V extends Fr{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xn(e._repo,e._path,_G(e._queryParams,this._limit),e._orderByCalled)}}function xV(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new _V(n)}class kV extends Fr{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xn(e._repo,e._path,xG(e._queryParams,this._limit),e._orderByCalled)}}function SV(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kV(n)}class TV extends Fr{constructor(e){super(),this._path=e}_apply(e){zd(e,"orderByChild");const t=new bt(this._path);if(it(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ZO(t),i=Id(e._queryParams,r);return Ds(i),new Xn(e._repo,e._path,i,!0)}}function EV(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Cc("orderByChild","path",n,!1),new TV(n)}class CV extends Fr{_apply(e){zd(e,"orderByKey");const t=Id(e._queryParams,ti);return Ds(t),new Xn(e._repo,e._path,t,!0)}}function IV(){return new CV}class RV extends Fr{_apply(e){zd(e,"orderByPriority");const t=Id(e._queryParams,It);return Ds(t),new Xn(e._repo,e._path,t,!0)}}function QV(){return new RV}class PV extends Fr{_apply(e){zd(e,"orderByValue");const t=Id(e._queryParams,qO);return Ds(t),new Xn(e._repo,e._path,t,!0)}}function DV(){return new PV}class LV extends Fr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(si("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new wR(this._value,this._key)._apply(new AR(this._value,this._key)._apply(e))}}function NV(n,e){return ru("equalTo","key",e,!0),new LV(n,e)}function Rr(n,...e){let t=lr(n);for(const r of e)t=r._apply(t);return t}p7(Er);b7(Er);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="FIREBASE_DATABASE_EMULATOR_HOST",l0={};let MV=!1;function $V(n,e,t,r){n.repoInfo_=new AI(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}function _R(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||ri("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=o0(s,i),a=o.repoInfo,l,c;typeof process!="undefined"&&process.env&&(c=process.env[BV]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=o0(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new Jo(Jo.OWNER):new SH(n.name,n.options,e);cR("Invalid Firebase Database URL",o),it(o.path)||ri("Database URL must point to the root of a Firebase Database (not including a child path).");const h=WV(a,n,u,new kH(n.name,t));return new UV(h,n)}function FV(n,e){const t=l0[e];(!t||t[n.key]!==n)&&ri(`Database ${e}(${n.repoInfo_}) has already been deleted.`),dR(n),delete t[n.key]}function WV(n,e,t,r){let i=l0[e.name];i||(i={},l0[e.name]=i);let s=i[n.toURLString()];return s&&ri("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new V7(n,MV,t,r),i[n.toURLString()]=s,s}class UV{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(X7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Er(this._repo,dt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(FV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ri("Cannot call "+e+" on a deleted database.")}}function xR(){va.IS_TRANSPORT_INITIALIZED&&In("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function zV(){xR(),os.forceDisallow()}function jV(){xR(),gr.forceDisallow(),os.forceAllow()}function HV(n,e,t,r={}){n=lr(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&ri("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ri('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Jo(Jo.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Lz(r.mockUserToken,n.app.options.projectId);s=new Jo(o)}$V(i,e,t,s)}function GV(n){n=lr(n),n._checkNotDeleted("goOffline"),dR(n._repo)}function VV(n){n=lr(n),n._checkNotDeleted("goOnline"),rV(n._repo)}function XV(n,e){cI(n,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(n){sI(FO),ba(new Ss("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return _R(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),fs(nx,rx,n),fs(nx,rx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV={".sv":"timestamp"};function qV(){return ZV}function KV(n){return{".sv":{increment:n}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function eX(n,e,t){var r;if(n=lr(n),wr("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=(r=t==null?void 0:t.applyLocally)!==null&&r!==void 0?r:!0,s=new Un,o=(l,c,u)=>{let h=null;l?s.reject(l):(h=new po(u,new Er(n._repo,n._path),It),s.resolve(new JV(c,h)))},a=a0(n,()=>{});return iV(n._repo,n._path,e,o,a,i),s.promise}Ei.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ei.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};YV();const tX="@firebase/database-compat",nX="0.2.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rX=new Sd("@firebase/database-compat"),kR=function(n){const e="FIREBASE WARNING: "+n;rX.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iX=function(n,e,t,r){if(!(r&&t===void 0)&&typeof t!="boolean")throw new Error(Gn(n,e)+"must be a boolean.")},sX=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Gn(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oX{constructor(e){this._delegate=e}cancel(e){Ke("OnDisconnect.cancel",0,1,arguments.length),hn("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){Ke("OnDisconnect.remove",0,1,arguments.length),hn("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){Ke("OnDisconnect.set",1,2,arguments.length),hn("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){Ke("OnDisconnect.setWithPriority",2,3,arguments.length),hn("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if(Ke("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,kR("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}hn("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aX{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Ke("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){this._database=e,this._delegate=t}val(){return Ke("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Ke("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Ke("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Ke("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Ke("DataSnapshot.child",0,1,arguments.length),e=String(e),Cc("DataSnapshot.child","path",e,!1),new ms(this._database,this._delegate.child(e))}hasChild(e){return Ke("DataSnapshot.hasChild",1,1,arguments.length),Cc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Ke("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Ke("DataSnapshot.forEach",1,1,arguments.length),hn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ms(this._database,t)))}hasChildren(){return Ke("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Ke("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Ke("DataSnapshot.ref",0,0,arguments.length),new tr(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class On{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;Ke("Query.on",2,4,arguments.length),hn("Query.on","callback",t,!1);const o=On.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{t.call(o.context,new ms(this.database,c),u)};a.userCallback=t,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return a0(this._delegate,a,l),t;case"child_added":return Bx(this._delegate,a,l),t;case"child_removed":return Fx(this._delegate,a,l),t;case"child_changed":return Mx(this._delegate,a,l),t;case"child_moved":return $x(this._delegate,a,l),t;default:throw new Error(Gn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if(Ke("Query.off",0,3,arguments.length),sX("Query.off",e,!0),hn("Query.off","callback",t,!0),G_("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Wx(this._delegate,e,i)}else Wx(this._delegate,e)}get(){return gV(this._delegate).then(e=>new ms(this.database,e))}once(e,t,r,i){Ke("Query.once",1,4,arguments.length),hn("Query.once","callback",t,!0);const s=On.getCancelAndContextArgs_("Query.once",r,i),o=new Un,a=(c,u)=>{const h=new ms(this.database,c);t&&t.call(s.context,h,u),o.resolve(h)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":a0(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Bx(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Fx(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Mx(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":$x(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Gn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return Ke("Query.limitToFirst",1,1,arguments.length),new On(this.database,Rr(this._delegate,xV(e)))}limitToLast(e){return Ke("Query.limitToLast",1,1,arguments.length),new On(this.database,Rr(this._delegate,SV(e)))}orderByChild(e){return Ke("Query.orderByChild",1,1,arguments.length),new On(this.database,Rr(this._delegate,EV(e)))}orderByKey(){return Ke("Query.orderByKey",0,0,arguments.length),new On(this.database,Rr(this._delegate,IV()))}orderByPriority(){return Ke("Query.orderByPriority",0,0,arguments.length),new On(this.database,Rr(this._delegate,QV()))}orderByValue(){return Ke("Query.orderByValue",0,0,arguments.length),new On(this.database,Rr(this._delegate,DV()))}startAt(e=null,t){return Ke("Query.startAt",0,2,arguments.length),new On(this.database,Rr(this._delegate,vV(e,t)))}startAfter(e=null,t){return Ke("Query.startAfter",0,2,arguments.length),new On(this.database,Rr(this._delegate,AV(e,t)))}endAt(e=null,t){return Ke("Query.endAt",0,2,arguments.length),new On(this.database,Rr(this._delegate,yV(e,t)))}endBefore(e=null,t){return Ke("Query.endBefore",0,2,arguments.length),new On(this.database,Rr(this._delegate,bV(e,t)))}equalTo(e,t){return Ke("Query.equalTo",1,2,arguments.length),new On(this.database,Rr(this._delegate,NV(e,t)))}toString(){return Ke("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Ke("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Ke("Query.isEqual",1,1,arguments.length),!(e instanceof On)){const t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,hn(e,"cancel",i.cancel,!0),i.context=r,G_(e,"context",i.context,!0);else if(t)if(typeof t=="object"&&t!==null)i.context=t;else if(typeof t=="function")i.cancel=t;else throw new Error(Gn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new tr(this.database,new Er(this._delegate._repo,this._delegate._path))}}class tr extends On{constructor(e,t){super(e,new Xn(t._repo,t._path,new Cd,!1)),this.database=e,this._delegate=t}getKey(){return Ke("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Ke("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new tr(this.database,mo(this._delegate,e))}getParent(){Ke("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new tr(this.database,e):null}getRoot(){return Ke("Reference.root",0,0,arguments.length),new tr(this.database,this._delegate.root)}set(e,t){Ke("Reference.set",1,2,arguments.length),hn("Reference.set","onComplete",t,!0);const r=Ab(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if(Ke("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,kR("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wr("Reference.update",this._delegate._path),hn("Reference.update","onComplete",t,!0);const r=mV(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){Ke("Reference.setWithPriority",2,3,arguments.length),hn("Reference.setWithPriority","onComplete",r,!0);const i=pV(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){Ke("Reference.remove",0,1,arguments.length),hn("Reference.remove","onComplete",e,!0);const t=fV(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){Ke("Reference.transaction",1,3,arguments.length),hn("Reference.transaction","transactionUpdate",e,!1),hn("Reference.transaction","onComplete",t,!0),iX("Reference.transaction","applyLocally",r,!0);const i=eX(this._delegate,e,{applyLocally:r}).then(s=>new aX(s.committed,new ms(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){Ke("Reference.setPriority",1,2,arguments.length),hn("Reference.setPriority","onComplete",t,!0);const r=dV(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){Ke("Reference.push",0,2,arguments.length),hn("Reference.push","onComplete",t,!0);const r=hV(this._delegate,e),i=r.then(o=>new tr(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new tr(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return wr("Reference.onDisconnect",this._delegate._path),new oX(new uV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:zV,forceLongPolling:jV}}useEmulator(e,t,r={}){HV(this._delegate,e,t,r)}ref(e){if(Ke("database.ref",0,1,arguments.length),e instanceof tr){const t=Nx(this._delegate,e.toString());return new tr(this,t)}else{const t=vR(this._delegate,e);return new tr(this,t)}}refFromURL(e){Ke("database.refFromURL",1,1,arguments.length);const r=Nx(this._delegate,e);return new tr(this,r)}goOffline(){return Ke("database.goOffline",0,0,arguments.length),GV(this._delegate)}goOnline(){return Ke("database.goOnline",0,0,arguments.length),VV(this._delegate)}}Ic.ServerValue={TIMESTAMP:qV(),increment:n=>KV(n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lX({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){sI(t);const o=new j2("auth-internal",new H2("database-standalone"));return o.setComponent(new Ss("auth-internal",()=>r,"PRIVATE")),{instance:new Ic(_R(n,o,void 0,e,s),n),namespace:i}}var cX=Object.freeze({__proto__:null,initStandalone:lX});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uX=Ic.ServerValue;function hX(n){n.INTERNAL.registerComponent(new Ss("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Ic(i,r)},"PUBLIC").setServiceProps({Reference:tr,Query:On,Database:Ic,DataSnapshot:ms,enableLogging:XV,INTERNAL:cX,ServerValue:uX}).setMultipleInstances(!0)),n.registerVersion(tX,nX)}hX(Ac);const _e={};_e.makeEventEmitter=function(n,e){n.prototype.allowedEvents_=e,n.prototype.on=function(t,r,i){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{},this.eventListeners_[t]=this.eventListeners_[t]||[],this.eventListeners_[t].push({callback:r,context:i})},n.prototype.off=function(t,r){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{};for(var i=this.eventListeners_[t]||[],s=0;s<i.length;s++)if(i[s].callback===r){i.splice(s,1);return}},n.prototype.trigger=function(t){this.eventListeners_=this.eventListeners_||{};for(var r=this.eventListeners_[t]||[],i=0;i<r.length;i++)r[i].callback.apply(r[i].context,Array.prototype.slice.call(arguments,1))},n.prototype.validateEventType_=function(t){if(this.allowedEvents_){for(var r=!1,i=0;i<this.allowedEvents_.length;i++)if(this.allowedEvents_[i]===t){r=!0;break}if(!r)throw new Error('Unknown event "'+t+'"')}}};_e.elt=function(n,e,t){var r=document.createElement(n);if(typeof e=="string")_e.setTextContent(r,e);else if(e)for(var i=0;i<e.length;++i)r.appendChild(e[i]);for(var s in t||{})r.setAttribute(s,t[s]);return r};_e.setTextContent=function(n,e){n.innerHTML="",n.appendChild(document.createTextNode(e))};_e.on=function(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r||!1):n.attachEvent&&n.attachEvent("on"+e,t)};_e.off=function(n,e,t,r){n.removeEventListener?n.removeEventListener(e,t,r||!1):n.detachEvent&&n.detachEvent("on"+e,t)};_e.preventDefault=function(n){n.preventDefault?n.preventDefault():n.returnValue=!1};_e.stopPropagation=function(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0};_e.stopEvent=function(n){_e.preventDefault(n),_e.stopPropagation(n)};_e.stopEventAnd=function(n){return function(e){return n(e),_e.stopEvent(e),!1}};_e.trim=function(n){return n.replace(/^\s+/g,"").replace(/\s+$/g,"")};_e.stringEndsWith=function(n,e){for(var t=typeof e=="string"?[e]:e,r=0;r<t.length;r++){var e=t[r];if(n.indexOf(e,n.length-e.length)!==-1)return!0}return!1};_e.assert=function(e,t){if(!e)throw new Error(t||"assertion error")};_e.log=function(){if(typeof console!="undefined"&&typeof console.log!="undefined"){for(var n=["Firepad:"],e=0;e<arguments.length;e++)n.push(arguments[e]);console.log.apply(console,n)}};const Il=function(){function n(e){this.type=e,this.chars=null,this.text=null,this.attributes=null,e==="insert"?(this.text=arguments[1],_e.assert(typeof this.text=="string"),this.attributes=arguments[2]||{},_e.assert(typeof this.attributes=="object")):e==="delete"?(this.chars=arguments[1],_e.assert(typeof this.chars=="number")):e==="retain"&&(this.chars=arguments[1],_e.assert(typeof this.chars=="number"),this.attributes=arguments[2]||{},_e.assert(typeof this.attributes=="object"))}return n.prototype.isInsert=function(){return this.type==="insert"},n.prototype.isDelete=function(){return this.type==="delete"},n.prototype.isRetain=function(){return this.type==="retain"},n.prototype.equals=function(e){return this.type===e.type&&this.text===e.text&&this.chars===e.chars&&this.attributesEqual(e.attributes)},n.prototype.attributesEqual=function(e){for(var t in this.attributes)if(this.attributes[t]!==e[t])return!1;for(t in e)if(this.attributes[t]!==e[t])return!1;return!0},n.prototype.hasEmptyAttributes=function(){var e=!0;for(var t in this.attributes){e=!1;break}return e},n}(),Vt=function(){function n(){if(!this||this.constructor!==n)return new n;this.ops=[],this.baseLength=0,this.targetLength=0}n.prototype.equals=function(r){if(this.baseLength!==r.baseLength||this.targetLength!==r.targetLength||this.ops.length!==r.ops.length)return!1;for(var i=0;i<this.ops.length;i++)if(!this.ops[i].equals(r.ops[i]))return!1;return!0},n.prototype.retain=function(r,i){if(typeof r!="number"||r<0)throw new Error("retain expects a positive integer.");if(r===0)return this;this.baseLength+=r,this.targetLength+=r,i=i||{};var s=this.ops.length>0?this.ops[this.ops.length-1]:null;return s&&s.isRetain()&&s.attributesEqual(i)?s.chars+=r:this.ops.push(new Il("retain",r,i)),this},n.prototype.insert=function(r,i){if(typeof r!="string")throw new Error("insert expects a string");if(r==="")return this;i=i||{},this.targetLength+=r.length;var s=this.ops.length>0?this.ops[this.ops.length-1]:null,o=this.ops.length>1?this.ops[this.ops.length-2]:null;return s&&s.isInsert()&&s.attributesEqual(i)?s.text+=r:s&&s.isDelete()?o&&o.isInsert()&&o.attributesEqual(i)?o.text+=r:(this.ops[this.ops.length-1]=new Il("insert",r,i),this.ops.push(s)):this.ops.push(new Il("insert",r,i)),this},n.prototype.delete=function(r){if(typeof r=="string"&&(r=r.length),typeof r!="number"||r<0)throw new Error("delete expects a positive integer or a string");if(r===0)return this;this.baseLength+=r;var i=this.ops.length>0?this.ops[this.ops.length-1]:null;return i&&i.isDelete()?i.chars+=r:this.ops.push(new Il("delete",r)),this},n.prototype.isNoop=function(){return this.ops.length===0||this.ops.length===1&&this.ops[0].isRetain()&&this.ops[0].hasEmptyAttributes()},n.prototype.clone=function(){for(var r=new n,i=0;i<this.ops.length;i++)this.ops[i].isRetain()?r.retain(this.ops[i].chars,this.ops[i].attributes):this.ops[i].isInsert()?r.insert(this.ops[i].text,this.ops[i].attributes):r.delete(this.ops[i].chars);return r},n.prototype.toString=function(){var r=Array.prototype.map||function(i){for(var s=this,o=[],a=0,l=s.length;a<l;a++)o[a]=i(s[a]);return o};return r.call(this.ops,function(i){return i.isRetain()?"retain "+i.chars:i.isInsert()?"insert '"+i.text+"'":"delete "+i.chars}).join(", ")},n.prototype.toJSON=function(){for(var r=[],i=0;i<this.ops.length;i++)this.ops[i].hasEmptyAttributes()||r.push(this.ops[i].attributes),this.ops[i].type==="retain"?r.push(this.ops[i].chars):this.ops[i].type==="insert"?r.push(this.ops[i].text):this.ops[i].type==="delete"&&r.push(-this.ops[i].chars);return r.length===0&&r.push(0),r},n.fromJSON=function(r){for(var i=new n,s=0,o=r.length;s<o;s++){var a=r[s],l={};typeof a=="object"&&(l=a,s++,a=r[s]),typeof a=="number"?a>0?i.retain(a,l):i.delete(-a):(_e.assert(typeof a=="string"),i.insert(a,l))}return i},n.prototype.apply=function(r,i,s){var o=this;if(i=i||[],s=s||[],r.length!==o.baseLength)throw new Error("The operation's base length must be equal to the string's length.");for(var a=[],l=0,c,u,h=0,f=this.ops,p=0,d=f.length;p<d;p++){var m=f[p];if(m.isRetain()){if(h+m.chars>r.length)throw new Error("Operation can't retain more characters than are left in the string.");for(a[l++]=r.slice(h,h+m.chars),c=0;c<m.chars;c++){var b=i[h+c]||{},A={};for(u in b)A[u]=b[u],_e.assert(A[u]!==!1);for(u in m.attributes)m.attributes[u]===!1?delete A[u]:A[u]=m.attributes[u],_e.assert(A[u]!==!1);s.push(A)}h+=m.chars}else if(m.isInsert())for(a[l++]=m.text,c=0;c<m.text.length;c++){var g={};for(u in m.attributes)g[u]=m.attributes[u],_e.assert(g[u]!==!1);s.push(g)}else h+=m.chars}if(h!==r.length)throw new Error("The operation didn't operate on the whole string.");var v=a.join("");return _e.assert(v.length===s.length),v},n.prototype.invert=function(r){for(var i=0,s=new n,o=this.ops,a=0,l=o.length;a<l;a++){var c=o[a];c.isRetain()?(s.retain(c.chars),i+=c.chars):c.isInsert()?s.delete(c.text.length):(s.insert(r.slice(i,i+c.chars)),i+=c.chars)}return s},n.prototype.compose=function(r){var i=this;if(i.targetLength!==r.baseLength)throw new Error("The base length of the second operation has to be the target length of the first operation");function s(d,m,b){var A={},g;for(g in d)A[g]=d[g];for(g in m)b&&m[g]===!1?delete A[g]:A[g]=m[g];return A}for(var o=new n,a=i.clone().ops,l=r.clone().ops,c=0,u=0,h=a[c++],f=l[u++],p;!(typeof h=="undefined"&&typeof f=="undefined");){if(h&&h.isDelete()){o.delete(h.chars),h=a[c++];continue}if(f&&f.isInsert()){o.insert(f.text,f.attributes),f=l[u++];continue}if(typeof h=="undefined")throw new Error("Cannot compose operations: first operation is too short.");if(typeof f=="undefined")throw new Error("Cannot compose operations: first operation is too long.");if(h.isRetain()&&f.isRetain())p=s(h.attributes,f.attributes),h.chars>f.chars?(o.retain(f.chars,p),h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(o.retain(h.chars,p),h=a[c++],f=l[u++]):(o.retain(h.chars,p),f.chars-=h.chars,h=a[c++]);else if(h.isInsert()&&f.isDelete())h.text.length>f.chars?(h.text=h.text.slice(f.chars),f=l[u++]):h.text.length===f.chars?(h=a[c++],f=l[u++]):(f.chars-=h.text.length,h=a[c++]);else if(h.isInsert()&&f.isRetain())p=s(h.attributes,f.attributes,!0),h.text.length>f.chars?(o.insert(h.text.slice(0,f.chars),p),h.text=h.text.slice(f.chars),f=l[u++]):h.text.length===f.chars?(o.insert(h.text,p),h=a[c++],f=l[u++]):(o.insert(h.text,p),f.chars-=h.text.length,h=a[c++]);else if(h.isRetain()&&f.isDelete())h.chars>f.chars?(o.delete(f.chars),h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(o.delete(f.chars),h=a[c++],f=l[u++]):(o.delete(h.chars),f.chars-=h.chars,h=a[c++]);else throw new Error("This shouldn't happen: op1: "+JSON.stringify(h)+", op2: "+JSON.stringify(f))}return o};function e(r){var i=r.ops;switch(i.length){case 1:return i[0];case 2:return i[0].isRetain()?i[1]:i[1].isRetain()?i[0]:null;case 3:if(i[0].isRetain()&&i[2].isRetain())return i[1]}return null}function t(r){return r.ops[0].isRetain()?r.ops[0].chars:0}return n.prototype.shouldBeComposedWith=function(r){if(this.isNoop()||r.isNoop())return!0;var i=t(this),s=t(r),o=e(this),a=e(r);return!o||!a?!1:o.isInsert()&&a.isInsert()?i+o.text.length===s:o.isDelete()&&a.isDelete()?s+a.chars===i||i===s:!1},n.prototype.shouldBeComposedWithInverted=function(r){if(this.isNoop()||r.isNoop())return!0;var i=t(this),s=t(r),o=e(this),a=e(r);return!o||!a?!1:o.isInsert()&&a.isInsert()?i+o.text.length===s||i===s:o.isDelete()&&a.isDelete()?s+a.chars===i:!1},n.transformAttributes=function(r,i){var s={},o={},a,l={};for(a in r)l[a]=!0;for(a in i)l[a]=!0;for(a in l){var c=r[a],u=i[a];_e.assert(c!=null||u!=null),c==null?o[a]=u:u==null?s[a]=c:c===u||(s[a]=c)}return[s,o]},n.transform=function(r,i){if(r.baseLength!==i.baseLength)throw new Error("Both operations have to have the same base length");for(var s=new n,o=new n,a=r.clone().ops,l=i.clone().ops,c=0,u=0,h=a[c++],f=l[u++];!(typeof h=="undefined"&&typeof f=="undefined");){if(h&&h.isInsert()){s.insert(h.text,h.attributes),o.retain(h.text.length),h=a[c++];continue}if(f&&f.isInsert()){s.retain(f.text.length),o.insert(f.text,f.attributes),f=l[u++];continue}if(typeof h=="undefined")throw new Error("Cannot transform operations: first operation is too short.");if(typeof f=="undefined")throw new Error("Cannot transform operations: first operation is too long.");var p;if(h.isRetain()&&f.isRetain()){var d=n.transformAttributes(h.attributes,f.attributes);h.chars>f.chars?(p=f.chars,h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(p=f.chars,h=a[c++],f=l[u++]):(p=h.chars,f.chars-=h.chars,h=a[c++]),s.retain(p,d[0]),o.retain(p,d[1])}else if(h.isDelete()&&f.isDelete())h.chars>f.chars?(h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(h=a[c++],f=l[u++]):(f.chars-=h.chars,h=a[c++]);else if(h.isDelete()&&f.isRetain())h.chars>f.chars?(p=f.chars,h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(p=f.chars,h=a[c++],f=l[u++]):(p=h.chars,f.chars-=h.chars,h=a[c++]),s.delete(p);else if(h.isRetain()&&f.isDelete())h.chars>f.chars?(p=f.chars,h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(p=h.chars,h=a[c++],f=l[u++]):(p=h.chars,f.chars-=h.chars,h=a[c++]),o.delete(p);else throw new Error("The two operations aren't compatible")}return[s,o]},n.prototype.transform=function(r){return n.transform(this,r)},n}(),fX=function(n){var e=100;function t(a,l,c){this.ref_=a,this.ready_=!1,this.firebaseCallbacks_=[],this.zombie_=!1,this.document_=new Vt,this.revision_=0,this.pendingReceivedRevisions_={};var u=this;if(l){this.setUserId(l),this.setColor(c);var h=a.root.child(".info/connected");this.firebaseOn_(h,"value",function(f){f.val()===!0&&u.initializeUserData_()},this),this.on("ready",function(){u.monitorCursors_()})}else this.userId_=a.push().key;setTimeout(function(){u.monitorHistory_()},0)}_e.makeEventEmitter(t,["ready","cursor","operation","ack","retry"]),t.prototype.dispose=function(){var a=this;if(this.removeFirebaseCallbacks_(),this.handleInitialRevisions_=()=>{},!this.ready_){this.on("ready",function(){a.dispose()});return}this.userRef_&&(this.userRef_.child("cursor").remove(),this.userRef_.child("color").remove()),this.ref_=null,this.document_=null,this.zombie_=!0},t.prototype.setUserId=function(a){this.userRef_&&(this.userRef_.child("cursor").remove(),this.userRef_.child("cursor").onDisconnect().cancel(),this.userRef_.child("color").remove(),this.userRef_.child("color").onDisconnect().cancel()),this.userId_=a,this.userRef_=this.ref_.child("users").child(a),this.initializeUserData_()},t.prototype.isHistoryEmpty=function(){return r(this.ready_,"Not ready yet."),this.revision_===0},t.prototype.sendOperation=function(a,l){var c=this;if(!this.ready_){this.on("ready",function(){c.trigger("retry")});return}r(this.document_.targetLength===a.baseLength,"sendOperation() called with invalid operation.");var u=s(this.revision_);function h(f,p){c.ref_.child("history").child(f).transaction(function(d){if(d===null)return p},function(d,m,b){if(d)if(d.message==="disconnect")c.sent_&&c.sent_.id===f?setTimeout(function(){h(f,p)},0):l&&l(d,!1);else throw _e.log("Transaction failure!",d),d;else l&&l(null,m)},!1)}this.sent_={id:u,op:a},h(u,{a:c.userId_,o:a.toJSON(),t:Ac.database.ServerValue.TIMESTAMP})},t.prototype.sendCursor=function(a){this.userRef_.child("cursor").set(a),this.cursor_=a},t.prototype.setColor=function(a){this.userRef_.child("color").set(a),this.color_=a},t.prototype.getDocument=function(){return this.document_},t.prototype.registerCallbacks=function(a){for(var l in a)this.on(l,a[l])},t.prototype.initializeUserData_=function(){this.userRef_.child("cursor").onDisconnect().remove(),this.userRef_.child("color").onDisconnect().remove(),this.sendCursor(this.cursor_||null),this.setColor(this.color_||null)},t.prototype.monitorCursors_=function(){var a=this.ref_.child("users"),l=this;function c(u){var h=u.key,f=u.val();l.trigger("cursor",h,f.cursor,f.color)}this.firebaseOn_(a,"child_added",c),this.firebaseOn_(a,"child_changed",c),this.firebaseOn_(a,"child_removed",function(u){var h=u.key;l.trigger("cursor",h,null)})},t.prototype.monitorHistory_=function(){var a=this;this.ref_.child("checkpoint").once("value",function(l){if(!a.zombie_){var c=l.child("id").val(),u=l.child("o").val(),h=l.child("a").val();u!=null&&c!=null&&h!==null?(a.pendingReceivedRevisions_[c]={o:u,a:h},a.checkpointRevision_=o(c),a.monitorHistoryStartingAt_(a.checkpointRevision_+1)):(a.checkpointRevision_=0,a.monitorHistoryStartingAt_(a.checkpointRevision_))}})},t.prototype.monitorHistoryStartingAt_=function(a){var l=this.ref_.child("history").startAt(null,s(a)),c=this;setTimeout(function(){c.firebaseOn_(l,"child_added",function(u){var h=u.key;c.pendingReceivedRevisions_[h]=u.val(),c.ready_&&c.handlePendingReceivedRevisions_()}),l.once("value",function(){c.handleInitialRevisions_()})},0)},t.prototype.handleInitialRevisions_=function(){r(!this.ready_,"Should not be called multiple times."),this.revision_=this.checkpointRevision_;for(var a=s(this.revision_),l=this.pendingReceivedRevisions_;l[a]!=null;){var c=this.parseRevision_(l[a]);c?this.document_=this.document_.compose(c.operation):_e.log("Invalid operation.",this.ref_.toString(),a,l[a]),delete l[a],this.revision_++,a=s(this.revision_)}this.trigger("operation",this.document_),this.ready_=!0;var u=this;setTimeout(function(){u.trigger("ready")},0)},t.prototype.handlePendingReceivedRevisions_=function(){for(var a=this.pendingReceivedRevisions_,l=s(this.revision_),c=!1;a[l]!=null;){this.revision_++;var u=this.parseRevision_(a[l]);u?(this.document_=this.document_.compose(u.operation),this.sent_&&l===this.sent_.id?this.sent_.op.equals(u.operation)&&u.author===this.userId_?(this.revision_%e===0&&this.saveCheckpoint_(),this.sent_=null,this.trigger("ack")):(c=!0,this.trigger("operation",u.operation)):this.trigger("operation",u.operation)):_e.log("Invalid operation.",this.ref_.toString(),l,a[l]),delete a[l],l=s(this.revision_)}c&&(this.sent_=null,this.trigger("retry"))},t.prototype.parseRevision_=function(a){if(typeof a!="object"||typeof a.a!="string"||typeof a.o!="object")return null;var l=null;try{l=Vt.fromJSON(a.o)}catch{return null}return l.baseLength!==this.document_.targetLength?null:{author:a.a,operation:l}},t.prototype.saveCheckpoint_=function(){this.ref_.child("checkpoint").set({a:this.userId_,o:this.document_.toJSON(),id:s(this.revision_-1)})},t.prototype.firebaseOn_=function(a,l,c,u){return this.firebaseCallbacks_.push({ref:a,eventType:l,callback:c,context:u}),a.on(l,c,u),c},t.prototype.firebaseOff_=function(a,l,c,u){a.off(l,c,u);for(var h=0;h<this.firebaseCallbacks_.length;h++){var f=this.firebaseCallbacks_[h];if(f.ref===a&&f.eventType===l&&f.callback===c&&f.context===u){this.firebaseCallbacks_.splice(h,1);break}}},t.prototype.removeFirebaseCallbacks_=function(){for(var a=0;a<this.firebaseCallbacks_.length;a++){var l=this.firebaseCallbacks_[a];l.ref.off(l.eventType,l.callback,l.context)}this.firebaseCallbacks_=[]};function r(a,l){if(!a)throw new Error(l||"assertion error")}var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(a){if(a===0)return"A0";for(var l="";a>0;){var c=a%i.length;l=i[c]+l,a-=c,a/=i.length}var u=i[l.length+9];return u+l}function o(a){r(a.length>0&&a[0]===i[a.length+8]);for(var l=0,c=1;c<a.length;c++)l*=i.length,l+=i.indexOf(a[c]);return l}return t}(),Qe={BOLD:"b",ITALIC:"i",UNDERLINE:"u",STRIKE:"s",FONT:"f",FONT_SIZE:"fs",COLOR:"c",BACKGROUND_COLOR:"bc",ENTITY_SENTINEL:"ent",LINE_SENTINEL:"l",LINE_INDENT:"li",LINE_ALIGN:"la",LIST_TYPE:"lt"},Df={LINE_SENTINEL_CHARACTER:"\uE000",ENTITY_SENTINEL_CHARACTER:"\uE001"},ea=function(){var n=Qe.ENTITY_SENTINEL,e=n+"_";function t(r,i){if(!(this instanceof t))return new t(r,i);this.type=r,this.info=i||{}}return t.prototype.toAttributes=function(){var r={};r[n]=this.type;for(var i in this.info)r[e+i]=this.info[i];return r},t.fromAttributes=function(r){var i=r[n],s={};for(var o in r)o.indexOf(e)===0&&(s[o.substr(e.length)]=r[o]);return new t(i,s)},t}(),c0=()=>window.document,dX=function(){function n(){this.entities_={};var e=["src","alt","width","height","style","class"];this.register("img",{render:function(t){_e.assert(t.src,"image entity should have 'src'!");for(var r=["src","alt","width","height","style","class"],i="<img ",s=0;s<r.length;s++){var o=r[s];o in t&&(i+=" "+o+'="'+t[o]+'"')}return i+=">",i},fromElement:function(t){for(var r={},i=0;i<e.length;i++){var s=e[i];t.hasAttribute(s)&&(r[s]=t.getAttribute(s))}return r}})}return n.prototype.register=function(e,t){_e.assert(t.render,"Entity options should include a 'render' function!"),_e.assert(t.fromElement,"Entity options should include a 'fromElement' function!"),this.entities_[e]=t},n.prototype.renderToElement=function(e,t){return this.tryRenderToElement_(e,"render",t)},n.prototype.exportToElement=function(e){var t=this.tryRenderToElement_(e,"export")||this.tryRenderToElement_(e,"getHtml")||this.tryRenderToElement_(e,"render");return t.setAttribute("data-firepad-entity",e.type),t},n.prototype.updateElement=function(e,t){var r=e.type,i=e.info;this.entities_[r]&&typeof this.entities_[r].update!="undefined"&&this.entities_[r].update(i,t)},n.prototype.fromElement=function(e){var t=e.getAttribute("data-firepad-entity");if(t||(t=e.nodeName.toLowerCase()),t&&this.entities_[t]){var r=this.entities_[t].fromElement(e);return new ea(t,r)}},n.prototype.tryRenderToElement_=function(e,t,r){var i=e.type,s=e.info;if(this.entities_[i]&&this.entities_[i][t]){var o=c0(),a=this.entities_[i][t](s,r,o);if(a){if(typeof a=="string"){var l=c0().createElement("div");return l.innerHTML=a,l.childNodes[0]}else if(typeof a=="object")return _e.assert(typeof a.nodeType!="undefined","Error rendering "+i+" entity.  render() function must return an html string or a DOM element."),a}}},n.prototype.entitySupportsUpdate=function(e){return this.entities_[e]&&this.entities_[e].update},n}(),Rc=function(){function n(e){if(!(this instanceof n))return new n(e);this.attributes=e||{},this.attributes[Qe.LINE_SENTINEL]=!0}return n.LIST_TYPE={NONE:!1,ORDERED:"o",UNORDERED:"u",TODO:"t",TODOCHECKED:"tc"},n.prototype.cloneWithNewAttribute_=function(e,t){var r={};for(var i in this.attributes)r[i]=this.attributes[i];return t===!1?delete r[e]:r[e]=t,new n(r)},n.prototype.indent=function(e){return this.cloneWithNewAttribute_(Qe.LINE_INDENT,e)},n.prototype.align=function(e){return this.cloneWithNewAttribute_(Qe.LINE_ALIGN,e)},n.prototype.listItem=function(e){return _e.assert(e===!1||e==="u"||e==="o"||e==="t"||e==="tc"),this.cloneWithNewAttribute_(Qe.LIST_TYPE,e)},n.prototype.getIndent=function(){return this.attributes[Qe.LINE_INDENT]||0},n.prototype.getAlign=function(){return this.attributes[Qe.LINE_ALIGN]||0},n.prototype.getListItem=function(){return this.attributes[Qe.LIST_TYPE]||!1},n}(),Lf=function(){function n(e){if(!(this instanceof n))return new n(e);this.attributes=e||{}}return n.prototype.cloneWithNewAttribute_=function(e,t){var r={};for(var i in this.attributes)r[i]=this.attributes[i];return t===!1?delete r[e]:r[e]=t,new n(r)},n.prototype.bold=function(e){return this.cloneWithNewAttribute_(Qe.BOLD,e)},n.prototype.italic=function(e){return this.cloneWithNewAttribute_(Qe.ITALIC,e)},n.prototype.underline=function(e){return this.cloneWithNewAttribute_(Qe.UNDERLINE,e)},n.prototype.strike=function(e){return this.cloneWithNewAttribute_(Qe.STRIKE,e)},n.prototype.font=function(e){return this.cloneWithNewAttribute_(Qe.FONT,e)},n.prototype.fontSize=function(e){return this.cloneWithNewAttribute_(Qe.FONT_SIZE,e)},n.prototype.color=function(e){return this.cloneWithNewAttribute_(Qe.COLOR,e)},n.prototype.backgroundColor=function(e){return this.cloneWithNewAttribute_(Qe.BACKGROUND_COLOR,e)},n}(),Nf=function(){function n(e,t){if(!(this instanceof n))return new n(e,t);this.text=e,this.formatting=t||Lf()}return n}(),_b=function(){function n(e,t){if(!(this instanceof n))return new n(e,t);Object.prototype.toString.call(e)!=="[object Array]"&&(typeof e=="undefined"?e=[]:e=[e]),this.textPieces=e,this.formatting=t||Rc()}return n}(),Ux=function(){var{LIST_TYPE:n}=Rc;function e(u,h,f){this.listType=u||n.UNORDERED,this.lineFormatting=h||Rc(),this.textFormatting=f||Lf()}e.prototype.withTextFormatting=function(u){return new e(this.listType,this.lineFormatting,u)},e.prototype.withLineFormatting=function(u){return new e(this.listType,u,this.textFormatting)},e.prototype.withListType=function(u){return new e(u,this.lineFormatting,this.textFormatting)},e.prototype.withIncreasedIndent=function(){var u=this.lineFormatting.indent(this.lineFormatting.getIndent()+1);return new e(this.listType,u,this.textFormatting)},e.prototype.withAlign=function(u){var h=this.lineFormatting.align(u);return new e(this.listType,h,this.textFormatting)};function t(){this.lines=[],this.currentLine=[],this.currentLineListItemType=null}t.prototype.newlineIfNonEmpty=function(u){this.cleanLine_(),this.currentLine.length>0&&this.newline(u)},t.prototype.newlineIfNonEmptyOrListItem=function(u){this.cleanLine_(),(this.currentLine.length>0||this.currentLineListItemType!==null)&&this.newline(u)},t.prototype.newline=function(u){this.cleanLine_();var h=u.lineFormatting;this.currentLineListItemType!==null&&(h=h.listItem(this.currentLineListItemType),this.currentLineListItemType=null),this.lines.push(_b(this.currentLine,h)),this.currentLine=[]},t.prototype.makeListItem=function(u){this.currentLineListItemType=u},t.prototype.cleanLine_=function(){if(this.currentLine.length>0){var u=this.currentLine.length-1;this.currentLine[0].text=this.currentLine[0].text.replace(/^ +/,""),this.currentLine[u].text=this.currentLine[u].text.replace(/ +$/g,"");for(var h=0;h<this.currentLine.length;h++)this.currentLine[h].text=this.currentLine[h].text.replace(/\u00a0/g," ")}this.currentLine.length===1&&this.currentLine[0].text===""&&(this.currentLine=[])};var r;function i(u,h){var f=c0().createElement("div");f.innerHTML=u,r=h;var p=new t,d=new e;return o(f,d,p),p.lines}var s=s||{ELEMENT_NODE:1,TEXT_NODE:3};function o(u,h,f){if(u.nodeType===s.ELEMENT_NODE){var p=r.fromElement(u);if(p){f.currentLine.push(new Nf(Df.ENTITY_SENTINEL_CHARACTER,new Lf(p.toAttributes())));return}}switch(u.nodeType){case s.TEXT_NODE:var d=u.nodeValue.replace(/[ \n\t]+/g," ");f.currentLine.push(Nf(d,h.textFormatting));break;case s.ELEMENT_NODE:var m=u.getAttribute("style")||"";switch(h=c(h,m),u.nodeName.toLowerCase()){case"div":case"h1":case"h2":case"h3":case"p":f.newlineIfNonEmpty(h),a(u,h,f),f.newlineIfNonEmpty(h);break;case"center":h=h.withAlign("center"),f.newlineIfNonEmpty(h),a(u,h.withAlign("center"),f),f.newlineIfNonEmpty(h);break;case"b":case"strong":a(u,h.withTextFormatting(h.textFormatting.bold(!0)),f);break;case"u":a(u,h.withTextFormatting(h.textFormatting.underline(!0)),f);break;case"i":case"em":a(u,h.withTextFormatting(h.textFormatting.italic(!0)),f);break;case"s":a(u,h.withTextFormatting(h.textFormatting.strike(!0)),f);break;case"font":var b=u.getAttribute("face"),A=u.getAttribute("color"),g=parseInt(u.getAttribute("size"));b&&(h=h.withTextFormatting(h.textFormatting.font(b))),A&&(h=h.withTextFormatting(h.textFormatting.color(A))),g&&(h=h.withTextFormatting(h.textFormatting.fontSize(g))),a(u,h,f);break;case"br":f.newline(h);break;case"ul":f.newlineIfNonEmptyOrListItem(h);var v=u.getAttribute("class")==="firepad-todo"?n.TODO:n.UNORDERED;a(u,h.withListType(v).withIncreasedIndent(),f),f.newlineIfNonEmpty(h);break;case"ol":f.newlineIfNonEmptyOrListItem(h),a(u,h.withListType(n.ORDERED).withIncreasedIndent(),f),f.newlineIfNonEmpty(h);break;case"li":l(u,h,f);break;case"style":break;default:a(u,h,f);break}break}}function a(u,h,f){if(u.hasChildNodes())for(var p=0;p<u.childNodes.length;p++)o(u.childNodes[p],h,f)}function l(u,h,f){f.newlineIfNonEmptyOrListItem(h);var p=u.getAttribute("class")==="firepad-checked"?n.TODOCHECKED:h.listType;f.makeListItem(p);var d=f.currentLine;a(u,h,f),(d===f.currentLine||f.currentLine.length>0)&&f.newline(h)}function c(u,h){for(var f=u.textFormatting,p=u.lineFormatting,d=h.split(";"),m=0;m<d.length;m++){var b=d[m].split(":");if(b.length===2){var A=_e.trim(b[0]).toLowerCase(),g=_e.trim(b[1]).toLowerCase();switch(A){case"text-decoration":var v=g.indexOf("underline")>=0,O=g.indexOf("line-through")>=0;f=f.underline(v).strike(O);break;case"font-weight":var _=g==="bold"||parseInt(g)>=600;f=f.bold(_);break;case"font-style":var x=g==="italic"||g==="oblique";f=f.italic(x);break;case"color":f=f.color(g);break;case"background-color":f=f.backgroundColor(g);break;case"text-align":p=p.align(g);break;case"font-size":var T=null,E=["px","pt","%","em","xx-small","x-small","small","medium","large","x-large","xx-large","smaller","larger"];_e.stringEndsWith(g,E)?T=g:parseInt(g)&&(T=parseInt(g)+"px"),T&&(f=f.fontSize(T));break;case"font-family":var S=_e.trim(g.split(",")[0]);S=S.replace(/['"]/g,""),S=S.replace(/\w\S*/g,function(C){return C.charAt(0).toUpperCase()+C.substr(1).toLowerCase()}),f=f.font(S);break}}}return u.withLineFormatting(p).withTextFormatting(f)}return i}(),pX=function(){var{LIST_TYPE:n}=Rc,e=`<style>ul.firepad-todo { list-style: none; margin-left: 0; padding-left: 0; } ul.firepad-todo > li { padding-left: 1em; text-indent: -1em; } ul.firepad-todo > li:before { content: "\\2610"; padding-right: 5px; } ul.firepad-todo > li.firepad-checked:before { content: "\\2611"; padding-right: 5px; }</style>
`;function t(a){return a===n.ORDERED?"<ol>":a===n.UNORDERED?"<ul>":'<ul class="firepad-todo">'}function r(a){return a===n.ORDERED?"</ol>":"</ul>"}function i(a,l){return a===l||a===n.TODO&&l===n.TODOCHECKED||a===n.TODOCHECKED&&l===n.TODO}function s(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g,"&nbsp;")}function o(a,l){for(var c="",u=!0,h=[],f=!1,p=!0,d=!0,m=0,b=a.ops[m],A=!1;b;){_e.assert(b.isInsert());var g=b.attributes;if(u){u=!1;var v=0,O=null,_="left";for((Qe.LINE_SENTINEL in g)&&(v=g[Qe.LINE_INDENT]||0,O=g[Qe.LIST_TYPE]||null,_=g[Qe.LINE_ALIGN]||"left"),O&&(v=v||1),f?(c+="</li>",f=!1):p||(d&&(c+="<br/>"),c+="</div>"),p=!1,_e.assert(v>=0,"Indent must not be negative.");h.length>v||v===h.length&&O!==null&&!i(O,h[h.length-1]);)c+=r(h.pop());for(;h.length<v;){var x=O||n.UNORDERED;A=O==n.TODO||O==n.TODOCHECKED||A,c+=t(x),h.push(x)}var T=_!=="left"?' style="text-align:'+_+'"':"";if(O){var E="";switch(O){case n.TODOCHECKED:E=' class="firepad-checked"';break;case n.TODO:E=' class="firepad-unchecked"';break}c+="<li"+E+T+">",f=!0}else c+="<div"+T+">";d=!0}if(Qe.LINE_SENTINEL in g){b=a.ops[++m];continue}if(Qe.ENTITY_SENTINEL in g){for(var S=0;S<b.text.length;S++){var C=ea.fromAttributes(g),B=l.exportToElement(C);c+=B.outerHTML}b=a.ops[++m];continue}var M="",D="";for(var L in g){var P=g[L],X,Z;L===Qe.BOLD||L===Qe.ITALIC||L===Qe.UNDERLINE||L===Qe.STRIKE?(_e.assert(P===!0),X=Z=L):L===Qe.FONT_SIZE?(X='span style="font-size: '+P,X+=typeof P!="string"||P.indexOf("px",P.length-2)===-1?'px"':'"',Z="span"):L===Qe.FONT?(X='span style="font-family: '+P+'"',Z="span"):L===Qe.COLOR?(X='span style="color: '+P+'"',Z="span"):L===Qe.BACKGROUND_COLOR?(X='span style="background-color: '+P+'"',Z="span"):_e.log(!1,"Encountered unknown attribute while rendering html: "+L),X&&(M+="<"+X+">"),Z&&(D="</"+Z+">"+D)}var K=b.text,ee=K.indexOf(`
`);ee>=0?(u=!0,ee<K.length-1?b=new Il("insert",K.substr(ee+1),g):b=a.ops[++m],K=K.substr(0,ee)):b=a.ops[++m],K=K.replace(/  +/g,function(J){return new Array(J.length+1).join("\xA0")}).replace(/^ /,"\xA0").replace(/ $/,"\xA0"),K.length>0&&(d=!1),c+=M+s(K)+D}for(f?c+="</li>":p||(d&&(c+="&nbsp;"),c+="</div>");h.length>0;)c+=r(h.pop());return A&&(c=e+c),c}return o}(),mX=function(n,e){var t=[];function r(o,a){o instanceof Nf&&(a=o.formatting.attributes,o=o.text),t.push({string:o,attributes:a}),n=o[o.length-1]===`
`}function i(o,a){n&&r(Df.LINE_SENTINEL_CHARACTER,o.formatting.attributes);for(var l=0;l<o.textPieces.length;l++)r(o.textPieces[l]);a&&r(`
`)}for(var s=0;s<e.length;s++)e[s]instanceof _b?i(e[s],s<e.length-1):r(e[s]);return t},ou=function(){function n(e,t){this.position=e,this.selectionEnd=t}return n.fromJSON=function(e){return new n(e.position,e.selectionEnd)},n.prototype.equals=function(e){return this.position===e.position&&this.selectionEnd===e.selectionEnd},n.prototype.compose=function(e){return e},n.prototype.transform=function(e){function t(i){for(var s=i,o=e.ops,a=0,l=e.ops.length;a<l&&(o[a].isRetain()?i-=o[a].chars:o[a].isInsert()?s+=o[a].text.length:(s-=Math.min(i,o[a].chars),i-=o[a].chars),!(i<0));a++);return s}var r=t(this.position);return this.position===this.selectionEnd?new n(r,r):new n(r,t(this.selectionEnd))},n}(),Mo=function(){function n(){this.state=t}n.prototype.setState=function(s){this.state=s},n.prototype.applyClient=function(s){this.setState(this.state.applyClient(this,s))},n.prototype.applyServer=function(s){this.setState(this.state.applyServer(this,s))},n.prototype.serverAck=function(){this.setState(this.state.serverAck(this))},n.prototype.serverRetry=function(){this.setState(this.state.serverRetry(this))},n.prototype.sendOperation=function(s){throw new Error("sendOperation must be defined in child class")},n.prototype.applyOperation=function(s){throw new Error("applyOperation must be defined in child class")};function e(){}n.Synchronized=e,e.prototype.applyClient=function(s,o){return s.sendOperation(o),new r(o)},e.prototype.applyServer=function(s,o){return s.applyOperation(o),this},e.prototype.serverAck=function(s){throw new Error("There is no pending operation.")},e.prototype.serverRetry=function(s){throw new Error("There is no pending operation.")};var t=new e;function r(s){this.outstanding=s}n.AwaitingConfirm=r,r.prototype.applyClient=function(s,o){return new i(this.outstanding,o)},r.prototype.applyServer=function(s,o){var a=this.outstanding.transform(o);return s.applyOperation(a[1]),new r(a[0])},r.prototype.serverAck=function(s){return t},r.prototype.serverRetry=function(s){return s.sendOperation(this.outstanding),this};function i(s,o){this.outstanding=s,this.buffer=o}return n.AwaitingWithBuffer=i,i.prototype.applyClient=function(s,o){var a=this.buffer.compose(o);return new i(this.outstanding,a)},i.prototype.applyServer=function(s,o){var a=this.outstanding.transform(o),l=this.buffer.transform(a[1]);return s.applyOperation(l[1]),new i(a[0],l[0])},i.prototype.serverRetry=function(s){var o=this.outstanding.compose(this.buffer);return s.sendOperation(o),new r(o)},i.prototype.serverAck=function(s){return s.sendOperation(this.buffer),new r(this.buffer)},n}(),gX=function(){var n="normal",e="undoing",t="redoing";function r(s){this.maxItems=s||50,this.state=n,this.dontCompose=!1,this.undoStack=[],this.redoStack=[]}r.prototype.add=function(s,o){if(this.state===e)this.redoStack.push(s),this.dontCompose=!0;else if(this.state===t)this.undoStack.push(s),this.dontCompose=!0;else{var a=this.undoStack;!this.dontCompose&&o&&a.length>0?a.push(s.compose(a.pop())):(a.push(s),a.length>this.maxItems&&a.shift()),this.dontCompose=!1,this.redoStack=[]}};function i(s,o){for(var a=[],l=o.constructor,c=s.length-1;c>=0;c--){var u=l.transform(s[c],o);(typeof u[0].isNoop!="function"||!u[0].isNoop())&&a.push(u[0]),o=u[1]}return a.reverse()}return r.prototype.transform=function(s){this.undoStack=i(this.undoStack,s),this.redoStack=i(this.redoStack,s)},r.prototype.performUndo=function(s){if(this.state=e,this.undoStack.length===0)throw new Error("undo not possible");s(this.undoStack.pop()),this.state=n},r.prototype.performRedo=function(s){if(this.state=t,this.redoStack.length===0)throw new Error("redo not possible");s(this.redoStack.pop()),this.state=n},r.prototype.canUndo=function(){return this.undoStack.length!==0},r.prototype.canRedo=function(){return this.redoStack.length!==0},r.prototype.isUndoing=function(){return this.state===e},r.prototype.isRedoing=function(){return this.state===t},r}(),u0=function(n){function e(s,o){this.wrapped=s,this.meta=o}e.prototype.apply=function(){return this.wrapped.apply.apply(this.wrapped,arguments)},e.prototype.invert=function(){var s=this.meta;return new e(this.wrapped.invert.apply(this.wrapped,arguments),s&&typeof s=="object"&&typeof s.invert=="function"?s.invert.apply(s,arguments):s)};function t(s,o){for(var a in s)s.hasOwnProperty(a)&&(o[a]=s[a])}function r(s,o){if(s&&typeof s=="object"){if(typeof s.compose=="function")return s.compose(o);var a={};return t(s,a),t(o,a),a}return o}e.prototype.compose=function(s){return new e(this.wrapped.compose(s.wrapped),r(this.meta,s.meta))};function i(s,o){return s&&typeof s=="object"&&typeof s.transform=="function"?s.transform(o):s}return e.transform=function(s,o){var a=s.wrapped.transform(o.wrapped);return[new e(a[0],i(s.meta,o.wrapped)),new e(a[1],i(o.meta,s.wrapped))]},e.prototype.transform=function(s){return e.transform(this,s)},e}(),SR=function(){function n(s,o){this.cursorBefore=s,this.cursorAfter=o}n.prototype.invert=function(){return new n(this.cursorAfter,this.cursorBefore)},n.prototype.compose=function(s){return new n(this.cursorBefore,s.cursorAfter)},n.prototype.transform=function(s){return new n(this.cursorBefore?this.cursorBefore.transform(s):null,this.cursorAfter?this.cursorAfter.transform(s):null)};function e(s,o){this.id=s,this.editorAdapter=o}e.prototype.setColor=function(s){this.color=s},e.prototype.updateCursor=function(s){this.removeCursor(),this.cursor=s,this.mark=this.editorAdapter.setOtherCursor(s,this.color,this.id)},e.prototype.removeCursor=function(){this.mark&&this.mark.clear()};function t(s,o){Mo.call(this),this.serverAdapter=s,this.editorAdapter=o,this.undoManager=new gX,this.clients={};var a=this;this.editorAdapter.registerCallbacks({change:function(l,c){a.onChange(l,c)},cursorActivity:function(){a.onCursorActivity()},blur:function(){a.onBlur()},focus:function(){a.onFocus()}}),this.editorAdapter.registerUndo(function(){a.undo()}),this.editorAdapter.registerRedo(function(){a.redo()}),this.serverAdapter.registerCallbacks({ack:function(){a.serverAck(),a.focused&&a.state instanceof Mo.Synchronized&&(a.updateCursor(),a.sendCursor(a.cursor)),a.emitStatus()},retry:function(){a.serverRetry()},operation:function(l){a.applyServer(l)},cursor:function(l,c,u){if(!(a.serverAdapter.userId_===l||!(a.state instanceof Mo.Synchronized))){var h=a.getClientObject(l);c?(u&&h.setColor(u),h.updateCursor(ou.fromJSON(c))):h.removeCursor()}}})}r(t,Mo),t.prototype.getClientObject=function(s){var o=this.clients[s];return o||(this.clients[s]=new e(s,this.editorAdapter))},t.prototype.applyUnredo=function(s){this.undoManager.add(this.editorAdapter.invertOperation(s)),this.editorAdapter.applyOperation(s.wrapped),this.cursor=s.meta.cursorAfter,this.cursor&&this.editorAdapter.setCursor(this.cursor),this.applyClient(s.wrapped)},t.prototype.undo=function(){var s=this;!this.undoManager.canUndo()||this.undoManager.performUndo(function(o){s.applyUnredo(o)})},t.prototype.redo=function(){var s=this;!this.undoManager.canRedo()||this.undoManager.performRedo(function(o){s.applyUnredo(o)})},t.prototype.onChange=function(s,o){var a=this.cursor;this.updateCursor();var l=this.undoManager.undoStack.length>0&&o.shouldBeComposedWithInverted(i(this.undoManager.undoStack).wrapped),c=new n(this.cursor,a);this.undoManager.add(new u0(o,c),l),this.applyClient(s)},t.prototype.updateCursor=function(){this.cursor=this.editorAdapter.getCursor()},t.prototype.onCursorActivity=function(){var s=this.cursor;this.updateCursor(),!(!this.focused||s&&this.cursor.equals(s))&&this.sendCursor(this.cursor)},t.prototype.onBlur=function(){this.cursor=null,this.sendCursor(null),this.focused=!1},t.prototype.onFocus=function(){this.focused=!0,this.onCursorActivity()},t.prototype.sendCursor=function(s){this.state instanceof Mo.AwaitingWithBuffer||this.serverAdapter.sendCursor(s)},t.prototype.sendOperation=function(s){this.serverAdapter.sendOperation(s),this.emitStatus()},t.prototype.applyOperation=function(s){this.editorAdapter.applyOperation(s),this.updateCursor(),this.undoManager.transform(new u0(s,null))},t.prototype.emitStatus=function(){var s=this;setTimeout(function(){s.trigger("synced",s.state instanceof Mo.Synchronized)},0)};function r(s,o){function a(){}a.prototype=o.prototype,s.prototype=new a,s.prototype.constructor=s}function i(s){return s[s.length-1]}return t}();_e.makeEventEmitter(SR,["synced"]);const TR=function(){function n(c){this.rtcm=c,this.cm=c.codeMirror,s(this,"onChange"),s(this,"onAttributesChange"),s(this,"onCursorActivity"),s(this,"onFocus"),s(this,"onBlur"),this.rtcm.on("change",this.onChange),this.rtcm.on("attributesChange",this.onAttributesChange),this.cm.on("cursorActivity",this.onCursorActivity),this.cm.on("focus",this.onFocus),this.cm.on("blur",this.onBlur)}n.prototype.detach=function(){this.rtcm.off("change",this.onChange),this.rtcm.off("attributesChange",this.onAttributesChange),this.cm.off("cursorActivity",this.onCursorActivity),this.cm.off("focus",this.onFocus),this.cm.off("blur",this.onBlur)};function e(c,u){return c.line<u.line?-1:c.line>u.line?1:c.ch<u.ch?-1:c.ch>u.ch?1:0}function t(c,u){return e(c,u)===0}function r(c){var u=c.lineCount()-1;return c.indexFromPos({line:u,ch:c.getLine(u).length})}n.operationFromCodeMirrorChanges=function(c,u){for(var h=r(u),f=new Vt().retain(h),p=new Vt().retain(h),d=c.length-1;d>=0;d--){var m=c[d],b=m.start,A=h-b-m.text.length;f=new Vt().retain(b).delete(m.removed.length).insert(m.text,m.attributes).retain(A).compose(f),p=p.compose(new Vt().retain(b).delete(m.text.length).insert(m.removed,m.removedAttributes).retain(A)),h+=m.removed.length-m.text.length}return[f,p]},n.operationFromAttributesChanges=function(c,u){for(var h=r(u),f=new Vt,p=new Vt,d=0,m=0;m<c.length;m++){var b=c[m],A=b.start-d;i(A>=0),f.retain(A),p.retain(A);var g=b.end-b.start;f.retain(g,b.attributes),p.retain(g,b.attributesInverse),d=b.start+g}return f.retain(h-d),p.retain(h-d),[f,p]},n.prototype.registerCallbacks=function(c){this.callbacks=c},n.prototype.onChange=function(c,u){if(u[0].origin!=="RTCMADAPTER"){var h=n.operationFromCodeMirrorChanges(u,this.cm);this.trigger("change",h[0],h[1])}},n.prototype.onAttributesChange=function(c,u){if(u[0].origin!=="RTCMADAPTER"){var h=n.operationFromAttributesChanges(u,this.cm);this.trigger("change",h[0],h[1])}},n.prototype.onCursorActivity=function(){var c=this;setTimeout(function(){c.trigger("cursorActivity")},1)},n.prototype.onFocus=function(){this.trigger("focus")},n.prototype.onBlur=function(){this.cm.somethingSelected()||this.trigger("blur")},n.prototype.getValue=function(){return this.cm.getValue()},n.prototype.getCursor=function(){var c=this.cm,u=c.getCursor(),h=c.indexFromPos(u),f;if(c.somethingSelected()){var p=c.getCursor(!0),d=t(u,p)?c.getCursor(!1):p;f=c.indexFromPos(d)}else f=h;return new ou(h,f)},n.prototype.setCursor=function(c){this.cm.setSelection(this.cm.posFromIndex(c.position),this.cm.posFromIndex(c.selectionEnd))},n.prototype.addStyleRule=function(c){if(!(typeof document=="undefined"||document===null)){if(!this.addedStyleRules){this.addedStyleRules={};var u=document.createElement("style");document.documentElement.getElementsByTagName("head")[0].appendChild(u),this.addedStyleSheet=u.sheet}if(!this.addedStyleRules[c])return this.addedStyleRules[c]=!0,this.addedStyleSheet.insertRule(c,0)}},n.prototype.setOtherCursor=function(c,u,h){var f=this.cm.posFromIndex(c.position);if(!(typeof u!="string"||!u.match(/^#[a-fA-F0-9]{3,6}$/))){var p=this.rtcm.end();if(!(typeof c!="object"||typeof c.position!="number"||typeof c.selectionEnd!="number")&&!(c.position<0||c.position>p||c.selectionEnd<0||c.selectionEnd>p))if(c.position===c.selectionEnd){var d=this.cm.cursorCoords(f),m=document.createElement("span");return m.className="other-client",m.style.borderLeftWidth="2px",m.style.borderLeftStyle="solid",m.style.borderLeftColor=u,m.style.marginLeft=m.style.marginRight="-1px",m.style.height=(d.bottom-d.top)*.9+"px",m.setAttribute("data-clientid",h),m.style.zIndex=0,this.cm.setBookmark(f,{widget:m,insertLeft:!0})}else{var b="selection-"+u.replace("#",""),A=.4,g="."+b+" { background: "+a(u)+`;
 background: `+a(u,A)+";}";this.addStyleRule(g);var v,O;return c.selectionEnd>c.position?(v=f,O=this.cm.posFromIndex(c.selectionEnd)):(v=this.cm.posFromIndex(c.selectionEnd),O=f),this.cm.markText(v,O,{className:b})}}},n.prototype.trigger=function(c){var u=Array.prototype.slice.call(arguments,1),h=this.callbacks&&this.callbacks[c];h&&h.apply(this,u)},n.prototype.applyOperation=function(c){c.ops.length>10&&this.rtcm.codeMirror.getWrapperElement().setAttribute("style","display: none");for(var u=c.ops,h=0,f=0,p=u.length;f<p;f++){var d=u[f];d.isRetain()?(o(d.attributes)||this.rtcm.updateTextAttributes(h,h+d.chars,function(m){for(var b in d.attributes)d.attributes[b]===!1?delete m[b]:m[b]=d.attributes[b]},"RTCMADAPTER",!0),h+=d.chars):d.isInsert()?(this.rtcm.insertText(h,d.text,d.attributes,"RTCMADAPTER"),h+=d.text.length):d.isDelete()&&this.rtcm.removeText(h,h+d.chars,"RTCMADAPTER")}c.ops.length>10&&(this.rtcm.codeMirror.getWrapperElement().setAttribute("style",""),this.rtcm.codeMirror.refresh())},n.prototype.registerUndo=function(c){this.cm.undo=c},n.prototype.registerRedo=function(c){this.cm.redo=c},n.prototype.invertOperation=function(c){for(var u=0,h=this.rtcm.codeMirror,f,p,d=new Vt,m=0;m<c.wrapped.ops.length;m++){var b=c.wrapped.ops[m];if(b.isRetain())if(o(b.attributes))d.retain(b.chars),u+=b.chars;else for(f=this.rtcm.getAttributeSpans(u,u+b.chars),p=0;p<f.length;p++){var A={};for(var g in b.attributes){var v=b.attributes[g],O=f[p].attributes[g];v===!1?O&&(A[g]=O):v!==O&&(A[g]=O||!1)}d.retain(f[p].length,A),u+=f[p].length}else if(b.isInsert())d.delete(b.text.length);else if(b.isDelete()){var _=h.getRange(h.posFromIndex(u),h.posFromIndex(u+b.chars));f=this.rtcm.getAttributeSpans(u,u+b.chars);var x=0;for(p=0;p<f.length;p++)d.insert(_.substr(x,f[p].length),f[p].attributes),x+=f[p].length;u+=b.chars}}return new u0(d,c.meta.invert())};function i(c,u){if(!c)throw new Error(u||"assertion error")}function s(c,u){var h=c[u];c[u]=function(){h.apply(c,arguments)}}function o(c){for(var u in c)return!1;return!0}function a(c,u){if(typeof c!="string")throw new TypeError("Expected a string");c=c.replace(/^#/,""),c.length===3&&(c=c[0]+c[0]+c[1]+c[1]+c[2]+c[2]);var h=parseInt(c,16),f=[h>>16,h>>8&255,h&255],p="rgb";return l(u)&&(p="rgba",f.push(u)),p+"("+f.join(",")+")"}function l(c){return c!=null}return n}(),Gr=function(){function n(e,t){this.pos=e,this.length=t}return n.prototype.end=function(){return this.pos+this.length},n}(),yX=function(){function n(o,a){if(!o)throw new Error("AnnotationList assertion failed"+(a?": "+a:""))}function e(o,a){this.pos=o,this.length=a.length,this.annotation=a.annotation,this.attachedObject_=a.attachedObject}e.prototype.getAttachedObject=function(){return this.attachedObject_};function t(o,a){this.pos=o,this.length=a.length,this.annotation=a.annotation,this.node_=a}t.prototype.attachObject=function(o){this.node_.attachedObject=o};var r={equals:function(){return!1}};function i(o){this.head_=new s(0,r),this.changeHandler_=o}i.prototype.insertAnnotatedSpan=function(o,a){this.wrapOperation_(new Gr(o.pos,0),function(l,c){n(!c||c.next===null);var u=new s(o.length,a);if(c){n(o.pos>l&&o.pos<l+c.length);var h=new s(0,r);return h.next=new s(o.pos-l,c.annotation),h.next.next=u,u.next=new s(l+c.length-o.pos,c.annotation),h.next}else return u})},i.prototype.removeSpan=function(o){o.length!==0&&this.wrapOperation_(o,function(a,l){n(l!==null);var c=new s(0,r),u=c;for(o.pos>a&&(u.next=new s(o.pos-a,l.annotation),u=u.next);o.end()>a+l.length;)a+=l.length,l=l.next;var h=a+l.length-o.end();return h>0&&(u.next=new s(h,l.annotation)),c.next})},i.prototype.updateSpan=function(o,a){o.length!==0&&this.wrapOperation_(o,function(l,c){n(c!==null);var u=new s(0,r),h=u,f=l,p=o.pos-f;for(n(p<c.length),p>0&&(h.next=new s(p,c.annotation),h=h.next,f+=h.length);c!==null&&o.end()>=l+c.length;){var d=l+c.length-f;h.next=new s(d,a(c.annotation,d)),h=h.next,l+=c.length,c=c.next,f=l}var m=o.end()-f;return m>0&&(n(m<c.length),h.next=new s(m,a(c.annotation,m)),h=h.next,f+=h.length,h.next=new s(l+c.length-f,c.annotation)),u.next})},i.prototype.wrapOperation_=function(o,a){if(o.pos<0)throw new Error("Span start cannot be negative.");var l=[],c=[],u=this.getAffectedNodes_(o),h;u.start!==null?(h=u.end.next,u.end.next=null):h=u.succ;var f=a(u.startPos,u.start),p=!1,d=!1;if(f){this.mergeNodesWithSameAnnotations_(f);var m;for(u.pred&&u.pred.annotation.equals(f.annotation)?(p=!0,f.length+=u.pred.length,u.beforePred.next=f,m=u.predPos):(u.beforeStart.next=f,m=u.startPos);f.next;)c.push(new t(m,f)),m+=f.length,f=f.next;u.succ&&u.succ.annotation.equals(f.annotation)?(f.length+=u.succ.length,d=!0,f.next=u.succ.next):f.next=h,c.push(new t(m,f))}else u.pred&&u.succ&&u.pred.annotation.equals(u.succ.annotation)?(p=!0,d=!0,f=new s(u.pred.length+u.succ.length,u.pred.annotation),u.beforePred.next=f,f.next=u.succ.next,c.push(new t(u.startPos-u.pred.length,f))):u.beforeStart.next=h;p&&l.push(new e(u.predPos,u.pred));for(var b=u.startPos,A=u.start;A!==null;)l.push(new e(b,A)),b+=A.length,A=A.next;d&&l.push(new e(b,u.succ)),this.changeHandler_(l,c)},i.prototype.getAffectedNodes_=function(o){for(var a={},l=null,c=this.head_,u=c.next,h=0;u!==null&&o.pos>=h+u.length;)h+=u.length,l=c,c=u,u=u.next;if(u===null&&!(o.length===0&&o.pos===h))throw new Error("Span start exceeds the bounds of the AnnotationList.");for(a.startPos=h,o.length===0&&o.pos===h?a.start=null:a.start=u,a.beforeStart=c,h===o.pos&&h>0?(a.pred=c,a.predPos=h-c.length,a.beforePred=l):a.pred=null;u!==null&&o.end()>h;)h+=u.length,c=u,u=u.next;if(o.end()>h)throw new Error("Span end exceeds the bounds of the AnnotationList.");return o.length===0&&o.end()===h?a.end=null:a.end=c,a.succ=h===o.end()?u:null,a},i.prototype.mergeNodesWithSameAnnotations_=function(o){if(!!o)for(var a=null,l=o;l;)a&&a.annotation.equals(l.annotation)?(a.length+=l.length,a.next=l.next):a=l,l=l.next},i.prototype.forEach=function(o){for(var a=this.head_.next;a!==null;)o(a.length,a.annotation,a.attachedObject),a=a.next},i.prototype.getAnnotatedSpansForPos=function(o){for(var a=0,l=this.head_.next,c=null;l!==null&&a+l.length<=o;)a+=l.length,c=l,l=l.next;if(l===null&&a!==o)throw new Error("pos exceeds the bounds of the AnnotationList");var u=[];return a===o&&c&&u.push(new e(a-c.length,c)),l&&u.push(new e(a,l)),u},i.prototype.getAnnotatedSpansForSpan=function(o){if(o.length===0)return[];for(var a=[],l=this.getAffectedNodes_(o),c=l.startPos,u=l.start;u!==null&&c<o.end();){var h=Math.max(c,o.pos),f=Math.min(c+u.length,o.end()),p=new Gr(h,f-h);p.annotation=u.annotation,a.push(p),c+=u.length,u=u.next}return a},i.prototype.count=function(){for(var o=0,a=this.head_.next,l=null;a!==null;)l&&n(!l.annotation.equals(a.annotation)),l=a,a=a.next,o++;return o};function s(o,a){this.length=o,this.annotation=a,this.attachedObject=null,this.next=null}return s.prototype.clone=function(){var o=new s(this.spanLength,this.annotation);return o.next=this.next,o},i}(),OX=function(){var n="cmrt-",e="cmrt-",t={c:"color",bc:"background-color",fs:"font-size",li:function(d){return"padding-left: "+d*40+"px"}},r={};function i(d,m,b){this.codeMirror=d,this.options_=b||{},this.entityManager_=m,this.currentAttributes_=null;var A=this;this.annotationList_=new yX(function(g,v){A.onAnnotationsChanged_(g,v)}),this.initAnnotationList_(),p(this,"onCodeMirrorBeforeChange_"),p(this,"onCodeMirrorChange_"),p(this,"onCursorActivity_"),parseInt(CodeMirror.version)>=4?this.codeMirror.on("changes",this.onCodeMirrorChange_):this.codeMirror.on("change",this.onCodeMirrorChange_),this.codeMirror.on("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.on("cursorActivity",this.onCursorActivity_),this.changeId_=0,this.outstandingChanges_={},this.dirtyLines_=[]}_e.makeEventEmitter(i,["change","attributesChange","newLine"]);var s=Df.LINE_SENTINEL_CHARACTER,o=Df.ENTITY_SENTINEL_CHARACTER;i.prototype.detach=function(){this.codeMirror.off("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.off("change",this.onCodeMirrorChange_),this.codeMirror.off("changes",this.onCodeMirrorChange_),this.codeMirror.off("cursorActivity",this.onCursorActivity_),this.clearAnnotations_()},i.prototype.toggleAttribute=function(d,m){var b=m||!0;if(this.emptySelection_()){var A=this.getCurrentAttributes_();A[d]===b?delete A[d]:A[d]=b,this.currentAttributes_=A}else{var g=this.getCurrentAttributes_(),v=g[d]!==b?b:!1;this.setAttribute(d,v)}},i.prototype.setAttribute=function(d,m){var b=this.codeMirror;if(this.emptySelection_()){var A=this.getCurrentAttributes_();m===!1?delete A[d]:A[d]=m,this.currentAttributes_=A}else this.updateTextAttributes(b.indexFromPos(b.getCursor("start")),b.indexFromPos(b.getCursor("end")),function(g){m===!1?delete g[d]:g[d]=m}),this.updateCurrentAttributes_()},i.prototype.updateTextAttributes=function(d,m,b,A,g){var v=[],O=d,_=this;this.annotationList_.updateSpan(new Gr(d,m-d),function(x,T){var E={};for(var S in x.attributes)E[S]=x.attributes[S];(!E[Qe.LINE_SENTINEL]||g)&&b(E);var C={},B={};return _.computeChangedAttributes_(x.attributes,E,C,B),f(C)||v.push({start:O,end:O+T,attributes:C,attributesInverse:B,origin:A}),O+=T,new h(E)}),v.length>0&&this.trigger("attributesChange",this,v)},i.prototype.computeChangedAttributes_=function(d,m,b,A){var g={},v;for(v in d)g[v]=!0;for(v in m)g[v]=!0;for(v in g)v in m?v in d?d[v]!==m[v]&&(b[v]=m[v],A[v]=d[v]):(b[v]=m[v],A[v]=!1):(b[v]=!1,A[v]=d[v])},i.prototype.toggleLineAttribute=function(d,m){var b=this.getCurrentLineAttributes_(),A;!(d in b)||b[d]!==m?A=m:A=!1,this.setLineAttribute(d,A)},i.prototype.setLineAttribute=function(d,m){this.updateLineAttributesForSelection(function(b){m===!1?delete b[d]:b[d]=m})},i.prototype.updateLineAttributesForSelection=function(d){var m=this.codeMirror,b=m.getCursor("start"),A=m.getCursor("end"),g=b.line,v=A.line,O=m.getLine(v),_=this.areLineSentinelCharacters_(O.substr(0,A.ch));v>g&&_&&v--,this.updateLineAttributes(g,v,d)},i.prototype.updateLineAttributes=function(d,m,b){for(var A=d;A<=m;A++){var g=this.codeMirror.getLine(A),v=this.codeMirror.indexFromPos({line:A,ch:0});if(g[0]!==s){var O={};O[Qe.LINE_SENTINEL]=!0,b(O),this.insertText(v,s,O)}else this.updateTextAttributes(v,v+1,b,null,!0)}},i.prototype.replaceText=function(d,m,b,A,g){this.changeId_++;var v=e+this.changeId_;this.outstandingChanges_[v]={origOrigin:g,attributes:A};var O=this.codeMirror,_=O.posFromIndex(d),x=typeof m=="number"?O.posFromIndex(m):null;O.replaceRange(b,_,x,v)},i.prototype.insertText=function(d,m,b,A){var g=this.codeMirror,v=g.getCursor(),O=A=="RTCMADAPTER"&&!g.somethingSelected()&&d==g.indexFromPos(v);this.replaceText(d,null,m,b,A),O&&g.setCursor(v)},i.prototype.removeText=function(d,m,b){var A=this.codeMirror;A.replaceRange("",A.posFromIndex(d),A.posFromIndex(m),b)},i.prototype.insertEntityAtCursor=function(d,m,b){var A=this.codeMirror,g=A.indexFromPos(A.getCursor("head"));this.insertEntityAt(g,d,m,b)},i.prototype.insertEntityAt=function(d,m,b,A){this.codeMirror,this.insertEntity_(d,new ea(m,b),A)},i.prototype.insertEntity_=function(d,m,b){this.replaceText(d,null,o,m.toAttributes(),b)},i.prototype.getAttributeSpans=function(d,m){for(var b=[],A=this.annotationList_.getAnnotatedSpansForSpan(new Gr(d,m-d)),g=0;g<A.length;g++)b.push({length:A[g].length,attributes:A[g].annotation.attributes});return b},i.prototype.end=function(){var d=this.codeMirror.lineCount()-1;return this.codeMirror.indexFromPos({line:d,ch:this.codeMirror.getLine(d).length})},i.prototype.getRange=function(d,m){var b=this.codeMirror.posFromIndex(d),A=this.codeMirror.posFromIndex(m);return this.codeMirror.getRange(b,A)},i.prototype.initAnnotationList_=function(){var d=this.end();d!==0&&this.annotationList_.insertAnnotatedSpan(new Gr(0,d),new h)},i.prototype.onAnnotationsChanged_=function(d,m){var b,A={};this.tryToUpdateEntitiesInPlace(d,m);for(var g=0;g<d.length;g++){var v=d[g].annotation.attributes;Qe.LINE_SENTINEL in v&&(A[this.codeMirror.posFromIndex(d[g].pos).line]=!0),b=d[g].getAttachedObject(),b&&b.clear()}for(g=0;g<m.length;g++){var O=m[g].annotation,_=Qe.LINE_SENTINEL in O.attributes,x=Qe.ENTITY_SENTINEL in O.attributes,T=this.codeMirror.posFromIndex(m[g].pos);if(_)A[T.line]=!0;else if(x)this.markEntity_(m[g]);else{var E=this.getClassNameForAttributes_(O.attributes);if(E!==""){var S=this.codeMirror.posFromIndex(m[g].pos+m[g].length);b=this.codeMirror.markText(T,S,{className:E}),m[g].attachObject(b)}}}for(var C in A)this.dirtyLines_.push(this.codeMirror.getLineHandle(Number(C))),this.queueLineMarking_()},i.prototype.tryToUpdateEntitiesInPlace=function(d,m){for(var b=d.length;b--;)for(var A=d[b],g=m.length;g--;){var v=m[g];if(A.pos==v.pos&&A.length==v.length&&A.annotation.attributes.ent&&A.annotation.attributes.ent==v.annotation.attributes.ent){var O=v.annotation.attributes.ent;if(this.entityManager_.entitySupportsUpdate(O)){d.splice(b,1),m.splice(g,1);var _=A.getAttachedObject();_.update(v.annotation.attributes),v.attachObject(_)}}}},i.prototype.queueLineMarking_=function(){if(this.lineMarkTimeout_==null){var d=this;this.lineMarkTimeout_=setTimeout(function(){d.lineMarkTimeout_=null;for(var m=[],b=0;b<d.dirtyLines_.length;b++){var A=d.codeMirror.getLineNumber(d.dirtyLines_[b]);m.push(Number(A))}d.dirtyLines_=[],m.sort(function(O,_){return O-_});var g=-1;for(b=0;b<m.length;b++){var v=m[b];v>g&&(g=d.markLineSentinelCharactersForChangedLines_(v,v))}},0)}},i.prototype.addStyleWithCSS_=function(d){var m=document.getElementsByTagName("head")[0],b=document.createElement("style");b.type="text/css",b.styleSheet?b.styleSheet.cssText=d:b.appendChild(document.createTextNode(d)),m.appendChild(b)},i.prototype.getClassNameForAttributes_=function(d){var m="";for(var b in d){var A=d[b];if(b===Qe.LINE_SENTINEL)_e.assert(A===!0,"LINE_SENTINEL attribute should be true if it exists.");else{var g=(this.options_.cssPrefix||n)+b;if(A!==!0){b===Qe.FONT_SIZE&&typeof A!="string"&&(A=A+"px");var v=A.toString().toLowerCase().replace(/[^a-z0-9-_]/g,"-");if(g+="-"+v,t[b]&&(r[b]||(r[b]={}),!r[b][v])){r[b][v]=!0;var O=t[b],_=typeof O=="function"?O(A):O+": "+A,x=b==Qe.LINE_INDENT?"pre."+g:"."+g;if(this.addStyleWithCSS_(x+" { "+_+" }"),b===Qe.LINE_INDENT){var x="pre.CodeMirror-line."+g;this.addStyleWithCSS_(x+" { "+_+" }")}}}m=m+" "+g}}return m},i.prototype.markEntity_=function(d){for(var m=d.annotation.attributes,b=ea.fromAttributes(m),A=this.codeMirror,g=this,v=[],O=0;O<d.length;O++){var _=A.posFromIndex(d.pos+O),x=A.posFromIndex(d.pos+O+1),T={collapsed:!0,atomic:!0,inclusiveLeft:!1,inclusiveRight:!1},E=this.createEntityHandle_(b,d.pos),S=this.entityManager_.renderToElement(b,E);S&&(T.replacedWith=S);var C=A.markText(_,x,T);v.push(C),E.setMarker(C)}d.attachObject({clear:function(){for(var B=0;B<v.length;B++)v[B].clear()},update:function(B){for(var M=ea.fromAttributes(B),D=0;D<v.length;D++)g.entityManager_.updateElement(M,v[D].replacedWith)}}),this.queueRefresh_()},i.prototype.queueRefresh_=function(){var d=this;this.refreshTimer_||(this.refreshTimer_=setTimeout(function(){d.codeMirror.refresh(),d.refreshTimer_=null},0))},i.prototype.createEntityHandle_=function(d,m){var b=null,A=this;function g(){if(b){var x=b.find();return x?A.codeMirror.indexFromPos(x.from):null}else return m}function v(){var x=g();x!=null&&(A.codeMirror.focus(),A.removeText(x,x+1))}function O(x){var T=Qe.ENTITY_SENTINEL,E=T+"_",S=g();A.updateTextAttributes(S,S+1,function(C){for(var B in C)delete C[B];C[T]=d.type;for(var M in x)C[E+M]=x[M]})}function _(x){b=x}return{find:g,remove:v,replace:O,setMarker:_}},i.prototype.lineClassRemover_=function(d){var m=this.codeMirror,b=m.getLineHandle(d);return{clear:function(){m.removeLineClass(b,"text",".*")}}},i.prototype.emptySelection_=function(){var d=this.codeMirror.getCursor("start"),m=this.codeMirror.getCursor("end");return d.line===m.line&&d.ch===m.ch},i.prototype.onCodeMirrorBeforeChange_=function(d,m){if(m.origin==="+input"||m.origin==="paste"){for(var b=[],A=0;A<m.text.length;A++){var g=m.text[A];g=g.replace(new RegExp("["+s+o+"]","g"),""),b.push(g)}m.update(m.from,m.to,b)}};function a(d,m){return d.line-m.line||d.ch-m.ch}function l(d,m){return a(d,m)<=0}function c(d){return d[d.length-1]}function u(d){if(d.length===0)return 0;for(var m=0,b=0;b<d.length;b++)m+=d[b].length;return m+d.length-1}i.prototype.onCodeMirrorChange_=function(d,m){if(typeof m.from=="object"){for(var b=[];m;)b.push(m),m=m.next;m=b}for(var A=this.convertCoordinateSystemForChanges_(m),g=[],v=0;v<A.length;v++){var O=A[v],_=O.start;O.end;var x=O.text,T=O.removed,E=O.origin;if(T.length>0){for(var S=this.annotationList_.getAnnotatedSpansForSpan(new Gr(_,T.length)),C=0,B=0;B<S.length;B++){var M=S[B];g.push({start:_,end:_+M.length,removedAttributes:M.annotation.attributes,removed:T.substr(C,M.length),attributes:{},text:"",origin:O.origin}),C+=M.length}this.annotationList_.removeSpan(new Gr(_,T.length))}if(x.length>0){var D;O.origin==="+input"||O.origin==="paste"?D=this.currentAttributes_||{}:E in this.outstandingChanges_?(D=this.outstandingChanges_[E].attributes,E=this.outstandingChanges_[E].origOrigin,delete this.outstandingChanges_[E]):D={},this.annotationList_.insertAnnotatedSpan(new Gr(_,x.length),new h(D)),g.push({start:_,end:_,removedAttributes:{},removed:"",text:x,attributes:D,origin:E})}}this.markLineSentinelCharactersForChanges_(m),g.length>0&&this.trigger("change",this,g)},i.prototype.convertCoordinateSystemForChanges_=function(d){var m=this,b=function(E){return m.codeMirror.indexFromPos(E)};function A(E,S){return function(C){return l(C,S.from)?E(C):l(S.to,C)?E({line:C.line+S.text.length-1-(S.to.line-S.from.line),ch:S.to.line<C.line?C.ch:S.text.length<=1?C.ch-(S.to.ch-S.from.ch)+u(S.text):C.ch-S.to.ch+c(S.text).length})+u(S.removed)-u(S.text):S.from.line===C.line?E(S.from)+C.ch-S.from.ch:E(S.from)+u(S.removed.slice(0,C.line-S.from.line))+1+C.ch}}for(var g=[],v=d.length-1;v>=0;v--){var O=d[v];b=A(b,O);var _=b(O.from),x=O.removed.join(`
`),T=O.text.join(`
`);g.unshift({start:_,end:_+x.length,removed:x,text:T,origin:O.origin})}return g},i.prototype.markLineSentinelCharactersForChanges_=function(d){for(var m=Number.MAX_VALUE,b=-1,A=0;A<d.length;A++){var g=d[A],v=g.from.line;g.from.ch,(g.removed.length>1||g.removed[0].indexOf(s)>=0)&&(m=Math.min(m,v),b=Math.max(b,v)),g.text.length>1?(m=Math.min(m,v),b=Math.max(b,v+g.text.length-1)):g.text[0].indexOf(s)>=0&&(m=Math.min(m,v),b=Math.max(b,v))}b=Math.min(b,this.codeMirror.lineCount()-1),this.markLineSentinelCharactersForChangedLines_(m,b)},i.prototype.markLineSentinelCharactersForChangedLines_=function(d,m){if(d<Number.MAX_VALUE)for(;d>0&&this.lineIsListItemOrIndented_(d-1);)d--;if(m>-1)for(var b=this.codeMirror.lineCount();m+1<b&&this.lineIsListItemOrIndented_(m+1);)m++;for(var A=[],g=this.codeMirror,v=d;v<=m;v++){var O=g.getLine(v),_=g.getLineHandle(v);if(g.removeLineClass(_,"text",".*"),O.length>0)for(var x=O.indexOf(s);x>=0;){for(var T=x;x<O.length&&O[x]===s;){for(var E=g.findMarksAt({line:v,ch:x}),S=0;S<E.length;S++)E[S].isForLineSentinel&&E[S].clear();x++}this.markLineSentinelCharacters_(v,T,x,A),x=O.indexOf(s,x)}else A=[]}return m},i.prototype.markLineSentinelCharacters_=function(d,m,b,A){var g=this.codeMirror,v=null,C=null,O=function(){var B=C.find();return B?B.from.line:null};if(m===0){var _=this.getLineAttributes_(d),x=_[Qe.LIST_TYPE],T=_[Qe.LINE_INDENT]||0;for(x&&T===0&&(T=1);T>=A.length;)A.push(1);x==="o"?(v=this.makeOrderedListElement_(A[T]),A[T]++):x==="u"?(v=this.makeUnorderedListElement_(),A[T]=1):x==="t"?(v=this.makeTodoListElement_(!1,O),A[T]=1):x==="tc"&&(v=this.makeTodoListElement_(!0,O),A[T]=1);var E=this.getClassNameForAttributes_(_);E!==""&&this.codeMirror.addLineClass(d,"text",E),A[T+1]=1}var S={inclusiveLeft:!0,collapsed:!0};v&&(S.replacedWith=v);var C=g.markText({line:d,ch:m},{line:d,ch:b},S);C.isForLineSentinel=!0},i.prototype.makeOrderedListElement_=function(d){return _e.elt("div",d+".",{class:"firepad-list-left"})},i.prototype.makeUnorderedListElement_=function(){return _e.elt("div","\u2022",{class:"firepad-list-left"})},i.prototype.toggleTodo=function(d){var m=Qe.LIST_TYPE,b=this.getCurrentLineAttributes_(),A;!(m in b)||b[m]!=="t"&&b[m]!=="tc"?A="t":b[m]==="t"?A="tc":b[m]==="tc"&&(A=d?"t":!1),this.setLineAttribute(m,A)},i.prototype.makeTodoListElement_=function(d,m){var b={type:"checkbox",class:"firepad-todo-left"};d&&(b.checked=!0);var A=_e.elt("input",!1,b),g=this;return _e.on(A,"click",_e.stopEventAnd(function(v){g.codeMirror.setCursor({line:m(),ch:1}),g.toggleTodo(!0)})),A},i.prototype.lineIsListItemOrIndented_=function(d){var m=this.getLineAttributes_(d);return(m[Qe.LIST_TYPE]||!1)!==!1||(m[Qe.LINE_INDENT]||0)!==0},i.prototype.onCursorActivity_=function(){var d=this;setTimeout(function(){d.updateCurrentAttributes_()},1)},i.prototype.getCurrentAttributes_=function(){return this.currentAttributes_||this.updateCurrentAttributes_(),this.currentAttributes_},i.prototype.updateCurrentAttributes_=function(){var d=this.codeMirror,m=d.indexFromPos(d.getCursor("anchor")),b=d.indexFromPos(d.getCursor("head")),A=b;if(m>b){for(;A<this.end();){var g=this.getRange(A,A+1);if(g!==`
`&&g!==s)break;A++}A<this.end()&&A++}else for(;A>0&&(g=this.getRange(A-1,A),!(g!==`
`&&g!==s));)A--;var v=this.annotationList_.getAnnotatedSpansForPos(A);this.currentAttributes_={};var O={};v.length>0&&!(Qe.LINE_SENTINEL in v[0].annotation.attributes)?O=v[0].annotation.attributes:v.length>1&&(_e.assert(!(Qe.LINE_SENTINEL in v[1].annotation.attributes),"Cursor can't be between two line sentinel characters."),O=v[1].annotation.attributes);for(var _ in O)_!=="l"&&_!=="lt"&&_!=="li"&&_.indexOf(Qe.ENTITY_SENTINEL)!==0&&(this.currentAttributes_[_]=O[_])},i.prototype.getCurrentLineAttributes_=function(){var d=this.codeMirror,m=d.getCursor("anchor"),b=d.getCursor("head"),A=b.line;return b.ch===0&&m.line<b.line&&A--,this.getLineAttributes_(A)},i.prototype.getLineAttributes_=function(d){var m={},b=this.codeMirror.getLine(d);if(b.length>0&&b[0]===s){var A=this.codeMirror.indexFromPos({line:d,ch:0}),g=this.annotationList_.getAnnotatedSpansForSpan(new Gr(A,1));_e.assert(g.length===1);for(var v in g[0].annotation.attributes)m[v]=g[0].annotation.attributes[v]}return m},i.prototype.clearAnnotations_=function(){this.annotationList_.updateSpan(new Gr(0,this.end()),function(d,m){return new h({})})},i.prototype.newline=function(){var d=this.codeMirror,m=this;if(!this.emptySelection_())d.replaceSelection(`
`,"end","+input");else{var b=d.getCursor("head").line,A=this.getLineAttributes_(b),g=A[Qe.LIST_TYPE];g&&d.getLine(b).length===1?this.updateLineAttributes(b,b,function(v){delete v[Qe.LIST_TYPE],delete v[Qe.LINE_INDENT]}):(d.replaceSelection(`
`,"end","+input"),this.updateLineAttributes(b+1,b+1,function(v){for(var O in A)v[O]=A[O];g==="tc"&&(v[Qe.LIST_TYPE]="t"),m.trigger("newLine",{line:b+1,attr:v})}))}},i.prototype.deleteLeft=function(){var d=this.codeMirror,m=d.getCursor("head"),b=this.getLineAttributes_(m.line),A=b[Qe.LIST_TYPE],g=b[Qe.LINE_INDENT],v=this.emptySelection_()&&m.ch===1;v&&A?this.updateLineAttributes(m.line,m.line,function(O){delete O[Qe.LIST_TYPE],delete O[Qe.LINE_INDENT]}):v&&g&&g>0?this.unindent():d.deleteH(-1,"char")},i.prototype.deleteRight=function(){var d=this.codeMirror,m=d.getCursor("head"),b=d.getLine(m.line),A=this.areLineSentinelCharacters_(b),g=m.line+1<d.lineCount()?d.getLine(m.line+1):"";this.emptySelection_()&&A&&g[0]===s?(d.replaceRange("",{line:m.line,ch:0},{line:m.line+1,ch:0},"+input"),d.setCursor({line:m.line,ch:0})):d.deleteH(1,"char")},i.prototype.indent=function(){this.updateLineAttributesForSelection(function(d){var m=d[Qe.LINE_INDENT],b=d[Qe.LIST_TYPE];m?d[Qe.LINE_INDENT]++:b?d[Qe.LINE_INDENT]=2:d[Qe.LINE_INDENT]=1})},i.prototype.unindent=function(){this.updateLineAttributesForSelection(function(d){var m=d[Qe.LINE_INDENT];m&&m>1?d[Qe.LINE_INDENT]=m-1:(delete d[Qe.LIST_TYPE],delete d[Qe.LINE_INDENT])})},i.prototype.getText=function(){return this.codeMirror.getValue().replace(new RegExp(s,"g"),"")},i.prototype.areLineSentinelCharacters_=function(d){for(var m=0;m<d.length;m++)if(d[m]!==s)return!1;return!0};function h(d){this.attributes=d||{}}h.prototype.equals=function(d){if(!(d instanceof h))return!1;var m;for(m in this.attributes)if(d.attributes[m]!==this.attributes[m])return!1;for(m in d.attributes)if(d.attributes[m]!==this.attributes[m])return!1;return!0};function f(d){for(var m in d)return!1;return!0}function p(d,m){var b=d[m];d[m]=function(){b.apply(d,arguments)}}return i}(),bX=function(n){function e(t){this.imageInsertionUI=t,this.element_=this.makeElement_()}return _e.makeEventEmitter(e,["bold","italic","underline","strike","font","font-size","color","left","center","right","unordered-list","ordered-list","todo-list","indent-increase","indent-decrease","undo","redo","insert-image"]),e.prototype.element=function(){return this.element_},e.prototype.makeButton_=function(t,r){var i=this;r=r||t;var s=_e.elt("a",[_e.elt("span","",{class:"firepad-tb-"+r})],{class:"firepad-btn"});return _e.on(s,"click",_e.stopEventAnd(function(){i.trigger(t)})),s},e.prototype.makeElement_=function(){var t=this,r=this.makeFontDropdown_(),i=this.makeFontSizeDropdown_(),s=this.makeColorDropdown_(),o=[_e.elt("div",[r],{class:"firepad-btn-group"}),_e.elt("div",[i],{class:"firepad-btn-group"}),_e.elt("div",[s],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("bold"),t.makeButton_("italic"),t.makeButton_("underline"),t.makeButton_("strike","strikethrough")],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("unordered-list","list-2"),t.makeButton_("ordered-list","numbered-list"),t.makeButton_("todo-list","list")],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("indent-decrease"),t.makeButton_("indent-increase")],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("left","paragraph-left"),t.makeButton_("center","paragraph-center"),t.makeButton_("right","paragraph-right")],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("undo"),t.makeButton_("redo")],{class:"firepad-btn-group"})];t.imageInsertionUI&&o.push(_e.elt("div",[t.makeButton_("insert-image")],{class:"firepad-btn-group"}));var a=_e.elt("div",o,{class:"firepad-toolbar-wrapper"}),l=_e.elt("div",null,{class:"firepad-toolbar"});return l.appendChild(a),l},e.prototype.makeFontDropdown_=function(){for(var t=["Arial","Comic Sans MS","Courier New","Impact","Times New Roman","Verdana"],r=[],i=0;i<t.length;i++){var s=_e.elt("span",t[i]);s.setAttribute("style","font-family:"+t[i]),r.push({content:s,value:t[i]})}return this.makeDropdown_("Font","font",r)},e.prototype.makeFontSizeDropdown_=function(){for(var t=[9,10,12,14,18,24,32,42],r=[],i=0;i<t.length;i++){var s=_e.elt("span",t[i].toString());s.setAttribute("style","font-size:"+t[i]+"px; line-height:"+(t[i]-6)+"px;"),r.push({content:s,value:t[i]})}return this.makeDropdown_("Size","font-size",r,"px")},e.prototype.makeColorDropdown_=function(){for(var t=["black","red","green","blue","yellow","cyan","magenta","grey"],r=[],i=0;i<t.length;i++){var s=_e.elt("div");s.className="firepad-color-dropdown-item",s.setAttribute("style","background-color:"+t[i]),r.push({content:s,value:t[i]})}return this.makeDropdown_("Color","color",r)},e.prototype.makeDropdown_=function(t,r,i,s){s=s||"";var o=this,a=_e.elt("a",t+" \u25BE",{class:"firepad-btn firepad-dropdown"}),l=_e.elt("ul",[],{class:"firepad-dropdown-menu"});a.appendChild(l);var c=!1;function u(){c||(l.style.display="block",_e.on(document,"click",f,!0),c=!0)}var h=!1;function f(){c&&(l.style.display="",_e.off(document,"click",f,!0),c=!1),h=!0,setTimeout(function(){h=!1},0)}function p(A,g){typeof A!="object"&&(A=document.createTextNode(String(A)));var v=_e.elt("a",[A]);_e.on(v,"click",_e.stopEventAnd(function(){f(),o.trigger(r,g+s)})),l.appendChild(v)}for(var d=0;d<i.length;d++){var m=i[d].content,b=i[d].value;p(m,b)}return _e.on(a,"click",_e.stopEventAnd(function(){h||u()})),a},e}(),ER=function(){class n{constructor(t){var r;this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),this.ace=t,this.aceSession=this.ace.getSession(),this.aceDoc=this.aceSession.getDocument(),this.aceDoc.setNewLineMode("unix"),this.grabDocumentState(),this.ace.on("change",this.onChange),this.ace.on("blur",this.onBlur),this.ace.on("focus",this.onFocus),this.aceSession.selection.on("changeCursor",this.onCursorActivity),this.aceRange==null&&(this.aceRange=((r=ace.require)!=null?r:require)("ace/range").Range)}grabDocumentState(){return this.lastDocLines=this.aceDoc.getAllLines(),this.lastCursorRange=this.aceSession.selection.getRange()}detach(){return this.ace.removeListener("change",this.onChange),this.ace.removeListener("blur",this.onBlur),this.ace.removeListener("focus",this.onFocus),this.aceSession.selection.removeListener("changeCursor",this.onCursorActivity)}onChange(t){var r;if(!this.ignoreChanges)return r=this.operationFromACEChange(t),this.trigger("change",...r),this.grabDocumentState()}onBlur(){if(this.ace.selection.isEmpty())return this.trigger("blur")}onFocus(){return this.trigger("focus")}onCursorActivity(){return setTimeout(()=>this.trigger("cursorActivity"),0)}operationFromACEChange(t){var r,i,s,o,a,l,c;return t.data?(i=t.data,(o=i.action)==="insertLines"||o==="removeLines"?(c=i.lines.join(`
`)+`
`,i.action.replace("Lines","")):(c=i.text.replace(this.aceDoc.getNewLineCharacter(),`
`),i.action.replace("Text","")),l=this.indexFromPos(i.range.start)):(c=t.lines.join(`
`),l=this.indexFromPos(t.start)),a=this.lastDocLines.join(`
`).length-l,t.action==="remove"&&(a-=c.length),s=new Vt().retain(l).insert(c).retain(a),r=new Vt().retain(l).delete(c).retain(a),t.action==="remove"?[r,s]:[s,r]}applyOperationToACE(t){var r,i,s,o,a,l,c,u;for(i=0,c=t.ops,s=0,o=c.length;s<o;s++)a=c[s],a.isRetain()?i+=a.chars:a.isInsert()?(this.aceDoc.insert(this.posFromIndex(i),a.text),i+=a.text.length):a.isDelete()&&(r=this.posFromIndex(i),u=this.posFromIndex(i+a.chars),l=this.aceRange.fromPoints(r,u),this.aceDoc.remove(l));return this.grabDocumentState()}posFromIndex(t){var r,i,s,o,a;for(o=this.aceDoc.$lines,a=r=0,i=o.length;r<i&&(s=o[a],!(t<=s.length));a=++r)t-=s.length+1;return{row:a,column:t}}indexFromPos(t,r){var i,s,o,a;for(r==null&&(r=this.lastDocLines),s=0,i=o=0,a=t.row;0<=a?o<a:o>a;i=0<=a?++o:--o)s+=this.lastDocLines[i].length+1;return s+=t.column}getValue(){return this.aceDoc.getValue()}getCursor(){var t,r,i;try{i=this.indexFromPos(this.aceSession.selection.getRange().start,this.aceDoc.$lines),r=this.indexFromPos(this.aceSession.selection.getRange().end,this.aceDoc.$lines)}catch{try{i=this.indexFromPos(this.lastCursorRange.start),r=this.indexFromPos(this.lastCursorRange.end)}catch(o){t=o,console.log("Couldn't figure out the cursor range:",t,"-- setting it to 0:0."),[i,r]=[0,0]}}return i>r&&([i,r]=[r,i]),new ou(i,r)}setCursor(t){var r,i;return i=this.posFromIndex(t.position),r=this.posFromIndex(t.selectionEnd),t.position>t.selectionEnd&&([i,r]=[r,i]),this.aceSession.selection.setSelectionRange(new this.aceRange(i.row,i.column,r.row,r.column))}setOtherCursor(t,r,i){var s,o,a,l,c,u,h;return this.otherCursors==null&&(this.otherCursors={}),a=this.otherCursors[i],a&&(a.start.detach(),a.end.detach(),this.aceSession.removeMarker(a.id)),h=this.posFromIndex(t.position),l=this.posFromIndex(t.selectionEnd),t.selectionEnd<t.position&&([h,l]=[l,h]),s=`other-client-selection-${r.replace("#","")}`,c=t.position===t.selectionEnd,c&&(s=s.replace("selection","cursor")),o=`.${s} {
  position: absolute;
  background-color: ${c?"transparent":r};
  border-left: 2px solid ${r};
}`,this.addStyleRule(o),this.otherCursors[i]=a=new this.aceRange(h.row,h.column,l.row,l.column),u=this,a.clipRows=function(){var f;return f=u.aceRange.prototype.clipRows.apply(this,arguments),f.isEmpty=function(){return!1},f},a.start=this.aceDoc.createAnchor(a.start),a.end=this.aceDoc.createAnchor(a.end),a.id=this.aceSession.addMarker(a,s,"text"),{clear:()=>(a.start.detach(),a.end.detach(),this.aceSession.removeMarker(a.id))}}addStyleRule(t){var r;if(!(typeof document=="undefined"||document===null)&&(this.addedStyleRules||(this.addedStyleRules={},r=document.createElement("style"),document.documentElement.getElementsByTagName("head")[0].appendChild(r),this.addedStyleSheet=r.sheet),!this.addedStyleRules[t]))return this.addedStyleRules[t]=!0,this.addedStyleSheet.insertRule(t,0)}registerCallbacks(t){this.callbacks=t}trigger(t,...r){var i,s;return(i=this.callbacks)!=null&&(s=i[t])!=null?s.apply(this,r):void 0}applyOperation(t){return t.isNoop()||(this.ignoreChanges=!0),this.applyOperationToACE(t),this.ignoreChanges=!1}registerUndo(t){return this.ace.undo=t}registerRedo(t){return this.ace.redo=t}invertOperation(t){return t.invert(this.getValue())}}return n.prototype.ignoreChanges=!1,n}();var zx=function(e,t,r){return"."+e+` {
  position: relative;
background-color: `+t+`;
border-left: 2px solid `+r+`;
}`},jx=function(e,t){if(typeof document=="undefined"||document===null)return!1;if(this.addedStyleRules.indexOf(e)===-1){var r=document.createElement("style"),i=document.createTextNode(t);r.appendChild(i),document.head.appendChild(r),this.addedStyleRules.push(e)}},CR=function(){function n(e){if(!e||typeof e.getModel!="function")throw new Error("MonacoAdapter: Incorrect Parameter Recieved in constructor, expected valid Monaco Instance");this.monaco=e,this.monacoModel=this.monaco.getModel(),this.lastDocLines=this.monacoModel.getLinesContent(),this.lastCursorRange=this.monaco.getSelection(),this.callbacks={},this.otherCursors=[],this.addedStyleRules=[],this.ignoreChanges=!1,this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),this.changeHandler=this.monaco.onDidChangeModelContent(this.onChange),this.didBlurHandler=this.monaco.onDidBlurEditorWidget(this.onBlur),this.didFocusHandler=this.monaco.onDidFocusEditorWidget(this.onFocus),this.didChangeCursorPositionHandler=this.monaco.onDidChangeCursorPosition(this.onCursorActivity)}return n.prototype.detach=function(){this.changeHandler.dispose(),this.didBlurHandler.dispose(),this.didFocusHandler.dispose(),this.didChangeCursorPositionHandler.dispose()},n.prototype.getCursor=function(){var t=this.monaco.getSelection();(typeof t=="undefined"||t===null)&&(t=this.lastCursorRange);var r=t.getStartPosition(),i=t.getEndPosition(),s=this.monacoModel.getOffsetAt(r),o=this.monacoModel.getOffsetAt(i);if(s>o){var a=[o,s];s=a[0],o=a[1]}return new ou(s,o)},n.prototype.setCursor=function(t){var r=t.position,i=t.selectionEnd,s=this.monacoModel.getPositionAt(r),o=this.monacoModel.getPositionAt(i);if(r>i){var a=[o,s];s=a[0],o=a[1]}this.monaco.setSelection(new monaco.Range(s.lineNumber,s.column,o.lineNumber,o.column))},n.prototype.setOtherCursor=function(t,r,i){if(typeof t!="object"||typeof t.position!="number"||typeof t.selectionEnd!="number"||typeof r!="string"||!r.match(/^#[a-fA-F0-9]{3,6}$/))return!1;var s=t.position,o=t.selectionEnd;if(s<0||o<0)return!1;var a=this.otherCursors.find(function(m){return m.clientID===i});a||(a={clientID:i,decoration:[]},this.otherCursors.push(a)),a.decoration=this.monaco.deltaDecorations(a.decoration,[]);var l="other-client-selection-"+r.replace("#",""),c,u;s===o?(l=l.replace("selection","cursor"),c=zx(l,"transparent",r),u=jx.call(this,l,c)):(c=zx(l,r,r),u=jx.call(this,l,c)),u==!1&&console.log(`Monaco Adapter: Failed to add some css style.
Please make sure you're running on supported environment.`);var h=this.monacoModel.getPositionAt(s),f=this.monacoModel.getPositionAt(o);if(s>o){var p=[f,h];h=p[0],f=p[1]}a.decoration=this.monaco.deltaDecorations(a.decoration,[{range:new monaco.Range(h.lineNumber,h.column,f.lineNumber,f.column),options:{className:l}}]);var d=this;return{clear:function(){a.decoration=d.monaco.deltaDecorations(a.decoration,[])}}},n.prototype.registerCallbacks=function(t){this.callbacks=Object.assign({},this.callbacks,t)},n.prototype.registerUndo=function(t){if(typeof t=="function")this.callbacks.undo=t;else throw new Error("MonacoAdapter: registerUndo method expects a callback function in parameter")},n.prototype.registerRedo=function(t){if(typeof t=="function")this.callbacks.redo=t;else throw new Error("MonacoAdapter: registerRedo method expects a callback function in parameter")},n.prototype.operationFromMonacoChanges=function(t,r,i){var s=t.text,o=t.rangeLength,a=t.rangeOffset,l=r.length+i-a,c,u,h;return s.length===0&&o>0?(h=r.slice(a,a+o),c=new Vt().retain(a).delete(o).retain(l-o),u=new Vt().retain(a).insert(h).retain(l-o)):s.length>0&&o>0?(h=r.slice(a,a+o),c=new Vt().retain(a).delete(o).insert(s).retain(l-o),u=new Vt().retain(a).delete(s.length).insert(h).retain(l-o)):(c=new Vt().retain(a).insert(s).retain(l),u=new Vt().retain(a).delete(s).retain(l)),[c,u]},n.prototype.onChange=function(t){var r=this;if(!this.ignoreChanges){var i=this.lastDocLines.join(this.monacoModel.getEOL()),s=0;if(!t.changes){var o=new Vt().retain(i.length);this.trigger("change",o,o)}t.changes.forEach(function(a){var l=r.operationFromMonacoChanges(a,i,s);s+=l[0].targetLength-l[0].baseLength,r.trigger.apply(r,["change"].concat(l))}),this.lastDocLines=this.monacoModel.getLinesContent()}},n.prototype.trigger=function(t){if(!!this.callbacks.hasOwnProperty(t)){var r=this.callbacks[t];if(!typeof r!=="function"){var i=[];if(arguments.length>1)for(var s=1;s<arguments.length;s++)i.push(arguments[s]);r.apply(null,i)}}},n.prototype.onBlur=function(){this.monaco.getSelection().isEmpty()&&this.trigger("blur")},n.prototype.onFocus=function(){this.trigger("focus")},n.prototype.onCursorActivity=function(){var t=this;setTimeout(function(){return t.trigger("cursorActivity")},1)},n.prototype.applyOperation=function(t){t.isNoop()||(this.ignoreChanges=!0);var r=t.ops,i=0,s=this;r.forEach(function(o){if(o.isRetain())i+=o.chars;else if(o.isInsert()){var a=s.monacoModel.getPositionAt(i);s.monaco.executeEdits("my-source",[{range:new monaco.Range(a.lineNumber,a.column,a.lineNumber,a.column),text:o.text,forceMoveMarkers:!0}]),i+=o.text.length}else if(o.isDelete()){var l=s.monacoModel.getPositionAt(i),c=s.monacoModel.getPositionAt(i+o.chars);s.monaco.executeEdits("my-source",[{range:new monaco.Range(l.lineNumber,l.column,c.lineNumber,c.column),text:"",forceMoveMarkers:!0}])}}),this.lastDocLines=this.monacoModel.getLinesContent(),this.ignoreChanges=!1},n.prototype.invertOperation=function(t){t.invert(this.getValue())},n}();const Hx=n=>{n.cm.dispatch({effects:et.appendConfig.of(n.cm.constructor.updateListener.of(e=>{if(e.docChanged&&!(e.transactions[0]&&e.transactions[0].annotations.some(t=>t.type=="firepad"))){let t=0,r=new Vt,i=new Vt;e.changes.toJSON().forEach(s=>{if(typeof s=="number")s!=0&&(t+=s,r=r.retain(s),i=i.retain(s));else if(typeof s=="object"){const[o,...a]=s;if(o>0&&(r=r.delete(o),i=i.insert(e.startState.sliceDoc(t,t+o))),a){const l=a.join(`
`);r=r.insert(l),i=i.delete(l.length)}}}),n.trigger("change",r,i)}n.lastDocLines=n.cm.state.doc.text}))})};var vX=function(){function n(e,t={}){this.isFirstTime=!!t.recreateWith,this.options=t,this.cm=e,this.lastDocLines=this.cm.state.doc.text,this.lastCursorRange=this.cm.state.selection.main,this.callbacks={},this.otherCursors=[],this.addedStyleRules=[],this.ignoreChanges=!1,this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),Hx(this)}return n.prototype.detach=function(){},n.prototype.getCursor=function(){var t=this.cm.state.selection.main;(typeof t=="undefined"||t===null)&&(t=this.lastCursorRange);var r=t.from,i=t.to;if(r>i){var s=[i,r];r=s[0],i=s[1]}return new ou(r,i)},n.prototype.setCursor=function(t){var r=t.position,i=t.selectionEnd;this.cm.dispatch({selection:{anchor:r,head:i}})},n.prototype.setOtherCursor=function(t,r,i){},n.prototype.registerCallbacks=function(t){this.callbacks=Object.assign({},this.callbacks,t)},n.prototype.registerUndo=function(t){if(typeof t=="function")this.callbacks.undo=t;else throw new Error("CodeMirror6Adapter: registerUndo method expects a callback function in parameter")},n.prototype.registerRedo=function(t){if(typeof t=="function")this.callbacks.redo=t;else throw new Error("CodeMirror6Adapter: registerRedo method expects a callback function in parameter")},n.prototype.trigger=function(t){if(!!this.callbacks.hasOwnProperty(t)){var r=this.callbacks[t];if(!typeof r!=="function"){var i=[];if(arguments.length>1)for(var s=1;s<arguments.length;s++)i.push(arguments[s]);r.apply(null,i)}}},n.prototype.onBlur=function(){this.monaco.getSelection().isEmpty()&&this.trigger("blur")},n.prototype.onFocus=function(){this.trigger("focus")},n.prototype.onCursorActivity=function(){var t=this;setTimeout(function(){return t.trigger("cursorActivity")},1)},n.prototype.applyOperation=function(t){console.log("dsvbgbgfbgfb"),t.isNoop()||(this.ignoreChanges=!0);var r=t.ops,i=0,s=this;r.forEach(function(o){o.isRetain()?i+=o.chars:o.isInsert()?(s.isFirstTime&&(s.isFirstTime=!1,s.cm.setState(ft.create({doc:(s.lastDocLines||[]).join(`
`),extensions:s.options.recreateWith})),Hx(s)),s.cm.dispatch({annotations:[new Di("firepad",!0)],changes:{from:i,to:i,insert:o.text}}),console.log("inserted"+o.text),i+=o.text.length):o.isDelete()&&s.cm.dispatch({annotations:[new Di("firepad",!0)],changes:{from:i,to:i+o.chars,insert:""}})}),console.log(this.cm.state.doc.text),this.lastDocLines=this.cm.state.doc.text,this.ignoreChanges=!1},n.prototype.invertOperation=function(t){t.invert(this.getValue())},n}();/*!
 * Firepad is an open-source, collaborative code and text editor. It was designed
 * to be embedded inside larger applications. Since it uses Firebase as a backend,
 * it requires no server-side code and can be added to any web app simply by
 * including a couple JavaScript files.
 *
 * http://www.firepad.io/
 * License: MIT
 * Copyright: 2014 Firebase
 * With code from ot.js (Copyright 2012-2013 Tim Baumann)
 */let di;try{di=Function("return this")()}catch{di=window}const IR=function(){var n=di.CodeMirror,e=di.ace;di.monaco;function t(o,a,l){if(!(this instanceof t))return new t(o,a,l);if(!n&&!e&&!di.monaco&&a.type!=="CodeMirror6")throw new Error("Couldn't find CodeMirror, ACE or Monaco.  Did you forget to include codemirror.js/ace.js or import monaco?");if(this.zombie_=!1,a.type==="CodeMirror6"){if(this.codeMirror6_=this.editor_=a.editor,this.codeMirror6_.state.doc.toString()!=="")throw new Error("Can't initialize Firepad with a CodeMirror6 instance that already contains text.")}else if(n&&a instanceof n){this.codeMirror_=this.editor_=a;var c=this.codeMirror_.getValue();if(c!=="")throw new Error("Can't initialize Firepad with a CodeMirror instance that already contains text.")}else if(e&&a&&a.session instanceof e.EditSession){if(this.ace_=this.editor_=a,c=this.ace_.getValue(),c!=="")throw new Error("Can't initialize Firepad with an ACE instance that already contains text.")}else if(di.monaco&&a&&a instanceof di.monaco.constructor){if(di.monaco,this.monaco_=this.editor_=a,c=this.monaco_.getValue(),c!=="")throw new Error("Can't initialize Firepad with a Monaco instance that already contains text.")}else this.codeMirror_=this.editor_=new n(a);var u;this.codeMirror6_?u=this.codeMirror6_.dom:this.codeMirror_?u=this.codeMirror_.getWrapperElement():this.ace_?u=this.ace_.container:u=this.monaco_.getDomNode(),this.firepadWrapper_=_e.elt("div",null,{class:"firepad"}),u.parentNode.replaceChild(this.firepadWrapper_,u),this.firepadWrapper_.appendChild(u),this.editor_.firepad=this,this.options_=l||{},this.getOption("richTextShortcuts",!1)&&(n.keyMap.richtext||this.initializeKeyMap_(),this.codeMirror_.setOption("keyMap","richtext"),this.firepadWrapper_.className+=" firepad-richtext"),this.imageInsertionUI=this.getOption("imageInsertionUI",!0),this.getOption("richTextToolbar",!1)&&(this.addToolbar_(),this.firepadWrapper_.className+=" firepad-richtext firepad-with-toolbar"),this.addPoweredByLogo_(),this.codeMirror_&&this.codeMirror_.refresh();var h=this.getOption("userId",o.push().key),f=this.getOption("userColor",r(h));this.entityManager_=new dX,this.firebaseAdapter_=new fX(o,h,f),this.codeMirror6_?this.editorAdapter_=new vX(this.codeMirror6_,this.options_):this.codeMirror_?(this.richTextCodeMirror_=new OX(this.codeMirror_,this.entityManager_,{cssPrefix:"firepad-"}),this.editorAdapter_=new TR(this.richTextCodeMirror_)):this.ace_?this.editorAdapter_=new ER(this.ace_):this.editorAdapter_=new CR(this.monaco_),this.client_=new SR(this.firebaseAdapter_,this.editorAdapter_);var p=this;this.firebaseAdapter_.on("cursor",function(){p.trigger.apply(p,["cursor"].concat([].slice.call(arguments)))}),this.codeMirror_&&this.richTextCodeMirror_.on("newLine",function(){p.trigger.apply(p,["newLine"].concat([].slice.call(arguments)))}),this.firebaseAdapter_.on("ready",function(){p.ready_=!0,p.ace_&&p.editorAdapter_.grabDocumentState(),p.monaco_&&p.editorAdapter_.grabDocumentState();var d=p.getOption("defaultText",null);d&&p.isHistoryEmpty()&&p.setText(d),p.trigger("ready")}),this.client_.on("synced",function(d){p.trigger("synced",d)}),navigator.appName=="Microsoft Internet Explorer"&&navigator.userAgent.match(/MSIE 8\./)&&(window.onload=function(){var d=document.getElementsByTagName("head")[0],m=document.createElement("style");m.type="text/css",m.styleSheet.cssText=":before,:after{content:none !important;}",d.appendChild(m),setTimeout(function(){d.removeChild(m)},0)})}_e.makeEventEmitter(t),t.fromCodeMirror=t,t.fromACE=t,t.fromMonaco=t,t.fromCodeMirror6=(o,a,...l)=>t(o,{type:"CodeMirror6",editor:a},...l),t.prototype.dispose=function(){this.zombie_=!0;var o;this.codeMirror_?o=this.codeMirror_.getWrapperElement():this.ace_?o=this.ace_.container:o=this.monaco_.getDomNode(),this.firepadWrapper_.removeChild(o),this.firepadWrapper_.parentNode.replaceChild(o,this.firepadWrapper_),this.editor_.firepad=null,this.codeMirror_&&this.codeMirror_.getOption("keyMap")==="richtext"&&this.codeMirror_.setOption("keyMap","default"),this.firebaseAdapter_.dispose(),this.editorAdapter_.detach(),this.richTextCodeMirror_&&this.richTextCodeMirror_.detach()},t.prototype.setUserId=function(o){this.firebaseAdapter_.setUserId(o)},t.prototype.setUserColor=function(o){this.firebaseAdapter_.setColor(o)},t.prototype.getText=function(){return this.assertReady_("getText"),this.codeMirror_?this.richTextCodeMirror_.getText():this.ace_?this.ace_.getSession().getDocument().getValue():this.monaco_.getModel().getValue()},t.prototype.setText=function(o){if(this.assertReady_("setText"),this.codeMirror6_)return this.codeMirror6_.dispatch({changes:{from:0,to:this.codeMirror6_.state.doc.length,insert:o}});if(this.monaco_)return this.monaco_.getModel().setValue(o);if(this.ace_)return this.ace_.getSession().getDocument().setValue(o);this.codeMirror_.getWrapperElement().style.display="none",this.codeMirror_.setValue(""),this.insertText(0,o),this.codeMirror_.getWrapperElement().style.display="",this.codeMirror_.refresh(),this.editorAdapter_.setCursor({position:0,selectionEnd:0})},t.prototype.insertTextAtCursor=function(o){this.insertText(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),o)},t.prototype.insertText=function(o,a){_e.assert(!this.ace_,"Not supported for ace yet."),_e.assert(!this.monaco_,"Not supported for monaco yet."),this.assertReady_("insertText"),Object.prototype.toString.call(a)!=="[object Array]"&&(a=[a]);var l=this;l.codeMirror_.operation(function(){for(var c=o===0,u=mX(c,a),h=0;h<u.length;h++){var f=u[h].string,p=u[h].attributes;l.richTextCodeMirror_.insertText(o,f,p),o+=f.length}})},t.prototype.getOperationForSpan=function(o,a){for(var l=this.richTextCodeMirror_.getRange(o,a),c=this.richTextCodeMirror_.getAttributeSpans(o,a),u=0,h=new Vt,f=0;f<c.length;f++)h.insert(l.substr(u,c[f].length),c[f].attributes),u+=c[f].length;return h},t.prototype.getHtml=function(){return this.getHtmlFromRange(null,null)},t.prototype.getHtmlFromSelection=function(){var o=this.codeMirror_.getCursor("start"),a=this.codeMirror_.getCursor("end"),l=this.codeMirror_.indexFromPos(o),c=this.codeMirror_.indexFromPos(a);return this.getHtmlFromRange(l,c)},t.prototype.getHtmlFromRange=function(o,a){this.assertReady_("getHtmlFromRange");var l=o!=null&&a!=null?this.getOperationForSpan(o,a):this.getOperationForSpan(0,this.codeMirror_.getValue().length);return pX(l,this.entityManager_)},t.prototype.insertHtml=function(o,a){var l=Ux(a,this.entityManager_);this.insertText(o,l)},t.prototype.insertHtmlAtCursor=function(o){this.insertHtml(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),o)},t.prototype.setHtml=function(o){var a=Ux(o,this.entityManager_);this.setText(a)},t.prototype.isHistoryEmpty=function(){return this.assertReady_("isHistoryEmpty"),this.firebaseAdapter_.isHistoryEmpty()},t.prototype.bold=function(){this.richTextCodeMirror_.toggleAttribute(Qe.BOLD),this.codeMirror_.focus()},t.prototype.italic=function(){this.richTextCodeMirror_.toggleAttribute(Qe.ITALIC),this.codeMirror_.focus()},t.prototype.underline=function(){this.richTextCodeMirror_.toggleAttribute(Qe.UNDERLINE),this.codeMirror_.focus()},t.prototype.strike=function(){this.richTextCodeMirror_.toggleAttribute(Qe.STRIKE),this.codeMirror_.focus()},t.prototype.fontSize=function(o){this.richTextCodeMirror_.setAttribute(Qe.FONT_SIZE,o),this.codeMirror_.focus()},t.prototype.font=function(o){this.richTextCodeMirror_.setAttribute(Qe.FONT,o),this.codeMirror_.focus()},t.prototype.color=function(o){this.richTextCodeMirror_.setAttribute(Qe.COLOR,o),this.codeMirror_.focus()},t.prototype.highlight=function(){this.richTextCodeMirror_.toggleAttribute(Qe.BACKGROUND_COLOR,"rgba(255,255,0,.65)"),this.codeMirror_.focus()},t.prototype.align=function(o){if(o!=="left"&&o!=="center"&&o!=="right")throw new Error('align() must be passed "left", "center", or "right".');this.richTextCodeMirror_.setLineAttribute(Qe.LINE_ALIGN,o),this.codeMirror_.focus()},t.prototype.orderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(Qe.LIST_TYPE,"o"),this.codeMirror_.focus()},t.prototype.unorderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(Qe.LIST_TYPE,"u"),this.codeMirror_.focus()},t.prototype.todo=function(){this.richTextCodeMirror_.toggleTodo(),this.codeMirror_.focus()},t.prototype.newline=function(){this.richTextCodeMirror_.newline()},t.prototype.deleteLeft=function(){this.richTextCodeMirror_.deleteLeft()},t.prototype.deleteRight=function(){this.richTextCodeMirror_.deleteRight()},t.prototype.indent=function(){this.richTextCodeMirror_.indent(),this.codeMirror_.focus()},t.prototype.unindent=function(){this.richTextCodeMirror_.unindent(),this.codeMirror_.focus()},t.prototype.undo=function(){this.codeMirror_.undo()},t.prototype.redo=function(){this.codeMirror_.redo()},t.prototype.insertEntity=function(o,a,l){this.richTextCodeMirror_.insertEntityAtCursor(o,a,l)},t.prototype.insertEntityAt=function(o,a,l,c){this.richTextCodeMirror_.insertEntityAt(o,a,l,c)},t.prototype.registerEntity=function(o,a){this.entityManager_.register(o,a)},t.prototype.getOption=function(o,a){return o in this.options_?this.options_[o]:a},t.prototype.assertReady_=function(o){if(!this.ready_)throw new Error('You must wait for the "ready" event before calling '+o+".");if(this.zombie_)throw new Error("You can't use a Firepad after calling dispose()!  [called "+o+"]")},t.prototype.makeImageDialog_=function(){this.makeDialog_("img","Insert image url")},t.prototype.makeDialog_=function(o,a){var l=this,c=function(){var A=document.getElementById("overlay");A.style.visibility="hidden",l.firepadWrapper_.removeChild(A)},u=function(){var A=document.getElementById("overlay");A.style.visibility="hidden";var g=document.getElementById(o).value;g!==null&&l.insertEntity(o,{src:g}),l.firepadWrapper_.removeChild(A)},h=_e.elt("input",null,{class:"firepad-dialog-input",id:o,type:"text",placeholder:a,autofocus:"autofocus"}),f=_e.elt("a","Submit",{class:"firepad-btn",id:"submitbtn"});_e.on(f,"click",_e.stopEventAnd(u));var p=_e.elt("a","Cancel",{class:"firepad-btn"});_e.on(p,"click",_e.stopEventAnd(c));var d=_e.elt("div",[f,p],{class:"firepad-btn-group"}),m=_e.elt("div",[h,d],{class:"firepad-dialog-div"}),b=_e.elt("div",[m],{class:"firepad-dialog",id:"overlay"});this.firepadWrapper_.appendChild(b)},t.prototype.addToolbar_=function(){this.toolbar=new bX(this.imageInsertionUI),this.toolbar.on("undo",this.undo,this),this.toolbar.on("redo",this.redo,this),this.toolbar.on("bold",this.bold,this),this.toolbar.on("italic",this.italic,this),this.toolbar.on("underline",this.underline,this),this.toolbar.on("strike",this.strike,this),this.toolbar.on("font-size",this.fontSize,this),this.toolbar.on("font",this.font,this),this.toolbar.on("color",this.color,this),this.toolbar.on("left",function(){this.align("left")},this),this.toolbar.on("center",function(){this.align("center")},this),this.toolbar.on("right",function(){this.align("right")},this),this.toolbar.on("ordered-list",this.orderedList,this),this.toolbar.on("unordered-list",this.unorderedList,this),this.toolbar.on("todo-list",this.todo,this),this.toolbar.on("indent-increase",this.indent,this),this.toolbar.on("indent-decrease",this.unindent,this),this.toolbar.on("insert-image",this.makeImageDialog_,this),this.firepadWrapper_.insertBefore(this.toolbar.element(),this.firepadWrapper_.firstChild)},t.prototype.addPoweredByLogo_=function(){var o=_e.elt("a",null,{class:"powered-by-firepad"});o.setAttribute("href","http://www.firepad.io/"),o.setAttribute("target","_blank"),this.firepadWrapper_.appendChild(o)},t.prototype.initializeKeyMap_=function(){function o(a){return function(l){setTimeout(function(){a.call(l.firepad)},0)}}n.keyMap.richtext={"Ctrl-B":o(this.bold),"Cmd-B":o(this.bold),"Ctrl-I":o(this.italic),"Cmd-I":o(this.italic),"Ctrl-U":o(this.underline),"Cmd-U":o(this.underline),"Ctrl-H":o(this.highlight),"Cmd-H":o(this.highlight),Enter:o(this.newline),Delete:o(this.deleteRight),Backspace:o(this.deleteLeft),Tab:o(this.indent),"Shift-Tab":o(this.unindent),fallthrough:["default"]}};function r(o){for(var a=1,l=0;l<o.length;l++)a=17*(a+o.charCodeAt(l))%360;var c=a/360;return s(c,1,.75)}function i(o,a,l){function c(u){var h=Math.round(255*u).toString(16);return h.length===1?"0"+h:h}return"#"+c(o)+c(a)+c(l)}function s(o,a,l){if(a===0)return i(l,l,l);var c=l<.5?l*(1+a):l+a-a*l,u=2*l-c,h=function(f){return f<0&&(f+=1),f>1&&(f-=1),6*f<1?u+(c-u)*6*f:2*f<1?c:3*f<2?u+(c-u)*6*(2/3-f):u};return i(h(o+1/3),h(o),h(o-1/3))}return t}();Object.assign(IR,{Formatting:Lf,Text:Nf,Entity:ea,LineFormatting:Rc,Line:_b,TextOperation:Vt,RichTextCodeMirrorAdapter:TR,ACEAdapter:ER,MonacoAdapter:CR});let Yr=null,Zm=null;const Nr=Nt(!1),h0=H0(500,null),RR=Nt(""),Ua=kr([Ao,Vn],([n,e])=>{const t=Yr==null?void 0:Yr.state.doc.toString().length;let r=(Yr==null?void 0:Yr.state.doc.lineAt(Math.min(n.from,Math.max(0,t-1))).number)-1,i="";for(const[s,o]of e.chapters.entries())if(o.contentStart<=r)i=s;else return i;return i}),wX=kr([Ua,Vn],([n,e])=>{if(n=="")return" ";const t=e.chapters.get(n);return n+(t.title?" - "+t.title:"")}),QR=n=>{At.set(n.book),Ao.set({from:0,to:0}),[Yr]=B2(n.book),Wc.set(!0)},AX=n=>{try{Ao.set({from:0,to:0});let e=[];[Yr,e]=B2("");const t=Ac.initializeApp(n),r=Ac.database(t);window.db=r,Zm=IR.fromCodeMirror6(r.ref(n.book),Yr,{defaultText:Sn(Kt)("books.fire").replace("%1",n.book),recreateWith:e}),Zm.on("ready",function(){Wc.set(!0)}),Zm.on("synced",function(i){i?h0.set(!0):h0.lazySet(!1)})}catch(e){RR.set(e.toString())}},ht=()=>Yr,qm=jS.parse(location.hash),Sa="mage-firebase-lastsessions",qi=new j0("magebook2");qi.version(1).stores({sessions:"&id, time, preview",fireSessions:"&id, time, preview"});const PR=Nt(!1),_X=async()=>(await qi.sessions.orderBy("preview").keys()).reverse().map(n=>({time:new Date(Number(n.substr(0,30))),id:n.substr(31,20),name:n.substr(52,30)})),Vd=new function(){let n;const t=ku(20),r=c=>{const u=(c.data.title||"no title").padEnd(30,"").substr(0,30);return`${String(c.time).padStart(30,"0")}-${c.id}-${u}`},i=50,s=async()=>{const c="time",u=(await qi.sessions.orderBy(c).keys()).reverse();if(u.length>i){const h=u[i];await qi.sessions.where("time").below(h).modify(function(){delete this.value})}};let o;const a=async()=>{if(qm.fsession){PR.set(!0),window.addEventListener("hashchange",()=>{window.location.reload()},!1),AX(JSON.parse(T$(decodeURIComponent(qm.fsession)))),Wc.subscribe(h=>{if(h){const f=JSON.parse(localStorage[Sa]||"{}");f[qm.fsession]={name:Oi.properties.title,time:new Date().getTime()},localStorage[Sa]=JSON.stringify(f)}});return}if(o){console.error("Session loaded twice!");return}const c=localStorage.getItem("mage-session-last");o=await(async()=>{const h="msession=";if(!c)return ku(20);if(window.location.hash&&window.location.hash.includes(h)){const f=window.location.hash.indexOf(h)+h.length;if(!(f+20>window.location.hash.length)){const p=window.location.hash.substr(f,20);if(p==c)return p;try{if(await qi.sessions.get(p))return p}catch{}}}return c||ku(20)})(),location.replace(`#msession=${o}`),window.addEventListener("hashchange",()=>{window.location.hash.includes(`#msession=${o}`)||window.location.reload()},!1),localStorage.setItem("mage-session-last",o),localStorage.setItem(`mage-lock-${o}`,t);let u;if(c==o)u=JSON.parse(localStorage.getItem("mage-session-last-data"));else try{u=await qi.sessions.get(o)}catch{}u=u||{data:{book:Sn(Kt)("books.local"),cursor:{row:0,column:0}}},QR(u.data),n=kr([At,Ao,Vn],([h,f,p])=>({book:h,cursor:f,title:p.properties.title})),n.subscribe(async h=>{if(localStorage.getItem(`mage-lock-${o}`)!=t){ug.set({lock:!0,session:this});return}localStorage.setItem("mage-session-last",o);const f={id:o,data:h,time:new Date().getTime()};localStorage.setItem("mage-session-last-data",JSON.stringify(f));try{await qi.sessions.put(Hi({preview:r(f)},f))}catch(p){console.log(p)}}),window.onbeforeunload=h=>{At.flush(),delete h.returnValue},setInterval(()=>At.flush(),1e4),s()},l=async c=>{window.onbeforeunload=()=>{};const u=ku(20);localStorage.setItem("mage-session-last",u);const h=Hi({id:u,file:{name:"New"},time:new Date().getTime()},c);localStorage.setItem("mage-session-last-data",JSON.stringify(h));try{await qi.sessions.put(h)}catch{}location.assign(`#msession=${h.id}`)};this.duplicate=async c=>{l(Hi({data:Sn(n)},c))},this.lock=()=>{localStorage.setItem(`mage-lock-${o}`,t),ug.set({lock:!1}),At.refresh()},Object.assign(this,{sessionName:o,load:a,open:l})},DR={md:A0,xlgc:dg,fodt:wM,docx:kM,html:CM},xX=n=>{const e=n.files[0],t=e.name,r=new FileReader;r.onload=async()=>{const i=t.substr(t.lastIndexOf(".")+1);if(!["md","xlgc"].includes(i)){console.error("Unsupported format");return}const s=r.result,o=DR[i].decode(s),a=i==="md"?s:await Promise.resolve(o);Vd.open({data:{book:a,cursor:{row:0,column:0},title:o.title}}),n.value=""},r.readAsText(e)},pi=async(n,e)=>{const t=DR[n],r=A0.decode(e);nM(r.properties.disableShortLinks&&r.properties.disableShortLinks.trim()=="true");const i=n==="md"?e:await Promise.resolve(t.encode(e));if(!i)return;const s=document.createElement("a");s.setAttribute("href",`data:${t.mimetype};charset=utf-8,${encodeURIComponent(i)}`),s.setAttribute("download",(r.properties.title||"magebook")+"."+n),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},LR="mage-settings",oi=JSON.parse(localStorage.getItem(LR)||"{}"),Bf=Nt(oi.theme||"light"),Mf=Nt(oi.font||"Arial"),$f=Nt(oi.fontSize||"12"),Ff=Nt(oi.pageWidth||"108"),Wf=Nt(oi.pageZoom||"120"),Uf=Nt(oi.titleHighlight||"2"),zf=Nt(oi.justifyText||"1"),jf=Nt(oi.lineSpacing||"140%"),Hf=Nt(oi.lineMargin==null?"4":oi.lineMargin),kX=kr([Bf,Mf,$f,Ff,Wf,Uf,jf,Hf,zf],([n,e,t,r,i,s,o,a,l])=>({theme:n,font:e,fontSize:t,pageWidth:r,pageZoom:i,titleHighlight:s,lineSpacing:o,lineMargin:a,justifyText:l}));kX.subscribe(n=>{localStorage.setItem(LR,JSON.stringify(n))});const za=Nt(!1),Ji=Nt(""),NR=Nt(null);window.magebookLocalAppPassword&&za.set(!0);const SX=async()=>{const n=Sn(Ji),e=Sn(NR),t={book:await window.readFile(n),cursor:{row:0,column:0}};if(t.book=="%ERROR%%"){BR();return}t.book==""?t.book=Sn(Kt)("books.local"):n.endsWith(".xlgc")&&(await window.writeFile(n.substring(0,n.length-5)+`-backup-${Math.floor(new Date/1e3)}.xlgc`,t.book),t.book=dg.decode(t.book));try{const{cursor:i}=JSON.parse(e[encodeURIComponent(n)].Data);t.cursor.row=i.row||0,t.cursor.column=i.column||0}catch(i){console.log(i)}QR(t),At.subscribe(i=>{Sn(Ji).endsWith(".xlgc")?window.writeFile(Sn(Ji),dg.encode(A0.decode(i))):window.writeFile(Sn(Ji),i)}),kr([Vn,Ao],([i,s])=>({title:i.properties.title,cursor:s})).subscribe(i=>window.saveRecent(encodeURIComponent(Sn(Ji)),JSON.stringify(i)))},BR=async()=>{await window.releaseLock(),window.location.hash="app=true",location.reload()},TX="magebook",EX="1.2.10",CX="Luca Fabbian",IX="luca.fabbian.1999@gmail.com",RX="Interactive fiction editor",QX="MIT",PX="https://librogamesland.github.io/magebook",DX={type:"git",url:"https://github.com/librogamesland/magebook.git"},LX=["lgl","librogamesland","librogame","gamebook","editor","rollup-plugin","vite-plugin"],NX="index.js",BX={docs:"docsify serve . --port 3005",version:"echo $npm_package_version","cypress:open":"cypress open",dev:"vite",build:"vite build",preview:"vite preview",check:"svelte-check --tsconfig ./tsconfig.json",test:"echo 'work in progress :)'"},MX={"@codemirror/commands":"^6.0.0","@codemirror/lang-markdown":"^6.0.0","@codemirror/search":"^6.0.0","@fbraem/rollup-plugin-toml":"^0.0.1","@lucafabbian/firepad":"^1.5.19","@sveltejs/vite-plugin-svelte":"^1.0.0-next.30","@tsconfig/svelte":"^2.0.1",codemirror:"^6.0.0",cypress:"^10.1.0",dexie:"^3.2.2",docx:"^7.3.0","file-saver":"^2.0.5",firebase:"^9.8.3",jsdom:"^19.0.0",marked:"^4.0.17","query-string":"^7.1.1","smooth-scroll-into-view-if-needed":"^1.1.33",svelte:"^3.44.0","svelte-check":"^2.2.7","svelte-i18n":"^3.4.0","svelte-preprocess":"^4.9.8",tslib:"^2.3.1",typescript:"^4.5.4",vite:"^2.9.9","vite-plugin-pwa":"^0.12.0"},$X={"@types/sanitize-html":"^2.6.2","js-base64":"^3.7.2","sanitize-html":"^2.7.1"};var bi={name:TX,version:EX,author:CX,email:IX,description:RX,license:QX,homepage:PX,repository:DX,keywords:LX,main:NX,scripts:BX,devDependencies:MX,dependencies:$X},FX="./assets/logo.d06f15d3.png";function WX(n){let e,t,r,i,s,o,a,l,c,u=n[1]("about.text")+"",h,f,p=n[1]("about.contact")+"",d,m,b,A,g,v=n[1]("dialogs.ok")+"",O,_,x;return{c(){e=Y("div"),t=Y("h3"),t.textContent=`Magebook - v. ${bi.version}`,r=fe(),i=Y("img"),o=fe(),a=Y("br"),l=fe(),c=Y("p"),h=fe(),f=Y("p"),d=Ae(p),m=Ae(": "),b=Y("a"),b.textContent="luca.fabbian.1999@gmail.com",A=fe(),g=Y("button"),O=Ae(v),gs(i.src,s=FX)||G(i,"src",s),G(i,"alt","Magebook logo"),G(i,"class","svelte-1qabtlc"),G(c,"class","svelte-1qabtlc"),G(b,"target","_blank"),G(b,"rel","noopener"),G(b,"href","mailto:luca.fabbian.1999@gmail.com?subject=Magebook%20-%20Segnalazione"),G(f,"class","svelte-1qabtlc"),G(g,"class","ok svelte-1qabtlc"),G(e,"class","dialog svelte-1qabtlc")},m(T,E){Te(T,e,E),W(e,t),W(e,r),W(e,i),W(e,o),W(e,a),W(e,l),W(e,c),c.innerHTML=u,W(e,h),W(e,f),W(f,d),W(f,m),W(f,b),W(e,A),W(e,g),W(g,O),_||(x=Ie(g,"click",n[3]),_=!0)},p(T,[E]){E&2&&u!==(u=T[1]("about.text")+"")&&(c.innerHTML=u),E&2&&p!==(p=T[1]("about.contact")+"")&&Ee(d,p),E&2&&v!==(v=T[1]("dialogs.ok")+"")&&Ee(O,v)},i:Ue,o:Ue,d(T){T&&Se(e),_=!1,x()}}}function UX(n,e,t){let r;Ne(n,Kt,a=>t(1,r=a));let{params:i}=e,{callback:s}=e;const o=()=>s(!0);return n.$$set=a=>{"params"in a&&t(2,i=a.params),"callback"in a&&t(0,s=a.callback)},[s,r,i,o]}class zX extends kn{constructor(e){super(),xn(this,e,UX,WX,gn,{params:2,callback:0})}}function Gx(n){let e,t=n[5]("dialogs.shuffle.savecopy")+"",r,i,s;return{c(){e=Y("button"),r=Ae(t),G(e,"class","cancel")},m(o,a){Te(o,e,a),W(e,r),i||(s=Ie(e,"click",n[8]),i=!0)},p(o,a){a&32&&t!==(t=o[5]("dialogs.shuffle.savecopy")+"")&&Ee(r,t)},d(o){o&&Se(e),i=!1,s()}}}function jX(n){let e,t,r,i,s,o,a,l,c=n[5]("dialogs.ok")+"",u,h,f,p,d=n[5]("dialogs.cancel")+"",m,b,A,g=n[4]&&Gx(n);return{c(){e=Y("div"),t=Y("h3"),r=Ae(n[2]),i=fe(),s=Y("p"),o=Ae(n[3]),a=fe(),l=Y("button"),u=Ae(c),h=fe(),g&&g.c(),f=fe(),p=Y("button"),m=Ae(d),G(l,"class","ok"),G(p,"class","cancel"),G(e,"class","dialog")},m(v,O){Te(v,e,O),W(e,t),W(t,r),W(e,i),W(e,s),W(s,o),W(e,a),W(e,l),W(l,u),W(e,h),g&&g.m(e,null),W(e,f),W(e,p),W(p,m),b||(A=[Ie(l,"click",n[7]),Ie(p,"click",n[9])],b=!0)},p(v,[O]){O&4&&Ee(r,v[2]),O&8&&Ee(o,v[3]),O&32&&c!==(c=v[5]("dialogs.ok")+"")&&Ee(u,c),v[4]?g?g.p(v,O):(g=Gx(v),g.c(),g.m(e,f)):g&&(g.d(1),g=null),O&32&&d!==(d=v[5]("dialogs.cancel")+"")&&Ee(m,d)},i:Ue,o:Ue,d(v){v&&Se(e),g&&g.d(),b=!1,Xt(A)}}}function HX(n,e,t){let r,i,s=Ue,o=()=>(s(),s=Qc(l,m=>t(6,i=m)),l),a;Ne(n,Kt,m=>t(5,a=m)),n.$$.on_destroy.push(()=>s());let{params:l}=e;o();let{callback:c}=e,u,h;const f=()=>c(!0),p=()=>pi("md",At.flush()),d=()=>c(!1);return n.$$set=m=>{"params"in m&&o(t(0,l=m.params)),"callback"in m&&t(1,c=m.callback)},n.$$.update=()=>{n.$$.dirty&64&&t(2,[u,h,r]=i,u,(t(3,h),t(6,i)),(t(4,r),t(6,i)))},[l,c,u,h,r,a,i,f,p,d]}class f0 extends kn{constructor(e){super(),xn(this,e,HX,jX,gn,{params:0,callback:1})}}function GX(n){let e,t,r=n[4]("dialogs.graph.loading")+"",i,s,o;return{c(){e=Y("div"),t=Y("p"),i=Ae(r),s=fe(),o=Y("div"),G(o,"class","spinner-1"),G(e,"class","dialog"),Dt(e,"text-align","center")},m(a,l){Te(a,e,l),W(e,t),W(t,i),W(e,s),W(e,o)},p(a,l){l&16&&r!==(r=a[4]("dialogs.graph.loading")+"")&&Ee(i,r)},d(a){a&&Se(e)}}}function VX(n){let e,t,r,i,s,o=n[4]("dialogs.graph.open")+"",a,l,c,u=n[4]("dialogs.graph.download")+"",h,f,p;return{c(){e=Y("div"),t=Y("div"),r=fe(),i=Y("div"),s=Y("button"),a=Ae(o),l=fe(),c=Y("button"),h=Ae(u),Dt(t,"max-width","90vw"),Dt(t,"max-height","80vh"),Dt(t,"overflow","auto"),G(s,"class","ok"),G(c,"class","error"),G(e,"class","imgbox svelte-m36p7x")},m(d,m){Te(d,e,m),W(e,t),t.innerHTML=n[3],W(e,r),W(e,i),W(i,s),W(s,a),W(i,l),W(i,c),W(c,h),f||(p=[Ie(t,"click",FL(n[7])),Ie(s,"click",n[8]),Ie(c,"click",n[9]),Ie(e,"click",n[10])],f=!0)},p(d,m){m&8&&(t.innerHTML=d[3]),m&16&&o!==(o=d[4]("dialogs.graph.open")+"")&&Ee(a,o),m&16&&u!==(u=d[4]("dialogs.graph.download")+"")&&Ee(h,u)},d(d){d&&Se(e),f=!1,Xt(p)}}}function XX(n){let e;function t(s,o){if(s[1])return VX;if(s[2])return GX}let r=t(n),i=r&&r(n);return{c(){i&&i.c(),e=no()},m(s,o){i&&i.m(s,o),Te(s,e,o)},p(s,[o]){r===(r=t(s))&&i?i.p(s,o):(i&&i.d(1),i=r&&r(s),i&&(i.c(),i.m(e.parentNode,e)))},i:Ue,o:Ue,d(s){i&&i.d(s),s&&Se(e)}}}function YX(n,e,t){let r,i;Ne(n,Kt,m=>t(4,r=m)),Ne(n,Vn,m=>t(5,i=m));let{params:s}=e,{callback:o}=e,a=!1,l=!1,c;const u=s.subscribe(async m=>{t(1,a=!1),t(2,l=!0),await ta(),setTimeout(async()=>{t(3,c=await Promise.resolve(m[0]())),t(1,a=!0)},100)});Rk(u);const h=()=>console.log("clickOnImg"),f=()=>{const m=new window.Blob([c],{type:"image/svg+xml"}),b=URL.createObjectURL(m),A=window.open(b);A.onload=()=>URL.revokeObjectURL(b)},p=()=>{const m=document.createElement("a");m.setAttribute("href",`data:image/svg+xml;base64,${XS(c)}`),console.log("encoded with new js-base64 lib"),m.setAttribute("download",(i.properties.title||"graph")+".svg"),m.style.display="none",document.body.appendChild(m),m.click(),document.body.removeChild(m)},d=async()=>{t(3,c=""),await ta(),o(!1)};return n.$$set=m=>{"params"in m&&t(6,s=m.params),"callback"in m&&t(0,o=m.callback)},[o,a,l,c,r,i,s,h,f,p,d]}class ZX extends kn{constructor(e){super(),xn(this,e,YX,XX,gn,{params:6,callback:0})}}var xb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEgElEQVR4nH2Ua0xbZRjHS7lEkw6kAzcGjkmE4UKcCWxTMz9tGnDzi26SOMMI2cYAuRU4lF7OpTdKS1kLE1qG2zRsTpCFNZT7daW0XAuswGQf5OJHY9Qvgpy+j29LuwBznuSf8573vM/v/J/nec/LoWmas1cMTQf5x023Gk+bTA1ZjSZjlslkPO+fF4slXIZhuHtjX4CRJBnouRuN9e92Wsx3HfbRXx12G3I4bGAfs/5uHRns/qnlwWc7YgJeCsQw78sO88NMq3Xoj8kJO0xPTcLcnBPNzznB6ZwCx/gYjNut0N1lvqdSKcP3Qp/DKGobZm5vFQwP9KBR6xCamhzfXHA9cS8v/wzPni3D4uICcs5MbdlGR9iRoT7oMLcNKpWKMIlUuhtIUZR34pubhve7Le0w0Nftxum5Z53T8PTpElpdW0Pr6+seKJqbm4UJhw0ND/Zt9nSZoa31fp0nVkqS3J0OvQ8/3Lt7s7+nAw30d3lcwMz0BMJAWFlZgdXVNfA4dTqn0ZjNCkMDPWxnR7u741HrukGvO+BP3e/Q2whtlby3vq4aDeLFE+NjyDU/C64n87C0tORxCgsLLlhadMHszCSMjQ677zffBkZKbFSqFKd8HK4XSPrsCgpzBssFOWB51MJ+21gPt5uMMNjfBbOzMzCP4X29nVBVKQOaEkOTqQ41GfVbedcuA0WKz/uNbQN9DjGwv6w4Fz5J/YgNfy0MIiL4QJQKYGrSAZ6Oq1Ry2M/nQ3BwEMTERANRUrAhJvKRRCz80gskySB/yl6HlLj0ccZX6XDoUDQbzg8HPn8/XLzwOdgeD8H0pB2uZV+FNw4fhqioKIiMfB2lp19kVbIKEAnL0nzGuL6mbG9mBVPxo6i8CJKTU7YSExMhIeEo5H+dC9oqhSctqFTKIDklBZKSkuCd48fdImEp6FTS38Si8rd8Dp83xetQyYhK6murWEpazmZlZkBJUT76/o4Jg+MhJCQETA0G0OvUICQEqFJBuW+ZDKxey/wiY8gjXmN4+/mA29tGp6YtBp0ccLH/lpOEW0aWAUNWoNjYWIiOjob8vGxUX6tBhCAXGuq0WzdvqDZvaGlQyKhzXg7tawpNb29stZJOMdapl+tq5CAszQMlXY4qCAGkpJzwlAEK83OgVqeE4vwrSEETgNeCXku3yGXUK/TOP2WnEuLjIk5/cPJjjVLs0qlJVK2mWEmFAEmEAqjRMKiminbXVFGorCjbcDQ+7sPr2VeDd8bvgoWGhgZxOJwwzzjj0gWLXkOzarnoH0M1g2qrZUijFLEyaQlbrZL+dSQ25oQXwOEEvRSILx4u/smAgIDUc2lnH9RoaKAlJcBISlklU8HKcF3xB6Ag74prH4/3KZfLPYVjIvh8/ounjR8YGBiYhO9nQkP3fZF5+VLzd3dMf/b3WqCtpRks5ocb5URx78GDB67jNWexkvHHI3g83n8DsTsuXvQqViTWm1ixx94+9h5BEEVFhQXi1NS0M3guzvcuCsN4/5vyTuF0uDggBAfsOuY9c1ieWu86qf36FzbTCQMGhUSbAAAAAElFTkSuQmCC",kb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wENEA4tJ8wnvAAAArNJREFUOMvVlM1rVFcYxn/n3pu5MTMTM0nGdFI1IfGD+lEioSWrdllUEIrgUhBcdBORIOgfIIgiXVQoolvdFLtIiSKClW7b9MMYP5oMRieZyTidzGQy986dO3fufV1Mp02joNaNvpvznsP7/Hg4nOfAu16q2dR+bZ/Or0ihaJFOdLm7It2HToW2Xbn+MlEwd3C/Vfj+7GJev9cZ4cPu9cTULn/3f4D1TPTJwqJ/rH+48kP5pvHtut3DX0jPB39KzdIpAFkgA1ghX7Vmt1fV1Hj0S38sdZcDGxN8o22gH8BoAt0Odb8voQYAzEgs58n8gJS3DmDdghUHHBAPcMHXQe8by8DXbPqYAcdhusn5B+hY9V/a1pkjYBOYUm1tN8DoBdeAENAGRAEBPwzPskn3b+lIxWayydGaTfGJPxGUtCEn2ac8384RuCA+YEIA+DTWALy6wbPZH3OlqW4Nu2VPKcXEC8Ctn7qTxRlnvsUJHQkk8gDfAiVAGKThDL9x6xVHUTc7HkXN1iOlpJcaHH6JQ4C5n2un/VzpuLK73KBWzYMNKv4vzGsoimUjvT7a7qnS8vHUJKdXM/TVm8s3gqeHdla3xPXIPom5WT3WsZ16G9hJqABlcEWRKcRvDHbVPkvN5u9+9BWXVjO0tW/s4YycmJtJe9osn+DNgB5ujHkggWK+GKYn5I0U05lg9hEn1ur1tQfXfhc+H5QJVQl2xDfZQ6o7DpVlsB3SS2HKVgjNLYxPP5ajey/gv1GMfjpnjNYXEhVZ6hX3jilTFzort8+0jL5VNmu/qZNBVpPCRU3mL6nRtw67pIjJHEvVm6TzfxB+1bzxSqJJCIVhbsYwewkB9v9394B++YtrUkYkg8gyVyXJ5tf6vl6A3dl4mI6F84T1dqpYFIEcEXx/mbbEMXVg8Tvey3oOImsv73TtdGkAAAAASUVORK5CYII=",Sb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAArrAAAK6wGCiw1aAAAAK3RFWHRDcmVhdGlvbiBUaW1lAERvIDMwIEp1biAyMDA1IDE0OjMyOjM5ICswMTAwRscKOAAAApFJREFUeJytlMtPE1EUxtsSFz4SjRFYGF8ERXyUUBVBKC9DsKECDSBEkQaQWh5GIjFIpPMKFh9gBFGDDxbEoMSFMW6QrRqXCMSQKDvlL0ADzMz9jp22IVMKRYiLX+bmnPN9c86dO9cgCILhf7JqwVqJmBQ5ziTyXBTPCyYNba3F1mfI88b15JYXBBl2OpLH0nff/Z6yY+THyeiRsYw99147HZZImrBAuyD63z6RHe+dN29icy4bLfR6/MxdLqCF5C0Yz4m/ra9d0ZAPjjKRG3dLTdlKsx2NbH7wviy/6Vfl4cfq/MAdeVaqZyx1G03mxnXqNWGGIufxb/ZLV4WZHTLQb3e+It+8CKXDTWr3NTAfqlRHcmsF/tSdVpBooFe1ZUl6bWiHHBelPSfz9nfBbIRcniTjio3AVQJeF8FbR2g/DzTmkeJIkHHEiMm8A116bYghxwv+1n9aY0Zw1ABkblZQEgdUWwjuU0Q+/GvHXiDLl0sy4Jc15kNgbGFx7EVDXggEZ6zRo0jfAFa0S8WFgyCXhagpNYD7OMF5GKxkn4KsjZjJjB3Va0NH5gNtT+Un9ODMdqhOs0zNVt/IBSBvKVFnKUE4C2rJJrU2WYY9BlO2xF69NtQwuLFDNWUnyB5L6tUMBZwd1FNFeF4PvGgA9VUTpCKoLdkKFe+kodqyFL021FDQHZviYw+pOZXYg0qFDTQp7B2vsveiygabFdZXrdB1K30rtjxaOm6YoYZHlIxCW5tp/FzaE/LYiIZbiD52E33pIXp7g0gqpPHytH6htdXkkaTIB3spQ1UlOV/d9qfTHTWfpr2XPo81FD7zxXIjaVY2FMN/q3/JLS8I4ruuTKIoLH5Bba3FImkiGq6HVQvWyl/gxssJlvWS8AAAAABJRU5ErkJggg==";function Vx(n,e,t){const r=n.slice();return r[18]=e[t],r}function Xx(n,e,t){const r=n.slice();return r[21]=e[t],r}function Yx(n){let e,t=n[21]+"",r,i;return{c(){e=Y("option"),r=Ae(t),e.__value=i=n[21],e.value=e.__value},m(s,o){Te(s,e,o),W(e,r)},p(s,o){o&16&&t!==(t=s[21]+"")&&Ee(r,t),o&16&&i!==(i=s[21])&&(e.__value=i,e.value=e.__value)},d(s){s&&Se(e)}}}function Zx(n){let e,t,r,i,s,o,a;function l(){return n[12](n[18])}return{c(){e=Y("div"),t=Y("img"),s=fe(),G(t,"alt",r=n[18]),gs(t.src,i=n[6][n[18]])||G(t,"src",i),G(t,"class","svelte-1ergg8"),G(e,"class","svelte-1ergg8"),ln(e,"selected",n[3][n[18]])},m(c,u){Te(c,e,u),W(e,t),W(e,s),o||(a=Ie(e,"click",l),o=!0)},p(c,u){n=c,u&8&&ln(e,"selected",n[3][n[18]])},d(c){c&&Se(e),o=!1,a()}}}function qX(n){let e,t,r=n[5]("dialogs.shuffle.title")+"",i,s,o,a=n[5]("dialogs.shuffle.hint")+"",l,c,u,h=n[5]("dialogs.shuffle.group")+"",f,p,d,m,b,A,g,v,O,_=n[5]("sidemenu.allgroup")+"",x,T,E,S=n[5]("dialogs.shuffle.flags")+"",C,B,M,D,L,P,X=n[5]("dialogs.ok")+"",Z,K,ee,J=n[5]("dialogs.shuffle.savecopy")+"",ge,k,j,V=n[5]("dialogs.cancel")+"",H,q,le,be=n[4],ae=[];for(let R=0;R<be.length;R+=1)ae[R]=Yx(Xx(n,be,R));let he=["final","fixed","death"],U=[];for(let R=0;R<3;R+=1)U[R]=Zx(Vx(n,he,R));return{c(){e=Y("div"),t=Y("h3"),i=Ae(r),s=fe(),o=Y("p"),l=Ae(a),c=fe(),u=Y("h4"),f=Ae(h),p=Ae(":"),d=fe(),m=Y("div"),b=Y("input"),A=fe(),g=Y("span"),v=Y("select"),O=Y("option"),x=Ae(_);for(let R=0;R<ae.length;R+=1)ae[R].c();T=fe(),E=Y("h4"),C=Ae(S),B=Ae(":"),M=fe(),D=Y("div");for(let R=0;R<3;R+=1)U[R].c();L=fe(),P=Y("button"),Z=Ae(X),K=fe(),ee=Y("button"),ge=Ae(J),k=fe(),j=Y("button"),H=Ae(V),G(u,"class","svelte-1ergg8"),G(b,"type","text"),G(b,"class","svelte-1ergg8"),O.__value="allgroupidtag",O.value=O.__value,n[1]===void 0&&Vl(()=>n[11].call(v)),G(g,"class","select-dropdown svelte-1ergg8"),Dt(g,"margin-left","5px"),G(m,"class","input svelte-1ergg8"),G(E,"class","svelte-1ergg8"),G(D,"class","flags svelte-1ergg8"),G(P,"class","ok"),G(ee,"class","cancel"),G(j,"class","cancel"),G(e,"class","dialog svelte-1ergg8")},m(R,Q){Te(R,e,Q),W(e,t),W(t,i),W(e,s),W(e,o),W(o,l),W(e,c),W(e,u),W(u,f),W(u,p),W(e,d),W(e,m),W(m,b),yt(b,n[2]),W(m,A),W(m,g),W(g,v),W(v,O),W(O,x);for(let F=0;F<ae.length;F+=1)ae[F].m(v,null);Th(v,n[1]),W(e,T),W(e,E),W(E,C),W(E,B),W(e,M),W(e,D);for(let F=0;F<3;F+=1)U[F].m(D,null);W(e,L),W(e,P),W(P,Z),W(e,K),W(e,ee),W(ee,ge),W(e,k),W(e,j),W(j,H),q||(le=[Ie(b,"input",n[10]),Ie(v,"change",n[11]),Ie(P,"click",n[7]),Ie(ee,"click",n[13]),Ie(j,"click",n[14])],q=!0)},p(R,[Q]){if(Q&32&&r!==(r=R[5]("dialogs.shuffle.title")+"")&&Ee(i,r),Q&32&&a!==(a=R[5]("dialogs.shuffle.hint")+"")&&Ee(l,a),Q&32&&h!==(h=R[5]("dialogs.shuffle.group")+"")&&Ee(f,h),Q&4&&b.value!==R[2]&&yt(b,R[2]),Q&32&&_!==(_=R[5]("sidemenu.allgroup")+"")&&Ee(x,_),Q&16){be=R[4];let F;for(F=0;F<be.length;F+=1){const ie=Xx(R,be,F);ae[F]?ae[F].p(ie,Q):(ae[F]=Yx(ie),ae[F].c(),ae[F].m(v,null))}for(;F<ae.length;F+=1)ae[F].d(1);ae.length=be.length}if(Q&18&&Th(v,R[1]),Q&32&&S!==(S=R[5]("dialogs.shuffle.flags")+"")&&Ee(C,S),Q&72){he=["final","fixed","death"];let F;for(F=0;F<3;F+=1){const ie=Vx(R,he,F);U[F]?U[F].p(ie,Q):(U[F]=Zx(ie),U[F].c(),U[F].m(D,null))}for(;F<3;F+=1)U[F].d(1)}Q&32&&X!==(X=R[5]("dialogs.ok")+"")&&Ee(Z,X),Q&32&&J!==(J=R[5]("dialogs.shuffle.savecopy")+"")&&Ee(ge,J),Q&32&&V!==(V=R[5]("dialogs.cancel")+"")&&Ee(H,V)},i:Ue,o:Ue,d(R){R&&Se(e),Ar(ae,R),Ar(U,R),q=!1,Xt(le)}}}function KX(n,e,t){let r,i,s,o,a,l;Ne(n,Vn,_=>t(9,i=_)),Ne(n,za,_=>t(15,s=_)),Ne(n,PR,_=>t(16,o=_)),Ne(n,At,_=>t(17,a=_)),Ne(n,Kt,_=>t(5,l=_));let c={death:xb,final:kb,fixed:Sb},{params:u}=e,{callback:h}=e,f="",p={final:!1,fixed:!1,death:!1},d="allgroupidtag";const m=()=>{const _=Object.keys(p).filter(E=>p[E]),x=f.split(",").map(E=>E.trim()).filter(E=>E);At.flush();const T=IB(a,{selectedFlags:_,filter:x});if(o||s){ht().dispatch({changes:{from:0,to:ht().state.doc.length,insert:T}}),h(!1);return}Vd.open({data:{book:T,cursor:{row:0,column:0},title:i.properties.title}})};function b(){f=this.value,t(2,f),t(1,d)}function A(){d=Ik(this),t(1,d),t(2,f),t(4,r),t(9,i)}const g=_=>t(3,p[_]=!p[_],p),v=()=>pi("md",At.flush()),O=()=>h(!1);return n.$$set=_=>{"params"in _&&t(8,u=_.params),"callback"in _&&t(0,h=_.callback)},n.$$.update=()=>{n.$$.dirty&512&&t(4,r=[...i.groups]),n.$$.dirty&6&&d!="allgroupidtag"&&(t(2,f+=d+", "),ta().then(()=>{t(1,d="allgroupidtag")}))},[h,d,f,p,r,l,c,m,u,i,b,A,g,v,O]}class JX extends kn{constructor(e){super(),xn(this,e,KX,qX,gn,{params:8,callback:0})}}function eY(n){let e,t,r=n[1]("dialogs.newbook.new")+"",i,s,o,a=n[1]("dialogs.newbook.hint")+"",l,c,u=n[1]("dialogs.ok")+"",h,f,p,d=n[1]("dialogs.cancel")+"",m,b,A;return{c(){e=Y("div"),t=Y("h3"),i=Ae(r),s=fe(),o=Y("p"),l=fe(),c=Y("button"),h=Ae(u),f=fe(),p=Y("button"),m=Ae(d),Dt(o,"margin","1rem 0"),G(c,"class","ok"),G(p,"class","cancel"),G(e,"class","dialog")},m(g,v){Te(g,e,v),W(e,t),W(t,i),W(e,s),W(e,o),o.innerHTML=a,W(e,l),W(e,c),W(c,h),W(e,f),W(e,p),W(p,m),b||(A=[Ie(c,"click",n[4]),Ie(p,"click",n[5])],b=!0)},p(g,[v]){v&2&&r!==(r=g[1]("dialogs.newbook.new")+"")&&Ee(i,r),v&2&&a!==(a=g[1]("dialogs.newbook.hint")+"")&&(o.innerHTML=a),v&2&&u!==(u=g[1]("dialogs.ok")+"")&&Ee(h,u),v&2&&d!==(d=g[1]("dialogs.cancel")+"")&&Ee(m,d)},i:Ue,o:Ue,d(g){g&&Se(e),b=!1,Xt(A)}}}function tY(n,e,t){let r;Ne(n,Kt,c=>t(1,r=c));let{params:i}=e,{callback:s}=e;const o=()=>Vd.open({data:{book:r("books.local"),cursor:{row:0,column:0}}}),a=()=>o(),l=()=>s(!1);return n.$$set=c=>{"params"in c&&t(3,i=c.params),"callback"in c&&t(0,s=c.callback)},[s,r,o,i,a,l]}class nY extends kn{constructor(e){super(),xn(this,e,tY,eY,gn,{params:3,callback:0})}}function rY(n){let e,t,r,i=n[4]("dialogs.newfirebook.new")+"",s,o,a,l,c,u,h,f,p,d,m,b,A,g,v=n[4]("dialogs.newfirebook.book")+"",O,_,x,T,E,S,C=n[4]("dialogs.newfirebook.getStarted")+"",B,M,D=n[4]("dialogs.ok")+"",L,P,X,Z,K=n[4]("dialogs.cancel")+"",ee,J,ge;return{c(){e=Y("div"),t=Y("form"),r=Y("h3"),s=Ae(i),o=fe(),a=Y("div"),l=Y("span"),l.textContent="apiKey:",c=fe(),u=Y("input"),h=fe(),f=Y("div"),p=Y("span"),p.textContent="databaseURL:",d=fe(),m=Y("input"),b=fe(),A=Y("div"),g=Y("span"),O=Ae(v),_=Ae(":"),x=fe(),T=Y("input"),E=fe(),S=Y("p"),B=fe(),M=Y("button"),L=Ae(D),X=fe(),Z=Y("button"),ee=Ae(K),G(l,"class","svelte-1c6ktlb"),G(u,"name","password"),G(u,"type","password"),G(u,"class","svelte-1c6ktlb"),G(a,"class","input svelte-1c6ktlb"),G(p,"class","svelte-1c6ktlb"),G(m,"name","user"),G(m,"type","text"),G(m,"class","svelte-1c6ktlb"),G(f,"class","input svelte-1c6ktlb"),G(g,"class","svelte-1c6ktlb"),G(T,"type","text"),G(T,"class","svelte-1c6ktlb"),G(A,"class","input svelte-1c6ktlb"),G(S,"class","getstarted"),Dt(S,"margin","1rem 0"),M.disabled=P=!n[3]||!n[1]||!n[2],G(M,"class","ok"),G(Z,"class","cancel"),G(t,"method","post"),G(t,"action","/signin"),G(e,"class","dialog svelte-1c6ktlb")},m(k,j){Te(k,e,j),W(e,t),W(t,r),W(r,s),W(t,o),W(t,a),W(a,l),W(a,c),W(a,u),yt(u,n[1]),W(t,h),W(t,f),W(f,p),W(f,d),W(f,m),yt(m,n[2]),W(t,b),W(t,A),W(A,g),W(g,O),W(g,_),W(A,x),W(A,T),yt(T,n[3]),W(t,E),W(t,S),S.innerHTML=C,W(t,B),W(t,M),W(M,L),W(t,X),W(t,Z),W(Z,ee),J||(ge=[Ie(u,"input",n[8]),Ie(m,"input",n[9]),Ie(T,"input",n[10]),Ie(M,"click",n[11]),Ie(Z,"click",n[12]),Ie(t,"submit",$L(n[7]))],J=!0)},p(k,[j]){j&16&&i!==(i=k[4]("dialogs.newfirebook.new")+"")&&Ee(s,i),j&2&&u.value!==k[1]&&yt(u,k[1]),j&4&&m.value!==k[2]&&yt(m,k[2]),j&16&&v!==(v=k[4]("dialogs.newfirebook.book")+"")&&Ee(O,v),j&8&&T.value!==k[3]&&yt(T,k[3]),j&16&&C!==(C=k[4]("dialogs.newfirebook.getStarted")+"")&&(S.innerHTML=C),j&16&&D!==(D=k[4]("dialogs.ok")+"")&&Ee(L,D),j&14&&P!==(P=!k[3]||!k[1]||!k[2])&&(M.disabled=P),j&16&&K!==(K=k[4]("dialogs.cancel")+"")&&Ee(ee,K)},i:Ue,o:Ue,d(k){k&&Se(e),J=!1,Xt(ge)}}}function iY(n,e,t){let r;Ne(n,Kt,b=>t(4,r=b));let{params:i}=e,{callback:s}=e,o,a,l;const c=()=>{const b=encodeURIComponent(XS(JSON.stringify({apiKey:o.replaceAll('",',"").replaceAll('"',"").replaceAll("apiKey:","").trim(),databaseURL:a.replaceAll('",',"").replaceAll('"',"").replaceAll("databaseURL:","").trim(),book:l})));location.assign(`#fsession=${b}`),location.reload()};function u(b){jL.call(this,n,b)}function h(){o=this.value,t(1,o)}function f(){a=this.value,t(2,a)}function p(){l=this.value,t(3,l)}const d=()=>c(),m=()=>s(!1);return n.$$set=b=>{"params"in b&&t(6,i=b.params),"callback"in b&&t(0,s=b.callback)},[s,o,a,l,r,c,i,u,h,f,p,d,m]}class sY extends kn{constructor(e){super(),xn(this,e,iY,rY,gn,{params:6,callback:0})}}function qx(n,e,t){const r=n.slice();return r[4]=e[t][0],r[5]=e[t][1],r}function Kx(n,e,t){const r=n.slice();return r[5]=e[t],r}function oY(n){return{c:Ue,m:Ue,p:Ue,d:Ue}}function aY(n){let e,t=n[8],r=[];for(let i=0;i<t.length;i+=1)r[i]=Jx(Kx(n,t,i));return{c(){e=Y("ul");for(let i=0;i<r.length;i+=1)r[i].c();G(e,"class","svelte-5d1vqe")},m(i,s){Te(i,e,s);for(let o=0;o<r.length;o+=1)r[o].m(e,null)},p(i,s){if(s&0){t=i[8];let o;for(o=0;o<t.length;o+=1){const a=Kx(i,t,o);r[o]?r[o].p(a,s):(r[o]=Jx(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(i){i&&Se(e),Ar(r,i)}}}function Jx(n){let e,t,r=n[5].name+"",i,s,o,a=n[5].time.toLocaleDateString()+"",l,c,u=n[5].time.toLocaleTimeString()+"",h,f;return{c(){e=Y("li"),t=Y("a"),i=Ae(r),s=fe(),o=Y("span"),l=Ae(a),c=fe(),h=Ae(u),G(o,"class","svelte-5d1vqe"),G(t,"href",f="#msession="+n[5].id),G(t,"class","svelte-5d1vqe"),G(e,"class","svelte-5d1vqe")},m(p,d){Te(p,e,d),W(e,t),W(t,i),W(t,s),W(t,o),W(o,l),W(o,c),W(o,h)},p:Ue,d(p){p&&Se(e)}}}function lY(n){let e;return{c(){e=Ae("Loading...")},m(t,r){Te(t,e,r)},p:Ue,d(t){t&&Se(e)}}}function cY(n){let e,t=n[1]("navbar.file.recoverFire")+"",r,i,s,o=Object.entries(JSON.parse(localStorage[Sa])).sort(tk),a=[];for(let l=0;l<o.length;l+=1)a[l]=ek(qx(n,o,l));return{c(){e=Y("h3"),r=Ae(t),i=fe(),s=Y("ul");for(let l=0;l<a.length;l+=1)a[l].c();G(e,"class","svelte-5d1vqe"),G(s,"class","svelte-5d1vqe")},m(l,c){Te(l,e,c),W(e,r),Te(l,i,c),Te(l,s,c);for(let u=0;u<a.length;u+=1)a[u].m(s,null)},p(l,c){if(c&2&&t!==(t=l[1]("navbar.file.recoverFire")+"")&&Ee(r,t),c&0){o=Object.entries(JSON.parse(localStorage[Sa])).sort(tk);let u;for(u=0;u<o.length;u+=1){const h=qx(l,o,u);a[u]?a[u].p(h,c):(a[u]=ek(h),a[u].c(),a[u].m(s,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},d(l){l&&Se(e),l&&Se(i),l&&Se(s),Ar(a,l)}}}function ek(n){let e,t,r=n[5].name+"",i,s,o,a=new Date(n[5].time).toLocaleDateString()+"",l,c,u=new Date(n[5].time).toLocaleTimeString()+"",h,f;return{c(){e=Y("li"),t=Y("a"),i=Ae(r),s=fe(),o=Y("span"),l=Ae(a),c=fe(),h=Ae(u),G(o,"class","svelte-5d1vqe"),G(t,"href",f="#fsession="+n[4]),G(t,"class","svelte-5d1vqe"),G(e,"class","svelte-5d1vqe")},m(p,d){Te(p,e,d),W(e,t),W(t,i),W(t,s),W(t,o),W(o,l),W(o,c),W(o,h)},p:Ue,d(p){p&&Se(e)}}}function uY(n){let e,t,r=n[1]("navbar.file.recover")+"",i,s,o,a,l,c=n[1]("dialogs.cancel")+"",u,h,f,p={ctx:n,current:null,token:null,hasCatch:!1,pending:lY,then:aY,catch:oY,value:8};m0(_X(),p);let d=localStorage[Sa]&&cY(n);return{c(){e=Y("div"),t=Y("h3"),i=Ae(r),s=fe(),p.block.c(),o=fe(),d&&d.c(),a=fe(),l=Y("button"),u=Ae(c),G(t,"class","svelte-5d1vqe"),G(l,"class","cancel"),G(e,"class","dialog recover")},m(m,b){Te(m,e,b),W(e,t),W(t,i),W(e,s),p.block.m(e,p.anchor=null),p.mount=()=>e,p.anchor=o,W(e,o),d&&d.m(e,null),W(e,a),W(e,l),W(l,u),h||(f=Ie(l,"click",n[3]),h=!0)},p(m,[b]){n=m,b&2&&r!==(r=n[1]("navbar.file.recover")+"")&&Ee(i,r),g0(p,n,b),localStorage[Sa]&&d.p(n,b),b&2&&c!==(c=n[1]("dialogs.cancel")+"")&&Ee(u,c)},i:Ue,o:Ue,d(m){m&&Se(e),p.block.d(),p.token=null,p=null,d&&d.d(),h=!1,f()}}}const tk=([n,e],[t,r])=>r.time-e.time;function hY(n,e,t){let r;Ne(n,Kt,a=>t(1,r=a));let{params:i}=e,{callback:s}=e;const o=()=>s(!1);return n.$$set=a=>{"params"in a&&t(2,i=a.params),"callback"in a&&t(0,s=a.callback)},[s,r,i,o]}class fY extends kn{constructor(e){super(),xn(this,e,hY,uY,gn,{params:2,callback:0})}}function nk(n,e,t){const r=n.slice();return r[23]=e[t],r}function dY(n){return{c:Ue,m:Ue,p:Ue,d:Ue}}function pY(n){let e,t=n[22],r=[];for(let i=0;i<t.length;i+=1)r[i]=rk(nk(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=no()},m(i,s){for(let o=0;o<r.length;o+=1)r[o].m(i,s);Te(i,e,s)},p(i,s){if(s&1024){t=i[22];let o;for(o=0;o<t.length;o+=1){const a=nk(i,t,o);r[o]?r[o].p(a,s):(r[o]=rk(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(i){Ar(r,i),i&&Se(e)}}}function rk(n){let e,t;return{c(){e=Y("option"),e.__value=t=n[23],e.value=e.__value},m(r,i){Te(r,e,i)},p:Ue,d(r){r&&Se(e)}}}function mY(n){return{c:Ue,m:Ue,p:Ue,d:Ue}}function gY(n){let e,t,r,i,s,o,a,l,c,u,h,f,p,d,m,b,A,g,v,O,_,x,T,E,S,C,B,M,D,L,P,X,Z,K,ee,J,ge,k,j,V,H,q,le,be,ae,he,U,R,Q,F,ie,me,oe,ue,de,pe,xe,Fe,st,I,N,z=n[9]("dialogs.ok")+"",te,se,ce,Oe={ctx:n,current:null,token:null,hasCatch:!1,pending:mY,then:pY,catch:dY,value:22};return m0(n[10],Oe),{c(){e=Y("div"),t=Y("h3"),t.textContent="Settings",r=fe(),i=Y("table"),s=Y("tr"),o=Y("th"),o.textContent="font-family:",a=fe(),l=Y("td"),c=Y("input"),u=fe(),h=Y("datalist"),Oe.block.c(),f=fe(),p=Y("tr"),d=Y("th"),d.textContent="font-size (pt):",m=fe(),b=Y("td"),A=Y("input"),g=fe(),v=Y("tr"),O=fe(),_=Y("tr"),x=Y("th"),x.textContent="page-width (mm):",T=fe(),E=Y("td"),S=Y("input"),C=fe(),B=Y("tr"),M=Y("th"),M.textContent="page-zoom (%):",D=fe(),L=Y("td"),P=Y("input"),X=fe(),Z=Y("tr"),K=fe(),ee=Y("tr"),J=Y("th"),J.textContent="line-spacing:",ge=fe(),k=Y("td"),j=Y("input"),V=fe(),H=Y("tr"),q=Y("th"),q.textContent="line-margin:",le=fe(),be=Y("td"),ae=Y("input"),he=fe(),U=Y("tr"),R=Y("th"),R.textContent="title-highlight:",Q=fe(),F=Y("td"),ie=Y("input"),me=fe(),oe=Y("tr"),ue=Y("th"),ue.textContent="justify-text:",de=fe(),pe=Y("td"),xe=Y("input"),Fe=fe(),st=Y("tr"),I=fe(),N=Y("button"),te=Ae(z),G(c,"type","text"),G(c,"list","fonts"),G(c,"class","svelte-pi47bm"),G(h,"id","fonts"),G(h,"class","svelte-pi47bm"),G(l,"class","svelte-pi47bm"),G(A,"type","number"),G(A,"min","2"),G(A,"max","50"),G(A,"class","svelte-pi47bm"),G(b,"class","svelte-pi47bm"),Dt(v,"height","15px"),G(S,"type","number"),G(S,"min","1"),G(S,"max","400"),G(S,"class","svelte-pi47bm"),G(E,"class","svelte-pi47bm"),G(P,"type","number"),G(P,"min","10"),G(P,"max","400"),G(P,"class","svelte-pi47bm"),G(L,"class","svelte-pi47bm"),Dt(Z,"height","15px"),G(j,"type","text"),G(j,"class","svelte-pi47bm"),G(k,"class","svelte-pi47bm"),G(ae,"type","number"),G(ae,"min","0"),G(ae,"max","15"),G(ae,"class","svelte-pi47bm"),G(be,"class","svelte-pi47bm"),G(ie,"type","range"),G(ie,"min","1"),G(ie,"max","2"),G(ie,"class","svelte-pi47bm"),G(F,"class","svelte-pi47bm"),G(xe,"type","range"),G(xe,"min","1"),G(xe,"max","2"),G(xe,"class","svelte-pi47bm"),G(pe,"class","svelte-pi47bm"),Dt(st,"height","15px"),G(i,"class","svelte-pi47bm"),G(N,"class","ok svelte-pi47bm"),G(e,"class","dialog svelte-pi47bm")},m(ze,Ve){Te(ze,e,Ve),W(e,t),W(e,r),W(e,i),W(i,s),W(s,o),W(s,a),W(s,l),W(l,c),yt(c,n[1]),W(l,u),W(l,h),Oe.block.m(h,Oe.anchor=null),Oe.mount=()=>h,Oe.anchor=null,W(i,f),W(i,p),W(p,d),W(p,m),W(p,b),W(b,A),yt(A,n[2]),W(i,g),W(i,v),W(i,O),W(i,_),W(_,x),W(_,T),W(_,E),W(E,S),yt(S,n[3]),W(i,C),W(i,B),W(B,M),W(B,D),W(B,L),W(L,P),yt(P,n[4]),W(i,X),W(i,Z),W(i,K),W(i,ee),W(ee,J),W(ee,ge),W(ee,k),W(k,j),yt(j,n[5]),W(i,V),W(i,H),W(H,q),W(H,le),W(H,be),W(be,ae),yt(ae,n[6]),W(i,he),W(i,U),W(U,R),W(U,Q),W(U,F),W(F,ie),yt(ie,n[7]),W(i,me),W(i,oe),W(oe,ue),W(oe,de),W(oe,pe),W(pe,xe),yt(xe,n[8]),W(i,Fe),W(i,st),W(e,I),W(e,N),W(N,te),se||(ce=[Ie(c,"input",n[12]),Ie(A,"input",n[13]),Ie(S,"input",n[14]),Ie(P,"input",n[15]),Ie(j,"input",n[16]),Ie(ae,"input",n[17]),Ie(ie,"change",n[18]),Ie(ie,"input",n[18]),Ie(xe,"change",n[19]),Ie(xe,"input",n[19]),Ie(N,"click",n[20])],se=!0)},p(ze,[Ve]){n=ze,Ve&2&&c.value!==n[1]&&yt(c,n[1]),g0(Oe,n,Ve),Ve&4&&Xr(A.value)!==n[2]&&yt(A,n[2]),Ve&8&&Xr(S.value)!==n[3]&&yt(S,n[3]),Ve&16&&Xr(P.value)!==n[4]&&yt(P,n[4]),Ve&32&&j.value!==n[5]&&yt(j,n[5]),Ve&64&&Xr(ae.value)!==n[6]&&yt(ae,n[6]),Ve&128&&yt(ie,n[7]),Ve&256&&yt(xe,n[8]),Ve&512&&z!==(z=n[9]("dialogs.ok")+"")&&Ee(te,z)},i:Ue,o:Ue,d(ze){ze&&Se(e),Oe.block.d(),Oe.token=null,Oe=null,se=!1,Xt(ce)}}}function yY(n,e,t){let r,i,s,o,a,l,c,u,h;Ne(n,Mf,S=>t(1,r=S)),Ne(n,$f,S=>t(2,i=S)),Ne(n,Ff,S=>t(3,s=S)),Ne(n,Wf,S=>t(4,o=S)),Ne(n,jf,S=>t(5,a=S)),Ne(n,Hf,S=>t(6,l=S)),Ne(n,Uf,S=>t(7,c=S)),Ne(n,zf,S=>t(8,u=S)),Ne(n,Kt,S=>t(9,h=S));let{params:f}=e,{callback:p}=e;const d=new Set(["EB Garamond","Garamond","Arial","Arial Black","Bahnschrift","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Ebrima","Franklin Gothic Medium","Gabriola","Gadugi","Georgia","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","Leelawadee UI","Lucida Console","Lucida Sans Unicode","Malgun Gothic","Marlett","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU-ExtB","Mongolian Baiti","MS Gothic","MV Boli","Myanmar Text","Nirmala UI","Palatino Linotype","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Historic","Segoe UI Emoji","Segoe UI Symbol","SimSun","Sitka","Sylfaen","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Yu Gothic","American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Baskerville","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Copperplate","Courier","Courier New","Didot","DIN Alternate","DIN Condensed","Futura","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","Impact","Lucida Grande","Luminari","Marker Felt","Menlo","Microsoft Sans Serif","Monaco","Noteworthy","Optima","Palatino","Papyrus","Phosphate","Rockwell","Savoye LET","SignPainter","Skia","Snell Roundhand","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","Zapfino"].sort()),m=new Promise(S=>setTimeout(()=>{const C=new Set;for(const B of d.values())window.document.fonts.check(`12px "${B}"`)&&C.add(B);S([...C.values()])}));function b(){r=this.value,Mf.set(r)}function A(){i=Xr(this.value),$f.set(i)}function g(){s=Xr(this.value),Ff.set(s)}function v(){o=Xr(this.value),Wf.set(o)}function O(){a=this.value,jf.set(a)}function _(){l=Xr(this.value),Hf.set(l)}function x(){c=Xr(this.value),Uf.set(c)}function T(){u=Xr(this.value),zf.set(u)}const E=()=>p(!0);return n.$$set=S=>{"params"in S&&t(11,f=S.params),"callback"in S&&t(0,p=S.callback)},[p,r,i,s,o,a,l,c,u,h,m,f,b,A,g,v,O,_,x,T,E]}class OY extends kn{constructor(e){super(),xn(this,e,yY,gY,gn,{params:11,callback:0})}}function bY(n){let e,t=n[1]("navbar.file.new")+"",r,i,s,o,a,l=n[1]("navbar.file.newFire")+"",c,u,h,f,p,d,m,b=n[1]("navbar.file.open")+"",A,g,v,O=n[1]("navbar.file.save")+"",_,x,T,E=n[1]("navbar.file.recover")+"",S,C,B;return{c(){e=Y("p"),r=Ae(t),i=fe(),s=Y("hr"),o=fe(),a=Y("p"),c=Ae(l),u=fe(),h=Y("hr"),f=fe(),p=Y("input"),d=fe(),m=Y("label"),A=Ae(b),g=fe(),v=Y("p"),_=Ae(O),x=fe(),T=Y("p"),S=Ae(E),G(e,"class","svelte-zhr99j"),G(s,"class","svelte-zhr99j"),G(a,"class","svelte-zhr99j"),G(h,"class","svelte-zhr99j"),G(p,"type","file"),G(p,"name","open"),G(p,"id","open"),G(p,"accept",".xlgc,.md"),G(p,"class","svelte-zhr99j"),G(m,"for","open"),G(m,"class","svelte-zhr99j"),G(v,"class","svelte-zhr99j"),G(T,"class","svelte-zhr99j")},m(M,D){Te(M,e,D),W(e,r),Te(M,i,D),Te(M,s,D),Te(M,o,D),Te(M,a,D),W(a,c),Te(M,u,D),Te(M,h,D),Te(M,f,D),Te(M,p,D),Te(M,d,D),Te(M,m,D),W(m,A),Te(M,g,D),Te(M,v,D),W(v,_),Te(M,x,D),Te(M,T,D),W(T,S),C||(B=[Ie(e,"click",n[8]),Ie(a,"click",n[9]),Ie(p,"change",n[10]),Ie(v,"click",n[11]),Ie(T,"click",n[12])],C=!0)},p(M,D){D&2&&t!==(t=M[1]("navbar.file.new")+"")&&Ee(r,t),D&2&&l!==(l=M[1]("navbar.file.newFire")+"")&&Ee(c,l),D&2&&b!==(b=M[1]("navbar.file.open")+"")&&Ee(A,b),D&2&&O!==(O=M[1]("navbar.file.save")+"")&&Ee(_,O),D&2&&E!==(E=M[1]("navbar.file.recover")+"")&&Ee(S,E)},d(M){M&&Se(e),M&&Se(i),M&&Se(s),M&&Se(o),M&&Se(a),M&&Se(u),M&&Se(h),M&&Se(f),M&&Se(p),M&&Se(d),M&&Se(m),M&&Se(g),M&&Se(v),M&&Se(x),M&&Se(T),C=!1,Xt(B)}}}function vY(n){let e,t=n[1]("app.chooseother")+"",r,i,s,o=n[1]("dialogs.shuffle.savecopy")+"",a,l,c;return{c(){e=Y("p"),r=Ae(t),i=fe(),s=Y("p"),a=Ae(o),G(e,"class","svelte-zhr99j"),G(s,"class","svelte-zhr99j")},m(u,h){Te(u,e,h),W(e,r),Te(u,i,h),Te(u,s,h),W(s,a),l||(c=[Ie(e,"click",BR),Ie(s,"click",n[7])],l=!0)},p(u,h){h&2&&t!==(t=u[1]("app.chooseother")+"")&&Ee(r,t),h&2&&o!==(o=u[1]("dialogs.shuffle.savecopy")+"")&&Ee(a,o)},d(u){u&&Se(e),u&&Se(i),u&&Se(s),l=!1,Xt(c)}}}function ik(n){let e,t,r=n[1]("navbar.book.title")+"",i,s,o,a,l=n[1]("navbar.book.graph")+"",c,u,h,f=n[1]("navbar.book.shuffle")+"",p,d,m,b=n[1]("navbar.book.sort")+"",A,g,v,O=n[1]("navbar.book.compact")+"",_,x,T,E,S=n[1]("navbar.export.title")+"",C,B,M,D,L=n[1]("navbar.export.docx")+"",P,X,Z,K=n[1]("navbar.export.fodt")+"",ee,J,ge,k=n[1]("navbar.export.html")+"",j,V,H,q=n[1]("navbar.export.xlgc")+"",le,be,ae,he,U,R=n[1]("navbar.export.others")+"",Q,F,ie,me,oe,ue,de=n[1]("navbar.export.settings")+"",pe,xe,Fe,st;return{c(){e=Y("div"),t=Y("h1"),i=Ae(r),s=fe(),o=Y("div"),a=Y("p"),c=Ae(l),u=fe(),h=Y("p"),p=Ae(f),d=fe(),m=Y("p"),A=Ae(b),g=fe(),v=Y("p"),_=Ae(O),x=fe(),T=Y("div"),E=Y("h1"),C=Ae(S),B=fe(),M=Y("div"),D=Y("p"),P=Ae(L),X=fe(),Z=Y("p"),ee=Ae(K),J=fe(),ge=Y("p"),j=Ae(k),V=fe(),H=Y("p"),le=Ae(q),be=fe(),ae=Y("hr"),he=fe(),U=Y("a"),Q=Ae(R),ie=fe(),me=Y("hr"),oe=fe(),ue=Y("a"),pe=Ae(de),G(t,"class","svelte-zhr99j"),G(a,"class","svelte-zhr99j"),G(h,"class","svelte-zhr99j"),G(m,"class","svelte-zhr99j"),G(v,"class","svelte-zhr99j"),G(o,"class","content svelte-zhr99j"),G(e,"class","svelte-zhr99j"),G(E,"class","svelte-zhr99j"),G(D,"class","svelte-zhr99j"),G(Z,"class","svelte-zhr99j"),G(ge,"class","svelte-zhr99j"),G(H,"class","svelte-zhr99j"),G(ae,"class","svelte-zhr99j"),G(U,"href",F=n[1]("navbar.export.otherslink")),G(U,"target","_blank"),G(U,"rel","noopener"),G(U,"class","svelte-zhr99j"),G(me,"class","svelte-zhr99j"),G(ue,"href",xe=n[1]("navbar.export.settingslink")),G(ue,"target","_blank"),G(ue,"rel","noopener"),G(ue,"class","svelte-zhr99j"),G(M,"class","content svelte-zhr99j"),G(T,"class","svelte-zhr99j")},m(I,N){Te(I,e,N),W(e,t),W(t,i),W(e,s),W(e,o),W(o,a),W(a,c),W(o,u),W(o,h),W(h,p),W(o,d),W(o,m),W(m,A),W(o,g),W(o,v),W(v,_),Te(I,x,N),Te(I,T,N),W(T,E),W(E,C),W(T,B),W(T,M),W(M,D),W(D,P),W(M,X),W(M,Z),W(Z,ee),W(M,J),W(M,ge),W(ge,j),W(M,V),W(M,H),W(H,le),W(M,be),W(M,ae),W(M,he),W(M,U),W(U,Q),W(M,ie),W(M,me),W(M,oe),W(M,ue),W(ue,pe),Fe||(st=[Ie(a,"click",n[13]),Ie(h,"click",n[14]),Ie(m,"click",n[15]),Ie(v,"click",n[16]),Ie(D,"click",n[17]),Ie(Z,"click",n[18]),Ie(ge,"click",n[19]),Ie(H,"click",n[20])],Fe=!0)},p(I,N){N&2&&r!==(r=I[1]("navbar.book.title")+"")&&Ee(i,r),N&2&&l!==(l=I[1]("navbar.book.graph")+"")&&Ee(c,l),N&2&&f!==(f=I[1]("navbar.book.shuffle")+"")&&Ee(p,f),N&2&&b!==(b=I[1]("navbar.book.sort")+"")&&Ee(A,b),N&2&&O!==(O=I[1]("navbar.book.compact")+"")&&Ee(_,O),N&2&&S!==(S=I[1]("navbar.export.title")+"")&&Ee(C,S),N&2&&L!==(L=I[1]("navbar.export.docx")+"")&&Ee(P,L),N&2&&K!==(K=I[1]("navbar.export.fodt")+"")&&Ee(ee,K),N&2&&k!==(k=I[1]("navbar.export.html")+"")&&Ee(j,k),N&2&&q!==(q=I[1]("navbar.export.xlgc")+"")&&Ee(le,q),N&2&&R!==(R=I[1]("navbar.export.others")+"")&&Ee(Q,R),N&2&&F!==(F=I[1]("navbar.export.otherslink"))&&G(U,"href",F),N&2&&de!==(de=I[1]("navbar.export.settings")+"")&&Ee(pe,de),N&2&&xe!==(xe=I[1]("navbar.export.settingslink"))&&G(ue,"href",xe)},d(I){I&&Se(e),I&&Se(x),I&&Se(T),Fe=!1,Xt(st)}}}function sk(n){let e,t,r,i,s,o,a,l,c,u,h,f,p,d,m,b,A,g,v,O,_,x,T,E,S,C,B,M;return{c(){e=Y("div"),t=fe(),r=Y("span"),i=Y("div"),s=Y("span"),c=fe(),u=Y("div"),h=Y("span"),m=fe(),b=Y("div"),A=Y("span"),x=fe(),T=Y("div"),E=Y("span"),Dt(e,"margin","auto"),G(s,"aria-label",o=n[1]("navbar.buttons.fullscreen")),G(s,"class",a=Qr("dropbtn "+(n[0]?"icon-resize-small":"icon-resize-full"))+" svelte-zhr99j"),G(i,"title",l=n[1]("navbar.buttons.fullscreen")),G(i,"class","svelte-zhr99j"),G(h,"aria-label",f=n[1]("navbar.buttons.darktheme")),G(h,"class",p=Qr("dropbtn "+(n[6]=="light"?"icon-moon":"icon-sun"))+" svelte-zhr99j"),G(u,"title",d=n[1]("navbar.buttons.darktheme")),G(u,"class","svelte-zhr99j"),G(A,"aria-label",g=n[1]("navbar.buttons.settings")),G(A,"class",v=Qr("dropbtn icon-cog")+" svelte-zhr99j"),G(b,"title",O=n[1]("navbar.buttons.settings")),G(b,"class","svelte-zhr99j"),G(r,"class",_=Qr("nav-buttons "+(n[5]?"display":"hidden"))+" svelte-zhr99j"),G(E,"aria-label",S=n[1]("sidemenu.toggle")),G(E,"class","dropbtn icon-menu svelte-zhr99j"),G(T,"title",C=n[1]("sidemenu.toggle")),G(T,"class","nav-button sidemenu svelte-zhr99j")},m(D,L){Te(D,e,L),Te(D,t,L),Te(D,r,L),W(r,i),W(i,s),W(r,c),W(r,u),W(u,h),W(r,m),W(r,b),W(b,A),Te(D,x,L),Te(D,T,L),W(T,E),B||(M=[Ie(s,"click",n[22]),Ie(h,"click",n[23]),Ie(A,"click",n[24]),Ie(E,"click",n[25])],B=!0)},p(D,L){L&2&&o!==(o=D[1]("navbar.buttons.fullscreen"))&&G(s,"aria-label",o),L&1&&a!==(a=Qr("dropbtn "+(D[0]?"icon-resize-small":"icon-resize-full"))+" svelte-zhr99j")&&G(s,"class",a),L&2&&l!==(l=D[1]("navbar.buttons.fullscreen"))&&G(i,"title",l),L&2&&f!==(f=D[1]("navbar.buttons.darktheme"))&&G(h,"aria-label",f),L&64&&p!==(p=Qr("dropbtn "+(D[6]=="light"?"icon-moon":"icon-sun"))+" svelte-zhr99j")&&G(h,"class",p),L&2&&d!==(d=D[1]("navbar.buttons.darktheme"))&&G(u,"title",d),L&2&&g!==(g=D[1]("navbar.buttons.settings"))&&G(A,"aria-label",g),L&2&&O!==(O=D[1]("navbar.buttons.settings"))&&G(b,"title",O),L&32&&_!==(_=Qr("nav-buttons "+(D[5]?"display":"hidden"))+" svelte-zhr99j")&&G(r,"class",_),L&2&&S!==(S=D[1]("sidemenu.toggle"))&&G(E,"aria-label",S),L&2&&C!==(C=D[1]("sidemenu.toggle"))&&G(T,"title",C)},d(D){D&&Se(e),D&&Se(t),D&&Se(r),D&&Se(x),D&&Se(T),B=!1,Xt(M)}}}function wY(n){let e,t,r,i=n[1]("navbar.file.title")+"",s,o,a,l,c,u,h,f=n[1]("navbar.help.title")+"",p,d,m,b,A=n[1]("navbar.help.guide")+"",g,v,O,_,x=n[1]("navbar.help.forum")+"",T,E,S,C=n[1]("navbar.help.about")+"",B,M,D,L;function P(J,ge){return J[2]?vY:bY}let X=P(n),Z=X(n),K=n[3]&&ik(n),ee=n[3]&&sk(n);return{c(){e=Y("nav"),t=Y("div"),r=Y("h1"),s=Ae(i),o=fe(),a=Y("div"),Z.c(),l=fe(),K&&K.c(),c=fe(),u=Y("div"),h=Y("h1"),p=Ae(f),d=fe(),m=Y("div"),b=Y("a"),g=Ae(A),O=fe(),_=Y("a"),T=Ae(x),E=fe(),S=Y("p"),B=Ae(C),M=fe(),ee&&ee.c(),G(r,"class","svelte-zhr99j"),G(a,"class","content svelte-zhr99j"),G(t,"class","svelte-zhr99j"),G(h,"class","svelte-zhr99j"),G(b,"href",v=n[1]("navbar.help.guidefile")),G(b,"target","_blank"),G(b,"rel","noopener"),G(b,"class","svelte-zhr99j"),G(_,"href","https://www.librogame.net/index.php/forum/topic?id=5182&p=1#p148583"),G(_,"target","_blank"),G(_,"rel","noopener"),G(_,"class","svelte-zhr99j"),G(S,"class","svelte-zhr99j"),G(m,"class","content svelte-zhr99j"),G(u,"class","svelte-zhr99j"),G(e,"class","svelte-zhr99j")},m(J,ge){Te(J,e,ge),W(e,t),W(t,r),W(r,s),W(t,o),W(t,a),Z.m(a,null),W(e,l),K&&K.m(e,null),W(e,c),W(e,u),W(u,h),W(h,p),W(u,d),W(u,m),W(m,b),W(b,g),W(m,O),W(m,_),W(_,T),W(m,E),W(m,S),W(S,B),W(e,M),ee&&ee.m(e,null),D||(L=Ie(S,"click",n[21]),D=!0)},p(J,[ge]){ge&2&&i!==(i=J[1]("navbar.file.title")+"")&&Ee(s,i),X===(X=P(J))&&Z?Z.p(J,ge):(Z.d(1),Z=X(J),Z&&(Z.c(),Z.m(a,null))),J[3]?K?K.p(J,ge):(K=ik(J),K.c(),K.m(e,c)):K&&(K.d(1),K=null),ge&2&&f!==(f=J[1]("navbar.help.title")+"")&&Ee(p,f),ge&2&&A!==(A=J[1]("navbar.help.guide")+"")&&Ee(g,A),ge&2&&v!==(v=J[1]("navbar.help.guidefile"))&&G(b,"href",v),ge&2&&x!==(x=J[1]("navbar.help.forum")+"")&&Ee(T,x),ge&2&&C!==(C=J[1]("navbar.help.about")+"")&&Ee(B,C),J[3]?ee?ee.p(J,ge):(ee=sk(J),ee.c(),ee.m(e,null)):ee&&(ee.d(1),ee=null)},i:Ue,o:Ue,d(J){J&&Se(e),Z.d(),K&&K.d(),ee&&ee.d(),D=!1,L()}}}function AY(n,e,t){let r,i,s,o,a,l;Ne(n,Kt,D=>t(1,r=D)),Ne(n,za,D=>t(2,i=D)),Ne(n,Wc,D=>t(3,s=D)),Ne(n,At,D=>t(4,o=D)),Ne(n,Nr,D=>t(5,a=D)),Ne(n,Bf,D=>t(6,l=D)),w0({S:()=>pi("md",At.flush()),O:()=>document.getElementById("open").click()});let c=!!window.document.fullscreenElement;return document.onfullscreenchange=()=>{t(0,c=!!window.document.fullscreenElement)},[c,r,i,s,o,a,l,()=>pi("md",At.flush()),()=>Kn(nY),()=>Kn(sY),D=>xX(D.target),()=>pi("md",At.flush()),()=>Kn(fY),()=>Kn(ZX,()=>BB(At.flush())),()=>Kn(JX),async()=>{await Kn(f0,r("dialogs.confirm"),r("dialogs.chapter.sort"),!0)&&ht().dispatch({changes:{from:0,to:ht().state.doc.length,insert:QB(o)}})},async()=>{await Kn(f0,r("dialogs.confirm"),r("dialogs.chapter.compact"),!0)&&ht().dispatch({changes:{from:0,to:ht().state.doc.length,insert:RB(o)}})},()=>pi("docx",At.flush()),()=>pi("fodt",At.flush()),()=>pi("html",At.flush()),()=>pi("xlgc",At.flush()),()=>Kn(zX),()=>{window.document.fullscreenElement?window.document.exitFullscreen():window.document.body.requestFullscreen()},()=>qs(Bf,l=l=="light"?"dark":"light",l),()=>Kn(OY),()=>qs(Nr,a=!a,a)]}class _Y extends kn{constructor(e){super(),xn(this,e,AY,wY,gn,{})}}function xY(n){let e;return{c(){e=Y("div"),e.innerHTML='<i class="icon-arrows-cw animate-spin svelte-1iv98mm" style="width: fit-content;"></i>'},m(t,r){Te(t,e,r)},d(t){t&&Se(e)}}}function kY(n){let e;return{c(){e=Y("i"),G(e,"class","icon-ok svelte-1iv98mm"),Dt(e,"color","green")},m(t,r){Te(t,e,r)},d(t){t&&Se(e)}}}function SY(n){let e,t,r,i,s,o,a,l,c,u,h,f,p,d,m,b,A,g,v,O,_,x,T,E,S,C,B,M,D,L,P;function X(ee,J){if(ee[11]===!0)return kY;if(ee[11]===!1)return xY}let Z=X(n),K=Z&&Z(n);return{c(){e=Y("main"),t=Y("div"),r=Y("h1"),i=Ae(n[9]),s=fe(),o=Y("div"),a=Y("span"),c=fe(),u=Y("div"),h=Y("span"),p=fe(),d=Y("div"),m=Y("span"),A=fe(),g=Y("div"),v=Y("span"),v.innerHTML='[<span class="icon-flash svelte-1iv98mm"></span>]',_=fe(),x=Y("div"),T=Ae("[L]"),S=fe(),C=Y("div"),B=fe(),M=Y("div"),K&&K.c(),G(r,"class","only-desktop svelte-1iv98mm"),G(r,"title",n[9]),G(a,"class","icon-search"),G(o,"title",l=n[10]("editor.buttons.find")),G(o,"class","svelte-1iv98mm"),G(h,"class","icon-ccw"),G(u,"title",f=n[10]("editor.buttons.undo")),G(u,"class","svelte-1iv98mm"),G(m,"class","icon-cw"),G(d,"title",b=n[10]("editor.buttons.redo")),G(d,"class","svelte-1iv98mm"),G(v,"class","link"),G(g,"title",O=n[10]("editor.buttons.quicklink")),G(g,"class","svelte-1iv98mm"),G(x,"title",E=n[10]("editor.buttons.link")),G(x,"class","svelte-1iv98mm"),G(t,"class","toolbar svelte-1iv98mm"),G(C,"class","textarea svelte-1iv98mm"),G(C,"id",N2),G(M,"class","margin svelte-1iv98mm"),G(e,"class","editor svelte-1iv98mm"),G(e,"style",D=`--mage-settings-font: ${n[0].trim()};
 --mage-settings-fontsize: ${Number(String(n[1]).trim())*n[2]/100}pt;
 --mage-settings-pagewidth: ${Number(String(n[3]).trim())*2.85*n[2]/100}pt;
 --mage-settings-linemargin: ${String(n[4]).trim()}px;
 --mage-settings-linespacing: ${String(n[5]).trim()};
 --mage-settings-textalign: ${n[6]=="1"?"left":"justify"};
 ${n[7]=="1"?"--mage-settings-titlehighlight: transparent;":""}`)},m(ee,J){Te(ee,e,J),W(e,t),W(t,r),W(r,i),W(t,s),W(t,o),W(o,a),W(t,c),W(t,u),W(u,h),W(t,p),W(t,d),W(d,m),W(t,A),W(t,g),W(g,v),W(t,_),W(t,x),W(x,T),W(e,S),W(e,C),W(e,B),W(e,M),K&&K.m(M,null),L||(P=[Ie(r,"click",n[14]),Ie(o,"click",n[15]),Ie(u,"click",n[16]),Ie(d,"click",n[17]),Ie(g,"click",n[13]),Ie(x,"click",n[12])],L=!0)},p(ee,[J]){J&512&&Ee(i,ee[9]),J&512&&G(r,"title",ee[9]),J&1024&&l!==(l=ee[10]("editor.buttons.find"))&&G(o,"title",l),J&1024&&f!==(f=ee[10]("editor.buttons.undo"))&&G(u,"title",f),J&1024&&b!==(b=ee[10]("editor.buttons.redo"))&&G(d,"title",b),J&1024&&O!==(O=ee[10]("editor.buttons.quicklink"))&&G(g,"title",O),J&1024&&E!==(E=ee[10]("editor.buttons.link"))&&G(x,"title",E),Z!==(Z=X(ee))&&(K&&K.d(1),K=Z&&Z(ee),K&&(K.c(),K.m(M,null))),J&255&&D!==(D=`--mage-settings-font: ${ee[0].trim()};
 --mage-settings-fontsize: ${Number(String(ee[1]).trim())*ee[2]/100}pt;
 --mage-settings-pagewidth: ${Number(String(ee[3]).trim())*2.85*ee[2]/100}pt;
 --mage-settings-linemargin: ${String(ee[4]).trim()}px;
 --mage-settings-linespacing: ${String(ee[5]).trim()};
 --mage-settings-textalign: ${ee[6]=="1"?"left":"justify"};
 ${ee[7]=="1"?"--mage-settings-titlehighlight: transparent;":""}`)&&G(e,"style",D)},i:Ue,o:Ue,d(ee){ee&&Se(e),K&&K.d(),L=!1,Xt(P)}}}function TY(n,e,t){let r,i,s,o,a,l,c,u,h,f,p,d,m,b,A,g;Ne(n,Vn,S=>t(18,r=S)),Ne(n,Ua,S=>t(19,i=S)),Ne(n,Ao,S=>t(20,s=S)),Ne(n,za,S=>t(21,o=S)),Ne(n,Mf,S=>t(0,a=S)),Ne(n,$f,S=>t(1,l=S)),Ne(n,Wf,S=>t(2,c=S)),Ne(n,Ff,S=>t(3,u=S)),Ne(n,Hf,S=>t(4,h=S)),Ne(n,jf,S=>t(5,f=S)),Ne(n,zf,S=>t(6,p=S)),Ne(n,Uf,S=>t(7,d=S)),Ne(n,Nr,S=>t(8,m=S)),Ne(n,wX,S=>t(9,b=S)),Ne(n,Kt,S=>t(10,A=S)),Ne(n,h0,S=>t(11,g=S)),zL(()=>{if(o){SX();return}Vd.load()});const v=()=>{const{from:S,to:C}=s,B=r.properties.disableShortLinks=="true";ht().dispatch({changes:{from:C,to:C,insert:B?"[](#)":"[]"}}),ht().dispatch({selection:{anchor:C+(B?4:1)},effects:[We.scrollIntoView(C)]}),ht().focus()},O=()=>{let{from:S,to:C}=s;const{contentStart:B,end:M}=r.chapters.get(i),D=Sh(),L=r.properties.disableShortLinks=="true"?`[](#${Sh()})`:`[${Sh()}]`;B!=ht().state.doc.lineAt(C).number-1?(ht().dispatch({changes:{from:C,to:C,insert:L}}),C+=L.length):(ht().dispatch({changes:{from:C,to:C,insert:`
`+L}}),C+=L.length+1),gf(D,`

### ${D}`),L2(D)<=B&&(C+=`

### ${D}`.length+1),ht().dispatch({selection:{anchor:C},effects:[We.scrollIntoView(C)]}),ht().focus()};return w0({K:()=>O(),L:()=>v()}),[a,l,c,u,h,f,p,d,m,b,A,g,v,O,()=>qs(Nr,m=!m,m),async()=>{bO(ht())},async()=>{fO(ht())},async()=>{dO(ht())}]}class EY extends kn{constructor(e){super(),xn(this,e,TY,SY,gn,{})}}function ok(n){return typeof n=="object"&&n!=null&&n.nodeType===1}function ak(n,e){return(!e||n!=="hidden")&&n!=="visible"&&n!=="clip"}function Km(n,e){if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){var t=getComputedStyle(n,null);return ak(t.overflowY,e)||ak(t.overflowX,e)||function(r){var i=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)}(n)}return!1}function nh(n,e,t,r,i,s,o,a){return s<n&&o>e||s>n&&o<e?0:s<=n&&a<=t||o>=e&&a>=t?s-n-r:o>e&&a<t||s<n&&a>t?o-e+i:0}function lk(n,e){var t=window,r=e.scrollMode,i=e.block,s=e.inline,o=e.boundary,a=e.skipOverflowHiddenElements,l=typeof o=="function"?o:function(he){return he!==o};if(!ok(n))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,u=[],h=n;ok(h)&&l(h);){if((h=h.parentElement)===c){u.push(h);break}h!=null&&h===document.body&&Km(h)&&!Km(document.documentElement)||h!=null&&Km(h,a)&&u.push(h)}for(var f=t.visualViewport?t.visualViewport.width:innerWidth,p=t.visualViewport?t.visualViewport.height:innerHeight,d=window.scrollX||pageXOffset,m=window.scrollY||pageYOffset,b=n.getBoundingClientRect(),A=b.height,g=b.width,v=b.top,O=b.right,_=b.bottom,x=b.left,T=i==="start"||i==="nearest"?v:i==="end"?_:v+A/2,E=s==="center"?x+g/2:s==="end"?O:x,S=[],C=0;C<u.length;C++){var B=u[C],M=B.getBoundingClientRect(),D=M.height,L=M.width,P=M.top,X=M.right,Z=M.bottom,K=M.left;if(r==="if-needed"&&v>=0&&x>=0&&_<=p&&O<=f&&v>=P&&_<=Z&&x>=K&&O<=X)return S;var ee=getComputedStyle(B),J=parseInt(ee.borderLeftWidth,10),ge=parseInt(ee.borderTopWidth,10),k=parseInt(ee.borderRightWidth,10),j=parseInt(ee.borderBottomWidth,10),V=0,H=0,q="offsetWidth"in B?B.offsetWidth-B.clientWidth-J-k:0,le="offsetHeight"in B?B.offsetHeight-B.clientHeight-ge-j:0;if(c===B)V=i==="start"?T:i==="end"?T-p:i==="nearest"?nh(m,m+p,p,ge,j,m+T,m+T+A,A):T-p/2,H=s==="start"?E:s==="center"?E-f/2:s==="end"?E-f:nh(d,d+f,f,J,k,d+E,d+E+g,g),V=Math.max(0,V+m),H=Math.max(0,H+d);else{V=i==="start"?T-P-ge:i==="end"?T-Z+j+le:i==="nearest"?nh(P,Z,D,ge,j+le,T,T+A,A):T-(P+D/2)+le/2,H=s==="start"?E-K-J:s==="center"?E-(K+L/2)+q/2:s==="end"?E-X+k+q:nh(K,X,L,J,k+q,E,E+g,g);var be=B.scrollLeft,ae=B.scrollTop;T+=ae-(V=Math.max(0,Math.min(ae+V,B.scrollHeight-D+le))),E+=be-(H=Math.max(0,Math.min(be+H,B.scrollWidth-L+q)))}S.push({el:B,top:V,left:H})}return S}function MR(n){return n===Object(n)&&Object.keys(n).length!==0}function CY(n,e){e===void 0&&(e="auto");var t="scrollBehavior"in document.body.style;n.forEach(function(r){var i=r.el,s=r.top,o=r.left;i.scroll&&t?i.scroll({top:s,left:o,behavior:e}):(i.scrollTop=s,i.scrollLeft=o)})}function IY(n){return n===!1?{block:"end",inline:"nearest"}:MR(n)?n:{block:"start",inline:"nearest"}}function ck(n,e){var t=n.isConnected||n.ownerDocument.documentElement.contains(n);if(MR(e)&&typeof e.behavior=="function")return e.behavior(t?lk(n,e):[]);if(!!t){var r=IY(e);return CY(lk(n,r),r.behavior)}}var Jm,$R=function(){return Jm||(Jm="performance"in window?performance.now.bind(performance):Date.now),Jm()};function FR(n){var e=$R(),t=Math.min((e-n.startTime)/n.duration,1),r=n.ease(t),i=n.startX+(n.x-n.startX)*r,s=n.startY+(n.y-n.startY)*r;n.method(i,s),i!==n.x||s!==n.y?requestAnimationFrame(function(){return FR(n)}):n.cb()}function RY(n,e,t,r,i,s){r===void 0&&(r=600),i===void 0&&(i=function(h){return 1+--h*h*h*h*h});var o,a,l,c;o=n,a=n.scrollLeft,l=n.scrollTop,c=function(h,f){n.scrollLeft=Math.ceil(h),n.scrollTop=Math.ceil(f)},FR({scrollable:o,method:c,startTime:$R(),startX:a,startY:l,x:e,y:t,duration:r,ease:i,cb:s})}var QY=function(e){return e&&!e.behavior||e.behavior==="smooth"};function PY(n,e){var t=e||{};return QY(t)?ck(n,{block:t.block,inline:t.inline,scrollMode:t.scrollMode,boundary:t.boundary,behavior:function(i){return Promise.all(i.reduce(function(s,o){var a=o.el,l=o.left,c=o.top,u=a.scrollLeft,h=a.scrollTop;return u===l&&h===c?s:[].concat(s,[new Promise(function(f){return RY(a,l,c,t.duration,t.ease,function(){return f({el:a,left:[u,l],top:[h,c]})})})])},[]))}}):Promise.resolve(ck(n,e))}var DY=PY,uk=DY;function hk(n,e,t){const r=n.slice();return r[23]=e[t],r}function fk(n){let e,t,r,i,s,o,a;function l(){return n[19](n[23])}return{c(){e=Y("div"),t=Y("img"),s=fe(),G(t,"alt",r=n[23]),gs(t.src,i=n[11][n[23]])||G(t,"src",i),G(t,"class","svelte-btwwxd"),G(e,"class","svelte-btwwxd"),ln(e,"selected",n[6][n[23]])},m(c,u){Te(c,e,u),W(e,t),W(e,s),o||(a=Ie(e,"click",l),o=!0)},p(c,u){n=c,u&64&&ln(e,"selected",n[6][n[23]])},d(c){c&&Se(e),o=!1,a()}}}function LY(n){let e,t,r,i,s,o,a=n[10]("dialogs.chapter.name")+"",l,c,u,h,f,p,d=n[10]("dialogs.chapter.title")+"",m,b,A,g,v,O,_=n[10]("dialogs.chapter.group")+"",x,T,E,S,C,B,M,D,L=n[10]("dialogs.chapter.warnings.duplicate")+"",P,X,Z,K,ee=n[10]("dialogs.chapter.warnings.invalidkey")+"",J,ge,k,j,V=n[10]("dialogs.chapter.warnings.invalidgroup")+"",H,q,le,be=n[10]("dialogs.ok")+"",ae,he,U,R,Q=n[10]("dialogs.cancel")+"",F,ie,me,oe=["final","fixed","death"],ue=[];for(let de=0;de<3;de+=1)ue[de]=fk(hk(n,oe,de));return{c(){e=Y("div"),t=Y("h3"),r=Ae(n[3]),i=fe(),s=Y("div"),o=Y("span"),l=Ae(a),c=fe(),u=Y("input"),h=fe(),f=Y("div"),p=Y("span"),m=Ae(d),b=fe(),A=Y("input"),g=fe(),v=Y("div"),O=Y("span"),x=Ae(_),T=fe(),E=Y("input"),S=fe(),C=Y("div");for(let de=0;de<3;de+=1)ue[de].c();B=fe(),M=Y("p"),D=Y("i"),P=Ae(L),X=fe(),Z=Y("p"),K=Y("i"),J=Ae(ee),ge=fe(),k=Y("p"),j=Y("i"),H=Ae(V),q=fe(),le=Y("button"),ae=Ae(be),U=fe(),R=Y("button"),F=Ae(Q),G(o,"class","svelte-btwwxd"),G(u,"type","text"),G(u,"class","svelte-btwwxd"),ln(u,"error",n[9]||!n[8]),G(s,"class","input svelte-btwwxd"),G(p,"class","svelte-btwwxd"),G(A,"type","text"),G(A,"class","svelte-btwwxd"),G(f,"class","input svelte-btwwxd"),G(O,"class","svelte-btwwxd"),G(E,"type","text"),G(E,"class","svelte-btwwxd"),ln(E,"error",!n[7]),G(v,"class","input svelte-btwwxd"),G(C,"class","flags svelte-btwwxd"),G(D,"class","icon-warning svelte-btwwxd"),Dt(M,"font-size","85%"),G(M,"class","svelte-btwwxd"),ln(M,"hide",!n[9]),G(K,"class","icon-warning svelte-btwwxd"),Dt(Z,"font-size","85%"),G(Z,"class","svelte-btwwxd"),ln(Z,"hide",n[8]),G(j,"class","icon-warning svelte-btwwxd"),Dt(k,"font-size","85%"),G(k,"class","svelte-btwwxd"),ln(k,"hide",n[7]),le.disabled=he=n[9]||!n[8]||!n[7],G(le,"class","ok"),G(R,"class","cancel"),G(e,"class","dialog svelte-btwwxd")},m(de,pe){Te(de,e,pe),W(e,t),W(t,r),W(e,i),W(e,s),W(s,o),W(o,l),W(s,c),W(s,u),yt(u,n[1]),W(e,h),W(e,f),W(f,p),W(p,m),W(f,b),W(f,A),yt(A,n[5]),W(e,g),W(e,v),W(v,O),W(O,x),W(v,T),W(v,E),yt(E,n[2]),W(e,S),W(e,C);for(let xe=0;xe<3;xe+=1)ue[xe].m(C,null);W(e,B),W(e,M),W(M,D),W(M,P),W(e,X),W(e,Z),W(Z,K),W(Z,J),W(e,ge),W(e,k),W(k,j),W(k,H),W(e,q),W(e,le),W(le,ae),W(e,U),W(e,R),W(R,F),ie||(me=[Ie(u,"input",n[16]),Ie(A,"input",n[17]),Ie(E,"input",n[18]),Ie(le,"click",n[20]),Ie(R,"click",n[21])],ie=!0)},p(de,[pe]){if(pe&8&&Ee(r,de[3]),pe&1024&&a!==(a=de[10]("dialogs.chapter.name")+"")&&Ee(l,a),pe&2&&u.value!==de[1]&&yt(u,de[1]),pe&768&&ln(u,"error",de[9]||!de[8]),pe&1024&&d!==(d=de[10]("dialogs.chapter.title")+"")&&Ee(m,d),pe&32&&A.value!==de[5]&&yt(A,de[5]),pe&1024&&_!==(_=de[10]("dialogs.chapter.group")+"")&&Ee(x,_),pe&4&&E.value!==de[2]&&yt(E,de[2]),pe&128&&ln(E,"error",!de[7]),pe&2112){oe=["final","fixed","death"];let xe;for(xe=0;xe<3;xe+=1){const Fe=hk(de,oe,xe);ue[xe]?ue[xe].p(Fe,pe):(ue[xe]=fk(Fe),ue[xe].c(),ue[xe].m(C,null))}for(;xe<3;xe+=1)ue[xe].d(1)}pe&1024&&L!==(L=de[10]("dialogs.chapter.warnings.duplicate")+"")&&Ee(P,L),pe&512&&ln(M,"hide",!de[9]),pe&1024&&ee!==(ee=de[10]("dialogs.chapter.warnings.invalidkey")+"")&&Ee(J,ee),pe&256&&ln(Z,"hide",de[8]),pe&1024&&V!==(V=de[10]("dialogs.chapter.warnings.invalidgroup")+"")&&Ee(H,V),pe&128&&ln(k,"hide",de[7]),pe&1024&&be!==(be=de[10]("dialogs.ok")+"")&&Ee(ae,be),pe&896&&he!==(he=de[9]||!de[8]||!de[7])&&(le.disabled=he),pe&1024&&Q!==(Q=de[10]("dialogs.cancel")+"")&&Ee(F,Q)},i:Ue,o:Ue,d(de){de&&Se(e),Ar(ue,de),ie=!1,Xt(me)}}}function NY(n,e,t){let r,i,s,o,a;Ne(n,Vn,C=>t(15,o=C)),Ne(n,Kt,C=>t(10,a=C));let l={death:xb,final:kb,fixed:Sb},{params:c}=e,{callback:u}=e,h,f,p,d,m,b,A;const g=()=>Object.keys(m).filter(C=>m[C]),v=c.subscribe(C=>{t(3,[h,f,p]=C,h,t(1,f),t(4,p)),t(14,A=f),t(5,{title:d="",group:b=""}=p,d,t(2,b));const B=p.flags||[];t(6,m={final:B.includes("final"),fixed:B.includes("fixed"),death:B.includes("death")})});Rk(v);function O(){f=this.value,t(1,f)}function _(){d=this.value,t(5,d)}function x(){b=this.value,t(2,b)}const T=C=>t(6,m[C]=!m[C],m),E=()=>u({key:f,value:wu(Hi({},p),{title:d,group:b,flags:g()})}),S=()=>u(!1);return n.$$set=C=>{"params"in C&&t(13,c=C.params),"callback"in C&&t(0,u=C.callback)},n.$$.update=()=>{n.$$.dirty&49154&&t(9,r=f!==A&&o.chapters.has(f)),n.$$.dirty&2&&t(8,i=f===jo(f)),n.$$.dirty&4&&t(7,s=b===jo(b))},[u,f,b,h,p,d,m,s,i,r,a,l,g,c,A,o,O,_,x,T,E,S]}class dk extends kn{constructor(e){super(),xn(this,e,NY,LY,gn,{params:13,callback:0})}}function BY(n){let e,t,r,i,s,o,a,l,c,u,h,f,p,d,m,b,A;return{c(){e=Y("div"),t=Y("div"),s=fe(),o=Y("div"),l=fe(),c=Y("div"),f=fe(),p=Y("div"),G(t,"class","icon-back svelte-1sp2wng"),G(t,"title",r=n[0]("sidemenu.actions.goback")),G(t,"disabled",i=!n[2]),G(o,"class","icon-plus svelte-1sp2wng"),G(o,"title",a=n[0]("sidemenu.actions.add")),G(c,"class","icon-pencil svelte-1sp2wng"),G(c,"title",u=n[0]("sidemenu.actions.edit")),G(c,"disabled",h=n[1]==""),G(p,"class","icon-trash svelte-1sp2wng"),G(p,"title",d=n[0]("sidemenu.actions.delete")),G(p,"disabled",m=n[1]==""),G(e,"class","buttons svelte-1sp2wng")},m(g,v){Te(g,e,v),W(e,t),W(e,s),W(e,o),W(e,l),W(e,c),W(e,f),W(e,p),b||(A=[Ie(t,"click",Az),Ie(o,"click",n[3]),Ie(c,"click",n[4]),Ie(p,"click",n[5])],b=!0)},p(g,[v]){v&1&&r!==(r=g[0]("sidemenu.actions.goback"))&&G(t,"title",r),v&4&&i!==(i=!g[2])&&G(t,"disabled",i),v&1&&a!==(a=g[0]("sidemenu.actions.add"))&&G(o,"title",a),v&1&&u!==(u=g[0]("sidemenu.actions.edit"))&&G(c,"title",u),v&2&&h!==(h=g[1]=="")&&G(c,"disabled",h),v&1&&d!==(d=g[0]("sidemenu.actions.delete"))&&G(p,"title",d),v&2&&m!==(m=g[1]=="")&&G(p,"disabled",m)},i:Ue,o:Ue,d(g){g&&Se(e),b=!1,Xt(A)}}}function MY(n,e,t){let r,i,s,o,a,l;Ne(n,Nr,f=>t(6,r=f)),Ne(n,Vn,f=>t(7,i=f)),Ne(n,Kt,f=>t(0,s=f)),Ne(n,Ua,f=>t(1,o=f)),Ne(n,At,f=>t(8,a=f)),Ne(n,LO,f=>t(2,l=f));const c=async()=>{const f=await Kn(dk,s("dialogs.chapter.add"),Sh(),{title:"",group:o==""?"":i.chapters.get(o).group||"",flags:[],text:""});if(!f)return;let{key:p,value:d}=f;p=jo(p),d.group=jo(d.group||""),p&&(gf(p,By({spacelines:2,key:p,title:d.title||"",group:d.group,flags:d.flags||[]})),qs(Nr,r=!1,r),At.flush(),Oa(p))},u=async()=>{const f=o;if(f=="")return;const p=await Kn(dk,s("dialogs.chapter.edit"),f,i.chapters.get(f));if(!p)return;let{key:d,value:m}=p;if(d=jo(d),m.group=jo(m.group||""),!d)return;if(d!==f){let O=a.replace(/\[([^\[]*)\](\(\s*#(\w+)\s*\))/g,(..._)=>`[${_[1]}](#${_[3]===f?d:_[3]})`);(!i.properties.disableShortLinks||i.properties.disableShortLinks!=="true")&&(O=O.replace(/\[([^\[]*)\](?!\()/g,(..._)=>`[${_[1]===f?d:_[1]}]`)),ht().dispatch({changes:{from:0,to:ht().state.doc.length,insert:O}})}const b=i.chapters.get(f),A=ht().state.sliceDoc(ht().state.doc.line(b.contentStart+2).from,ht().state.doc.line(b.contentEnd+2).to).split(`
`).filter(O=>!(O.includes("[group]:<>")||O.includes("![flag-")||O.includes("![][flag-"))).join(`
`).trim(),g=ht().state.doc.line(b.start).to,v=ht().state.doc.line(b.contentEnd+1).to;ht().dispatch({changes:{from:g,to:v,insert:""}}),At.flush(),gf(d,By({spacelines:2,key:d,title:m.title||"",group:m.group,flags:m.flags||[],content:A})),At.flush(),Oa(d),qs(Nr,r=!1,r)},h=async()=>{const f=o;if(f!=""&&await Kn(f0,s("dialogs.confirm"),s("dialogs.chapter.delete").replace("%1",f))){const p=i.chapters.get(f),d=ht().state.doc.line(p.start).to,m=ht().state.doc.line(p.contentEnd+1).to;ht().dispatch({changes:{from:d,to:m,insert:""}}),qs(Nr,r=!1,r),ht().focus()}};return w0({R:()=>c(),E:()=>u(),D:()=>h()}),[s,o,l,c,u,h]}class $Y extends kn{constructor(e){super(),xn(this,e,MY,BY,gn,{})}}function pk(n,e,t){const r=n.slice();return r[15]=e[t],r}function mk(n,e,t){const r=n.slice();return r[18]=e[t],r}function gk(n,e,t){const r=n.slice();return r[15]=e[t][0],r[21]=e[t][1],r}function yk(n,e,t){const r=n.slice();return r[18]=e[t],r}function Ok(n,e,t){const r=n.slice();return r[26]=e[t],r}function bk(n){let e,t=n[26]+"",r,i;return{c(){e=Y("option"),r=Ae(t),e.__value=i=n[26],e.value=e.__value},m(s,o){Te(s,e,o),W(e,r)},p(s,o){o&8&&t!==(t=s[26]+"")&&Ee(r,t),o&8&&i!==(i=s[26])&&(e.__value=i,e.value=e.__value)},d(s){s&&Se(e)}}}function vk(n){let e,t,r;return{c(){e=Y("img"),gs(e.src,t=n[7][n[18]])||G(e,"src",t),G(e,"alt",r=n[18])},m(i,s){Te(i,e,s)},p(i,s){s&16&&!gs(e.src,t=i[7][i[18]])&&G(e,"src",t),s&16&&r!==(r=i[18])&&G(e,"alt",r)},d(i){i&&Se(e)}}}function wk(n){let e,t=n[15]+"",r,i,s,o=(n[21].title||"")+"",a,l,c,u,h=n[8](n[15],n[21])+"",f,p,d=n[9](n[15],n[21])+"",m,b,A,g=n[21].flags||[],v=[];for(let _=0;_<g.length;_+=1)v[_]=vk(yk(n,g,_));function O(){return n[12](n[15])}return{c(){e=Y("li"),r=Ae(t),i=fe(),s=Y("b"),a=Ae(o),l=fe();for(let _=0;_<v.length;_+=1)v[_].c();c=fe(),u=Y("span"),f=fe(),p=Y("span"),m=fe(),G(s,"class","svelte-zdqsuu"),G(u,"class","errors svelte-zdqsuu"),G(p,"class","errors svelte-zdqsuu"),G(e,"class","svelte-zdqsuu"),ln(e,"selected",n[15]===n[2])},m(_,x){Te(_,e,x),W(e,r),W(e,i),W(e,s),W(s,a),W(e,l);for(let T=0;T<v.length;T+=1)v[T].m(e,null);W(e,c),W(e,u),u.innerHTML=h,W(e,f),W(e,p),p.innerHTML=d,W(e,m),b||(A=Ie(e,"click",O),b=!0)},p(_,x){if(n=_,x&16&&t!==(t=n[15]+"")&&Ee(r,t),x&16&&o!==(o=(n[21].title||"")+"")&&Ee(a,o),x&144){g=n[21].flags||[];let T;for(T=0;T<g.length;T+=1){const E=yk(n,g,T);v[T]?v[T].p(E,x):(v[T]=vk(E),v[T].c(),v[T].m(e,c))}for(;T<v.length;T+=1)v[T].d(1);v.length=g.length}x&16&&h!==(h=n[8](n[15],n[21])+"")&&(u.innerHTML=h),x&16&&d!==(d=n[9](n[15],n[21])+"")&&(p.innerHTML=d),x&20&&ln(e,"selected",n[15]===n[2])},d(_){_&&Se(e),Ar(v,_),b=!1,A()}}}function Ak(n){let e,t,r;return{c(){e=Y("img"),gs(e.src,t=n[7][n[18]])||G(e,"src",t),G(e,"alt",r=n[18])},m(i,s){Te(i,e,s)},p(i,s){s&10&&!gs(e.src,t=i[7][i[18]])&&G(e,"src",t),s&10&&r!==(r=i[18])&&G(e,"alt",r)},d(i){i&&Se(e)}}}function _k(n){let e,t=n[15]+"",r,i,s,o=(n[3].chapters.get(n[15]).title||"")+"",a,l,c,u,h,f=n[3].chapters.get(n[15]).flags||[],p=[];for(let m=0;m<f.length;m+=1)p[m]=Ak(mk(n,f,m));function d(){return n[13](n[15])}return{c(){e=Y("li"),r=Ae(t),i=fe(),s=Y("b"),a=Ae(o),l=fe();for(let m=0;m<p.length;m+=1)p[m].c();c=fe(),G(s,"class","svelte-zdqsuu"),G(e,"class","svelte-zdqsuu"),ln(e,"selected",n[15]===n[2])},m(m,b){Te(m,e,b),W(e,r),W(e,i),W(e,s),W(s,a),W(e,l);for(let A=0;A<p.length;A+=1)p[A].m(e,null);W(e,c),u||(h=Ie(e,"click",d),u=!0)},p(m,b){if(n=m,b&2&&t!==(t=n[15]+"")&&Ee(r,t),b&10&&o!==(o=(n[3].chapters.get(n[15]).title||"")+"")&&Ee(a,o),b&138){f=n[3].chapters.get(n[15]).flags||[];let A;for(A=0;A<f.length;A+=1){const g=mk(n,f,A);p[A]?p[A].p(g,b):(p[A]=Ak(g),p[A].c(),p[A].m(e,c))}for(;A<p.length;A+=1)p[A].d(1);p.length=f.length}b&6&&ln(e,"selected",n[15]===n[2])},d(m){m&&Se(e),Ar(p,m),u=!1,h()}}}function FY(n){let e,t,r,i,s,o,a,l,c=n[6]("sidemenu.allgroup")+"",u,h,f=n[6]("sidemenu.allgrouperrors")+"",p,d,m=n[6]("sidemenu.allgrouporphanlinks")+"",b,A,g,v,O,_,x,T=n[6]("sidemenu.linkshere")+"",E,S,C,B,M,D,L,P,X,Z,K=[...n[3].groups],ee=[];for(let V=0;V<K.length;V+=1)ee[V]=bk(Ok(n,K,V));g=new $Y({});let J=n[4],ge=[];for(let V=0;V<J.length;V+=1)ge[V]=wk(gk(n,J,V));let k=n[1],j=[];for(let V=0;V<k.length;V+=1)j[V]=_k(pk(n,k,V));return{c(){e=Y("div"),r=fe(),i=Y("aside"),s=Y("h1"),o=Y("span"),a=Y("select"),l=Y("option"),u=Ae(c),h=Y("option"),p=Ae(f),d=Y("option"),b=Ae(m);for(let V=0;V<ee.length;V+=1)ee[V].c();A=fe(),es(g.$$.fragment),v=fe(),O=Y("ul");for(let V=0;V<ge.length;V+=1)ge[V].c();_=fe(),x=Y("h1"),E=Ae(T),S=fe(),C=Ae(n[2]),B=Ae(":"),M=fe(),D=Y("ul");for(let V=0;V<j.length;V+=1)j[V].c();G(e,"class",t=Qr(`mask ${n[5]?"foreground":""}`)+" svelte-zdqsuu"),l.__value="allgroupidtag",l.value=l.__value,h.__value="allgrouperrorsidtag",h.value=h.__value,d.__value="allgrouporphanlinksidtag",d.value=d.__value,G(a,"class","svelte-zdqsuu"),n[0]===void 0&&Vl(()=>n[11].call(a)),G(o,"class","select-dropdown"),G(s,"class","svelte-zdqsuu"),G(O,"class","chapters svelte-zdqsuu"),G(x,"class","svelte-zdqsuu"),G(D,"class","links-here svelte-zdqsuu"),G(i,"class",L=Qr(n[5]?"foreground":"")+" svelte-zdqsuu")},m(V,H){Te(V,e,H),Te(V,r,H),Te(V,i,H),W(i,s),W(s,o),W(o,a),W(a,l),W(l,u),W(a,h),W(h,p),W(a,d),W(d,b);for(let q=0;q<ee.length;q+=1)ee[q].m(a,null);Th(a,n[0]),W(i,A),wi(g,i,null),W(i,v),W(i,O);for(let q=0;q<ge.length;q+=1)ge[q].m(O,null);W(i,_),W(i,x),W(x,E),W(x,S),W(x,C),W(x,B),W(i,M),W(i,D);for(let q=0;q<j.length;q+=1)j[q].m(D,null);P=!0,X||(Z=[Ie(e,"click",n[10]),Ie(a,"change",n[11])],X=!0)},p(V,[H]){if((!P||H&32&&t!==(t=Qr(`mask ${V[5]?"foreground":""}`)+" svelte-zdqsuu"))&&G(e,"class",t),(!P||H&64)&&c!==(c=V[6]("sidemenu.allgroup")+"")&&Ee(u,c),(!P||H&64)&&f!==(f=V[6]("sidemenu.allgrouperrors")+"")&&Ee(p,f),(!P||H&64)&&m!==(m=V[6]("sidemenu.allgrouporphanlinks")+"")&&Ee(b,m),H&8){K=[...V[3].groups];let q;for(q=0;q<K.length;q+=1){const le=Ok(V,K,q);ee[q]?ee[q].p(le,H):(ee[q]=bk(le),ee[q].c(),ee[q].m(a,null))}for(;q<ee.length;q+=1)ee[q].d(1);ee.length=K.length}if(H&9&&Th(a,V[0]),H&916){J=V[4];let q;for(q=0;q<J.length;q+=1){const le=gk(V,J,q);ge[q]?ge[q].p(le,H):(ge[q]=wk(le),ge[q].c(),ge[q].m(O,null))}for(;q<ge.length;q+=1)ge[q].d(1);ge.length=J.length}if((!P||H&64)&&T!==(T=V[6]("sidemenu.linkshere")+"")&&Ee(E,T),(!P||H&4)&&Ee(C,V[2]),H&142){k=V[1];let q;for(q=0;q<k.length;q+=1){const le=pk(V,k,q);j[q]?j[q].p(le,H):(j[q]=_k(le),j[q].c(),j[q].m(D,null))}for(;q<j.length;q+=1)j[q].d(1);j.length=k.length}(!P||H&32&&L!==(L=Qr(V[5]?"foreground":"")+" svelte-zdqsuu"))&&G(i,"class",L)},i(V){P||(Dn(g.$$.fragment,V),P=!0)},o(V){nr(g.$$.fragment,V),P=!1},d(V){V&&Se(e),V&&Se(r),V&&Se(i),Ar(ee,V),Ai(g),Ar(ge,V),Ar(j,V),X=!1,Xt(Z)}}}function WY(n,e,t){let r,i,s,o,a,l;Ne(n,Ua,A=>t(2,s=A)),Ne(n,Vn,A=>t(3,o=A)),Ne(n,Nr,A=>t(5,a=A)),Ne(n,Kt,A=>t(6,l=A));const c={death:xb,final:kb,fixed:Sb};let u="allgroupidtag";const h=(A,g)=>{const v=o.linksToChapter.get(A),O=v&&v.size>0,_=g.links&&g.links.size>0||g.flags&&g.flags.length>0;return g.links&&[...g.links].some(x=>!o.chapters.has(x)),(O?"":'<i class="icon-help"></i>')+(O&&_?"":'<i class="icon-right"></i>')+(_?"":'<i class="icon-help"></i>')},f=(A,g)=>g.links&&[...g.links].some(O=>!o.chapters.has(O))?'<b>[</b><i class="icon-help"></i><b>]</b>':"",p=()=>qs(Nr,a=!1,a);function d(){u=Ik(this),t(0,u),t(3,o)}const m=A=>Oa(A),b=A=>Oa(A);return n.$$.update=()=>{n.$$.dirty&4&&(s!=""?(async()=>{await ta();try{uk(document.querySelector("aside ul.chapters li.selected"),{behavior:"smooth",scrollMode:"if-needed"})}catch{}})():(async()=>{await ta();try{uk(document.querySelector("aside ul.chapters li"),{behavior:"smooth",scrollMode:"if-needed"})}catch{}})()),n.$$.dirty&9&&([...o.groups,"allgroupidtag","allgrouperrorsidtag","allgrouporphanlinksidtag"].includes(u)||t(0,u="allgroupidtag")),n.$$.dirty&9&&t(4,r=[...o.chapters].filter(([A,g])=>{if(!u||u=="allgroupidtag")return!0;if(u=="allgrouperrorsidtag"){const O=o.linksToChapter.get(A),_=O&&O.size>0,x=g.links&&g.links.size>0||g.flags&&g.flags.length>0;return!_||!x}if(u=="allgrouporphanlinksidtag")return g.links&&[...g.links].some(_=>!o.chapters.has(_));const v=g.group;return v&&v==u})),n.$$.dirty&12&&t(1,i=[...o.linksToChapter.get(s)||new Set])},[u,i,s,o,r,a,l,c,h,f,p,d,m,b]}class UY extends kn{constructor(e){super(),xn(this,e,WY,FY,gn,{})}}function xk(n,e,t){const r=n.slice();return r[8]=e[t],r}function zY(n){let e,t,r,i,s,o,a,l=n[3]("app.openlocal")+"",c,u,h,f,p,d,m,b,A,g={ctx:n,current:null,token:null,hasCatch:!0,pending:XY,then:GY,catch:HY,value:11,error:12};m0(window.appGetVersion(),g);let v=n[2],O=[];for(let _=0;_<v.length;_+=1)O[_]=kk(xk(n,v,_));return{c(){e=Y("div"),t=Y("div"),r=Y("img"),s=fe(),o=Y("div"),a=Y("button"),c=Ae(l),u=Y("br"),h=fe(),g.block.c(),f=fe(),p=Y("div");for(let _=0;_<O.length;_+=1)O[_].c();d=fe(),m=Y("p"),m.textContent=`Magebook editor - v ${bi.version}`,gs(r.src,i="./static/img/logo.png")||G(r,"src",i),G(r,"alt","logo"),G(r,"class","svelte-6rjfbb"),G(a,"class","ok"),Dt(o,"margin-left","50px"),Dt(t,"display","flex"),Dt(t,"align-items","center"),Dt(t,"margin-top","20px"),G(p,"class","card-container svelte-6rjfbb"),G(e,"class","dialog-container svelte-6rjfbb")},m(_,x){Te(_,e,x),W(e,t),W(t,r),W(t,s),W(t,o),W(o,a),W(a,c),W(o,u),W(o,h),g.block.m(o,g.anchor=null),g.mount=()=>o,g.anchor=null,W(e,f),W(e,p);for(let T=0;T<O.length;T+=1)O[T].m(p,null);W(e,d),W(e,m),b||(A=Ie(a,"click",n[4]),b=!0)},p(_,x){if(n=_,x&8&&l!==(l=n[3]("app.openlocal")+"")&&Ee(c,l),g0(g,n,x),x&4){v=n[2];let T;for(T=0;T<v.length;T+=1){const E=xk(n,v,T);O[T]?O[T].p(E,x):(O[T]=kk(E),O[T].c(),O[T].m(p,null))}for(;T<O.length;T+=1)O[T].d(1);O.length=v.length}},d(_){_&&Se(e),g.block.d(),g.token=null,g=null,Ar(O,_),b=!1,A()}}}function jY(n){let e,t,r,i,s;return{c(){e=Y("div"),t=Y("div"),r=fe(),i=Y("p"),s=Ae(n[1]),G(t,"class","spinner-1 svelte-6rjfbb"),G(e,"class","dialog-container svelte-6rjfbb")},m(o,a){Te(o,e,a),W(e,t),W(e,r),W(e,i),W(i,s)},p(o,a){a&2&&Ee(s,o[1])},d(o){o&&Se(e)}}}function HY(n){let e,t=n[12].message+"",r;return{c(){e=Y("p"),r=Ae(t),Dt(e,"color","red")},m(i,s){Te(i,e,s),W(e,r)},p:Ue,d(i){i&&Se(e)}}}function GY(n){let e,t=n[11]!=bi.version&&VY(n);return{c(){t&&t.c(),e=no()},m(r,i){t&&t.m(r,i),Te(r,e,i)},p(r,i){r[11]!=bi.version&&t.p(r,i)},d(r){t&&t.d(r),r&&Se(e)}}}function VY(n){let e,t,r=n[11]+"",i,s,o;return{c(){e=Y("button"),t=Ae("Update to v "),i=Ae(r),G(e,"class","error")},m(a,l){Te(a,e,l),W(e,t),W(e,i),s||(o=Ie(e,"click",n[6]),s=!0)},p:Ue,d(a){a&&Se(e),s=!1,o()}}}function XY(n){return{c:Ue,m:Ue,p:Ue,d:Ue}}function kk(n){let e,t,r,i=(n[8].title||"")+"",s,o,a,l=n[8].path+"",c,u,h,f,p=new Date(n[8].timestamp*1e3).toLocaleDateString()+"",d,m,b,A=new Date(n[8].timestamp*1e3).toLocaleTimeString()+"",g,v,O,_;function x(){return n[7](n[8])}return{c(){e=Y("div"),t=Y("div"),r=Y("div"),s=Ae(i),o=fe(),a=Y("div"),c=Ae(l),u=fe(),h=Y("div"),f=Y("div"),d=Ae(p),m=fe(),b=Y("div"),g=Ae(A),v=fe(),Dt(r,"font-weight","bold"),Dt(t,"flex-grow","1"),G(e,"class","card svelte-6rjfbb")},m(T,E){Te(T,e,E),W(e,t),W(t,r),W(r,s),W(t,o),W(t,a),W(a,c),W(e,u),W(e,h),W(h,f),W(f,d),W(h,m),W(h,b),W(b,g),W(e,v),O||(_=Ie(e,"click",x),O=!0)},p(T,E){n=T,E&4&&i!==(i=(n[8].title||"")+"")&&Ee(s,i),E&4&&l!==(l=n[8].path+"")&&Ee(c,l),E&4&&p!==(p=new Date(n[8].timestamp*1e3).toLocaleDateString()+"")&&Ee(d,p),E&4&&A!==(A=new Date(n[8].timestamp*1e3).toLocaleTimeString()+"")&&Ee(g,A)},d(T){T&&Se(e),O=!1,_()}}}function YY(n){let e;function t(s,o){return s[0]?jY:zY}let r=t(n),i=r(n);return{c(){i.c(),e=no()},m(s,o){i.m(s,o),Te(s,e,o)},p(s,[o]){r===(r=t(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},i:Ue,o:Ue,d(s){i.d(s),s&&Se(e)}}}function ZY(n,e,t){let r,i;Ne(n,NR,h=>t(5,r=h)),Ne(n,Kt,h=>t(3,i=h));let s=!1,o="Updating";const a=async()=>{Ji.set(await window.dialogFile(i("app.openlocal")))};let l=[];const c=async()=>{t(0,s=!0),t(1,o=await window.appUpdate())},u=h=>Ji.set(h.path);return n.$$.update=()=>{if(n.$$.dirty&32){let h=[];r&&(Object.entries(r).forEach(([f,p])=>{const d=JSON.parse(p.Data);h.push({path:decodeURIComponent(f),title:d.title,timestamp:p.Timestamp})}),t(2,l=h.sort((f,p)=>p.timestamp-f.timestamp)))}},[s,o,l,i,a,r,c,u]}class qY extends kn{constructor(e){super(),xn(this,e,ZY,YY,gn,{})}}const{document:Sk,window:KY}=GL;function JY(n){let e,t,r,i,s,o,a,l,c,u=!n[3]&&Tk(n);return t=new wB({}),i=new _Y({}),o=new UY({}),l=new EY({}),{c(){u&&u.c(),e=fe(),es(t.$$.fragment),r=fe(),es(i.$$.fragment),s=fe(),es(o.$$.fragment),a=fe(),es(l.$$.fragment)},m(h,f){u&&u.m(h,f),Te(h,e,f),wi(t,h,f),Te(h,r,f),wi(i,h,f),Te(h,s,f),wi(o,h,f),Te(h,a,f),wi(l,h,f),c=!0},p(h,f){h[3]?u&&(u.d(1),u=null):u?u.p(h,f):(u=Tk(h),u.c(),u.m(e.parentNode,e))},i(h){c||(Dn(t.$$.fragment,h),Dn(i.$$.fragment,h),Dn(o.$$.fragment,h),Dn(l.$$.fragment,h),c=!0)},o(h){nr(t.$$.fragment,h),nr(i.$$.fragment,h),nr(o.$$.fragment,h),nr(l.$$.fragment,h),c=!1},d(h){u&&u.d(h),h&&Se(e),Ai(t,h),h&&Se(r),Ai(i,h),h&&Se(s),Ai(o,h),h&&Se(a),Ai(l,h)}}}function eZ(n){let e,t;return e=new qY({}),{c(){es(e.$$.fragment)},m(r,i){wi(e,r,i),t=!0},p:Ue,i(r){t||(Dn(e.$$.fragment,r),t=!0)},o(r){nr(e.$$.fragment,r),t=!1},d(r){Ai(e,r)}}}function Tk(n){let e,t,r,i,s,o;return{c(){e=Y("div"),t=Y("div"),r=Y("div"),i=fe(),s=Y("p"),o=Ae(n[4]),G(r,"class","spinner-1"),Dt(s,"color","white"),G(t,"class","dialog"),Dt(t,"text-align","center"),Dt(t,"margin-top","10vh"),G(e,"class","loading-mask svelte-107jblh")},m(a,l){Te(a,e,l),W(e,t),W(t,r),W(t,i),W(t,s),W(s,o)},p(a,l){l&16&&Ee(o,a[4])},d(a){a&&Se(e)}}}function tZ(n){let e,t,r,i,s,o,a,l,c;const u=[eZ,JY],h=[];function f(p,d){return p[1]&&p[2]==""?0:1}return i=f(n),s=h[i]=u[i](n),{c(){e=new UL(!1),t=no(),r=fe(),s.c(),o=no(),e.a=t},m(p,d){e.m(n[0],Sk.head),W(Sk.head,t),Te(p,r,d),h[i].m(p,d),Te(p,o,d),a=!0,l||(c=Ie(KY,"keydown",kB),l=!0)},p(p,[d]){(!a||d&1)&&e.p(p[0]);let m=i;i=f(p),i===m?h[i].p(p,d):(Gf(),nr(h[m],1,1,()=>{h[m]=null}),Vf(),s=h[i],s?s.p(p,d):(s=h[i]=u[i](p),s.c()),Dn(s,1),s.m(o.parentNode,o))},i(p){a||(Dn(s),a=!0)},o(p){nr(s),a=!1},d(p){Se(t),p&&e.d(),p&&Se(r),h[i].d(p),p&&Se(o),l=!1,c()}}}const rh="mage-version";function nZ(n,e,t){let r,i,s,o,a,l,c,u;Ne(n,Kt,f=>t(7,i=f)),Ne(n,Vn,f=>t(5,s=f)),Ne(n,Bf,f=>t(6,o=f)),Ne(n,za,f=>t(1,a=f)),Ne(n,Ji,f=>t(2,l=f)),Ne(n,Wc,f=>t(3,c=f)),Ne(n,RR,f=>t(4,u=f)),localStorage[rh]||(localStorage[rh]=bi.version);const h=localStorage[rh];try{const[f,p]=h.split("."),[d,m]=bi.version.split(".");console.log("Checking migration from: ",h," to:",bi.version),(f!==d||p!=m)&&Kn(xB,i("dialogs.version.title")+bi.version,i("dialogs.version."+d+"."+m)+"<br><br>"+i("dialogs.version.text")).then(()=>localStorage[rh]=bi.version)}catch{}return n.$$.update=()=>{if(n.$$.dirty&64){const f=window.document.body;f.className.split(" ").forEach(p=>{p.startsWith("mage-theme-")&&f.classList.remove(p)}),f.classList.add("mage-theme-"+o)}n.$$.dirty&64&&t(0,r=`<style>
  :root {
    color-scheme: ${o=="dark"?"dark":"light"};
  }
  </style>`),n.$$.dirty&32&&(/bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(navigator.userAgent)||s&&s.properties.title&&(document.title=s.properties.title+" - Magebook"))},[r,a,l,c,u,s,o]}class rZ extends kn{constructor(e){super(),xn(this,e,nZ,tZ,gn,{})}}const iZ={confirm:"Confirm?",error:"Error",ok:"Ok",cancel:"Cancel",chapter:{add:"Add chapter",edit:"Edit chapter",delete:"Chapter \u201C%1\u201D will be deleted",exists:"Chapter already exists",sort:"Chapters will be sorted. This will change the book structure permanently.",compact:"Chapters will be renamed so no number will be missing in the middle. This will change the book structure permanently.",name:"Key",title:"Title",group:"Group",warnings:{duplicate:"Another key with same name exists",invalidkey:"Key should contain only alphanumeric characters (a-z,A-Z,0-9)",invalidgroup:"Group should contain only alphanumeric characters (a-z,A-Z,0-9)"}},newbook:{new:"Create a New Book",title:"Title",author:"Author",hint:"You can recover the previous book with <b>File -> Recent sessions</b>"},newfirebook:{new:"Create or load a New Book",book:"Book name",getStarted:`This feature lets you link Magebook with your Google account. After that, you will be able to work on shared documents, like the Google Docs' ones.<br>Get start by linking Magebook to your account. <a target="_blank" href="https://librogamesland.github.io/magebook/index.html#/?id=collaborative-projects">More on the user guide here</a>.`},shuffle:{title:"Shuffle",hint:"Shuffle chapters with numeric key. You may choose to shuffle only chapters belonging to some groups, or to exclude chapters based on their flags. You should save a copy of your book before shuffling.",group:"Group filter",flags:"Exclude flags",savecopy:"Save a copy"},lock:{title:"Warning",text:"Another tab has written changes on this local session. If you overwrite, those changes will be lost. You can open a new session instead, and recover the other session with the <br><b>File -> Recent sessions</b> tool.",new:"Open in new session",overwrite:"Overwrite"},graph:{loading:"Loading graph...",open:"Open in new tab",download:"Download (as .svg)"},version:{title:"New version - ",text:'Discover more on the <a target="_blank" href="https://librogamesland.github.io/magebook/#/?id=changelog">user guide page</a>.',"1.0":"Initial release.","1.1":"Added short links format [number] and 'disableShortLinks: true'.<br>Links to orphan chapters are highlighted in the sidemenu.<br>General restyle.<br>New Website export.<br>Bug fixes.","1.2":"Major internal rewrite.<br>The editor is now powered by Codemirror6 instead of Ace. It should be prettier and more mobile friendly.<br>New setting and export properties such as renameLink, page, textFont,...<br>Now 'Latest sessions' keeps a record of collaborative projects too."}},sZ={file:{title:"File",new:"New",newFire:"New collaborative",share:"Share",open:"Open...",save:"Save",recover:"Latest sessions",recoverFire:"Collaborative sessions"},book:{title:"Book",graph:"View graph",shuffle:"Shuffle",sort:"Sort chapters",compact:"Compact chapters"},export:{title:"Export",docx:"Word (.docx)",html:"Website (.html)",fodt:"Libreoffice (.fodt)",xlgc:"LibroGameCreator 3",json:"Json",vuejs:"Vue.js",others:"Others (ebook, Android app, ...)",otherslink:"https://librogamesland.github.io/magebook/index.html#/?id=other-formats",settings:"Export properties",settingslink:"https://librogamesland.github.io/magebook/index.html#/?id=properties"},help:{title:"Help",guide:"User guide",guidefile:"https://librogamesland.github.io/magebook",forum:"Lgl forum",about:"About"},buttons:{fullscreen:"Fullscreen",darktheme:"Toggle dark/light theme"}},oZ={toggle:"Toggle sidemenu",chapters:"Chapters",allgroup:"All chapters",allgrouperrors:"Without links from/to",allgrouporphanlinks:"With orphan links",linkshere:"Links to",actions:{goback:"Go back",add:"Add entity (ctrl+R)",edit:"Edit entity (ctrl+E)",delete:"Delete entity (ctrl+D)"}},aZ={buttons:{find:"Find (ctrl+F)",undo:"Undo last change (ctrl+Z)",redo:"Redo last change (ctrl+shift+Z)",quicklink:"Link to the first avaiable chapter (ctrl+K)",link:"Add link (ctrl+L)"}},lZ={contact:"Contact me",text:"Magebook is a gamebook web editor developed by <b>Luca Fabbian</b> with support of Lgl community."},cZ={local:`# Book title
author: Name and Surname


### 1
Chapter example. You may edit this chapter thanks to the buttons on the right sidemenu.
This is a link going to [2]. Links may also look like [Text](#chapter).


### Chapter with a long title {#2}
This is the second chapter. Chapters may include *italic* or **bold** text. <b>Bold</b>, <i>italic</i>, and <u>underline</u> are fine as well. You may add meta text with \` \` like \`TODO: edit this chapter\`.
`,fire:`# %1
author: Name and Surname


### 1
This is a collaborative book stored on your Google account. Many people may edit this book at the same time. Save this page in your browser's bookmarks or share the page url with others - you'll see the book changing in real time.
`},uZ={openlocal:"Create or open local file",openfire:"Create or access collaborative book",chooseother:"Choose another book"};var hZ={dialogs:iZ,navbar:sZ,sidemenu:oZ,editor:aZ,about:lZ,books:cZ,app:uZ};const fZ={confirm:"Confermi?",error:"Errore",ok:"Ok",cancel:"Annulla",chapter:{add:"Aggiungi paragrafo",edit:"Modifica paragrafo",delete:"Il paragrafo \u201C%1\u201D verr\xE0 eliminato",exist:"Questo paragrafo esiste gi\xE0",sort:"I paragrafi saranno spostati cos\xEC da rispettare l'ordine di numero.",compact:"I paragrafi verranno rinominati in modo da avere numeri consecutivi, senza buchi in mezzo.",name:"Key",title:"Titolo",group:"Gruppo",warnings:{duplicate:"Esiste un'altro paragrafo con la stessa key!",invalidkey:"Key dovrebbe contenere solo caratteri alfanumerici (a-z, A-Z, 0-9)",invalidgroup:"Gruppo dovrebbe contenere solo caratteri alfanumerici (a-z, A-Z, 0-9)"}},newbook:{new:"Crea un nuovo Libro",title:"Titolo",author:"Autore",hint:"Puoi recuperare il libro precedente da <b>File -> Sessioni recenti</b>"},newfirebook:{new:"Crea o accedi a un Libro Collaborativo",book:"Nome libro",getStarted:'Con questa funzione puoi collegare Magebook al tuo account Google, cos\xEC da creare libri che si possono modificare in simultanea, proprio come i Documenti Google.<br>Prima di iniziare, dovrai collegare Magebook al tuo account <a target="_blank" href="https://librogamesland.github.io/magebook/#/?id=progetti-collaborativi">seguendo questa guida</a>.'},shuffle:{title:"Rimescola",hint:"Rimescola i paragrafi con chiave numerica. Puoi scegliere di mescolare solo i paragrafi che fanno parte di alcuni gruppi, o di escludere i paragrafi con determinati simboli. Per sicurezza, dovresti salvare una copia del libro prima di mescolare.",group:"Filtro gruppi",flags:"Escludi simboli",savecopy:"Salva una copia"},lock:{title:"Attenzione",text:"Un'altra tab ha modificato i dati di questa sessione. Se sovrascrivi, quei cambiamenti verranno persi. Se vuoi mantenere entrambe le versioni, puoi creare una nuova sessione e recuperare quella vecchia con <br><b>File -> Sessioni recenti</b>.",new:"Apri nuova sessione",overwrite:"Sovrascrivi"},graph:{loading:"Caricamento grafo...",open:"Apri un una nuova pagina",download:"Download (immagine .svg)"},version:{title:"Nuova versione - ",text:'Scopri di pi\xF9 nella <a ref="_blank" href="https://librogamesland.github.io/magebook/#/?id=versioni">guida</a>.',"1.0":"Versione iniziale.","1.1":"Aggiunto formato link corto [numero] e opzione 'disableShortLinks: true'.<br>I link a paragrafi inesistenti vengono segnalati nel menu laterale.<br>Restyle dell'interfaccia.<br>Aggiunta esportazione sito web.<br>Correzioni varie.","1.2":"Ristrutturazione massiccia del codice interno.<br>L'editor adesso \xE8 basato su Codemirror6 anzich\xE9 Ace. Dovrebbe risultare pi\xF9 veloce, bello e pi\xF9 mobile friendly.<br>Nuove impostazioni e Opzioni esportazione come renameLink, page, textFont, ...<br>Adesso 'Sessioni recenti' tiene traccia anche dei progetti collaborativi."}},dZ={file:{title:"File",new:"Nuovo",newFire:"Nuovo collaborativo",share:"Condividi",open:"Apri...",save:"Salva",recover:"Sessioni recenti",recoverFire:"Sessioni collaborative"},book:{title:"Libro",graph:"Visualizza grafico",shuffle:"Rimescola",sort:"Riordina paragrafi",compact:"Compatta paragrafi"},export:{title:"Esporta",docx:"Word (.docx)",fodt:"Libreoffice (.fodt)",html:"Sito web (.html)",xlgc:"LibroGameCreator 3",json:"Json",vuejs:"Vue.js",others:"Altri (ebook, app Android, ...)",otherslink:"https://librogamesland.github.io/magebook/index.html#/?id=altri-formati",settings:"Opzioni esportazione",settingslink:"https://librogamesland.github.io/magebook/index.html#/?id=opzioni"},help:{title:"Aiuto",guide:"Guida",guidefile:"https://librogamesland.github.io/magebook",forum:"Forum Lgl",about:"Info"},buttons:{fullscreen:"Schermo intero",darktheme:"Cambia tema scuro/chiaro"}},pZ={toggle:"Apri menu laterale",chapters:"Paragrafi",allgroup:"Tutti i paragrafi",allgrouperrors:"Senza entrata/uscita",allgrouporphanlinks:"Con link errati",linkshere:"Link al par.",actions:{goback:"Vai indietro",add:"Aggiungi entit\xE0 (ctrl+R)",edit:"Modifica entit\xE0 (ctrl+E)",delete:"Elimina entit\xE0 (ctrl+D)"}},mZ={buttons:{find:"Cerca (ctrl+F)",undo:"Annulla ultimo cambiamento (ctrl+Z)",redo:"Ripristina ultimo cambiamento (ctrl+shift+Z)",quicklink:"Link al primo paragrafo disponibile (ctrl+K)",link:"Aggiungi link (ctrl+L)"}},gZ={contact:"Contattami",text:"Magebook \xE8 un editor di librogame sviluppato da <b>Luca Fabbian</b> con il supporto della community di Lgl."},yZ={local:`# Titolo
author: Nome e Cognome


### 1
Esempio di paragrafo. Puoi modificarlo sfruttando i tasti a destra.
Questo \xE8 un link verso il paragrafo [2]. I link possono essere anche nel formato esteso [Testo](#paragrafo), dove Testo \xE8 opzionale.


### Paragrafo con titolo {#2}
Questo \xE8 il secondo paragrafo. I paragrafi possono contenere anche testo in *corsivo* o **grassetto**.  Puoi anche usare <b>grassetto</b>, <i>corsivo</i>, o <u>sottolineato</u>. Aggiungi commenti con \` \`, ad esempio \`NOTA: devo rivedere questo paragrafo\`.
`,fire:`# %1
author: Nome e Cognome


### 1
Questo \xE8 un libro collaborativo memorizzato sul tuo account Google e che pu\xF2 essere modificato da pi\xF9 persone contemporaneamente. Salva questa pagina fra i segnalibri del tuo browser e inviala a chi vuoi, vedrai le modifiche sincronizzate in tempo reale.
`},OZ={openlocal:"Crea o apri file",openfire:"Crea o accedi a un libro collaborativo",chooseother:"Apri un altro"};var bZ={dialogs:fZ,navbar:dZ,sidemenu:pZ,editor:mZ,about:gZ,books:yZ,app:OZ};const vZ=oB().split("-")[0];v0("en",hZ);v0("it",bZ);sB({fallbackLocale:"en",initialLocale:vZ});"serviceWorker"in navigator&&!Sn(za)&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js")});document.body.addEventListener("click",n=>{console.log(n.target)});new rZ({target:document.body});
