var ON=Object.defineProperty,bN=Object.defineProperties;var vN=Object.getOwnPropertyDescriptors;var vw=Object.getOwnPropertySymbols;var wN=Object.prototype.hasOwnProperty,AN=Object.prototype.propertyIsEnumerable;var Lp=(n,e,t)=>e in n?ON(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jr=(n,e)=>{for(var t in e||(e={}))wN.call(e,t)&&Lp(n,t,e[t]);if(vw)for(var t of vw(e))AN.call(e,t)&&Lp(n,t,e[t]);return n},Oh=(n,e)=>bN(n,vN(e));var ww=(n,e,t)=>(Lp(n,typeof e!="symbol"?e+"":e,t),t);const _N=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};_N();function We(){}function xN(n){return n&&typeof n=="object"&&typeof n.then=="function"}function vk(n){return n()}function Aw(){return Object.create(null)}function Xt(n){n.forEach(vk)}function wk(n){return typeof n=="function"}function gn(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let bh;function ms(n,e){return bh||(bh=document.createElement("a")),bh.href=e,n===bh.href}function kN(n){return Object.keys(n).length===0}function Cc(n,...e){if(n==null)return We;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function kn(n){let e;return Cc(n,t=>e=t)(),e}function Le(n,e,t){n.$$.on_destroy.push(Cc(e,t))}function Ri(n){return n==null?"":n}function Zs(n,e,t){return n.set(t),e}function W(n,e){n.appendChild(e)}function Ee(n,e,t){n.insertBefore(e,t||null)}function Se(n){n.parentNode.removeChild(n)}function wi(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function Y(n){return document.createElement(n)}function SN(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Ae(n){return document.createTextNode(n)}function fe(){return Ae(" ")}function to(){return Ae("")}function Ie(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function EN(n){return function(e){return e.preventDefault(),n.call(this,e)}}function TN(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function _w(n){return function(e){e.target===this&&n.call(this,e)}}function G(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Vi(n){return n===""?null:+n}function CN(n){return Array.from(n.childNodes)}function Te(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function yt(n,e){n.value=e==null?"":e}function Dt(n,e,t,i){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,i?"important":"")}function _u(n,e){for(let t=0;t<n.options.length;t+=1){const i=n.options[t];if(i.__value===e){i.selected=!0;return}}n.selectedIndex=-1}function Ak(n){const e=n.querySelector(":checked")||n.options[0];return e&&e.__value}function ln(n,e,t){n.classList[t?"add":"remove"](e)}class IN{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=SN(t.nodeName):this.e=Y(t.nodeName),this.t=t,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Ee(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Se)}}let zl;function vr(n){zl=n}function h0(){if(!zl)throw new Error("Function called outside component initialization");return zl}function RN(n){h0().$$.on_mount.push(n)}function _k(n){h0().$$.on_destroy.push(n)}function QN(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const gl=[],xw=[],eu=[],kw=[],xk=Promise.resolve();let qm=!1;function kk(){qm||(qm=!0,xk.then(u0))}function ea(){return kk(),xk}function jl(n){eu.push(n)}const Bp=new Set;let vh=0;function u0(){const n=zl;do{for(;vh<gl.length;){const e=gl[vh];vh++,vr(e),PN(e.$$)}for(vr(null),gl.length=0,vh=0;xw.length;)xw.pop()();for(let e=0;e<eu.length;e+=1){const t=eu[e];Bp.has(t)||(Bp.add(t),t())}eu.length=0}while(gl.length);for(;kw.length;)kw.pop()();qm=!1,Bp.clear(),vr(n)}function PN(n){if(n.fragment!==null){n.update(),Xt(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(jl)}}const tu=new Set;let js;function zf(){js={r:0,c:[],p:js}}function jf(){js.r||Xt(js.c),js=js.p}function Pn(n,e){n&&n.i&&(tu.delete(n),n.i(e))}function ti(n,e,t,i){if(n&&n.o){if(tu.has(n))return;tu.add(n),js.c.push(()=>{tu.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}}function f0(n,e){const t=e.token={};function i(r,s,o,a){if(e.token!==t)return;e.resolved=a;let l=e.ctx;o!==void 0&&(l=l.slice(),l[o]=a);const c=r&&(e.current=r)(l);let h=!1;e.block&&(e.blocks?e.blocks.forEach((u,f)=>{f!==s&&u&&(zf(),ti(u,1,1,()=>{e.blocks[f]===u&&(e.blocks[f]=null)}),jf())}):e.block.d(1),c.c(),Pn(c,1),c.m(e.mount(),e.anchor),h=!0),e.block=c,e.blocks&&(e.blocks[s]=c),h&&u0()}if(xN(n)){const r=h0();if(n.then(s=>{vr(r),i(e.then,1,e.value,s),vr(null)},s=>{if(vr(r),i(e.catch,2,e.error,s),vr(null),!e.hasCatch)throw s}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,n),!0;e.resolved=n}}function d0(n,e,t){const i=e.slice(),{resolved:r}=n;n.current===n.then&&(i[n.value]=r),n.current===n.catch&&(i[n.error]=r),n.block.p(i,t)}const DN=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Jr(n){n&&n.c()}function wr(n,e,t,i){const{fragment:r,on_mount:s,on_destroy:o,after_update:a}=n.$$;r&&r.m(e,t),i||jl(()=>{const l=s.map(vk).filter(wk);o?o.push(...l):Xt(l),n.$$.on_mount=[]}),a.forEach(jl)}function Ar(n,e){const t=n.$$;t.fragment!==null&&(Xt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function NN(n,e){n.$$.dirty[0]===-1&&(gl.push(n),kk(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function _n(n,e,t,i,r,s,o,a=[-1]){const l=zl;vr(n);const c=n.$$={fragment:null,ctx:null,props:s,update:We,not_equal:r,bound:Aw(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Aw(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let h=!1;if(c.ctx=t?t(n,e.props||{},(u,f,...p)=>{const d=p.length?p[0]:f;return c.ctx&&r(c.ctx[u],c.ctx[u]=d)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](d),h&&NN(n,u)),f}):[],c.update(),h=!0,Xt(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const u=CN(e.target);c.fragment&&c.fragment.l(u),u.forEach(Se)}else c.fragment&&c.fragment.c();e.intro&&Pn(n.$$.fragment),wr(n,e.target,e.anchor,e.customElement),u0()}vr(l)}class xn{$destroy(){Ar(this,1),this.$destroy=We}$on(e,t){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!kN(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Qo=[];function LN(n,e){return{subscribe:Lt(n,e).subscribe}}function Lt(n,e=We){let t;const i=new Set;function r(a){if(gn(n,a)&&(n=a,t)){const l=!Qo.length;for(const c of i)c[1](),Qo.push(c,n);if(l){for(let c=0;c<Qo.length;c+=2)Qo[c][0](Qo[c+1]);Qo.length=0}}}function s(a){r(a(n))}function o(a,l=We){const c=[a,l];return i.add(c),i.size===1&&(t=e(r)||We),a(n),()=>{i.delete(c),i.size===0&&(t(),t=null)}}return{set:r,update:s,subscribe:o}}function xi(n,e,t){const i=!Array.isArray(n),r=i?[n]:n,s=e.length<2;return LN(t,o=>{let a=!1;const l=[];let c=0,h=We;const u=()=>{if(c)return;h();const p=e(i?l[0]:l,o);s?o(p):h=wk(p)?p:We},f=r.map((p,d)=>Cc(p,m=>{l[d]=m,c&=~(1<<d),a&&u()},()=>{c|=1<<d}));return a=!0,u(),function(){Xt(f),h()}})}var Mo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function BN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var MN=function(e){return $N(e)&&!FN(e)};function $N(n){return!!n&&typeof n=="object"}function FN(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||zN(n)}var WN=typeof Symbol=="function"&&Symbol.for,UN=WN?Symbol.for("react.element"):60103;function zN(n){return n.$$typeof===UN}function jN(n){return Array.isArray(n)?[]:{}}function Hl(n,e){return e.clone!==!1&&e.isMergeableObject(n)?ta(jN(n),n,e):n}function HN(n,e,t){return n.concat(e).map(function(i){return Hl(i,t)})}function GN(n,e){if(!e.customMerge)return ta;var t=e.customMerge(n);return typeof t=="function"?t:ta}function VN(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(e){return n.propertyIsEnumerable(e)}):[]}function Sw(n){return Object.keys(n).concat(VN(n))}function Sk(n,e){try{return e in n}catch{return!1}}function XN(n,e){return Sk(n,e)&&!(Object.hasOwnProperty.call(n,e)&&Object.propertyIsEnumerable.call(n,e))}function YN(n,e,t){var i={};return t.isMergeableObject(n)&&Sw(n).forEach(function(r){i[r]=Hl(n[r],t)}),Sw(e).forEach(function(r){XN(n,r)||(Sk(n,r)&&t.isMergeableObject(e[r])?i[r]=GN(r,t)(n[r],e[r],t):i[r]=Hl(e[r],t))}),i}function ta(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||HN,t.isMergeableObject=t.isMergeableObject||MN,t.cloneUnlessOtherwiseSpecified=Hl;var i=Array.isArray(e),r=Array.isArray(n),s=i===r;return s?i?t.arrayMerge(n,e,t):YN(n,e,t):Hl(e,t)}ta.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,r){return ta(i,r,t)},{})};var ZN=ta,qN=ZN,Km=function(n,e){return Km=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},Km(n,e)};function Hf(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Km(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var gt=function(){return gt=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},gt.apply(this,arguments)};function Mp(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}var lt;(function(n){n[n.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",n[n.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",n[n.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",n[n.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",n[n.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",n[n.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",n[n.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",n[n.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",n[n.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",n[n.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",n[n.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",n[n.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",n[n.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",n[n.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",n[n.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",n[n.INVALID_TAG=23]="INVALID_TAG",n[n.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",n[n.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",n[n.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(lt||(lt={}));var Bt;(function(n){n[n.literal=0]="literal",n[n.argument=1]="argument",n[n.number=2]="number",n[n.date=3]="date",n[n.time=4]="time",n[n.select=5]="select",n[n.plural=6]="plural",n[n.pound=7]="pound",n[n.tag=8]="tag"})(Bt||(Bt={}));var na;(function(n){n[n.number=0]="number",n[n.dateTime=1]="dateTime"})(na||(na={}));function Ew(n){return n.type===Bt.literal}function KN(n){return n.type===Bt.argument}function Ek(n){return n.type===Bt.number}function Tk(n){return n.type===Bt.date}function Ck(n){return n.type===Bt.time}function Ik(n){return n.type===Bt.select}function Rk(n){return n.type===Bt.plural}function JN(n){return n.type===Bt.pound}function Qk(n){return n.type===Bt.tag}function Pk(n){return!!(n&&typeof n=="object"&&n.type===na.number)}function Jm(n){return!!(n&&typeof n=="object"&&n.type===na.dateTime)}var Dk=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,eL=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function tL(n){var e={};return n.replace(eL,function(t){var i=t.length;switch(t[0]){case"G":e.era=i===4?"long":i===5?"narrow":"short";break;case"y":e.year=i===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][i-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][i-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=i===4?"short":i===5?"narrow":"short";break;case"e":if(i<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"c":if(i<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][i-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][i-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][i-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][i-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][i-1];break;case"s":e.second=["numeric","2-digit"][i-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=i<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var nL=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function iL(n){if(n.length===0)throw new Error("Number skeleton cannot be empty");for(var e=n.split(nL).filter(function(f){return f.length>0}),t=[],i=0,r=e;i<r.length;i++){var s=r[i],o=s.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var a=o[0],l=o.slice(1),c=0,h=l;c<h.length;c++){var u=h[c];if(u.length===0)throw new Error("Invalid number skeleton")}t.push({stem:a,options:l})}return t}function rL(n){return n.replace(/^(.*?)-/,"")}var Tw=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Nk=/^(@+)?(\+|#+)?[rs]?$/g,sL=/(\*)(0+)|(#+)(0+)|(0+)/g,Lk=/^(0+)$/;function Cw(n){var e={};return n[n.length-1]==="r"?e.roundingPriority="morePrecision":n[n.length-1]==="s"&&(e.roundingPriority="lessPrecision"),n.replace(Nk,function(t,i,r){return typeof r!="string"?(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length):r==="+"?e.minimumSignificantDigits=i.length:i[0]==="#"?e.maximumSignificantDigits=i.length:(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length+(typeof r=="string"?r.length:0)),""}),e}function Bk(n){switch(n){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function oL(n){var e;if(n[0]==="E"&&n[1]==="E"?(e={notation:"engineering"},n=n.slice(2)):n[0]==="E"&&(e={notation:"scientific"},n=n.slice(1)),e){var t=n.slice(0,2);if(t==="+!"?(e.signDisplay="always",n=n.slice(2)):t==="+?"&&(e.signDisplay="exceptZero",n=n.slice(2)),!Lk.test(n))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=n.length}return e}function Iw(n){var e={},t=Bk(n);return t||e}function aL(n){for(var e={},t=0,i=n;t<i.length;t++){var r=i[t];switch(r.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=r.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=rL(r.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=gt(gt(gt({},e),{notation:"scientific"}),r.options.reduce(function(l,c){return gt(gt({},l),Iw(c))},{}));continue;case"engineering":e=gt(gt(gt({},e),{notation:"engineering"}),r.options.reduce(function(l,c){return gt(gt({},l),Iw(c))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(r.options[0]);continue;case"integer-width":if(r.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");r.options[0].replace(sL,function(l,c,h,u,f,p){if(c)e.minimumIntegerDigits=h.length;else{if(u&&f)throw new Error("We currently do not support maximum integer digits");if(p)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Lk.test(r.stem)){e.minimumIntegerDigits=r.stem.length;continue}if(Tw.test(r.stem)){if(r.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");r.stem.replace(Tw,function(l,c,h,u,f,p){return h==="*"?e.minimumFractionDigits=c.length:u&&u[0]==="#"?e.maximumFractionDigits=u.length:f&&p?(e.minimumFractionDigits=f.length,e.maximumFractionDigits=f.length+p.length):(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length),""});var s=r.options[0];s==="w"?e=gt(gt({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=gt(gt({},e),Cw(s)));continue}if(Nk.test(r.stem)){e=gt(gt({},e),Cw(r.stem));continue}var o=Bk(r.stem);o&&(e=gt(gt({},e),o));var a=oL(r.stem);a&&(e=gt(gt({},e),a))}return e}var wh={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function lL(n,e){for(var t="",i=0;i<n.length;i++){var r=n.charAt(i);if(r==="j"){for(var s=0;i+1<n.length&&n.charAt(i+1)===r;)s++,i++;var o=1+(s&1),a=s<2?1:3+(s>>1),l="a",c=cL(e);for((c=="H"||c=="k")&&(a=0);a-- >0;)t+=l;for(;o-- >0;)t=c+t}else r==="J"?t+="H":t+=r}return t}function cL(n){var e=n.hourCycle;if(e===void 0&&n.hourCycles&&n.hourCycles.length&&(e=n.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var t=n.language,i;t!=="root"&&(i=n.maximize().region);var r=wh[i||""]||wh[t||""]||wh["".concat(t,"-001")]||wh["001"];return r[0]}var $p,hL=new RegExp("^".concat(Dk.source,"*")),uL=new RegExp("".concat(Dk.source,"*$"));function ht(n,e){return{start:n,end:e}}var fL=!!String.prototype.startsWith,dL=!!String.fromCodePoint,pL=!!Object.fromEntries,mL=!!String.prototype.codePointAt,gL=!!String.prototype.trimStart,yL=!!String.prototype.trimEnd,OL=!!Number.isSafeInteger,bL=OL?Number.isSafeInteger:function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n&&Math.abs(n)<=9007199254740991},eg=!0;try{var vL=$k("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");eg=(($p=vL.exec("a"))===null||$p===void 0?void 0:$p[0])==="a"}catch{eg=!1}var Rw=fL?function(e,t,i){return e.startsWith(t,i)}:function(e,t,i){return e.slice(i,i+t.length)===t},tg=dL?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i="",r=e.length,s=0,o;r>s;){if(o=e[s++],o>1114111)throw RangeError(o+" is not a valid code point");i+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return i},Qw=pL?Object.fromEntries:function(e){for(var t={},i=0,r=e;i<r.length;i++){var s=r[i],o=s[0],a=s[1];t[o]=a}return t},Mk=mL?function(e,t){return e.codePointAt(t)}:function(e,t){var i=e.length;if(!(t<0||t>=i)){var r=e.charCodeAt(t),s;return r<55296||r>56319||t+1===i||(s=e.charCodeAt(t+1))<56320||s>57343?r:(r-55296<<10)+(s-56320)+65536}},wL=gL?function(e){return e.trimStart()}:function(e){return e.replace(hL,"")},AL=yL?function(e){return e.trimEnd()}:function(e){return e.replace(uL,"")};function $k(n,e){return new RegExp(n,e)}var ng;if(eg){var Pw=$k("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");ng=function(e,t){var i;Pw.lastIndex=t;var r=Pw.exec(e);return(i=r[1])!==null&&i!==void 0?i:""}}else ng=function(e,t){for(var i=[];;){var r=Mk(e,t);if(r===void 0||Fk(r)||SL(r))break;i.push(r),t+=r>=65536?2:1}return tg.apply(void 0,i)};var _L=function(){function n(e,t){t===void 0&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return n.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},n.prototype.parseMessage=function(e,t,i){for(var r=[];!this.isEOF();){var s=this.char();if(s===123){var o=this.parseArgument(e,i);if(o.err)return o;r.push(o.val)}else{if(s===125&&e>0)break;if(s===35&&(t==="plural"||t==="selectordinal")){var a=this.clonePosition();this.bump(),r.push({type:Bt.pound,location:ht(a,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(i)break;return this.error(lt.UNMATCHED_CLOSING_TAG,ht(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&ig(this.peek()||0)){var o=this.parseTag(e,t);if(o.err)return o;r.push(o.val)}else{var o=this.parseLiteral(e,t);if(o.err)return o;r.push(o.val)}}}return{val:r,err:null}},n.prototype.parseTag=function(e,t){var i=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Bt.literal,value:"<".concat(r,"/>"),location:ht(i,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,t,!0);if(s.err)return s;var o=s.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!ig(this.char()))return this.error(lt.INVALID_TAG,ht(a,this.clonePosition()));var l=this.clonePosition(),c=this.parseTagName();return r!==c?this.error(lt.UNMATCHED_CLOSING_TAG,ht(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Bt.tag,value:r,children:o,location:ht(i,this.clonePosition())},err:null}:this.error(lt.INVALID_TAG,ht(a,this.clonePosition())))}else return this.error(lt.UNCLOSED_TAG,ht(i,this.clonePosition()))}else return this.error(lt.INVALID_TAG,ht(i,this.clonePosition()))},n.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&kL(this.char());)this.bump();return this.message.slice(e,this.offset())},n.prototype.parseLiteral=function(e,t){for(var i=this.clonePosition(),r="";;){var s=this.tryParseQuote(t);if(s){r+=s;continue}var o=this.tryParseUnquoted(e,t);if(o){r+=o;continue}var a=this.tryParseLeftAngleBracket();if(a){r+=a;continue}break}var l=ht(i,this.clonePosition());return{val:{type:Bt.literal,value:r,location:l},err:null}},n.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!xL(this.peek()||0))?(this.bump(),"<"):null},n.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var i=this.char();if(i===39)if(this.peek()===39)t.push(39),this.bump();else{this.bump();break}else t.push(i);this.bump()}return tg.apply(void 0,t)},n.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var i=this.char();return i===60||i===123||i===35&&(t==="plural"||t==="selectordinal")||i===125&&e>0?null:(this.bump(),tg(i))},n.prototype.parseArgument=function(e,t){var i=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(lt.EXPECT_ARGUMENT_CLOSING_BRACE,ht(i,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(lt.EMPTY_ARGUMENT,ht(i,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(lt.MALFORMED_ARGUMENT,ht(i,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(lt.EXPECT_ARGUMENT_CLOSING_BRACE,ht(i,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Bt.argument,value:r,location:ht(i,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(lt.EXPECT_ARGUMENT_CLOSING_BRACE,ht(i,this.clonePosition())):this.parseArgumentOptions(e,t,r,i);default:return this.error(lt.MALFORMED_ARGUMENT,ht(i,this.clonePosition()))}},n.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),i=ng(this.message,t),r=t+i.length;this.bumpTo(r);var s=this.clonePosition(),o=ht(e,s);return{value:i,location:o}},n.prototype.parseArgumentOptions=function(e,t,i,r){var s,o=this.clonePosition(),a=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(a){case"":return this.error(lt.EXPECT_ARGUMENT_TYPE,ht(o,l));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var h=this.clonePosition(),u=this.parseSimpleArgStyleIfPossible();if(u.err)return u;var f=AL(u.val);if(f.length===0)return this.error(lt.EXPECT_ARGUMENT_STYLE,ht(this.clonePosition(),this.clonePosition()));var p=ht(h,this.clonePosition());c={style:f,styleLocation:p}}var d=this.tryParseArgumentClose(r);if(d.err)return d;var m=ht(r,this.clonePosition());if(c&&Rw(c==null?void 0:c.style,"::",0)){var b=wL(c.style.slice(2));if(a==="number"){var u=this.parseNumberSkeletonFromString(b,c.styleLocation);return u.err?u:{val:{type:Bt.number,value:i,location:m,style:u.val},err:null}}else{if(b.length===0)return this.error(lt.EXPECT_DATE_TIME_SKELETON,m);var A=b;this.locale&&(A=lL(b,this.locale));var f={type:na.dateTime,pattern:A,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?tL(A):{}},g=a==="date"?Bt.date:Bt.time;return{val:{type:g,value:i,location:m,style:f},err:null}}}return{val:{type:a==="number"?Bt.number:a==="date"?Bt.date:Bt.time,value:i,location:m,style:(s=c==null?void 0:c.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var v=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(lt.EXPECT_SELECT_ARGUMENT_OPTIONS,ht(v,gt({},v)));this.bumpSpace();var O=this.parseIdentifierIfPossible(),_=0;if(a!=="select"&&O.value==="offset"){if(!this.bumpIf(":"))return this.error(lt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ht(this.clonePosition(),this.clonePosition()));this.bumpSpace();var u=this.tryParseDecimalInteger(lt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,lt.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(u.err)return u;this.bumpSpace(),O=this.parseIdentifierIfPossible(),_=u.val}var x=this.tryParsePluralOrSelectOptions(e,a,t,O);if(x.err)return x;var d=this.tryParseArgumentClose(r);if(d.err)return d;var E=ht(r,this.clonePosition());return a==="select"?{val:{type:Bt.select,value:i,options:Qw(x.val),location:E},err:null}:{val:{type:Bt.plural,value:i,options:Qw(x.val),offset:_,pluralType:a==="plural"?"cardinal":"ordinal",location:E},err:null}}default:return this.error(lt.INVALID_ARGUMENT_TYPE,ht(o,l))}},n.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(lt.EXPECT_ARGUMENT_CLOSING_BRACE,ht(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},n.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){var i=this.char();switch(i){case 39:{this.bump();var r=this.clonePosition();if(!this.bumpUntil("'"))return this.error(lt.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,ht(r,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(t.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(t.offset,this.offset()),err:null}},n.prototype.parseNumberSkeletonFromString=function(e,t){var i=[];try{i=iL(e)}catch{return this.error(lt.INVALID_NUMBER_SKELETON,t)}return{val:{type:na.number,tokens:i,location:t,parsedOptions:this.shouldParseSkeletons?aL(i):{}},err:null}},n.prototype.tryParsePluralOrSelectOptions=function(e,t,i,r){for(var s,o=!1,a=[],l=new Set,c=r.value,h=r.location;;){if(c.length===0){var u=this.clonePosition();if(t!=="select"&&this.bumpIf("=")){var f=this.tryParseDecimalInteger(lt.EXPECT_PLURAL_ARGUMENT_SELECTOR,lt.INVALID_PLURAL_ARGUMENT_SELECTOR);if(f.err)return f;h=ht(u,this.clonePosition()),c=this.message.slice(u.offset,this.offset())}else break}if(l.has(c))return this.error(t==="select"?lt.DUPLICATE_SELECT_ARGUMENT_SELECTOR:lt.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,h);c==="other"&&(o=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error(t==="select"?lt.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:lt.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,ht(this.clonePosition(),this.clonePosition()));var d=this.parseMessage(e+1,t,i);if(d.err)return d;var m=this.tryParseArgumentClose(p);if(m.err)return m;a.push([c,{value:d.val,location:ht(p,this.clonePosition())}]),l.add(c),this.bumpSpace(),s=this.parseIdentifierIfPossible(),c=s.value,h=s.location}return a.length===0?this.error(t==="select"?lt.EXPECT_SELECT_ARGUMENT_SELECTOR:lt.EXPECT_PLURAL_ARGUMENT_SELECTOR,ht(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(lt.MISSING_OTHER_CLAUSE,ht(this.clonePosition(),this.clonePosition())):{val:a,err:null}},n.prototype.tryParseDecimalInteger=function(e,t){var i=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(i=-1);for(var s=!1,o=0;!this.isEOF();){var a=this.char();if(a>=48&&a<=57)s=!0,o=o*10+(a-48),this.bump();else break}var l=ht(r,this.clonePosition());return s?(o*=i,bL(o)?{val:o,err:null}:this.error(t,l)):this.error(e,l)},n.prototype.offset=function(){return this.position.offset},n.prototype.isEOF=function(){return this.offset()===this.message.length},n.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},n.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=Mk(this.message,e);if(t===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},n.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},n.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},n.prototype.bumpIf=function(e){if(Rw(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},n.prototype.bumpUntil=function(e){var t=this.offset(),i=this.message.indexOf(e,t);return i>=0?(this.bumpTo(i),!0):(this.bumpTo(this.message.length),!1)},n.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},n.prototype.bumpSpace=function(){for(;!this.isEOF()&&Fk(this.char());)this.bump()},n.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),i=this.message.charCodeAt(t+(e>=65536?2:1));return i!=null?i:null},n}();function ig(n){return n>=97&&n<=122||n>=65&&n<=90}function xL(n){return ig(n)||n===47}function kL(n){return n===45||n===46||n>=48&&n<=57||n===95||n>=97&&n<=122||n>=65&&n<=90||n==183||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8255&&n<=8256||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}function Fk(n){return n>=9&&n<=13||n===32||n===133||n>=8206&&n<=8207||n===8232||n===8233}function SL(n){return n>=33&&n<=35||n===36||n>=37&&n<=39||n===40||n===41||n===42||n===43||n===44||n===45||n>=46&&n<=47||n>=58&&n<=59||n>=60&&n<=62||n>=63&&n<=64||n===91||n===92||n===93||n===94||n===96||n===123||n===124||n===125||n===126||n===161||n>=162&&n<=165||n===166||n===167||n===169||n===171||n===172||n===174||n===176||n===177||n===182||n===187||n===191||n===215||n===247||n>=8208&&n<=8213||n>=8214&&n<=8215||n===8216||n===8217||n===8218||n>=8219&&n<=8220||n===8221||n===8222||n===8223||n>=8224&&n<=8231||n>=8240&&n<=8248||n===8249||n===8250||n>=8251&&n<=8254||n>=8257&&n<=8259||n===8260||n===8261||n===8262||n>=8263&&n<=8273||n===8274||n===8275||n>=8277&&n<=8286||n>=8592&&n<=8596||n>=8597&&n<=8601||n>=8602&&n<=8603||n>=8604&&n<=8607||n===8608||n>=8609&&n<=8610||n===8611||n>=8612&&n<=8613||n===8614||n>=8615&&n<=8621||n===8622||n>=8623&&n<=8653||n>=8654&&n<=8655||n>=8656&&n<=8657||n===8658||n===8659||n===8660||n>=8661&&n<=8691||n>=8692&&n<=8959||n>=8960&&n<=8967||n===8968||n===8969||n===8970||n===8971||n>=8972&&n<=8991||n>=8992&&n<=8993||n>=8994&&n<=9e3||n===9001||n===9002||n>=9003&&n<=9083||n===9084||n>=9085&&n<=9114||n>=9115&&n<=9139||n>=9140&&n<=9179||n>=9180&&n<=9185||n>=9186&&n<=9254||n>=9255&&n<=9279||n>=9280&&n<=9290||n>=9291&&n<=9311||n>=9472&&n<=9654||n===9655||n>=9656&&n<=9664||n===9665||n>=9666&&n<=9719||n>=9720&&n<=9727||n>=9728&&n<=9838||n===9839||n>=9840&&n<=10087||n===10088||n===10089||n===10090||n===10091||n===10092||n===10093||n===10094||n===10095||n===10096||n===10097||n===10098||n===10099||n===10100||n===10101||n>=10132&&n<=10175||n>=10176&&n<=10180||n===10181||n===10182||n>=10183&&n<=10213||n===10214||n===10215||n===10216||n===10217||n===10218||n===10219||n===10220||n===10221||n===10222||n===10223||n>=10224&&n<=10239||n>=10240&&n<=10495||n>=10496&&n<=10626||n===10627||n===10628||n===10629||n===10630||n===10631||n===10632||n===10633||n===10634||n===10635||n===10636||n===10637||n===10638||n===10639||n===10640||n===10641||n===10642||n===10643||n===10644||n===10645||n===10646||n===10647||n===10648||n>=10649&&n<=10711||n===10712||n===10713||n===10714||n===10715||n>=10716&&n<=10747||n===10748||n===10749||n>=10750&&n<=11007||n>=11008&&n<=11055||n>=11056&&n<=11076||n>=11077&&n<=11078||n>=11079&&n<=11084||n>=11085&&n<=11123||n>=11124&&n<=11125||n>=11126&&n<=11157||n===11158||n>=11159&&n<=11263||n>=11776&&n<=11777||n===11778||n===11779||n===11780||n===11781||n>=11782&&n<=11784||n===11785||n===11786||n===11787||n===11788||n===11789||n>=11790&&n<=11798||n===11799||n>=11800&&n<=11801||n===11802||n===11803||n===11804||n===11805||n>=11806&&n<=11807||n===11808||n===11809||n===11810||n===11811||n===11812||n===11813||n===11814||n===11815||n===11816||n===11817||n>=11818&&n<=11822||n===11823||n>=11824&&n<=11833||n>=11834&&n<=11835||n>=11836&&n<=11839||n===11840||n===11841||n===11842||n>=11843&&n<=11855||n>=11856&&n<=11857||n===11858||n>=11859&&n<=11903||n>=12289&&n<=12291||n===12296||n===12297||n===12298||n===12299||n===12300||n===12301||n===12302||n===12303||n===12304||n===12305||n>=12306&&n<=12307||n===12308||n===12309||n===12310||n===12311||n===12312||n===12313||n===12314||n===12315||n===12316||n===12317||n>=12318&&n<=12319||n===12320||n===12336||n===64830||n===64831||n>=65093&&n<=65094}function rg(n){n.forEach(function(e){if(delete e.location,Ik(e)||Rk(e))for(var t in e.options)delete e.options[t].location,rg(e.options[t].value);else Ek(e)&&Pk(e.style)||(Tk(e)||Ck(e))&&Jm(e.style)?delete e.style.location:Qk(e)&&rg(e.children)})}function EL(n,e){e===void 0&&(e={}),e=gt({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var t=new _L(n,e).parse();if(t.err){var i=SyntaxError(lt[t.err.kind]);throw i.location=t.err.location,i.originalMessage=t.err.message,i}return e!=null&&e.captureLocation||rg(t.val),t.val}function Fp(n,e){var t=e&&e.cache?e.cache:PL,i=e&&e.serializer?e.serializer:QL,r=e&&e.strategy?e.strategy:CL;return r(n,{cache:t,serializer:i})}function TL(n){return n==null||typeof n=="number"||typeof n=="boolean"}function Wk(n,e,t,i){var r=TL(i)?i:t(i),s=e.get(r);return typeof s=="undefined"&&(s=n.call(this,i),e.set(r,s)),s}function Uk(n,e,t){var i=Array.prototype.slice.call(arguments,3),r=t(i),s=e.get(r);return typeof s=="undefined"&&(s=n.apply(this,i),e.set(r,s)),s}function p0(n,e,t,i,r){return t.bind(e,n,i,r)}function CL(n,e){var t=n.length===1?Wk:Uk;return p0(n,this,t,e.cache.create(),e.serializer)}function IL(n,e){return p0(n,this,Uk,e.cache.create(),e.serializer)}function RL(n,e){return p0(n,this,Wk,e.cache.create(),e.serializer)}var QL=function(){return JSON.stringify(arguments)};function m0(){this.cache=Object.create(null)}m0.prototype.get=function(n){return this.cache[n]};m0.prototype.set=function(n,e){this.cache[n]=e};var PL={create:function(){return new m0}},Wp={variadic:IL,monadic:RL},ia;(function(n){n.MISSING_VALUE="MISSING_VALUE",n.INVALID_VALUE="INVALID_VALUE",n.MISSING_INTL_API="MISSING_INTL_API"})(ia||(ia={}));var Gf=function(n){Hf(e,n);function e(t,i,r){var s=n.call(this,t)||this;return s.code=i,s.originalMessage=r,s}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),Dw=function(n){Hf(e,n);function e(t,i,r,s){return n.call(this,'Invalid values for "'.concat(t,'": "').concat(i,'". Options are "').concat(Object.keys(r).join('", "'),'"'),ia.INVALID_VALUE,s)||this}return e}(Gf),DL=function(n){Hf(e,n);function e(t,i,r){return n.call(this,'Value for "'.concat(t,'" must be of type ').concat(i),ia.INVALID_VALUE,r)||this}return e}(Gf),NL=function(n){Hf(e,n);function e(t,i){return n.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(i,'"'),ia.MISSING_VALUE,i)||this}return e}(Gf),In;(function(n){n[n.literal=0]="literal",n[n.object=1]="object"})(In||(In={}));function LL(n){return n.length<2?n:n.reduce(function(e,t){var i=e[e.length-1];return!i||i.type!==In.literal||t.type!==In.literal?e.push(t):i.value+=t.value,e},[])}function BL(n){return typeof n=="function"}function nu(n,e,t,i,r,s,o){if(n.length===1&&Ew(n[0]))return[{type:In.literal,value:n[0].value}];for(var a=[],l=0,c=n;l<c.length;l++){var h=c[l];if(Ew(h)){a.push({type:In.literal,value:h.value});continue}if(JN(h)){typeof s=="number"&&a.push({type:In.literal,value:t.getNumberFormat(e).format(s)});continue}var u=h.value;if(!(r&&u in r))throw new NL(u,o);var f=r[u];if(KN(h)){(!f||typeof f=="string"||typeof f=="number")&&(f=typeof f=="string"||typeof f=="number"?String(f):""),a.push({type:typeof f=="string"?In.literal:In.object,value:f});continue}if(Tk(h)){var p=typeof h.style=="string"?i.date[h.style]:Jm(h.style)?h.style.parsedOptions:void 0;a.push({type:In.literal,value:t.getDateTimeFormat(e,p).format(f)});continue}if(Ck(h)){var p=typeof h.style=="string"?i.time[h.style]:Jm(h.style)?h.style.parsedOptions:i.time.medium;a.push({type:In.literal,value:t.getDateTimeFormat(e,p).format(f)});continue}if(Ek(h)){var p=typeof h.style=="string"?i.number[h.style]:Pk(h.style)?h.style.parsedOptions:void 0;p&&p.scale&&(f=f*(p.scale||1)),a.push({type:In.literal,value:t.getNumberFormat(e,p).format(f)});continue}if(Qk(h)){var d=h.children,m=h.value,b=r[m];if(!BL(b))throw new DL(m,"function",o);var A=nu(d,e,t,i,r,s),g=b(A.map(function(_){return _.value}));Array.isArray(g)||(g=[g]),a.push.apply(a,g.map(function(_){return{type:typeof _=="string"?In.literal:In.object,value:_}}))}if(Ik(h)){var v=h.options[f]||h.options.other;if(!v)throw new Dw(h.value,f,Object.keys(h.options),o);a.push.apply(a,nu(v.value,e,t,i,r));continue}if(Rk(h)){var v=h.options["=".concat(f)];if(!v){if(!Intl.PluralRules)throw new Gf(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,ia.MISSING_INTL_API,o);var O=t.getPluralRules(e,{type:h.pluralType}).select(f-(h.offset||0));v=h.options[O]||h.options.other}if(!v)throw new Dw(h.value,f,Object.keys(h.options),o);a.push.apply(a,nu(v.value,e,t,i,r,f-(h.offset||0)));continue}}return LL(a)}function ML(n,e){return e?gt(gt(gt({},n||{}),e||{}),Object.keys(n).reduce(function(t,i){return t[i]=gt(gt({},n[i]),e[i]||{}),t},{})):n}function $L(n,e){return e?Object.keys(n).reduce(function(t,i){return t[i]=ML(n[i],e[i]),t},gt({},n)):n}function Up(n){return{create:function(){return{get:function(e){return n[e]},set:function(e,t){n[e]=t}}}}}function FL(n){return n===void 0&&(n={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Fp(function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.NumberFormat).bind.apply(e,Mp([void 0],t,!1)))},{cache:Up(n.number),strategy:Wp.variadic}),getDateTimeFormat:Fp(function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.DateTimeFormat).bind.apply(e,Mp([void 0],t,!1)))},{cache:Up(n.dateTime),strategy:Wp.variadic}),getPluralRules:Fp(function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.PluralRules).bind.apply(e,Mp([void 0],t,!1)))},{cache:Up(n.pluralRules),strategy:Wp.variadic})}}var WL=function(){function n(e,t,i,r){var s=this;if(t===void 0&&(t=n.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(o){var a=s.formatToParts(o);if(a.length===1)return a[0].value;var l=a.reduce(function(c,h){return!c.length||h.type!==In.literal||typeof c[c.length-1]!="string"?c.push(h.value):c[c.length-1]+=h.value,c},[]);return l.length<=1?l[0]||"":l},this.formatToParts=function(o){return nu(s.ast,s.locales,s.formatters,s.formats,o,void 0,s.message)},this.resolvedOptions=function(){return{locale:s.resolvedLocale.toString()}},this.getAst=function(){return s.ast},this.locales=t,this.resolvedLocale=n.resolveLocale(t),typeof e=="string"){if(this.message=e,!n.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=n.__parse(e,{ignoreTag:r==null?void 0:r.ignoreTag,locale:this.resolvedLocale})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=$L(n.formats,i),this.formatters=r&&r.formatters||FL(this.formatterCache)}return Object.defineProperty(n,"defaultLocale",{get:function(){return n.memoizedDefaultLocale||(n.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),n.memoizedDefaultLocale},enumerable:!1,configurable:!0}),n.memoizedDefaultLocale=null,n.resolveLocale=function(e){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale(typeof e=="string"?e:e[0])},n.__parse=EL,n.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},n}(),UL=WL;const es={},zL=(n,e,t)=>t&&(e in es||(es[e]={}),n in es[e]||(es[e][n]=t),t),zk=(n,e)=>{if(e==null)return;if(e in es&&n in es[e])return es[e][n];const t=Rc(e);for(let i=0;i<t.length;i++){const r=jL(t[i],n);if(r)return zL(n,e,r)}};let g0;const Ic=Lt({});function jk(n){return n in g0}function jL(n,e){if(!jk(n))return null;const t=function(i){return g0[i]||null}(n);return function(i,r){if(r==null)return;if(r in i)return i[r];const s=r.split(".");let o=i;for(let a=0;a<s.length;a++)if(typeof o=="object"){if(a>0){const l=s.slice(a,s.length).join(".");if(l in o){o=o[l];break}}o=o[s[a]]}else o=void 0;return o}(t,e)}function y0(n,...e){delete es[n],Ic.update(t=>(t[n]=qN.all([t[n]||{},...e]),t))}xi([Ic],([n])=>Object.keys(n));Ic.subscribe(n=>g0=n);const iu={};function Hk(n){return iu[n]}function xu(n){return n!=null&&Rc(n).some(e=>{var t;return(t=Hk(e))===null||t===void 0?void 0:t.size})}function HL(n,e){return Promise.all(e.map(i=>(function(r,s){iu[r].delete(s),iu[r].size===0&&delete iu[r]}(n,i),i().then(r=>r.default||r)))).then(i=>y0(n,...i))}const nl={};function Gk(n){if(!xu(n))return n in nl?nl[n]:Promise.resolve();const e=function(t){return Rc(t).map(i=>{const r=Hk(i);return[i,r?[...r]:[]]}).filter(([,i])=>i.length>0)}(n);return nl[n]=Promise.all(e.map(([t,i])=>HL(t,i))).then(()=>{if(xu(n))return Gk(n);delete nl[n]}),nl[n]}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function mo(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function GL({locale:n,id:e}){console.warn(`[svelte-i18n] The message "${e}" was not found in "${Rc(n).join('", "')}".${xu(Qs())?`

Note: there are at least one loader still registered to this locale that wasn't executed.`:""}`)}const yl={fallbackLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0,handleMissingMessage:void 0,ignoreTag:!0};function ra(){return yl}function VL(n){const{formats:e}=n,t=mo(n,["formats"]),i=n.initialLocale||n.fallbackLocale;return t.warnOnMissingMessages&&(delete t.warnOnMissingMessages,t.handleMissingMessage==null?t.handleMissingMessage=GL:console.warn('[svelte-i18n] The "warnOnMissingMessages" option is deprecated. Please use the "handleMissingMessage" option instead.')),Object.assign(yl,t,{initialLocale:i}),e&&("number"in e&&Object.assign(yl.formats.number,e.number),"date"in e&&Object.assign(yl.formats.date,e.date),"time"in e&&Object.assign(yl.formats.time,e.time)),Sa.set(i)}const zp=Lt(!1);let sg;const ru=Lt(null);function Nw(n){return n.split("-").map((e,t,i)=>i.slice(0,t+1).join("-")).reverse()}function Rc(n,e=ra().fallbackLocale){const t=Nw(n);return e?[...new Set([...t,...Nw(e)])]:t}function Qs(){return sg!=null?sg:void 0}ru.subscribe(n=>{sg=n!=null?n:void 0,typeof window!="undefined"&&n!=null&&document.documentElement.setAttribute("lang",n)});const Sa=Object.assign(Object.assign({},ru),{set:n=>{if(n&&function(e){if(e==null)return;const t=Rc(e);for(let i=0;i<t.length;i++){const r=t[i];if(jk(r))return r}}(n)&&xu(n)){const{loadingDelay:e}=ra();let t;return typeof window!="undefined"&&Qs()!=null&&e?t=window.setTimeout(()=>zp.set(!0),e):zp.set(!0),Gk(n).then(()=>{ru.set(n)}).finally(()=>{clearTimeout(t),zp.set(!1)})}return ru.set(n)}}),XL=()=>typeof window=="undefined"?null:window.navigator.language||window.navigator.languages[0],Vf=n=>{const e=Object.create(null);return t=>{const i=JSON.stringify(t);return i in e?e[i]:e[i]=n(t)}},Gl=(n,e)=>{const{formats:t}=ra();if(n in t&&e in t[n])return t[n][e];throw new Error(`[svelte-i18n] Unknown "${e}" ${n} format.`)},YL=Vf(n=>{var{locale:e,format:t}=n,i=mo(n,["locale","format"]);if(e==null)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return t&&(i=Gl("number",t)),new Intl.NumberFormat(e,i)}),ZL=Vf(n=>{var{locale:e,format:t}=n,i=mo(n,["locale","format"]);if(e==null)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return t?i=Gl("date",t):Object.keys(i).length===0&&(i=Gl("date","short")),new Intl.DateTimeFormat(e,i)}),qL=Vf(n=>{var{locale:e,format:t}=n,i=mo(n,["locale","format"]);if(e==null)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return t?i=Gl("time",t):Object.keys(i).length===0&&(i=Gl("time","short")),new Intl.DateTimeFormat(e,i)}),KL=(n={})=>{var{locale:e=Qs()}=n,t=mo(n,["locale"]);return YL(Object.assign({locale:e},t))},JL=(n={})=>{var{locale:e=Qs()}=n,t=mo(n,["locale"]);return ZL(Object.assign({locale:e},t))},eB=(n={})=>{var{locale:e=Qs()}=n,t=mo(n,["locale"]);return qL(Object.assign({locale:e},t))},tB=Vf((n,e=Qs())=>new UL(n,e,ra().formats,{ignoreTag:ra().ignoreTag})),nB=(n,e={})=>{var t,i,r,s;let o=e;typeof n=="object"&&(o=n,n=o.id);const{values:a,locale:l=Qs(),default:c}=o;if(l==null)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let h=zk(n,l);if(h){if(typeof h!="string")return console.warn(`[svelte-i18n] Message with id "${n}" must be of type "string", found: "${typeof h}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),h}else h=(s=(r=(i=(t=ra()).handleMissingMessage)===null||i===void 0?void 0:i.call(t,{locale:l,id:n,defaultValue:c}))!==null&&r!==void 0?r:c)!==null&&s!==void 0?s:n;if(!a)return h;let u=h;try{u=tB(h,l).format(a)}catch(f){console.warn(`[svelte-i18n] Message "${n}" has syntax error:`,f.message)}return u},iB=(n,e)=>eB(e).format(n),rB=(n,e)=>JL(e).format(n),sB=(n,e)=>KL(e).format(n),oB=(n,e=Qs())=>zk(n,e),Kt=xi([Sa,Ic],()=>nB);xi([Sa],()=>iB);xi([Sa],()=>rB);xi([Sa],()=>sB);xi([Sa,Ic],()=>oB);function Lw(n){let e,t,i,r,s,o=n[5]("dialogs.lock.title")+"",a,l,c,h=n[5]("dialogs.lock.text")+"",u,f,p=n[5]("dialogs.lock.new")+"",d,m,b,A=n[5]("dialogs.lock.overwrite")+"",g,v,O;return{c(){e=Y("div"),t=fe(),i=Y("div"),r=Y("div"),s=Y("h3"),a=Ae(o),l=fe(),c=Y("p"),u=fe(),f=Y("button"),d=Ae(p),m=fe(),b=Y("button"),g=Ae(A),G(e,"class","dialog-mask"),G(f,"class","ok"),G(b,"class","error"),G(r,"class","dialog lock svelte-8wx2vf"),G(i,"class","dialog-container")},m(_,x){Ee(_,e,x),Ee(_,t,x),Ee(_,i,x),W(i,r),W(r,s),W(s,a),W(r,l),W(r,c),c.innerHTML=h,W(r,u),W(r,f),W(f,d),W(r,m),W(r,b),W(b,g),v||(O=[Ie(f,"click",n[6]),Ie(b,"click",n[7])],v=!0)},p(_,x){x&32&&o!==(o=_[5]("dialogs.lock.title")+"")&&Te(a,o),x&32&&h!==(h=_[5]("dialogs.lock.text")+"")&&(c.innerHTML=h),x&32&&p!==(p=_[5]("dialogs.lock.new")+"")&&Te(d,p),x&32&&A!==(A=_[5]("dialogs.lock.overwrite")+"")&&Te(g,A)},d(_){_&&Se(e),_&&Se(t),_&&Se(i),v=!1,Xt(O)}}}function Bw(n){let e,t,i,r,s,o,a;var l=n[2];function c(h){return{props:{params:h[4],callback:h[3]}}}return l&&(r=new l(c(n))),{c(){e=Y("div"),t=fe(),i=Y("div"),r&&Jr(r.$$.fragment),G(e,"class","dialog-mask"),G(i,"class","dialog-container")},m(h,u){Ee(h,e,u),Ee(h,t,u),Ee(h,i,u),r&&wr(r,i,null),s=!0,o||(a=[Ie(e,"click",_w(n[8])),Ie(i,"click",_w(n[9]))],o=!0)},p(h,u){const f={};if(u&16&&(f.params=h[4]),u&8&&(f.callback=h[3]),l!==(l=h[2])){if(r){zf();const p=r;ti(p.$$.fragment,1,0,()=>{Ar(p,1)}),jf()}l?(r=new l(c(h)),Jr(r.$$.fragment),Pn(r.$$.fragment,1),wr(r,i,null)):r=null}else l&&r.$set(f)},i(h){s||(r&&Pn(r.$$.fragment,h),s=!0)},o(h){r&&ti(r.$$.fragment,h),s=!1},d(h){h&&Se(e),h&&Se(t),h&&Se(i),r&&Ar(r),o=!1,Xt(a)}}}function aB(n){let e,t,i,r=n[0]&&Lw(n),s=n[2]&&Bw(n);return{c(){r&&r.c(),e=fe(),s&&s.c(),t=to()},m(o,a){r&&r.m(o,a),Ee(o,e,a),s&&s.m(o,a),Ee(o,t,a),i=!0},p(o,[a]){o[0]?r?r.p(o,a):(r=Lw(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),o[2]?s?(s.p(o,a),a&4&&Pn(s,1)):(s=Bw(o),s.c(),Pn(s,1),s.m(t.parentNode,t)):s&&(zf(),ti(s,1,1,()=>{s=null}),jf())},i(o){i||(Pn(s),i=!0)},o(o){ti(s),i=!1},d(o){r&&r.d(o),o&&Se(e),s&&s.d(o),o&&Se(t)}}}const og=Lt({}),ag=Lt(!1),qn=(n,...e)=>new Promise(t=>og.set({component:n,callback(...i){og.set({}),t(...i)},params:Lt(e)}));function lB(n,e,t){let i;Le(n,Kt,p=>t(5,i=p));let r=!1,s,o,a,l;return ag.subscribe(p=>t(0,{lock:r,session:s}=p,r,t(1,s))),og.subscribe(async p=>{t(2,{component:o,callback:a,params:l}=p,o,t(3,a),t(4,l)),await ea();const d=document.querySelector("button.ok");d&&d.focus()}),[r,s,o,a,l,i,()=>s.duplicate(),()=>s.lock(),()=>a(!1),()=>a(!1)]}class cB extends xn{constructor(e){super(),_n(this,e,lB,aB,gn,{})}}function hB(n){let e,t,i,r,s,o,a,l=n[4]("dialogs.ok")+"",c,h,u;return{c(){e=Y("div"),t=Y("h3"),i=Ae(n[2]),r=fe(),s=Y("p"),o=fe(),a=Y("button"),c=Ae(l),G(a,"class","ok"),G(e,"class","dialog")},m(f,p){Ee(f,e,p),W(e,t),W(t,i),W(e,r),W(e,s),s.innerHTML=n[3],W(e,o),W(e,a),W(a,c),h||(u=Ie(a,"click",n[6]),h=!0)},p(f,[p]){p&4&&Te(i,f[2]),p&8&&(s.innerHTML=f[3]),p&16&&l!==(l=f[4]("dialogs.ok")+"")&&Te(c,l)},i:We,o:We,d(f){f&&Se(e),h=!1,u()}}}function uB(n,e,t){let i,r=We,s=()=>(r(),r=Cc(a,f=>t(5,i=f)),a),o;Le(n,Kt,f=>t(4,o=f)),n.$$.on_destroy.push(()=>r());let{params:a}=e;s();let{callback:l}=e,c,h;const u=()=>l(!0);return n.$$set=f=>{"params"in f&&s(t(0,a=f.params)),"callback"in f&&t(1,l=f.callback)},n.$$.update=()=>{n.$$.dirty&32&&t(2,[c,h]=i,c,(t(3,h),t(5,i)))},[a,l,c,h,o,i,u]}class fB extends xn{constructor(e){super(),_n(this,e,uB,hB,gn,{params:0,callback:1})}}const lg={O:()=>console.log("ciao")},O0=n=>Object.assign(lg,n),dB=function(n){if(n.ctrlKey){const e=String.fromCharCode(n.keyCode).toUpperCase();e in lg&&(lg[e](),n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault())}},pB="text/markdown",mB=n=>{let e={properties:{},chapters:{}},t="";const i=()=>{var r,s;try{e.chapters[t].text=((s=(r=e.chapters[t])==null?void 0:r.text)==null?void 0:s.replace(/[\n\s]+$/,""))||""}catch{}};return n.split(`
`).forEach((r,s)=>{const o=r.trim();if(t===""&&!o.startsWith("### ")){if(o.startsWith("# ")){e.properties.title=o.replace(/\#/g,"").trim();return}const l=o.indexOf(":");l!==-1&&(e.properties[o.substr(0,l)]=o.substr(l+1));return}if(o.startsWith("### ")){t!==""&&i(),t=o.substr(4).trim();let l="";const c=t.indexOf("{#");c!=-1&&(l=t.substr(0,c-1).trim(),t=t.substr(c+2,t.lastIndexOf("}")-2-c).trim()),e.chapters[t]={title:l,text:"",group:"",flags:[]};return}if(o.includes("![flag-")||o.includes("![][flag-")){["final","fixed","death"].forEach(l=>{(o.includes(`![flag-${l}]`)||o.includes(`![][flag-${l}]`))&&e.chapters[t].flags.push(l)});return}const a=o.indexOf('[group]:<> ("');a!=-1&&(e.chapters[t].group=o.substr(a+13,o.lastIndexOf('")')-a-13),o.replaceAll(/\[group\]:<>[ ]*\([ ]*"[^"]*"[ ]*\)/g,"").trim()=="")||(e.chapters[t].text+=r+`
`)}),i(),e.key=String(e.properties.last_edited||Object.keys(e.chapters)[0]).trim(),e};var b0={mimetype:pB,decode:mB};const Ah=(n,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")=>{let t="";const i=e.length;for(let r=0;r<n;r++)t+=e.charAt(Math.floor(Math.random()*i));return t},gB=n=>{for(let e=n.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}},Xf=n=>(n>0||String(n)==="0")&&Math.floor(n)===+n,zo=n=>n.replace(/[^a-z0-9]/gi,""),yB=({key:n,title:e="",flags:t=[],group:i="",text:r="",beforeSpaceLines:s=2,afterSpaceLines:o=0})=>{let a=`
`.repeat(s);return a+=e?`### ${e} {#${n}}`:`### ${n}`,t&&t.length>0&&(a+=`
`+t.map(l=>`![][flag-${l}]`).join(" ")),i&&(a+=`
[group]:<> ("${i}")`),r&&(a+=`
${r}`),a+`
`.repeat(o)},v0=n=>{const e={properties:{},chapters:new Map,linksToChapter:new Map,groups:new Set};let t="",i,r=!1,s=1;const o=n.split(`
`);return o.forEach((a,l)=>{const c=l,h=a.trim();if(r&&(s=c),r=h!=="",t===""&&!h.startsWith("### ")){if(h.startsWith("# ")){e.properties.title=h.replace(/\#/g,"").trim();return}const m=h.indexOf(":");m!==-1&&(e.properties[h.substr(0,m).trim()]=h.substr(m+1).trim());return}if(h.startsWith("### ")){t!==""&&(i.contentEnd=s-1,i.end=c-1,e.chapters.set(t,i)),t=h.substr(4).trim();let m="";const b=t.indexOf("{#");b!=-1&&(m=t.substr(0,b-1).trim(),t=t.substr(b+2,t.lastIndexOf("}")-2-b).trim()),i={title:m,group:"",start:s,contentStart:c,contentEnd:c,end:c,flags:[],links:new Set};return}if(h.includes("![flag-")||h.includes("![][flag-")){["final","fixed","death"].forEach(m=>{(h.includes(`![flag-${m}]`)||h.includes(`![][flag-${m}]`))&&i.flags.push(m)});return}const u=h.indexOf('[group]:<> ("');if(u!=-1){i.group=h.substr(u+13,h.lastIndexOf('")')-u-13),e.groups.add(i.group);return}let f=new RegExp("\\[([^\\[]*)\\]\\(\\s*\\#([^\\)]+)\\s*\\)","g"),p=f.exec(a);for(;p!=null;){const m=p[2].trim();i.links.add(m),e.linksToChapter.has(m)||e.linksToChapter.set(m,new Set),e.linksToChapter.get(m).add(t),p=f.exec(a)}if(e.properties&&e.properties.disableShortLinks==="true")return;let d=new RegExp("\\[([^\\[]*)\\](?!\\()","g");for(p=d.exec(a);p!=null;){const m=p[1].trim();i.links.add(m),e.linksToChapter.has(m)||e.linksToChapter.set(m,new Set),e.linksToChapter.get(m).add(t),p=d.exec(a)}}),t!==""&&(i.end=o.length-1,i.contentEnd=r?i.end:s-1,e.chapters.set(t,i)),e},go=n=>{const e=jr({properties:{},chapters:new Map,linksToChapter:new Map,groups:new Set},v0(n)),t=n.split(`
`);e.titlePage=t.slice(0,e.chapters.size>0?e.chapters.values().next().value.contentStart:t.length-1).join(`
`);for(const[i,{contentStart:r,contentEnd:s}]of e.chapters){const o=t.slice(r+1,s+1).filter(l=>{const c=l.trim();return!(c.startsWith("###")||c.includes("[group]:")||c.includes("![][flag-")||c.includes("![flag-"))}).join(`
`),a=t.slice(r,s+1).join(`
`);Object.assign(e.chapters.get(i),{text:o,fullText:a})}return e},w0=(n,e)=>{const t=new Map;for(const[a,l]of e)t.set(l,a);const i=[...e.keys()];let r=n.titlePage,s=0;for(const[a,l]of n.chapters){let c=t.has(a)?i[s++]:a;const{title:h,flags:u,group:f,text:p}=t.has(a)?n.chapters.get(e.get(c)):l;r+=yB({key:c,title:h,flags:u,group:f,text:p,beforeSpaceLines:1,afterSpaceLines:2})}let o=r.replace(/\[([^\[]*)\](\(\s*#(\w+)\s*\))/g,(...a)=>`[${a[1]}](#${t.has(a[3])?t.get(a[3]):a[3]})`);return n.properties.disableShortLinks||(o=o.replace(/\[([^\[]*)\]/g,(...a)=>`[${t.has(a[1])?t.get(a[1]):a[1]}]`)),o},OB=(n,{selectedFlags:e=[],groupsFilter:t=[],onlyNumbers:i=!0}={})=>{const r=go(n),s=[];for(const[a,{group:l,flags:c}]of r.chapters)i&&!Xf(a)||t.length>0&&!t.includes(l)||c.some(h=>e.includes(h))||s.push(a);const o=JSON.parse(JSON.stringify(s));return gB(o),w0(r,new Map(s.map((a,l)=>[String(a),String(o[l])])))},bB=n=>{const e=go(n),t=[],i=[];let r=0;for(const[s]of e.chapters)Xf(s)&&(t.push(s),i.push(++r));return w0(e,new Map(t.map((s,o)=>[String(i[o]),String(s)])))},vB=n=>{const e=go(n),t=[];for(const[i]of e.chapters)Xf(i)&&t.push(Number(i));return t.sort((i,r)=>Number(i)-Number(r)),w0(e,new Map(t.map(i=>[String(i),String(i)])))},wB=window["@hpcc-js/wasm"],Mw=n=>n.replace(/\//g,"\\").replace(/\"/g,'"'),AB=n=>n.replace(/[\]\[\#\)\(]/g,""),_B=(n,e,t)=>e.includes("final")?', color="#ffa200"':e.includes("death")?', color="#000000", fontcolor="#FFFFFF"':e.includes("fixed")?', color="#b02900", fontcolor="#FFFFFF"':"",xB=n=>{const e=v0(n);console.log(e);let t=`digraph{
    graph [fontname="arial", fontsize=10]; 
    node  [fontname="arial", fontsize=12, style="rounded,filled", shape=box];
    edge  [fontname="arial", fontsize=12];
  `;const i=Object.fromEntries([...e.groups].map(s=>[s,[]]));for(let[s,{title:o,group:a,links:l,flags:c}]of e.chapters){t+=`
      ${s} [label="${Mw(o?`${s} - ${o}`:s)}"${_B(s,c)}]`;for(const h of l)e.chapters.has(h)&&(t+=`
        ${s} -> ${AB(h)}`);a&&i[a].push(s)}let r=0;for(let s of e.groups)t+=`
    
    subgraph cluster${r++}{
      graph [fontname="arial", fontsize=10]; 
      node  [fontname="arial", fontsize=12, style="rounded,filled", shape=box];
      edge  [fontname="arial", fontsize=12];
      style=filled
      fillcolor="#EEEEEE"
      color=black
      label = "${Mw(s)}"
      labelfontsize=14
      labelfontname=arial

      ${i[s].join("; ")}
    }`;return t+=`
}`,console.log(t),t},kB=n=>(console.log("generating graph.."),wB.graphviz.layout(xB(n),"svg","dot"));function Vk(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Ea=Vk();function SB(n){Ea=n}const EB=/[&<>"']/,TB=/[&<>"']/g,CB=/[<>"']|&(?!#?\w+;)/,IB=/[<>"']|&(?!#?\w+;)/g,RB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$w=n=>RB[n];function cn(n,e){if(e){if(EB.test(n))return n.replace(TB,$w)}else if(CB.test(n))return n.replace(IB,$w);return n}const QB=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Xk(n){return n.replace(QB,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const PB=/(^|[^\[])\^/g;function St(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(i,r)=>(r=r.source||r,r=r.replace(PB,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}const DB=/[^\w:]/g,NB=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Fw(n,e,t){if(n){let i;try{i=decodeURIComponent(Xk(t)).replace(DB,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!NB.test(t)&&(t=$B(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const _h={},LB=/^[^:]+:\/*[^/]*$/,BB=/^([^:]+:)[\s\S]*$/,MB=/^([^:]+:\/*[^/]*)[\s\S]*$/;function $B(n,e){_h[" "+n]||(LB.test(n)?_h[" "+n]=n+"/":_h[" "+n]=su(n,"/",!0)),n=_h[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(BB,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(MB,"$1")+e:n+e}const ku={exec:function(){}};function Mi(n){let e=1,t,i;for(;e<arguments.length;e++){t=arguments[e];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}function Ww(n,e){const t=n.replace(/\|/g,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=t.split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function su(n,e,t){const i=n.length;if(i===0)return"";let r=0;for(;r<i;){const s=n.charAt(i-r-1);if(s===e&&!t)r++;else if(s!==e&&t)r++;else break}return n.slice(0,i-r)}function FB(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let i=0,r=0;for(;r<t;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])i++;else if(n[r]===e[1]&&(i--,i<0))return r;return-1}function Yk(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Uw(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function zw(n,e,t,i){const r=e.href,s=e.title?cn(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:t,href:r,title:s,text:o,tokens:i.inlineTokens(o,[])};return i.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:s,text:cn(o)}}function WB(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const i=t[1];return e.split(`
`).map(r=>{const s=r.match(/^\s+/);if(s===null)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join(`
`)}class A0{constructor(e){this.options=e||Ea}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:su(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=WB(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const s=su(i,"#");(this.options.pedantic||!s||/ $/.test(s))&&(i=s.trim())}const r={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,r,s,o,a,l,c,h,u,f,p,d,m=t[1].trim();const b=m.length>1,A={type:"list",raw:"",ordered:b,start:b?+m.slice(0,-1):"",loose:!1,items:[]};m=b?`\\d{1,9}\\${m.slice(-1)}`:`\\${m}`,this.options.pedantic&&(m=b?m:"[*+-]");const g=new RegExp(`^( {0,3}${m})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(d=!1,!(!(t=g.exec(e))||this.rules.block.hr.test(e)));){if(i=t[0],e=e.substring(i.length),h=t[2].split(`
`,1)[0],u=e.split(`
`,1)[0],this.options.pedantic?(o=2,p=h.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,p=h.slice(o),o+=t[1].length),l=!1,!h&&/^ *$/.test(u)&&(i+=u+`
`,e=e.substring(u.length+1),d=!0),!d){const O=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),_=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),x=new RegExp(`^( {0,${Math.min(3,o-1)}})(\`\`\`|~~~)`);for(;e&&(f=e.split(`
`,1)[0],h=f,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(x.test(h)||this.rules.block.heading.test(h)||O.test(h)||_.test(e)));){if(h.search(/[^ ]/)>=o||!h.trim())p+=`
`+h.slice(o);else if(!l)p+=`
`+h;else break;!l&&!h.trim()&&(l=!0),i+=f+`
`,e=e.substring(f.length+1)}}A.loose||(c?A.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(p),r&&(s=r[0]!=="[ ] ",p=p.replace(/^\[[ xX]\] +/,""))),A.items.push({type:"list_item",raw:i,task:!!r,checked:s,loose:!1,text:p}),A.raw+=i}A.items[A.items.length-1].raw=i.trimRight(),A.items[A.items.length-1].text=p.trimRight(),A.raw=A.raw.trimRight();const v=A.items.length;for(a=0;a<v;a++){this.lexer.state.top=!1,A.items[a].tokens=this.lexer.blockTokens(A.items[a].text,[]);const O=A.items[a].tokens.filter(x=>x.type==="space"),_=O.every(x=>{const E=x.raw.split("");let T=0;for(const S of E)if(S===`
`&&(T+=1),T>1)return!0;return!1});!A.loose&&O.length&&_&&(A.loose=!0,A.items[a].loose=!0)}return A}}html(e){const t=this.rules.block.html.exec(e);if(t){const i={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):cn(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));const i=t[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:i,raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const i={type:"table",header:Ww(t[1]).map(r=>({text:r})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=t[0];let r=i.align.length,s,o,a,l;for(s=0;s<r;s++)/^ *-+: *$/.test(i.align[s])?i.align[s]="right":/^ *:-+: *$/.test(i.align[s])?i.align[s]="center":/^ *:-+ *$/.test(i.align[s])?i.align[s]="left":i.align[s]=null;for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=Ww(i.rows[s],i.header.length).map(c=>({text:c}));for(r=i.header.length,o=0;o<r;o++)i.header[o].tokens=[],this.lexer.inline(i.header[o].text,i.header[o].tokens);for(r=i.rows.length,o=0;o<r;o++)for(l=i.rows[o],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inline(l[a].text,l[a].tokens);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const i={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}text(e){const t=this.rules.block.text.exec(e);if(t){const i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:cn(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):cn(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=su(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{const o=FB(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),zw(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r||!r.href){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return zw(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const s=r[1]||r[2]||"";if(!s||s&&(i===""||this.rules.inline.punctuation.exec(i))){const o=r[0].length-1;let a,l,c=o,h=0;const u=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+o);(r=u.exec(t))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=a.length,r[3]||r[4]){c+=l;continue}else if((r[5]||r[6])&&o%3&&!((o+l)%3)){h+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+h),Math.min(o,l)%2){const p=e.slice(1,o+r.index+l);return{type:"em",raw:e.slice(0,o+r.index+l+1),text:p,tokens:this.lexer.inlineTokens(p,[])}}const f=e.slice(2,o+r.index+l-1);return{type:"strong",raw:e.slice(0,o+r.index+l+1),text:f,tokens:this.lexer.inlineTokens(f,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=cn(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let r,s;return i[2]==="@"?(r=cn(this.options.mangle?t(i[1]):i[1]),s="mailto:"+r):(r=cn(i[1]),s=r),{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let r,s;if(i[2]==="@")r=cn(this.options.mangle?t(i[0]):i[0]),s="mailto:"+r;else{let o;do o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(o!==i[0]);r=cn(i[0]),i[1]==="www."?s="http://"+r:s=r}return{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):cn(i[0]):i[0]:r=cn(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Ye={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:ku,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ye._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Ye._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Ye.def=St(Ye.def).replace("label",Ye._label).replace("title",Ye._title).getRegex();Ye.bullet=/(?:[*+-]|\d{1,9}[.)])/;Ye.listItemStart=St(/^( *)(bull) */).replace("bull",Ye.bullet).getRegex();Ye.list=St(Ye.list).replace(/bull/g,Ye.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ye.def.source+")").getRegex();Ye._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Ye._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Ye.html=St(Ye.html,"i").replace("comment",Ye._comment).replace("tag",Ye._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Ye.paragraph=St(Ye._paragraph).replace("hr",Ye.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ye._tag).getRegex();Ye.blockquote=St(Ye.blockquote).replace("paragraph",Ye.paragraph).getRegex();Ye.normal=Mi({},Ye);Ye.gfm=Mi({},Ye.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Ye.gfm.table=St(Ye.gfm.table).replace("hr",Ye.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ye._tag).getRegex();Ye.gfm.paragraph=St(Ye._paragraph).replace("hr",Ye.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ye.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ye._tag).getRegex();Ye.pedantic=Mi({},Ye.normal,{html:St(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ye._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ku,paragraph:St(Ye.normal._paragraph).replace("hr",Ye.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ye.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const $e={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ku,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ku,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};$e._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";$e.punctuation=St($e.punctuation).replace(/punctuation/g,$e._punctuation).getRegex();$e.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;$e.escapedEmSt=/\\\*|\\_/g;$e._comment=St(Ye._comment).replace("(?:-->|$)","-->").getRegex();$e.emStrong.lDelim=St($e.emStrong.lDelim).replace(/punct/g,$e._punctuation).getRegex();$e.emStrong.rDelimAst=St($e.emStrong.rDelimAst,"g").replace(/punct/g,$e._punctuation).getRegex();$e.emStrong.rDelimUnd=St($e.emStrong.rDelimUnd,"g").replace(/punct/g,$e._punctuation).getRegex();$e._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;$e._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;$e._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;$e.autolink=St($e.autolink).replace("scheme",$e._scheme).replace("email",$e._email).getRegex();$e._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;$e.tag=St($e.tag).replace("comment",$e._comment).replace("attribute",$e._attribute).getRegex();$e._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;$e._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;$e._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;$e.link=St($e.link).replace("label",$e._label).replace("href",$e._href).replace("title",$e._title).getRegex();$e.reflink=St($e.reflink).replace("label",$e._label).replace("ref",Ye._label).getRegex();$e.nolink=St($e.nolink).replace("ref",Ye._label).getRegex();$e.reflinkSearch=St($e.reflinkSearch,"g").replace("reflink",$e.reflink).replace("nolink",$e.nolink).getRegex();$e.normal=Mi({},$e);$e.pedantic=Mi({},$e.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:St(/^!?\[(label)\]\((.*?)\)/).replace("label",$e._label).getRegex(),reflink:St(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$e._label).getRegex()});$e.gfm=Mi({},$e.normal,{escape:St($e.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});$e.gfm.url=St($e.gfm.url,"i").replace("email",$e.gfm._extended_email).getRegex();$e.breaks=Mi({},$e.gfm,{br:St($e.br).replace("{2,}","*").getRegex(),text:St($e.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function UB(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function jw(n){let e="",t,i;const r=n.length;for(t=0;t<r;t++)i=n.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}class Cr{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ea,this.options.tokenizer=this.options.tokenizer||new A0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Ye.normal,inline:$e.normal};this.options.pedantic?(t.block=Ye.pedantic,t.inline=$e.pedantic):this.options.gfm&&(t.block=Ye.gfm,this.options.breaks?t.inline=$e.breaks:t.inline=$e.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ye,inline:$e}}static lex(e,t){return new Cr(t).lex(e)}static lexInline(e,t){return new Cr(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let i,r,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(function(h){c=h.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=t[t.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,r,s,o=e,a,l,c;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)h.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+Uw("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+Uw("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(i=h.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,o,c)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,jw)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,jw))){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const u=e.slice(1);let f;this.options.extensions.startInline.forEach(function(p){f=p.call({lexer:this},u),typeof f=="number"&&f>=0&&(h=Math.min(h,f))}),h<1/0&&h>=0&&(s=e.substring(0,h+1))}if(i=this.tokenizer.inlineText(s,UB)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}}class _0{constructor(e){this.options=e||Ea}code(e,t,i){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,r);s!=null&&s!==e&&(i=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+cn(r,!0)+'">'+(i?e:cn(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:cn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,t,i,r){if(this.options.headerIds){const s=this.options.headerPrefix+r.slug(i);return`<h${t} id="${s}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,i){const r=t?"ol":"ul",s=t&&i!==1?' start="'+i+'"':"";return"<"+r+s+`>
`+e+"</"+r+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){if(e=Fw(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let r='<a href="'+cn(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+i+"</a>",r}image(e,t,i){if(e=Fw(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let r=`<img src="${e}" alt="${i}"`;return t&&(r+=` title="${t}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class Zk{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class qk{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do r++,i=e+"-"+r;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=r,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}}class Ir{constructor(e){this.options=e||Ea,this.options.renderer=this.options.renderer||new _0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Zk,this.slugger=new qk}static parse(e,t){return new Ir(t).parse(e)}static parseInline(e,t){return new Ir(t).parseInline(e)}parse(e,t=!0){let i="",r,s,o,a,l,c,h,u,f,p,d,m,b,A,g,v,O,_,x;const E=e.length;for(r=0;r<E;r++){if(p=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(x=this.options.extensions.renderers[p.type].call({parser:this},p),x!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type))){i+=x||"";continue}switch(p.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(p.tokens),p.depth,Xk(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(p.text,p.lang,p.escaped);continue}case"table":{for(u="",h="",a=p.header.length,s=0;s<a;s++)h+=this.renderer.tablecell(this.parseInline(p.header[s].tokens),{header:!0,align:p.align[s]});for(u+=this.renderer.tablerow(h),f="",a=p.rows.length,s=0;s<a;s++){for(c=p.rows[s],h="",l=c.length,o=0;o<l;o++)h+=this.renderer.tablecell(this.parseInline(c[o].tokens),{header:!1,align:p.align[o]});f+=this.renderer.tablerow(h)}i+=this.renderer.table(u,f);continue}case"blockquote":{f=this.parse(p.tokens),i+=this.renderer.blockquote(f);continue}case"list":{for(d=p.ordered,m=p.start,b=p.loose,a=p.items.length,f="",s=0;s<a;s++)g=p.items[s],v=g.checked,O=g.task,A="",g.task&&(_=this.renderer.checkbox(v),b?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=_+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=_+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:_}):A+=_),A+=this.parse(g.tokens,b),f+=this.renderer.listitem(A,O,v);i+=this.renderer.list(f,d,m);continue}case"html":{i+=this.renderer.html(p.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(p.tokens));continue}case"text":{for(f=p.tokens?this.parseInline(p.tokens):p.text;r+1<E&&e[r+1].type==="text";)p=e[++r],f+=`
`+(p.tokens?this.parseInline(p.tokens):p.text);i+=t?this.renderer.paragraph(f):f;continue}default:{const T='Token with "'+p.type+'" type was not found.';if(this.options.silent){console.error(T);return}else throw new Error(T)}}}return i}parseInline(e,t){t=t||this.renderer;let i="",r,s,o;const a=e.length;for(r=0;r<a;r++){if(s=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(o=this.options.extensions.renderers[s.type].call({parser:this},s),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){i+=o||"";continue}switch(s.type){case"escape":{i+=t.text(s.text);break}case"html":{i+=t.html(s.text);break}case"link":{i+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break}case"image":{i+=t.image(s.href,s.title,s.text);break}case"strong":{i+=t.strong(this.parseInline(s.tokens,t));break}case"em":{i+=t.em(this.parseInline(s.tokens,t));break}case"codespan":{i+=t.codespan(s.text);break}case"br":{i+=t.br();break}case"del":{i+=t.del(this.parseInline(s.tokens,t));break}case"text":{i+=t.text(s.text);break}default:{const l='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return i}}function Ze(n,e,t){if(typeof n=="undefined"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=Mi({},Ze.defaults,e||{}),Yk(e),t){const i=e.highlight;let r;try{r=Cr.lex(n,e)}catch(a){return t(a)}const s=function(a){let l;if(!a)try{e.walkTokens&&Ze.walkTokens(r,e.walkTokens),l=Ir.parse(r,e)}catch(c){a=c}return e.highlight=i,a?t(a):t(null,l)};if(!i||i.length<3||(delete e.highlight,!r.length))return s();let o=0;Ze.walkTokens(r,function(a){a.type==="code"&&(o++,setTimeout(()=>{i(a.text,a.lang,function(l,c){if(l)return s(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),o--,o===0&&s()})},0))}),o===0&&s();return}try{const i=Cr.lex(n,e);return e.walkTokens&&Ze.walkTokens(i,e.walkTokens),Ir.parse(i,e)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+cn(i.message+"",!0)+"</pre>";throw i}}Ze.options=Ze.setOptions=function(n){return Mi(Ze.defaults,n),SB(Ze.defaults),Ze};Ze.getDefaults=Vk;Ze.defaults=Ea;Ze.use=function(...n){const e=Mi({},...n),t=Ze.defaults.extensions||{renderers:{},childTokens:{}};let i;n.forEach(r=>{if(r.extensions&&(i=!0,r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){const o=t.renderers?t.renderers[s.name]:null;o?t.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[s.level]?t[s.level].unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}s.childTokens&&(t.childTokens[s.name]=s.childTokens)})),r.renderer){const s=Ze.defaults.renderer||new _0;for(const o in r.renderer){const a=s[o];s[o]=(...l)=>{let c=r.renderer[o].apply(s,l);return c===!1&&(c=a.apply(s,l)),c}}e.renderer=s}if(r.tokenizer){const s=Ze.defaults.tokenizer||new A0;for(const o in r.tokenizer){const a=s[o];s[o]=(...l)=>{let c=r.tokenizer[o].apply(s,l);return c===!1&&(c=a.apply(s,l)),c}}e.tokenizer=s}if(r.walkTokens){const s=Ze.defaults.walkTokens;e.walkTokens=function(o){r.walkTokens.call(this,o),s&&s.call(this,o)}}i&&(e.extensions=t),Ze.setOptions(e)})};Ze.walkTokens=function(n,e){for(const t of n)switch(e.call(Ze,t),t.type){case"table":{for(const i of t.header)Ze.walkTokens(i.tokens,e);for(const i of t.rows)for(const r of i)Ze.walkTokens(r.tokens,e);break}case"list":{Ze.walkTokens(t.items,e);break}default:Ze.defaults.extensions&&Ze.defaults.extensions.childTokens&&Ze.defaults.extensions.childTokens[t.type]?Ze.defaults.extensions.childTokens[t.type].forEach(function(i){Ze.walkTokens(t[i],e)}):t.tokens&&Ze.walkTokens(t.tokens,e)}};Ze.parseInline=function(n,e){if(typeof n=="undefined"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");e=Mi({},Ze.defaults,e||{}),Yk(e);try{const t=Cr.lexInline(n,e);return e.walkTokens&&Ze.walkTokens(t,e.walkTokens),Ir.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+cn(t.message+"",!0)+"</pre>";throw t}};Ze.Parser=Ir;Ze.parser=Ir.parse;Ze.Renderer=_0;Ze.TextRenderer=Zk;Ze.Lexer=Cr;Ze.lexer=Cr.lex;Ze.Tokenizer=A0;Ze.Slugger=qk;Ze.parse=Ze;Ze.options;Ze.setOptions;Ze.use;Ze.walkTokens;Ze.parseInline;Ir.parse;Cr.lex;if(typeof DOMParser=="undefined"){const n=global.JSDOM||require("jsdom").JSDOM;global.DOMParser=new n().window.DOMParser,global.document=new n().window.document}const Su=document.createElement("p"),Kk=n=>(Su.innerHTML=n,Su.textContent),no=n=>(Su.textContent=n,Su.innerHTML);window.marked=Ze;const zB={heading(n){},nptable(n){},hr(n){},blockquote(n){},code(n){},def(n){},list(n){},table(n){},lheading(n){}};Ze.use({tokenizer:zB});const jB=n=>{Ze.use({tokenizer:{reflink(e){if(n)return;const i=/^\[(.*?)\]/.exec(e);if(i)return{type:"link",raw:i[0],text:"",title:"",href:"#"+i[1].trim(),tokens:[]}}}})},HB={html:n=>no(n),paragraph:n=>`${n}<br>`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:n=>Kk(n),code:n=>"",reflink:(...n)=>JSON.stringify(n)+"sdfvgbfvdcsa"},Ji=(n,e=HB,t=[])=>Ze(n.replace(/\n/g,`\\
`),{renderer:Object.assign(new Ze.Renderer,e,{code:(i,...r)=>e.code(i.replaceAll(`\\
`,`
`).replace(`
`,""),...r)})}),x0=n=>{const e={disableShortLinks:!1,page:{width:"14.8",height:"21",margins:["2.5","2","2","2"]},textFont:{family:"Times New Roman",spacing:"100%",size:"12pt"},titleFont:{family:"Times New Roman",spacing:"100%",size:"12pt"},titleStyle:"default",renameTitle:({book:t,chapter:i,key:r,title:s})=>"<b>"+(s==""?r:s)+"</b>",renameLink:({book:t,chapter:i,text:r,title:s,key:o,currentChapter:a})=>r==""?i==null?"ERROR":s==""?o:s:r,renameAnchor:({book:t,key:i})=>i};if(n.disableShortLinks&&n.disableShortLinks.trim().toLowerCase()=="true"&&(e.disableShortLinks=!0),n.page){const t=n.page.split(",");if(t[0]){const i={A3:"29.70 42.00",A4:"21.00 29.70",A5:"14.80 21.00",A6:"10.50 14.80",B4:"25.00 35.30",B5:"17.60 25.00",B6:"12.50 17.60",Letter:"21.59 27.94"},r=(i[t[0].trim()]?i[t[0].trim()]:t[0].trim()).split(/\s+/);r.length>=2&&(e.page.width=r[0],e.page.height=r[1])}if(t[1]){const i=t[1].trim().split(/\s+/);i.length>=4&&(e.page.margins=i)}}if(n.textFont){const t=n.textFont.split(",");if(t[0]&&(e.textFont.family=t[0].trim()),t[1]){let i=t[1].trim();i.endsWith("pt")||(i+="pt"),e.textFont.size=i}t[2]&&(e.textFont.spacing=t[2].trim())}if(n.titleFont){const t=n.titleFont.split(",");if(t[0]&&(e.titleFont.family=t[0].trim()),t[1]){let i=t[1].trim();i.endsWith("pt")||(i+="pt"),e.titleFont.size=i}t[2]&&(e.titleFont.spacing=t[2].trim())}if(n.titleStyle){const t=["default","inline"],i=t.indexOf(n.titleStyle.trim().toLowerCase());i!=-1&&(e.titleStyle=t[i])}return n.renameTitle&&(e.renameTitle=new Function("{book, chapter, key, title}","return "+n.renameTitle.trim())),n.renameLink&&(e.renameLink=new Function("{book, text, chapter, title, key, currentChapter}","return "+n.renameLink.trim())),n.renameAnchor&&(e.renameAnchor=new Function("{book, key}","return "+n.renameAnchor.trim())),console.log("Parsing book properties"),console.log(e),e},cg=Xf,GB="application/xml",VB=n=>Object.keys(n).sort((e,t)=>{const i=cg(e),r=cg(t);if(!i&&r)return-1;if(i&&!r)return 1;if(!i&&!r)return e.localeCompare(t);if(i&&r)return parseInt(e,10)-parseInt(t,10)}),XB=n=>{const e={},t={},i=["lgc_version","title","author","version","revision","table_of_contents","editing_action","editing_chapter"],r=new DOMParser().parseFromString(n,"text/xml");[...r.documentElement.children||r.documentElement.childNodes].forEach(o=>{const a=o.getAttribute("name"),l=o.getAttribute("type"),c=o.getAttribute("group");if(l==="entity"&&a==="game"){[...o.children].forEach(u=>{const f=u.getAttribute("name"),p=u.innerHTML.substring(9,u.innerHTML.length-3);f=="editing_chapter"||i.includes(f)&&(e[f]=p)});return}if(l==="entity"&&a==="map_data"){[...o.children].forEach(u=>{const f=u.getAttribute("name"),p=u.innerHTML.substring(9,u.innerHTML.length-3);f==="map_file"&&(e.map=p)});return}let h={title:"",text:"",flags:[]};c&&(h.group=c),[...o.children].forEach(u=>{const f=u.getAttribute("name"),p=u.innerHTML.substring(9,u.innerHTML.length-3);f==="chapter_title"&&p&&(h.title=p),f==="description"&&(h.text=p),f==="map_position"&&(h.map=p),f.startsWith("flag_")&&p==="true"&&h.flags.push(f.substring(5))}),h.text=Kk(h.text.replace(/\<\/\p\>/g,`
`).replace(/\<\p\>/g,"").replace(/\<i\>/g,"&lt;i&gt;").replace(/\<\/i\>/g,"&lt;/i&gt;").replace(/\<b\>/g,"&lt;b&gt;").replace(/\<\/b\>/g,"&lt;/b&gt;").replace(/\<u\>/g,"&lt;b&gt;").replace(/\<\/u\>/g,"&lt;/b&gt;").replace(/{link (\w+):([^\}\{]+)}/g,(...u)=>`[${u[2].trim()=="@T"?"":u[2]}](#${u[1]})`).replace(/[\n\s]+$/,"")),t[a]=h});let s=`# ${e.title}
`;return Object.entries(e).forEach(([o,a])=>{o!=="title"&&(s+=`${o}: ${a.trim()}
`)}),s+=`


`,VB(t).forEach(o=>{const a=t[o];if(s+=a.title?`### ${a.title} {#${o}}
`:`### ${o}
`,a.flags&&a.flags.length){const l={death:"![][flag-death]",final:"![][flag-final]",fixed:"![][flag-fixed]"};s+=a.flags.map(c=>l[c]).join(" ")+`
`}a.group&&(s+=`[group]:<> ("${a.group}")
`),s+=a.text.replace(/\n+$/,"")+`


`}),s},YB=["<b>","</b>","<i>","</i>","<u>","</u>"],ZB={html:n=>YB.includes(n.trim().toLowerCase())?n.trim().toLowerCase():no(n),paragraph:n=>`<p>${n}</p>`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:n=>"`"+n+"`",code:(n,e)=>"<p>```"+e+no(n).replace(/\n/g,"</p><p>")+"```</p>",link:(n,e,t)=>`{link ${n.replace("#","")}:${t||"@T"}}`},qB=(n,e)=>`<entity group="setup" name="game" type="entity"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"/><attribute name="lgc_version" type="string"><![CDATA[${n.lgc_version||""}]]></attribute><attribute name="title" type="string"><![CDATA[${n.title||""}]]></attribute><attribute name="author" type="string"><![CDATA[${n.author||""}]]></attribute><attribute name="version" type="string"><![CDATA[${n.version||""}]]></attribute><attribute name="revision" type="integer"><![CDATA[${n.revision||"1"}]]></attribute><attribute name="editing_action" type="string"><![CDATA[${n.editing_action||"WRITING"}]]></attribute><attribute name="table_of_contents" type="string"><![CDATA[${n.table_of_contents||"P(ALL)"}]]></attribute><attribute name="editing_chapter" type="string"><![CDATA[${e||"1"}]]></attribute></entity>`,KB=n=>n.map?`<entity group="setup" name="map_data" type="entity"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"/><attribute name="map_file" type="string"><![CDATA[${n.map}]]></attribute></entity>`:"",JB=(n,e)=>`<entity group="${e.group||""}" name="${n}" type="${cg(n)?"chapter":"section"}"><attribute name="description" type="string"><![CDATA[${Ji(e.text,ZB)||"<p></p>"}]]></attribute><attribute name="chapter_title" type="string"><![CDATA[${e.title||""}]]></attribute>${e.type&&e.type!=="chapter"?"":`<attribute name="flag_final" type="boolean"><![CDATA[${e.flags&&e.flags.includes("final")?"true":"false"}]]></attribute><attribute name="flag_fixed" type="boolean"><![CDATA[${e.flags&&e.flags.includes("fixed")?"true":"false"}]]></attribute><attribute name="flag_death" type="boolean"><![CDATA[${e.flags&&e.flags.includes("death")?"true":"false"}]]></attribute>`}`+(e.map?`<attribute name="map_position" type="string"><![CDATA[${e.map||""}]]></attribute>`:"")+"</entity>",eM=n=>{const e=go(n),{chapters:t,properties:i}=e;let r=`<?xml version="1.0" encoding="UTF-8"?><entities>${qB(i)+KB(i)}`;for(const[s,o]of t)r+=JB(s,o);return r+"</entities>"};var hg={decode:XB,encode:eM,mimetype:GB};const tM=`
  <style:style style:name="right" style:family="paragraph" style:parent-style-name="Standard">
    <style:paragraph-properties fo:text-align="end" style:justify-single-word="false"/>
  </style:style>
  <style:style style:name="justify" style:family="paragraph" style:parent-style-name="Standard">
    <style:paragraph-properties fo:text-align="justify" style:justify-single-word="false"/>
  </style:style>
  <style:style style:name="break" style:family="paragraph" style:parent-style-name="Standard">
    <style:paragraph-properties fo:break-after="page"/>
  </style:style>
  <style:style style:name="bold" style:family="text">
   <style:text-properties fo:font-weight="bold" style:font-weight-asian="bold" style:font-weight-complex="bold"/>
  </style:style>
  <style:style style:name="underline" style:family="text">
    <style:text-properties style:text-underline-style="solid" style:text-underline-width="auto" style:text-underline-color="font-color"/>
  </style:style>
  <style:style style:name="italic" style:family="text">
    <style:text-properties fo:font-style="italic" style:font-style-asian="italic" style:font-style-complex="italic"/>
  </style:style>`,nM=(n,e)=>`<?xml version="1.0" encoding="UTF-8"?>

<office:document xmlns:grddl="http://www.w3.org/2003/g/data-view#" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:css3t="http://www.w3.org/TR/css3-text/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:formx="urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:dom="http://www.w3.org/2001/xml-events" xmlns:script="urn:oasis:names:tc:opendocument:xmlns:script:1.0" xmlns:form="urn:oasis:names:tc:opendocument:xmlns:form:1.0" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:field="urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0" xmlns:of="urn:oasis:names:tc:opendocument:xmlns:of:1.2" xmlns:oooc="http://openoffice.org/2004/calc" xmlns:ooow="http://openoffice.org/2004/writer" xmlns:config="urn:oasis:names:tc:opendocument:xmlns:config:1.0" xmlns:tableooo="http://openoffice.org/2009/table" xmlns:text="urn:oasis:names:tc:opendocument:xmlns:text:1.0" xmlns:calcext="urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0" xmlns:fo="urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:loext="urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ooo="http://openoffice.org/2004/office" xmlns:table="urn:oasis:names:tc:opendocument:xmlns:table:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:officeooo="http://openoffice.org/2009/office" xmlns:style="urn:oasis:names:tc:opendocument:xmlns:style:1.0" xmlns:drawooo="http://openoffice.org/2010/draw" xmlns:draw="urn:oasis:names:tc:opendocument:xmlns:drawing:1.0" xmlns:dr3d="urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0" xmlns:svg="urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0" xmlns:chart="urn:oasis:names:tc:opendocument:xmlns:chart:1.0" xmlns:rpt="http://openoffice.org/2005/report" xmlns:number="urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0" office:version="1.2" office:mimetype="application/vnd.oasis.opendocument.text">
 <office:meta><meta:creation-date>2017-01-01T14:28:30.863048091</meta:creation-date><meta:generator>LibreOffice/6.4.1.2$Linux_X86_64 LibreOffice_project/e1ad903d8acbc5f5b474f1d8ec3defef24b8c46b</meta:generator><meta:editing-cycles>0</meta:editing-cycles><meta:editing-duration>P0D</meta:editing-duration><meta:document-statistic meta:table-count="0" meta:image-count="0" meta:object-count="0" meta:page-count="2" meta:paragraph-count="14" meta:word-count="48" meta:character-count="272" meta:non-whitespace-character-count="237"/></office:meta>
 <office:settings>
  <config:config-item-set config:name="ooo:view-settings">
   <config:config-item config:name="ViewAreaTop" config:type="long">7895</config:config-item>
   <config:config-item config:name="ViewAreaLeft" config:type="long">0</config:config-item>
   <config:config-item config:name="ViewAreaWidth" config:type="long">33413</config:config-item>
   <config:config-item config:name="ViewAreaHeight" config:type="long">15162</config:config-item>
   <config:config-item config:name="ShowRedlineChanges" config:type="boolean">true</config:config-item>
   <config:config-item config:name="InBrowseMode" config:type="boolean">false</config:config-item>
   <config:config-item-map-indexed config:name="Views">
    <config:config-item-map-entry>
     <config:config-item config:name="ViewId" config:type="string">view2</config:config-item>
     <config:config-item config:name="ViewLeft" config:type="long">16095</config:config-item>
     <config:config-item config:name="ViewTop" config:type="long">7869</config:config-item>
     <config:config-item config:name="VisibleLeft" config:type="long">0</config:config-item>
     <config:config-item config:name="VisibleTop" config:type="long">7895</config:config-item>
     <config:config-item config:name="VisibleRight" config:type="long">33412</config:config-item>
     <config:config-item config:name="VisibleBottom" config:type="long">23056</config:config-item>
     <config:config-item config:name="ZoomType" config:type="short">0</config:config-item>
     <config:config-item config:name="ViewLayoutColumns" config:type="short">1</config:config-item>
     <config:config-item config:name="ViewLayoutBookMode" config:type="boolean">false</config:config-item>
     <config:config-item config:name="ZoomFactor" config:type="short">140</config:config-item>
     <config:config-item config:name="IsSelectedFrame" config:type="boolean">false</config:config-item>
     <config:config-item config:name="AnchoredTextOverflowLegacy" config:type="boolean">true</config:config-item>
    </config:config-item-map-entry>
   </config:config-item-map-indexed>
  </config:config-item-set>
  <config:config-item-set config:name="ooo:configuration-settings">
   <config:config-item config:name="PrintPaperFromSetup" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintFaxName" config:type="string"/>
   <config:config-item config:name="PrintSingleJobs" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintProspectRTL" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintProspect" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintReversed" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintTextPlaceholder" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintTables" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintPageBackground" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintLeftPages" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintAnnotationMode" config:type="short">0</config:config-item>
   <config:config-item config:name="PrintControls" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintHiddenText" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintDrawings" config:type="boolean">true</config:config-item>
   <config:config-item config:name="IgnoreFirstLineIndentInNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrinterSetup" config:type="base64Binary"/>
   <config:config-item config:name="CollapseEmptyCellPara" config:type="boolean">true</config:config-item>
   <config:config-item config:name="UseOldPrinterMetrics" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UseOldNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddExternalLeading" config:type="boolean">true</config:config-item>
   <config:config-item config:name="TreatSingleColumnBreakAsPageBreak" config:type="boolean">false</config:config-item>
   <config:config-item config:name="IsLabelDocument" config:type="boolean">false</config:config-item>
   <config:config-item config:name="RsidRoot" config:type="int">1031266</config:config-item>
   <config:config-item config:name="ConsiderTextWrapOnObjPos" config:type="boolean">false</config:config-item>
   <config:config-item config:name="TableRowKeep" config:type="boolean">false</config:config-item>
   <config:config-item config:name="TabsRelativeToIndent" config:type="boolean">true</config:config-item>
   <config:config-item config:name="UpdateFromTemplate" config:type="boolean">true</config:config-item>
   <config:config-item config:name="SaveVersionOnClose" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UseFormerTextWrapping" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ChartAutoUpdate" config:type="boolean">true</config:config-item>
   <config:config-item config:name="AllowPrintJobCancel" config:type="boolean">true</config:config-item>
   <config:config-item config:name="AddParaTableSpacing" config:type="boolean">true</config:config-item>
   <config:config-item config:name="AddParaSpacingToTableCells" config:type="boolean">true</config:config-item>
   <config:config-item config:name="UseFormerLineSpacing" config:type="boolean">false</config:config-item>
   <config:config-item config:name="OutlineLevelYieldsNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AlignTabStopPosition" config:type="boolean">true</config:config-item>
   <config:config-item config:name="DoNotJustifyLinesWithManualBreak" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedOnlyUsedFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="LinkUpdateMode" config:type="short">1</config:config-item>
   <config:config-item config:name="CurrentDatabaseCommandType" config:type="int">0</config:config-item>
   <config:config-item config:name="CurrentDatabaseCommand" config:type="string"/>
   <config:config-item config:name="CharacterCompressionType" config:type="short">0</config:config-item>
   <config:config-item config:name="SmallCapsPercentage66" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ApplyUserData" config:type="boolean">false</config:config-item>
   <config:config-item config:name="StylesNoDefault" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbeddedDatabaseName" config:type="string"/>
   <config:config-item config:name="FloattableNomargins" config:type="boolean">false</config:config-item>
   <config:config-item config:name="BackgroundParaOverDrawings" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrinterName" config:type="string"/>
   <config:config-item config:name="UseFormerObjectPositioning" config:type="boolean">false</config:config-item>
   <config:config-item config:name="TabOverMargin" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SaveGlobalDocumentLinks" config:type="boolean">false</config:config-item>
   <config:config-item config:name="CurrentDatabaseDataSource" config:type="string"/>
   <config:config-item config:name="IsKernAsianPunctuation" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SaveThumbnail" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrinterPaperFromSetup" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrinterIndependentLayout" config:type="string">high-resolution</config:config-item>
   <config:config-item config:name="TabOverflow" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintGraphics" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PropLineSpacingShrinksFirstLine" config:type="boolean">true</config:config-item>
   <config:config-item config:name="DoNotResetParaAttrsForNumFont" config:type="boolean">false</config:config-item>
   <config:config-item config:name="FieldAutoUpdate" config:type="boolean">true</config:config-item>
   <config:config-item config:name="IgnoreTabsAndBlanksForLineCalculation" config:type="boolean">false</config:config-item>
   <config:config-item config:name="RedlineProtectionKey" config:type="base64Binary"/>
   <config:config-item config:name="EmbedComplexScriptFonts" config:type="boolean">true</config:config-item>
   <config:config-item config:name="LoadReadonly" config:type="boolean">false</config:config-item>
   <config:config-item config:name="DoNotCaptureDrawObjsOnPage" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ClipAsCharacterAnchoredWriterFlyFrames" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintBlackFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="DisableOffPagePositioning" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SurroundTextWrapSmall" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UnxForceZeroExtLeading" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedAsianScriptFonts" config:type="boolean">true</config:config-item>
   <config:config-item config:name="TabAtLeftIndentForParagraphsInList" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintRightPages" config:type="boolean">true</config:config-item>
   <config:config-item config:name="Rsid" config:type="int">1168269</config:config-item>
   <config:config-item config:name="MathBaselineAlignment" config:type="boolean">true</config:config-item>
   <config:config-item config:name="MsWordCompTrailingBlanks" config:type="boolean">false</config:config-item>
   <config:config-item config:name="InvertBorderSpacing" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UnbreakableNumberings" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddFrameOffsets" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ClippedPictures" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedLatinScriptFonts" config:type="boolean">true</config:config-item>
   <config:config-item config:name="EmbedSystemFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddParaTableSpacingAtStart" config:type="boolean">true</config:config-item>
   <config:config-item config:name="ContinuousEndnotes" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ApplyParagraphMarkFormatToNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SubtractFlysAnchoredAtFlys" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmptyDbFieldHidesPara" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ProtectForm" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddVerticalFrameOffsets" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintEmptyPages" config:type="boolean">false</config:config-item>
  </config:config-item-set>
 </office:settings>
 <office:scripts>
  <office:script script:language="ooo:Basic">
   <ooo:libraries xmlns:ooo="http://openoffice.org/2004/office" xmlns:xlink="http://www.w3.org/1999/xlink">
    <ooo:library-embedded ooo:name="Standard"/>
   </ooo:libraries>
  </office:script>
 </office:scripts>
 <office:font-face-decls>
  <style:font-face style:name="FreeSans1" svg:font-family="FreeSans" style:font-family-generic="swiss"/>
  <style:font-face style:name="Liberation Serif" svg:font-family="&apos;Liberation Serif&apos;" style:font-family-generic="roman" style:font-pitch="variable"/>
  <style:font-face style:name="Times New Roman" svg:font-family="&apos;Times New Roman&apos;" style:font-adornments="Normale" style:font-family-generic="roman" style:font-pitch="variable"/>
  <style:font-face style:name="Liberation Sans" svg:font-family="&apos;Liberation Sans&apos;" style:font-family-generic="swiss" style:font-pitch="variable"/>
  <style:font-face style:name="FreeSans" svg:font-family="FreeSans" style:font-family-generic="system" style:font-pitch="variable"/>
  <style:font-face style:name="Noto Sans CJK SC Regular" svg:font-family="&apos;Noto Sans CJK SC Regular&apos;" style:font-family-generic="system" style:font-pitch="variable"/>
 </office:font-face-decls>
 <office:styles>
  <style:default-style style:family="graphic">
   <style:graphic-properties svg:stroke-color="#3465a4" draw:fill-color="#729fcf" fo:wrap-option="no-wrap" draw:shadow-offset-x="0.3cm" draw:shadow-offset-y="0.3cm" draw:start-line-spacing-horizontal="0.283cm" draw:start-line-spacing-vertical="0.283cm" draw:end-line-spacing-horizontal="0.283cm" draw:end-line-spacing-vertical="0.283cm" style:flow-with-text="false"/>
   <style:paragraph-properties style:text-autospace="ideograph-alpha" style:line-break="strict" style:font-independent-line-spacing="false">
    <style:tab-stops/>
   </style:paragraph-properties>
   <style:text-properties style:use-window-font-color="true" style:font-name="Liberation Serif" fo:font-size="12pt" fo:language="en" fo:country="US" style:letter-kerning="true" style:font-name-asian="Noto Sans CJK SC Regular" style:font-size-asian="10.5pt" style:language-asian="zh" style:country-asian="CN" style:font-name-complex="FreeSans" style:font-size-complex="12pt" style:language-complex="hi" style:country-complex="IN"/>
  </style:default-style>
  <style:default-style style:family="paragraph">
   <style:paragraph-properties fo:orphans="2" fo:widows="2" fo:hyphenation-ladder-count="no-limit" style:text-autospace="ideograph-alpha" style:punctuation-wrap="hanging" style:line-break="strict" style:tab-stop-distance="1.251cm" style:writing-mode="page"/>
   <style:text-properties style:use-window-font-color="true" style:font-name="Liberation Serif" fo:font-size="12pt" fo:language="en" fo:country="US" style:letter-kerning="true" style:font-name-asian="Noto Sans CJK SC Regular" style:font-size-asian="10.5pt" style:language-asian="zh" style:country-asian="CN" style:font-name-complex="FreeSans" style:font-size-complex="12pt" style:language-complex="hi" style:country-complex="IN" fo:hyphenate="false" fo:hyphenation-remain-char-count="2" fo:hyphenation-push-char-count="2" loext:hyphenation-no-caps="false"/>
  </style:default-style>
  <style:default-style style:family="table">
   <style:table-properties table:border-model="collapsing"/>
  </style:default-style>
  <style:default-style style:family="table-row">
   <style:table-row-properties fo:keep-together="auto"/>
  </style:default-style>
  <style:style style:name="Standard" style:family="paragraph" style:class="text">
   <style:paragraph-properties fo:line-height="${e.textFont.spacing}" style:page-number="auto"/>
   <style:text-properties style:font-name="${e.textFont.family}" fo:font-family="&apos;${e.textFont.family}&apos;" style:font-style-name="Normale" style:font-family-generic="roman" style:font-pitch="variable" fo:language="zxx" fo:country="none" fo:font-size="${e.textFont.size}" />
  </style:style>
  <style:style style:name="Heading" style:family="paragraph" style:parent-style-name="Standard" style:next-style-name="Text_20_body" style:class="text">
   <style:text-properties style:font-name="Liberation Sans" fo:font-family="&apos;Liberation Sans&apos;" style:font-family-generic="swiss" style:font-pitch="variable" fo:font-size="14pt" style:font-name-asian="Noto Sans CJK SC Regular" style:font-family-asian="&apos;Noto Sans CJK SC Regular&apos;" style:font-family-generic-asian="system" style:font-pitch-asian="variable" style:font-size-asian="14pt" style:font-name-complex="FreeSans" style:font-family-complex="FreeSans" style:font-family-generic-complex="system" style:font-pitch-complex="variable" style:font-size-complex="14pt"/>
  </style:style>
  <style:style style:name="Heading_3" style:family="paragraph" style:display-name="Heading 3" style:parent-style-name="Heading" style:next-style-name="Standard" style:default-outline-level="3" style:class="text">
    <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
    <style:text-properties fo:font-weight="bold" style:font-weight-asian="bold" style:font-weight-complex="bold"/>
    <style:paragraph-properties fo:line-height="${e.titleFont.spacing}" style:page-number="auto"/>
    <style:text-properties style:font-name="${e.titleFont.family}" fo:font-family="&apos;${e.titleFont.family}&apos;" style:font-style-name="Normale" style:font-family-generic="roman" fo:font-size="${e.titleFont.size}" style:font-pitch="variable" fo:language="zxx" fo:country="none"/>
  </style:style>
  <style:style style:name="Text_20_body" style:display-name="Text body" style:family="paragraph" style:parent-style-name="Standard" style:class="text">
   <style:paragraph-properties fo:margin-top="0cm" fo:margin-bottom="0.247cm" loext:contextual-spacing="false" fo:line-height="120%"/>
  </style:style>
  <style:style style:name="List" style:family="paragraph" style:parent-style-name="Text_20_body" style:class="list">
   <style:text-properties style:font-size-asian="12pt" style:font-name-complex="FreeSans1" style:font-family-complex="FreeSans" style:font-family-generic-complex="swiss"/>
  </style:style>
  <style:style style:name="Caption" style:family="paragraph" style:parent-style-name="Standard" style:class="extra">
   <style:paragraph-properties fo:margin-top="0.212cm" fo:margin-bottom="0.212cm" loext:contextual-spacing="false" text:number-lines="false" text:line-number="0"/>
   <style:text-properties fo:font-size="12pt" fo:font-style="italic" style:font-size-asian="12pt" style:font-style-asian="italic" style:font-name-complex="FreeSans1" style:font-family-complex="FreeSans" style:font-family-generic-complex="swiss" style:font-size-complex="12pt" style:font-style-complex="italic"/>
  </style:style>
  <style:style style:name="Index" style:family="paragraph" style:parent-style-name="Standard" style:class="index">
   <style:paragraph-properties text:number-lines="false" text:line-number="0"/>
   <style:text-properties style:font-size-asian="12pt" style:font-name-complex="FreeSans1" style:font-family-complex="FreeSans" style:font-family-generic-complex="swiss"/>
  </style:style>
  <style:style style:name="Internet_20_link" style:display-name="Internet link" style:family="text">
   <style:text-properties fo:color="#000080" fo:language="zxx" fo:country="none" style:language-asian="zxx" style:country-asian="none" style:language-complex="zxx" style:country-complex="none"/>
  </style:style>
  <style:style style:name="Visited_20_Internet_20_Link" style:display-name="Visited Internet Link" style:family="text">
   <style:text-properties fo:color="#800000" fo:language="zxx" fo:country="none" style:language-asian="zxx" style:country-asian="none" style:language-complex="zxx" style:country-complex="none"/>
  </style:style>
  <text:outline-style style:name="Outline">
   <text:outline-level-style text:level="1" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="2" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="3" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="4" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="5" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="6" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="7" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="8" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="9" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="10" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
  </text:outline-style>
  <text:notes-configuration text:note-class="footnote" style:num-format="1" text:start-value="0" text:footnotes-position="page" text:start-numbering-at="document"/>
  <text:notes-configuration text:note-class="endnote" style:num-format="i" text:start-value="0"/>
  <text:linenumbering-configuration text:number-lines="false" text:offset="0.499cm" style:num-format="1" text:number-position="left" text:increment="5"/>
 </office:styles>
 <office:automatic-styles>${tM}
  <style:page-layout style:name="pm1">
   <style:page-layout-properties fo:page-width="${e.page.width}cm" fo:page-height="${e.page.height}cm" style:num-format="1" style:print-orientation="portrait" fo:margin-top="${e.page.margins[0]}cm" fo:margin-bottom="${e.page.margins[2]}cm" fo:margin-left="${e.page.margins[3]}cm" fo:margin-right="${e.page.margins[1]}cm" style:writing-mode="lr-tb" style:layout-grid-color="#c0c0c0" style:layout-grid-lines="20" style:layout-grid-base-height="0.706cm" style:layout-grid-ruby-height="0.353cm" style:layout-grid-mode="none" style:layout-grid-ruby-below="false" style:layout-grid-print="false" style:layout-grid-display="false" style:footnote-max-height="0cm">
    <style:footnote-sep style:width="0.018cm" style:distance-before-sep="0.101cm" style:distance-after-sep="0.101cm" style:line-style="solid" style:adjustment="left" style:rel-width="25%" style:color="#000000"/>
   </style:page-layout-properties>
   <style:header-style/>
   <style:footer-style/>
  </style:page-layout>
 </office:automatic-styles>
 <office:master-styles>
  <style:master-page style:name="Standard" style:page-layout-name="pm1"/>
 </office:master-styles>
 <office:body>
  <office:text text:use-soft-page-breaks="true">
   <office:forms form:automatic-focus="false" form:apply-design-mode="false"/>
   <text:sequence-decls>
    <text:sequence-decl text:display-outline-level="0" text:name="Illustration"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Table"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Text"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Drawing"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Figure"/>
   </text:sequence-decls>${n}
  </office:text>
 </office:body>
</office:document>`,iM="application/vnd.oasis.opendocument.text",Eu={"<b>":'<text:span text:style-name="bold">',"</b>":"</text:span>","<i>":'<text:span text:style-name="italic">',"</i>":"</text:span>","<u>":'<text:span text:style-name="underline">',"</u>":"</text:span>"},Jk=n=>{let e=[];return n.split("<br>").forEach(t=>{const r=(t.match(/\<text\:span.+?>/g)||[]).length,s=(t.match(/\<\/text\:span\>/g)||[]).length;if(r<s)return"<text:span>".repeat(s-r)+t;if(r>s)return t+"</text:span>".repeat(r-s);e.push(t)}),e.join('</text:p><text:p text:style-name="Standard">')},eS=()=>({html:n=>Eu[n.trim().toLowerCase()]?Eu[n.trim().toLowerCase()]:no(n),paragraph:n=>Jk(n),strong:n=>`<text:span text:style-name="bold">${n}</text:span>`,em:n=>`<text:span text:style-name="italic">${n}</text:span>`}),rM=(n,e,t)=>({html:i=>Eu[i.trim().toLowerCase()]?Eu[i.trim().toLowerCase()]:no(i),paragraph:i=>`<text:p text:style-name="Standard">${Jk(i)}</text:p>`,strong:i=>`<text:span text:style-name="bold">${i}</text:span>`,em:i=>`<text:span text:style-name="italic">${i}</text:span>`,codespan:()=>"",code:()=>"",link:(i,r,s)=>{const o=i.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<text:a xlink:type="simple" xlink:href="#${a}" text:style-name="Internet_20_link" text:visited-style-name="Visited_20_Internet_20_Link">${Ji(e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t}),eS())}</text:a>`}}),sM=(n,e)=>`<text:span text:style-name="bold"><text:bookmark-start text:name="${n}"/>${Ji(e,eS())}<text:bookmark-end text:name="${n}"/></text:span>`,oM=n=>{const e=go(n),t=x0(e.properties),i=t.titleStyle=="inline";let r="";for(const[s,o]of e.chapters){const{text:a}=o,l=t.renameAnchor({key:s,book:e}),c=t.renameTitle({book:e,chapter:o,key:s,title:o.title?o.title.trim():""}),h=sM(l,c),u=Ji(a,rM(e,t,o)).trim()||'<text:p text:style-name="justify"> </text:p>';i?r+=u.replace(">",">"+h+" "):r+=`<text:p text:style-name="Heading_3" text:outline-level="3">${h}</text:p>`+u,r+='<text:p text:style-name="Standard"/>'}return nM(r,t).split(`
`).map(s=>s.trim()).join("")};var aM={encode:oM,mimetype:iM},tS={exports:{}};(function(n,e){(function(t,i){i()})(Mo,function(){function t(c,h){return typeof h=="undefined"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function i(c,h,u){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){l(f.response,h,u)},f.onerror=function(){console.error("could not download file")},f.send()}function r(c){var h=new XMLHttpRequest;h.open("HEAD",c,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(h)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Mo=="object"&&Mo.global===Mo?Mo:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,h,u){var f=o.URL||o.webkitURL,p=document.createElement("a");h=h||c.name||"download",p.download=h,p.rel="noopener",typeof c=="string"?(p.href=c,p.origin===location.origin?s(p):r(p.href)?i(c,h,u):s(p,p.target="_blank")):(p.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(p.href)},4e4),setTimeout(function(){s(p)},0))}:"msSaveOrOpenBlob"in navigator?function(c,h,u){if(h=h||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,u),h);else if(r(c))i(c,h,u);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){s(f)})}}:function(c,h,u,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return i(c,h,u);var p=c.type==="application/octet-stream",d=/constructor/i.test(o.HTMLElement)||o.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&d||a)&&typeof FileReader!="undefined"){var b=new FileReader;b.onloadend=function(){var v=b.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=v:location=v,f=null},b.readAsDataURL(c)}else{var A=o.URL||o.webkitURL,g=A.createObjectURL(c);f?f.location=g:location.href=g,f=null,setTimeout(function(){A.revokeObjectURL(g)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(tS);var lM=tS.exports,nS={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(n,e){(function(t,i){n.exports=i()})(Mo,function(){return(()=>{var t={742:(o,a)=>{a.byteLength=function(b){var A=d(b),g=A[0],v=A[1];return 3*(g+v)/4-v},a.toByteArray=function(b){var A,g,v=d(b),O=v[0],_=v[1],x=new h(function(S,C,B){return 3*(C+B)/4-B}(0,O,_)),E=0,T=_>0?O-4:O;for(g=0;g<T;g+=4)A=c[b.charCodeAt(g)]<<18|c[b.charCodeAt(g+1)]<<12|c[b.charCodeAt(g+2)]<<6|c[b.charCodeAt(g+3)],x[E++]=A>>16&255,x[E++]=A>>8&255,x[E++]=255&A;return _===2&&(A=c[b.charCodeAt(g)]<<2|c[b.charCodeAt(g+1)]>>4,x[E++]=255&A),_===1&&(A=c[b.charCodeAt(g)]<<10|c[b.charCodeAt(g+1)]<<4|c[b.charCodeAt(g+2)]>>2,x[E++]=A>>8&255,x[E++]=255&A),x},a.fromByteArray=function(b){for(var A,g=b.length,v=g%3,O=[],_=16383,x=0,E=g-v;x<E;x+=_)O.push(m(b,x,x+_>E?E:x+_));return v===1?(A=b[g-1],O.push(l[A>>2]+l[A<<4&63]+"==")):v===2&&(A=(b[g-2]<<8)+b[g-1],O.push(l[A>>10]+l[A>>4&63]+l[A<<2&63]+"=")),O.join("")};for(var l=[],c=[],h=typeof Uint8Array!="undefined"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=u.length;f<p;++f)l[f]=u[f],c[u.charCodeAt(f)]=f;function d(b){var A=b.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=b.indexOf("=");return g===-1&&(g=A),[g,g===A?0:4-g%4]}function m(b,A,g){for(var v,O,_=[],x=A;x<g;x+=3)v=(b[x]<<16&16711680)+(b[x+1]<<8&65280)+(255&b[x+2]),_.push(l[(O=v)>>18&63]+l[O>>12&63]+l[O>>6&63]+l[63&O]);return _.join("")}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},764:(o,a,l)=>{const c=l(742),h=l(645),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=d,a.SlowBuffer=function(I){return+I!=I&&(I=0),d.alloc(+I)},a.INSPECT_MAX_BYTES=50;const f=2147483647;function p(I){if(I>f)throw new RangeError('The value "'+I+'" is invalid for option "size"');const L=new Uint8Array(I);return Object.setPrototypeOf(L,d.prototype),L}function d(I,L,z){if(typeof I=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(I)}return m(I,L,z)}function m(I,L,z){if(typeof I=="string")return function(ce,Oe){if(typeof Oe=="string"&&Oe!==""||(Oe="utf8"),!d.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);const ze=0|_(ce,Oe);let Ve=p(ze);const Rt=Ve.write(ce,Oe);return Rt!==ze&&(Ve=Ve.slice(0,Rt)),Ve}(I,L);if(ArrayBuffer.isView(I))return function(ce){if(de(ce,Uint8Array)){const Oe=new Uint8Array(ce);return v(Oe.buffer,Oe.byteOffset,Oe.byteLength)}return g(ce)}(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(de(I,ArrayBuffer)||I&&de(I.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(de(I,SharedArrayBuffer)||I&&de(I.buffer,SharedArrayBuffer)))return v(I,L,z);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const te=I.valueOf&&I.valueOf();if(te!=null&&te!==I)return d.from(te,L,z);const se=function(ce){if(d.isBuffer(ce)){const Oe=0|O(ce.length),ze=p(Oe);return ze.length===0||ce.copy(ze,0,0,Oe),ze}return ce.length!==void 0?typeof ce.length!="number"||pe(ce.length)?p(0):g(ce):ce.type==="Buffer"&&Array.isArray(ce.data)?g(ce.data):void 0}(I);if(se)return se;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return d.from(I[Symbol.toPrimitive]("string"),L,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}function b(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function A(I){return b(I),p(I<0?0:0|O(I))}function g(I){const L=I.length<0?0:0|O(I.length),z=p(L);for(let te=0;te<L;te+=1)z[te]=255&I[te];return z}function v(I,L,z){if(L<0||I.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<L+(z||0))throw new RangeError('"length" is outside of buffer bounds');let te;return te=L===void 0&&z===void 0?new Uint8Array(I):z===void 0?new Uint8Array(I,L):new Uint8Array(I,L,z),Object.setPrototypeOf(te,d.prototype),te}function O(I){if(I>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|I}function _(I,L){if(d.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||de(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const z=I.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&z===0)return 0;let se=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return me(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return oe(I).length;default:if(se)return te?-1:me(I).length;L=(""+L).toLowerCase(),se=!0}}function x(I,L,z){let te=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0)<=(L>>>=0))return"";for(I||(I="utf8");;)switch(I){case"hex":return J(this,L,z);case"utf8":case"utf-8":return X(this,L,z);case"ascii":return K(this,L,z);case"latin1":case"binary":return ee(this,L,z);case"base64":return P(this,L,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,L,z);default:if(te)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),te=!0}}function E(I,L,z){const te=I[L];I[L]=I[z],I[z]=te}function T(I,L,z,te,se){if(I.length===0)return-1;if(typeof z=="string"?(te=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),pe(z=+z)&&(z=se?0:I.length-1),z<0&&(z=I.length+z),z>=I.length){if(se)return-1;z=I.length-1}else if(z<0){if(!se)return-1;z=0}if(typeof L=="string"&&(L=d.from(L,te)),d.isBuffer(L))return L.length===0?-1:S(I,L,z,te,se);if(typeof L=="number")return L&=255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(I,L,z):Uint8Array.prototype.lastIndexOf.call(I,L,z):S(I,[L],z,te,se);throw new TypeError("val must be string, number or Buffer")}function S(I,L,z,te,se){let ce,Oe=1,ze=I.length,Ve=L.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(I.length<2||L.length<2)return-1;Oe=2,ze/=2,Ve/=2,z/=2}function Rt(ot,Et){return Oe===1?ot[Et]:ot.readUInt16BE(Et*Oe)}if(se){let ot=-1;for(ce=z;ce<ze;ce++)if(Rt(I,ce)===Rt(L,ot===-1?0:ce-ot)){if(ot===-1&&(ot=ce),ce-ot+1===Ve)return ot*Oe}else ot!==-1&&(ce-=ce-ot),ot=-1}else for(z+Ve>ze&&(z=ze-Ve),ce=z;ce>=0;ce--){let ot=!0;for(let Et=0;Et<Ve;Et++)if(Rt(I,ce+Et)!==Rt(L,Et)){ot=!1;break}if(ot)return ce}return-1}function C(I,L,z,te){z=Number(z)||0;const se=I.length-z;te?(te=Number(te))>se&&(te=se):te=se;const ce=L.length;let Oe;for(te>ce/2&&(te=ce/2),Oe=0;Oe<te;++Oe){const ze=parseInt(L.substr(2*Oe,2),16);if(pe(ze))return Oe;I[z+Oe]=ze}return Oe}function B(I,L,z,te){return he(me(L,I.length-z),I,z,te)}function M(I,L,z,te){return he(function(se){const ce=[];for(let Oe=0;Oe<se.length;++Oe)ce.push(255&se.charCodeAt(Oe));return ce}(L),I,z,te)}function D(I,L,z,te){return he(oe(L),I,z,te)}function N(I,L,z,te){return he(function(se,ce){let Oe,ze,Ve;const Rt=[];for(let ot=0;ot<se.length&&!((ce-=2)<0);++ot)Oe=se.charCodeAt(ot),ze=Oe>>8,Ve=Oe%256,Rt.push(Ve),Rt.push(ze);return Rt}(L,I.length-z),I,z,te)}function P(I,L,z){return L===0&&z===I.length?c.fromByteArray(I):c.fromByteArray(I.slice(L,z))}function X(I,L,z){z=Math.min(I.length,z);const te=[];let se=L;for(;se<z;){const ce=I[se];let Oe=null,ze=ce>239?4:ce>223?3:ce>191?2:1;if(se+ze<=z){let Ve,Rt,ot,Et;switch(ze){case 1:ce<128&&(Oe=ce);break;case 2:Ve=I[se+1],(192&Ve)==128&&(Et=(31&ce)<<6|63&Ve,Et>127&&(Oe=Et));break;case 3:Ve=I[se+1],Rt=I[se+2],(192&Ve)==128&&(192&Rt)==128&&(Et=(15&ce)<<12|(63&Ve)<<6|63&Rt,Et>2047&&(Et<55296||Et>57343)&&(Oe=Et));break;case 4:Ve=I[se+1],Rt=I[se+2],ot=I[se+3],(192&Ve)==128&&(192&Rt)==128&&(192&ot)==128&&(Et=(15&ce)<<18|(63&Ve)<<12|(63&Rt)<<6|63&ot,Et>65535&&Et<1114112&&(Oe=Et))}}Oe===null?(Oe=65533,ze=1):Oe>65535&&(Oe-=65536,te.push(Oe>>>10&1023|55296),Oe=56320|1023&Oe),te.push(Oe),se+=ze}return function(ce){const Oe=ce.length;if(Oe<=Z)return String.fromCharCode.apply(String,ce);let ze="",Ve=0;for(;Ve<Oe;)ze+=String.fromCharCode.apply(String,ce.slice(Ve,Ve+=Z));return ze}(te)}a.kMaxLength=f,d.TYPED_ARRAY_SUPPORT=function(){try{const I=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(I,L),I.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(I,L,z){return m(I,L,z)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(I,L,z){return function(te,se,ce){return b(te),te<=0?p(te):se!==void 0?typeof ce=="string"?p(te).fill(se,ce):p(te).fill(se):p(te)}(I,L,z)},d.allocUnsafe=function(I){return A(I)},d.allocUnsafeSlow=function(I){return A(I)},d.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==d.prototype},d.compare=function(I,L){if(de(I,Uint8Array)&&(I=d.from(I,I.offset,I.byteLength)),de(L,Uint8Array)&&(L=d.from(L,L.offset,L.byteLength)),!d.isBuffer(I)||!d.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===L)return 0;let z=I.length,te=L.length;for(let se=0,ce=Math.min(z,te);se<ce;++se)if(I[se]!==L[se]){z=I[se],te=L[se];break}return z<te?-1:te<z?1:0},d.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(I,L){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return d.alloc(0);let z;if(L===void 0)for(L=0,z=0;z<I.length;++z)L+=I[z].length;const te=d.allocUnsafe(L);let se=0;for(z=0;z<I.length;++z){let ce=I[z];if(de(ce,Uint8Array))se+ce.length>te.length?(d.isBuffer(ce)||(ce=d.from(ce)),ce.copy(te,se)):Uint8Array.prototype.set.call(te,ce,se);else{if(!d.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(te,se)}se+=ce.length}return te},d.byteLength=_,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let L=0;L<I;L+=2)E(this,L,L+1);return this},d.prototype.swap32=function(){const I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let L=0;L<I;L+=4)E(this,L,L+3),E(this,L+1,L+2);return this},d.prototype.swap64=function(){const I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let L=0;L<I;L+=8)E(this,L,L+7),E(this,L+1,L+6),E(this,L+2,L+5),E(this,L+3,L+4);return this},d.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?X(this,0,I):x.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(I){if(!d.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I||d.compare(this,I)===0},d.prototype.inspect=function(){let I="";const L=a.INSPECT_MAX_BYTES;return I=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(I+=" ... "),"<Buffer "+I+">"},u&&(d.prototype[u]=d.prototype.inspect),d.prototype.compare=function(I,L,z,te,se){if(de(I,Uint8Array)&&(I=d.from(I,I.offset,I.byteLength)),!d.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(L===void 0&&(L=0),z===void 0&&(z=I?I.length:0),te===void 0&&(te=0),se===void 0&&(se=this.length),L<0||z>I.length||te<0||se>this.length)throw new RangeError("out of range index");if(te>=se&&L>=z)return 0;if(te>=se)return-1;if(L>=z)return 1;if(this===I)return 0;let ce=(se>>>=0)-(te>>>=0),Oe=(z>>>=0)-(L>>>=0);const ze=Math.min(ce,Oe),Ve=this.slice(te,se),Rt=I.slice(L,z);for(let ot=0;ot<ze;++ot)if(Ve[ot]!==Rt[ot]){ce=Ve[ot],Oe=Rt[ot];break}return ce<Oe?-1:Oe<ce?1:0},d.prototype.includes=function(I,L,z){return this.indexOf(I,L,z)!==-1},d.prototype.indexOf=function(I,L,z){return T(this,I,L,z,!0)},d.prototype.lastIndexOf=function(I,L,z){return T(this,I,L,z,!1)},d.prototype.write=function(I,L,z,te){if(L===void 0)te="utf8",z=this.length,L=0;else if(z===void 0&&typeof L=="string")te=L,z=this.length,L=0;else{if(!isFinite(L))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");L>>>=0,isFinite(z)?(z>>>=0,te===void 0&&(te="utf8")):(te=z,z=void 0)}const se=this.length-L;if((z===void 0||z>se)&&(z=se),I.length>0&&(z<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let ce=!1;for(;;)switch(te){case"hex":return C(this,I,L,z);case"utf8":case"utf-8":return B(this,I,L,z);case"ascii":case"latin1":case"binary":return M(this,I,L,z);case"base64":return D(this,I,L,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,I,L,z);default:if(ce)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ce=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Z=4096;function K(I,L,z){let te="";z=Math.min(I.length,z);for(let se=L;se<z;++se)te+=String.fromCharCode(127&I[se]);return te}function ee(I,L,z){let te="";z=Math.min(I.length,z);for(let se=L;se<z;++se)te+=String.fromCharCode(I[se]);return te}function J(I,L,z){const te=I.length;(!L||L<0)&&(L=0),(!z||z<0||z>te)&&(z=te);let se="";for(let ce=L;ce<z;++ce)se+=xe[I[ce]];return se}function ge(I,L,z){const te=I.slice(L,z);let se="";for(let ce=0;ce<te.length-1;ce+=2)se+=String.fromCharCode(te[ce]+256*te[ce+1]);return se}function k(I,L,z){if(I%1!=0||I<0)throw new RangeError("offset is not uint");if(I+L>z)throw new RangeError("Trying to access beyond buffer length")}function j(I,L,z,te,se,ce){if(!d.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>se||L<ce)throw new RangeError('"value" argument is out of bounds');if(z+te>I.length)throw new RangeError("Index out of range")}function V(I,L,z,te,se){R(L,te,se,I,z,7);let ce=Number(L&BigInt(4294967295));I[z++]=ce,ce>>=8,I[z++]=ce,ce>>=8,I[z++]=ce,ce>>=8,I[z++]=ce;let Oe=Number(L>>BigInt(32)&BigInt(4294967295));return I[z++]=Oe,Oe>>=8,I[z++]=Oe,Oe>>=8,I[z++]=Oe,Oe>>=8,I[z++]=Oe,z}function H(I,L,z,te,se){R(L,te,se,I,z,7);let ce=Number(L&BigInt(4294967295));I[z+7]=ce,ce>>=8,I[z+6]=ce,ce>>=8,I[z+5]=ce,ce>>=8,I[z+4]=ce;let Oe=Number(L>>BigInt(32)&BigInt(4294967295));return I[z+3]=Oe,Oe>>=8,I[z+2]=Oe,Oe>>=8,I[z+1]=Oe,Oe>>=8,I[z]=Oe,z+8}function q(I,L,z,te,se,ce){if(z+te>I.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function le(I,L,z,te,se){return L=+L,z>>>=0,se||q(I,0,z,4),h.write(I,L,z,te,23,4),z+4}function be(I,L,z,te,se){return L=+L,z>>>=0,se||q(I,0,z,8),h.write(I,L,z,te,52,8),z+8}d.prototype.slice=function(I,L){const z=this.length;(I=~~I)<0?(I+=z)<0&&(I=0):I>z&&(I=z),(L=L===void 0?z:~~L)<0?(L+=z)<0&&(L=0):L>z&&(L=z),L<I&&(L=I);const te=this.subarray(I,L);return Object.setPrototypeOf(te,d.prototype),te},d.prototype.readUintLE=d.prototype.readUIntLE=function(I,L,z){I>>>=0,L>>>=0,z||k(I,L,this.length);let te=this[I],se=1,ce=0;for(;++ce<L&&(se*=256);)te+=this[I+ce]*se;return te},d.prototype.readUintBE=d.prototype.readUIntBE=function(I,L,z){I>>>=0,L>>>=0,z||k(I,L,this.length);let te=this[I+--L],se=1;for(;L>0&&(se*=256);)te+=this[I+--L]*se;return te},d.prototype.readUint8=d.prototype.readUInt8=function(I,L){return I>>>=0,L||k(I,1,this.length),this[I]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(I,L){return I>>>=0,L||k(I,2,this.length),this[I]|this[I+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(I,L){return I>>>=0,L||k(I,2,this.length),this[I]<<8|this[I+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(I,L){return I>>>=0,L||k(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(I,L){return I>>>=0,L||k(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},d.prototype.readBigUInt64LE=Fe(function(I){Q(I>>>=0,"offset");const L=this[I],z=this[I+7];L!==void 0&&z!==void 0||F(I,this.length-8);const te=L+256*this[++I]+65536*this[++I]+this[++I]*2**24,se=this[++I]+256*this[++I]+65536*this[++I]+z*2**24;return BigInt(te)+(BigInt(se)<<BigInt(32))}),d.prototype.readBigUInt64BE=Fe(function(I){Q(I>>>=0,"offset");const L=this[I],z=this[I+7];L!==void 0&&z!==void 0||F(I,this.length-8);const te=L*2**24+65536*this[++I]+256*this[++I]+this[++I],se=this[++I]*2**24+65536*this[++I]+256*this[++I]+z;return(BigInt(te)<<BigInt(32))+BigInt(se)}),d.prototype.readIntLE=function(I,L,z){I>>>=0,L>>>=0,z||k(I,L,this.length);let te=this[I],se=1,ce=0;for(;++ce<L&&(se*=256);)te+=this[I+ce]*se;return se*=128,te>=se&&(te-=Math.pow(2,8*L)),te},d.prototype.readIntBE=function(I,L,z){I>>>=0,L>>>=0,z||k(I,L,this.length);let te=L,se=1,ce=this[I+--te];for(;te>0&&(se*=256);)ce+=this[I+--te]*se;return se*=128,ce>=se&&(ce-=Math.pow(2,8*L)),ce},d.prototype.readInt8=function(I,L){return I>>>=0,L||k(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},d.prototype.readInt16LE=function(I,L){I>>>=0,L||k(I,2,this.length);const z=this[I]|this[I+1]<<8;return 32768&z?4294901760|z:z},d.prototype.readInt16BE=function(I,L){I>>>=0,L||k(I,2,this.length);const z=this[I+1]|this[I]<<8;return 32768&z?4294901760|z:z},d.prototype.readInt32LE=function(I,L){return I>>>=0,L||k(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},d.prototype.readInt32BE=function(I,L){return I>>>=0,L||k(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},d.prototype.readBigInt64LE=Fe(function(I){Q(I>>>=0,"offset");const L=this[I],z=this[I+7];L!==void 0&&z!==void 0||F(I,this.length-8);const te=this[I+4]+256*this[I+5]+65536*this[I+6]+(z<<24);return(BigInt(te)<<BigInt(32))+BigInt(L+256*this[++I]+65536*this[++I]+this[++I]*16777216)}),d.prototype.readBigInt64BE=Fe(function(I){Q(I>>>=0,"offset");const L=this[I],z=this[I+7];L!==void 0&&z!==void 0||F(I,this.length-8);const te=(L<<24)+65536*this[++I]+256*this[++I]+this[++I];return(BigInt(te)<<BigInt(32))+BigInt(this[++I]*16777216+65536*this[++I]+256*this[++I]+z)}),d.prototype.readFloatLE=function(I,L){return I>>>=0,L||k(I,4,this.length),h.read(this,I,!0,23,4)},d.prototype.readFloatBE=function(I,L){return I>>>=0,L||k(I,4,this.length),h.read(this,I,!1,23,4)},d.prototype.readDoubleLE=function(I,L){return I>>>=0,L||k(I,8,this.length),h.read(this,I,!0,52,8)},d.prototype.readDoubleBE=function(I,L){return I>>>=0,L||k(I,8,this.length),h.read(this,I,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(I,L,z,te){I=+I,L>>>=0,z>>>=0,te||j(this,I,L,z,Math.pow(2,8*z)-1,0);let se=1,ce=0;for(this[L]=255&I;++ce<z&&(se*=256);)this[L+ce]=I/se&255;return L+z},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(I,L,z,te){I=+I,L>>>=0,z>>>=0,te||j(this,I,L,z,Math.pow(2,8*z)-1,0);let se=z-1,ce=1;for(this[L+se]=255&I;--se>=0&&(ce*=256);)this[L+se]=I/ce&255;return L+z},d.prototype.writeUint8=d.prototype.writeUInt8=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,1,255,0),this[L]=255&I,L+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,2,65535,0),this[L]=255&I,this[L+1]=I>>>8,L+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,2,65535,0),this[L]=I>>>8,this[L+1]=255&I,L+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,4,4294967295,0),this[L+3]=I>>>24,this[L+2]=I>>>16,this[L+1]=I>>>8,this[L]=255&I,L+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,4,4294967295,0),this[L]=I>>>24,this[L+1]=I>>>16,this[L+2]=I>>>8,this[L+3]=255&I,L+4},d.prototype.writeBigUInt64LE=Fe(function(I,L=0){return V(this,I,L,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Fe(function(I,L=0){return H(this,I,L,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(I,L,z,te){if(I=+I,L>>>=0,!te){const ze=Math.pow(2,8*z-1);j(this,I,L,z,ze-1,-ze)}let se=0,ce=1,Oe=0;for(this[L]=255&I;++se<z&&(ce*=256);)I<0&&Oe===0&&this[L+se-1]!==0&&(Oe=1),this[L+se]=(I/ce>>0)-Oe&255;return L+z},d.prototype.writeIntBE=function(I,L,z,te){if(I=+I,L>>>=0,!te){const ze=Math.pow(2,8*z-1);j(this,I,L,z,ze-1,-ze)}let se=z-1,ce=1,Oe=0;for(this[L+se]=255&I;--se>=0&&(ce*=256);)I<0&&Oe===0&&this[L+se+1]!==0&&(Oe=1),this[L+se]=(I/ce>>0)-Oe&255;return L+z},d.prototype.writeInt8=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,1,127,-128),I<0&&(I=255+I+1),this[L]=255&I,L+1},d.prototype.writeInt16LE=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,2,32767,-32768),this[L]=255&I,this[L+1]=I>>>8,L+2},d.prototype.writeInt16BE=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,2,32767,-32768),this[L]=I>>>8,this[L+1]=255&I,L+2},d.prototype.writeInt32LE=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,4,2147483647,-2147483648),this[L]=255&I,this[L+1]=I>>>8,this[L+2]=I>>>16,this[L+3]=I>>>24,L+4},d.prototype.writeInt32BE=function(I,L,z){return I=+I,L>>>=0,z||j(this,I,L,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[L]=I>>>24,this[L+1]=I>>>16,this[L+2]=I>>>8,this[L+3]=255&I,L+4},d.prototype.writeBigInt64LE=Fe(function(I,L=0){return V(this,I,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Fe(function(I,L=0){return H(this,I,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(I,L,z){return le(this,I,L,!0,z)},d.prototype.writeFloatBE=function(I,L,z){return le(this,I,L,!1,z)},d.prototype.writeDoubleLE=function(I,L,z){return be(this,I,L,!0,z)},d.prototype.writeDoubleBE=function(I,L,z){return be(this,I,L,!1,z)},d.prototype.copy=function(I,L,z,te){if(!d.isBuffer(I))throw new TypeError("argument should be a Buffer");if(z||(z=0),te||te===0||(te=this.length),L>=I.length&&(L=I.length),L||(L=0),te>0&&te<z&&(te=z),te===z||I.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),I.length-L<te-z&&(te=I.length-L+z);const se=te-z;return this===I&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(L,z,te):Uint8Array.prototype.set.call(I,this.subarray(z,te),L),se},d.prototype.fill=function(I,L,z,te){if(typeof I=="string"){if(typeof L=="string"?(te=L,L=0,z=this.length):typeof z=="string"&&(te=z,z=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!d.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(I.length===1){const ce=I.charCodeAt(0);(te==="utf8"&&ce<128||te==="latin1")&&(I=ce)}}else typeof I=="number"?I&=255:typeof I=="boolean"&&(I=Number(I));if(L<0||this.length<L||this.length<z)throw new RangeError("Out of range index");if(z<=L)return this;let se;if(L>>>=0,z=z===void 0?this.length:z>>>0,I||(I=0),typeof I=="number")for(se=L;se<z;++se)this[se]=I;else{const ce=d.isBuffer(I)?I:d.from(I,te),Oe=ce.length;if(Oe===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(se=0;se<z-L;++se)this[se+L]=ce[se%Oe]}return this};const ae={};function ue(I,L,z){ae[I]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${I}]`,this.stack,delete this.name}get code(){return I}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${I}]: ${this.message}`}}}function U(I){let L="",z=I.length;const te=I[0]==="-"?1:0;for(;z>=te+4;z-=3)L=`_${I.slice(z-3,z)}${L}`;return`${I.slice(0,z)}${L}`}function R(I,L,z,te,se,ce){if(I>z||I<L){const Oe=typeof L=="bigint"?"n":"";let ze;throw ze=ce>3?L===0||L===BigInt(0)?`>= 0${Oe} and < 2${Oe} ** ${8*(ce+1)}${Oe}`:`>= -(2${Oe} ** ${8*(ce+1)-1}${Oe}) and < 2 ** ${8*(ce+1)-1}${Oe}`:`>= ${L}${Oe} and <= ${z}${Oe}`,new ae.ERR_OUT_OF_RANGE("value",ze,I)}(function(Oe,ze,Ve){Q(ze,"offset"),Oe[ze]!==void 0&&Oe[ze+Ve]!==void 0||F(ze,Oe.length-(Ve+1))})(te,se,ce)}function Q(I,L){if(typeof I!="number")throw new ae.ERR_INVALID_ARG_TYPE(L,"number",I)}function F(I,L,z){throw Math.floor(I)!==I?(Q(I,z),new ae.ERR_OUT_OF_RANGE(z||"offset","an integer",I)):L<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${L}`,I)}ue("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ue("ERR_INVALID_ARG_TYPE",function(I,L){return`The "${I}" argument must be of type number. Received type ${typeof L}`},TypeError),ue("ERR_OUT_OF_RANGE",function(I,L,z){let te=`The value of "${I}" is out of range.`,se=z;return Number.isInteger(z)&&Math.abs(z)>4294967296?se=U(String(z)):typeof z=="bigint"&&(se=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(se=U(se)),se+="n"),te+=` It must be ${L}. Received ${se}`,te},RangeError);const re=/[^+/0-9A-Za-z-_]/g;function me(I,L){let z;L=L||1/0;const te=I.length;let se=null;const ce=[];for(let Oe=0;Oe<te;++Oe){if(z=I.charCodeAt(Oe),z>55295&&z<57344){if(!se){if(z>56319){(L-=3)>-1&&ce.push(239,191,189);continue}if(Oe+1===te){(L-=3)>-1&&ce.push(239,191,189);continue}se=z;continue}if(z<56320){(L-=3)>-1&&ce.push(239,191,189),se=z;continue}z=65536+(se-55296<<10|z-56320)}else se&&(L-=3)>-1&&ce.push(239,191,189);if(se=null,z<128){if((L-=1)<0)break;ce.push(z)}else if(z<2048){if((L-=2)<0)break;ce.push(z>>6|192,63&z|128)}else if(z<65536){if((L-=3)<0)break;ce.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((L-=4)<0)break;ce.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return ce}function oe(I){return c.toByteArray(function(L){if((L=(L=L.split("=")[0]).trim().replace(re,"")).length<2)return"";for(;L.length%4!=0;)L+="=";return L}(I))}function he(I,L,z,te){let se;for(se=0;se<te&&!(se+z>=L.length||se>=I.length);++se)L[se+z]=I[se];return se}function de(I,L){return I instanceof L||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===L.name}function pe(I){return I!=I}const xe=function(){const I="0123456789abcdef",L=new Array(256);for(let z=0;z<16;++z){const te=16*z;for(let se=0;se<16;++se)L[te+se]=I[z]+I[se]}return L}();function Fe(I){return typeof BigInt=="undefined"?st:I}function st(){throw new Error("BigInt not supported")}},187:o=>{var a,l=typeof Reflect=="object"?Reflect:null,c=l&&typeof l.apply=="function"?l.apply:function(x,E,T){return Function.prototype.apply.call(x,E,T)};a=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:function(x){return Object.getOwnPropertyNames(x)};var h=Number.isNaN||function(x){return x!=x};function u(){u.init.call(this)}o.exports=u,o.exports.once=function(x,E){return new Promise(function(T,S){function C(M){x.removeListener(E,B),S(M)}function B(){typeof x.removeListener=="function"&&x.removeListener("error",C),T([].slice.call(arguments))}_(x,E,B,{once:!0}),E!=="error"&&function(M,D,N){typeof M.on=="function"&&_(M,"error",D,{once:!0})}(x,C)})},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var f=10;function p(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}function d(x){return x._maxListeners===void 0?u.defaultMaxListeners:x._maxListeners}function m(x,E,T,S){var C,B,M,D;if(p(T),(B=x._events)===void 0?(B=x._events=Object.create(null),x._eventsCount=0):(B.newListener!==void 0&&(x.emit("newListener",E,T.listener?T.listener:T),B=x._events),M=B[E]),M===void 0)M=B[E]=T,++x._eventsCount;else if(typeof M=="function"?M=B[E]=S?[T,M]:[M,T]:S?M.unshift(T):M.push(T),(C=d(x))>0&&M.length>C&&!M.warned){M.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");N.name="MaxListenersExceededWarning",N.emitter=x,N.type=E,N.count=M.length,D=N,console&&console.warn&&console.warn(D)}return x}function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function A(x,E,T){var S={fired:!1,wrapFn:void 0,target:x,type:E,listener:T},C=b.bind(S);return C.listener=T,S.wrapFn=C,C}function g(x,E,T){var S=x._events;if(S===void 0)return[];var C=S[E];return C===void 0?[]:typeof C=="function"?T?[C.listener||C]:[C]:T?function(B){for(var M=new Array(B.length),D=0;D<M.length;++D)M[D]=B[D].listener||B[D];return M}(C):O(C,C.length)}function v(x){var E=this._events;if(E!==void 0){var T=E[x];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}function O(x,E){for(var T=new Array(E),S=0;S<E;++S)T[S]=x[S];return T}function _(x,E,T,S){if(typeof x.on=="function")S.once?x.once(E,T):x.on(E,T);else{if(typeof x.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x);x.addEventListener(E,function C(B){S.once&&x.removeEventListener(E,C),T(B)})}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(x){if(typeof x!="number"||x<0||h(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");f=x}}),u.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||h(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this},u.prototype.getMaxListeners=function(){return d(this)},u.prototype.emit=function(x){for(var E=[],T=1;T<arguments.length;T++)E.push(arguments[T]);var S=x==="error",C=this._events;if(C!==void 0)S=S&&C.error===void 0;else if(!S)return!1;if(S){var B;if(E.length>0&&(B=E[0]),B instanceof Error)throw B;var M=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw M.context=B,M}var D=C[x];if(D===void 0)return!1;if(typeof D=="function")c(D,this,E);else{var N=D.length,P=O(D,N);for(T=0;T<N;++T)c(P[T],this,E)}return!0},u.prototype.addListener=function(x,E){return m(this,x,E,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(x,E){return m(this,x,E,!0)},u.prototype.once=function(x,E){return p(E),this.on(x,A(this,x,E)),this},u.prototype.prependOnceListener=function(x,E){return p(E),this.prependListener(x,A(this,x,E)),this},u.prototype.removeListener=function(x,E){var T,S,C,B,M;if(p(E),(S=this._events)===void 0)return this;if((T=S[x])===void 0)return this;if(T===E||T.listener===E)--this._eventsCount==0?this._events=Object.create(null):(delete S[x],S.removeListener&&this.emit("removeListener",x,T.listener||E));else if(typeof T!="function"){for(C=-1,B=T.length-1;B>=0;B--)if(T[B]===E||T[B].listener===E){M=T[B].listener,C=B;break}if(C<0)return this;C===0?T.shift():function(D,N){for(;N+1<D.length;N++)D[N]=D[N+1];D.pop()}(T,C),T.length===1&&(S[x]=T[0]),S.removeListener!==void 0&&this.emit("removeListener",x,M||E)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(x){var E,T,S;if((T=this._events)===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[x]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete T[x]),this;if(arguments.length===0){var C,B=Object.keys(T);for(S=0;S<B.length;++S)(C=B[S])!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(E=T[x])=="function")this.removeListener(x,E);else if(E!==void 0)for(S=E.length-1;S>=0;S--)this.removeListener(x,E[S]);return this},u.prototype.listeners=function(x){return g(this,x,!0)},u.prototype.rawListeners=function(x){return g(this,x,!1)},u.listenerCount=function(x,E){return typeof x.listenerCount=="function"?x.listenerCount(E):v.call(x,E)},u.prototype.listenerCount=v,u.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},645:(o,a)=>{a.read=function(l,c,h,u,f){var p,d,m=8*f-u-1,b=(1<<m)-1,A=b>>1,g=-7,v=h?f-1:0,O=h?-1:1,_=l[c+v];for(v+=O,p=_&(1<<-g)-1,_>>=-g,g+=m;g>0;p=256*p+l[c+v],v+=O,g-=8);for(d=p&(1<<-g)-1,p>>=-g,g+=u;g>0;d=256*d+l[c+v],v+=O,g-=8);if(p===0)p=1-A;else{if(p===b)return d?NaN:1/0*(_?-1:1);d+=Math.pow(2,u),p-=A}return(_?-1:1)*d*Math.pow(2,p-u)},a.write=function(l,c,h,u,f,p){var d,m,b,A=8*p-f-1,g=(1<<A)-1,v=g>>1,O=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=u?0:p-1,x=u?1:-1,E=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(m=isNaN(c)?1:0,d=g):(d=Math.floor(Math.log(c)/Math.LN2),c*(b=Math.pow(2,-d))<1&&(d--,b*=2),(c+=d+v>=1?O/b:O*Math.pow(2,1-v))*b>=2&&(d++,b/=2),d+v>=g?(m=0,d=g):d+v>=1?(m=(c*b-1)*Math.pow(2,f),d+=v):(m=c*Math.pow(2,v-1)*Math.pow(2,f),d=0));f>=8;l[h+_]=255&m,_+=x,m/=256,f-=8);for(d=d<<f|m,A+=f;A>0;l[h+_]=255&d,_+=x,d/=256,A-=8);l[h+_-x]|=128*E}},717:o=>{typeof Object.create=="function"?o.exports=function(a,l){l&&(a.super_=l,a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:o.exports=function(a,l){if(l){a.super_=l;var c=function(){};c.prototype=l.prototype,a.prototype=new c,a.prototype.constructor=a}}},733:(o,a,l)=>{o.exports=function c(h,u,f){function p(b,A){if(!u[b]){if(!h[b]){if(d)return d(b,!0);var g=new Error("Cannot find module '"+b+"'");throw g.code="MODULE_NOT_FOUND",g}var v=u[b]={exports:{}};h[b][0].call(v.exports,function(O){return p(h[b][1][O]||O)},v,v.exports,c,h,u,f)}return u[b].exports}for(var d=void 0,m=0;m<f.length;m++)p(f[m]);return p}({1:[function(c,h,u){var f=c("./utils"),p=c("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u.encode=function(m){for(var b,A,g,v,O,_,x,E=[],T=0,S=m.length,C=S,B=f.getTypeOf(m)!=="string";T<m.length;)C=S-T,g=B?(b=m[T++],A=T<S?m[T++]:0,T<S?m[T++]:0):(b=m.charCodeAt(T++),A=T<S?m.charCodeAt(T++):0,T<S?m.charCodeAt(T++):0),v=b>>2,O=(3&b)<<4|A>>4,_=1<C?(15&A)<<2|g>>6:64,x=2<C?63&g:64,E.push(d.charAt(v)+d.charAt(O)+d.charAt(_)+d.charAt(x));return E.join("")},u.decode=function(m){var b,A,g,v,O,_,x=0,E=0,T="data:";if(m.substr(0,T.length)===T)throw new Error("Invalid base64 input, it looks like a data url.");var S,C=3*(m=m.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(m.charAt(m.length-1)===d.charAt(64)&&C--,m.charAt(m.length-2)===d.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=p.uint8array?new Uint8Array(0|C):new Array(0|C);x<m.length;)b=d.indexOf(m.charAt(x++))<<2|(v=d.indexOf(m.charAt(x++)))>>4,A=(15&v)<<4|(O=d.indexOf(m.charAt(x++)))>>2,g=(3&O)<<6|(_=d.indexOf(m.charAt(x++))),S[E++]=b,O!==64&&(S[E++]=A),_!==64&&(S[E++]=g);return S}},{"./support":30,"./utils":32}],2:[function(c,h,u){var f=c("./external"),p=c("./stream/DataWorker"),d=c("./stream/Crc32Probe"),m=c("./stream/DataLengthProbe");function b(A,g,v,O,_){this.compressedSize=A,this.uncompressedSize=g,this.crc32=v,this.compression=O,this.compressedContent=_}b.prototype={getContentWorker:function(){var A=new p(f.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),g=this;return A.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),A},getCompressedWorker:function(){return new p(f.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},b.createWorkerFrom=function(A,g,v){return A.pipe(new d).pipe(new m("uncompressedSize")).pipe(g.compressWorker(v)).pipe(new m("compressedSize")).withStreamInfo("compression",g)},h.exports=b},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(c,h,u){var f=c("./stream/GenericWorker");u.STORE={magic:"\0\0",compressWorker:function(p){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}},u.DEFLATE=c("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(c,h,u){var f=c("./utils"),p=function(){for(var d,m=[],b=0;b<256;b++){d=b;for(var A=0;A<8;A++)d=1&d?3988292384^d>>>1:d>>>1;m[b]=d}return m}();h.exports=function(d,m){return d!==void 0&&d.length?f.getTypeOf(d)!=="string"?function(b,A,g,v){var O=p,_=0+g;b^=-1;for(var x=0;x<_;x++)b=b>>>8^O[255&(b^A[x])];return-1^b}(0|m,d,d.length):function(b,A,g,v){var O=p,_=0+g;b^=-1;for(var x=0;x<_;x++)b=b>>>8^O[255&(b^A.charCodeAt(x))];return-1^b}(0|m,d,d.length):0}},{"./utils":32}],5:[function(c,h,u){u.base64=!1,u.binary=!1,u.dir=!1,u.createFolders=!0,u.date=null,u.compression=null,u.compressionOptions=null,u.comment=null,u.unixPermissions=null,u.dosPermissions=null},{}],6:[function(c,h,u){var f;f=typeof Promise!="undefined"?Promise:c("lie"),h.exports={Promise:f}},{lie:37}],7:[function(c,h,u){var f=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",p=c("pako"),d=c("./utils"),m=c("./stream/GenericWorker"),b=f?"uint8array":"array";function A(g,v){m.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=v,this.meta={}}u.magic="\b\0",d.inherits(A,m),A.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(b,g.data),!1)},A.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},A.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},A.prototype._createPako=function(){this._pako=new p[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(v){g.push({data:v,meta:g.meta})}},u.compressWorker=function(g){return new A("Deflate",g)},u.uncompressWorker=function(){return new A("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(c,h,u){function f(O,_){var x,E="";for(x=0;x<_;x++)E+=String.fromCharCode(255&O),O>>>=8;return E}function p(O,_,x,E,T,S){var C,B,M=O.file,D=O.compression,N=S!==b.utf8encode,P=d.transformTo("string",S(M.name)),X=d.transformTo("string",b.utf8encode(M.name)),Z=M.comment,K=d.transformTo("string",S(Z)),ee=d.transformTo("string",b.utf8encode(Z)),J=X.length!==M.name.length,ge=ee.length!==Z.length,k="",j="",V="",H=M.dir,q=M.date,le={crc32:0,compressedSize:0,uncompressedSize:0};_&&!x||(le.crc32=O.crc32,le.compressedSize=O.compressedSize,le.uncompressedSize=O.uncompressedSize);var be=0;_&&(be|=8),N||!J&&!ge||(be|=2048);var ae=0,ue=0;H&&(ae|=16),T==="UNIX"?(ue=798,ae|=function(R,Q){var F=R;return R||(F=Q?16893:33204),(65535&F)<<16}(M.unixPermissions,H)):(ue=20,ae|=function(R){return 63&(R||0)}(M.dosPermissions)),C=q.getUTCHours(),C<<=6,C|=q.getUTCMinutes(),C<<=5,C|=q.getUTCSeconds()/2,B=q.getUTCFullYear()-1980,B<<=4,B|=q.getUTCMonth()+1,B<<=5,B|=q.getUTCDate(),J&&(j=f(1,1)+f(A(P),4)+X,k+="up"+f(j.length,2)+j),ge&&(V=f(1,1)+f(A(K),4)+ee,k+="uc"+f(V.length,2)+V);var U="";return U+=`
\0`,U+=f(be,2),U+=D.magic,U+=f(C,2),U+=f(B,2),U+=f(le.crc32,4),U+=f(le.compressedSize,4),U+=f(le.uncompressedSize,4),U+=f(P.length,2),U+=f(k.length,2),{fileRecord:g.LOCAL_FILE_HEADER+U+P+k,dirRecord:g.CENTRAL_FILE_HEADER+f(ue,2)+U+f(K.length,2)+"\0\0\0\0"+f(ae,4)+f(E,4)+P+k+K}}var d=c("../utils"),m=c("../stream/GenericWorker"),b=c("../utf8"),A=c("../crc32"),g=c("../signature");function v(O,_,x,E){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=x,this.encodeFileName=E,this.streamFiles=O,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(v,m),v.prototype.push=function(O){var _=O.meta.percent||0,x=this.entriesCount,E=this._sources.length;this.accumulate?this.contentBuffer.push(O):(this.bytesWritten+=O.data.length,m.prototype.push.call(this,{data:O.data,meta:{currentFile:this.currentFile,percent:x?(_+100*(x-E-1))/x:100}}))},v.prototype.openedSource=function(O){this.currentSourceOffset=this.bytesWritten,this.currentFile=O.file.name;var _=this.streamFiles&&!O.file.dir;if(_){var x=p(O,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(O){this.accumulate=!1;var _=this.streamFiles&&!O.file.dir,x=p(O,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),_)this.push({data:function(E){return g.DATA_DESCRIPTOR+f(E.crc32,4)+f(E.compressedSize,4)+f(E.uncompressedSize,4)}(O),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var O=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var x=this.bytesWritten-O,E=function(T,S,C,B,M){var D=d.transformTo("string",M(B));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(T,2)+f(T,2)+f(S,4)+f(C,4)+f(D.length,2)+D}(this.dirRecords.length,x,O,this.zipComment,this.encodeFileName);this.push({data:E,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(O){this._sources.push(O);var _=this;return O.on("data",function(x){_.processChunk(x)}),O.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),O.on("error",function(x){_.error(x)}),this},v.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(O){var _=this._sources;if(!m.prototype.error.call(this,O))return!1;for(var x=0;x<_.length;x++)try{_[x].error(O)}catch{}return!0},v.prototype.lock=function(){m.prototype.lock.call(this);for(var O=this._sources,_=0;_<O.length;_++)O[_].lock()},h.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(c,h,u){var f=c("../compressions"),p=c("./ZipFileWorker");u.generateWorker=function(d,m,b){var A=new p(m.streamFiles,b,m.platform,m.encodeFileName),g=0;try{d.forEach(function(v,O){g++;var _=function(S,C){var B=S||C,M=f[B];if(!M)throw new Error(B+" is not a valid compression method !");return M}(O.options.compression,m.compression),x=O.options.compressionOptions||m.compressionOptions||{},E=O.dir,T=O.date;O._compressWorker(_,x).withStreamInfo("file",{name:v,dir:E,date:T,comment:O.comment||"",unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions}).pipe(A)}),A.entriesCount=g}catch(v){A.error(v)}return A}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(c,h,u){function f(){if(!(this instanceof f))return new f;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var p=new f;for(var d in this)typeof this[d]!="function"&&(p[d]=this[d]);return p}}(f.prototype=c("./object")).loadAsync=c("./load"),f.support=c("./support"),f.defaults=c("./defaults"),f.version="3.7.1",f.loadAsync=function(p,d){return new f().loadAsync(p,d)},f.external=c("./external"),h.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(c,h,u){var f=c("./utils"),p=c("./external"),d=c("./utf8"),m=c("./zipEntries"),b=c("./stream/Crc32Probe"),A=c("./nodejsUtils");function g(v){return new p.Promise(function(O,_){var x=v.decompressed.getContentWorker().pipe(new b);x.on("error",function(E){_(E)}).on("end",function(){x.streamInfo.crc32!==v.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):O()}).resume()})}h.exports=function(v,O){var _=this;return O=f.extend(O||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),A.isNode&&A.isStream(v)?p.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):f.prepareContent("the loaded zip file",v,!0,O.optimizedBinaryString,O.base64).then(function(x){var E=new m(O);return E.load(x),E}).then(function(x){var E=[p.Promise.resolve(x)],T=x.files;if(O.checkCRC32)for(var S=0;S<T.length;S++)E.push(g(T[S]));return p.Promise.all(E)}).then(function(x){for(var E=x.shift(),T=E.files,S=0;S<T.length;S++){var C=T[S];_.file(C.fileNameStr,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:O.createFolders})}return E.zipComment.length&&(_.comment=E.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(c,h,u){var f=c("../utils"),p=c("../stream/GenericWorker");function d(m,b){p.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(b)}f.inherits(d,p),d.prototype._bindStream=function(m){var b=this;(this._stream=m).pause(),m.on("data",function(A){b.push({data:A,meta:{percent:0}})}).on("error",function(A){b.isPaused?this.generatedError=A:b.error(A)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},d.prototype.pause=function(){return!!p.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},h.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(c,h,u){var f=c("readable-stream").Readable;function p(d,m,b){f.call(this,m),this._helper=d;var A=this;d.on("data",function(g,v){A.push(g)||A._helper.pause(),b&&b(v)}).on("error",function(g){A.emit("error",g)}).on("end",function(){A.push(null)})}c("../utils").inherits(p,f),p.prototype._read=function(){this._helper.resume()},h.exports=p},{"../utils":32,"readable-stream":16}],14:[function(c,h,u){h.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(f,p){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(f,p);if(typeof f=="number")throw new Error('The "data" argument must not be a number');return new Buffer(f,p)},allocBuffer:function(f){if(Buffer.alloc)return Buffer.alloc(f);var p=new Buffer(f);return p.fill(0),p},isBuffer:function(f){return Buffer.isBuffer(f)},isStream:function(f){return f&&typeof f.on=="function"&&typeof f.pause=="function"&&typeof f.resume=="function"}}},{}],15:[function(c,h,u){function f(M,D,N){var P,X=d.getTypeOf(D),Z=d.extend(N||{},A);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(M=T(M)),Z.createFolders&&(P=E(M))&&S.call(this,P,!0);var K=X==="string"&&Z.binary===!1&&Z.base64===!1;N&&N.binary!==void 0||(Z.binary=!K),(D instanceof g&&D.uncompressedSize===0||Z.dir||!D||D.length===0)&&(Z.base64=!1,Z.binary=!0,D="",Z.compression="STORE",X="string");var ee;ee=D instanceof g||D instanceof m?D:_.isNode&&_.isStream(D)?new x(M,D):d.prepareContent(M,D,Z.binary,Z.optimizedBinaryString,Z.base64);var J=new v(M,ee,Z);this.files[M]=J}var p=c("./utf8"),d=c("./utils"),m=c("./stream/GenericWorker"),b=c("./stream/StreamHelper"),A=c("./defaults"),g=c("./compressedObject"),v=c("./zipObject"),O=c("./generate"),_=c("./nodejsUtils"),x=c("./nodejs/NodejsStreamInputAdapter"),E=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var D=M.lastIndexOf("/");return 0<D?M.substring(0,D):""},T=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},S=function(M,D){return D=D!==void 0?D:A.createFolders,M=T(M),this.files[M]||f.call(this,M,null,{dir:!0,createFolders:D}),this.files[M]};function C(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var B={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var D,N,P;for(D in this.files)P=this.files[D],(N=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&M(N,P)},filter:function(M){var D=[];return this.forEach(function(N,P){M(N,P)&&D.push(P)}),D},file:function(M,D,N){if(arguments.length!==1)return M=this.root+M,f.call(this,M,D,N),this;if(C(M)){var P=M;return this.filter(function(Z,K){return!K.dir&&P.test(Z)})}var X=this.files[this.root+M];return X&&!X.dir?X:null},folder:function(M){if(!M)return this;if(C(M))return this.filter(function(X,Z){return Z.dir&&M.test(X)});var D=this.root+M,N=S.call(this,D),P=this.clone();return P.root=N.name,P},remove:function(M){M=this.root+M;var D=this.files[M];if(D||(M.slice(-1)!=="/"&&(M+="/"),D=this.files[M]),D&&!D.dir)delete this.files[M];else for(var N=this.filter(function(X,Z){return Z.name.slice(0,M.length)===M}),P=0;P<N.length;P++)delete this.files[N[P].name];return this},generate:function(M){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var D,N={};try{if((N=d.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:p.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");d.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var P=N.comment||this.comment||"";D=O.generateWorker(this,N,P)}catch(X){(D=new m("error")).error(X)}return new b(D,N.type||"string",N.mimeType)},generateAsync:function(M,D){return this.generateInternalStream(M).accumulate(D)},generateNodeStream:function(M,D){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(D)}};h.exports=B},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(c,h,u){h.exports=c("stream")},{stream:void 0}],17:[function(c,h,u){var f=c("./DataReader");function p(d){f.call(this,d);for(var m=0;m<this.data.length;m++)d[m]=255&d[m]}c("../utils").inherits(p,f),p.prototype.byteAt=function(d){return this.data[this.zero+d]},p.prototype.lastIndexOfSignature=function(d){for(var m=d.charCodeAt(0),b=d.charCodeAt(1),A=d.charCodeAt(2),g=d.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===m&&this.data[v+1]===b&&this.data[v+2]===A&&this.data[v+3]===g)return v-this.zero;return-1},p.prototype.readAndCheckSignature=function(d){var m=d.charCodeAt(0),b=d.charCodeAt(1),A=d.charCodeAt(2),g=d.charCodeAt(3),v=this.readData(4);return m===v[0]&&b===v[1]&&A===v[2]&&g===v[3]},p.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},h.exports=p},{"../utils":32,"./DataReader":18}],18:[function(c,h,u){var f=c("../utils");function p(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}p.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(d){},readInt:function(d){var m,b=0;for(this.checkOffset(d),m=this.index+d-1;m>=this.index;m--)b=(b<<8)+this.byteAt(m);return this.index+=d,b},readString:function(d){return f.transformTo("string",this.readData(d))},readData:function(d){},lastIndexOfSignature:function(d){},readAndCheckSignature:function(d){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},h.exports=p},{"../utils":32}],19:[function(c,h,u){var f=c("./Uint8ArrayReader");function p(d){f.call(this,d)}c("../utils").inherits(p,f),p.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},h.exports=p},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(c,h,u){var f=c("./DataReader");function p(d){f.call(this,d)}c("../utils").inherits(p,f),p.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},p.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},p.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},p.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},h.exports=p},{"../utils":32,"./DataReader":18}],21:[function(c,h,u){var f=c("./ArrayReader");function p(d){f.call(this,d)}c("../utils").inherits(p,f),p.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},h.exports=p},{"../utils":32,"./ArrayReader":17}],22:[function(c,h,u){var f=c("../utils"),p=c("../support"),d=c("./ArrayReader"),m=c("./StringReader"),b=c("./NodeBufferReader"),A=c("./Uint8ArrayReader");h.exports=function(g){var v=f.getTypeOf(g);return f.checkSupport(v),v!=="string"||p.uint8array?v==="nodebuffer"?new b(g):p.uint8array?new A(f.transformTo("uint8array",g)):new d(f.transformTo("array",g)):new m(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(c,h,u){u.LOCAL_FILE_HEADER="PK",u.CENTRAL_FILE_HEADER="PK",u.CENTRAL_DIRECTORY_END="PK",u.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",u.ZIP64_CENTRAL_DIRECTORY_END="PK",u.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(c,h,u){var f=c("./GenericWorker"),p=c("../utils");function d(m){f.call(this,"ConvertWorker to "+m),this.destType=m}p.inherits(d,f),d.prototype.processChunk=function(m){this.push({data:p.transformTo(this.destType,m.data),meta:m.meta})},h.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(c,h,u){var f=c("./GenericWorker"),p=c("../crc32");function d(){f.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}c("../utils").inherits(d,f),d.prototype.processChunk=function(m){this.streamInfo.crc32=p(m.data,this.streamInfo.crc32||0),this.push(m)},h.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(c,h,u){var f=c("../utils"),p=c("./GenericWorker");function d(m){p.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}f.inherits(d,p),d.prototype.processChunk=function(m){if(m){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+m.data.length}p.prototype.processChunk.call(this,m)},h.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(c,h,u){var f=c("../utils"),p=c("./GenericWorker");function d(m){p.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(A){b.dataIsReady=!0,b.data=A,b.max=A&&A.length||0,b.type=f.getTypeOf(A),b.isPaused||b._tickAndRepeat()},function(A){b.error(A)})}f.inherits(d,p),d.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,f.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(f.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,b=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,b);break;case"uint8array":m=this.data.subarray(this.index,b);break;case"array":case"nodebuffer":m=this.data.slice(this.index,b)}return this.index=b,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},h.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(c,h,u){function f(p){this.name=p||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}f.prototype={push:function(p){this.emit("data",p)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(p){this.emit("error",p)}return!0},error:function(p){return!this.isFinished&&(this.isPaused?this.generatedError=p:(this.isFinished=!0,this.emit("error",p),this.previous&&this.previous.error(p),this.cleanUp()),!0)},on:function(p,d){return this._listeners[p].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(p,d){if(this._listeners[p])for(var m=0;m<this._listeners[p].length;m++)this._listeners[p][m].call(this,d)},pipe:function(p){return p.registerPrevious(this)},registerPrevious:function(p){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=p.streamInfo,this.mergeStreamInfo(),this.previous=p;var d=this;return p.on("data",function(m){d.processChunk(m)}),p.on("end",function(){d.end()}),p.on("error",function(m){d.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var p=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),p=!0),this.previous&&this.previous.resume(),!p},flush:function(){},processChunk:function(p){this.push(p)},withStreamInfo:function(p,d){return this.extraStreamInfo[p]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var p in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(p)&&(this.streamInfo[p]=this.extraStreamInfo[p])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var p="Worker "+this.name;return this.previous?this.previous+" -> "+p:p}},h.exports=f},{}],29:[function(c,h,u){var f=c("../utils"),p=c("./ConvertWorker"),d=c("./GenericWorker"),m=c("../base64"),b=c("../support"),A=c("../external"),g=null;if(b.nodestream)try{g=c("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(O,_,x){var E=_;switch(_){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string"}try{this._internalType=E,this._outputType=_,this._mimeType=x,f.checkSupport(E),this._worker=O.pipe(new p(E)),O.lock()}catch(T){this._worker=new d("error"),this._worker.error(T)}}v.prototype={accumulate:function(O){return function(_,x){return new A.Promise(function(E,T){var S=[],C=_._internalType,B=_._outputType,M=_._mimeType;_.on("data",function(D,N){S.push(D),x&&x(N)}).on("error",function(D){S=[],T(D)}).on("end",function(){try{var D=function(N,P,X){switch(N){case"blob":return f.newBlob(f.transformTo("arraybuffer",P),X);case"base64":return m.encode(P);default:return f.transformTo(N,P)}}(B,function(N,P){var X,Z=0,K=null,ee=0;for(X=0;X<P.length;X++)ee+=P[X].length;switch(N){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(K=new Uint8Array(ee),X=0;X<P.length;X++)K.set(P[X],Z),Z+=P[X].length;return K;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+N+"'")}}(C,S),M);E(D)}catch(N){T(N)}S=[]}).resume()})}(this,O)},on:function(O,_){var x=this;return O==="data"?this._worker.on(O,function(E){_.call(x,E.data,E.meta)}):this._worker.on(O,function(){f.delay(_,arguments,x)}),this},resume:function(){return f.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(O){if(f.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},O)}},h.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(c,h,u){if(u.base64=!0,u.array=!0,u.string=!0,u.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",u.nodebuffer=typeof Buffer!="undefined",u.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")u.blob=!1;else{var f=new ArrayBuffer(0);try{u.blob=new Blob([f],{type:"application/zip"}).size===0}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);p.append(f),u.blob=p.getBlob("application/zip").size===0}catch{u.blob=!1}}}try{u.nodestream=!!c("readable-stream").Readable}catch{u.nodestream=!1}},{"readable-stream":16}],31:[function(c,h,u){for(var f=c("./utils"),p=c("./support"),d=c("./nodejsUtils"),m=c("./stream/GenericWorker"),b=new Array(256),A=0;A<256;A++)b[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function g(){m.call(this,"utf-8 decode"),this.leftOver=null}function v(){m.call(this,"utf-8 encode")}b[254]=b[254]=1,u.utf8encode=function(O){return p.nodebuffer?d.newBufferFrom(O,"utf-8"):function(_){var x,E,T,S,C,B=_.length,M=0;for(S=0;S<B;S++)(64512&(E=_.charCodeAt(S)))==55296&&S+1<B&&(64512&(T=_.charCodeAt(S+1)))==56320&&(E=65536+(E-55296<<10)+(T-56320),S++),M+=E<128?1:E<2048?2:E<65536?3:4;for(x=p.uint8array?new Uint8Array(M):new Array(M),S=C=0;C<M;S++)(64512&(E=_.charCodeAt(S)))==55296&&S+1<B&&(64512&(T=_.charCodeAt(S+1)))==56320&&(E=65536+(E-55296<<10)+(T-56320),S++),E<128?x[C++]=E:(E<2048?x[C++]=192|E>>>6:(E<65536?x[C++]=224|E>>>12:(x[C++]=240|E>>>18,x[C++]=128|E>>>12&63),x[C++]=128|E>>>6&63),x[C++]=128|63&E);return x}(O)},u.utf8decode=function(O){return p.nodebuffer?f.transformTo("nodebuffer",O).toString("utf-8"):function(_){var x,E,T,S,C=_.length,B=new Array(2*C);for(x=E=0;x<C;)if((T=_[x++])<128)B[E++]=T;else if(4<(S=b[T]))B[E++]=65533,x+=S-1;else{for(T&=S===2?31:S===3?15:7;1<S&&x<C;)T=T<<6|63&_[x++],S--;1<S?B[E++]=65533:T<65536?B[E++]=T:(T-=65536,B[E++]=55296|T>>10&1023,B[E++]=56320|1023&T)}return B.length!==E&&(B.subarray?B=B.subarray(0,E):B.length=E),f.applyFromCharCode(B)}(O=f.transformTo(p.uint8array?"uint8array":"array",O))},f.inherits(g,m),g.prototype.processChunk=function(O){var _=f.transformTo(p.uint8array?"uint8array":"array",O.data);if(this.leftOver&&this.leftOver.length){if(p.uint8array){var x=_;(_=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),_.set(x,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var E=function(S,C){var B;for((C=C||S.length)>S.length&&(C=S.length),B=C-1;0<=B&&(192&S[B])==128;)B--;return B<0||B===0?C:B+b[S[B]]>C?B:C}(_),T=_;E!==_.length&&(p.uint8array?(T=_.subarray(0,E),this.leftOver=_.subarray(E,_.length)):(T=_.slice(0,E),this.leftOver=_.slice(E,_.length))),this.push({data:u.utf8decode(T),meta:O.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:u.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},u.Utf8DecodeWorker=g,f.inherits(v,m),v.prototype.processChunk=function(O){this.push({data:u.utf8encode(O.data),meta:O.meta})},u.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(c,h,u){var f=c("./support"),p=c("./base64"),d=c("./nodejsUtils"),m=c("set-immediate-shim"),b=c("./external");function A(E){return E}function g(E,T){for(var S=0;S<E.length;++S)T[S]=255&E.charCodeAt(S);return T}u.newBlob=function(E,T){u.checkSupport("blob");try{return new Blob([E],{type:T})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(E),S.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(E,T,S){var C=[],B=0,M=E.length;if(M<=S)return String.fromCharCode.apply(null,E);for(;B<M;)T==="array"||T==="nodebuffer"?C.push(String.fromCharCode.apply(null,E.slice(B,Math.min(B+S,M)))):C.push(String.fromCharCode.apply(null,E.subarray(B,Math.min(B+S,M)))),B+=S;return C.join("")},stringifyByChar:function(E){for(var T="",S=0;S<E.length;S++)T+=String.fromCharCode(E[S]);return T},applyCanBeUsed:{uint8array:function(){try{return f.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return f.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}}()}};function O(E){var T=65536,S=u.getTypeOf(E),C=!0;if(S==="uint8array"?C=v.applyCanBeUsed.uint8array:S==="nodebuffer"&&(C=v.applyCanBeUsed.nodebuffer),C)for(;1<T;)try{return v.stringifyByChunk(E,S,T)}catch{T=Math.floor(T/2)}return v.stringifyByChar(E)}function _(E,T){for(var S=0;S<E.length;S++)T[S]=E[S];return T}u.applyFromCharCode=O;var x={};x.string={string:A,array:function(E){return g(E,new Array(E.length))},arraybuffer:function(E){return x.string.uint8array(E).buffer},uint8array:function(E){return g(E,new Uint8Array(E.length))},nodebuffer:function(E){return g(E,d.allocBuffer(E.length))}},x.array={string:O,array:A,arraybuffer:function(E){return new Uint8Array(E).buffer},uint8array:function(E){return new Uint8Array(E)},nodebuffer:function(E){return d.newBufferFrom(E)}},x.arraybuffer={string:function(E){return O(new Uint8Array(E))},array:function(E){return _(new Uint8Array(E),new Array(E.byteLength))},arraybuffer:A,uint8array:function(E){return new Uint8Array(E)},nodebuffer:function(E){return d.newBufferFrom(new Uint8Array(E))}},x.uint8array={string:O,array:function(E){return _(E,new Array(E.length))},arraybuffer:function(E){return E.buffer},uint8array:A,nodebuffer:function(E){return d.newBufferFrom(E)}},x.nodebuffer={string:O,array:function(E){return _(E,new Array(E.length))},arraybuffer:function(E){return x.nodebuffer.uint8array(E).buffer},uint8array:function(E){return _(E,new Uint8Array(E.length))},nodebuffer:A},u.transformTo=function(E,T){if(T=T||"",!E)return T;u.checkSupport(E);var S=u.getTypeOf(T);return x[S][E](T)},u.getTypeOf=function(E){return typeof E=="string"?"string":Object.prototype.toString.call(E)==="[object Array]"?"array":f.nodebuffer&&d.isBuffer(E)?"nodebuffer":f.uint8array&&E instanceof Uint8Array?"uint8array":f.arraybuffer&&E instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(E){if(!f[E.toLowerCase()])throw new Error(E+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(E){var T,S,C="";for(S=0;S<(E||"").length;S++)C+="\\x"+((T=E.charCodeAt(S))<16?"0":"")+T.toString(16).toUpperCase();return C},u.delay=function(E,T,S){m(function(){E.apply(S||null,T||[])})},u.inherits=function(E,T){function S(){}S.prototype=T.prototype,E.prototype=new S},u.extend=function(){var E,T,S={};for(E=0;E<arguments.length;E++)for(T in arguments[E])arguments[E].hasOwnProperty(T)&&S[T]===void 0&&(S[T]=arguments[E][T]);return S},u.prepareContent=function(E,T,S,C,B){return b.Promise.resolve(T).then(function(M){return f.blob&&(M instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(M))!==-1)&&typeof FileReader!="undefined"?new b.Promise(function(D,N){var P=new FileReader;P.onload=function(X){D(X.target.result)},P.onerror=function(X){N(X.target.error)},P.readAsArrayBuffer(M)}):M}).then(function(M){var D=u.getTypeOf(M);return D?(D==="arraybuffer"?M=u.transformTo("uint8array",M):D==="string"&&(B?M=p.decode(M):S&&C!==!0&&(M=function(N){return g(N,f.uint8array?new Uint8Array(N.length):new Array(N.length))}(M))),M):b.Promise.reject(new Error("Can't read the data of '"+E+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(c,h,u){var f=c("./reader/readerFor"),p=c("./utils"),d=c("./signature"),m=c("./zipEntry"),b=(c("./utf8"),c("./support"));function A(g){this.files=[],this.loadOptions=g}A.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+p.pretty(v)+", expected "+p.pretty(g)+")")}},isSignature:function(g,v){var O=this.reader.index;this.reader.setIndex(g);var _=this.reader.readString(4)===v;return this.reader.setIndex(O),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),v=b.uint8array?"uint8array":"array",O=p.transformTo(v,g);this.zipComment=this.loadOptions.decodeFileName(O)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,v,O,_=this.zip64EndOfCentralSize-44;0<_;)g=this.reader.readInt(2),v=this.reader.readInt(4),O=this.reader.readData(v),this.zip64ExtensibleData[g]={id:g,length:v,value:O}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,v;for(g=0;g<this.files.length;g++)v=this.files[g],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(g=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var v=g;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===p.MAX_VALUE_16BITS||this.diskWithCentralDirStart===p.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===p.MAX_VALUE_16BITS||this.centralDirRecords===p.MAX_VALUE_16BITS||this.centralDirSize===p.MAX_VALUE_32BITS||this.centralDirOffset===p.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var O=this.centralDirOffset+this.centralDirSize;this.zip64&&(O+=20,O+=12+this.zip64EndOfCentralSize);var _=v-O;if(0<_)this.isSignature(v,d.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(g){this.reader=f(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},h.exports=A},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(c,h,u){var f=c("./reader/readerFor"),p=c("./utils"),d=c("./compressedObject"),m=c("./crc32"),b=c("./utf8"),A=c("./compressions"),g=c("./support");function v(O,_){this.options=O,this.loadOptions=_}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(O){var _,x;if(O.skip(22),this.fileNameLength=O.readInt(2),x=O.readInt(2),this.fileName=O.readData(this.fileNameLength),O.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(E){for(var T in A)if(A.hasOwnProperty(T)&&A[T].magic===E)return A[T];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+p.pretty(this.compressionMethod)+" unknown (inner file : "+p.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,_,O.readData(this.compressedSize))},readCentralPart:function(O){this.versionMadeBy=O.readInt(2),O.skip(2),this.bitFlag=O.readInt(2),this.compressionMethod=O.readString(2),this.date=O.readDate(),this.crc32=O.readInt(4),this.compressedSize=O.readInt(4),this.uncompressedSize=O.readInt(4);var _=O.readInt(2);if(this.extraFieldsLength=O.readInt(2),this.fileCommentLength=O.readInt(2),this.diskNumberStart=O.readInt(2),this.internalFileAttributes=O.readInt(2),this.externalFileAttributes=O.readInt(4),this.localHeaderOffset=O.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");O.skip(_),this.readExtraFields(O),this.parseZIP64ExtraField(O),this.fileComment=O.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var O=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),O==0&&(this.dosPermissions=63&this.externalFileAttributes),O==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(O){if(this.extraFields[1]){var _=f(this.extraFields[1].value);this.uncompressedSize===p.MAX_VALUE_32BITS&&(this.uncompressedSize=_.readInt(8)),this.compressedSize===p.MAX_VALUE_32BITS&&(this.compressedSize=_.readInt(8)),this.localHeaderOffset===p.MAX_VALUE_32BITS&&(this.localHeaderOffset=_.readInt(8)),this.diskNumberStart===p.MAX_VALUE_32BITS&&(this.diskNumberStart=_.readInt(4))}},readExtraFields:function(O){var _,x,E,T=O.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});O.index+4<T;)_=O.readInt(2),x=O.readInt(2),E=O.readData(x),this.extraFields[_]={id:_,length:x,value:E};O.setIndex(T)},handleUTF8:function(){var O=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=b.utf8decode(this.fileName),this.fileCommentStr=b.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var x=p.transformTo(O,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var E=this.findExtraFieldUnicodeComment();if(E!==null)this.fileCommentStr=E;else{var T=p.transformTo(O,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(T)}}},findExtraFieldUnicodePath:function(){var O=this.extraFields[28789];if(O){var _=f(O.value);return _.readInt(1)!==1||m(this.fileName)!==_.readInt(4)?null:b.utf8decode(_.readData(O.length-5))}return null},findExtraFieldUnicodeComment:function(){var O=this.extraFields[25461];if(O){var _=f(O.value);return _.readInt(1)!==1||m(this.fileComment)!==_.readInt(4)?null:b.utf8decode(_.readData(O.length-5))}return null}},h.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(c,h,u){function f(_,x,E){this.name=_,this.dir=E.dir,this.date=E.date,this.comment=E.comment,this.unixPermissions=E.unixPermissions,this.dosPermissions=E.dosPermissions,this._data=x,this._dataBinary=E.binary,this.options={compression:E.compression,compressionOptions:E.compressionOptions}}var p=c("./stream/StreamHelper"),d=c("./stream/DataWorker"),m=c("./utf8"),b=c("./compressedObject"),A=c("./stream/GenericWorker");f.prototype={internalStream:function(_){var x=null,E="string";try{if(!_)throw new Error("No output type specified.");var T=(E=_.toLowerCase())==="string"||E==="text";E!=="binarystring"&&E!=="text"||(E="string"),x=this._decompressWorker();var S=!this._dataBinary;S&&!T&&(x=x.pipe(new m.Utf8EncodeWorker)),!S&&T&&(x=x.pipe(new m.Utf8DecodeWorker))}catch(C){(x=new A("error")).error(C)}return new p(x,E,"")},async:function(_,x){return this.internalStream(_).accumulate(x)},nodeStream:function(_,x){return this.internalStream(_||"nodebuffer").toNodejsStream(x)},_compressWorker:function(_,x){if(this._data instanceof b&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var E=this._decompressWorker();return this._dataBinary||(E=E.pipe(new m.Utf8EncodeWorker)),b.createWorkerFrom(E,_,x)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof A?this._data:new d(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},O=0;O<g.length;O++)f.prototype[g[O]]=v;h.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(c,h,u){(function(f){var p,d,m=f.MutationObserver||f.WebKitMutationObserver;if(m){var b=0,A=new m(_),g=f.document.createTextNode("");A.observe(g,{characterData:!0}),p=function(){g.data=b=++b%2}}else if(f.setImmediate||f.MessageChannel===void 0)p="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var x=f.document.createElement("script");x.onreadystatechange=function(){_(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},f.document.documentElement.appendChild(x)}:function(){setTimeout(_,0)};else{var v=new f.MessageChannel;v.port1.onmessage=_,p=function(){v.port2.postMessage(0)}}var O=[];function _(){var x,E;d=!0;for(var T=O.length;T;){for(E=O,O=[],x=-1;++x<T;)E[x]();T=O.length}d=!1}h.exports=function(x){O.push(x)!==1||d||p()}}).call(this,l.g!==void 0?l.g:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(c,h,u){var f=c("immediate");function p(){}var d={},m=["REJECTED"],b=["FULFILLED"],A=["PENDING"];function g(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=A,this.queue=[],this.outcome=void 0,T!==p&&x(this,T)}function v(T,S,C){this.promise=T,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function O(T,S,C){f(function(){var B;try{B=S(C)}catch(M){return d.reject(T,M)}B===T?d.reject(T,new TypeError("Cannot resolve promise with itself")):d.resolve(T,B)})}function _(T){var S=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof S=="function")return function(){S.apply(T,arguments)}}function x(T,S){var C=!1;function B(N){C||(C=!0,d.reject(T,N))}function M(N){C||(C=!0,d.resolve(T,N))}var D=E(function(){S(M,B)});D.status==="error"&&B(D.value)}function E(T,S){var C={};try{C.value=T(S),C.status="success"}catch(B){C.status="error",C.value=B}return C}(h.exports=g).prototype.finally=function(T){if(typeof T!="function")return this;var S=this.constructor;return this.then(function(C){return S.resolve(T()).then(function(){return C})},function(C){return S.resolve(T()).then(function(){throw C})})},g.prototype.catch=function(T){return this.then(null,T)},g.prototype.then=function(T,S){if(typeof T!="function"&&this.state===b||typeof S!="function"&&this.state===m)return this;var C=new this.constructor(p);return this.state!==A?O(C,this.state===b?T:S,this.outcome):this.queue.push(new v(C,T,S)),C},v.prototype.callFulfilled=function(T){d.resolve(this.promise,T)},v.prototype.otherCallFulfilled=function(T){O(this.promise,this.onFulfilled,T)},v.prototype.callRejected=function(T){d.reject(this.promise,T)},v.prototype.otherCallRejected=function(T){O(this.promise,this.onRejected,T)},d.resolve=function(T,S){var C=E(_,S);if(C.status==="error")return d.reject(T,C.value);var B=C.value;if(B)x(T,B);else{T.state=b,T.outcome=S;for(var M=-1,D=T.queue.length;++M<D;)T.queue[M].callFulfilled(S)}return T},d.reject=function(T,S){T.state=m,T.outcome=S;for(var C=-1,B=T.queue.length;++C<B;)T.queue[C].callRejected(S);return T},g.resolve=function(T){return T instanceof this?T:d.resolve(new this(p),T)},g.reject=function(T){var S=new this(p);return d.reject(S,T)},g.all=function(T){var S=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=T.length,B=!1;if(!C)return this.resolve([]);for(var M=new Array(C),D=0,N=-1,P=new this(p);++N<C;)X(T[N],N);return P;function X(Z,K){S.resolve(Z).then(function(ee){M[K]=ee,++D!==C||B||(B=!0,d.resolve(P,M))},function(ee){B||(B=!0,d.reject(P,ee))})}},g.race=function(T){if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=T.length,C=!1;if(!S)return this.resolve([]);for(var B,M=-1,D=new this(p);++M<S;)B=T[M],this.resolve(B).then(function(N){C||(C=!0,d.resolve(D,N))},function(N){C||(C=!0,d.reject(D,N))});return D}},{immediate:36}],38:[function(c,h,u){var f={};(0,c("./lib/utils/common").assign)(f,c("./lib/deflate"),c("./lib/inflate"),c("./lib/zlib/constants")),h.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(c,h,u){var f=c("./zlib/deflate"),p=c("./utils/common"),d=c("./utils/strings"),m=c("./zlib/messages"),b=c("./zlib/zstream"),A=Object.prototype.toString;function g(O){if(!(this instanceof g))return new g(O);this.options=p.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},O||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var x=f.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(x!==0)throw new Error(m[x]);if(_.header&&f.deflateSetHeader(this.strm,_.header),_.dictionary){var E;if(E=typeof _.dictionary=="string"?d.string2buf(_.dictionary):A.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(x=f.deflateSetDictionary(this.strm,E))!==0)throw new Error(m[x]);this._dict_set=!0}}function v(O,_){var x=new g(_);if(x.push(O,!0),x.err)throw x.msg||m[x.err];return x.result}g.prototype.push=function(O,_){var x,E,T=this.strm,S=this.options.chunkSize;if(this.ended)return!1;E=_===~~_?_:_===!0?4:0,typeof O=="string"?T.input=d.string2buf(O):A.call(O)==="[object ArrayBuffer]"?T.input=new Uint8Array(O):T.input=O,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new p.Buf8(S),T.next_out=0,T.avail_out=S),(x=f.deflate(T,E))!==1&&x!==0)return this.onEnd(x),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(p.shrinkBuf(T.output,T.next_out))):this.onData(p.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&x!==1);return E===4?(x=f.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===0):E!==2||(this.onEnd(0),!(T.avail_out=0))},g.prototype.onData=function(O){this.chunks.push(O)},g.prototype.onEnd=function(O){O===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},u.Deflate=g,u.deflate=v,u.deflateRaw=function(O,_){return(_=_||{}).raw=!0,v(O,_)},u.gzip=function(O,_){return(_=_||{}).gzip=!0,v(O,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(c,h,u){var f=c("./zlib/inflate"),p=c("./utils/common"),d=c("./utils/strings"),m=c("./zlib/constants"),b=c("./zlib/messages"),A=c("./zlib/zstream"),g=c("./zlib/gzheader"),v=Object.prototype.toString;function O(x){if(!(this instanceof O))return new O(x);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},x||{});var E=this.options;E.raw&&0<=E.windowBits&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),!(0<=E.windowBits&&E.windowBits<16)||x&&x.windowBits||(E.windowBits+=32),15<E.windowBits&&E.windowBits<48&&(15&E.windowBits)==0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var T=f.inflateInit2(this.strm,E.windowBits);if(T!==m.Z_OK)throw new Error(b[T]);this.header=new g,f.inflateGetHeader(this.strm,this.header)}function _(x,E){var T=new O(E);if(T.push(x,!0),T.err)throw T.msg||b[T.err];return T.result}O.prototype.push=function(x,E){var T,S,C,B,M,D,N=this.strm,P=this.options.chunkSize,X=this.options.dictionary,Z=!1;if(this.ended)return!1;S=E===~~E?E:E===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof x=="string"?N.input=d.binstring2buf(x):v.call(x)==="[object ArrayBuffer]"?N.input=new Uint8Array(x):N.input=x,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new p.Buf8(P),N.next_out=0,N.avail_out=P),(T=f.inflate(N,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&X&&(D=typeof X=="string"?d.string2buf(X):v.call(X)==="[object ArrayBuffer]"?new Uint8Array(X):X,T=f.inflateSetDictionary(this.strm,D)),T===m.Z_BUF_ERROR&&Z===!0&&(T=m.Z_OK,Z=!1),T!==m.Z_STREAM_END&&T!==m.Z_OK)return this.onEnd(T),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&T!==m.Z_STREAM_END&&(N.avail_in!==0||S!==m.Z_FINISH&&S!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=d.utf8border(N.output,N.next_out),B=N.next_out-C,M=d.buf2string(N.output,C),N.next_out=B,N.avail_out=P-B,B&&p.arraySet(N.output,N.output,C,B,0),this.onData(M)):this.onData(p.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(Z=!0)}while((0<N.avail_in||N.avail_out===0)&&T!==m.Z_STREAM_END);return T===m.Z_STREAM_END&&(S=m.Z_FINISH),S===m.Z_FINISH?(T=f.inflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m.Z_OK):S!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(N.avail_out=0))},O.prototype.onData=function(x){this.chunks.push(x)},O.prototype.onEnd=function(x){x===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},u.Inflate=O,u.inflate=_,u.inflateRaw=function(x,E){return(E=E||{}).raw=!0,_(x,E)},u.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(c,h,u){var f=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";u.assign=function(m){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var A=b.shift();if(A){if(typeof A!="object")throw new TypeError(A+"must be non-object");for(var g in A)A.hasOwnProperty(g)&&(m[g]=A[g])}}return m},u.shrinkBuf=function(m,b){return m.length===b?m:m.subarray?m.subarray(0,b):(m.length=b,m)};var p={arraySet:function(m,b,A,g,v){if(b.subarray&&m.subarray)m.set(b.subarray(A,A+g),v);else for(var O=0;O<g;O++)m[v+O]=b[A+O]},flattenChunks:function(m){var b,A,g,v,O,_;for(b=g=0,A=m.length;b<A;b++)g+=m[b].length;for(_=new Uint8Array(g),b=v=0,A=m.length;b<A;b++)O=m[b],_.set(O,v),v+=O.length;return _}},d={arraySet:function(m,b,A,g,v){for(var O=0;O<g;O++)m[v+O]=b[A+O]},flattenChunks:function(m){return[].concat.apply([],m)}};u.setTyped=function(m){m?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,p)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,d))},u.setTyped(f)},{}],42:[function(c,h,u){var f=c("./common"),p=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{p=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var m=new f.Buf8(256),b=0;b<256;b++)m[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;function A(g,v){if(v<65537&&(g.subarray&&d||!g.subarray&&p))return String.fromCharCode.apply(null,f.shrinkBuf(g,v));for(var O="",_=0;_<v;_++)O+=String.fromCharCode(g[_]);return O}m[254]=m[254]=1,u.string2buf=function(g){var v,O,_,x,E,T=g.length,S=0;for(x=0;x<T;x++)(64512&(O=g.charCodeAt(x)))==55296&&x+1<T&&(64512&(_=g.charCodeAt(x+1)))==56320&&(O=65536+(O-55296<<10)+(_-56320),x++),S+=O<128?1:O<2048?2:O<65536?3:4;for(v=new f.Buf8(S),x=E=0;E<S;x++)(64512&(O=g.charCodeAt(x)))==55296&&x+1<T&&(64512&(_=g.charCodeAt(x+1)))==56320&&(O=65536+(O-55296<<10)+(_-56320),x++),O<128?v[E++]=O:(O<2048?v[E++]=192|O>>>6:(O<65536?v[E++]=224|O>>>12:(v[E++]=240|O>>>18,v[E++]=128|O>>>12&63),v[E++]=128|O>>>6&63),v[E++]=128|63&O);return v},u.buf2binstring=function(g){return A(g,g.length)},u.binstring2buf=function(g){for(var v=new f.Buf8(g.length),O=0,_=v.length;O<_;O++)v[O]=g.charCodeAt(O);return v},u.buf2string=function(g,v){var O,_,x,E,T=v||g.length,S=new Array(2*T);for(O=_=0;O<T;)if((x=g[O++])<128)S[_++]=x;else if(4<(E=m[x]))S[_++]=65533,O+=E-1;else{for(x&=E===2?31:E===3?15:7;1<E&&O<T;)x=x<<6|63&g[O++],E--;1<E?S[_++]=65533:x<65536?S[_++]=x:(x-=65536,S[_++]=55296|x>>10&1023,S[_++]=56320|1023&x)}return A(S,_)},u.utf8border=function(g,v){var O;for((v=v||g.length)>g.length&&(v=g.length),O=v-1;0<=O&&(192&g[O])==128;)O--;return O<0||O===0?v:O+m[g[O]]>v?O:v}},{"./common":41}],43:[function(c,h,u){h.exports=function(f,p,d,m){for(var b=65535&f|0,A=f>>>16&65535|0,g=0;d!==0;){for(d-=g=2e3<d?2e3:d;A=A+(b=b+p[m++]|0)|0,--g;);b%=65521,A%=65521}return b|A<<16|0}},{}],44:[function(c,h,u){h.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(c,h,u){var f=function(){for(var p,d=[],m=0;m<256;m++){p=m;for(var b=0;b<8;b++)p=1&p?3988292384^p>>>1:p>>>1;d[m]=p}return d}();h.exports=function(p,d,m,b){var A=f,g=b+m;p^=-1;for(var v=b;v<g;v++)p=p>>>8^A[255&(p^d[v])];return-1^p}},{}],46:[function(c,h,u){var f,p=c("../utils/common"),d=c("./trees"),m=c("./adler32"),b=c("./crc32"),A=c("./messages"),g=-2,v=258,O=262,_=113;function x(k,j){return k.msg=A[j],j}function E(k){return(k<<1)-(4<k?9:0)}function T(k){for(var j=k.length;0<=--j;)k[j]=0}function S(k){var j=k.state,V=j.pending;V>k.avail_out&&(V=k.avail_out),V!==0&&(p.arraySet(k.output,j.pending_buf,j.pending_out,V,k.next_out),k.next_out+=V,j.pending_out+=V,k.total_out+=V,k.avail_out-=V,j.pending-=V,j.pending===0&&(j.pending_out=0))}function C(k,j){d._tr_flush_block(k,0<=k.block_start?k.block_start:-1,k.strstart-k.block_start,j),k.block_start=k.strstart,S(k.strm)}function B(k,j){k.pending_buf[k.pending++]=j}function M(k,j){k.pending_buf[k.pending++]=j>>>8&255,k.pending_buf[k.pending++]=255&j}function D(k,j){var V,H,q=k.max_chain_length,le=k.strstart,be=k.prev_length,ae=k.nice_match,ue=k.strstart>k.w_size-O?k.strstart-(k.w_size-O):0,U=k.window,R=k.w_mask,Q=k.prev,F=k.strstart+v,re=U[le+be-1],me=U[le+be];k.prev_length>=k.good_match&&(q>>=2),ae>k.lookahead&&(ae=k.lookahead);do if(U[(V=j)+be]===me&&U[V+be-1]===re&&U[V]===U[le]&&U[++V]===U[le+1]){le+=2,V++;do;while(U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&U[++le]===U[++V]&&le<F);if(H=v-(F-le),le=F-v,be<H){if(k.match_start=j,ae<=(be=H))break;re=U[le+be-1],me=U[le+be]}}while((j=Q[j&R])>ue&&--q!=0);return be<=k.lookahead?be:k.lookahead}function N(k){var j,V,H,q,le,be,ae,ue,U,R,Q=k.w_size;do{if(q=k.window_size-k.lookahead-k.strstart,k.strstart>=Q+(Q-O)){for(p.arraySet(k.window,k.window,Q,Q,0),k.match_start-=Q,k.strstart-=Q,k.block_start-=Q,j=V=k.hash_size;H=k.head[--j],k.head[j]=Q<=H?H-Q:0,--V;);for(j=V=Q;H=k.prev[--j],k.prev[j]=Q<=H?H-Q:0,--V;);q+=Q}if(k.strm.avail_in===0)break;if(be=k.strm,ae=k.window,ue=k.strstart+k.lookahead,R=void 0,(U=q)<(R=be.avail_in)&&(R=U),V=R===0?0:(be.avail_in-=R,p.arraySet(ae,be.input,be.next_in,R,ue),be.state.wrap===1?be.adler=m(be.adler,ae,R,ue):be.state.wrap===2&&(be.adler=b(be.adler,ae,R,ue)),be.next_in+=R,be.total_in+=R,R),k.lookahead+=V,k.lookahead+k.insert>=3)for(le=k.strstart-k.insert,k.ins_h=k.window[le],k.ins_h=(k.ins_h<<k.hash_shift^k.window[le+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[le+3-1])&k.hash_mask,k.prev[le&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=le,le++,k.insert--,!(k.lookahead+k.insert<3)););}while(k.lookahead<O&&k.strm.avail_in!==0)}function P(k,j){for(var V,H;;){if(k.lookahead<O){if(N(k),k.lookahead<O&&j===0)return 1;if(k.lookahead===0)break}if(V=0,k.lookahead>=3&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+3-1])&k.hash_mask,V=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),V!==0&&k.strstart-V<=k.w_size-O&&(k.match_length=D(k,V)),k.match_length>=3)if(H=d._tr_tally(k,k.strstart-k.match_start,k.match_length-3),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=3){for(k.match_length--;k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+3-1])&k.hash_mask,V=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart,--k.match_length!=0;);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else H=d._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(H&&(C(k,!1),k.strm.avail_out===0))return 1}return k.insert=k.strstart<2?k.strstart:2,j===4?(C(k,!0),k.strm.avail_out===0?3:4):k.last_lit&&(C(k,!1),k.strm.avail_out===0)?1:2}function X(k,j){for(var V,H,q;;){if(k.lookahead<O){if(N(k),k.lookahead<O&&j===0)return 1;if(k.lookahead===0)break}if(V=0,k.lookahead>=3&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+3-1])&k.hash_mask,V=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=2,V!==0&&k.prev_length<k.max_lazy_match&&k.strstart-V<=k.w_size-O&&(k.match_length=D(k,V),k.match_length<=5&&(k.strategy===1||k.match_length===3&&4096<k.strstart-k.match_start)&&(k.match_length=2)),k.prev_length>=3&&k.match_length<=k.prev_length){for(q=k.strstart+k.lookahead-3,H=d._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-3),k.lookahead-=k.prev_length-1,k.prev_length-=2;++k.strstart<=q&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+3-1])&k.hash_mask,V=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),--k.prev_length!=0;);if(k.match_available=0,k.match_length=2,k.strstart++,H&&(C(k,!1),k.strm.avail_out===0))return 1}else if(k.match_available){if((H=d._tr_tally(k,0,k.window[k.strstart-1]))&&C(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return 1}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(H=d._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<2?k.strstart:2,j===4?(C(k,!0),k.strm.avail_out===0?3:4):k.last_lit&&(C(k,!1),k.strm.avail_out===0)?1:2}function Z(k,j,V,H,q){this.good_length=k,this.max_lazy=j,this.nice_length=V,this.max_chain=H,this.func=q}function K(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new p.Buf16(1146),this.dyn_dtree=new p.Buf16(122),this.bl_tree=new p.Buf16(78),T(this.dyn_ltree),T(this.dyn_dtree),T(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new p.Buf16(16),this.heap=new p.Buf16(573),T(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new p.Buf16(573),T(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ee(k){var j;return k&&k.state?(k.total_in=k.total_out=0,k.data_type=2,(j=k.state).pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?42:_,k.adler=j.wrap===2?0:1,j.last_flush=0,d._tr_init(j),0):x(k,g)}function J(k){var j=ee(k);return j===0&&function(V){V.window_size=2*V.w_size,T(V.head),V.max_lazy_match=f[V.level].max_lazy,V.good_match=f[V.level].good_length,V.nice_match=f[V.level].nice_length,V.max_chain_length=f[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=2,V.match_available=0,V.ins_h=0}(k.state),j}function ge(k,j,V,H,q,le){if(!k)return g;var be=1;if(j===-1&&(j=6),H<0?(be=0,H=-H):15<H&&(be=2,H-=16),q<1||9<q||V!==8||H<8||15<H||j<0||9<j||le<0||4<le)return x(k,g);H===8&&(H=9);var ae=new K;return(k.state=ae).strm=k,ae.wrap=be,ae.gzhead=null,ae.w_bits=H,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=q+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+3-1)/3),ae.window=new p.Buf8(2*ae.w_size),ae.head=new p.Buf16(ae.hash_size),ae.prev=new p.Buf16(ae.w_size),ae.lit_bufsize=1<<q+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new p.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=j,ae.strategy=le,ae.method=V,J(k)}f=[new Z(0,0,0,0,function(k,j){var V=65535;for(V>k.pending_buf_size-5&&(V=k.pending_buf_size-5);;){if(k.lookahead<=1){if(N(k),k.lookahead===0&&j===0)return 1;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var H=k.block_start+V;if((k.strstart===0||k.strstart>=H)&&(k.lookahead=k.strstart-H,k.strstart=H,C(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-O&&(C(k,!1),k.strm.avail_out===0))return 1}return k.insert=0,j===4?(C(k,!0),k.strm.avail_out===0?3:4):(k.strstart>k.block_start&&(C(k,!1),k.strm.avail_out),1)}),new Z(4,4,8,4,P),new Z(4,5,16,8,P),new Z(4,6,32,32,P),new Z(4,4,16,16,X),new Z(8,16,32,32,X),new Z(8,16,128,128,X),new Z(8,32,128,256,X),new Z(32,128,258,1024,X),new Z(32,258,258,4096,X)],u.deflateInit=function(k,j){return ge(k,j,8,15,8,0)},u.deflateInit2=ge,u.deflateReset=J,u.deflateResetKeep=ee,u.deflateSetHeader=function(k,j){return k&&k.state?k.state.wrap!==2?g:(k.state.gzhead=j,0):g},u.deflate=function(k,j){var V,H,q,le;if(!k||!k.state||5<j||j<0)return k?x(k,g):g;if(H=k.state,!k.output||!k.input&&k.avail_in!==0||H.status===666&&j!==4)return x(k,k.avail_out===0?-5:g);if(H.strm=k,V=H.last_flush,H.last_flush=j,H.status===42)if(H.wrap===2)k.adler=0,B(H,31),B(H,139),B(H,8),H.gzhead?(B(H,(H.gzhead.text?1:0)+(H.gzhead.hcrc?2:0)+(H.gzhead.extra?4:0)+(H.gzhead.name?8:0)+(H.gzhead.comment?16:0)),B(H,255&H.gzhead.time),B(H,H.gzhead.time>>8&255),B(H,H.gzhead.time>>16&255),B(H,H.gzhead.time>>24&255),B(H,H.level===9?2:2<=H.strategy||H.level<2?4:0),B(H,255&H.gzhead.os),H.gzhead.extra&&H.gzhead.extra.length&&(B(H,255&H.gzhead.extra.length),B(H,H.gzhead.extra.length>>8&255)),H.gzhead.hcrc&&(k.adler=b(k.adler,H.pending_buf,H.pending,0)),H.gzindex=0,H.status=69):(B(H,0),B(H,0),B(H,0),B(H,0),B(H,0),B(H,H.level===9?2:2<=H.strategy||H.level<2?4:0),B(H,3),H.status=_);else{var be=8+(H.w_bits-8<<4)<<8;be|=(2<=H.strategy||H.level<2?0:H.level<6?1:H.level===6?2:3)<<6,H.strstart!==0&&(be|=32),be+=31-be%31,H.status=_,M(H,be),H.strstart!==0&&(M(H,k.adler>>>16),M(H,65535&k.adler)),k.adler=1}if(H.status===69)if(H.gzhead.extra){for(q=H.pending;H.gzindex<(65535&H.gzhead.extra.length)&&(H.pending!==H.pending_buf_size||(H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),S(k),q=H.pending,H.pending!==H.pending_buf_size));)B(H,255&H.gzhead.extra[H.gzindex]),H.gzindex++;H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),H.gzindex===H.gzhead.extra.length&&(H.gzindex=0,H.status=73)}else H.status=73;if(H.status===73)if(H.gzhead.name){q=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),S(k),q=H.pending,H.pending===H.pending_buf_size)){le=1;break}le=H.gzindex<H.gzhead.name.length?255&H.gzhead.name.charCodeAt(H.gzindex++):0,B(H,le)}while(le!==0);H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),le===0&&(H.gzindex=0,H.status=91)}else H.status=91;if(H.status===91)if(H.gzhead.comment){q=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),S(k),q=H.pending,H.pending===H.pending_buf_size)){le=1;break}le=H.gzindex<H.gzhead.comment.length?255&H.gzhead.comment.charCodeAt(H.gzindex++):0,B(H,le)}while(le!==0);H.gzhead.hcrc&&H.pending>q&&(k.adler=b(k.adler,H.pending_buf,H.pending-q,q)),le===0&&(H.status=103)}else H.status=103;if(H.status===103&&(H.gzhead.hcrc?(H.pending+2>H.pending_buf_size&&S(k),H.pending+2<=H.pending_buf_size&&(B(H,255&k.adler),B(H,k.adler>>8&255),k.adler=0,H.status=_)):H.status=_),H.pending!==0){if(S(k),k.avail_out===0)return H.last_flush=-1,0}else if(k.avail_in===0&&E(j)<=E(V)&&j!==4)return x(k,-5);if(H.status===666&&k.avail_in!==0)return x(k,-5);if(k.avail_in!==0||H.lookahead!==0||j!==0&&H.status!==666){var ae=H.strategy===2?function(ue,U){for(var R;;){if(ue.lookahead===0&&(N(ue),ue.lookahead===0)){if(U===0)return 1;break}if(ue.match_length=0,R=d._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++,R&&(C(ue,!1),ue.strm.avail_out===0))return 1}return ue.insert=0,U===4?(C(ue,!0),ue.strm.avail_out===0?3:4):ue.last_lit&&(C(ue,!1),ue.strm.avail_out===0)?1:2}(H,j):H.strategy===3?function(ue,U){for(var R,Q,F,re,me=ue.window;;){if(ue.lookahead<=v){if(N(ue),ue.lookahead<=v&&U===0)return 1;if(ue.lookahead===0)break}if(ue.match_length=0,ue.lookahead>=3&&0<ue.strstart&&(Q=me[F=ue.strstart-1])===me[++F]&&Q===me[++F]&&Q===me[++F]){re=ue.strstart+v;do;while(Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&Q===me[++F]&&F<re);ue.match_length=v-(re-F),ue.match_length>ue.lookahead&&(ue.match_length=ue.lookahead)}if(ue.match_length>=3?(R=d._tr_tally(ue,1,ue.match_length-3),ue.lookahead-=ue.match_length,ue.strstart+=ue.match_length,ue.match_length=0):(R=d._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++),R&&(C(ue,!1),ue.strm.avail_out===0))return 1}return ue.insert=0,U===4?(C(ue,!0),ue.strm.avail_out===0?3:4):ue.last_lit&&(C(ue,!1),ue.strm.avail_out===0)?1:2}(H,j):f[H.level].func(H,j);if(ae!==3&&ae!==4||(H.status=666),ae===1||ae===3)return k.avail_out===0&&(H.last_flush=-1),0;if(ae===2&&(j===1?d._tr_align(H):j!==5&&(d._tr_stored_block(H,0,0,!1),j===3&&(T(H.head),H.lookahead===0&&(H.strstart=0,H.block_start=0,H.insert=0))),S(k),k.avail_out===0))return H.last_flush=-1,0}return j!==4?0:H.wrap<=0?1:(H.wrap===2?(B(H,255&k.adler),B(H,k.adler>>8&255),B(H,k.adler>>16&255),B(H,k.adler>>24&255),B(H,255&k.total_in),B(H,k.total_in>>8&255),B(H,k.total_in>>16&255),B(H,k.total_in>>24&255)):(M(H,k.adler>>>16),M(H,65535&k.adler)),S(k),0<H.wrap&&(H.wrap=-H.wrap),H.pending!==0?0:1)},u.deflateEnd=function(k){var j;return k&&k.state?(j=k.state.status)!==42&&j!==69&&j!==73&&j!==91&&j!==103&&j!==_&&j!==666?x(k,g):(k.state=null,j===_?x(k,-3):0):g},u.deflateSetDictionary=function(k,j){var V,H,q,le,be,ae,ue,U,R=j.length;if(!k||!k.state||(le=(V=k.state).wrap)===2||le===1&&V.status!==42||V.lookahead)return g;for(le===1&&(k.adler=m(k.adler,j,R,0)),V.wrap=0,R>=V.w_size&&(le===0&&(T(V.head),V.strstart=0,V.block_start=0,V.insert=0),U=new p.Buf8(V.w_size),p.arraySet(U,j,R-V.w_size,V.w_size,0),j=U,R=V.w_size),be=k.avail_in,ae=k.next_in,ue=k.input,k.avail_in=R,k.next_in=0,k.input=j,N(V);V.lookahead>=3;){for(H=V.strstart,q=V.lookahead-2;V.ins_h=(V.ins_h<<V.hash_shift^V.window[H+3-1])&V.hash_mask,V.prev[H&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=H,H++,--q;);V.strstart=H,V.lookahead=2,N(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=2,V.match_available=0,k.next_in=ae,k.input=ue,k.avail_in=be,V.wrap=le,0},u.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(c,h,u){h.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(c,h,u){h.exports=function(f,p){var d,m,b,A,g,v,O,_,x,E,T,S,C,B,M,D,N,P,X,Z,K,ee,J,ge,k;d=f.state,m=f.next_in,ge=f.input,b=m+(f.avail_in-5),A=f.next_out,k=f.output,g=A-(p-f.avail_out),v=A+(f.avail_out-257),O=d.dmax,_=d.wsize,x=d.whave,E=d.wnext,T=d.window,S=d.hold,C=d.bits,B=d.lencode,M=d.distcode,D=(1<<d.lenbits)-1,N=(1<<d.distbits)-1;e:do{C<15&&(S+=ge[m++]<<C,C+=8,S+=ge[m++]<<C,C+=8),P=B[S&D];t:for(;;){if(S>>>=X=P>>>24,C-=X,(X=P>>>16&255)==0)k[A++]=65535&P;else{if(!(16&X)){if((64&X)==0){P=B[(65535&P)+(S&(1<<X)-1)];continue t}if(32&X){d.mode=12;break e}f.msg="invalid literal/length code",d.mode=30;break e}Z=65535&P,(X&=15)&&(C<X&&(S+=ge[m++]<<C,C+=8),Z+=S&(1<<X)-1,S>>>=X,C-=X),C<15&&(S+=ge[m++]<<C,C+=8,S+=ge[m++]<<C,C+=8),P=M[S&N];n:for(;;){if(S>>>=X=P>>>24,C-=X,!(16&(X=P>>>16&255))){if((64&X)==0){P=M[(65535&P)+(S&(1<<X)-1)];continue n}f.msg="invalid distance code",d.mode=30;break e}if(K=65535&P,C<(X&=15)&&(S+=ge[m++]<<C,(C+=8)<X&&(S+=ge[m++]<<C,C+=8)),O<(K+=S&(1<<X)-1)){f.msg="invalid distance too far back",d.mode=30;break e}if(S>>>=X,C-=X,(X=A-g)<K){if(x<(X=K-X)&&d.sane){f.msg="invalid distance too far back",d.mode=30;break e}if(J=T,(ee=0)===E){if(ee+=_-X,X<Z){for(Z-=X;k[A++]=T[ee++],--X;);ee=A-K,J=k}}else if(E<X){if(ee+=_+E-X,(X-=E)<Z){for(Z-=X;k[A++]=T[ee++],--X;);if(ee=0,E<Z){for(Z-=X=E;k[A++]=T[ee++],--X;);ee=A-K,J=k}}}else if(ee+=E-X,X<Z){for(Z-=X;k[A++]=T[ee++],--X;);ee=A-K,J=k}for(;2<Z;)k[A++]=J[ee++],k[A++]=J[ee++],k[A++]=J[ee++],Z-=3;Z&&(k[A++]=J[ee++],1<Z&&(k[A++]=J[ee++]))}else{for(ee=A-K;k[A++]=k[ee++],k[A++]=k[ee++],k[A++]=k[ee++],2<(Z-=3););Z&&(k[A++]=k[ee++],1<Z&&(k[A++]=k[ee++]))}break}}break}}while(m<b&&A<v);m-=Z=C>>3,S&=(1<<(C-=Z<<3))-1,f.next_in=m,f.next_out=A,f.avail_in=m<b?b-m+5:5-(m-b),f.avail_out=A<v?v-A+257:257-(A-v),d.hold=S,d.bits=C}},{}],49:[function(c,h,u){var f=c("../utils/common"),p=c("./adler32"),d=c("./crc32"),m=c("./inffast"),b=c("./inftrees"),A=-2;function g(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(D){var N;return D&&D.state?(N=D.state,D.total_in=D.total_out=N.total=0,D.msg="",N.wrap&&(D.adler=1&N.wrap),N.mode=1,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new f.Buf32(852),N.distcode=N.distdyn=new f.Buf32(592),N.sane=1,N.back=-1,0):A}function _(D){var N;return D&&D.state?((N=D.state).wsize=0,N.whave=0,N.wnext=0,O(D)):A}function x(D,N){var P,X;return D&&D.state?(X=D.state,N<0?(P=0,N=-N):(P=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?A:(X.window!==null&&X.wbits!==N&&(X.window=null),X.wrap=P,X.wbits=N,_(D))):A}function E(D,N){var P,X;return D?(X=new v,(D.state=X).window=null,(P=x(D,N))!==0&&(D.state=null),P):A}var T,S,C=!0;function B(D){if(C){var N;for(T=new f.Buf32(512),S=new f.Buf32(32),N=0;N<144;)D.lens[N++]=8;for(;N<256;)D.lens[N++]=9;for(;N<280;)D.lens[N++]=7;for(;N<288;)D.lens[N++]=8;for(b(1,D.lens,0,288,T,0,D.work,{bits:9}),N=0;N<32;)D.lens[N++]=5;b(2,D.lens,0,32,S,0,D.work,{bits:5}),C=!1}D.lencode=T,D.lenbits=9,D.distcode=S,D.distbits=5}function M(D,N,P,X){var Z,K=D.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new f.Buf8(K.wsize)),X>=K.wsize?(f.arraySet(K.window,N,P-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(X<(Z=K.wsize-K.wnext)&&(Z=X),f.arraySet(K.window,N,P-X,Z,K.wnext),(X-=Z)?(f.arraySet(K.window,N,P-X,X,0),K.wnext=X,K.whave=K.wsize):(K.wnext+=Z,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=Z))),0}u.inflateReset=_,u.inflateReset2=x,u.inflateResetKeep=O,u.inflateInit=function(D){return E(D,15)},u.inflateInit2=E,u.inflate=function(D,N){var P,X,Z,K,ee,J,ge,k,j,V,H,q,le,be,ae,ue,U,R,Q,F,re,me,oe,he,de=0,pe=new f.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return A;(P=D.state).mode===12&&(P.mode=13),ee=D.next_out,Z=D.output,ge=D.avail_out,K=D.next_in,X=D.input,J=D.avail_in,k=P.hold,j=P.bits,V=J,H=ge,me=0;e:for(;;)switch(P.mode){case 1:if(P.wrap===0){P.mode=13;break}for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(2&P.wrap&&k===35615){pe[P.check=0]=255&k,pe[1]=k>>>8&255,P.check=d(P.check,pe,2,0),j=k=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&k)<<8)+(k>>8))%31){D.msg="incorrect header check",P.mode=30;break}if((15&k)!=8){D.msg="unknown compression method",P.mode=30;break}if(j-=4,re=8+(15&(k>>>=4)),P.wbits===0)P.wbits=re;else if(re>P.wbits){D.msg="invalid window size",P.mode=30;break}P.dmax=1<<re,D.adler=P.check=1,P.mode=512&k?10:12,j=k=0;break;case 2:for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(P.flags=k,(255&P.flags)!=8){D.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){D.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=k>>8&1),512&P.flags&&(pe[0]=255&k,pe[1]=k>>>8&255,P.check=d(P.check,pe,2,0)),j=k=0,P.mode=3;case 3:for(;j<32;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.head&&(P.head.time=k),512&P.flags&&(pe[0]=255&k,pe[1]=k>>>8&255,pe[2]=k>>>16&255,pe[3]=k>>>24&255,P.check=d(P.check,pe,4,0)),j=k=0,P.mode=4;case 4:for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.head&&(P.head.xflags=255&k,P.head.os=k>>8),512&P.flags&&(pe[0]=255&k,pe[1]=k>>>8&255,P.check=d(P.check,pe,2,0)),j=k=0,P.mode=5;case 5:if(1024&P.flags){for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.length=k,P.head&&(P.head.extra_len=k),512&P.flags&&(pe[0]=255&k,pe[1]=k>>>8&255,P.check=d(P.check,pe,2,0)),j=k=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(J<(q=P.length)&&(q=J),q&&(P.head&&(re=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),f.arraySet(P.head.extra,X,K,q,re)),512&P.flags&&(P.check=d(P.check,X,q,K)),J-=q,K+=q,P.length-=q),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(J===0)break e;for(q=0;re=X[K+q++],P.head&&re&&P.length<65536&&(P.head.name+=String.fromCharCode(re)),re&&q<J;);if(512&P.flags&&(P.check=d(P.check,X,q,K)),J-=q,K+=q,re)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(J===0)break e;for(q=0;re=X[K+q++],P.head&&re&&P.length<65536&&(P.head.comment+=String.fromCharCode(re)),re&&q<J;);if(512&P.flags&&(P.check=d(P.check,X,q,K)),J-=q,K+=q,re)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;j<16;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(k!==(65535&P.check)){D.msg="header crc mismatch",P.mode=30;break}j=k=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),D.adler=P.check=0,P.mode=12;break;case 10:for(;j<32;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}D.adler=P.check=g(k),j=k=0,P.mode=11;case 11:if(P.havedict===0)return D.next_out=ee,D.avail_out=ge,D.next_in=K,D.avail_in=J,P.hold=k,P.bits=j,2;D.adler=P.check=1,P.mode=12;case 12:if(N===5||N===6)break e;case 13:if(P.last){k>>>=7&j,j-=7&j,P.mode=27;break}for(;j<3;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}switch(P.last=1&k,j-=1,3&(k>>>=1)){case 0:P.mode=14;break;case 1:if(B(P),P.mode=20,N!==6)break;k>>>=2,j-=2;break e;case 2:P.mode=17;break;case 3:D.msg="invalid block type",P.mode=30}k>>>=2,j-=2;break;case 14:for(k>>>=7&j,j-=7&j;j<32;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if((65535&k)!=(k>>>16^65535)){D.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&k,j=k=0,P.mode=15,N===6)break e;case 15:P.mode=16;case 16:if(q=P.length){if(J<q&&(q=J),ge<q&&(q=ge),q===0)break e;f.arraySet(Z,X,K,q,ee),J-=q,K+=q,ge-=q,ee+=q,P.length-=q;break}P.mode=12;break;case 17:for(;j<14;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(P.nlen=257+(31&k),k>>>=5,j-=5,P.ndist=1+(31&k),k>>>=5,j-=5,P.ncode=4+(15&k),k>>>=4,j-=4,286<P.nlen||30<P.ndist){D.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;j<3;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.lens[xe[P.have++]]=7&k,k>>>=3,j-=3}for(;P.have<19;)P.lens[xe[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,oe={bits:P.lenbits},me=b(0,P.lens,0,19,P.lencode,0,P.work,oe),P.lenbits=oe.bits,me){D.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;ue=(de=P.lencode[k&(1<<P.lenbits)-1])>>>16&255,U=65535&de,!((ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(U<16)k>>>=ae,j-=ae,P.lens[P.have++]=U;else{if(U===16){for(he=ae+2;j<he;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(k>>>=ae,j-=ae,P.have===0){D.msg="invalid bit length repeat",P.mode=30;break}re=P.lens[P.have-1],q=3+(3&k),k>>>=2,j-=2}else if(U===17){for(he=ae+3;j<he;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}j-=ae,re=0,q=3+(7&(k>>>=ae)),k>>>=3,j-=3}else{for(he=ae+7;j<he;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}j-=ae,re=0,q=11+(127&(k>>>=ae)),k>>>=7,j-=7}if(P.have+q>P.nlen+P.ndist){D.msg="invalid bit length repeat",P.mode=30;break}for(;q--;)P.lens[P.have++]=re}}if(P.mode===30)break;if(P.lens[256]===0){D.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,oe={bits:P.lenbits},me=b(1,P.lens,0,P.nlen,P.lencode,0,P.work,oe),P.lenbits=oe.bits,me){D.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,oe={bits:P.distbits},me=b(2,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,oe),P.distbits=oe.bits,me){D.msg="invalid distances set",P.mode=30;break}if(P.mode=20,N===6)break e;case 20:P.mode=21;case 21:if(6<=J&&258<=ge){D.next_out=ee,D.avail_out=ge,D.next_in=K,D.avail_in=J,P.hold=k,P.bits=j,m(D,H),ee=D.next_out,Z=D.output,ge=D.avail_out,K=D.next_in,X=D.input,J=D.avail_in,k=P.hold,j=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;ue=(de=P.lencode[k&(1<<P.lenbits)-1])>>>16&255,U=65535&de,!((ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(ue&&(240&ue)==0){for(R=ae,Q=ue,F=U;ue=(de=P.lencode[F+((k&(1<<R+Q)-1)>>R)])>>>16&255,U=65535&de,!(R+(ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}k>>>=R,j-=R,P.back+=R}if(k>>>=ae,j-=ae,P.back+=ae,P.length=U,ue===0){P.mode=26;break}if(32&ue){P.back=-1,P.mode=12;break}if(64&ue){D.msg="invalid literal/length code",P.mode=30;break}P.extra=15&ue,P.mode=22;case 22:if(P.extra){for(he=P.extra;j<he;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.length+=k&(1<<P.extra)-1,k>>>=P.extra,j-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;ue=(de=P.distcode[k&(1<<P.distbits)-1])>>>16&255,U=65535&de,!((ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if((240&ue)==0){for(R=ae,Q=ue,F=U;ue=(de=P.distcode[F+((k&(1<<R+Q)-1)>>R)])>>>16&255,U=65535&de,!(R+(ae=de>>>24)<=j);){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}k>>>=R,j-=R,P.back+=R}if(k>>>=ae,j-=ae,P.back+=ae,64&ue){D.msg="invalid distance code",P.mode=30;break}P.offset=U,P.extra=15&ue,P.mode=24;case 24:if(P.extra){for(he=P.extra;j<he;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}P.offset+=k&(1<<P.extra)-1,k>>>=P.extra,j-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){D.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(ge===0)break e;if(q=H-ge,P.offset>q){if((q=P.offset-q)>P.whave&&P.sane){D.msg="invalid distance too far back",P.mode=30;break}le=q>P.wnext?(q-=P.wnext,P.wsize-q):P.wnext-q,q>P.length&&(q=P.length),be=P.window}else be=Z,le=ee-P.offset,q=P.length;for(ge<q&&(q=ge),ge-=q,P.length-=q;Z[ee++]=be[le++],--q;);P.length===0&&(P.mode=21);break;case 26:if(ge===0)break e;Z[ee++]=P.length,ge--,P.mode=21;break;case 27:if(P.wrap){for(;j<32;){if(J===0)break e;J--,k|=X[K++]<<j,j+=8}if(H-=ge,D.total_out+=H,P.total+=H,H&&(D.adler=P.check=P.flags?d(P.check,Z,H,ee-H):p(P.check,Z,H,ee-H)),H=ge,(P.flags?k:g(k))!==P.check){D.msg="incorrect data check",P.mode=30;break}j=k=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;j<32;){if(J===0)break e;J--,k+=X[K++]<<j,j+=8}if(k!==(4294967295&P.total)){D.msg="incorrect length check",P.mode=30;break}j=k=0}P.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;default:return A}return D.next_out=ee,D.avail_out=ge,D.next_in=K,D.avail_in=J,P.hold=k,P.bits=j,(P.wsize||H!==D.avail_out&&P.mode<30&&(P.mode<27||N!==4))&&M(D,D.output,D.next_out,H-D.avail_out)?(P.mode=31,-4):(V-=D.avail_in,H-=D.avail_out,D.total_in+=V,D.total_out+=H,P.total+=H,P.wrap&&H&&(D.adler=P.check=P.flags?d(P.check,Z,H,D.next_out-H):p(P.check,Z,H,D.next_out-H)),D.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(V==0&&H===0||N===4)&&me===0&&(me=-5),me)},u.inflateEnd=function(D){if(!D||!D.state)return A;var N=D.state;return N.window&&(N.window=null),D.state=null,0},u.inflateGetHeader=function(D,N){var P;return D&&D.state?(2&(P=D.state).wrap)==0?A:((P.head=N).done=!1,0):A},u.inflateSetDictionary=function(D,N){var P,X=N.length;return D&&D.state?(P=D.state).wrap!==0&&P.mode!==11?A:P.mode===11&&p(1,N,X,0)!==P.check?-3:M(D,N,X,X)?(P.mode=31,-4):(P.havedict=1,0):A},u.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(c,h,u){var f=c("../utils/common"),p=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];h.exports=function(A,g,v,O,_,x,E,T){var S,C,B,M,D,N,P,X,Z,K=T.bits,ee=0,J=0,ge=0,k=0,j=0,V=0,H=0,q=0,le=0,be=0,ae=null,ue=0,U=new f.Buf16(16),R=new f.Buf16(16),Q=null,F=0;for(ee=0;ee<=15;ee++)U[ee]=0;for(J=0;J<O;J++)U[g[v+J]]++;for(j=K,k=15;1<=k&&U[k]===0;k--);if(k<j&&(j=k),k===0)return _[x++]=20971520,_[x++]=20971520,T.bits=1,0;for(ge=1;ge<k&&U[ge]===0;ge++);for(j<ge&&(j=ge),ee=q=1;ee<=15;ee++)if(q<<=1,(q-=U[ee])<0)return-1;if(0<q&&(A===0||k!==1))return-1;for(R[1]=0,ee=1;ee<15;ee++)R[ee+1]=R[ee]+U[ee];for(J=0;J<O;J++)g[v+J]!==0&&(E[R[g[v+J]]++]=J);if(N=A===0?(ae=Q=E,19):A===1?(ae=p,ue-=257,Q=d,F-=257,256):(ae=m,Q=b,-1),ee=ge,D=x,H=J=be=0,B=-1,M=(le=1<<(V=j))-1,A===1&&852<le||A===2&&592<le)return 1;for(;;){for(P=ee-H,Z=E[J]<N?(X=0,E[J]):E[J]>N?(X=Q[F+E[J]],ae[ue+E[J]]):(X=96,0),S=1<<ee-H,ge=C=1<<V;_[D+(be>>H)+(C-=S)]=P<<24|X<<16|Z|0,C!==0;);for(S=1<<ee-1;be&S;)S>>=1;if(S!==0?(be&=S-1,be+=S):be=0,J++,--U[ee]==0){if(ee===k)break;ee=g[v+E[J]]}if(j<ee&&(be&M)!==B){for(H===0&&(H=j),D+=ge,q=1<<(V=ee-H);V+H<k&&!((q-=U[V+H])<=0);)V++,q<<=1;if(le+=1<<V,A===1&&852<le||A===2&&592<le)return 1;_[B=be&M]=j<<24|V<<16|D-x|0}}return be!==0&&(_[D+be]=ee-H<<24|4194304|0),T.bits=j,0}},{"../utils/common":41}],51:[function(c,h,u){h.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(c,h,u){var f=c("../utils/common");function p(Q){for(var F=Q.length;0<=--F;)Q[F]=0}var d=256,m=286,b=30,A=15,g=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],v=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(576);p(x);var E=new Array(60);p(E);var T=new Array(512);p(T);var S=new Array(256);p(S);var C=new Array(29);p(C);var B,M,D,N=new Array(b);function P(Q,F,re,me,oe){this.static_tree=Q,this.extra_bits=F,this.extra_base=re,this.elems=me,this.max_length=oe,this.has_stree=Q&&Q.length}function X(Q,F){this.dyn_tree=Q,this.max_code=0,this.stat_desc=F}function Z(Q){return Q<256?T[Q]:T[256+(Q>>>7)]}function K(Q,F){Q.pending_buf[Q.pending++]=255&F,Q.pending_buf[Q.pending++]=F>>>8&255}function ee(Q,F,re){Q.bi_valid>16-re?(Q.bi_buf|=F<<Q.bi_valid&65535,K(Q,Q.bi_buf),Q.bi_buf=F>>16-Q.bi_valid,Q.bi_valid+=re-16):(Q.bi_buf|=F<<Q.bi_valid&65535,Q.bi_valid+=re)}function J(Q,F,re){ee(Q,re[2*F],re[2*F+1])}function ge(Q,F){for(var re=0;re|=1&Q,Q>>>=1,re<<=1,0<--F;);return re>>>1}function k(Q,F,re){var me,oe,he=new Array(16),de=0;for(me=1;me<=A;me++)he[me]=de=de+re[me-1]<<1;for(oe=0;oe<=F;oe++){var pe=Q[2*oe+1];pe!==0&&(Q[2*oe]=ge(he[pe]++,pe))}}function j(Q){var F;for(F=0;F<m;F++)Q.dyn_ltree[2*F]=0;for(F=0;F<b;F++)Q.dyn_dtree[2*F]=0;for(F=0;F<19;F++)Q.bl_tree[2*F]=0;Q.dyn_ltree[512]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0}function V(Q){8<Q.bi_valid?K(Q,Q.bi_buf):0<Q.bi_valid&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0}function H(Q,F,re,me){var oe=2*F,he=2*re;return Q[oe]<Q[he]||Q[oe]===Q[he]&&me[F]<=me[re]}function q(Q,F,re){for(var me=Q.heap[re],oe=re<<1;oe<=Q.heap_len&&(oe<Q.heap_len&&H(F,Q.heap[oe+1],Q.heap[oe],Q.depth)&&oe++,!H(F,me,Q.heap[oe],Q.depth));)Q.heap[re]=Q.heap[oe],re=oe,oe<<=1;Q.heap[re]=me}function le(Q,F,re){var me,oe,he,de,pe=0;if(Q.last_lit!==0)for(;me=Q.pending_buf[Q.d_buf+2*pe]<<8|Q.pending_buf[Q.d_buf+2*pe+1],oe=Q.pending_buf[Q.l_buf+pe],pe++,me===0?J(Q,oe,F):(J(Q,(he=S[oe])+d+1,F),(de=g[he])!==0&&ee(Q,oe-=C[he],de),J(Q,he=Z(--me),re),(de=v[he])!==0&&ee(Q,me-=N[he],de)),pe<Q.last_lit;);J(Q,256,F)}function be(Q,F){var re,me,oe,he=F.dyn_tree,de=F.stat_desc.static_tree,pe=F.stat_desc.has_stree,xe=F.stat_desc.elems,Fe=-1;for(Q.heap_len=0,Q.heap_max=573,re=0;re<xe;re++)he[2*re]!==0?(Q.heap[++Q.heap_len]=Fe=re,Q.depth[re]=0):he[2*re+1]=0;for(;Q.heap_len<2;)he[2*(oe=Q.heap[++Q.heap_len]=Fe<2?++Fe:0)]=1,Q.depth[oe]=0,Q.opt_len--,pe&&(Q.static_len-=de[2*oe+1]);for(F.max_code=Fe,re=Q.heap_len>>1;1<=re;re--)q(Q,he,re);for(oe=xe;re=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],q(Q,he,1),me=Q.heap[1],Q.heap[--Q.heap_max]=re,Q.heap[--Q.heap_max]=me,he[2*oe]=he[2*re]+he[2*me],Q.depth[oe]=(Q.depth[re]>=Q.depth[me]?Q.depth[re]:Q.depth[me])+1,he[2*re+1]=he[2*me+1]=oe,Q.heap[1]=oe++,q(Q,he,1),2<=Q.heap_len;);Q.heap[--Q.heap_max]=Q.heap[1],function(st,I){var L,z,te,se,ce,Oe,ze=I.dyn_tree,Ve=I.max_code,Rt=I.stat_desc.static_tree,ot=I.stat_desc.has_stree,Et=I.stat_desc.extra_bits,Ua=I.stat_desc.extra_base,Ds=I.stat_desc.max_length,ko=0;for(se=0;se<=A;se++)st.bl_count[se]=0;for(ze[2*st.heap[st.heap_max]+1]=0,L=st.heap_max+1;L<573;L++)Ds<(se=ze[2*ze[2*(z=st.heap[L])+1]+1]+1)&&(se=Ds,ko++),ze[2*z+1]=se,Ve<z||(st.bl_count[se]++,ce=0,Ua<=z&&(ce=Et[z-Ua]),Oe=ze[2*z],st.opt_len+=Oe*(se+ce),ot&&(st.static_len+=Oe*(Rt[2*z+1]+ce)));if(ko!==0){do{for(se=Ds-1;st.bl_count[se]===0;)se--;st.bl_count[se]--,st.bl_count[se+1]+=2,st.bl_count[Ds]--,ko-=2}while(0<ko);for(se=Ds;se!==0;se--)for(z=st.bl_count[se];z!==0;)Ve<(te=st.heap[--L])||(ze[2*te+1]!==se&&(st.opt_len+=(se-ze[2*te+1])*ze[2*te],ze[2*te+1]=se),z--)}}(Q,F),k(he,Fe,Q.bl_count)}function ae(Q,F,re){var me,oe,he=-1,de=F[1],pe=0,xe=7,Fe=4;for(de===0&&(xe=138,Fe=3),F[2*(re+1)+1]=65535,me=0;me<=re;me++)oe=de,de=F[2*(me+1)+1],++pe<xe&&oe===de||(pe<Fe?Q.bl_tree[2*oe]+=pe:oe!==0?(oe!==he&&Q.bl_tree[2*oe]++,Q.bl_tree[32]++):pe<=10?Q.bl_tree[34]++:Q.bl_tree[36]++,he=oe,Fe=(pe=0)===de?(xe=138,3):oe===de?(xe=6,3):(xe=7,4))}function ue(Q,F,re){var me,oe,he=-1,de=F[1],pe=0,xe=7,Fe=4;for(de===0&&(xe=138,Fe=3),me=0;me<=re;me++)if(oe=de,de=F[2*(me+1)+1],!(++pe<xe&&oe===de)){if(pe<Fe)for(;J(Q,oe,Q.bl_tree),--pe!=0;);else oe!==0?(oe!==he&&(J(Q,oe,Q.bl_tree),pe--),J(Q,16,Q.bl_tree),ee(Q,pe-3,2)):pe<=10?(J(Q,17,Q.bl_tree),ee(Q,pe-3,3)):(J(Q,18,Q.bl_tree),ee(Q,pe-11,7));he=oe,Fe=(pe=0)===de?(xe=138,3):oe===de?(xe=6,3):(xe=7,4)}}p(N);var U=!1;function R(Q,F,re,me){ee(Q,0+(me?1:0),3),function(oe,he,de,pe){V(oe),K(oe,de),K(oe,~de),f.arraySet(oe.pending_buf,oe.window,he,de,oe.pending),oe.pending+=de}(Q,F,re)}u._tr_init=function(Q){U||(function(){var F,re,me,oe,he,de=new Array(16);for(oe=me=0;oe<28;oe++)for(C[oe]=me,F=0;F<1<<g[oe];F++)S[me++]=oe;for(S[me-1]=oe,oe=he=0;oe<16;oe++)for(N[oe]=he,F=0;F<1<<v[oe];F++)T[he++]=oe;for(he>>=7;oe<b;oe++)for(N[oe]=he<<7,F=0;F<1<<v[oe]-7;F++)T[256+he++]=oe;for(re=0;re<=A;re++)de[re]=0;for(F=0;F<=143;)x[2*F+1]=8,F++,de[8]++;for(;F<=255;)x[2*F+1]=9,F++,de[9]++;for(;F<=279;)x[2*F+1]=7,F++,de[7]++;for(;F<=287;)x[2*F+1]=8,F++,de[8]++;for(k(x,287,de),F=0;F<b;F++)E[2*F+1]=5,E[2*F]=ge(F,5);B=new P(x,g,257,m,A),M=new P(E,v,0,b,A),D=new P(new Array(0),O,0,19,7)}(),U=!0),Q.l_desc=new X(Q.dyn_ltree,B),Q.d_desc=new X(Q.dyn_dtree,M),Q.bl_desc=new X(Q.bl_tree,D),Q.bi_buf=0,Q.bi_valid=0,j(Q)},u._tr_stored_block=R,u._tr_flush_block=function(Q,F,re,me){var oe,he,de=0;0<Q.level?(Q.strm.data_type===2&&(Q.strm.data_type=function(pe){var xe,Fe=4093624447;for(xe=0;xe<=31;xe++,Fe>>>=1)if(1&Fe&&pe.dyn_ltree[2*xe]!==0)return 0;if(pe.dyn_ltree[18]!==0||pe.dyn_ltree[20]!==0||pe.dyn_ltree[26]!==0)return 1;for(xe=32;xe<d;xe++)if(pe.dyn_ltree[2*xe]!==0)return 1;return 0}(Q)),be(Q,Q.l_desc),be(Q,Q.d_desc),de=function(pe){var xe;for(ae(pe,pe.dyn_ltree,pe.l_desc.max_code),ae(pe,pe.dyn_dtree,pe.d_desc.max_code),be(pe,pe.bl_desc),xe=18;3<=xe&&pe.bl_tree[2*_[xe]+1]===0;xe--);return pe.opt_len+=3*(xe+1)+5+5+4,xe}(Q),oe=Q.opt_len+3+7>>>3,(he=Q.static_len+3+7>>>3)<=oe&&(oe=he)):oe=he=re+5,re+4<=oe&&F!==-1?R(Q,F,re,me):Q.strategy===4||he===oe?(ee(Q,2+(me?1:0),3),le(Q,x,E)):(ee(Q,4+(me?1:0),3),function(pe,xe,Fe,st){var I;for(ee(pe,xe-257,5),ee(pe,Fe-1,5),ee(pe,st-4,4),I=0;I<st;I++)ee(pe,pe.bl_tree[2*_[I]+1],3);ue(pe,pe.dyn_ltree,xe-1),ue(pe,pe.dyn_dtree,Fe-1)}(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,de+1),le(Q,Q.dyn_ltree,Q.dyn_dtree)),j(Q),me&&V(Q)},u._tr_tally=function(Q,F,re){return Q.pending_buf[Q.d_buf+2*Q.last_lit]=F>>>8&255,Q.pending_buf[Q.d_buf+2*Q.last_lit+1]=255&F,Q.pending_buf[Q.l_buf+Q.last_lit]=255&re,Q.last_lit++,F===0?Q.dyn_ltree[2*re]++:(Q.matches++,F--,Q.dyn_ltree[2*(S[re]+d+1)]++,Q.dyn_dtree[2*Z(F)]++),Q.last_lit===Q.lit_bufsize-1},u._tr_align=function(Q){ee(Q,2,3),J(Q,256,x),function(F){F.bi_valid===16?(K(F,F.bi_buf),F.bi_buf=0,F.bi_valid=0):8<=F.bi_valid&&(F.pending_buf[F.pending++]=255&F.bi_buf,F.bi_buf>>=8,F.bi_valid-=8)}(Q)}},{"../utils/common":41}],53:[function(c,h,u){h.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(c,h,u){h.exports=typeof setImmediate=="function"?setImmediate:function(){var f=[].slice.apply(arguments);f.splice(1,0,0),setTimeout.apply(null,f)}},{}]},{},[10])(10)},155:o=>{var a,l,c=o.exports={};function h(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function f(_){if(a===setTimeout)return setTimeout(_,0);if((a===h||!a)&&setTimeout)return a=setTimeout,setTimeout(_,0);try{return a(_,0)}catch{try{return a.call(null,_,0)}catch{return a.call(this,_,0)}}}(function(){try{a=typeof setTimeout=="function"?setTimeout:h}catch{a=h}try{l=typeof clearTimeout=="function"?clearTimeout:u}catch{l=u}})();var p,d=[],m=!1,b=-1;function A(){m&&p&&(m=!1,p.length?d=p.concat(d):b=-1,d.length&&g())}function g(){if(!m){var _=f(A);m=!0;for(var x=d.length;x;){for(p=d,d=[];++b<x;)p&&p[b].run();b=-1,x=d.length}p=null,m=!1,function(E){if(l===clearTimeout)return clearTimeout(E);if((l===u||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(E);try{l(E)}catch{try{return l.call(null,E)}catch{return l.call(this,E)}}}(_)}}function v(_,x){this.fun=_,this.array=x}function O(){}c.nextTick=function(_){var x=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)x[E-1]=arguments[E];d.push(new v(_,x)),d.length!==1||m||f(g)},v.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=O,c.addListener=O,c.once=O,c.off=O,c.removeListener=O,c.removeAllListeners=O,c.emit=O,c.prependListener=O,c.prependOnceListener=O,c.listeners=function(_){return[]},c.binding=function(_){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(_){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},509:(o,a,l)=>{var c=l(764),h=c.Buffer;function u(p,d){for(var m in p)d[m]=p[m]}function f(p,d,m){return h(p,d,m)}h.from&&h.alloc&&h.allocUnsafe&&h.allocUnsafeSlow?o.exports=c:(u(c,a),a.Buffer=f),u(h,f),f.from=function(p,d,m){if(typeof p=="number")throw new TypeError("Argument must not be a number");return h(p,d,m)},f.alloc=function(p,d,m){if(typeof p!="number")throw new TypeError("Argument must be a number");var b=h(p);return d!==void 0?typeof m=="string"?b.fill(d,m):b.fill(d):b.fill(0),b},f.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return h(p)},f.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return c.SlowBuffer(p)}},99:(o,a,l)=>{(function(c){c.parser=function(U,R){return new f(U,R)},c.SAXParser=f,c.SAXStream=d,c.createStream=function(U,R){return new d(U,R)},c.MAX_BUFFER_LENGTH=65536;var h,u=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function f(U,R){if(!(this instanceof f))return new f(U,R);var Q=this;(function(F){for(var re=0,me=u.length;re<me;re++)F[u[re]]=""})(Q),Q.q=Q.c="",Q.bufferCheckPosition=c.MAX_BUFFER_LENGTH,Q.opt=R||{},Q.opt.lowercase=Q.opt.lowercase||Q.opt.lowercasetags,Q.looseCase=Q.opt.lowercase?"toLowerCase":"toUpperCase",Q.tags=[],Q.closed=Q.closedRoot=Q.sawRoot=!1,Q.tag=Q.error=null,Q.strict=!!U,Q.noscript=!(!U&&!Q.opt.noscript),Q.state=N.BEGIN,Q.strictEntities=Q.opt.strictEntities,Q.ENTITIES=Q.strictEntities?Object.create(c.XML_ENTITIES):Object.create(c.ENTITIES),Q.attribList=[],Q.opt.xmlns&&(Q.ns=Object.create(A)),Q.trackPosition=Q.opt.position!==!1,Q.trackPosition&&(Q.position=Q.line=Q.column=0),X(Q,"onready")}c.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(U){function R(){}return R.prototype=U,new R}),Object.keys||(Object.keys=function(U){var R=[];for(var Q in U)U.hasOwnProperty(Q)&&R.push(Q);return R}),f.prototype={end:function(){ge(this)},write:function(U){var R=this;if(this.error)throw this.error;if(R.closed)return J(R,"Cannot write after close. Assign an onready handler.");if(U===null)return ge(R);typeof U=="object"&&(U=U.toString());for(var Q=0,F="";F=ue(U,Q++),R.c=F,F;)switch(R.trackPosition&&(R.position++,F===`
`?(R.line++,R.column=0):R.column++),R.state){case N.BEGIN:if(R.state=N.BEGIN_WHITESPACE,F==="\uFEFF")continue;ae(R,F);continue;case N.BEGIN_WHITESPACE:ae(R,F);continue;case N.TEXT:if(R.sawRoot&&!R.closedRoot){for(var re=Q-1;F&&F!=="<"&&F!=="&";)(F=ue(U,Q++))&&R.trackPosition&&(R.position++,F===`
`?(R.line++,R.column=0):R.column++);R.textNode+=U.substring(re,Q-1)}F!=="<"||R.sawRoot&&R.closedRoot&&!R.strict?(x(F)||R.sawRoot&&!R.closedRoot||k(R,"Text data outside of root node."),F==="&"?R.state=N.TEXT_ENTITY:R.textNode+=F):(R.state=N.OPEN_WAKA,R.startTagPosition=R.position);continue;case N.SCRIPT:F==="<"?R.state=N.SCRIPT_ENDING:R.script+=F;continue;case N.SCRIPT_ENDING:F==="/"?R.state=N.CLOSE_TAG:(R.script+="<"+F,R.state=N.SCRIPT);continue;case N.OPEN_WAKA:if(F==="!")R.state=N.SGML_DECL,R.sgmlDecl="";else if(!x(F))if(S(g,F))R.state=N.OPEN_TAG,R.tagName=F;else if(F==="/")R.state=N.CLOSE_TAG,R.tagName="";else if(F==="?")R.state=N.PROC_INST,R.procInstName=R.procInstBody="";else{if(k(R,"Unencoded <"),R.startTagPosition+1<R.position){var me=R.position-R.startTagPosition;F=new Array(me).join(" ")+F}R.textNode+="<"+F,R.state=N.TEXT}continue;case N.SGML_DECL:(R.sgmlDecl+F).toUpperCase()==="[CDATA["?(Z(R,"onopencdata"),R.state=N.CDATA,R.sgmlDecl="",R.cdata=""):R.sgmlDecl+F==="--"?(R.state=N.COMMENT,R.comment="",R.sgmlDecl=""):(R.sgmlDecl+F).toUpperCase()==="DOCTYPE"?(R.state=N.DOCTYPE,(R.doctype||R.sawRoot)&&k(R,"Inappropriately located doctype declaration"),R.doctype="",R.sgmlDecl=""):F===">"?(Z(R,"onsgmldeclaration",R.sgmlDecl),R.sgmlDecl="",R.state=N.TEXT):(E(F)&&(R.state=N.SGML_DECL_QUOTED),R.sgmlDecl+=F);continue;case N.SGML_DECL_QUOTED:F===R.q&&(R.state=N.SGML_DECL,R.q=""),R.sgmlDecl+=F;continue;case N.DOCTYPE:F===">"?(R.state=N.TEXT,Z(R,"ondoctype",R.doctype),R.doctype=!0):(R.doctype+=F,F==="["?R.state=N.DOCTYPE_DTD:E(F)&&(R.state=N.DOCTYPE_QUOTED,R.q=F));continue;case N.DOCTYPE_QUOTED:R.doctype+=F,F===R.q&&(R.q="",R.state=N.DOCTYPE);continue;case N.DOCTYPE_DTD:R.doctype+=F,F==="]"?R.state=N.DOCTYPE:E(F)&&(R.state=N.DOCTYPE_DTD_QUOTED,R.q=F);continue;case N.DOCTYPE_DTD_QUOTED:R.doctype+=F,F===R.q&&(R.state=N.DOCTYPE_DTD,R.q="");continue;case N.COMMENT:F==="-"?R.state=N.COMMENT_ENDING:R.comment+=F;continue;case N.COMMENT_ENDING:F==="-"?(R.state=N.COMMENT_ENDED,R.comment=ee(R.opt,R.comment),R.comment&&Z(R,"oncomment",R.comment),R.comment=""):(R.comment+="-"+F,R.state=N.COMMENT);continue;case N.COMMENT_ENDED:F!==">"?(k(R,"Malformed comment"),R.comment+="--"+F,R.state=N.COMMENT):R.state=N.TEXT;continue;case N.CDATA:F==="]"?R.state=N.CDATA_ENDING:R.cdata+=F;continue;case N.CDATA_ENDING:F==="]"?R.state=N.CDATA_ENDING_2:(R.cdata+="]"+F,R.state=N.CDATA);continue;case N.CDATA_ENDING_2:F===">"?(R.cdata&&Z(R,"oncdata",R.cdata),Z(R,"onclosecdata"),R.cdata="",R.state=N.TEXT):F==="]"?R.cdata+="]":(R.cdata+="]]"+F,R.state=N.CDATA);continue;case N.PROC_INST:F==="?"?R.state=N.PROC_INST_ENDING:x(F)?R.state=N.PROC_INST_BODY:R.procInstName+=F;continue;case N.PROC_INST_BODY:if(!R.procInstBody&&x(F))continue;F==="?"?R.state=N.PROC_INST_ENDING:R.procInstBody+=F;continue;case N.PROC_INST_ENDING:F===">"?(Z(R,"onprocessinginstruction",{name:R.procInstName,body:R.procInstBody}),R.procInstName=R.procInstBody="",R.state=N.TEXT):(R.procInstBody+="?"+F,R.state=N.PROC_INST_BODY);continue;case N.OPEN_TAG:S(v,F)?R.tagName+=F:(j(R),F===">"?q(R):F==="/"?R.state=N.OPEN_TAG_SLASH:(x(F)||k(R,"Invalid character in tag name"),R.state=N.ATTRIB));continue;case N.OPEN_TAG_SLASH:F===">"?(q(R,!0),le(R)):(k(R,"Forward-slash in opening tag not followed by >"),R.state=N.ATTRIB);continue;case N.ATTRIB:if(x(F))continue;F===">"?q(R):F==="/"?R.state=N.OPEN_TAG_SLASH:S(g,F)?(R.attribName=F,R.attribValue="",R.state=N.ATTRIB_NAME):k(R,"Invalid attribute name");continue;case N.ATTRIB_NAME:F==="="?R.state=N.ATTRIB_VALUE:F===">"?(k(R,"Attribute without value"),R.attribValue=R.attribName,H(R),q(R)):x(F)?R.state=N.ATTRIB_NAME_SAW_WHITE:S(v,F)?R.attribName+=F:k(R,"Invalid attribute name");continue;case N.ATTRIB_NAME_SAW_WHITE:if(F==="=")R.state=N.ATTRIB_VALUE;else{if(x(F))continue;k(R,"Attribute without value"),R.tag.attributes[R.attribName]="",R.attribValue="",Z(R,"onattribute",{name:R.attribName,value:""}),R.attribName="",F===">"?q(R):S(g,F)?(R.attribName=F,R.state=N.ATTRIB_NAME):(k(R,"Invalid attribute name"),R.state=N.ATTRIB)}continue;case N.ATTRIB_VALUE:if(x(F))continue;E(F)?(R.q=F,R.state=N.ATTRIB_VALUE_QUOTED):(k(R,"Unquoted attribute value"),R.state=N.ATTRIB_VALUE_UNQUOTED,R.attribValue=F);continue;case N.ATTRIB_VALUE_QUOTED:if(F!==R.q){F==="&"?R.state=N.ATTRIB_VALUE_ENTITY_Q:R.attribValue+=F;continue}H(R),R.q="",R.state=N.ATTRIB_VALUE_CLOSED;continue;case N.ATTRIB_VALUE_CLOSED:x(F)?R.state=N.ATTRIB:F===">"?q(R):F==="/"?R.state=N.OPEN_TAG_SLASH:S(g,F)?(k(R,"No whitespace between attributes"),R.attribName=F,R.attribValue="",R.state=N.ATTRIB_NAME):k(R,"Invalid attribute name");continue;case N.ATTRIB_VALUE_UNQUOTED:if(!T(F)){F==="&"?R.state=N.ATTRIB_VALUE_ENTITY_U:R.attribValue+=F;continue}H(R),F===">"?q(R):R.state=N.ATTRIB;continue;case N.CLOSE_TAG:if(R.tagName)F===">"?le(R):S(v,F)?R.tagName+=F:R.script?(R.script+="</"+R.tagName,R.tagName="",R.state=N.SCRIPT):(x(F)||k(R,"Invalid tagname in closing tag"),R.state=N.CLOSE_TAG_SAW_WHITE);else{if(x(F))continue;C(g,F)?R.script?(R.script+="</"+F,R.state=N.SCRIPT):k(R,"Invalid tagname in closing tag."):R.tagName=F}continue;case N.CLOSE_TAG_SAW_WHITE:if(x(F))continue;F===">"?le(R):k(R,"Invalid characters in closing tag");continue;case N.TEXT_ENTITY:case N.ATTRIB_VALUE_ENTITY_Q:case N.ATTRIB_VALUE_ENTITY_U:var oe,he;switch(R.state){case N.TEXT_ENTITY:oe=N.TEXT,he="textNode";break;case N.ATTRIB_VALUE_ENTITY_Q:oe=N.ATTRIB_VALUE_QUOTED,he="attribValue";break;case N.ATTRIB_VALUE_ENTITY_U:oe=N.ATTRIB_VALUE_UNQUOTED,he="attribValue"}F===";"?(R[he]+=be(R),R.entity="",R.state=oe):S(R.entity.length?_:O,F)?R.entity+=F:(k(R,"Invalid character in entity name"),R[he]+="&"+R.entity+F,R.entity="",R.state=oe);continue;default:throw new Error(R,"Unknown state: "+R.state)}return R.position>=R.bufferCheckPosition&&function(de){for(var pe=Math.max(c.MAX_BUFFER_LENGTH,10),xe=0,Fe=0,st=u.length;Fe<st;Fe++){var I=de[u[Fe]].length;if(I>pe)switch(u[Fe]){case"textNode":K(de);break;case"cdata":Z(de,"oncdata",de.cdata),de.cdata="";break;case"script":Z(de,"onscript",de.script),de.script="";break;default:J(de,"Max buffer length exceeded: "+u[Fe])}xe=Math.max(xe,I)}var L=c.MAX_BUFFER_LENGTH-xe;de.bufferCheckPosition=L+de.position}(R),R},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var U;K(U=this),U.cdata!==""&&(Z(U,"oncdata",U.cdata),U.cdata=""),U.script!==""&&(Z(U,"onscript",U.script),U.script="")}};try{h=l(830).Stream}catch{h=function(){}}var p=c.EVENTS.filter(function(U){return U!=="error"&&U!=="end"});function d(U,R){if(!(this instanceof d))return new d(U,R);h.apply(this),this._parser=new f(U,R),this.writable=!0,this.readable=!0;var Q=this;this._parser.onend=function(){Q.emit("end")},this._parser.onerror=function(F){Q.emit("error",F),Q._parser.error=null},this._decoder=null,p.forEach(function(F){Object.defineProperty(Q,"on"+F,{get:function(){return Q._parser["on"+F]},set:function(re){if(!re)return Q.removeAllListeners(F),Q._parser["on"+F]=re,re;Q.on(F,re)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(h.prototype,{constructor:{value:d}}),d.prototype.write=function(U){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(U)){if(!this._decoder){var R=l(553).s;this._decoder=new R("utf8")}U=this._decoder.write(U)}return this._parser.write(U.toString()),this.emit("data",U),!0},d.prototype.end=function(U){return U&&U.length&&this.write(U),this._parser.end(),!0},d.prototype.on=function(U,R){var Q=this;return Q._parser["on"+U]||p.indexOf(U)===-1||(Q._parser["on"+U]=function(){var F=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);F.splice(0,0,U),Q.emit.apply(Q,F)}),h.prototype.on.call(Q,U,R)};var m="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",A={xml:m,xmlns:b},g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function x(U){return U===" "||U===`
`||U==="\r"||U==="	"}function E(U){return U==='"'||U==="'"}function T(U){return U===">"||x(U)}function S(U,R){return U.test(R)}function C(U,R){return!S(U,R)}var B,M,D,N=0;for(var P in c.STATE={BEGIN:N++,BEGIN_WHITESPACE:N++,TEXT:N++,TEXT_ENTITY:N++,OPEN_WAKA:N++,SGML_DECL:N++,SGML_DECL_QUOTED:N++,DOCTYPE:N++,DOCTYPE_QUOTED:N++,DOCTYPE_DTD:N++,DOCTYPE_DTD_QUOTED:N++,COMMENT_STARTING:N++,COMMENT:N++,COMMENT_ENDING:N++,COMMENT_ENDED:N++,CDATA:N++,CDATA_ENDING:N++,CDATA_ENDING_2:N++,PROC_INST:N++,PROC_INST_BODY:N++,PROC_INST_ENDING:N++,OPEN_TAG:N++,OPEN_TAG_SLASH:N++,ATTRIB:N++,ATTRIB_NAME:N++,ATTRIB_NAME_SAW_WHITE:N++,ATTRIB_VALUE:N++,ATTRIB_VALUE_QUOTED:N++,ATTRIB_VALUE_CLOSED:N++,ATTRIB_VALUE_UNQUOTED:N++,ATTRIB_VALUE_ENTITY_Q:N++,ATTRIB_VALUE_ENTITY_U:N++,CLOSE_TAG:N++,CLOSE_TAG_SAW_WHITE:N++,SCRIPT:N++,SCRIPT_ENDING:N++},c.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},c.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(c.ENTITIES).forEach(function(U){var R=c.ENTITIES[U],Q=typeof R=="number"?String.fromCharCode(R):R;c.ENTITIES[U]=Q}),c.STATE)c.STATE[c.STATE[P]]=P;function X(U,R,Q){U[R]&&U[R](Q)}function Z(U,R,Q){U.textNode&&K(U),X(U,R,Q)}function K(U){U.textNode=ee(U.opt,U.textNode),U.textNode&&X(U,"ontext",U.textNode),U.textNode=""}function ee(U,R){return U.trim&&(R=R.trim()),U.normalize&&(R=R.replace(/\s+/g," ")),R}function J(U,R){return K(U),U.trackPosition&&(R+=`
Line: `+U.line+`
Column: `+U.column+`
Char: `+U.c),R=new Error(R),U.error=R,X(U,"onerror",R),U}function ge(U){return U.sawRoot&&!U.closedRoot&&k(U,"Unclosed root tag"),U.state!==N.BEGIN&&U.state!==N.BEGIN_WHITESPACE&&U.state!==N.TEXT&&J(U,"Unexpected end"),K(U),U.c="",U.closed=!0,X(U,"onend"),f.call(U,U.strict,U.opt),U}function k(U,R){if(typeof U!="object"||!(U instanceof f))throw new Error("bad call to strictFail");U.strict&&J(U,R)}function j(U){U.strict||(U.tagName=U.tagName[U.looseCase]());var R=U.tags[U.tags.length-1]||U,Q=U.tag={name:U.tagName,attributes:{}};U.opt.xmlns&&(Q.ns=R.ns),U.attribList.length=0,Z(U,"onopentagstart",Q)}function V(U,R){var Q=U.indexOf(":")<0?["",U]:U.split(":"),F=Q[0],re=Q[1];return R&&U==="xmlns"&&(F="xmlns",re=""),{prefix:F,local:re}}function H(U){if(U.strict||(U.attribName=U.attribName[U.looseCase]()),U.attribList.indexOf(U.attribName)!==-1||U.tag.attributes.hasOwnProperty(U.attribName))U.attribName=U.attribValue="";else{if(U.opt.xmlns){var R=V(U.attribName,!0),Q=R.prefix,F=R.local;if(Q==="xmlns")if(F==="xml"&&U.attribValue!==m)k(U,"xml: prefix must be bound to "+m+`
Actual: `+U.attribValue);else if(F==="xmlns"&&U.attribValue!==b)k(U,"xmlns: prefix must be bound to "+b+`
Actual: `+U.attribValue);else{var re=U.tag,me=U.tags[U.tags.length-1]||U;re.ns===me.ns&&(re.ns=Object.create(me.ns)),re.ns[F]=U.attribValue}U.attribList.push([U.attribName,U.attribValue])}else U.tag.attributes[U.attribName]=U.attribValue,Z(U,"onattribute",{name:U.attribName,value:U.attribValue});U.attribName=U.attribValue=""}}function q(U,R){if(U.opt.xmlns){var Q=U.tag,F=V(U.tagName);Q.prefix=F.prefix,Q.local=F.local,Q.uri=Q.ns[F.prefix]||"",Q.prefix&&!Q.uri&&(k(U,"Unbound namespace prefix: "+JSON.stringify(U.tagName)),Q.uri=F.prefix);var re=U.tags[U.tags.length-1]||U;Q.ns&&re.ns!==Q.ns&&Object.keys(Q.ns).forEach(function(z){Z(U,"onopennamespace",{prefix:z,uri:Q.ns[z]})});for(var me=0,oe=U.attribList.length;me<oe;me++){var he=U.attribList[me],de=he[0],pe=he[1],xe=V(de,!0),Fe=xe.prefix,st=xe.local,I=Fe===""?"":Q.ns[Fe]||"",L={name:de,value:pe,prefix:Fe,local:st,uri:I};Fe&&Fe!=="xmlns"&&!I&&(k(U,"Unbound namespace prefix: "+JSON.stringify(Fe)),L.uri=Fe),U.tag.attributes[de]=L,Z(U,"onattribute",L)}U.attribList.length=0}U.tag.isSelfClosing=!!R,U.sawRoot=!0,U.tags.push(U.tag),Z(U,"onopentag",U.tag),R||(U.noscript||U.tagName.toLowerCase()!=="script"?U.state=N.TEXT:U.state=N.SCRIPT,U.tag=null,U.tagName=""),U.attribName=U.attribValue="",U.attribList.length=0}function le(U){if(!U.tagName)return k(U,"Weird empty close tag."),U.textNode+="</>",void(U.state=N.TEXT);if(U.script){if(U.tagName!=="script")return U.script+="</"+U.tagName+">",U.tagName="",void(U.state=N.SCRIPT);Z(U,"onscript",U.script),U.script=""}var R=U.tags.length,Q=U.tagName;U.strict||(Q=Q[U.looseCase]());for(var F=Q;R--&&U.tags[R].name!==F;)k(U,"Unexpected close tag");if(R<0)return k(U,"Unmatched closing tag: "+U.tagName),U.textNode+="</"+U.tagName+">",void(U.state=N.TEXT);U.tagName=Q;for(var re=U.tags.length;re-- >R;){var me=U.tag=U.tags.pop();U.tagName=U.tag.name,Z(U,"onclosetag",U.tagName);var oe={};for(var he in me.ns)oe[he]=me.ns[he];var de=U.tags[U.tags.length-1]||U;U.opt.xmlns&&me.ns!==de.ns&&Object.keys(me.ns).forEach(function(pe){var xe=me.ns[pe];Z(U,"onclosenamespace",{prefix:pe,uri:xe})})}R===0&&(U.closedRoot=!0),U.tagName=U.attribValue=U.attribName="",U.attribList.length=0,U.state=N.TEXT}function be(U){var R,Q=U.entity,F=Q.toLowerCase(),re="";return U.ENTITIES[Q]?U.ENTITIES[Q]:U.ENTITIES[F]?U.ENTITIES[F]:((Q=F).charAt(0)==="#"&&(Q.charAt(1)==="x"?(Q=Q.slice(2),re=(R=parseInt(Q,16)).toString(16)):(Q=Q.slice(1),re=(R=parseInt(Q,10)).toString(10))),Q=Q.replace(/^0+/,""),isNaN(R)||re.toLowerCase()!==Q?(k(U,"Invalid character entity"),"&"+U.entity+";"):String.fromCodePoint(R))}function ae(U,R){R==="<"?(U.state=N.OPEN_WAKA,U.startTagPosition=U.position):x(R)||(k(U,"Non-whitespace before first tag."),U.textNode=R,U.state=N.TEXT)}function ue(U,R){var Q="";return R<U.length&&(Q=U.charAt(R)),Q}N=c.STATE,String.fromCodePoint||(B=String.fromCharCode,M=Math.floor,D=function(){var U,R,Q=16384,F=[],re=-1,me=arguments.length;if(!me)return"";for(var oe="";++re<me;){var he=Number(arguments[re]);if(!isFinite(he)||he<0||he>1114111||M(he)!==he)throw RangeError("Invalid code point: "+he);he<=65535?F.push(he):(U=55296+((he-=65536)>>10),R=he%1024+56320,F.push(U,R)),(re+1===me||F.length>Q)&&(oe+=B.apply(null,F),F.length=0)}return oe},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:D,configurable:!0,writable:!0}):String.fromCodePoint=D)})(a)},830:(o,a,l)=>{o.exports=h;var c=l(187).EventEmitter;function h(){c.call(this)}l(717)(h,c),h.Readable=l(577),h.Writable=l(323),h.Duplex=l(656),h.Transform=l(473),h.PassThrough=l(366),h.finished=l(86),h.pipeline=l(472),h.Stream=h,h.prototype.pipe=function(u,f){var p=this;function d(_){u.writable&&u.write(_)===!1&&p.pause&&p.pause()}function m(){p.readable&&p.resume&&p.resume()}p.on("data",d),u.on("drain",m),u._isStdio||f&&f.end===!1||(p.on("end",A),p.on("close",g));var b=!1;function A(){b||(b=!0,u.end())}function g(){b||(b=!0,typeof u.destroy=="function"&&u.destroy())}function v(_){if(O(),c.listenerCount(this,"error")===0)throw _}function O(){p.removeListener("data",d),u.removeListener("drain",m),p.removeListener("end",A),p.removeListener("close",g),p.removeListener("error",v),u.removeListener("error",v),p.removeListener("end",O),p.removeListener("close",O),u.removeListener("close",O)}return p.on("error",v),u.on("error",v),p.on("end",O),p.on("close",O),u.on("close",O),u.emit("pipe",p),u}},106:o=>{var a={};function l(h,u,f){f||(f=Error);var p=function(d){var m,b;function A(g,v,O){return d.call(this,function(_,x,E){return typeof u=="string"?u:u(_,x,E)}(g,v,O))||this}return b=d,(m=A).prototype=Object.create(b.prototype),m.prototype.constructor=m,m.__proto__=b,A}(f);p.prototype.name=f.name,p.prototype.code=h,a[h]=p}function c(h,u){if(Array.isArray(h)){var f=h.length;return h=h.map(function(p){return String(p)}),f>2?"one of ".concat(u," ").concat(h.slice(0,f-1).join(", "),", or ")+h[f-1]:f===2?"one of ".concat(u," ").concat(h[0]," or ").concat(h[1]):"of ".concat(u," ").concat(h[0])}return"of ".concat(u," ").concat(String(h))}l("ERR_INVALID_OPT_VALUE",function(h,u){return'The value "'+u+'" is invalid for option "'+h+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(h,u,f){var p,d,m,b,A;if(typeof u=="string"&&(d="not ",u.substr(0,d.length)===d)?(p="must not be",u=u.replace(/^not /,"")):p="must be",function(v,O,_){return(_===void 0||_>v.length)&&(_=v.length),v.substring(_-O.length,_)===O}(h," argument"))m="The ".concat(h," ").concat(p," ").concat(c(u,"type"));else{var g=(typeof A!="number"&&(A=0),A+1>(b=h).length||b.indexOf(".",A)===-1?"argument":"property");m='The "'.concat(h,'" ').concat(g," ").concat(p," ").concat(c(u,"type"))}return m+". Received type ".concat(typeof f)},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),o.exports.q=a},656:(o,a,l)=>{var c=l(155),h=Object.keys||function(v){var O=[];for(var _ in v)O.push(_);return O};o.exports=b;var u=l(577),f=l(323);l(717)(b,u);for(var p=h(f.prototype),d=0;d<p.length;d++){var m=p[d];b.prototype[m]||(b.prototype[m]=f.prototype[m])}function b(v){if(!(this instanceof b))return new b(v);u.call(this,v),f.call(this,v),this.allowHalfOpen=!0,v&&(v.readable===!1&&(this.readable=!1),v.writable===!1&&(this.writable=!1),v.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",A)))}function A(){this._writableState.ended||c.nextTick(g,this)}function g(v){v.end()}Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}})},366:(o,a,l)=>{o.exports=h;var c=l(473);function h(u){if(!(this instanceof h))return new h(u);c.call(this,u)}l(717)(h,c),h.prototype._transform=function(u,f,p){p(null,u)}},577:(o,a,l)=>{var c,h=l(155);o.exports=P,P.ReadableState=N,l(187).EventEmitter;var u,f=function(R,Q){return R.listeners(Q).length},p=l(194),d=l(764).Buffer,m=l.g.Uint8Array||function(){},b=l(964);u=b&&b.debuglog?b.debuglog("stream"):function(){};var A,g,v,O=l(686),_=l(29),x=l(94).getHighWaterMark,E=l(106).q,T=E.ERR_INVALID_ARG_TYPE,S=E.ERR_STREAM_PUSH_AFTER_EOF,C=E.ERR_METHOD_NOT_IMPLEMENTED,B=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;l(717)(P,p);var M=_.errorOrDestroy,D=["error","close","destroy","pause","resume"];function N(R,Q,F){c=c||l(656),R=R||{},typeof F!="boolean"&&(F=Q instanceof c),this.objectMode=!!R.objectMode,F&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=x(this,R,"readableHighWaterMark",F),this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(A||(A=l(553).s),this.decoder=new A(R.encoding),this.encoding=R.encoding)}function P(R){if(c=c||l(656),!(this instanceof P))return new P(R);var Q=this instanceof c;this._readableState=new N(R,this,Q),this.readable=!0,R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy)),p.call(this)}function X(R,Q,F,re,me){u("readableAddChunk",Q);var oe,he=R._readableState;if(Q===null)he.reading=!1,function(de,pe){if(u("onEofChunk"),!pe.ended){if(pe.decoder){var xe=pe.decoder.end();xe&&xe.length&&(pe.buffer.push(xe),pe.length+=pe.objectMode?1:xe.length)}pe.ended=!0,pe.sync?J(de):(pe.needReadable=!1,pe.emittedReadable||(pe.emittedReadable=!0,ge(de)))}}(R,he);else if(me||(oe=function(de,pe){var xe,Fe;return Fe=pe,d.isBuffer(Fe)||Fe instanceof m||typeof pe=="string"||pe===void 0||de.objectMode||(xe=new T("chunk",["string","Buffer","Uint8Array"],pe)),xe}(he,Q)),oe)M(R,oe);else if(he.objectMode||Q&&Q.length>0)if(typeof Q=="string"||he.objectMode||Object.getPrototypeOf(Q)===d.prototype||(Q=function(de){return d.from(de)}(Q)),re)he.endEmitted?M(R,new B):Z(R,he,Q,!0);else if(he.ended)M(R,new S);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!F?(Q=he.decoder.write(Q),he.objectMode||Q.length!==0?Z(R,he,Q,!1):k(R,he)):Z(R,he,Q,!1)}else re||(he.reading=!1,k(R,he));return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function Z(R,Q,F,re){Q.flowing&&Q.length===0&&!Q.sync?(Q.awaitDrain=0,R.emit("data",F)):(Q.length+=Q.objectMode?1:F.length,re?Q.buffer.unshift(F):Q.buffer.push(F),Q.needReadable&&J(R)),k(R,Q)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),P.prototype.destroy=_.destroy,P.prototype._undestroy=_.undestroy,P.prototype._destroy=function(R,Q){Q(R)},P.prototype.push=function(R,Q){var F,re=this._readableState;return re.objectMode?F=!0:typeof R=="string"&&((Q=Q||re.defaultEncoding)!==re.encoding&&(R=d.from(R,Q),Q=""),F=!0),X(this,R,Q,!1,F)},P.prototype.unshift=function(R){return X(this,R,null,!0,!1)},P.prototype.isPaused=function(){return this._readableState.flowing===!1},P.prototype.setEncoding=function(R){A||(A=l(553).s);var Q=new A(R);this._readableState.decoder=Q,this._readableState.encoding=this._readableState.decoder.encoding;for(var F=this._readableState.buffer.head,re="";F!==null;)re+=Q.write(F.data),F=F.next;return this._readableState.buffer.clear(),re!==""&&this._readableState.buffer.push(re),this._readableState.length=re.length,this};var K=1073741824;function ee(R,Q){return R<=0||Q.length===0&&Q.ended?0:Q.objectMode?1:R!=R?Q.flowing&&Q.length?Q.buffer.head.data.length:Q.length:(R>Q.highWaterMark&&(Q.highWaterMark=function(F){return F>=K?F=K:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}(R)),R<=Q.length?R:Q.ended?Q.length:(Q.needReadable=!0,0))}function J(R){var Q=R._readableState;u("emitReadable",Q.needReadable,Q.emittedReadable),Q.needReadable=!1,Q.emittedReadable||(u("emitReadable",Q.flowing),Q.emittedReadable=!0,h.nextTick(ge,R))}function ge(R){var Q=R._readableState;u("emitReadable_",Q.destroyed,Q.length,Q.ended),Q.destroyed||!Q.length&&!Q.ended||(R.emit("readable"),Q.emittedReadable=!1),Q.needReadable=!Q.flowing&&!Q.ended&&Q.length<=Q.highWaterMark,le(R)}function k(R,Q){Q.readingMore||(Q.readingMore=!0,h.nextTick(j,R,Q))}function j(R,Q){for(;!Q.reading&&!Q.ended&&(Q.length<Q.highWaterMark||Q.flowing&&Q.length===0);){var F=Q.length;if(u("maybeReadMore read 0"),R.read(0),F===Q.length)break}Q.readingMore=!1}function V(R){var Q=R._readableState;Q.readableListening=R.listenerCount("readable")>0,Q.resumeScheduled&&!Q.paused?Q.flowing=!0:R.listenerCount("data")>0&&R.resume()}function H(R){u("readable nexttick read 0"),R.read(0)}function q(R,Q){u("resume",Q.reading),Q.reading||R.read(0),Q.resumeScheduled=!1,R.emit("resume"),le(R),Q.flowing&&!Q.reading&&R.read(0)}function le(R){var Q=R._readableState;for(u("flow",Q.flowing);Q.flowing&&R.read()!==null;);}function be(R,Q){return Q.length===0?null:(Q.objectMode?F=Q.buffer.shift():!R||R>=Q.length?(F=Q.decoder?Q.buffer.join(""):Q.buffer.length===1?Q.buffer.first():Q.buffer.concat(Q.length),Q.buffer.clear()):F=Q.buffer.consume(R,Q.decoder),F);var F}function ae(R){var Q=R._readableState;u("endReadable",Q.endEmitted),Q.endEmitted||(Q.ended=!0,h.nextTick(ue,Q,R))}function ue(R,Q){if(u("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&R.length===0&&(R.endEmitted=!0,Q.readable=!1,Q.emit("end"),R.autoDestroy)){var F=Q._writableState;(!F||F.autoDestroy&&F.finished)&&Q.destroy()}}function U(R,Q){for(var F=0,re=R.length;F<re;F++)if(R[F]===Q)return F;return-1}P.prototype.read=function(R){u("read",R),R=parseInt(R,10);var Q=this._readableState,F=R;if(R!==0&&(Q.emittedReadable=!1),R===0&&Q.needReadable&&((Q.highWaterMark!==0?Q.length>=Q.highWaterMark:Q.length>0)||Q.ended))return u("read: emitReadable",Q.length,Q.ended),Q.length===0&&Q.ended?ae(this):J(this),null;if((R=ee(R,Q))===0&&Q.ended)return Q.length===0&&ae(this),null;var re,me=Q.needReadable;return u("need readable",me),(Q.length===0||Q.length-R<Q.highWaterMark)&&u("length less than watermark",me=!0),Q.ended||Q.reading?u("reading or ended",me=!1):me&&(u("do read"),Q.reading=!0,Q.sync=!0,Q.length===0&&(Q.needReadable=!0),this._read(Q.highWaterMark),Q.sync=!1,Q.reading||(R=ee(F,Q))),(re=R>0?be(R,Q):null)===null?(Q.needReadable=Q.length<=Q.highWaterMark,R=0):(Q.length-=R,Q.awaitDrain=0),Q.length===0&&(Q.ended||(Q.needReadable=!0),F!==R&&Q.ended&&ae(this)),re!==null&&this.emit("data",re),re},P.prototype._read=function(R){M(this,new C("_read()"))},P.prototype.pipe=function(R,Q){var F=this,re=this._readableState;switch(re.pipesCount){case 0:re.pipes=R;break;case 1:re.pipes=[re.pipes,R];break;default:re.pipes.push(R)}re.pipesCount+=1,u("pipe count=%d opts=%j",re.pipesCount,Q);var me=Q&&Q.end===!1||R===h.stdout||R===h.stderr?I:oe;function oe(){u("onend"),R.end()}re.endEmitted?h.nextTick(me):F.once("end",me),R.on("unpipe",function L(z,te){u("onunpipe"),z===F&&te&&te.hasUnpiped===!1&&(te.hasUnpiped=!0,u("cleanup"),R.removeListener("close",Fe),R.removeListener("finish",st),R.removeListener("drain",he),R.removeListener("error",xe),R.removeListener("unpipe",L),F.removeListener("end",oe),F.removeListener("end",I),F.removeListener("data",pe),de=!0,!re.awaitDrain||R._writableState&&!R._writableState.needDrain||he())});var he=function(L){return function(){var z=L._readableState;u("pipeOnDrain",z.awaitDrain),z.awaitDrain&&z.awaitDrain--,z.awaitDrain===0&&f(L,"data")&&(z.flowing=!0,le(L))}}(F);R.on("drain",he);var de=!1;function pe(L){u("ondata");var z=R.write(L);u("dest.write",z),z===!1&&((re.pipesCount===1&&re.pipes===R||re.pipesCount>1&&U(re.pipes,R)!==-1)&&!de&&(u("false write response, pause",re.awaitDrain),re.awaitDrain++),F.pause())}function xe(L){u("onerror",L),I(),R.removeListener("error",xe),f(R,"error")===0&&M(R,L)}function Fe(){R.removeListener("finish",st),I()}function st(){u("onfinish"),R.removeListener("close",Fe),I()}function I(){u("unpipe"),F.unpipe(R)}return F.on("data",pe),function(L,z,te){if(typeof L.prependListener=="function")return L.prependListener(z,te);L._events&&L._events.error?Array.isArray(L._events.error)?L._events.error.unshift(te):L._events.error=[te,L._events.error]:L.on(z,te)}(R,"error",xe),R.once("close",Fe),R.once("finish",st),R.emit("pipe",F),re.flowing||(u("pipe resume"),F.resume()),R},P.prototype.unpipe=function(R){var Q=this._readableState,F={hasUnpiped:!1};if(Q.pipesCount===0)return this;if(Q.pipesCount===1)return R&&R!==Q.pipes||(R||(R=Q.pipes),Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,R&&R.emit("unpipe",this,F)),this;if(!R){var re=Q.pipes,me=Q.pipesCount;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var oe=0;oe<me;oe++)re[oe].emit("unpipe",this,{hasUnpiped:!1});return this}var he=U(Q.pipes,R);return he===-1||(Q.pipes.splice(he,1),Q.pipesCount-=1,Q.pipesCount===1&&(Q.pipes=Q.pipes[0]),R.emit("unpipe",this,F)),this},P.prototype.on=function(R,Q){var F=p.prototype.on.call(this,R,Q),re=this._readableState;return R==="data"?(re.readableListening=this.listenerCount("readable")>0,re.flowing!==!1&&this.resume()):R==="readable"&&(re.endEmitted||re.readableListening||(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,u("on readable",re.length,re.reading),re.length?J(this):re.reading||h.nextTick(H,this))),F},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(R,Q){var F=p.prototype.removeListener.call(this,R,Q);return R==="readable"&&h.nextTick(V,this),F},P.prototype.removeAllListeners=function(R){var Q=p.prototype.removeAllListeners.apply(this,arguments);return R!=="readable"&&R!==void 0||h.nextTick(V,this),Q},P.prototype.resume=function(){var R=this._readableState;return R.flowing||(u("resume"),R.flowing=!R.readableListening,function(Q,F){F.resumeScheduled||(F.resumeScheduled=!0,h.nextTick(q,Q,F))}(this,R)),R.paused=!1,this},P.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(R){var Q=this,F=this._readableState,re=!1;for(var me in R.on("end",function(){if(u("wrapped end"),F.decoder&&!F.ended){var he=F.decoder.end();he&&he.length&&Q.push(he)}Q.push(null)}),R.on("data",function(he){u("wrapped data"),F.decoder&&(he=F.decoder.write(he)),F.objectMode&&he==null||(F.objectMode||he&&he.length)&&(Q.push(he)||(re=!0,R.pause()))}),R)this[me]===void 0&&typeof R[me]=="function"&&(this[me]=function(he){return function(){return R[he].apply(R,arguments)}}(me));for(var oe=0;oe<D.length;oe++)R.on(D[oe],this.emit.bind(this,D[oe]));return this._read=function(he){u("wrapped _read",he),re&&(re=!1,R.resume())},this},typeof Symbol=="function"&&(P.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=l(828)),g(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),P._fromList=be,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(P.from=function(R,Q){return v===void 0&&(v=l(265)),v(P,R,Q)})},473:(o,a,l)=>{o.exports=b;var c=l(106).q,h=c.ERR_METHOD_NOT_IMPLEMENTED,u=c.ERR_MULTIPLE_CALLBACK,f=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,p=c.ERR_TRANSFORM_WITH_LENGTH_0,d=l(656);function m(v,O){var _=this._transformState;_.transforming=!1;var x=_.writecb;if(x===null)return this.emit("error",new u);_.writechunk=null,_.writecb=null,O!=null&&this.push(O),x(v);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function b(v){if(!(this instanceof b))return new b(v);d.call(this,v),this._transformState={afterTransform:m.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),this.on("prefinish",A)}function A(){var v=this;typeof this._flush!="function"||this._readableState.destroyed?g(this,null,null):this._flush(function(O,_){g(v,O,_)})}function g(v,O,_){if(O)return v.emit("error",O);if(_!=null&&v.push(_),v._writableState.length)throw new p;if(v._transformState.transforming)throw new f;return v.push(null)}l(717)(b,d),b.prototype.push=function(v,O){return this._transformState.needTransform=!1,d.prototype.push.call(this,v,O)},b.prototype._transform=function(v,O,_){_(new h("_transform()"))},b.prototype._write=function(v,O,_){var x=this._transformState;if(x.writecb=_,x.writechunk=v,x.writeencoding=O,!x.transforming){var E=this._readableState;(x.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},b.prototype._read=function(v){var O=this._transformState;O.writechunk===null||O.transforming?O.needTransform=!0:(O.transforming=!0,this._transform(O.writechunk,O.writeencoding,O.afterTransform))},b.prototype._destroy=function(v,O){d.prototype._destroy.call(this,v,function(_){O(_)})}},323:(o,a,l)=>{var c,h=l(155);function u(k){var j=this;this.next=null,this.entry=null,this.finish=function(){(function(V,H,q){var le=V.entry;for(V.entry=null;le;){var be=le.callback;H.pendingcb--,be(void 0),le=le.next}H.corkedRequestsFree.next=V})(j,k)}}o.exports=P,P.WritableState=N;var f,p={deprecate:l(927)},d=l(194),m=l(764).Buffer,b=l.g.Uint8Array||function(){},A=l(29),g=l(94).getHighWaterMark,v=l(106).q,O=v.ERR_INVALID_ARG_TYPE,_=v.ERR_METHOD_NOT_IMPLEMENTED,x=v.ERR_MULTIPLE_CALLBACK,E=v.ERR_STREAM_CANNOT_PIPE,T=v.ERR_STREAM_DESTROYED,S=v.ERR_STREAM_NULL_VALUES,C=v.ERR_STREAM_WRITE_AFTER_END,B=v.ERR_UNKNOWN_ENCODING,M=A.errorOrDestroy;function D(){}function N(k,j,V){c=c||l(656),k=k||{},typeof V!="boolean"&&(V=j instanceof c),this.objectMode=!!k.objectMode,V&&(this.objectMode=this.objectMode||!!k.writableObjectMode),this.highWaterMark=g(this,k,"writableHighWaterMark",V),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=k.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=k.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(q){(function(le,be){var ae=le._writableState,ue=ae.sync,U=ae.writecb;if(typeof U!="function")throw new x;if(function(Q){Q.writing=!1,Q.writecb=null,Q.length-=Q.writelen,Q.writelen=0}(ae),be)(function(Q,F,re,me,oe){--F.pendingcb,re?(h.nextTick(oe,me),h.nextTick(ge,Q,F),Q._writableState.errorEmitted=!0,M(Q,me)):(oe(me),Q._writableState.errorEmitted=!0,M(Q,me),ge(Q,F))})(le,ae,ue,be,U);else{var R=ee(ae)||le.destroyed;R||ae.corked||ae.bufferProcessing||!ae.bufferedRequest||K(le,ae),ue?h.nextTick(Z,le,ae,R,U):Z(le,ae,R,U)}})(j,q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=k.emitClose!==!1,this.autoDestroy=!!k.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function P(k){var j=this instanceof(c=c||l(656));if(!j&&!f.call(P,this))return new P(k);this._writableState=new N(k,this,j),this.writable=!0,k&&(typeof k.write=="function"&&(this._write=k.write),typeof k.writev=="function"&&(this._writev=k.writev),typeof k.destroy=="function"&&(this._destroy=k.destroy),typeof k.final=="function"&&(this._final=k.final)),d.call(this)}function X(k,j,V,H,q,le,be){j.writelen=H,j.writecb=be,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new T("write")):V?k._writev(q,j.onwrite):k._write(q,le,j.onwrite),j.sync=!1}function Z(k,j,V,H){V||function(q,le){le.length===0&&le.needDrain&&(le.needDrain=!1,q.emit("drain"))}(k,j),j.pendingcb--,H(),ge(k,j)}function K(k,j){j.bufferProcessing=!0;var V=j.bufferedRequest;if(k._writev&&V&&V.next){var H=j.bufferedRequestCount,q=new Array(H),le=j.corkedRequestsFree;le.entry=V;for(var be=0,ae=!0;V;)q[be]=V,V.isBuf||(ae=!1),V=V.next,be+=1;q.allBuffers=ae,X(k,j,!0,j.length,q,"",le.finish),j.pendingcb++,j.lastBufferedRequest=null,le.next?(j.corkedRequestsFree=le.next,le.next=null):j.corkedRequestsFree=new u(j),j.bufferedRequestCount=0}else{for(;V;){var ue=V.chunk,U=V.encoding,R=V.callback;if(X(k,j,!1,j.objectMode?1:ue.length,ue,U,R),V=V.next,j.bufferedRequestCount--,j.writing)break}V===null&&(j.lastBufferedRequest=null)}j.bufferedRequest=V,j.bufferProcessing=!1}function ee(k){return k.ending&&k.length===0&&k.bufferedRequest===null&&!k.finished&&!k.writing}function J(k,j){k._final(function(V){j.pendingcb--,V&&M(k,V),j.prefinished=!0,k.emit("prefinish"),ge(k,j)})}function ge(k,j){var V=ee(j);if(V&&(function(q,le){le.prefinished||le.finalCalled||(typeof q._final!="function"||le.destroyed?(le.prefinished=!0,q.emit("prefinish")):(le.pendingcb++,le.finalCalled=!0,h.nextTick(J,q,le)))}(k,j),j.pendingcb===0&&(j.finished=!0,k.emit("finish"),j.autoDestroy))){var H=k._readableState;(!H||H.autoDestroy&&H.endEmitted)&&k.destroy()}return V}l(717)(P,d),N.prototype.getBuffer=function(){for(var k=this.bufferedRequest,j=[];k;)j.push(k),k=k.next;return j},function(){try{Object.defineProperty(N.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(k){return!!f.call(this,k)||this===P&&k&&k._writableState instanceof N}})):f=function(k){return k instanceof this},P.prototype.pipe=function(){M(this,new E)},P.prototype.write=function(k,j,V){var H,q=this._writableState,le=!1,be=!q.objectMode&&(H=k,m.isBuffer(H)||H instanceof b);return be&&!m.isBuffer(k)&&(k=function(ae){return m.from(ae)}(k)),typeof j=="function"&&(V=j,j=null),be?j="buffer":j||(j=q.defaultEncoding),typeof V!="function"&&(V=D),q.ending?function(ae,ue){var U=new C;M(ae,U),h.nextTick(ue,U)}(this,V):(be||function(ae,ue,U,R){var Q;return U===null?Q=new S:typeof U=="string"||ue.objectMode||(Q=new O("chunk",["string","Buffer"],U)),!Q||(M(ae,Q),h.nextTick(R,Q),!1)}(this,q,k,V))&&(q.pendingcb++,le=function(ae,ue,U,R,Q,F){if(!U){var re=function(de,pe,xe){return de.objectMode||de.decodeStrings===!1||typeof pe!="string"||(pe=m.from(pe,xe)),pe}(ue,R,Q);R!==re&&(U=!0,Q="buffer",R=re)}var me=ue.objectMode?1:R.length;ue.length+=me;var oe=ue.length<ue.highWaterMark;if(oe||(ue.needDrain=!0),ue.writing||ue.corked){var he=ue.lastBufferedRequest;ue.lastBufferedRequest={chunk:R,encoding:Q,isBuf:U,callback:F,next:null},he?he.next=ue.lastBufferedRequest:ue.bufferedRequest=ue.lastBufferedRequest,ue.bufferedRequestCount+=1}else X(ae,ue,!1,me,R,Q,F);return oe}(this,q,be,k,j,V)),le},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var k=this._writableState;k.corked&&(k.corked--,k.writing||k.corked||k.bufferProcessing||!k.bufferedRequest||K(this,k))},P.prototype.setDefaultEncoding=function(k){if(typeof k=="string"&&(k=k.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((k+"").toLowerCase())>-1))throw new B(k);return this._writableState.defaultEncoding=k,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(k,j,V){V(new _("_write()"))},P.prototype._writev=null,P.prototype.end=function(k,j,V){var H=this._writableState;return typeof k=="function"?(V=k,k=null,j=null):typeof j=="function"&&(V=j,j=null),k!=null&&this.write(k,j),H.corked&&(H.corked=1,this.uncork()),H.ending||function(q,le,be){le.ending=!0,ge(q,le),be&&(le.finished?h.nextTick(be):q.once("finish",be)),le.ended=!0,q.writable=!1}(this,H,V),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(k){this._writableState&&(this._writableState.destroyed=k)}}),P.prototype.destroy=A.destroy,P.prototype._undestroy=A.undestroy,P.prototype._destroy=function(k,j){j(k)}},828:(o,a,l)=>{var c,h=l(155);function u(S,C,B){return C in S?Object.defineProperty(S,C,{value:B,enumerable:!0,configurable:!0,writable:!0}):S[C]=B,S}var f=l(86),p=Symbol("lastResolve"),d=Symbol("lastReject"),m=Symbol("error"),b=Symbol("ended"),A=Symbol("lastPromise"),g=Symbol("handlePromise"),v=Symbol("stream");function O(S,C){return{value:S,done:C}}function _(S){var C=S[p];if(C!==null){var B=S[v].read();B!==null&&(S[A]=null,S[p]=null,S[d]=null,C(O(B,!1)))}}function x(S){h.nextTick(_,S)}var E=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((u(c={get stream(){return this[v]},next:function(){var S=this,C=this[m];if(C!==null)return Promise.reject(C);if(this[b])return Promise.resolve(O(void 0,!0));if(this[v].destroyed)return new Promise(function(N,P){h.nextTick(function(){S[m]?P(S[m]):N(O(void 0,!0))})});var B,M=this[A];if(M)B=new Promise(function(N,P){return function(X,Z){N.then(function(){P[b]?X(O(void 0,!0)):P[g](X,Z)},Z)}}(M,this));else{var D=this[v].read();if(D!==null)return Promise.resolve(O(D,!1));B=new Promise(this[g])}return this[A]=B,B}},Symbol.asyncIterator,function(){return this}),u(c,"return",function(){var S=this;return new Promise(function(C,B){S[v].destroy(null,function(M){M?B(M):C(O(void 0,!0))})})}),c),E);o.exports=function(S){var C,B=Object.create(T,(u(C={},v,{value:S,writable:!0}),u(C,p,{value:null,writable:!0}),u(C,d,{value:null,writable:!0}),u(C,m,{value:null,writable:!0}),u(C,b,{value:S._readableState.endEmitted,writable:!0}),u(C,g,{value:function(M,D){var N=B[v].read();N?(B[A]=null,B[p]=null,B[d]=null,M(O(N,!1))):(B[p]=M,B[d]=D)},writable:!0}),C));return B[A]=null,f(S,function(M){if(M&&M.code!=="ERR_STREAM_PREMATURE_CLOSE"){var D=B[d];return D!==null&&(B[A]=null,B[p]=null,B[d]=null,D(M)),void(B[m]=M)}var N=B[p];N!==null&&(B[A]=null,B[p]=null,B[d]=null,N(O(void 0,!0))),B[b]=!0}),S.on("readable",x.bind(null,B)),B}},686:(o,a,l)=>{function c(m,b){var A=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);b&&(g=g.filter(function(v){return Object.getOwnPropertyDescriptor(m,v).enumerable})),A.push.apply(A,g)}return A}function h(m,b,A){return b in m?Object.defineProperty(m,b,{value:A,enumerable:!0,configurable:!0,writable:!0}):m[b]=A,m}function u(m,b){for(var A=0;A<b.length;A++){var g=b[A];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var f=l(764).Buffer,p=l(862).inspect,d=p&&p.custom||"inspect";o.exports=function(){function m(){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,m),this.head=null,this.tail=null,this.length=0}var b,A;return b=m,A=[{key:"push",value:function(g){var v={data:g,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(g){var v={data:g,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var v=this.head,O=""+v.data;v=v.next;)O+=g+v.data;return O}},{key:"concat",value:function(g){if(this.length===0)return f.alloc(0);for(var v,O,_,x=f.allocUnsafe(g>>>0),E=this.head,T=0;E;)v=E.data,O=x,_=T,f.prototype.copy.call(v,O,_),T+=E.data.length,E=E.next;return x}},{key:"consume",value:function(g,v){var O;return g<this.head.data.length?(O=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):O=g===this.head.data.length?this.shift():v?this._getString(g):this._getBuffer(g),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var v=this.head,O=1,_=v.data;for(g-=_.length;v=v.next;){var x=v.data,E=g>x.length?x.length:g;if(E===x.length?_+=x:_+=x.slice(0,g),(g-=E)==0){E===x.length?(++O,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=x.slice(E));break}++O}return this.length-=O,_}},{key:"_getBuffer",value:function(g){var v=f.allocUnsafe(g),O=this.head,_=1;for(O.data.copy(v),g-=O.data.length;O=O.next;){var x=O.data,E=g>x.length?x.length:g;if(x.copy(v,v.length-g,0,E),(g-=E)==0){E===x.length?(++_,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=x.slice(E));break}++_}return this.length-=_,v}},{key:d,value:function(g,v){return p(this,function(O){for(var _=1;_<arguments.length;_++){var x=arguments[_]!=null?arguments[_]:{};_%2?c(Object(x),!0).forEach(function(E){h(O,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(E){Object.defineProperty(O,E,Object.getOwnPropertyDescriptor(x,E))})}return O}({},v,{depth:0,customInspect:!1}))}}],A&&u(b.prototype,A),m}()},29:(o,a,l)=>{var c=l(155);function h(p,d){f(p,d),u(p)}function u(p){p._writableState&&!p._writableState.emitClose||p._readableState&&!p._readableState.emitClose||p.emit("close")}function f(p,d){p.emit("error",d)}o.exports={destroy:function(p,d){var m=this,b=this._readableState&&this._readableState.destroyed,A=this._writableState&&this._writableState.destroyed;return b||A?(d?d(p):p&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(f,this,p)):c.nextTick(f,this,p)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(p||null,function(g){!d&&g?m._writableState?m._writableState.errorEmitted?c.nextTick(u,m):(m._writableState.errorEmitted=!0,c.nextTick(h,m,g)):c.nextTick(h,m,g):d?(c.nextTick(u,m),d(g)):c.nextTick(u,m)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(p,d){var m=p._readableState,b=p._writableState;m&&m.autoDestroy||b&&b.autoDestroy?p.destroy(d):p.emit("error",d)}}},86:(o,a,l)=>{var c=l(106).q.ERR_STREAM_PREMATURE_CLOSE;function h(){}o.exports=function u(f,p,d){if(typeof p=="function")return u(f,null,p);p||(p={}),d=function(S){var C=!1;return function(){if(!C){C=!0;for(var B=arguments.length,M=new Array(B),D=0;D<B;D++)M[D]=arguments[D];S.apply(this,M)}}}(d||h);var m=p.readable||p.readable!==!1&&f.readable,b=p.writable||p.writable!==!1&&f.writable,A=function(){f.writable||v()},g=f._writableState&&f._writableState.finished,v=function(){b=!1,g=!0,m||d.call(f)},O=f._readableState&&f._readableState.endEmitted,_=function(){m=!1,O=!0,b||d.call(f)},x=function(S){d.call(f,S)},E=function(){var S;return m&&!O?(f._readableState&&f._readableState.ended||(S=new c),d.call(f,S)):b&&!g?(f._writableState&&f._writableState.ended||(S=new c),d.call(f,S)):void 0},T=function(){f.req.on("finish",v)};return function(S){return S.setHeader&&typeof S.abort=="function"}(f)?(f.on("complete",v),f.on("abort",E),f.req?T():f.on("request",T)):b&&!f._writableState&&(f.on("end",A),f.on("close",A)),f.on("end",_),f.on("finish",v),p.error!==!1&&f.on("error",x),f.on("close",E),function(){f.removeListener("complete",v),f.removeListener("abort",E),f.removeListener("request",T),f.req&&f.req.removeListener("finish",v),f.removeListener("end",A),f.removeListener("close",A),f.removeListener("finish",v),f.removeListener("end",_),f.removeListener("error",x),f.removeListener("close",E)}}},265:o=>{o.exports=function(){throw new Error("Readable.from is not available in the browser")}},472:(o,a,l)=>{var c,h=l(106).q,u=h.ERR_MISSING_ARGS,f=h.ERR_STREAM_DESTROYED;function p(g){if(g)throw g}function d(g,v,O,_){_=function(T){var S=!1;return function(){S||(S=!0,T.apply(void 0,arguments))}}(_);var x=!1;g.on("close",function(){x=!0}),c===void 0&&(c=l(86)),c(g,{readable:v,writable:O},function(T){if(T)return _(T);x=!0,_()});var E=!1;return function(T){if(!x&&!E)return E=!0,function(S){return S.setHeader&&typeof S.abort=="function"}(g)?g.abort():typeof g.destroy=="function"?g.destroy():void _(T||new f("pipe"))}}function m(g){g()}function b(g,v){return g.pipe(v)}function A(g){return g.length?typeof g[g.length-1]!="function"?p:g.pop():p}o.exports=function(){for(var g=arguments.length,v=new Array(g),O=0;O<g;O++)v[O]=arguments[O];var _,x=A(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new u("streams");var E=v.map(function(T,S){var C=S<v.length-1;return d(T,C,S>0,function(B){_||(_=B),B&&E.forEach(m),C||(E.forEach(m),x(_))})});return v.reduce(b)}},94:(o,a,l)=>{var c=l(106).q.ERR_INVALID_OPT_VALUE;o.exports={getHighWaterMark:function(h,u,f,p){var d=function(m,b,A){return m.highWaterMark!=null?m.highWaterMark:b?m[A]:null}(u,p,f);if(d!=null){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new c(p?f:"highWaterMark",d);return Math.floor(d)}return h.objectMode?16:16384}}},194:(o,a,l)=>{o.exports=l(187).EventEmitter},553:(o,a,l)=>{var c=l(509).Buffer,h=c.isEncoding||function(O){switch((O=""+O)&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(O){var _;switch(this.encoding=function(x){var E=function(T){if(!T)return"utf8";for(var S;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(S)return;T=(""+T).toLowerCase(),S=!0}}(x);if(typeof E!="string"&&(c.isEncoding===h||!h(x)))throw new Error("Unknown encoding: "+x);return E||x}(O),this.encoding){case"utf16le":this.text=d,this.end=m,_=4;break;case"utf8":this.fillLast=p,_=4;break;case"base64":this.text=b,this.end=A,_=3;break;default:return this.write=g,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(_)}function f(O){return O<=127?0:O>>5==6?2:O>>4==14?3:O>>3==30?4:O>>6==2?-1:-2}function p(O){var _=this.lastTotal-this.lastNeed,x=function(E,T,S){if((192&T[0])!=128)return E.lastNeed=0,"\uFFFD";if(E.lastNeed>1&&T.length>1){if((192&T[1])!=128)return E.lastNeed=1,"\uFFFD";if(E.lastNeed>2&&T.length>2&&(192&T[2])!=128)return E.lastNeed=2,"\uFFFD"}}(this,O);return x!==void 0?x:this.lastNeed<=O.length?(O.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(O.copy(this.lastChar,_,0,O.length),void(this.lastNeed-=O.length))}function d(O,_){if((O.length-_)%2==0){var x=O.toString("utf16le",_);if(x){var E=x.charCodeAt(x.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",_,O.length-1)}function m(O){var _=O&&O.length?this.write(O):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,x)}return _}function b(O,_){var x=(O.length-_)%3;return x===0?O.toString("base64",_):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",_,O.length-x))}function A(O){var _=O&&O.length?this.write(O):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function g(O){return O.toString(this.encoding)}function v(O){return O&&O.length?this.write(O):""}a.s=u,u.prototype.write=function(O){if(O.length===0)return"";var _,x;if(this.lastNeed){if((_=this.fillLast(O))===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<O.length?_?_+this.text(O,x):this.text(O,x):_||""},u.prototype.end=function(O){var _=O&&O.length?this.write(O):"";return this.lastNeed?_+"\uFFFD":_},u.prototype.text=function(O,_){var x=function(T,S,C){var B=S.length-1;if(B<C)return 0;var M=f(S[B]);return M>=0?(M>0&&(T.lastNeed=M-1),M):--B<C||M===-2?0:(M=f(S[B]))>=0?(M>0&&(T.lastNeed=M-2),M):--B<C||M===-2?0:(M=f(S[B]))>=0?(M>0&&(M===2?M=0:T.lastNeed=M-3),M):0}(this,O,_);if(!this.lastNeed)return O.toString("utf8",_);this.lastTotal=x;var E=O.length-(x-this.lastNeed);return O.copy(this.lastChar,0,E),O.toString("utf8",_,E)},u.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length}},927:(o,a,l)=>{function c(h){try{if(!l.g.localStorage)return!1}catch{return!1}var u=l.g.localStorage[h];return u!=null&&String(u).toLowerCase()==="true"}o.exports=function(h,u){if(c("noDeprecation"))return h;var f=!1;return function(){if(!f){if(c("throwDeprecation"))throw new Error(u);c("traceDeprecation")?console.trace(u):console.warn(u),f=!0}return h.apply(this,arguments)}}},881:o=>{o.exports={isArray:function(a){return Array.isArray?Array.isArray(a):Object.prototype.toString.call(a)==="[object Array]"}}},888:(o,a,l)=>{var c=l(229),h=l(388),u=l(501),f=l(673);o.exports={xml2js:c,xml2json:h,js2xml:u,json2xml:f}},501:(o,a,l)=>{var c,h,u=l(740),f=l(881).isArray;function p(S,C,B){return(!B&&S.spaces?`
`:"")+Array(C+1).join(S.spaces)}function d(S,C,B){if(C.ignoreAttributes)return"";"attributesFn"in C&&(S=C.attributesFn(S,h,c));var M,D,N,P,X=[];for(M in S)S.hasOwnProperty(M)&&S[M]!==null&&S[M]!==void 0&&(P=C.noQuotesForNativeAttributes&&typeof S[M]!="string"?"":'"',D=(D=""+S[M]).replace(/"/g,"&quot;"),N="attributeNameFn"in C?C.attributeNameFn(M,D,h,c):M,X.push(C.spaces&&C.indentAttributes?p(C,B+1,!1):" "),X.push(N+"="+P+("attributeValueFn"in C?C.attributeValueFn(D,M,h,c):D)+P));return S&&Object.keys(S).length&&C.spaces&&C.indentAttributes&&X.push(p(C,B,!1)),X.join("")}function m(S,C,B){return c=S,h="xml",C.ignoreDeclaration?"":"<?xml"+d(S[C.attributesKey],C,B)+"?>"}function b(S,C,B){if(C.ignoreInstruction)return"";var M;for(M in S)if(S.hasOwnProperty(M))break;var D="instructionNameFn"in C?C.instructionNameFn(M,S[M],h,c):M;if(typeof S[M]=="object")return c=S,h=D,"<?"+D+d(S[M][C.attributesKey],C,B)+"?>";var N=S[M]?S[M]:"";return"instructionFn"in C&&(N=C.instructionFn(N,M,h,c)),"<?"+D+(N?" "+N:"")+"?>"}function A(S,C){return C.ignoreComment?"":"<!--"+("commentFn"in C?C.commentFn(S,h,c):S)+"-->"}function g(S,C){return C.ignoreCdata?"":"<![CDATA["+("cdataFn"in C?C.cdataFn(S,h,c):S.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function v(S,C){return C.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in C?C.doctypeFn(S,h,c):S)+">"}function O(S,C){return C.ignoreText?"":(S=(S=(S=""+S).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in C?C.textFn(S,h,c):S)}function _(S,C,B,M){return S.reduce(function(D,N){var P=p(C,B,M&&!D);switch(N.type){case"element":return D+P+function(Z,K,ee){c=Z,h=Z.name;var J=[],ge="elementNameFn"in K?K.elementNameFn(Z.name,Z):Z.name;J.push("<"+ge),Z[K.attributesKey]&&J.push(d(Z[K.attributesKey],K,ee));var k=Z[K.elementsKey]&&Z[K.elementsKey].length||Z[K.attributesKey]&&Z[K.attributesKey]["xml:space"]==="preserve";return k||(k="fullTagEmptyElementFn"in K?K.fullTagEmptyElementFn(Z.name,Z):K.fullTagEmptyElement),k?(J.push(">"),Z[K.elementsKey]&&Z[K.elementsKey].length&&(J.push(_(Z[K.elementsKey],K,ee+1)),c=Z,h=Z.name),J.push(K.spaces&&function(j,V){var H;if(j.elements&&j.elements.length)for(H=0;H<j.elements.length;++H)switch(j.elements[H][V.typeKey]){case"text":if(V.indentText)return!0;break;case"cdata":if(V.indentCdata)return!0;break;case"instruction":if(V.indentInstruction)return!0;break;default:return!0}return!1}(Z,K)?`
`+Array(ee+1).join(K.spaces):""),J.push("</"+ge+">")):J.push("/>"),J.join("")}(N,C,B);case"comment":return D+P+A(N[C.commentKey],C);case"doctype":return D+P+v(N[C.doctypeKey],C);case"cdata":return D+(C.indentCdata?P:"")+g(N[C.cdataKey],C);case"text":return D+(C.indentText?P:"")+O(N[C.textKey],C);case"instruction":var X={};return X[N[C.nameKey]]=N[C.attributesKey]?N:N[C.instructionKey],D+(C.indentInstruction?P:"")+b(X,C,B)}},"")}function x(S,C,B){var M;for(M in S)if(S.hasOwnProperty(M))switch(M){case C.parentKey:case C.attributesKey:break;case C.textKey:if(C.indentText||B)return!0;break;case C.cdataKey:if(C.indentCdata||B)return!0;break;case C.instructionKey:if(C.indentInstruction||B)return!0;break;case C.doctypeKey:case C.commentKey:default:return!0}return!1}function E(S,C,B,M,D){c=S,h=C;var N="elementNameFn"in B?B.elementNameFn(C,S):C;if(S==null||S==="")return"fullTagEmptyElementFn"in B&&B.fullTagEmptyElementFn(C,S)||B.fullTagEmptyElement?"<"+N+"></"+N+">":"<"+N+"/>";var P=[];if(C){if(P.push("<"+N),typeof S!="object")return P.push(">"+O(S,B)+"</"+N+">"),P.join("");S[B.attributesKey]&&P.push(d(S[B.attributesKey],B,M));var X=x(S,B,!0)||S[B.attributesKey]&&S[B.attributesKey]["xml:space"]==="preserve";if(X||(X="fullTagEmptyElementFn"in B?B.fullTagEmptyElementFn(C,S):B.fullTagEmptyElement),!X)return P.push("/>"),P.join("");P.push(">")}return P.push(T(S,B,M+1,!1)),c=S,h=C,C&&P.push((D?p(B,M,!1):"")+"</"+N+">"),P.join("")}function T(S,C,B,M){var D,N,P,X=[];for(N in S)if(S.hasOwnProperty(N))for(P=f(S[N])?S[N]:[S[N]],D=0;D<P.length;++D){switch(N){case C.declarationKey:X.push(m(P[D],C,B));break;case C.instructionKey:X.push((C.indentInstruction?p(C,B,M):"")+b(P[D],C,B));break;case C.attributesKey:case C.parentKey:break;case C.textKey:X.push((C.indentText?p(C,B,M):"")+O(P[D],C));break;case C.cdataKey:X.push((C.indentCdata?p(C,B,M):"")+g(P[D],C));break;case C.doctypeKey:X.push(p(C,B,M)+v(P[D],C));break;case C.commentKey:X.push(p(C,B,M)+A(P[D],C));break;default:X.push(p(C,B,M)+E(P[D],N,C,B,x(P[D],C)))}M=M&&!X.length}return X.join("")}o.exports=function(S,C){C=function(M){var D=u.copyOptions(M);return u.ensureFlagExists("ignoreDeclaration",D),u.ensureFlagExists("ignoreInstruction",D),u.ensureFlagExists("ignoreAttributes",D),u.ensureFlagExists("ignoreText",D),u.ensureFlagExists("ignoreComment",D),u.ensureFlagExists("ignoreCdata",D),u.ensureFlagExists("ignoreDoctype",D),u.ensureFlagExists("compact",D),u.ensureFlagExists("indentText",D),u.ensureFlagExists("indentCdata",D),u.ensureFlagExists("indentAttributes",D),u.ensureFlagExists("indentInstruction",D),u.ensureFlagExists("fullTagEmptyElement",D),u.ensureFlagExists("noQuotesForNativeAttributes",D),u.ensureSpacesExists(D),typeof D.spaces=="number"&&(D.spaces=Array(D.spaces+1).join(" ")),u.ensureKeyExists("declaration",D),u.ensureKeyExists("instruction",D),u.ensureKeyExists("attributes",D),u.ensureKeyExists("text",D),u.ensureKeyExists("comment",D),u.ensureKeyExists("cdata",D),u.ensureKeyExists("doctype",D),u.ensureKeyExists("type",D),u.ensureKeyExists("name",D),u.ensureKeyExists("elements",D),u.checkFnExists("doctype",D),u.checkFnExists("instruction",D),u.checkFnExists("cdata",D),u.checkFnExists("comment",D),u.checkFnExists("text",D),u.checkFnExists("instructionName",D),u.checkFnExists("elementName",D),u.checkFnExists("attributeName",D),u.checkFnExists("attributeValue",D),u.checkFnExists("attributes",D),u.checkFnExists("fullTagEmptyElement",D),D}(C);var B=[];return c=S,h="_root_",C.compact?B.push(T(S,C,0,!0)):(S[C.declarationKey]&&B.push(m(S[C.declarationKey],C,0)),S[C.elementsKey]&&S[C.elementsKey].length&&B.push(_(S[C.elementsKey],C,0,!B.length))),B.join("")}},673:(o,a,l)=>{var c=l(501);o.exports=function(h,u){h instanceof Buffer&&(h=h.toString());var f=null;if(typeof h=="string")try{f=JSON.parse(h)}catch{throw new Error("The JSON structure is invalid")}else f=h;return c(f,u)}},740:(o,a,l)=>{var c=l(881).isArray;o.exports={copyOptions:function(h){var u,f={};for(u in h)h.hasOwnProperty(u)&&(f[u]=h[u]);return f},ensureFlagExists:function(h,u){h in u&&typeof u[h]=="boolean"||(u[h]=!1)},ensureSpacesExists:function(h){(!("spaces"in h)||typeof h.spaces!="number"&&typeof h.spaces!="string")&&(h.spaces=0)},ensureAlwaysArrayExists:function(h){"alwaysArray"in h&&(typeof h.alwaysArray=="boolean"||c(h.alwaysArray))||(h.alwaysArray=!1)},ensureKeyExists:function(h,u){h+"Key"in u&&typeof u[h+"Key"]=="string"||(u[h+"Key"]=u.compact?"_"+h:h)},checkFnExists:function(h,u){return h+"Fn"in u}}},229:(o,a,l)=>{var c,h,u=l(99),f=l(740),p=l(881).isArray;function d(S){var C=Number(S);if(!isNaN(C))return C;var B=S.toLowerCase();return B==="true"||B!=="false"&&S}function m(S,C){var B;if(c.compact){if(!h[c[S+"Key"]]&&(p(c.alwaysArray)?c.alwaysArray.indexOf(c[S+"Key"])!==-1:c.alwaysArray)&&(h[c[S+"Key"]]=[]),h[c[S+"Key"]]&&!p(h[c[S+"Key"]])&&(h[c[S+"Key"]]=[h[c[S+"Key"]]]),S+"Fn"in c&&typeof C=="string"&&(C=c[S+"Fn"](C,h)),S==="instruction"&&("instructionFn"in c||"instructionNameFn"in c)){for(B in C)if(C.hasOwnProperty(B))if("instructionFn"in c)C[B]=c.instructionFn(C[B],B,h);else{var M=C[B];delete C[B],C[c.instructionNameFn(B,M,h)]=M}}p(h[c[S+"Key"]])?h[c[S+"Key"]].push(C):h[c[S+"Key"]]=C}else{h[c.elementsKey]||(h[c.elementsKey]=[]);var D={};if(D[c.typeKey]=S,S==="instruction"){for(B in C)if(C.hasOwnProperty(B))break;D[c.nameKey]="instructionNameFn"in c?c.instructionNameFn(B,C,h):B,c.instructionHasAttributes?(D[c.attributesKey]=C[B][c.attributesKey],"instructionFn"in c&&(D[c.attributesKey]=c.instructionFn(D[c.attributesKey],B,h))):("instructionFn"in c&&(C[B]=c.instructionFn(C[B],B,h)),D[c.instructionKey]=C[B])}else S+"Fn"in c&&(C=c[S+"Fn"](C,h)),D[c[S+"Key"]]=C;c.addParent&&(D[c.parentKey]=h),h[c.elementsKey].push(D)}}function b(S){var C;if("attributesFn"in c&&S&&(S=c.attributesFn(S,h)),(c.trim||"attributeValueFn"in c||"attributeNameFn"in c||c.nativeTypeAttributes)&&S){for(C in S)if(S.hasOwnProperty(C)&&(c.trim&&(S[C]=S[C].trim()),c.nativeTypeAttributes&&(S[C]=d(S[C])),"attributeValueFn"in c&&(S[C]=c.attributeValueFn(S[C],C,h)),"attributeNameFn"in c)){var B=S[C];delete S[C],S[c.attributeNameFn(C,S[C],h)]=B}}return S}function A(S){var C={};if(S.body&&(S.name.toLowerCase()==="xml"||c.instructionHasAttributes)){for(var B,M=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;(B=M.exec(S.body))!==null;)C[B[1]]=B[2]||B[3]||B[4];C=b(C)}if(S.name.toLowerCase()==="xml"){if(c.ignoreDeclaration)return;h[c.declarationKey]={},Object.keys(C).length&&(h[c.declarationKey][c.attributesKey]=C),c.addParent&&(h[c.declarationKey][c.parentKey]=h)}else{if(c.ignoreInstruction)return;c.trim&&(S.body=S.body.trim());var D={};c.instructionHasAttributes&&Object.keys(C).length?(D[S.name]={},D[S.name][c.attributesKey]=C):D[S.name]=S.body,m("instruction",D)}}function g(S,C){var B;if(typeof S=="object"&&(C=S.attributes,S=S.name),C=b(C),"elementNameFn"in c&&(S=c.elementNameFn(S,h)),c.compact){var M;if(B={},!c.ignoreAttributes&&C&&Object.keys(C).length)for(M in B[c.attributesKey]={},C)C.hasOwnProperty(M)&&(B[c.attributesKey][M]=C[M]);!(S in h)&&(p(c.alwaysArray)?c.alwaysArray.indexOf(S)!==-1:c.alwaysArray)&&(h[S]=[]),h[S]&&!p(h[S])&&(h[S]=[h[S]]),p(h[S])?h[S].push(B):h[S]=B}else h[c.elementsKey]||(h[c.elementsKey]=[]),(B={})[c.typeKey]="element",B[c.nameKey]=S,!c.ignoreAttributes&&C&&Object.keys(C).length&&(B[c.attributesKey]=C),c.alwaysChildren&&(B[c.elementsKey]=[]),h[c.elementsKey].push(B);B[c.parentKey]=h,h=B}function v(S){c.ignoreText||(S.trim()||c.captureSpacesBetweenElements)&&(c.trim&&(S=S.trim()),c.nativeType&&(S=d(S)),c.sanitize&&(S=S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),m("text",S))}function O(S){c.ignoreComment||(c.trim&&(S=S.trim()),m("comment",S))}function _(S){var C=h[c.parentKey];c.addParent||delete h[c.parentKey],h=C}function x(S){c.ignoreCdata||(c.trim&&(S=S.trim()),m("cdata",S))}function E(S){c.ignoreDoctype||(S=S.replace(/^ /,""),c.trim&&(S=S.trim()),m("doctype",S))}function T(S){S.note=S}o.exports=function(S,C){var B=u.parser(!0,{}),M={};if(h=M,c=function(N){return c=f.copyOptions(N),f.ensureFlagExists("ignoreDeclaration",c),f.ensureFlagExists("ignoreInstruction",c),f.ensureFlagExists("ignoreAttributes",c),f.ensureFlagExists("ignoreText",c),f.ensureFlagExists("ignoreComment",c),f.ensureFlagExists("ignoreCdata",c),f.ensureFlagExists("ignoreDoctype",c),f.ensureFlagExists("compact",c),f.ensureFlagExists("alwaysChildren",c),f.ensureFlagExists("addParent",c),f.ensureFlagExists("trim",c),f.ensureFlagExists("nativeType",c),f.ensureFlagExists("nativeTypeAttributes",c),f.ensureFlagExists("sanitize",c),f.ensureFlagExists("instructionHasAttributes",c),f.ensureFlagExists("captureSpacesBetweenElements",c),f.ensureAlwaysArrayExists(c),f.ensureKeyExists("declaration",c),f.ensureKeyExists("instruction",c),f.ensureKeyExists("attributes",c),f.ensureKeyExists("text",c),f.ensureKeyExists("comment",c),f.ensureKeyExists("cdata",c),f.ensureKeyExists("doctype",c),f.ensureKeyExists("type",c),f.ensureKeyExists("name",c),f.ensureKeyExists("elements",c),f.ensureKeyExists("parent",c),f.checkFnExists("doctype",c),f.checkFnExists("instruction",c),f.checkFnExists("cdata",c),f.checkFnExists("comment",c),f.checkFnExists("text",c),f.checkFnExists("instructionName",c),f.checkFnExists("elementName",c),f.checkFnExists("attributeName",c),f.checkFnExists("attributeValue",c),f.checkFnExists("attributes",c),c}(C),B.opt={strictEntities:!0},B.onopentag=g,B.ontext=v,B.oncomment=O,B.onclosetag=_,B.onerror=T,B.oncdata=x,B.ondoctype=E,B.onprocessinginstruction=A,B.write(S).close(),M[c.elementsKey]){var D=M[c.elementsKey];delete M[c.elementsKey],M[c.elementsKey]=D,delete M.text}return M}},388:(o,a,l)=>{var c=l(740),h=l(229);o.exports=function(u,f){var p,d,m;return p=function(b){var A=c.copyOptions(b);return c.ensureSpacesExists(A),A}(f),d=h(u,p),m="compact"in p&&p.compact?"_parent":"parent",("addParent"in p&&p.addParent?JSON.stringify(d,function(b,A){return b===m?"_":A},p.spaces):JSON.stringify(d,null,p.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},255:o=>{var a={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};o.exports=function(l){return l&&l.replace?l.replace(/([&"<>'])/g,function(c,h){return a[h]}):l}},479:(o,a,l)=>{var c=l(155),h=l(255),u=l(830).Stream;function f(d,m,b){b=b||0;var A,g,v=(A=m,new Array(b||0).join(A||"")),O=d;if(typeof d=="object"&&(O=d[g=Object.keys(d)[0]])&&O._elem)return O._elem.name=g,O._elem.icount=b,O._elem.indent=m,O._elem.indents=v,O._elem.interrupt=O,O._elem;var _,x=[],E=[];function T(S){Object.keys(S).forEach(function(C){x.push(function(B,M){return B+'="'+h(M)+'"'}(C,S[C]))})}switch(typeof O){case"object":if(O===null)break;O._attr&&T(O._attr),O._cdata&&E.push(("<![CDATA["+O._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),O.forEach&&(_=!1,E.push(""),O.forEach(function(S){typeof S=="object"?Object.keys(S)[0]=="_attr"?T(S._attr):E.push(f(S,m,b+1)):(E.pop(),_=!0,E.push(h(S)))}),_||E.push(""));break;default:E.push(h(O))}return{name:g,interrupt:!1,attributes:x,content:E,icount:b,indents:v,indent:m}}function p(d,m,b){if(typeof m!="object")return d(!1,m);var A=m.interrupt?1:m.content.length;function g(){for(;m.content.length;){var O=m.content.shift();if(O!==void 0){if(v(O))return;p(d,O)}}d(!1,(A>1?m.indents:"")+(m.name?"</"+m.name+">":"")+(m.indent&&!b?`
`:"")),b&&b()}function v(O){return!!O.interrupt&&(O.interrupt.append=d,O.interrupt.end=g,O.interrupt=!1,d(!0),!0)}if(d(!1,m.indents+(m.name?"<"+m.name:"")+(m.attributes.length?" "+m.attributes.join(" "):"")+(A?m.name?">":"":m.name?"/>":"")+(m.indent&&A>1?`
`:"")),!A)return d(!1,m.indent?`
`:"");v(m)||g()}o.exports=function(d,m){typeof m!="object"&&(m={indent:m});var b,A,g=m.stream?new u:null,v="",O=!1,_=m.indent?m.indent===!0?"    ":m.indent:"",x=!0;function E(B){x?c.nextTick(B):B()}function T(B,M){if(M!==void 0&&(v+=M),B&&!O&&(g=g||new u,O=!0),B&&O){var D=v;E(function(){g.emit("data",D)}),v=""}}function S(B,M){p(T,f(B,_,_?1:0),M)}function C(){if(g){var B=v;E(function(){g.emit("data",B),g.emit("end"),g.readable=!1,g.emit("close")})}}return E(function(){x=!1}),m.declaration&&(A={version:"1.0",encoding:(b=m.declaration).encoding||"UTF-8"},b.standalone&&(A.standalone=b.standalone),S({"?xml":{_attr:A}}),v=v.replace("/>","?>")),d&&d.forEach?d.forEach(function(B,M){var D;M+1===d.length&&(D=C),S(B,D)}):S(d,C),g?(g.readable=!0,g):v},o.exports.element=o.exports.Element=function(){var d=Array.prototype.slice.call(arguments),m={_elem:f(d),push:function(b){if(!this.append)throw new Error("not assigned to a parent!");var A=this,g=this._elem.indent;p(this.append,f(b,g,this._elem.icount+(g?1:0)),function(){A.append(!0)})},close:function(b){b!==void 0&&this.push(b),this.end&&this.end()}};return m}},862:()=>{},964:()=>{}},i={};function r(o){var a=i[o];if(a!==void 0)return a.exports;var l=i[o]={exports:{}};return t[o](l,l.exports,r),l.exports}r.d=(o,a)=>{for(var l in a)r.o(a,l)&&!r.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:a[l]})},r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a),r.r=o=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var s={};return(()=>{r.r(s),r.d(s,{AbstractNumbering:()=>Tp,Alignment:()=>me,AlignmentAttributes:()=>re,AlignmentType:()=>le,Attributes:()=>u,BaseEmphasisMark:()=>Et,BaseXmlComponent:()=>o,Body:()=>bv,Bookmark:()=>Zb,BookmarkEnd:()=>Kb,BookmarkStart:()=>qb,Border:()=>de,BorderElement:()=>oe,BorderStyle:()=>be,Column:()=>qQ,ColumnAttributes:()=>vv,ColumnBreak:()=>LQ,Columns:()=>nv,ColumnsAttributes:()=>tv,ConcreteHyperlink:()=>ap,ConcreteNumbering:()=>Cp,DeletedTextRun:()=>cN,DocGridAttributes:()=>iv,Document:()=>cw,DocumentAttributes:()=>Eo,DocumentBackground:()=>Av,DocumentBackgroundAttributes:()=>wv,DocumentDefaults:()=>ow,DocumentGrid:()=>rv,DocumentGridType:()=>qd,DotEmphasisMark:()=>Ds,Drawing:()=>Ub,DropCapType:()=>cp,EMPTY_OBJECT:()=>a,EmphasisMark:()=>Ua,EmphasisMarkType:()=>R,ExternalHyperlink:()=>Yb,File:()=>cw,FootNoteReferenceRunAttributes:()=>hw,FootNotes:()=>Kv,Footer:()=>nN,FooterWrapper:()=>Ap,FootnoteReference:()=>uw,FootnoteReferenceRun:()=>iN,FrameAnchorType:()=>hp,FrameProperties:()=>kv,FramePropertiesAttributes:()=>xv,FrameWrap:()=>up,GridSpan:()=>Wv,Header:()=>tN,HeaderFooterReference:()=>uh,HeaderFooterReferenceType:()=>ur,HeaderFooterType:()=>Va,HeaderWrapper:()=>xp,HeadingLevel:()=>Gd,HeightRule:()=>wp,HorizontalPosition:()=>Qb,HorizontalPositionAlign:()=>Rp,HorizontalPositionRelativeFrom:()=>sh,HpsMeasureElement:()=>j,HyperlinkType:()=>Yd,IgnoreIfEmptyXmlComponent:()=>c,ImageRun:()=>TQ,ImportDotx:()=>mN,ImportedRootElementAttributes:()=>b,ImportedXmlComponent:()=>m,Indent:()=>Fe,InitializableXmlComponent:()=>g,InsertedTextRun:()=>rN,InternalHyperlink:()=>zQ,LeaderType:()=>Vd,Level:()=>Jv,LevelBase:()=>Ep,LevelForOverride:()=>yD,LevelFormat:()=>hi,LevelOverride:()=>ew,LevelSuffix:()=>Sp,LineNumberAttributes:()=>sv,LineNumberRestartFormat:()=>Kd,LineNumberType:()=>ov,LineRuleType:()=>So,Math:()=>eP,MathAccentCharacter:()=>Tv,MathAngledBrackets:()=>EP,MathBase:()=>ci,MathCurlyBrackets:()=>SP,MathDegree:()=>Nv,MathDenominator:()=>Sv,MathFraction:()=>iP,MathFunction:()=>bP,MathFunctionName:()=>Bv,MathFunctionProperties:()=>Mv,MathLimitLocation:()=>Cv,MathNArayProperties:()=>Iv,MathNumerator:()=>Ev,MathPreSubSuperScript:()=>pP,MathPreSubSuperScriptProperties:()=>Dv,MathRadical:()=>OP,MathRadicalProperties:()=>Lv,MathRoundBrackets:()=>xP,MathRun:()=>nP,MathSquareBrackets:()=>kP,MathSubScript:()=>fP,MathSubScriptElement:()=>qa,MathSubScriptProperties:()=>Qv,MathSubSuperScript:()=>dP,MathSubSuperScriptProperties:()=>Pv,MathSum:()=>hP,MathSuperScript:()=>uP,MathSuperScriptElement:()=>Ka,MathSuperScriptProperties:()=>Rv,Media:()=>kp,NumberFormat:()=>Pp,NumberProperties:()=>op,NumberValueElement:()=>H,Numbering:()=>tw,OnOffElement:()=>k,OutlineLevel:()=>Jb,OverlapType:()=>gp,Packer:()=>pw,PageBorderDisplay:()=>Jd,PageBorderOffsetFrom:()=>ep,PageBorderZOrder:()=>tp,PageBorders:()=>lv,PageBreak:()=>NQ,PageBreakBefore:()=>Hb,PageMargin:()=>hv,PageMarginAttributes:()=>cv,PageNumber:()=>F,PageNumberSeparator:()=>np,PageNumberType:()=>fv,PageNumberTypeAttributes:()=>uv,PageOrientation:()=>Xa,PageReference:()=>XQ,PageSize:()=>pv,PageSizeAttributes:()=>dv,PageTextDirection:()=>mv,PageTextDirectionType:()=>ip,Paragraph:()=>Wr,ParagraphProperties:()=>Ls,ParagraphPropertiesDefaults:()=>rw,RelativeHorizontalPosition:()=>Op,RelativeVerticalPosition:()=>bp,Run:()=>Mn,RunFonts:()=>rh,RunProperties:()=>$r,RunPropertiesChange:()=>Eb,RunPropertiesDefaults:()=>sw,SectionProperties:()=>Ov,SectionType:()=>rp,SectionTypeAttributes:()=>gv,SequentialIdentifier:()=>RQ,Shading:()=>ot,ShadingType:()=>U,SimpleField:()=>zb,SimpleMailMergeField:()=>DQ,SimplePos:()=>Cb,Spacing:()=>Gb,StringContainer:()=>q,StringValueElement:()=>V,Style:()=>Ya,StyleForCharacter:()=>tl,StyleForParagraph:()=>el,StyleLevel:()=>eN,Styles:()=>gh,SymbolRun:()=>LR,TDirection:()=>Uv,Tab:()=>QQ,TabAttributes:()=>Vb,TabStop:()=>hh,TabStopItem:()=>Xb,TabStopPosition:()=>Xd,TabStopType:()=>Ga,Table:()=>MP,TableAnchorType:()=>yp,TableBorders:()=>mp,TableCell:()=>pp,TableCellBorders:()=>Fv,TableFloatOptionsAttributes:()=>jv,TableFloatProperties:()=>Hv,TableLayout:()=>Gv,TableLayoutType:()=>vp,TableOfContents:()=>JD,TableOverlap:()=>zv,TableProperties:()=>Vv,TableRow:()=>$P,TableRowHeight:()=>Yv,TableRowHeightAttributes:()=>Xv,TableRowProperties:()=>Zv,TableWidthElement:()=>Ur,TextDirection:()=>fp,TextRun:()=>za,TextWrappingSide:()=>ah,TextWrappingType:()=>Ns,ThematicBreak:()=>pe,Type:()=>yv,Underline:()=>Sb,UnderlineType:()=>Q,VerticalAlign:()=>Zd,VerticalAlignAttributes:()=>ev,VerticalAlignElement:()=>lp,VerticalMerge:()=>dp,VerticalMergeType:()=>Ja,VerticalPosition:()=>Pb,VerticalPositionAlign:()=>Qp,VerticalPositionRelativeFrom:()=>oh,WORKAROUND:()=>GD,WORKAROUND2:()=>uD,WORKAROUND3:()=>A,WORKAROUND4:()=>mP,WidthType:()=>To,WrapNone:()=>sp,WrapSquare:()=>Nb,WrapTight:()=>Lb,WrapTopAndBottom:()=>Bb,XmlAttributeComponent:()=>h,XmlComponent:()=>l,convertInchesToTwip:()=>li,convertMillimetersToTwip:()=>MR,convertToXmlComponent:()=>p,dateTimeValue:()=>ge,decimalNumber:()=>v,eighthPointMeasureValue:()=>ee,hexColorValue:()=>M,hpsMeasureValue:()=>N,longHexNumber:()=>x,measurementOrPercentValue:()=>K,percentageValue:()=>Z,pointMeasureValue:()=>J,positiveUniversalMeasureValue:()=>B,sectionMarginDefaults:()=>Fr,sectionPageSizeDefaults:()=>fh,shortHexNumber:()=>E,signedHpsMeasureValue:()=>P,signedTwipsMeasureValue:()=>D,twipsMeasureValue:()=>X,uCharHexNumber:()=>T,uniqueId:()=>Ha,uniqueNumericId:()=>ja,universalMeasureValue:()=>S,unsignedDecimalNumber:()=>O});class o{constructor(y){this.rootKey=y}}const a=Object.seal({});class l extends o{constructor(y){super(y),this.root=new Array}prepForXml(y){var $;const ne=this.root.map(ye=>ye instanceof o?ye.prepForXml(y):ye).filter(ye=>ye!==void 0);return{[this.rootKey]:ne.length?ne.length===1&&(($=ne[0])===null||$===void 0?void 0:$._attr)?ne[0]:ne:a}}addChildElement(y){return this.root.push(y),this}}class c extends l{prepForXml(y){const $=super.prepForXml(y);if($&&(typeof $[this.rootKey]!="object"||Object.keys($[this.rootKey]).length))return $}}class h extends o{constructor(y){super("_attr"),this.root=y}prepForXml(y){const $={};return Object.keys(this.root).forEach(ne=>{const ye=this.root[ne];if(ye!==void 0){const we=this.xmlKeys&&this.xmlKeys[ne]||ne;$[we]=ye}}),{_attr:$}}set(y){this.root=y}}class u extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"}}}var f=r(888);function p(w){switch(w.type){case void 0:case"element":const y=new m(w.name,w.attributes),$=w.elements||[];for(const ne of $){const ye=p(ne);ye!==void 0&&y.push(ye)}return y;case"text":return w.text;default:return}}class d extends h{}class m extends l{static fromXmlString(y){return p((0,f.xml2js)(y,{compact:!1}))}constructor(y,$){super(y),$&&this.root.push(new d($))}push(y){this.root.push(y)}}class b extends l{constructor(y){super(""),this._attr=y}prepForXml(y){return{_attr:this._attr}}}const A="";class g extends l{constructor(y,$){super(y),$&&(this.root=$.root)}}function v(w){if(isNaN(w))throw new Error(`Invalid value '${w}' specified. Must be an integer.`);return Math.floor(w)}function O(w){const y=v(w);if(y<0)throw new Error(`Invalid value '${w}' specified. Must be a positive integer.`);return y}function _(w,y){const $=2*y;if(w.length!==$||isNaN(Number("0x"+w)))throw new Error(`Invalid hex value '${w}'. Expected ${$} digit hex value`);return w}function x(w){return _(w,4)}function E(w){return _(w,2)}function T(w){return _(w,1)}function S(w){const y=w.slice(-2);if(!C.includes(y))throw new Error(`Invalid unit '${y}' specified. Valid units are ${C.join(", ")}`);const $=w.substring(0,w.length-2);if(isNaN(Number($)))throw new Error(`Invalid value '${$}' specified. Expected a valid number.`);return`${Number($)}${y}`}const C=["mm","cm","in","pt","pc","pi"];function B(w){const y=S(w);if(parseFloat(y)<0)throw new Error(`Invalid value '${y}' specified. Expected a positive number.`);return y}function M(w){return w==="auto"?w:_(w.charAt(0)==="#"?w.substring(1):w,3)}function D(w){return typeof w=="string"?S(w):v(w)}function N(w){return typeof w=="string"?B(w):O(w)}function P(w){return typeof w=="string"?S(w):v(w)}function X(w){return typeof w=="string"?B(w):O(w)}function Z(w){if(w.slice(-1)!=="%")throw new Error(`Invalid value '${w}'. Expected percentage value (eg '55%')`);const y=w.substring(0,w.length-1);if(isNaN(Number(y)))throw new Error(`Invalid value '${y}' specified. Expected a valid number.`);return`${Number(y)}%`}function K(w){return typeof w=="number"?v(w):w.slice(-1)==="%"?Z(w):S(w)}const ee=O,J=O;function ge(w){return w.toISOString()}class k extends l{constructor(y,$=!0){super(y),$!==!0&&this.root.push(new u({val:$}))}}class j extends l{constructor(y,$){super(y),this.root.push(new u({val:N($)}))}}class V extends l{constructor(y,$){super(y),this.root.push(new u({val:$}))}}class H extends l{constructor(y,$){super(y),this.root.push(new u({val:$}))}}class q extends l{constructor(y,$){super(y),this.root.push($)}}var le,be,ae,ue,U,R,Q,F;(function(w){w.START="start",w.END="end",w.CENTER="center",w.BOTH="both",w.JUSTIFIED="both",w.DISTRIBUTE="distribute",w.LEFT="left",w.RIGHT="right"})(le||(le={}));class re extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class me extends l{constructor(y){super("w:jc"),this.root.push(new re({val:y}))}}class oe extends l{constructor(y,{color:$,size:ne,space:ye,style:we}){super(y),this.root.push(new he({style:we,color:$===void 0?void 0:M($),size:ne===void 0?void 0:ee(ne),space:ye===void 0?void 0:J(ye)}))}}class he extends h{constructor(){super(...arguments),this.xmlKeys={style:"w:val",color:"w:color",size:"w:sz",space:"w:space"}}}(function(w){w.SINGLE="single",w.DASH_DOT_STROKED="dashDotStroked",w.DASHED="dashed",w.DASH_SMALL_GAP="dashSmallGap",w.DOT_DASH="dotDash",w.DOT_DOT_DASH="dotDotDash",w.DOTTED="dotted",w.DOUBLE="double",w.DOUBLE_WAVE="doubleWave",w.INSET="inset",w.NIL="nil",w.NONE="none",w.OUTSET="outset",w.THICK="thick",w.THICK_THIN_LARGE_GAP="thickThinLargeGap",w.THICK_THIN_MEDIUM_GAP="thickThinMediumGap",w.THICK_THIN_SMALL_GAP="thickThinSmallGap",w.THIN_THICK_LARGE_GAP="thinThickLargeGap",w.THIN_THICK_MEDIUM_GAP="thinThickMediumGap",w.THIN_THICK_SMALL_GAP="thinThickSmallGap",w.THIN_THICK_THIN_LARGE_GAP="thinThickThinLargeGap",w.THIN_THICK_THIN_MEDIUM_GAP="thinThickThinMediumGap",w.THIN_THICK_THIN_SMALL_GAP="thinThickThinSmallGap",w.THREE_D_EMBOSS="threeDEmboss",w.THREE_D_ENGRAVE="threeDEngrave",w.TRIPLE="triple",w.WAVE="wave"})(be||(be={}));class de extends c{constructor(y){super("w:pBdr"),y.top&&this.root.push(new oe("w:top",y.top)),y.bottom&&this.root.push(new oe("w:bottom",y.bottom)),y.left&&this.root.push(new oe("w:left",y.left)),y.right&&this.root.push(new oe("w:right",y.right))}}class pe extends l{constructor(){super("w:pBdr");const y=new oe("w:bottom",{color:"auto",space:1,style:be.SINGLE,size:6});this.root.push(y)}}class xe extends h{constructor(){super(...arguments),this.xmlKeys={start:"w:start",end:"w:end",left:"w:left",right:"w:right",hanging:"w:hanging",firstLine:"w:firstLine"}}}class Fe extends l{constructor({start:y,end:$,left:ne,right:ye,hanging:we,firstLine:Ne}){super("w:ind"),this.root.push(new xe({start:y===void 0?void 0:D(y),end:$===void 0?void 0:D($),left:ne===void 0?void 0:D(ne),right:ye===void 0?void 0:D(ye),hanging:we===void 0?void 0:X(we),firstLine:Ne===void 0?void 0:X(Ne)}))}}class st extends l{constructor(){super("w:br")}}(function(w){w.BEGIN="begin",w.END="end",w.SEPARATE="separate"})(ae||(ae={}));class I extends h{constructor(){super(...arguments),this.xmlKeys={type:"w:fldCharType",dirty:"w:dirty"}}}class L extends l{constructor(y){super("w:fldChar"),this.root.push(new I({type:ae.BEGIN,dirty:y}))}}class z extends l{constructor(y){super("w:fldChar"),this.root.push(new I({type:ae.SEPARATE,dirty:y}))}}class te extends l{constructor(y){super("w:fldChar"),this.root.push(new I({type:ae.END,dirty:y}))}}(function(w){w.DEFAULT="default",w.PRESERVE="preserve"})(ue||(ue={}));class se extends h{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class ce extends l{constructor(){super("w:instrText"),this.root.push(new se({space:ue.PRESERVE})),this.root.push("PAGE")}}class Oe extends l{constructor(){super("w:instrText"),this.root.push(new se({space:ue.PRESERVE})),this.root.push("NUMPAGES")}}class ze extends l{constructor(){super("w:instrText"),this.root.push(new se({space:ue.PRESERVE})),this.root.push("SECTIONPAGES")}}class Ve extends h{constructor(){super(...arguments),this.xmlKeys={id:"w:id",author:"w:author",date:"w:date"}}}class Rt extends h{constructor(){super(...arguments),this.xmlKeys={fill:"w:fill",color:"w:color",type:"w:val"}}}class ot extends l{constructor({fill:y,color:$,type:ne}){super("w:shd"),this.root.push(new Rt({fill:y===void 0?void 0:M(y),color:$===void 0?void 0:M($),type:ne}))}}(function(w){w.CLEAR="clear",w.DIAGONAL_CROSS="diagCross",w.DIAGONAL_STRIPE="diagStripe",w.HORIZONTAL_CROSS="horzCross",w.HORIZONTAL_STRIPE="horzStripe",w.NIL="nil",w.PERCENT_5="pct5",w.PERCENT_10="pct10",w.PERCENT_12="pct12",w.PERCENT_15="pct15",w.PERCENT_20="pct20",w.PERCENT_25="pct25",w.PERCENT_30="pct30",w.PERCENT_35="pct35",w.PERCENT_37="pct37",w.PERCENT_40="pct40",w.PERCENT_45="pct45",w.PERCENT_50="pct50",w.PERCENT_55="pct55",w.PERCENT_60="pct60",w.PERCENT_62="pct62",w.PERCENT_65="pct65",w.PERCENT_70="pct70",w.PERCENT_75="pct75",w.PERCENT_80="pct80",w.PERCENT_85="pct85",w.PERCENT_87="pct87",w.PERCENT_90="pct90",w.PERCENT_95="pct95",w.REVERSE_DIAGONAL_STRIPE="reverseDiagStripe",w.SOLID="solid",w.THIN_DIAGONAL_CROSS="thinDiagCross",w.THIN_DIAGONAL_STRIPE="thinDiagStripe",w.THIN_HORIZONTAL_CROSS="thinHorzCross",w.THIN_REVERSE_DIAGONAL_STRIPE="thinReverseDiagStripe",w.THIN_VERTICAL_STRIPE="thinVertStripe",w.VERTICAL_STRIPE="vertStripe"})(U||(U={})),function(w){w.DOT="dot"}(R||(R={}));class Et extends l{constructor(y){super("w:em"),this.root.push(new u({val:y}))}}class Ua extends Et{constructor(y=R.DOT){super(y)}}class Ds extends Et{constructor(){super(R.DOT)}}class ko extends l{constructor(y){super("w:spacing"),this.root.push(new u({val:D(y)}))}}class CR extends l{constructor(y){super("w:color"),this.root.push(new u({val:M(y)}))}}class IR extends l{constructor(y){super("w:highlight"),this.root.push(new u({val:y}))}}class RR extends l{constructor(y){super("w:highlightCs"),this.root.push(new u({val:y}))}}class xb extends h{constructor(){super(...arguments),this.xmlKeys={ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"}}}class rh extends l{constructor(y,$){if(super("w:rFonts"),typeof y=="string"){const ne=y;this.root.push(new xb({ascii:ne,cs:ne,eastAsia:ne,hAnsi:ne,hint:$}))}else{const ne=y;this.root.push(new xb(ne))}}}class kb extends l{constructor(y){super("w:vertAlign"),this.root.push(new u({val:y}))}}class QR extends kb{constructor(){super("superscript")}}class PR extends kb{constructor(){super("subscript")}}(function(w){w.SINGLE="single",w.WORDS="words",w.DOUBLE="double",w.THICK="thick",w.DOTTED="dotted",w.DOTTEDHEAVY="dottedHeavy",w.DASH="dash",w.DASHEDHEAVY="dashedHeavy",w.DASHLONG="dashLong",w.DASHLONGHEAVY="dashLongHeavy",w.DOTDASH="dotDash",w.DASHDOTHEAVY="dashDotHeavy",w.DOTDOTDASH="dotDotDash",w.DASHDOTDOTHEAVY="dashDotDotHeavy",w.WAVE="wave",w.WAVYHEAVY="wavyHeavy",w.WAVYDOUBLE="wavyDouble"})(Q||(Q={}));class Sb extends l{constructor(y=Q.SINGLE,$){super("w:u"),this.root.push(new u({val:y,color:$===void 0?void 0:M($)}))}}class $r extends c{constructor(y){var $,ne;if(super("w:rPr"),!y)return;y.bold!==void 0&&this.push(new k("w:b",y.bold)),(y.boldComplexScript===void 0&&y.bold!==void 0||y.boldComplexScript)&&this.push(new k("w:bCs",($=y.boldComplexScript)!==null&&$!==void 0?$:y.bold)),y.italics!==void 0&&this.push(new k("w:i",y.italics)),(y.italicsComplexScript===void 0&&y.italics!==void 0||y.italicsComplexScript)&&this.push(new k("w:iCs",(ne=y.italicsComplexScript)!==null&&ne!==void 0?ne:y.italics)),y.underline&&this.push(new Sb(y.underline.type,y.underline.color)),y.emphasisMark&&this.push(new Ua(y.emphasisMark.type)),y.color&&this.push(new CR(y.color)),y.size!==void 0&&this.push(new j("w:sz",y.size));const ye=y.sizeComplexScript===void 0||y.sizeComplexScript===!0?y.size:y.sizeComplexScript;ye&&this.push(new j("w:szCs",ye)),y.rightToLeft!==void 0&&this.push(new k("w:rtl",y.rightToLeft)),y.smallCaps!==void 0?this.push(new k("w:smallCaps",y.smallCaps)):y.allCaps!==void 0&&this.push(new k("w:caps",y.allCaps)),y.strike!==void 0&&this.push(new k("w:strike",y.strike)),y.doubleStrike!==void 0&&this.push(new k("w:dstrike",y.doubleStrike)),y.subScript&&this.push(new PR),y.superScript&&this.push(new QR),y.style&&this.push(new V("w:rStyle",y.style)),y.font&&(typeof y.font=="string"?this.push(new rh(y.font)):"name"in y.font?this.push(new rh(y.font.name,y.font.hint)):this.push(new rh(y.font))),y.highlight&&this.push(new IR(y.highlight));const we=y.highlightComplexScript===void 0||y.highlightComplexScript===!0?y.highlight:y.highlightComplexScript;we&&this.push(new RR(we)),y.characterSpacing&&this.push(new ko(y.characterSpacing)),y.emboss!==void 0&&this.push(new k("w:emboss",y.emboss)),y.imprint!==void 0&&this.push(new k("w:imprint",y.imprint)),y.shading&&this.push(new ot(y.shading)),y.revision&&this.push(new Eb(y.revision))}push(y){this.root.push(y)}}class Eb extends l{constructor(y){super("w:rPrChange"),this.root.push(new Ve({id:y.id,author:y.author,date:y.date})),this.addChildElement(new $r(y))}}class DR extends h{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class Hd extends l{constructor(y){super("w:t"),this.root.push(new DR({space:ue.PRESERVE})),this.root.push(y)}}(function(w){w.CURRENT="CURRENT",w.TOTAL_PAGES="TOTAL_PAGES",w.TOTAL_PAGES_IN_SECTION="TOTAL_PAGES_IN_SECTION"})(F||(F={}));class Mn extends l{constructor(y){if(super("w:r"),this.properties=new $r(y),this.root.push(this.properties),y.break)for(let $=0;$<y.break;$++)this.root.push(new st);if(y.children)for(const $ of y.children)if(typeof $!="string")this.root.push($);else switch($){case F.CURRENT:this.root.push(new L),this.root.push(new ce),this.root.push(new z),this.root.push(new te);break;case F.TOTAL_PAGES:this.root.push(new L),this.root.push(new Oe),this.root.push(new z),this.root.push(new te);break;case F.TOTAL_PAGES_IN_SECTION:this.root.push(new L),this.root.push(new ze),this.root.push(new z),this.root.push(new te);break;default:this.root.push(new Hd($))}else y.text&&this.root.push(new Hd(y.text))}}class za extends Mn{constructor(y){if(typeof y=="string")return super({}),this.root.push(new Hd(y)),this;super(y)}}class NR extends h{constructor(){super(...arguments),this.xmlKeys={char:"w:char",symbolfont:"w:font"}}}class Tb extends l{constructor(y="",$="Wingdings"){super("w:sym"),this.root.push(new NR({char:y,symbolfont:$}))}}class LR extends Mn{constructor(y){if(typeof y=="string")return super({}),void this.root.push(new Tb(y));super(y),this.root.push(new Tb(y.char,y.symbolfont))}}let BR=0;const MR=w=>Math.floor(w/25.4*72*20),li=w=>Math.floor(72*w*20),ja=()=>++BR,Ha=()=>((w=21)=>{let y="",$=w;for(;$--;)y+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return y})().toLowerCase();var sh,oh,Ns,ah,lh,So,Gd,Ga,Vd,Xd,ch,Yd,Zd,ur,Va,qd,Kd,Jd,ep,tp,np,Xa,ip,rp;(function(w){w.CHARACTER="character",w.COLUMN="column",w.INSIDE_MARGIN="insideMargin",w.LEFT_MARGIN="leftMargin",w.MARGIN="margin",w.OUTSIDE_MARGIN="outsideMargin",w.PAGE="page",w.RIGHT_MARGIN="rightMargin"})(sh||(sh={})),function(w){w.BOTTOM_MARGIN="bottomMargin",w.INSIDE_MARGIN="insideMargin",w.LINE="line",w.MARGIN="margin",w.OUTSIDE_MARGIN="outsideMargin",w.PAGE="page",w.PARAGRAPH="paragraph",w.TOP_MARGIN="topMargin"}(oh||(oh={}));class $R extends h{constructor(){super(...arguments),this.xmlKeys={x:"x",y:"y"}}}class Cb extends l{constructor(){super("wp:simplePos"),this.root.push(new $R({x:0,y:0}))}}class Ib extends l{constructor(y){super("wp:align"),this.root.push(y)}}class Rb extends l{constructor(y){super("wp:posOffset"),this.root.push(y.toString())}}class FR extends h{constructor(){super(...arguments),this.xmlKeys={relativeFrom:"relativeFrom"}}}class Qb extends l{constructor(y){if(super("wp:positionH"),this.root.push(new FR({relativeFrom:y.relative||sh.PAGE})),y.align)this.root.push(new Ib(y.align));else{if(y.offset===void 0)throw new Error("There is no configuration provided for floating position (Align or offset)");this.root.push(new Rb(y.offset))}}}class WR extends h{constructor(){super(...arguments),this.xmlKeys={relativeFrom:"relativeFrom"}}}class Pb extends l{constructor(y){if(super("wp:positionV"),this.root.push(new WR({relativeFrom:y.relative||oh.PAGE})),y.align)this.root.push(new Ib(y.align));else{if(y.offset===void 0)throw new Error("There is no configuration provided for floating position (Align or offset)");this.root.push(new Rb(y.offset))}}}class UR extends h{constructor(){super(...arguments),this.xmlKeys={uri:"uri"}}}class zR extends h{constructor(){super(...arguments),this.xmlKeys={embed:"r:embed",cstate:"cstate"}}}class jR extends l{constructor(y){super("a:blip"),this.root.push(new zR({embed:`rId{${y.fileName}}`,cstate:"none"}))}}class HR extends l{constructor(){super("a:srcRect")}}class GR extends l{constructor(){super("a:fillRect")}}class VR extends l{constructor(){super("a:stretch"),this.root.push(new GR)}}class XR extends l{constructor(y){super("pic:blipFill"),this.root.push(new jR(y)),this.root.push(new HR),this.root.push(new VR)}}class YR extends h{constructor(){super(...arguments),this.xmlKeys={noChangeAspect:"noChangeAspect",noChangeArrowheads:"noChangeArrowheads"}}}class ZR extends l{constructor(){super("a:picLocks"),this.root.push(new YR({noChangeAspect:1,noChangeArrowheads:1}))}}class qR extends l{constructor(){super("pic:cNvPicPr"),this.root.push(new ZR)}}class KR extends h{constructor(){super(...arguments),this.xmlKeys={id:"id",name:"name",descr:"descr"}}}class JR extends l{constructor(){super("pic:cNvPr"),this.root.push(new KR({id:0,name:"",descr:""}))}}class eQ extends l{constructor(){super("pic:nvPicPr"),this.root.push(new JR),this.root.push(new qR)}}class tQ extends h{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns:pic"}}}class nQ extends h{constructor(){super(...arguments),this.xmlKeys={cx:"cx",cy:"cy"}}}class iQ extends l{constructor(y,$){super("a:ext"),this.attributes=new nQ({cx:y,cy:$}),this.root.push(this.attributes)}}class rQ extends h{constructor(){super(...arguments),this.xmlKeys={x:"x",y:"y"}}}class sQ extends l{constructor(){super("a:off"),this.root.push(new rQ({x:0,y:0}))}}class oQ extends h{constructor(){super(...arguments),this.xmlKeys={flipVertical:"flipV",flipHorizontal:"flipH",rotation:"rot"}}}class aQ extends l{constructor(y){var $,ne;super("a:xfrm"),this.root.push(new oQ({flipVertical:($=y.flip)===null||$===void 0?void 0:$.vertical,flipHorizontal:(ne=y.flip)===null||ne===void 0?void 0:ne.horizontal,rotation:y.rotation})),this.extents=new iQ(y.emus.x,y.emus.y),this.root.push(new sQ),this.root.push(this.extents)}}class lQ extends l{constructor(){super("a:avLst")}}class cQ extends h{constructor(){super(...arguments),this.xmlKeys={prst:"prst"}}}class hQ extends l{constructor(){super("a:prstGeom"),this.root.push(new cQ({prst:"rect"})),this.root.push(new lQ)}}class uQ extends h{constructor(){super(...arguments),this.xmlKeys={bwMode:"bwMode"}}}class fQ extends l{constructor(y){super("pic:spPr"),this.root.push(new uQ({bwMode:"auto"})),this.form=new aQ(y),this.root.push(this.form),this.root.push(new hQ)}}class dQ extends l{constructor(y,$){super("pic:pic"),this.root.push(new tQ({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.root.push(new eQ),this.root.push(new XR(y)),this.root.push(new fQ($))}}class pQ extends l{constructor(y,$){super("a:graphicData"),this.root.push(new UR({uri:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.pic=new dQ(y,$),this.root.push(this.pic)}}class mQ extends h{constructor(){super(...arguments),this.xmlKeys={a:"xmlns:a"}}}class Db extends l{constructor(y,$){super("a:graphic"),this.root.push(new mQ({a:"http://schemas.openxmlformats.org/drawingml/2006/main"})),this.data=new pQ(y,$),this.root.push(this.data)}}(function(w){w[w.NONE=0]="NONE",w[w.SQUARE=1]="SQUARE",w[w.TIGHT=2]="TIGHT",w[w.TOP_AND_BOTTOM=3]="TOP_AND_BOTTOM"})(Ns||(Ns={})),function(w){w.BOTH_SIDES="bothSides",w.LEFT="left",w.RIGHT="right",w.LARGEST="largest"}(ah||(ah={}));class sp extends l{constructor(){super("wp:wrapNone")}}class gQ extends h{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR",wrapText:"wrapText"}}}class Nb extends l{constructor(y,$={top:0,bottom:0,left:0,right:0}){super("wp:wrapSquare"),this.root.push(new gQ({wrapText:y.side||ah.BOTH_SIDES,distT:$.top,distB:$.bottom,distL:$.left,distR:$.right}))}}class yQ extends h{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB"}}}class Lb extends l{constructor(y={top:0,bottom:0}){super("wp:wrapTight"),this.root.push(new yQ({distT:y.top,distB:y.bottom}))}}class OQ extends h{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB"}}}class Bb extends l{constructor(y={top:0,bottom:0}){super("wp:wrapTopAndBottom"),this.root.push(new OQ({distT:y.top,distB:y.bottom}))}}class bQ extends h{constructor(){super(...arguments),this.xmlKeys={id:"id",name:"name",descr:"descr"}}}class Mb extends l{constructor(){super("wp:docPr"),this.root.push(new bQ({id:0,name:"",descr:""}))}}class vQ extends h{constructor(){super(...arguments),this.xmlKeys={b:"b",l:"l",r:"r",t:"t"}}}class $b extends l{constructor(){super("wp:effectExtent"),this.root.push(new vQ({b:0,l:0,r:0,t:0}))}}class wQ extends h{constructor(){super(...arguments),this.xmlKeys={cx:"cx",cy:"cy"}}}class Fb extends l{constructor(y,$){super("wp:extent"),this.attributes=new wQ({cx:y,cy:$}),this.root.push(this.attributes)}}class AQ extends h{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns:a",noChangeAspect:"noChangeAspect"}}}class _Q extends l{constructor(){super("a:graphicFrameLocks"),this.root.push(new AQ({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/main",noChangeAspect:1}))}}class Wb extends l{constructor(){super("wp:cNvGraphicFramePr"),this.root.push(new _Q)}}class xQ extends h{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR",allowOverlap:"allowOverlap",behindDoc:"behindDoc",layoutInCell:"layoutInCell",locked:"locked",relativeHeight:"relativeHeight",simplePos:"simplePos"}}}class kQ extends l{constructor(y,$,ne){super("wp:anchor");const ye=Object.assign({allowOverlap:!0,behindDocument:!1,lockAnchor:!1,layoutInCell:!0,verticalPosition:{},horizontalPosition:{}},ne.floating);if(this.root.push(new xQ({distT:ye.margins&&ye.margins.top||0,distB:ye.margins&&ye.margins.bottom||0,distL:ye.margins&&ye.margins.left||0,distR:ye.margins&&ye.margins.right||0,simplePos:"0",allowOverlap:ye.allowOverlap===!0?"1":"0",behindDoc:ye.behindDocument===!0?"1":"0",locked:ye.lockAnchor===!0?"1":"0",layoutInCell:ye.layoutInCell===!0?"1":"0",relativeHeight:ye.zIndex?ye.zIndex:$.emus.y})),this.root.push(new Cb),this.root.push(new Qb(ye.horizontalPosition)),this.root.push(new Pb(ye.verticalPosition)),this.root.push(new Fb($.emus.x,$.emus.y)),this.root.push(new $b),ne.floating!==void 0&&ne.floating.wrap!==void 0)switch(ne.floating.wrap.type){case Ns.SQUARE:this.root.push(new Nb(ne.floating.wrap,ne.floating.margins));break;case Ns.TIGHT:this.root.push(new Lb(ne.floating.margins));break;case Ns.TOP_AND_BOTTOM:this.root.push(new Bb(ne.floating.margins));break;case Ns.NONE:default:this.root.push(new sp)}else this.root.push(new sp);this.root.push(new Mb),this.root.push(new Wb),this.root.push(new Db(y,$))}}class SQ extends h{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR"}}}class EQ extends l{constructor(y,$){super("wp:inline"),this.root.push(new SQ({distT:0,distB:0,distL:0,distR:0})),this.extent=new Fb($.emus.x,$.emus.y),this.graphic=new Db(y,$),this.root.push(this.extent),this.root.push(new $b),this.root.push(new Mb),this.root.push(new Wb),this.root.push(this.graphic)}}class Ub extends l{constructor(y,$={}){super("w:drawing"),$.floating?this.root.push(new kQ(y,y.transformation,$)):(this.inline=new EQ(y,y.transformation),this.root.push(this.inline))}}class TQ extends Mn{constructor(y){super({}),this.key=`${Ha()}.png`;const $=typeof y.data=="string"?this.convertDataURIToBinary(y.data):y.data;this.imageData={stream:$,fileName:this.key,transformation:{pixels:{x:Math.round(y.transformation.width),y:Math.round(y.transformation.height)},emus:{x:Math.round(9525*y.transformation.width),y:Math.round(9525*y.transformation.height)},flip:y.transformation.flip,rotation:y.transformation.rotation?6e4*y.transformation.rotation:void 0}};const ne=new Ub(this.imageData,{floating:y.floating});this.root.push(ne)}prepForXml(y){return y.file.Media.addImage(this.key,this.imageData),super.prepForXml(y)}convertDataURIToBinary(y){const $=";base64,",ne=y.indexOf($)+$.length;return typeof atob=="function"?new Uint8Array(atob(y.substring(ne)).split("").map(ye=>ye.charCodeAt(0))):new(r(764)).Buffer(y,"base64")}}class CQ extends h{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class IQ extends l{constructor(y){super("w:instrText"),this.root.push(new CQ({space:ue.PRESERVE})),this.root.push(`SEQ ${y}`)}}class RQ extends Mn{constructor(y){super({}),this.root.push(new L(!0)),this.root.push(new IQ(y)),this.root.push(new z),this.root.push(new te)}}class QQ extends l{constructor(){super("w:tab")}}class PQ extends h{constructor(){super(...arguments),this.xmlKeys={instr:"w:instr"}}}class zb extends l{constructor(y,$){super("w:fldSimple"),this.root.push(new PQ({instr:y})),$!==void 0&&this.root.push(new za($))}}class DQ extends zb{constructor(y){super(` MERGEFIELD ${y} `,`\xAB${y}\xBB`)}}(function(w){w.COLUMN="column",w.PAGE="page"})(lh||(lh={}));class jb extends l{constructor(y){super("w:br"),this.root.push(new u({type:y}))}}class NQ extends Mn{constructor(){super({}),this.root.push(new jb(lh.PAGE))}}class LQ extends Mn{constructor(){super({}),this.root.push(new jb(lh.COLUMN))}}class Hb extends l{constructor(){super("w:pageBreakBefore")}}(function(w){w.AT_LEAST="atLeast",w.EXACTLY="exactly",w.AUTO="auto"})(So||(So={}));class BQ extends h{constructor(){super(...arguments),this.xmlKeys={after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule"}}}class Gb extends l{constructor(y){super("w:spacing"),this.root.push(new BQ(y))}}(function(w){w.HEADING_1="Heading1",w.HEADING_2="Heading2",w.HEADING_3="Heading3",w.HEADING_4="Heading4",w.HEADING_5="Heading5",w.HEADING_6="Heading6",w.TITLE="Title"})(Gd||(Gd={}));class Ya extends l{constructor(y){super("w:pStyle"),this.root.push(new u({val:y}))}}class hh extends l{constructor(y,$,ne){super("w:tabs"),this.root.push(new Xb(y,$,ne))}}(function(w){w.LEFT="left",w.RIGHT="right",w.CENTER="center",w.BAR="bar",w.CLEAR="clear",w.DECIMAL="decimal",w.END="end",w.NUM="num",w.START="start"})(Ga||(Ga={})),function(w){w.DOT="dot",w.HYPHEN="hyphen",w.MIDDLE_DOT="middleDot",w.NONE="none",w.UNDERSCORE="underscore"}(Vd||(Vd={})),function(w){w[w.MAX=9026]="MAX"}(Xd||(Xd={}));class Vb extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val",pos:"w:pos",leader:"w:leader"}}}class Xb extends l{constructor(y,$,ne){super("w:tab"),this.root.push(new Vb({val:y,pos:$,leader:ne}))}}class op extends l{constructor(y,$){super("w:numPr"),this.root.push(new MQ($)),this.root.push(new $Q(y))}}class MQ extends l{constructor(y){if(super("w:ilvl"),y>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new u({val:y}))}}class $Q extends l{constructor(y){super("w:numId"),this.root.push(new u({val:typeof y=="string"?`{${y}}`:y}))}}class FQ extends h{constructor(){super(...arguments),this.xmlKeys={id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"}}}(function(w){w.EXTERNAL="External"})(ch||(ch={}));class WQ extends l{constructor(y,$,ne,ye){super("Relationship"),this.root.push(new FQ({id:y,type:$,target:ne,targetMode:ye}))}}class UQ extends h{constructor(){super(...arguments),this.xmlKeys={id:"r:id",history:"w:history",anchor:"w:anchor"}}}(function(w){w.INTERNAL="INTERNAL",w.EXTERNAL="EXTERNAL"})(Yd||(Yd={}));class ap extends l{constructor(y,$,ne){super("w:hyperlink"),this.linkId=$;const ye={history:1,anchor:ne||void 0,id:ne?void 0:`rId${this.linkId}`},we=new UQ(ye);this.root.push(we),y.forEach(Ne=>{this.root.push(Ne)})}}class zQ extends ap{constructor(y){super(y.children,Ha(),y.anchor)}}class Yb{constructor(y){this.options=y}}class jQ extends h{constructor(){super(...arguments),this.xmlKeys={id:"w:id",name:"w:name"}}}class HQ extends h{constructor(){super(...arguments),this.xmlKeys={id:"w:id"}}}class Zb{constructor(y){const $=ja();this.start=new qb(y.id,$),this.children=y.children,this.end=new Kb($)}}class qb extends l{constructor(y,$){super("w:bookmarkStart");const ne=new jQ({name:y,id:$});this.root.push(ne)}}class Kb extends l{constructor(y){super("w:bookmarkEnd");const $=new HQ({id:y});this.root.push($)}}class Jb extends l{constructor(y){super("w:outlineLvl"),this.level=y,this.root.push(new u({val:y}))}}class GQ extends h{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class VQ extends l{constructor(y,$={}){super("w:instrText"),this.root.push(new GQ({space:ue.PRESERVE}));let ne=`PAGEREF ${y}`;$.hyperlink&&(ne=`${ne} \\h`),$.useRelativePosition&&(ne=`${ne} \\p`),this.root.push(ne)}}class XQ extends Mn{constructor(y,$={}){super({children:[new L(!0),new VQ(y,$),new te]})}}(function(w){w.BOTH="both",w.BOTTOM="bottom",w.CENTER="center",w.TOP="top"})(Zd||(Zd={}));class ev extends h{constructor(){super(...arguments),this.xmlKeys={verticalAlign:"w:val"}}}class lp extends l{constructor(y){super("w:vAlign"),this.root.push(new ev({verticalAlign:y}))}}(function(w){w.DEFAULT="default",w.FIRST="first",w.EVEN="even"})(ur||(ur={}));class YQ extends h{constructor(){super(...arguments),this.xmlKeys={type:"w:type",id:"r:id"}}}(function(w){w.HEADER="w:headerReference",w.FOOTER="w:footerReference"})(Va||(Va={}));class uh extends l{constructor(y,$){super(y),this.root.push(new YQ({type:$.type||ur.DEFAULT,id:`rId${$.id}`}))}}class tv extends h{constructor(){super(...arguments),this.xmlKeys={space:"w:space",count:"w:num",separate:"w:sep",equalWidth:"w:equalWidth"}}}class nv extends l{constructor({space:y,count:$,separate:ne,equalWidth:ye,children:we}){super("w:cols"),this.root.push(new tv({space:y===void 0?void 0:X(y),count:$===void 0?void 0:v($),separate:ne,equalWidth:ye})),!ye&&we&&we.forEach(Ne=>this.addChildElement(Ne))}}(function(w){w.DEFAULT="default",w.LINES="lines",w.LINES_AND_CHARS="linesAndChars",w.SNAP_TO_CHARS="snapToChars"})(qd||(qd={}));class iv extends h{constructor(){super(...arguments),this.xmlKeys={type:"w:type",linePitch:"w:linePitch",charSpace:"w:charSpace"}}}class rv extends l{constructor(y,$,ne){super("w:docGrid"),this.root.push(new iv({type:ne,linePitch:v(y),charSpace:$?v($):void 0}))}}(function(w){w.NEW_PAGE="newPage",w.NEW_SECTION="newSection",w.CONTINUOUS="continuous"})(Kd||(Kd={}));class sv extends h{constructor(){super(...arguments),this.xmlKeys={countBy:"w:countBy",start:"w:start",restart:"w:restart",distance:"w:distance"}}}class ov extends l{constructor({countBy:y,start:$,restart:ne,distance:ye}){super("w:lnNumType"),this.root.push(new sv({countBy:y===void 0?void 0:v(y),start:$===void 0?void 0:v($),restart:ne,distance:ye===void 0?void 0:X(ye)}))}}(function(w){w.ALL_PAGES="allPages",w.FIRST_PAGE="firstPage",w.NOT_FIRST_PAGE="notFirstPage"})(Jd||(Jd={})),function(w){w.PAGE="page",w.TEXT="text"}(ep||(ep={})),function(w){w.BACK="back",w.FRONT="front"}(tp||(tp={}));class av extends h{constructor(){super(...arguments),this.xmlKeys={display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"}}}class lv extends c{constructor(y){super("w:pgBorders"),y&&(y.pageBorders?this.root.push(new av({display:y.pageBorders.display,offsetFrom:y.pageBorders.offsetFrom,zOrder:y.pageBorders.zOrder})):this.root.push(new av({})),y.pageBorderTop&&this.root.push(new oe("w:top",y.pageBorderTop)),y.pageBorderLeft&&this.root.push(new oe("w:left",y.pageBorderLeft)),y.pageBorderBottom&&this.root.push(new oe("w:bottom",y.pageBorderBottom)),y.pageBorderRight&&this.root.push(new oe("w:right",y.pageBorderRight)))}}class cv extends h{constructor(){super(...arguments),this.xmlKeys={top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter"}}}class hv extends l{constructor(y,$,ne,ye,we,Ne,Ge){super("w:pgMar"),this.root.push(new cv({top:D(y),right:X($),bottom:D(ne),left:X(ye),header:X(we),footer:X(Ne),gutter:X(Ge)}))}}(function(w){w.HYPHEN="hyphen",w.PERIOD="period",w.COLON="colon",w.EM_DASH="emDash",w.EN_DASH="endash"})(np||(np={}));class uv extends h{constructor(){super(...arguments),this.xmlKeys={start:"w:start",formatType:"w:fmt",separator:"w:chapSep"}}}class fv extends l{constructor({start:y,formatType:$,separator:ne}){super("w:pgNumType"),this.root.push(new uv({start:y===void 0?void 0:v(y),formatType:$,separator:ne}))}}(function(w){w.PORTRAIT="portrait",w.LANDSCAPE="landscape"})(Xa||(Xa={}));class dv extends h{constructor(){super(...arguments),this.xmlKeys={width:"w:w",height:"w:h",orientation:"w:orient"}}}class pv extends l{constructor(y,$,ne){super("w:pgSz");const ye=ne===Xa.LANDSCAPE,we=X(y),Ne=X($);this.root.push(new dv({width:ye?Ne:we,height:ye?we:Ne,orientation:ne}))}}(function(w){w.LEFT_TO_RIGHT_TOP_TO_BOTTOM="lrTb",w.TOP_TO_BOTTOM_RIGHT_TO_LEFT="tbRl"})(ip||(ip={}));class ZQ extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class mv extends l{constructor(y){super("w:textDirection"),this.root.push(new ZQ({val:y}))}}(function(w){w.NEXT_PAGE="nextPage",w.NEXT_COLUMN="nextColumn",w.CONTINUOUS="continuous",w.EVEN_PAGE="evenPage",w.ODD_PAGE="oddPage"})(rp||(rp={}));class gv extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class yv extends l{constructor(y){super("w:type"),this.root.push(new gv({val:y}))}}const Fr={TOP:"1in",RIGHT:"1in",BOTTOM:"1in",LEFT:"1in",HEADER:708,FOOTER:708,GUTTER:0},fh={WIDTH:11906,HEIGHT:16838,ORIENTATION:Xa.PORTRAIT};class Ov extends l{constructor({page:{size:{width:y=fh.WIDTH,height:$=fh.HEIGHT,orientation:ne=fh.ORIENTATION}={},margin:{top:ye=Fr.TOP,right:we=Fr.RIGHT,bottom:Ne=Fr.BOTTOM,left:Ge=Fr.LEFT,header:nt=Fr.HEADER,footer:De=Fr.FOOTER,gutter:mt=Fr.GUTTER}={},pageNumbers:Jt={},borders:zt,textDirection:an}={},grid:{linePitch:ui=360,charSpace:$n,type:Np}={},headerWrapperGroup:gN={},footerWrapperGroup:yN={},lineNumbers:mw,titlePage:gw,verticalAlign:yw,column:Ow,type:bw}={}){super("w:sectPr"),this.addHeaderFooterGroup(Va.HEADER,gN),this.addHeaderFooterGroup(Va.FOOTER,yN),bw&&this.root.push(new yv(bw)),this.root.push(new pv(y,$,ne)),this.root.push(new hv(ye,we,Ne,Ge,nt,De,mt)),zt&&this.root.push(new lv(zt)),mw&&this.root.push(new ov(mw)),this.root.push(new fv(Jt)),Ow&&this.root.push(new nv(Ow)),yw&&this.root.push(new lp(yw)),gw!==void 0&&this.root.push(new k("w:titlePg",gw)),an&&this.root.push(new mv(an)),this.root.push(new rv(ui,$n,Np))}addHeaderFooterGroup(y,$){$.default&&this.root.push(new uh(y,{type:ur.DEFAULT,id:$.default.View.ReferenceId})),$.first&&this.root.push(new uh(y,{type:ur.FIRST,id:$.first.View.ReferenceId})),$.even&&this.root.push(new uh(y,{type:ur.EVEN,id:$.even.View.ReferenceId}))}}class bv extends l{constructor(){super("w:body"),this.sections=[]}addSection(y){const $=this.sections.pop();this.root.push(this.createSectionParagraph($)),this.sections.push(new Ov(y))}prepForXml(y){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(y)}push(y){this.root.push(y)}createSectionParagraph(y){const $=new Wr({}),ne=new Ls({});return ne.push(y),$.addChildElement(ne),$}}class vv extends h{constructor(){super(...arguments),this.xmlKeys={width:"w:w",space:"w:space"}}}class qQ extends l{constructor({width:y,space:$}){super("w:col"),this.root.push(new vv({width:X(y),space:$===void 0?void 0:X($)}))}}class Eo extends h{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"}}}class wv extends h{constructor(){super(...arguments),this.xmlKeys={color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"}}}class Av extends l{constructor(y){super("w:background"),this.root.push(new wv({color:y.color===void 0?void 0:M(y.color),themeColor:y.themeColor,themeShade:y.themeShade===void 0?void 0:T(y.themeShade),themeTint:y.themeTint===void 0?void 0:T(y.themeTint)}))}}class KQ extends l{constructor(y){super("w:document"),this.root.push(new Eo({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.body=new bv,this.root.push(new Av(y.background)),this.root.push(this.body)}add(y){return this.body.push(y),this}get Body(){return this.body}}class JQ extends h{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns"}}}class Za extends l{constructor(){super("Relationships"),this.root.push(new JQ({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}addRelationship(y){this.root.push(y)}createRelationship(y,$,ne,ye){const we=new WQ(`rId${y}`,$,ne,ye);return this.addRelationship(we),we}get RelationshipCount(){return this.root.length-1}}class _v{constructor(y){this.document=new KQ(y),this.relationships=new Za}get View(){return this.document}get Relationships(){return this.relationships}}var cp,hp,up;(function(w){w.NONE="none",w.DROP="drop",w.MARGIN="margin"})(cp||(cp={})),function(w){w.MARGIN="margin",w.PAGE="page",w.TEXT="text"}(hp||(hp={})),function(w){w.AROUND="around",w.AUTO="auto",w.NONE="none",w.NOT_BESIDE="notBeside",w.THROUGH="through",w.TIGHT="tight"}(up||(up={}));class xv extends h{constructor(){super(...arguments),this.xmlKeys={anchorLock:"w:anchorLock",dropCap:"w:dropCap",width:"w:w",height:"w:h",x:"w:x",y:"w:y",anchorHorizontal:"w:hAnchor",anchorVertical:"w:vAnchor",spaceHorizontal:"w:hSpace",spaceVertical:"w:vSpace",rule:"w:hRule",alignmentX:"w:xAlign",alignmentY:"w:yAlign",lines:"w:lines",wrap:"w:wrap"}}}class kv extends l{constructor(y){var $,ne;super("w:framePr"),this.root.push(new xv({anchorLock:y.anchorLock,dropCap:y.dropCap,width:y.width,height:y.height,x:y.position.x,y:y.position.y,anchorHorizontal:y.anchor.horizontal,anchorVertical:y.anchor.vertical,spaceHorizontal:($=y.space)===null||$===void 0?void 0:$.horizontal,spaceVertical:(ne=y.space)===null||ne===void 0?void 0:ne.vertical,rule:y.rule,alignmentX:y.alignment.x,alignmentY:y.alignment.y,lines:y.lines,wrap:y.wrap}))}}class Ls extends c{constructor(y){var $,ne;if(super("w:pPr"),this.numberingReferences=[],!y)return this;if(y.heading&&this.push(new Ya(y.heading)),y.bullet&&this.push(new Ya("ListParagraph")),y.numbering&&(y.style||y.heading||y.numbering.custom||this.push(new Ya("ListParagraph"))),y.style&&this.push(new Ya(y.style)),y.keepNext!==void 0&&this.push(new k("w:keepNext",y.keepNext)),y.keepLines!==void 0&&this.push(new k("w:keepLines",y.keepLines)),y.pageBreakBefore&&this.push(new Hb),y.frame&&this.push(new kv(y.frame)),y.widowControl!==void 0&&this.push(new k("w:widowControl",y.widowControl)),y.bullet&&this.push(new op(1,y.bullet.level)),y.numbering&&(this.numberingReferences.push({reference:y.numbering.reference,instance:($=y.numbering.instance)!==null&&$!==void 0?$:0}),this.push(new op(`${y.numbering.reference}-${(ne=y.numbering.instance)!==null&&ne!==void 0?ne:0}`,y.numbering.level))),y.border&&this.push(new de(y.border)),y.thematicBreak&&this.push(new pe),y.shading&&this.push(new ot(y.shading)),y.rightTabStop&&this.push(new hh(Ga.RIGHT,y.rightTabStop)),y.tabStops)for(const ye of y.tabStops)this.push(new hh(ye.type,ye.position,ye.leader));y.leftTabStop&&this.push(new hh(Ga.LEFT,y.leftTabStop)),y.bidirectional!==void 0&&this.push(new k("w:bidi",y.bidirectional)),y.spacing&&this.push(new Gb(y.spacing)),y.indent&&this.push(new Fe(y.indent)),y.contextualSpacing!==void 0&&this.push(new k("w:contextualSpacing",y.contextualSpacing)),y.alignment&&this.push(new me(y.alignment)),y.outlineLevel!==void 0&&this.push(new Jb(y.outlineLevel)),y.suppressLineNumbers!==void 0&&this.push(new k("w:suppressLineNumbers",y.suppressLineNumbers))}push(y){this.root.push(y)}prepForXml(y){if(y.viewWrapper instanceof _v)for(const $ of this.numberingReferences)y.file.Numbering.createConcreteNumberingInstance($.reference,$.instance);return super.prepForXml(y)}}class Wr extends l{constructor(y){if(super("w:p"),typeof y=="string")return this.properties=new Ls({}),this.root.push(this.properties),this.root.push(new za(y)),this;if(this.properties=new Ls(y),this.root.push(this.properties),y.text&&this.root.push(new za(y.text)),y.children)for(const $ of y.children)if($ instanceof Zb){this.root.push($.start);for(const ne of $.children)this.root.push(ne);this.root.push($.end)}else this.root.push($)}prepForXml(y){for(const $ of this.root)if($ instanceof Yb){const ne=this.root.indexOf($),ye=new ap($.options.children,Ha());y.viewWrapper.Relationships.createRelationship(ye.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",$.options.link,ch.EXTERNAL),this.root[ne]=ye}return super.prepForXml(y)}addRunToFront(y){return this.root.splice(1,0,y),this}}class eP extends l{constructor(y){super("m:oMath");for(const $ of y.children)this.root.push($)}}class tP extends l{constructor(y){super("m:t"),this.root.push(y)}}class nP extends l{constructor(y){super("m:r"),this.root.push(new tP(y))}}class Sv extends l{constructor(y){super("m:den");for(const $ of y)this.root.push($)}}class Ev extends l{constructor(y){super("m:num");for(const $ of y)this.root.push($)}}class iP extends l{constructor(y){super("m:f"),this.root.push(new Ev(y.numerator)),this.root.push(new Sv(y.denominator))}}class rP extends h{constructor(){super(...arguments),this.xmlKeys={accent:"m:val"}}}class Tv extends l{constructor(y){super("m:chr"),this.root.push(new rP({accent:y}))}}class ci extends l{constructor(y){super("m:e");for(const $ of y)this.root.push($)}}class sP extends h{constructor(){super(...arguments),this.xmlKeys={value:"m:val"}}}class Cv extends l{constructor(){super("m:limLoc"),this.root.push(new sP({value:"undOvr"}))}}class oP extends h{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"}}}class aP extends l{constructor(){super("m:subHide"),this.root.push(new oP({hide:1}))}}class lP extends h{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"}}}class cP extends l{constructor(){super("m:supHide"),this.root.push(new lP({hide:1}))}}class Iv extends l{constructor(y,$,ne){super("m:naryPr"),this.root.push(new Tv(y)),this.root.push(new Cv),$||this.root.push(new cP),ne||this.root.push(new aP)}}class qa extends l{constructor(y){super("m:sub");for(const $ of y)this.root.push($)}}class Ka extends l{constructor(y){super("m:sup");for(const $ of y)this.root.push($)}}class hP extends l{constructor(y){super("m:nary"),this.root.push(new Iv("\u2211",!!y.superScript,!!y.subScript)),y.subScript&&this.root.push(new qa(y.subScript)),y.superScript&&this.root.push(new Ka(y.superScript)),this.root.push(new ci(y.children))}}class Rv extends l{constructor(){super("m:sSupPr")}}class uP extends l{constructor(y){super("m:sSup"),this.root.push(new Rv),this.root.push(new ci(y.children)),this.root.push(new Ka(y.superScript))}}class Qv extends l{constructor(){super("m:sSubPr")}}class fP extends l{constructor(y){super("m:sSub"),this.root.push(new Qv),this.root.push(new ci(y.children)),this.root.push(new qa(y.subScript))}}class Pv extends l{constructor(){super("m:sSubSupPr")}}class dP extends l{constructor(y){super("m:sSubSup"),this.root.push(new Pv),this.root.push(new ci(y.children)),this.root.push(new qa(y.subScript)),this.root.push(new Ka(y.superScript))}}class Dv extends l{constructor(){super("m:sPrePr")}}class pP extends l{constructor(y){super("m:sPre"),this.root.push(new Dv),this.root.push(new ci(y.children)),this.root.push(new qa(y.subScript)),this.root.push(new Ka(y.superScript))}}const mP="";class Nv extends l{constructor(y){if(super("m:deg"),y)for(const $ of y)this.root.push($)}}class gP extends h{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"}}}class yP extends l{constructor(){super("m:degHide"),this.root.push(new gP({hide:1}))}}class Lv extends l{constructor(y){super("m:radPr"),y||this.root.push(new yP)}}class OP extends l{constructor(y){super("m:rad"),this.root.push(new Lv(!!y.degree)),this.root.push(new Nv(y.degree)),this.root.push(new ci(y.children))}}class Bv extends l{constructor(y){super("m:fName");for(const $ of y)this.root.push($)}}class Mv extends l{constructor(){super("m:funcPr")}}class bP extends l{constructor(y){super("m:func"),this.root.push(new Mv),this.root.push(new Bv(y.name)),this.root.push(new ci(y.children))}}class vP extends h{constructor(){super(...arguments),this.xmlKeys={character:"m:val"}}}class wP extends l{constructor(y){super("m:begChr"),this.root.push(new vP({character:y}))}}class AP extends h{constructor(){super(...arguments),this.xmlKeys={character:"m:val"}}}class _P extends l{constructor(y){super("m:endChr"),this.root.push(new AP({character:y}))}}class dh extends l{constructor(y){super("m:dPr"),y&&(this.root.push(new wP(y.beginningCharacter)),this.root.push(new _P(y.endingCharacter)))}}class xP extends l{constructor(y){super("m:d"),this.root.push(new dh),this.root.push(new ci(y.children))}}class kP extends l{constructor(y){super("m:d"),this.root.push(new dh({beginningCharacter:"[",endingCharacter:"]"})),this.root.push(new ci(y.children))}}class SP extends l{constructor(y){super("m:d"),this.root.push(new dh({beginningCharacter:"{",endingCharacter:"}"})),this.root.push(new ci(y.children))}}class EP extends l{constructor(y){super("m:d"),this.root.push(new dh({beginningCharacter:"\u2329",endingCharacter:"\u232A"})),this.root.push(new ci(y.children))}}class TP extends l{constructor(y){super("w:tblGrid");for(const $ of y)this.root.push(new IP($))}}class CP extends h{constructor(){super(...arguments),this.xmlKeys={w:"w:w"}}}class IP extends l{constructor(y){super("w:gridCol"),y!==void 0&&this.root.push(new CP({w:X(y)}))}}var To,ph,Ja,fp;(function(w){w.AUTO="auto",w.DXA="dxa",w.NIL="nil",w.PERCENTAGE="pct"})(To||(To={}));class RP extends h{constructor(){super(...arguments),this.xmlKeys={type:"w:type",size:"w:w"}}}class Ur extends l{constructor(y,{type:$=To.AUTO,size:ne}){super(y);let ye=ne;$===To.PERCENTAGE&&typeof ne=="number"&&(ye=`${ne}%`),this.root.push(new RP({type:$,size:K(ye)}))}}(function(w){w.TABLE="w:tblCellMar",w.TABLE_CELL="w:tcMar"})(ph||(ph={}));class $v extends c{constructor(y,{marginUnitType:$=To.DXA,top:ne,left:ye,bottom:we,right:Ne}){super(y),ne!==void 0&&this.root.push(new Ur("w:top",{type:$,size:ne})),ye!==void 0&&this.root.push(new Ur("w:left",{type:$,size:ye})),we!==void 0&&this.root.push(new Ur("w:bottom",{type:$,size:we})),Ne!==void 0&&this.root.push(new Ur("w:right",{type:$,size:Ne}))}}class Fv extends c{constructor(y){super("w:tcBorders"),y.top&&this.root.push(new oe("w:top",y.top)),y.start&&this.root.push(new oe("w:start",y.start)),y.left&&this.root.push(new oe("w:left",y.left)),y.bottom&&this.root.push(new oe("w:bottom",y.bottom)),y.end&&this.root.push(new oe("w:end",y.end)),y.right&&this.root.push(new oe("w:right",y.right))}}class QP extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class Wv extends l{constructor(y){super("w:gridSpan"),this.root.push(new QP({val:v(y)}))}}(function(w){w.CONTINUE="continue",w.RESTART="restart"})(Ja||(Ja={}));class PP extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class dp extends l{constructor(y){super("w:vMerge"),this.root.push(new PP({val:y}))}}(function(w){w.BOTTOM_TO_TOP_LEFT_TO_RIGHT="btLr",w.LEFT_TO_RIGHT_TOP_TO_BOTTOM="lrTb",w.TOP_TO_BOTTOM_RIGHT_TO_LEFT="tbRl"})(fp||(fp={}));class DP extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class Uv extends l{constructor(y){super("w:textDirection"),this.root.push(new DP({val:y}))}}class NP extends c{constructor(y){super("w:tcPr"),y.width&&this.root.push(new Ur("w:tcW",y.width)),y.columnSpan&&this.root.push(new Wv(y.columnSpan)),y.verticalMerge?this.root.push(new dp(y.verticalMerge)):y.rowSpan&&y.rowSpan>1&&this.root.push(new dp(Ja.RESTART)),y.borders&&this.root.push(new Fv(y.borders)),y.shading&&this.root.push(new ot(y.shading)),y.margins&&this.root.push(new $v(ph.TABLE_CELL,y.margins)),y.textDirection&&this.root.push(new Uv(y.textDirection)),y.verticalAlign&&this.root.push(new lp(y.verticalAlign))}}class pp extends l{constructor(y){super("w:tc"),this.options=y,this.root.push(new NP(y));for(const $ of y.children)this.root.push($)}prepForXml(y){return this.root[this.root.length-1]instanceof Wr||this.root.push(new Wr({})),super.prepForXml(y)}}const Co={style:be.NONE,size:0,color:"auto"},Io={style:be.SINGLE,size:4,color:"auto"};class mp extends l{constructor(y){super("w:tblBorders"),y.top?this.root.push(new oe("w:top",y.top)):this.root.push(new oe("w:top",Io)),y.left?this.root.push(new oe("w:left",y.left)):this.root.push(new oe("w:left",Io)),y.bottom?this.root.push(new oe("w:bottom",y.bottom)):this.root.push(new oe("w:bottom",Io)),y.right?this.root.push(new oe("w:right",y.right)):this.root.push(new oe("w:right",Io)),y.insideHorizontal?this.root.push(new oe("w:insideH",y.insideHorizontal)):this.root.push(new oe("w:insideH",Io)),y.insideVertical?this.root.push(new oe("w:insideV",y.insideVertical)):this.root.push(new oe("w:insideV",Io))}}var gp;mp.NONE={top:Co,bottom:Co,left:Co,right:Co,insideHorizontal:Co,insideVertical:Co},function(w){w.NEVER="never",w.OVERLAP="overlap"}(gp||(gp={}));class LP extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class zv extends l{constructor(y){super("w:tblOverlap"),this.root.push(new LP({val:y}))}}var yp,Op,bp,vp,wp,mh;(function(w){w.MARGIN="margin",w.PAGE="page",w.TEXT="text"})(yp||(yp={})),function(w){w.CENTER="center",w.INSIDE="inside",w.LEFT="left",w.OUTSIDE="outside",w.RIGHT="right"}(Op||(Op={})),function(w){w.CENTER="center",w.INSIDE="inside",w.BOTTOM="bottom",w.OUTSIDE="outside",w.INLINE="inline",w.TOP="top"}(bp||(bp={}));class jv extends h{constructor(){super(...arguments),this.xmlKeys={horizontalAnchor:"w:horzAnchor",verticalAnchor:"w:vertAnchor",absoluteHorizontalPosition:"w:tblpX",relativeHorizontalPosition:"w:tblpXSpec",absoluteVerticalPosition:"w:tblpY",relativeVerticalPosition:"w:tblpYSpec",bottomFromText:"w:bottomFromText",topFromText:"w:topFromText",leftFromText:"w:leftFromText",rightFromText:"w:rightFromText"}}}class Hv extends l{constructor(y){var{leftFromText:$,rightFromText:ne,topFromText:ye,bottomFromText:we,absoluteHorizontalPosition:Ne,absoluteVerticalPosition:Ge}=y,nt=function(De,mt){var Jt={};for(var zt in De)Object.prototype.hasOwnProperty.call(De,zt)&&mt.indexOf(zt)<0&&(Jt[zt]=De[zt]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function"){var an=0;for(zt=Object.getOwnPropertySymbols(De);an<zt.length;an++)mt.indexOf(zt[an])<0&&Object.prototype.propertyIsEnumerable.call(De,zt[an])&&(Jt[zt[an]]=De[zt[an]])}return Jt}(y,["leftFromText","rightFromText","topFromText","bottomFromText","absoluteHorizontalPosition","absoluteVerticalPosition"]);super("w:tblpPr"),this.root.push(new jv(Object.assign({leftFromText:$===void 0?void 0:X($),rightFromText:ne===void 0?void 0:X(ne),topFromText:ye===void 0?void 0:X(ye),bottomFromText:we===void 0?void 0:X(we),absoluteHorizontalPosition:Ne===void 0?void 0:D(Ne),absoluteVerticalPosition:Ge===void 0?void 0:D(Ge)},nt))),nt.overlap&&this.root.push(new zv(nt.overlap))}}(function(w){w.AUTOFIT="autofit",w.FIXED="fixed"})(vp||(vp={}));class BP extends h{constructor(){super(...arguments),this.xmlKeys={type:"w:type"}}}class Gv extends l{constructor(y){super("w:tblLayout"),this.root.push(new BP({type:y}))}}class Vv extends c{constructor(y){super("w:tblPr"),y.style&&this.root.push(new V("w:tblStyle",y.style)),y.float&&this.root.push(new Hv(y.float)),y.visuallyRightToLeft!==void 0&&this.root.push(new k("w:bidiVisual",y.visuallyRightToLeft)),y.width&&this.root.push(new Ur("w:tblW",y.width)),y.alignment&&this.root.push(new me(y.alignment)),y.indent&&this.root.push(new Ur("w:tblInd",y.indent)),y.borders&&this.root.push(new mp(y.borders)),y.shading&&this.root.push(new ot(y.shading)),y.layout&&this.root.push(new Gv(y.layout)),y.cellMargin&&this.root.push(new $v(ph.TABLE,y.cellMargin))}}class MP extends l{constructor({rows:y,width:$,columnWidths:ne=Array(Math.max(...y.map(zt=>zt.CellCount))).fill(100),margins:ye,indent:we,float:Ne,layout:Ge,style:nt,borders:De,alignment:mt,visuallyRightToLeft:Jt}){super("w:tbl"),this.root.push(new Vv({borders:De!=null?De:{},width:$!=null?$:{size:100},indent:we,float:Ne,layout:Ge,style:nt,alignment:mt,cellMargin:ye,visuallyRightToLeft:Jt})),this.root.push(new TP(ne));for(const zt of y)this.root.push(zt);y.forEach((zt,an)=>{if(an===y.length-1)return;let ui=0;zt.cells.forEach($n=>{if($n.options.rowSpan&&$n.options.rowSpan>1){const Np=new pp({rowSpan:$n.options.rowSpan-1,columnSpan:$n.options.columnSpan,borders:$n.options.borders,children:[],verticalMerge:Ja.CONTINUE});y[an+1].addCellToColumnIndex(Np,ui)}ui+=$n.options.columnSpan||1})})}}(function(w){w.AUTO="auto",w.ATLEAST="atLeast",w.EXACT="exact"})(wp||(wp={}));class Xv extends h{constructor(){super(...arguments),this.xmlKeys={value:"w:val",rule:"w:hRule"}}}class Yv extends l{constructor(y,$){super("w:trHeight"),this.root.push(new Xv({value:X(y),rule:$}))}}class Zv extends c{constructor(y){super("w:trPr"),y.cantSplit!==void 0&&this.root.push(new k("w:cantSplit",y.cantSplit)),y.tableHeader!==void 0&&this.root.push(new k("w:tblHeader",y.tableHeader)),y.height&&this.root.push(new Yv(y.height.value,y.height.rule))}}class $P extends l{constructor(y){super("w:tr"),this.options=y,this.root.push(new Zv(y));for(const $ of y.children)this.root.push($)}get CellCount(){return this.options.children.length}get cells(){return this.root.filter(y=>y instanceof pp)}addCellToIndex(y,$){this.root.splice($+1,0,y)}addCellToColumnIndex(y,$){const ne=this.columnIndexToRootIndex($,!0);this.addCellToIndex(y,ne-1)}rootIndexToColumnIndex(y){if(y<1||y>=this.root.length)throw new Error("cell 'rootIndex' should between 1 to "+(this.root.length-1));let $=0;for(let ne=1;ne<y;ne++)$+=this.root[ne].options.columnSpan||1;return $}columnIndexToRootIndex(y,$=!1){if(y<0)throw new Error("cell 'columnIndex' should not less than zero");let ne=0,ye=1;for(;ne<=y;){if(ye>=this.root.length){if($)return this.root.length;throw new Error("cell 'columnIndex' should not great than "+(ne-1))}const we=this.root[ye];ye+=1,ne+=we&&we.options.columnSpan||1}return ye-1}}class FP extends h{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns",vt:"xmlns:vt"}}}class WP extends l{constructor(){super("Properties"),this.root.push(new FP({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class UP extends h{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns"}}}class zP extends h{constructor(){super(...arguments),this.xmlKeys={contentType:"ContentType",extension:"Extension"}}}class Bs extends l{constructor(y,$){super("Default"),this.root.push(new zP({contentType:y,extension:$}))}}class jP extends h{constructor(){super(...arguments),this.xmlKeys={contentType:"ContentType",partName:"PartName"}}}class Fi extends l{constructor(y,$){super("Override"),this.root.push(new jP({contentType:y,partName:$}))}}class HP extends l{constructor(){super("Types"),this.root.push(new UP({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Bs("image/png","png")),this.root.push(new Bs("image/jpeg","jpeg")),this.root.push(new Bs("image/jpeg","jpg")),this.root.push(new Bs("image/bmp","bmp")),this.root.push(new Bs("image/gif","gif")),this.root.push(new Bs("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Bs("application/xml","xml")),this.root.push(new Fi("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new Fi("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new Fi("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new Fi("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new Fi("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new Fi("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new Fi("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new Fi("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml"))}addFooter(y){this.root.push(new Fi("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${y}.xml`))}addHeader(y){this.root.push(new Fi("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${y}.xml`))}}class GP extends l{constructor(y){super("cp:coreProperties"),this.root.push(new Eo({cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"})),y.title&&this.root.push(new q("dc:title",y.title)),y.subject&&this.root.push(new q("dc:subject",y.subject)),y.creator&&this.root.push(new q("dc:creator",y.creator)),y.keywords&&this.root.push(new q("cp:keywords",y.keywords)),y.description&&this.root.push(new q("dc:description",y.description)),y.lastModifiedBy&&this.root.push(new q("cp:lastModifiedBy",y.lastModifiedBy)),y.revision&&this.root.push(new q("cp:revision",String(y.revision))),this.root.push(new qv("dcterms:created")),this.root.push(new qv("dcterms:modified"))}}class qv extends l{constructor(y){super(y),this.root.push(new Eo({type:"dcterms:W3CDTF"})),this.root.push(ge(new Date))}}class VP extends h{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns",vt:"xmlns:vt"}}}class XP extends h{constructor(){super(...arguments),this.xmlKeys={fmtid:"fmtid",pid:"pid",name:"name"}}}class YP extends l{constructor(y,$){super("property"),this.root.push(new XP({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:y.toString(),name:$.name})),this.root.push(new ZP($.value))}}class ZP extends l{constructor(y){super("vt:lpwstr"),this.root.push(y)}}class qP extends l{constructor(y){super("Properties"),this.properties=[],this.root.push(new VP({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const $ of y)this.addCustomProperty($)}prepForXml(y){return this.properties.forEach($=>this.root.push($)),super.prepForXml(y)}addCustomProperty(y){this.properties.push(new YP(this.nextId++,y))}}class KP extends h{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"}}}class JP extends g{constructor(y,$){super("w:ftr",$),this.refId=y,$||this.root.push(new KP({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(y){this.root.push(y)}}class Ap{constructor(y,$,ne){this.media=y,this.footer=new JP($,ne),this.relationships=new Za}add(y){this.footer.add(y)}addChildElement(y){this.footer.addChildElement(y)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class eD extends h{constructor(){super(...arguments),this.xmlKeys={type:"w:type",id:"w:id"}}}class tD extends l{constructor(){super("w:footnoteRef")}}class nD extends Mn{constructor(){super({style:"FootnoteReference"}),this.root.push(new tD)}}(function(w){w.SEPERATOR="separator",w.CONTINUATION_SEPERATOR="continuationSeparator"})(mh||(mh={}));class _p extends l{constructor(y){super("w:footnote"),this.root.push(new eD({type:y.type,id:y.id}));for(let $=0;$<y.children.length;$++){const ne=y.children[$];$===0&&ne.addRunToFront(new nD),this.root.push(ne)}}}class iD extends l{constructor(){super("w:continuationSeparator")}}class rD extends Mn{constructor(){super({}),this.root.push(new iD)}}class sD extends l{constructor(){super("w:separator")}}class oD extends Mn{constructor(){super({}),this.root.push(new sD)}}class aD extends h{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"}}}class Kv extends l{constructor(){super("w:footnotes"),this.root.push(new aD({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const y=new _p({id:-1,type:mh.SEPERATOR,children:[new Wr({spacing:{after:0,line:240,lineRule:So.AUTO},children:[new oD]})]});this.root.push(y);const $=new _p({id:0,type:mh.CONTINUATION_SEPERATOR,children:[new Wr({spacing:{after:0,line:240,lineRule:So.AUTO},children:[new rD]})]});this.root.push($)}createFootNote(y,$){const ne=new _p({id:y,children:$});this.root.push(ne)}}class lD{constructor(){this.footnotess=new Kv,this.relationships=new Za}get View(){return this.footnotess}get Relationships(){return this.relationships}}class cD extends h{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"}}}class hD extends g{constructor(y,$){super("w:hdr",$),this.refId=y,$||this.root.push(new cD({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(y){this.root.push(y)}}class xp{constructor(y,$,ne){this.media=y,this.header=new hD($,ne),this.relationships=new Za}add(y){return this.header.add(y),this}addChildElement(y){this.header.addChildElement(y)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class kp{constructor(){this.map=new Map}addMedia(y,$){const ne=`${Ha()}.png`,ye={stream:typeof y=="string"?this.convertDataURIToBinary(y):y,fileName:ne,transformation:{pixels:{x:Math.round($.width),y:Math.round($.height)},emus:{x:Math.round(9525*$.width),y:Math.round(9525*$.height)},flip:$.flip,rotation:$.rotation?6e4*$.rotation:void 0}};return this.map.set(ne,ye),ye}addImage(y,$){this.map.set(y,$)}get Array(){return Array.from(this.map.values())}convertDataURIToBinary(y){const $=";base64,",ne=y.indexOf($)+$.length;return typeof atob=="function"?new Uint8Array(atob(y.substring(ne)).split("").map(ye=>ye.charCodeAt(0))):new(r(764)).Buffer(y,"base64")}}const uD="";var hi,Sp;(function(w){w.BULLET="bullet",w.CARDINAL_TEXT="cardinalText",w.CHICAGO="chicago",w.DECIMAL="decimal",w.DECIMAL_ENCLOSED_CIRCLE="decimalEnclosedCircle",w.DECIMAL_ENCLOSED_FULLSTOP="decimalEnclosedFullstop",w.DECIMAL_ENCLOSED_PARENTHESES="decimalEnclosedParen",w.DECIMAL_ZERO="decimalZero",w.LOWER_LETTER="lowerLetter",w.LOWER_ROMAN="lowerRoman",w.NONE="none",w.ORDINAL_TEXT="ordinalText",w.UPPER_LETTER="upperLetter",w.UPPER_ROMAN="upperRoman"})(hi||(hi={}));class fD extends h{constructor(){super(...arguments),this.xmlKeys={ilvl:"w:ilvl",tentative:"w15:tentative"}}}class dD extends l{constructor(y){super("w:numFmt"),this.root.push(new u({val:y}))}}class pD extends l{constructor(y){super("w:lvlText"),this.root.push(new u({val:y}))}}class mD extends l{constructor(y){super("w:lvlJc"),this.root.push(new u({val:y}))}}(function(w){w.NOTHING="nothing",w.SPACE="space",w.TAB="tab"})(Sp||(Sp={}));class gD extends l{constructor(y){super("w:suff"),this.root.push(new u({val:y}))}}class Ep extends l{constructor({level:y,format:$,text:ne,alignment:ye=le.START,start:we=1,style:Ne,suffix:Ge}){if(super("w:lvl"),this.root.push(new H("w:start",v(we))),$&&this.root.push(new dD($)),Ge&&this.root.push(new gD(Ge)),ne&&this.root.push(new pD(ne)),this.root.push(new mD(ye)),this.paragraphProperties=new Ls(Ne&&Ne.paragraph),this.runProperties=new $r(Ne&&Ne.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),y>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new fD({ilvl:v(y),tentative:1}))}}class Jv extends Ep{constructor(y){super(y)}}class yD extends Ep{}class OD extends l{constructor(y){super("w:multiLevelType"),this.root.push(new u({val:y}))}}class bD extends h{constructor(){super(...arguments),this.xmlKeys={abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"}}}class Tp extends l{constructor(y,$){super("w:abstractNum"),this.root.push(new bD({abstractNumId:v(y),restartNumberingAfterBreak:0})),this.root.push(new OD("hybridMultilevel")),this.id=y;for(const ne of $)this.root.push(new Jv(ne))}}class vD extends l{constructor(y){super("w:abstractNumId"),this.root.push(new u({val:y}))}}class wD extends h{constructor(){super(...arguments),this.xmlKeys={numId:"w:numId"}}}class Cp extends l{constructor(y){super("w:num"),this.numId=y.numId,this.reference=y.reference,this.instance=y.instance,this.root.push(new wD({numId:v(y.numId)})),this.root.push(new vD(v(y.abstractNumId))),y.overrideLevel&&this.root.push(new ew(y.overrideLevel.num,y.overrideLevel.start))}}class AD extends h{constructor(){super(...arguments),this.xmlKeys={ilvl:"w:ilvl"}}}class ew extends l{constructor(y,$){super("w:lvlOverride"),this.root.push(new AD({ilvl:y})),$!==void 0&&this.root.push(new xD($))}}class _D extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class xD extends l{constructor(y){super("w:startOverride"),this.root.push(new _D({val:y}))}}class tw extends l{constructor(y){super("w:numbering"),this.abstractNumberingMap=new Map,this.concreteNumberingMap=new Map,this.referenceConfigMap=new Map,this.root.push(new Eo({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const $=new Tp(ja(),[{level:0,format:hi.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:li(.5),hanging:li(.25)}}}},{level:1,format:hi.BULLET,text:"\u25CB",alignment:le.LEFT,style:{paragraph:{indent:{left:li(1),hanging:li(.25)}}}},{level:2,format:hi.BULLET,text:"\u25A0",alignment:le.LEFT,style:{paragraph:{indent:{left:2160,hanging:li(.25)}}}},{level:3,format:hi.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:2880,hanging:li(.25)}}}},{level:4,format:hi.BULLET,text:"\u25CB",alignment:le.LEFT,style:{paragraph:{indent:{left:3600,hanging:li(.25)}}}},{level:5,format:hi.BULLET,text:"\u25A0",alignment:le.LEFT,style:{paragraph:{indent:{left:4320,hanging:li(.25)}}}},{level:6,format:hi.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:5040,hanging:li(.25)}}}},{level:7,format:hi.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:5760,hanging:li(.25)}}}},{level:8,format:hi.BULLET,text:"\u25CF",alignment:le.LEFT,style:{paragraph:{indent:{left:6480,hanging:li(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new Cp({numId:1,abstractNumId:$.id,reference:"default-bullet-numbering",instance:0,overrideLevel:{num:0,start:1}})),this.abstractNumberingMap.set("default-bullet-numbering",$);for(const ne of y.config)this.abstractNumberingMap.set(ne.reference,new Tp(ja(),ne.levels)),this.referenceConfigMap.set(ne.reference,ne.levels)}prepForXml(y){for(const $ of this.abstractNumberingMap.values())this.root.push($);for(const $ of this.concreteNumberingMap.values())this.root.push($);return super.prepForXml(y)}createConcreteNumberingInstance(y,$){const ne=this.abstractNumberingMap.get(y);if(!ne)return;const ye=`${y}-${$}`;if(this.concreteNumberingMap.has(ye))return;const we={numId:ja(),abstractNumId:ne.id,reference:y,instance:$,overrideLevel:{num:0,start:1}},Ne=this.referenceConfigMap.get(y),Ge=Ne&&Ne[0].start;Ge&&Number.isInteger(Ge)&&(we.overrideLevel={num:0,start:Ge}),this.concreteNumberingMap.set(ye,new Cp(we))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class kD extends h{constructor(){super(...arguments),this.xmlKeys={version:"w:val",name:"w:name",uri:"w:uri"}}}class SD extends l{constructor(y){super("w:compatSetting"),this.root.push(new kD({version:y,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class ED extends l{constructor(y){super("w:compat"),y.doNotExpandShiftReturn!==void 0&&this.root.push(new k("w:doNotExpandShiftReturn",y.doNotExpandShiftReturn)),y.version&&this.root.push(new SD(y.version))}}class TD extends h{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"}}}class CD extends l{constructor(y){super("w:settings"),this.root.push(new TD({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new k("w:displayBackgroundShape",!0)),y.trackRevisions!==void 0&&this.root.push(new k("w:trackRevisions",y.trackRevisions)),y.evenAndOddHeaders!==void 0&&this.root.push(new k("w:evenAndOddHeaders",y.evenAndOddHeaders)),y.updateFields!==void 0&&this.root.push(new k("w:updateFields",y.updateFields)),this.root.push(new ED({version:y.compatabilityModeVersion||15}))}}class nw extends h{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class ID extends l{constructor(y){super("w:name"),this.root.push(new nw({val:y}))}}class RD extends l{constructor(y){super("w:uiPriority"),this.root.push(new nw({val:v(y)}))}}class QD extends h{constructor(){super(...arguments),this.xmlKeys={type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"}}}class iw extends l{constructor(y,$){super("w:style"),this.root.push(new QD(y)),$.name&&this.root.push(new ID($.name)),$.basedOn&&this.root.push(new V("w:basedOn",$.basedOn)),$.next&&this.root.push(new V("w:next",$.next)),$.link&&this.root.push(new V("w:link",$.link)),$.uiPriority!==void 0&&this.root.push(new RD($.uiPriority)),$.semiHidden!==void 0&&this.root.push(new k("w:semiHidden",$.semiHidden)),$.unhideWhenUsed!==void 0&&this.root.push(new k("w:unhideWhenUsed",$.unhideWhenUsed)),$.quickFormat!==void 0&&this.root.push(new k("w:qFormat",$.quickFormat))}}class el extends iw{constructor(y){super({type:"paragraph",styleId:y.id},y),this.paragraphProperties=new Ls(y.paragraph),this.runProperties=new $r(y.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class tl extends iw{constructor(y){super({type:"character",styleId:y.id},Object.assign({uiPriority:99,unhideWhenUsed:!0},y)),this.runProperties=new $r(y.run),this.root.push(this.runProperties)}}class zr extends el{constructor(y){super(Object.assign(Object.assign({},y),{basedOn:"Normal",next:"Normal",quickFormat:!0}))}}class PD extends zr{constructor(y){super(Object.assign(Object.assign({},y),{id:"Title",name:"Title"}))}}class DD extends zr{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading1",name:"Heading 1"}))}}class ND extends zr{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading2",name:"Heading 2"}))}}class LD extends zr{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading3",name:"Heading 3"}))}}class BD extends zr{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading4",name:"Heading 4"}))}}class MD extends zr{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading5",name:"Heading 5"}))}}class $D extends zr{constructor(y){super(Object.assign(Object.assign({},y),{id:"Heading6",name:"Heading 6"}))}}class FD extends zr{constructor(y){super(Object.assign(Object.assign({},y),{id:"Strong",name:"Strong"}))}}class WD extends el{constructor(y){super(Object.assign(Object.assign({},y),{id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0}))}}class UD extends el{constructor(y){super(Object.assign(Object.assign({},y),{id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:So.AUTO}},run:{size:20}}))}}class zD extends tl{constructor(y){super(Object.assign(Object.assign({},y),{id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}}))}}class jD extends tl{constructor(y){super(Object.assign(Object.assign({},y),{id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}}))}}class HD extends tl{constructor(y){super(Object.assign(Object.assign({},y),{id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:Q.SINGLE}}}))}}class gh extends l{constructor(y){if(super("w:styles"),y.initialStyles&&this.root.push(y.initialStyles),y.importedStyles)for(const $ of y.importedStyles)this.root.push($);if(y.paragraphStyles)for(const $ of y.paragraphStyles)this.root.push(new el($));if(y.characterStyles)for(const $ of y.characterStyles)this.root.push(new tl($))}}class rw extends l{constructor(y){super("w:pPrDefault"),this.root.push(new Ls(y))}}class sw extends l{constructor(y){super("w:rPrDefault"),this.root.push(new $r(y))}}class ow extends l{constructor(y){super("w:docDefaults"),this.runPropertiesDefaults=new sw(y.run),this.paragraphPropertiesDefaults=new rw(y.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class aw{newInstance(y){const $=(0,f.xml2js)(y,{compact:!1});let ne;for(const we of $.elements||[])we.name==="w:styles"&&(ne=we);if(ne===void 0)throw new Error("can not find styles element");const ye=ne.elements||[];return new gh({initialStyles:new b(ne.attributes),importedStyles:ye.map(we=>p(we))})}}class lw{newInstance(y={}){var $;return{initialStyles:new Eo({mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",Ignorable:"w14 w15"}),importedStyles:[new ow(($=y.document)!==null&&$!==void 0?$:{}),new PD(Object.assign({run:{size:56}},y.title)),new DD(Object.assign({run:{color:"2E74B5",size:32}},y.heading1)),new ND(Object.assign({run:{color:"2E74B5",size:26}},y.heading2)),new LD(Object.assign({run:{color:"1F4D78",size:24}},y.heading3)),new BD(Object.assign({run:{color:"2E74B5",italics:!0}},y.heading4)),new MD(Object.assign({run:{color:"2E74B5"}},y.heading5)),new $D(Object.assign({run:{color:"1F4D78"}},y.heading6)),new FD(Object.assign({run:{bold:!0}},y.strong)),new WD(y.listParagraph||{}),new HD(y.hyperlink||{}),new zD(y.footnoteReference||{}),new UD(y.footnoteText||{}),new jD(y.footnoteTextChar||{})]}}}class cw{constructor(y,$={}){var ne,ye,we,Ne,Ge,nt;if(this.currentRelationshipId=1,this.headers=[],this.footers=[],this.coreProperties=new GP(Object.assign(Object.assign({},y),{creator:(ne=y.creator)!==null&&ne!==void 0?ne:"Un-named",revision:(ye=y.revision)!==null&&ye!==void 0?ye:1,lastModifiedBy:(we=y.lastModifiedBy)!==null&&we!==void 0?we:"Un-named"})),this.numbering=new tw(y.numbering?y.numbering:{config:[]}),this.fileRelationships=new Za,this.customProperties=new qP((Ne=y.customProperties)!==null&&Ne!==void 0?Ne:[]),this.appProperties=new WP,this.footnotesWrapper=new lD,this.contentTypes=new HP,this.documentWrapper=new _v({background:y.background||{}}),this.settings=new CD({compatabilityModeVersion:y.compatabilityModeVersion,evenAndOddHeaders:!!y.evenAndOddHeaderAndFooters,trackRevisions:(Ge=y.features)===null||Ge===void 0?void 0:Ge.trackRevisions,updateFields:(nt=y.features)===null||nt===void 0?void 0:nt.updateFields}),this.media=$.template&&$.template.media?$.template.media:new kp,$.template&&(this.currentRelationshipId=$.template.currentRelationshipId+1),$.template&&y.externalStyles)throw Error("can not use both template and external styles");if($.template){const De=new aw;this.styles=De.newInstance($.template.styles)}else if(y.externalStyles){const De=new aw;this.styles=De.newInstance(y.externalStyles)}else if(y.styles){const De=new lw().newInstance(y.styles.default);this.styles=new gh(Object.assign(Object.assign({},De),y.styles))}else{const De=new lw;this.styles=new gh(De.newInstance())}if(this.addDefaultRelationships(),$.template&&$.template.headers)for(const De of $.template.headers)this.addHeaderToDocument(De.header,De.type);if($.template&&$.template.footers)for(const De of $.template.footers)this.addFooterToDocument(De.footer,De.type);for(const De of y.sections)this.addSection(De);if(y.footnotes)for(const De in y.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(De),y.footnotes[De].children)}addSection({headers:y={},footers:$={},children:ne,properties:ye}){this.documentWrapper.View.Body.addSection(Object.assign(Object.assign({},ye),{headerWrapperGroup:{default:y.default?this.createHeader(y.default):void 0,first:y.first?this.createHeader(y.first):void 0,even:y.even?this.createHeader(y.even):void 0},footerWrapperGroup:{default:$.default?this.createFooter($.default):void 0,first:$.first?this.createFooter($.first):void 0,even:$.even?this.createFooter($.even):void 0}}));for(const we of ne)this.documentWrapper.View.add(we)}createHeader(y){const $=new xp(this.media,this.currentRelationshipId++);for(const ne of y.options.children)$.add(ne);return this.addHeaderToDocument($),$}createFooter(y){const $=new Ap(this.media,this.currentRelationshipId++);for(const ne of y.options.children)$.add(ne);return this.addFooterToDocument($),$}addHeaderToDocument(y,$=ur.DEFAULT){this.headers.push({header:y,type:$}),this.documentWrapper.Relationships.createRelationship(y.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(y,$=ur.DEFAULT){this.footers.push({footer:y,type:$}),this.documentWrapper.Relationships.createRelationship(y.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(y=>y.header)}get Footers(){return this.footers.map(y=>y.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}}const GD="";class VD extends h{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class XD extends l{constructor(y={}){super("w:instrText"),this.properties=y,this.root.push(new VD({space:ue.PRESERVE}));let $="TOC";this.properties.captionLabel&&($=`${$} \\a "${this.properties.captionLabel}"`),this.properties.entriesFromBookmark&&($=`${$} \\b "${this.properties.entriesFromBookmark}"`),this.properties.captionLabelIncludingNumbers&&($=`${$} \\c "${this.properties.captionLabelIncludingNumbers}"`),this.properties.sequenceAndPageNumbersSeparator&&($=`${$} \\d "${this.properties.sequenceAndPageNumbersSeparator}"`),this.properties.tcFieldIdentifier&&($=`${$} \\f "${this.properties.tcFieldIdentifier}"`),this.properties.hyperlink&&($=`${$} \\h`),this.properties.tcFieldLevelRange&&($=`${$} \\l "${this.properties.tcFieldLevelRange}"`),this.properties.pageNumbersEntryLevelsRange&&($=`${$} \\n "${this.properties.pageNumbersEntryLevelsRange}"`),this.properties.headingStyleRange&&($=`${$} \\o "${this.properties.headingStyleRange}"`),this.properties.entryAndPageNumberSeparator&&($=`${$} \\p "${this.properties.entryAndPageNumberSeparator}"`),this.properties.seqFieldIdentifierForPrefix&&($=`${$} \\s "${this.properties.seqFieldIdentifierForPrefix}"`),this.properties.stylesWithLevels&&this.properties.stylesWithLevels.length&&($=`${$} \\t "${this.properties.stylesWithLevels.map(ne=>`${ne.styleName},${ne.level}`).join(",")}"`),this.properties.useAppliedParagraphOutlineLevel&&($=`${$} \\u`),this.properties.preserveTabInEntries&&($=`${$} \\w`),this.properties.preserveNewLineInEntries&&($=`${$} \\x`),this.properties.hideTabAndPageNumbersInWebView&&($=`${$} \\z`),this.root.push($)}}class YD extends l{constructor(){super("w:sdtContent")}}class ZD extends h{constructor(){super(...arguments),this.xmlKeys={alias:"w:val"}}}class qD extends l{constructor(y){super("w:alias"),this.root.push(new ZD({alias:y}))}}class KD extends l{constructor(y){super("w:sdtPr"),this.root.push(new qD(y))}}class JD extends l{constructor(y="Table of Contents",$){super("w:sdt"),this.root.push(new KD(y));const ne=new YD,ye=new Wr({children:[new Mn({children:[new L(!0),new XD($),new z]})]});ne.addChildElement(ye);const we=new Wr({children:[new Mn({children:[new te]})]});ne.addChildElement(we),this.root.push(ne)}}class eN{constructor(y,$){this.styleName=y,this.level=$}}class tN{constructor(y={children:[]}){this.options=y}}class nN{constructor(y={children:[]}){this.options=y}}class hw extends h{constructor(){super(...arguments),this.xmlKeys={id:"w:id"}}}class uw extends l{constructor(y){super("w:footnoteReference"),this.root.push(new hw({id:y}))}}class iN extends Mn{constructor(y){super({style:"FootnoteReference"}),this.root.push(new uw(y))}}class rN extends l{constructor(y){super("w:ins"),this.root.push(new Ve({id:y.id,author:y.author,date:y.date})),this.addChildElement(new za(y))}}class Ip extends h{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class sN extends l{constructor(){super("w:delInstrText"),this.root.push(new Ip({space:ue.PRESERVE})),this.root.push("PAGE")}}class oN extends l{constructor(){super("w:delInstrText"),this.root.push(new Ip({space:ue.PRESERVE})),this.root.push("NUMPAGES")}}class aN extends l{constructor(){super("w:delInstrText"),this.root.push(new Ip({space:ue.PRESERVE})),this.root.push("SECTIONPAGES")}}class lN extends h{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class fw extends l{constructor(y){super("w:delText"),this.root.push(new lN({space:ue.PRESERVE})),this.root.push(y)}}class cN extends l{constructor(y){super("w:del"),this.root.push(new Ve({id:y.id,author:y.author,date:y.date})),this.deletedTextRunWrapper=new hN(y),this.addChildElement(this.deletedTextRunWrapper)}}class hN extends l{constructor(y){if(super("w:r"),this.root.push(new $r(y)),y.children)for(const $ of y.children)if(typeof $!="string")this.root.push($);else switch($){case F.CURRENT:this.root.push(new L),this.root.push(new sN),this.root.push(new z),this.root.push(new te);break;case F.TOTAL_PAGES:this.root.push(new L),this.root.push(new oN),this.root.push(new z),this.root.push(new te);break;case F.TOTAL_PAGES_IN_SECTION:this.root.push(new L),this.root.push(new aN),this.root.push(new z),this.root.push(new te);break;default:this.root.push(new fw($))}else y.text&&this.root.push(new fw(y.text));if(y.break)for(let $=0;$<y.break;$++)this.root.splice(1,0,new st)}}var Rp,Qp,Pp;(function(w){w.CENTER="center",w.INSIDE="inside",w.LEFT="left",w.OUTSIDE="outside",w.RIGHT="right"})(Rp||(Rp={})),function(w){w.BOTTOM="bottom",w.CENTER="center",w.INSIDE="inside",w.OUTSIDE="outside",w.TOP="top"}(Qp||(Qp={})),function(w){w.DECIMAL="decimal",w.UPPER_ROMAN="upperRoman",w.LOWER_ROMAN="lowerRoman",w.UPPER_LETTER="upperLetter",w.LOWER_LETTER="lowerLetter",w.ORDINAL="ordinal",w.CARDINAL_TEXT="cardinalText",w.ORDINAL_TEXT="ordinalText",w.HEX="hex",w.CHICAGO="chicago",w.IDEOGRAPH_DIGITAL="ideographDigital",w.JAPANESE_COUNTING="japaneseCounting",w.AIUEO="aiueo",w.IROHA="iroha",w.DECIMAL_FULL_WIDTH="decimalFullWidth",w.DECIMAL_HALF_WIDTH="decimalHalfWidth",w.JAPANESE_LEGAL="japaneseLegal",w.JAPANESE_DIGITAL_TEN_THOUSAND="japaneseDigitalTenThousand",w.DECIMAL_ENCLOSED_CIRCLE="decimalEnclosedCircle",w.DECIMAL_FULL_WIDTH_2="decimalFullWidth2",w.AIUEO_FULL_WIDTH="aiueoFullWidth",w.IROHA_FULL_WIDTH="irohaFullWidth",w.DECIMAL_ZERO="decimalZero",w.BULLET="bullet",w.GANADA="ganada",w.CHOSUNG="chosung",w.DECIMAL_ENCLOSED_FULL_STOP="decimalEnclosedFullstop",w.DECIMAL_ENCLOSED_PAREN="decimalEnclosedParen",w.DECIMAL_ENCLOSED_CIRCLE_CHINESE="decimalEnclosedCircleChinese",w.IDEOGRAPH_ENCLOSED_CIRCLE="ideographEnclosedCircle",w.IDEOGRAPH_TRADITIONAL="ideographTraditional",w.IDEOGRAPH_ZODIAC="ideographZodiac",w.IDEOGRAPH_ZODIAC_TRADITIONAL="ideographZodiacTraditional",w.TAIWANESE_COUNTING="taiwaneseCounting",w.IDEOGRAPH_LEGAL_TRADITIONAL="ideographLegalTraditional",w.TAIWANESE_COUNTING_THOUSAND="taiwaneseCountingThousand",w.TAIWANESE_DIGITAL="taiwaneseDigital",w.CHINESE_COUNTING="chineseCounting",w.CHINESE_LEGAL_SIMPLIFIED="chineseLegalSimplified",w.CHINESE_COUNTING_TEN_THOUSAND="chineseCountingThousand",w.KOREAN_DIGITAL="koreanDigital",w.KOREAN_COUNTING="koreanCounting",w.KOREAN_LEGAL="koreanLegal",w.KOREAN_DIGITAL_2="koreanDigital2",w.VIETNAMESE_COUNTING="vietnameseCounting",w.RUSSIAN_LOWER="russianLower",w.RUSSIAN_UPPER="russianUpper",w.NONE="none",w.NUMBER_IN_DASH="numberInDash",w.HEBREW_1="hebrew1",w.HEBREW_2="hebrew2",w.ARABIC_ALPHA="arabicAlpha",w.ARABIC_ABJAD="arabicAbjad",w.HINDI_VOWELS="hindiVowels",w.HINDI_CONSONANTS="hindiConsonants",w.HINDI_NUMBERS="hindiNumbers",w.HINDI_COUNTING="hindiCounting",w.THAI_LETTERS="thaiLetters",w.THAI_NUMBERS="thaiNumbers",w.THAI_COUNTING="thaiCounting",w.BAHT_TEXT="bahtText",w.DOLLAR_TEXT="dollarText"}(Pp||(Pp={}));var dw=r(733),on=r(479);class uN{format(y,$={}){const ne=y.prepForXml($);if(ne)return ne;throw Error("XMLComponent did not format correctly")}}class fN{replace(y,$,ne){let ye=y;return $.forEach((we,Ne)=>{ye=ye.replace(new RegExp(`{${we.fileName}}`,"g"),(ne+Ne).toString())}),ye}getMediaData(y,$){return $.Array.filter(ne=>y.search(`{${ne.fileName}}`)>0)}}class dN{replace(y,$){let ne=y;for(const ye of $)ne=ne.replace(new RegExp(`{${ye.reference}-${ye.instance}}`,"g"),ye.numId.toString());return ne}}var Dp=function(w,y,$,ne){return new($||($=Promise))(function(ye,we){function Ne(De){try{nt(ne.next(De))}catch(mt){we(mt)}}function Ge(De){try{nt(ne.throw(De))}catch(mt){we(mt)}}function nt(De){var mt;De.done?ye(De.value):(mt=De.value,mt instanceof $?mt:new $(function(Jt){Jt(mt)})).then(Ne,Ge)}nt((ne=ne.apply(w,y||[])).next())})};class pw{static toBuffer(y,$){return Dp(this,void 0,void 0,function*(){return yield this.compiler.compile(y,$).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBase64String(y,$){return Dp(this,void 0,void 0,function*(){return yield this.compiler.compile(y,$).generateAsync({type:"base64",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBlob(y,$){return Dp(this,void 0,void 0,function*(){return yield this.compiler.compile(y,$).generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}}pw.compiler=new class{constructor(){this.formatter=new uN,this.imageReplacer=new fN,this.numberingReplacer=new dN}compile(w,y){const $=new dw,ne=this.xmlifyFile(w,y),ye=new Map(Object.entries(ne));for(const[,we]of ye)if(Array.isArray(we))for(const Ne of we)$.file(Ne.path,Ne.data);else $.file(we.path,we.data);for(const we of w.Media.Array){const Ne=we.stream;$.file(`word/media/${we.fileName}`,Ne)}return $}xmlifyFile(w,y){const $=w.Document.Relationships.RelationshipCount+1,ne=on(this.formatter.format(w.Document.View,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),ye=this.imageReplacer.getMediaData(ne,w.Media);return{Relationships:{data:(()=>(ye.forEach((we,Ne)=>{w.Document.Relationships.createRelationship($+Ne,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${we.fileName}`)}),on(this.formatter.format(w.Document.Relationships,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{encoding:"UTF-8"}})))(),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const we=this.imageReplacer.replace(ne,ye,$);return this.numberingReplacer.replace(we,w.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const we=on(this.formatter.format(w.Styles,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(we,w.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:on(this.formatter.format(w.CoreProperties,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:on(this.formatter.format(w.Numbering,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:on(this.formatter.format(w.FileRelationships,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:w.Headers.map((we,Ne)=>{const Ge=on(this.formatter.format(we.View,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(Ge,w.Media).forEach((nt,De)=>{we.Relationships.createRelationship(De,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${nt.fileName}`)}),{data:on(this.formatter.format(we.Relationships,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${Ne+1}.xml.rels`}}),FooterRelationships:w.Footers.map((we,Ne)=>{const Ge=on(this.formatter.format(we.View,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(Ge,w.Media).forEach((nt,De)=>{we.Relationships.createRelationship(De,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${nt.fileName}`)}),{data:on(this.formatter.format(we.Relationships,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${Ne+1}.xml.rels`}}),Headers:w.Headers.map((we,Ne)=>{const Ge=on(this.formatter.format(we.View,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),nt=this.imageReplacer.getMediaData(Ge,w.Media);return{data:this.imageReplacer.replace(Ge,nt,0),path:`word/header${Ne+1}.xml`}}),Footers:w.Footers.map((we,Ne)=>{const Ge=on(this.formatter.format(we.View,{viewWrapper:we,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),nt=this.imageReplacer.getMediaData(Ge,w.Media);return{data:this.imageReplacer.replace(Ge,nt,0),path:`word/footer${Ne+1}.xml`}}),ContentTypes:{data:on(this.formatter.format(w.ContentTypes,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:on(this.formatter.format(w.CustomProperties,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:on(this.formatter.format(w.AppProperties,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:on(this.formatter.format(w.FootNotes.View,{viewWrapper:w.FootNotes,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:on(this.formatter.format(w.FootNotes.Relationships,{viewWrapper:w.FootNotes,file:w}),{indent:y,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:on(this.formatter.format(w.Settings,{viewWrapper:w.Document,file:w}),{indent:y,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"}}}};var Ro=function(w,y,$,ne){return new($||($=Promise))(function(ye,we){function Ne(De){try{nt(ne.next(De))}catch(mt){we(mt)}}function Ge(De){try{nt(ne.throw(De))}catch(mt){we(mt)}}function nt(De){var mt;De.done?ye(De.value):(mt=De.value,mt instanceof $?mt:new $(function(Jt){Jt(mt)})).then(Ne,Ge)}nt((ne=ne.apply(w,y||[])).next())})};const pN={"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header":"header","http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer":"footer","http://schemas.openxmlformats.org/officeDocument/2006/relationships/image":"image","http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink":"hyperlink"};var yh;(function(w){w.HEADER="header",w.FOOTER="footer",w.IMAGE="image",w.HYPERLINK="hyperlink"})(yh||(yh={}));class mN{extract(y){return Ro(this,void 0,void 0,function*(){const $=yield dw.loadAsync(y),ne=yield $.files["word/document.xml"].async("text"),ye=yield $.files["word/_rels/document.xml.rels"].async("text"),we=this.extractDocumentRefs(ne),Ne=this.findReferenceFiles(ye),Ge=new kp;return{headers:yield this.createHeaders($,we,Ne,Ge,0),footers:yield this.createFooters($,we,Ne,Ge,we.headers.length),currentRelationshipId:we.footers.length+we.headers.length,styles:yield $.files["word/styles.xml"].async("text"),titlePageIsDefined:this.checkIfTitlePageIsDefined(ne),media:Ge}})}createFooters(y,$,ne,ye,we){return Ro(this,void 0,void 0,function*(){const Ne=$.footers.map((Ge,nt)=>Ro(this,void 0,void 0,function*(){const De=ne.find(ui=>ui.id===Ge.id);if(De===null||!De)throw new Error(`Can not find target file for id ${Ge.id}`);const mt=yield y.files[`word/${De.target}`].async("text"),Jt=(0,f.xml2js)(mt,{compact:!1,captureSpacesBetweenElements:!0});if(!Jt.elements)return;const zt=p(Jt.elements.reduce((ui,$n)=>$n.name==="w:ftr"?$n:ui)),an=new Ap(ye,we+nt,zt);return yield this.addRelationshipToWrapper(De,y,an,ye),{type:Ge.type,footer:an}})).filter(Ge=>!!Ge);return Promise.all(Ne)})}createHeaders(y,$,ne,ye,we){return Ro(this,void 0,void 0,function*(){const Ne=$.headers.map((Ge,nt)=>Ro(this,void 0,void 0,function*(){const De=ne.find(ui=>ui.id===Ge.id);if(De===null||!De)throw new Error(`Can not find target file for id ${Ge.id}`);const mt=yield y.files[`word/${De.target}`].async("text"),Jt=(0,f.xml2js)(mt,{compact:!1,captureSpacesBetweenElements:!0});if(!Jt.elements)return;const zt=p(Jt.elements.reduce((ui,$n)=>$n.name==="w:hdr"?$n:ui)),an=new xp(ye,we+nt,zt);return yield this.addRelationshipToWrapper(De,y,an,ye),{type:Ge.type,header:an}})).filter(Ge=>!!Ge);return Promise.all(Ne)})}addRelationshipToWrapper(y,$,ne,ye){return Ro(this,void 0,void 0,function*(){const we=$.files[`word/_rels/${y.target}.rels`];if(!we)return;const Ne=yield we.async("text"),Ge=this.findReferenceFiles(Ne).filter(De=>De.type===yh.IMAGE),nt=this.findReferenceFiles(Ne).filter(De=>De.type===yh.HYPERLINK);for(const De of Ge){const mt=yield $.files[`word/${De.target}`].async("nodebuffer"),Jt=ye.addMedia(mt,{width:100,height:100});ne.Relationships.createRelationship(De.id,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${Jt.fileName}`)}for(const De of nt)ne.Relationships.createRelationship(De.id,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",De.target,ch.EXTERNAL)})}findReferenceFiles(y){const $=(0,f.xml2js)(y,{compact:!0});return(Array.isArray($.Relationships.Relationship)?$.Relationships.Relationship:[$.Relationships.Relationship]).map(ne=>{if(ne._attributes===void 0)throw Error("relationship element has no attributes");return{id:this.parseRefId(ne._attributes.Id),type:pN[ne._attributes.Type],target:ne._attributes.Target}}).filter(ne=>ne.type!==null)}extractDocumentRefs(y){const $=(0,f.xml2js)(y,{compact:!0})["w:document"]["w:body"]["w:sectPr"],ne=$["w:headerReference"];let ye;ye=ne===void 0?[]:Array.isArray(ne)?ne:[ne];const we=ye.map(nt=>{if(nt._attributes===void 0)throw Error("header reference element has no attributes");return{type:nt._attributes["w:type"],id:this.parseRefId(nt._attributes["r:id"])}}),Ne=$["w:footerReference"];let Ge;return Ge=Ne===void 0?[]:Array.isArray(Ne)?Ne:[Ne],{headers:we,footers:Ge.map(nt=>{if(nt._attributes===void 0)throw Error("footer reference element has no attributes");return{type:nt._attributes["w:type"],id:this.parseRefId(nt._attributes["r:id"])}})}}checkIfTitlePageIsDefined(y){return(0,f.xml2js)(y,{compact:!0})["w:document"]["w:body"]["w:sectPr"]["w:titlePg"]!==void 0}parseRefId(y){const $=/^rId(\d+)$/.exec(y);if($===null)throw new Error("Invalid ref id");return parseInt($[1],10)}}})(),s})()})})(nS);var Xn=BN(nS.exports);const Hw=n=>{for(var e,t=[],i=document.createTreeWalker(n,NodeFilter.SHOW_TEXT);e=i.nextNode();)t.push(e);return t},iS=["<b>","</b>","<i>","</i>","<u>","</u>"],rS=()=>({html:n=>iS.includes(n.trim().toLowerCase())?n.trim().toLowerCase():no(n),paragraph:n=>`${n}`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:()=>"",code:()=>"",link:()=>""}),Gw=(n,e,t)=>({html:i=>iS.includes(i.trim().toLowerCase())?i.trim().toLowerCase():no(i),paragraph:i=>`<p>${i}</p>`,strong:i=>`<b>${i}</b>`,em:i=>`<i>${i}</i>`,codespan:i=>"",code:(i,r)=>"",link:(i,r,s)=>{const o=i.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<mage-link to="${a}">${Ji(e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t}),rS())}</mage-link>`}}),cM=n=>{const e=go(n),t=x0(e.properties),i=[],r=e.properties.title||"magebook";for(let[o,a]of e.chapters){const l=t.titleStyle=="inline";//!isNumber(key)
const{text:c}=a,h=t.renameAnchor({key:o,book:e}),u=t.renameTitle({book:e,chapter:a,key:o,title:a.title?a.title.trim():""}),f=document.createElement("p");f.innerHTML=Ji(u,rS())||"";const p=[];Hw(f).forEach(g=>{let v=!1,O=!1,_=!1,x=g.parentNode;for(;x.tagName!=="P";){const E=x.tagName;E==="B"&&(v=!0),E==="I"&&(O=!0),E==="U"&&(_=!0),x=x.parentNode}p.push(new Xn.TextRun({bold:v,italics:O,underline:_,text:g.nodeValue}))});const d=new Xn.Bookmark({id:`${h}`,children:p}),m=document.createElement("div");m.innerHTML=Ji(c,Gw(e,t,a)).replaceAll("<br>","</p><p>")||"<p></p>",console.log(Ji(c,Gw(e,t,a)).replaceAll("<br>","</p><p>")),console.log(m.innerHTML);const b=[];l||b.push(new Xn.Paragraph({children:[d],alignment:"center",heading:Xn.HeadingLevel.HEADING_3})),m.childNodes.forEach((g,v)=>{const O=[];Hw(g).forEach(x=>{let E=!1,T=!1,S=!1,C=x.parentNode;for(;C.tagName!=="P";){const B=C.tagName;if(B==="MAGE-LINK"){const M=C.getAttribute("to");O.push(new Xn.InternalHyperlink({children:[new Xn.TextRun({bold:E,italics:T,text:x.nodeValue,style:"Hyperlink",underline:S?null:{type:null,color:"#000000"}})],anchor:`${M}`}));return}B==="B"&&(E=!0),B==="I"&&(T=!0),B==="U"&&(S=!0),C=C.parentNode}O.push(new Xn.TextRun({bold:E,italics:T,underline:S,text:x.nodeValue}))});let _="both";b.push(new Xn.Paragraph({children:[...l&&v===0?[d,new Xn.TextRun({text:" "})]:[],...O],alignment:_}))}),b.push(new Xn.Paragraph({children:[new Xn.TextRun("")]})),i.push(...b)}const s=new Xn.Document({styles:{paragraphStyles:[{id:"Normal",name:"Normal",next:"Normal",quickFormat:!1,run:{size:Math.floor(Number(t.textFont.size.replace("pt",""))*2),font:t.textFont.family},paragraph:{spacing:{line:Math.floor(Number(t.textFont.spacing.replace("%",""))*2.4)}}},{id:"Heading3",name:"Heading 3",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:Math.floor(Number(t.titleFont.size.replace("pt",""))*2),font:t.titleFont.family,bold:!1},paragraph:{spacing:{line:Math.floor(Number(t.titleFont.spacing.replace("%",""))*2.4)}}}]},sections:[{headers:{default:null},properties:{page:{size:{width:t.page.width+"cm",height:t.page.height+"cm"},margin:{top:t.page.margins[0]+"cm",right:t.page.margins[1]+"cm",bottom:t.page.margins[2]+"cm",left:t.page.margins[3]+"cm"}}},children:i}]});Xn.Packer.toBlob(s).then(o=>{lM(o,r+".docx")})};var hM={encode:cM};const uM="text/html",fM=(n,e,t,i,r)=>`<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <meta name="author" content="${e}">


  <title>${n}</title>
  <style>
    body { margin: 30px calc(26vw - 70px); }
    body, html { font-family: ${r.textFont.family}; font-size: ${r.textFont.size};}
    h1 { text-align: center;}
    p  { margin-bottom: 8rem; line-height: ${r.textFont.spacing};  }
    h2 { 
      margin-bottom: -1rem; line-height: 4rem; page-break-before: always;
      font-family: ${r.titleFont.family}; font-size: ${r.titleFont.size}; line-height: ${r.titleFont.spacing};  
    }
    br { margin-bottom: 8px; content: ""; display: block; }
  </style>
</head>
<body>
<p style="display:none">
${t}
</p>

<h1>${n}</h1>
${i}
</body>
</html>`,Vw=(n,e,t)=>({html:i=>i,paragraph:i=>`${i}<br>
`,strong:i=>`<b>${i}</b>`,em:i=>`<i>${i}</i>`,codespan:()=>"",code:()=>"",link:(i,r,s)=>{const o=i.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<a href="#${a}">${e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t})}</a>`}}),dM=n=>{const e=go(n),t=x0(e.properties);let i="",r="";for(const[s,o]of e.chapters){const{text:a}=o,l=t.renameAnchor({key:s,book:e}),c=t.renameTitle({book:e,chapter:o,key:s,title:o.title?o.title.trim():""});i+=`  <a href="#${l}">${c}</a>
`,t.titleStyle=="inline"?r+=`
<p for="${l}"><span class="title" id="${l}">${c}</span>
${Ji(a,Vw(e,t)).trim()||""}
</p>
`:(r+=`

<h2 class="title" id="${l}">${c}</h2>
`,r+=`
<p for="${l}">
${Ji(a,Vw(e,t)).trim()||""}
</p>
`)}return fM(e.properties.title,e.properties.author,i,r,t)};var pM={encode:dM,mimetype:uM};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ct=function(){return ct=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ct.apply(this,arguments)};function ug(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}var Pt=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,qt=Object.keys,Tn=Array.isArray;typeof Promise!="undefined"&&!Pt.Promise&&(Pt.Promise=Promise);function Bn(n,e){return typeof e!="object"||qt(e).forEach(function(t){n[t]=e[t]}),n}var Vl=Object.getPrototypeOf,mM={}.hasOwnProperty;function si(n,e){return mM.call(n,e)}function sa(n,e){typeof e=="function"&&(e=e(Vl(n))),(typeof Reflect=="undefined"?qt:Reflect.ownKeys)(e).forEach(function(t){Rr(n,t,e[t])})}var sS=Object.defineProperty;function Rr(n,e,t,i){sS(n,e,Bn(t&&si(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},i))}function Ta(n){return{from:function(e){return n.prototype=Object.create(e.prototype),Rr(n.prototype,"constructor",n),{extend:sa.bind(null,n.prototype)}}}}var gM=Object.getOwnPropertyDescriptor;function k0(n,e){var t=gM(n,e),i;return t||(i=Vl(n))&&k0(i,e)}var yM=[].slice;function Yf(n,e,t){return yM.call(n,e,t)}function oS(n,e){return e(n)}function Ol(n){if(!n)throw new Error("Assertion Failed")}function aS(n){Pt.setImmediate?setImmediate(n):setTimeout(n,0)}function lS(n,e){return n.reduce(function(t,i,r){var s=e(i,r);return s&&(t[s[0]]=s[1]),t},{})}function OM(n,e,t){try{n.apply(null,t)}catch(i){e&&e(i)}}function kr(n,e){if(si(n,e))return n[e];if(!e)return n;if(typeof e!="string"){for(var t=[],i=0,r=e.length;i<r;++i){var s=kr(n,e[i]);t.push(s)}return t}var o=e.indexOf(".");if(o!==-1){var a=n[e.substr(0,o)];return a===void 0?void 0:kr(a,e.substr(o+1))}}function Li(n,e,t){if(!(!n||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof e!="string"&&"length"in e){Ol(typeof t!="string"&&"length"in t);for(var i=0,r=e.length;i<r;++i)Li(n,e[i],t[i])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")t===void 0?Tn(n)&&!isNaN(parseInt(o))?n.splice(o,1):delete n[o]:n[o]=t;else{var l=n[o];(!l||!si(n,o))&&(l=n[o]={}),Li(l,a,t)}}else t===void 0?Tn(n)&&!isNaN(parseInt(e))?n.splice(e,1):delete n[e]:n[e]=t}}function bM(n,e){typeof e=="string"?Li(n,e,void 0):"length"in e&&[].map.call(e,function(t){Li(n,t,void 0)})}function cS(n){var e={};for(var t in n)si(n,t)&&(e[t]=n[t]);return e}var vM=[].concat;function hS(n){return vM.apply([],n)}var uS="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(hS([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(e){return e+n+"Array"})}))).filter(function(n){return Pt[n]}),wM=uS.map(function(n){return Pt[n]});lS(uS,function(n){return[n,!0]});var Vr=null;function Qc(n){Vr=typeof WeakMap!="undefined"&&new WeakMap;var e=fg(n);return Vr=null,e}function fg(n){if(!n||typeof n!="object")return n;var e=Vr&&Vr.get(n);if(e)return e;if(Tn(n)){e=[],Vr&&Vr.set(n,e);for(var t=0,i=n.length;t<i;++t)e.push(fg(n[t]))}else if(wM.indexOf(n.constructor)>=0)e=n;else{var r=Vl(n);e=r===Object.prototype?{}:Object.create(r),Vr&&Vr.set(n,e);for(var s in n)si(n,s)&&(e[s]=fg(n[s]))}return e}var AM={}.toString;function dg(n){return AM.call(n).slice(8,-1)}var pg=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",_M=typeof pg=="symbol"?function(n){var e;return n!=null&&(e=n[pg])&&e.apply(n)}:function(){return null},$o={};function yr(n){var e,t,i,r;if(arguments.length===1){if(Tn(n))return n.slice();if(this===$o&&typeof n=="string")return[n];if(r=_M(n)){for(t=[];i=r.next(),!i.done;)t.push(i.value);return t}if(n==null)return[n];if(e=n.length,typeof e=="number"){for(t=new Array(e);e--;)t[e]=n[e];return t}return[n]}for(e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return t}var S0=typeof Symbol!="undefined"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ar=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function fS(n,e){ar=n,dS=e}var dS=function(){return!0},xM=!new Error("").stack;function yo(){if(xM)try{throw yo.arguments,new Error}catch(n){return n}return new Error}function mg(n,e){var t=n.stack;return t?(e=e||0,t.indexOf(n.name)===0&&(e+=(n.name+n.message).split(`
`).length),t.split(`
`).slice(e).filter(dS).map(function(i){return`
`+i}).join("")):""}var kM=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],pS=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],E0=kM.concat(pS),SM={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ca(n,e){this._e=yo(),this.name=n,this.message=e}Ta(Ca).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+mg(this._e,2))}},toString:function(){return this.name+": "+this.message}});function mS(n,e){return n+". Errors: "+Object.keys(e).map(function(t){return e[t].toString()}).filter(function(t,i,r){return r.indexOf(t)===i}).join(`
`)}function Tu(n,e,t,i){this._e=yo(),this.failures=e,this.failedKeys=i,this.successCount=t,this.message=mS(n,e)}Ta(Tu).from(Ca);function Tl(n,e){this._e=yo(),this.name="BulkError",this.failures=Object.keys(e).map(function(t){return e[t]}),this.failuresByPos=e,this.message=mS(n,e)}Ta(Tl).from(Ca);var T0=E0.reduce(function(n,e){return n[e]=e+"Error",n},{}),EM=Ca,Je=E0.reduce(function(n,e){var t=e+"Error";function i(r,s){this._e=yo(),this.name=t,r?typeof r=="string"?(this.message=""+r+(s?`
 `+s:""),this.inner=s||null):typeof r=="object"&&(this.message=r.name+" "+r.message,this.inner=r):(this.message=SM[e]||t,this.inner=null)}return Ta(i).from(EM),n[e]=i,n},{});Je.Syntax=SyntaxError;Je.Type=TypeError;Je.Range=RangeError;var Xw=pS.reduce(function(n,e){return n[e+"Error"]=Je[e],n},{});function TM(n,e){if(!n||n instanceof Ca||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Xw[n.name])return n;var t=new Xw[n.name](e||n.message,n);return"stack"in n&&Rr(t,"stack",{get:function(){return this.inner.stack}}),t}var Zf=E0.reduce(function(n,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(n[e+"Error"]=Je[e]),n},{});Zf.ModifyError=Tu;Zf.DexieError=Ca;Zf.BulkError=Tl;function kt(){}function Pc(n){return n}function CM(n,e){return n==null||n===Pc?e:function(t){return e(n(t))}}function io(n,e){return function(){n.apply(this,arguments),e.apply(this,arguments)}}function IM(n,e){return n===kt?e:function(){var t=n.apply(this,arguments);t!==void 0&&(arguments[0]=t);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?io(i,this.onsuccess):i),r&&(this.onerror=this.onerror?io(r,this.onerror):r),s!==void 0?s:t}}function RM(n,e){return n===kt?e:function(){n.apply(this,arguments);var t=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?io(t,this.onsuccess):t),i&&(this.onerror=this.onerror?io(i,this.onerror):i)}}function QM(n,e){return n===kt?e:function(t){var i=n.apply(this,arguments);Bn(t,i);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?io(r,this.onsuccess):r),s&&(this.onerror=this.onerror?io(s,this.onerror):s),i===void 0?o===void 0?void 0:o:Bn(i,o)}}function PM(n,e){return n===kt?e:function(){return e.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function C0(n,e){return n===kt?e:function(){var t=n.apply(this,arguments);if(t&&typeof t.then=="function"){for(var i=this,r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return t.then(function(){return e.apply(i,s)})}return e.apply(this,arguments)}}var Xl={},DM=100,NM=20,gS=100,I0=typeof Promise=="undefined"?[]:function(){var n=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[n,Vl(n),n];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Vl(e),n]}(),gg=I0[0],Cu=I0[1],yg=I0[2],yS=Cu&&Cu.then,ou=gg&&gg.constructor,R0=!!yg,Og=!1,LM=yg?function(){yg.then(xh)}:Pt.setImmediate?setImmediate.bind(null,xh):Pt.MutationObserver?function(){var n=document.createElement("div");new MutationObserver(function(){xh(),n=null}).observe(n,{attributes:!0}),n.setAttribute("i","1")}:function(){setTimeout(xh,0)},Yl=function(n,e){bl.push([n,e]),Iu&&(LM(),Iu=!1)},bg=!0,Iu=!0,qs=[],au=[],vg=null,wg=Pc,Go={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:qw,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(n){try{qw(n[0],n[1])}catch{}})}},Xe=Go,bl=[],Ks=0,lu=[];function Be(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=kt,this._lib=!1;var e=this._PSD=Xe;if(ar&&(this._stackHolder=yo(),this._prev=null,this._numPrev=0),typeof n!="function"){if(n!==Xl)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&_g(this,this._value);return}this._state=null,this._value=null,++e.ref,bS(this,n)}var Ag={get:function(){var n=Xe,e=Ru;function t(i,r){var s=this,o=!n.global&&(n!==Xe||e!==Ru),a=o&&!Qr(),l=new Be(function(c,h){Q0(s,new OS(Pu(i,n,o,a),Pu(r,n,o,a),c,h,n))});return ar&&AS(l,this),l}return t.prototype=Xl,t},set:function(n){Rr(this,"then",n&&n.prototype===Xl?Ag:{get:function(){return n},set:Ag.set})}};sa(Be.prototype,{then:Ag,_then:function(n,e){Q0(this,new OS(null,null,n,e,Xe))},catch:function(n){if(arguments.length===1)return this.then(null,n);var e=arguments[0],t=arguments[1];return typeof e=="function"?this.then(null,function(i){return i instanceof e?t(i):cu(i)}):this.then(null,function(i){return i&&i.name===e?t(i):cu(i)})},finally:function(n){return this.then(function(e){return n(),e},function(e){return n(),cu(e)})},stack:{get:function(){if(this._stack)return this._stack;try{Og=!0;var n=wS(this,[],NM),e=n.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Og=!1}}},timeout:function(n,e){var t=this;return n<1/0?new Be(function(i,r){var s=setTimeout(function(){return r(new Je.Timeout(e))},n);t.then(i,r).finally(clearTimeout.bind(null,s))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&Rr(Be.prototype,Symbol.toStringTag,"Dexie.Promise");Go.env=_S();function OS(n,e,t,i,r){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof e=="function"?e:null,this.resolve=t,this.reject=i,this.psd=r}sa(Be,{all:function(){var n=yr.apply(null,arguments).map(Qu);return new Be(function(e,t){n.length===0&&e([]);var i=n.length;n.forEach(function(r,s){return Be.resolve(r).then(function(o){n[s]=o,--i||e(n)},t)})})},resolve:function(n){if(n instanceof Be)return n;if(n&&typeof n.then=="function")return new Be(function(t,i){n.then(t,i)});var e=new Be(Xl,!0,n);return AS(e,vg),e},reject:cu,race:function(){var n=yr.apply(null,arguments).map(Qu);return new Be(function(e,t){n.map(function(i){return Be.resolve(i).then(e,t)})})},PSD:{get:function(){return Xe},set:function(n){return Xe=n}},totalEchoes:{get:function(){return Ru}},newPSD:gs,usePSD:Ra,scheduler:{get:function(){return Yl},set:function(n){Yl=n}},rejectionMapper:{get:function(){return wg},set:function(n){wg=n}},follow:function(n,e){return new Be(function(t,i){return gs(function(r,s){var o=Xe;o.unhandleds=[],o.onunhandled=s,o.finalize=io(function(){var a=this;MM(function(){a.unhandleds.length===0?r():s(a.unhandleds[0])})},o.finalize),n()},e,t,i)})}});ou&&(ou.allSettled&&Rr(Be,"allSettled",function(){var n=yr.apply(null,arguments).map(Qu);return new Be(function(e){n.length===0&&e([]);var t=n.length,i=new Array(t);n.forEach(function(r,s){return Be.resolve(r).then(function(o){return i[s]={status:"fulfilled",value:o}},function(o){return i[s]={status:"rejected",reason:o}}).then(function(){return--t||e(i)})})})}),ou.any&&typeof AggregateError!="undefined"&&Rr(Be,"any",function(){var n=yr.apply(null,arguments).map(Qu);return new Be(function(e,t){n.length===0&&t(new AggregateError([]));var i=n.length,r=new Array(i);n.forEach(function(s,o){return Be.resolve(s).then(function(a){return e(a)},function(a){r[o]=a,--i||t(new AggregateError(r))})})})}));function bS(n,e){try{e(function(t){if(n._state===null){if(t===n)throw new TypeError("A promise cannot be resolved with itself.");var i=n._lib&&Dc();t&&typeof t.then=="function"?bS(n,function(r,s){t instanceof Be?t._then(r,s):t.then(r,s)}):(n._state=!0,n._value=t,vS(n)),i&&Nc()}},_g.bind(null,n))}catch(t){_g(n,t)}}function _g(n,e){if(au.push(e),n._state===null){var t=n._lib&&Dc();e=wg(e),n._state=!1,n._value=e,ar&&e!==null&&typeof e=="object"&&!e._promise&&OM(function(){var i=k0(e,"stack");e._promise=n,Rr(e,"stack",{get:function(){return Og?i&&(i.get?i.get.apply(e):i.value):n.stack}})}),$M(n),vS(n),t&&Nc()}}function vS(n){var e=n._listeners;n._listeners=[];for(var t=0,i=e.length;t<i;++t)Q0(n,e[t]);var r=n._PSD;--r.ref||r.finalize(),Ks===0&&(++Ks,Yl(function(){--Ks===0&&P0()},[]))}function Q0(n,e){if(n._state===null){n._listeners.push(e);return}var t=n._state?e.onFulfilled:e.onRejected;if(t===null)return(n._state?e.resolve:e.reject)(n._value);++e.psd.ref,++Ks,Yl(BM,[t,n,e])}function BM(n,e,t){try{vg=e;var i,r=e._value;e._state?i=n(r):(au.length&&(au=[]),i=n(r),au.indexOf(r)===-1&&FM(e)),t.resolve(i)}catch(s){t.reject(s)}finally{vg=null,--Ks===0&&P0(),--t.psd.ref||t.psd.finalize()}}function wS(n,e,t){if(e.length===t)return e;var i="";if(n._state===!1){var r=n._value,s,o;r!=null?(s=r.name||"Error",o=r.message||r,i=mg(r,0)):(s=r,o=""),e.push(s+(o?": "+o:"")+i)}return ar&&(i=mg(n._stackHolder,2),i&&e.indexOf(i)===-1&&e.push(i),n._prev&&wS(n._prev,e,t)),e}function AS(n,e){var t=e?e._numPrev+1:0;t<DM&&(n._prev=e,n._numPrev=t)}function xh(){Dc()&&Nc()}function Dc(){var n=bg;return bg=!1,Iu=!1,n}function Nc(){var n,e,t;do for(;bl.length>0;)for(n=bl,bl=[],t=n.length,e=0;e<t;++e){var i=n[e];i[0].apply(null,i[1])}while(bl.length>0);bg=!0,Iu=!0}function P0(){var n=qs;qs=[],n.forEach(function(i){i._PSD.onunhandled.call(null,i._value,i)});for(var e=lu.slice(0),t=e.length;t;)e[--t]()}function MM(n){function e(){n(),lu.splice(lu.indexOf(e),1)}lu.push(e),++Ks,Yl(function(){--Ks===0&&P0()},[])}function $M(n){qs.some(function(e){return e._value===n._value})||qs.push(n)}function FM(n){for(var e=qs.length;e;)if(qs[--e]._value===n._value){qs.splice(e,1);return}}function cu(n){return new Be(Xl,!1,n)}function Mt(n,e){var t=Xe;return function(){var i=Dc(),r=Xe;try{return ys(t,!0),n.apply(this,arguments)}catch(s){e&&e(s)}finally{ys(r,!1),i&&Nc()}}}var En={awaits:0,echoes:0,id:0},WM=0,hu=[],jp=0,Ru=0,UM=0;function gs(n,e,t,i){var r=Xe,s=Object.create(r);s.parent=r,s.ref=0,s.global=!1,s.id=++UM;var o=Go.env;s.env=R0?{Promise:Be,PromiseProp:{value:Be,configurable:!0,writable:!0},all:Be.all,race:Be.race,allSettled:Be.allSettled,any:Be.any,resolve:Be.resolve,reject:Be.reject,nthen:Yw(o.nthen,s),gthen:Yw(o.gthen,s)}:{},e&&Bn(s,e),++r.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Ra(s,n,t,i);return s.ref===0&&s.finalize(),a}function Ia(){return En.id||(En.id=++WM),++En.awaits,En.echoes+=gS,En.id}function Qr(){return En.awaits?(--En.awaits===0&&(En.id=0),En.echoes=En.awaits*gS,!0):!1}(""+yS).indexOf("[native code]")===-1&&(Ia=Qr=kt);function Qu(n){return En.echoes&&n&&n.constructor===ou?(Ia(),n.then(function(e){return Qr(),e},function(e){return Qr(),rn(e)})):n}function zM(n){++Ru,(!En.echoes||--En.echoes===0)&&(En.echoes=En.id=0),hu.push(Xe),ys(n,!0)}function jM(){var n=hu[hu.length-1];hu.pop(),ys(n,!1)}function ys(n,e){var t=Xe;if((e?En.echoes&&(!jp++||n!==Xe):jp&&(!--jp||n!==Xe))&&xS(e?zM.bind(null,n):jM),n!==Xe&&(Xe=n,t===Go&&(Go.env=_S()),R0)){var i=Go.env.Promise,r=n.env;Cu.then=r.nthen,i.prototype.then=r.gthen,(t.global||n.global)&&(Object.defineProperty(Pt,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))}}function _S(){var n=Pt.Promise;return R0?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(Pt,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject,nthen:Cu.then,gthen:n.prototype.then}:{}}function Ra(n,e,t,i,r){var s=Xe;try{return ys(n,!0),e(t,i,r)}finally{ys(s,!1)}}function xS(n){yS.call(gg,n)}function Pu(n,e,t,i){return typeof n!="function"?n:function(){var r=Xe;t&&Ia(),ys(e,!0);try{return n.apply(this,arguments)}finally{ys(r,!1),i&&xS(Qr)}}}function Yw(n,e){return function(t,i){return n.call(this,Pu(t,e),Pu(i,e))}}var Zw="unhandledrejection";function qw(n,e){var t;try{t=e.onuncatched(n)}catch{}if(t!==!1)try{var i,r={promise:e,reason:n};if(Pt.document&&document.createEvent?(i=document.createEvent("Event"),i.initEvent(Zw,!0,!0),Bn(i,r)):Pt.CustomEvent&&(i=new CustomEvent(Zw,{detail:r}),Bn(i,r)),i&&Pt.dispatchEvent&&(dispatchEvent(i),!Pt.PromiseRejectionEvent&&Pt.onunhandledrejection))try{Pt.onunhandledrejection(i)}catch{}ar&&i&&!i.defaultPrevented&&console.warn("Unhandled rejection: "+(n.stack||n))}catch{}}var rn=Be.reject;function xg(n,e,t,i){if(!n.idbdb||!n._state.openComplete&&!Xe.letThrough&&!n._vip){if(n._state.openComplete)return rn(new Je.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen)return rn(new Je.DatabaseClosed);n.open().catch(kt)}return n._state.dbReadyPromise.then(function(){return xg(n,e,t,i)})}else{var r=n._createTransaction(e,t,n._dbSchema);try{r.create(),n._state.PR1398_maxLoop=3}catch(s){return s.name===T0.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(function(){return xg(n,e,t,i)})):rn(s)}return r._promise(e,function(s,o){return gs(function(){return Xe.trans=r,i(s,o,r)})}).then(function(s){return r._completion.then(function(){return s})})}}var Kw="3.2.2",Hs=String.fromCharCode(65535),kg=-1/0,fr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kS="String expected.",Cl=[],qf=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),HM=qf,GM=qf,SS=function(n){return!/(dexie\.js|dexie\.min\.js)/.test(n)},Kf="__dbnames",Hp="readonly",Gp="readwrite";function ro(n,e){return n?e?function(){return n.apply(this,arguments)&&e.apply(this,arguments)}:n:e}var ES={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function kh(n){return typeof n=="string"&&!/\./.test(n)?function(e){return e[n]===void 0&&n in e&&(e=Qc(e),delete e[n]),e}:function(e){return e}}var VM=function(){function n(){}return n.prototype._trans=function(e,t,i){var r=this._tx||Xe.trans,s=this.name;function o(l,c,h){if(!h.schema[s])throw new Je.NotFound("Table "+s+" not part of transaction");return t(h.idbtrans,h)}var a=Dc();try{return r&&r.db===this.db?r===Xe.trans?r._promise(e,o,i):gs(function(){return r._promise(e,o,i)},{trans:r,transless:Xe.transless||Xe}):xg(this.db,e,[this.name],o)}finally{a&&Nc()}},n.prototype.get=function(e,t){var i=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",function(r){return i.core.get({trans:r,key:e}).then(function(s){return i.hook.reading.fire(s)})}).then(t)},n.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(Tn(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=qt(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(h){return h.compound&&t.every(function(u){return h.keyPath.indexOf(u)>=0})&&h.keyPath.every(function(u){return t.indexOf(u)>=0})})[0];if(i&&this.db._maxKey!==Hs)return this.where(i.name).equals(i.keyPath.map(function(h){return e[h]}));!i&&ar&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+t.join("+")+"]"));var r=this.schema.idxByName,s=this.db._deps.indexedDB;function o(h,u){try{return s.cmp(h,u)===0}catch{return!1}}var a=t.reduce(function(h,u){var f=h[0],p=h[1],d=r[u],m=e[u];return[f||d,f||!d?ro(p,d&&d.multi?function(b){var A=kr(b,u);return Tn(A)&&A.some(function(g){return o(m,g)})}:function(b){return o(m,kr(b,u))}):p]},[null,null]),l=a[0],c=a[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(c):i?this.filter(c):this.where(t).equals("")},n.prototype.filter=function(e){return this.toCollection().and(e)},n.prototype.count=function(e){return this.toCollection().count(e)},n.prototype.offset=function(e){return this.toCollection().offset(e)},n.prototype.limit=function(e){return this.toCollection().limit(e)},n.prototype.each=function(e){return this.toCollection().each(e)},n.prototype.toArray=function(e){return this.toCollection().toArray(e)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,Tn(e)?"["+e.join("+")+"]":e))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(i){if(!i)return i;var r=Object.create(e.prototype);for(var s in i)if(si(i,s))try{r[s]=i[s]}catch{}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},n.prototype.defineClass=function(){function e(t){Bn(this,t)}return this.mapToClass(e)},n.prototype.add=function(e,t){var i=this,r=this.schema.primKey,s=r.auto,o=r.keyPath,a=e;return o&&s&&(a=kh(o)(e)),this._trans("readwrite",function(l){return i.core.mutate({trans:l,type:"add",keys:t!=null?[t]:null,values:[a]})}).then(function(l){return l.numFailures?Be.reject(l.failures[0]):l.lastResult}).then(function(l){if(o)try{Li(e,o,l)}catch{}return l})},n.prototype.update=function(e,t){if(typeof e=="object"&&!Tn(e)){var i=kr(e,this.schema.primKey.keyPath);if(i===void 0)return rn(new Je.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?qt(t).forEach(function(r){Li(e,r,t[r])}):t(e,{value:e,primKey:i})}catch{}return this.where(":id").equals(i).modify(t)}else return this.where(":id").equals(e).modify(t)},n.prototype.put=function(e,t){var i=this,r=this.schema.primKey,s=r.auto,o=r.keyPath,a=e;return o&&s&&(a=kh(o)(e)),this._trans("readwrite",function(l){return i.core.mutate({trans:l,type:"put",values:[a],keys:t!=null?[t]:null})}).then(function(l){return l.numFailures?Be.reject(l.failures[0]):l.lastResult}).then(function(l){if(o)try{Li(e,o,l)}catch{}return l})},n.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:[e]})}).then(function(i){return i.numFailures?Be.reject(i.failures[0]):void 0})},n.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ES})}).then(function(t){return t.numFailures?Be.reject(t.failures[0]):void 0})},n.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(i){return t.core.getMany({keys:e,trans:i}).then(function(r){return r.map(function(s){return t.hook.reading.fire(s)})})})},n.prototype.bulkAdd=function(e,t,i){var r=this,s=Array.isArray(t)?t:void 0;i=i||(s?void 0:t);var o=i?i.allKeys:void 0;return this._trans("readwrite",function(a){var l=r.schema.primKey,c=l.auto,h=l.keyPath;if(h&&s)throw new Je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new Je.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,f=h&&c?e.map(kh(h)):e;return r.core.mutate({trans:a,type:"add",keys:s,values:f,wantResults:o}).then(function(p){var d=p.numFailures,m=p.results,b=p.lastResult,A=p.failures,g=o?m:b;if(d===0)return g;throw new Tl(r.name+".bulkAdd(): "+d+" of "+u+" operations failed",A)})})},n.prototype.bulkPut=function(e,t,i){var r=this,s=Array.isArray(t)?t:void 0;i=i||(s?void 0:t);var o=i?i.allKeys:void 0;return this._trans("readwrite",function(a){var l=r.schema.primKey,c=l.auto,h=l.keyPath;if(h&&s)throw new Je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new Je.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,f=h&&c?e.map(kh(h)):e;return r.core.mutate({trans:a,type:"put",keys:s,values:f,wantResults:o}).then(function(p){var d=p.numFailures,m=p.results,b=p.lastResult,A=p.failures,g=o?m:b;if(d===0)return g;throw new Tl(r.name+".bulkPut(): "+d+" of "+u+" operations failed",A)})})},n.prototype.bulkDelete=function(e){var t=this,i=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(r){var s=r.numFailures,o=r.lastResult,a=r.failures;if(s===0)return o;throw new Tl(t.name+".bulkDelete(): "+s+" of "+i+" operations failed",a)})},n}();function Lc(n){var e={},t=function(a,l){if(l){for(var c=arguments.length,h=new Array(c-1);--c;)h[c-1]=arguments[c];return e[a].subscribe.apply(null,h),n}else if(typeof a=="string")return e[a]};t.addEventType=s;for(var i=1,r=arguments.length;i<r;++i)s(arguments[i]);return t;function s(a,l,c){if(typeof a=="object")return o(a);l||(l=PM),c||(c=kt);var h={subscribers:[],fire:c,subscribe:function(u){h.subscribers.indexOf(u)===-1&&(h.subscribers.push(u),h.fire=l(h.fire,u))},unsubscribe:function(u){h.subscribers=h.subscribers.filter(function(f){return f!==u}),h.fire=h.subscribers.reduce(l,c)}};return e[a]=t[a]=h,h}function o(a){qt(a).forEach(function(l){var c=a[l];if(Tn(c))s(l,a[l][0],a[l][1]);else if(c==="asap")var h=s(l,Pc,function(){for(var f=arguments.length,p=new Array(f);f--;)p[f]=arguments[f];h.subscribers.forEach(function(d){aS(function(){d.apply(null,p)})})});else throw new Je.InvalidArgument("Invalid event config")})}}function Bc(n,e){return Ta(e).from({prototype:n}),e}function XM(n){return Bc(VM.prototype,function(t,i,r){this.db=n,this._tx=r,this.name=t,this.schema=i,this.hook=n._allTables[t]?n._allTables[t].hook:Lc(null,{creating:[IM,kt],reading:[CM,Pc],updating:[QM,kt],deleting:[RM,kt]})})}function Po(n,e){return!(n.filter||n.algorithm||n.or)&&(e?n.justLimit:!n.replayFilter)}function Vp(n,e){n.filter=ro(n.filter,e)}function Xp(n,e,t){var i=n.replayFilter;n.replayFilter=i?function(){return ro(i(),e())}:e,n.justLimit=t&&!i}function YM(n,e){n.isMatch=ro(n.isMatch,e)}function uu(n,e){if(n.isPrimKey)return e.primaryKey;var t=e.getIndexByKeyPath(n.index);if(!t)throw new Je.Schema("KeyPath "+n.index+" on object store "+e.name+" is not indexed");return t}function Jw(n,e,t){var i=uu(n,e.schema);return e.openCursor({trans:t,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:i,range:n.range}})}function Sh(n,e,t,i){var r=n.replayFilter?ro(n.filter,n.replayFilter()):n.filter;if(n.or){var s={},o=function(a,l,c){if(!r||r(l,c,function(f){return l.stop(f)},function(f){return l.fail(f)})){var h=l.primaryKey,u=""+h;u==="[object ArrayBuffer]"&&(u=""+new Uint8Array(h)),si(s,u)||(s[u]=!0,e(a,l,c))}};return Promise.all([n.or._iterate(o,t),eA(Jw(n,i,t),n.algorithm,o,!n.keysOnly&&n.valueMapper)])}else return eA(Jw(n,i,t),ro(n.algorithm,r),e,!n.keysOnly&&n.valueMapper)}function eA(n,e,t,i){var r=i?function(o,a,l){return t(i(o),a,l)}:t,s=Mt(r);return n.then(function(o){if(o)return o.start(function(){var a=function(){return o.continue()};(!e||e(o,function(l){return a=l},function(l){o.stop(l),a=kt},function(l){o.fail(l),a=kt}))&&s(o.value,o,function(l){return a=l}),a()})})}function Qn(n,e){try{var t=tA(n),i=tA(e);if(t!==i)return t==="Array"?1:i==="Array"?-1:t==="binary"?1:i==="binary"?-1:t==="string"?1:i==="string"?-1:t==="Date"?1:i!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return n>e?1:n<e?-1:0;case"binary":return qM(nA(n),nA(e));case"Array":return ZM(n,e)}}catch{}return NaN}function ZM(n,e){for(var t=n.length,i=e.length,r=t<i?t:i,s=0;s<r;++s){var o=Qn(n[s],e[s]);if(o!==0)return o}return t===i?0:t<i?-1:1}function qM(n,e){for(var t=n.length,i=e.length,r=t<i?t:i,s=0;s<r;++s)if(n[s]!==e[s])return n[s]<e[s]?-1:1;return t===i?0:t<i?-1:1}function tA(n){var e=typeof n;if(e!=="object")return e;if(ArrayBuffer.isView(n))return"binary";var t=dg(n);return t==="ArrayBuffer"?"binary":t}function nA(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}var KM=function(){function n(){}return n.prototype._read=function(e,t){var i=this._ctx;return i.error?i.table._trans(null,rn.bind(null,i.error)):i.table._trans("readonly",e).then(t)},n.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,rn.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},n.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=ro(t.algorithm,e)},n.prototype._iterate=function(e,t){return Sh(this._ctx,e,t,this._ctx.table.core)},n.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&Bn(i,e),t._ctx=i,t},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(e){var t=this._ctx;return this._read(function(i){return Sh(t,e,i,t.table.core)})},n.prototype.count=function(e){var t=this;return this._read(function(i){var r=t._ctx,s=r.table.core;if(Po(r,!0))return s.count({trans:i,query:{index:uu(r,s.schema),range:r.range}}).then(function(a){return Math.min(a,r.limit)});var o=0;return Sh(r,function(){return++o,!1},i,s).then(function(){return o})}).then(e)},n.prototype.sortBy=function(e,t){var i=e.split(".").reverse(),r=i[0],s=i.length-1;function o(c,h){return h?o(c[i[h]],h-1):c[r]}var a=this._ctx.dir==="next"?1:-1;function l(c,h){var u=o(c,s),f=o(h,s);return u<f?-a:u>f?a:0}return this.toArray(function(c){return c.sort(l)}).then(t)},n.prototype.toArray=function(e){var t=this;return this._read(function(i){var r=t._ctx;if(r.dir==="next"&&Po(r,!0)&&r.limit>0){var s=r.valueMapper,o=uu(r,r.table.core.schema);return r.table.core.query({trans:i,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(function(l){var c=l.result;return s?c.map(s):c})}else{var a=[];return Sh(r,function(l){return a.push(l)},i,r.table.core).then(function(){return a})}},e)},n.prototype.offset=function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,Po(t)?Xp(t,function(){var i=e;return function(r,s){return i===0?!0:i===1?(--i,!1):(s(function(){r.advance(i),i=0}),!1)}}):Xp(t,function(){var i=e;return function(){return--i<0}}),this)},n.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Xp(this._ctx,function(){var t=e;return function(i,r,s){return--t<=0&&r(s),t>=0}},!0),this},n.prototype.until=function(e,t){return Vp(this._ctx,function(i,r,s){return e(i.value)?(r(s),t):!0}),this},n.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},n.prototype.last=function(e){return this.reverse().first(e)},n.prototype.filter=function(e){return Vp(this._ctx,function(t){return e(t.value)}),YM(this._ctx,e),this},n.prototype.and=function(e){return this.filter(e)},n.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,r){e(r.key,r)})},n.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},n.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,r){e(r.primaryKey,r)})},n.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var i=[];return this.each(function(r,s){i.push(s.key)}).then(function(){return i}).then(e)},n.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Po(t,!0)&&t.limit>0)return this._read(function(r){var s=uu(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(function(r){var s=r.result;return s}).then(e);t.keysOnly=!t.isMatch;var i=[];return this.each(function(r,s){i.push(s.primaryKey)}).then(function(){return i}).then(e)},n.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},n.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},n.prototype.lastKey=function(e){return this.reverse().firstKey(e)},n.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var i={};return Vp(this._ctx,function(r){var s=r.primaryKey.toString(),o=si(i,s);return i[s]=!0,!o}),this},n.prototype.modify=function(e){var t=this,i=this._ctx;return this._write(function(r){var s;if(typeof e=="function")s=e;else{var o=qt(e),a=o.length;s=function(A){for(var g=!1,v=0;v<a;++v){var O=o[v],_=e[O];kr(A,O)!==_&&(Li(A,O,_),g=!0)}return g}}var l=i.table.core,c=l.schema.primaryKey,h=c.outbound,u=c.extractKey,f=t.db._options.modifyChunkSize||200,p=[],d=0,m=[],b=function(A,g){var v=g.failures,O=g.numFailures;d+=A-O;for(var _=0,x=qt(v);_<x.length;_++){var E=x[_];p.push(v[E])}};return t.clone().primaryKeys().then(function(A){var g=function(v){var O=Math.min(f,A.length-v);return l.getMany({trans:r,keys:A.slice(v,v+O),cache:"immutable"}).then(function(_){for(var x=[],E=[],T=h?[]:null,S=[],C=0;C<O;++C){var B=_[C],M={value:Qc(B),primKey:A[v+C]};s.call(M,M.value,M)!==!1&&(M.value==null?S.push(A[v+C]):!h&&Qn(u(B),u(M.value))!==0?(S.push(A[v+C]),x.push(M.value)):(E.push(M.value),h&&T.push(A[v+C])))}var D=Po(i)&&i.limit===1/0&&(typeof e!="function"||e===Yp)&&{index:i.index,range:i.range};return Promise.resolve(x.length>0&&l.mutate({trans:r,type:"add",values:x}).then(function(N){for(var P in N.failures)S.splice(parseInt(P),1);b(x.length,N)})).then(function(){return(E.length>0||D&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:T,values:E,criteria:D,changeSpec:typeof e!="function"&&e}).then(function(N){return b(E.length,N)})}).then(function(){return(S.length>0||D&&e===Yp)&&l.mutate({trans:r,type:"delete",keys:S,criteria:D}).then(function(N){return b(S.length,N)})}).then(function(){return A.length>v+O&&g(v+f)})})};return g(0).then(function(){if(p.length>0)throw new Tu("Error modifying one or more objects",p,d,m);return A.length})})})},n.prototype.delete=function(){var e=this._ctx,t=e.range;return Po(e)&&(e.isPrimKey&&!GM||t.type===3)?this._write(function(i){var r=e.table.core.schema.primaryKey,s=t;return e.table.core.count({trans:i,query:{index:r,range:s}}).then(function(o){return e.table.core.mutate({trans:i,type:"deleteRange",range:s}).then(function(a){var l=a.failures;a.lastResult,a.results;var c=a.numFailures;if(c)throw new Tu("Could not delete some values",Object.keys(l).map(function(h){return l[h]}),o-c);return o-c})})}):this.modify(Yp)},n}(),Yp=function(n,e){return e.value=null};function JM(n){return Bc(KM.prototype,function(t,i){this.db=n;var r=ES,s=null;if(i)try{r=i()}catch(c){s=c}var o=t._ctx,a=o.table,l=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:o.or,valueMapper:l!==Pc?l:null}})}function e5(n,e){return n<e?-1:n===e?0:1}function t5(n,e){return n>e?-1:n===e?0:1}function Zn(n,e,t){var i=n instanceof CS?new n.Collection(n):n;return i._ctx.error=t?new t(e):new TypeError(e),i}function Do(n){return new n.Collection(n,function(){return TS("")}).limit(0)}function n5(n){return n==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function i5(n){return n==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function r5(n,e,t,i,r,s){for(var o=Math.min(n.length,i.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==i[l])return r(n[l],t[l])<0?n.substr(0,l)+t[l]+t.substr(l+1):r(n[l],i[l])<0?n.substr(0,l)+i[l]+t.substr(l+1):a>=0?n.substr(0,a)+e[a]+t.substr(a+1):null;r(n[l],c)<0&&(a=l)}return o<i.length&&s==="next"?n+t.substr(n.length):o<n.length&&s==="prev"?n.substr(0,t.length):a<0?null:n.substr(0,a)+i[a]+t.substr(a+1)}function Eh(n,e,t,i){var r,s,o,a,l,c,h,u=t.length;if(!t.every(function(m){return typeof m=="string"}))return Zn(n,kS);function f(m){r=n5(m),s=i5(m),o=m==="next"?e5:t5;var b=t.map(function(A){return{lower:s(A),upper:r(A)}}).sort(function(A,g){return o(A.lower,g.lower)});a=b.map(function(A){return A.upper}),l=b.map(function(A){return A.lower}),c=m,h=m==="next"?"":i}f("next");var p=new n.Collection(n,function(){return Gr(a[0],l[u-1]+i)});p._ondirectionchange=function(m){f(m)};var d=0;return p._addAlgorithm(function(m,b,A){var g=m.key;if(typeof g!="string")return!1;var v=s(g);if(e(v,l,d))return!0;for(var O=null,_=d;_<u;++_){var x=r5(g,v,a[_],l[_],o,c);x===null&&O===null?d=_+1:(O===null||o(O,x)>0)&&(O=x)}return b(O!==null?function(){m.continue(O+h)}:A),!1}),p}function Gr(n,e,t,i){return{type:2,lower:n,upper:e,lowerOpen:t,upperOpen:i}}function TS(n){return{type:1,lower:n,upper:n}}var CS=function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(e,t,i,r){i=i!==!1,r=r===!0;try{return this._cmp(e,t)>0||this._cmp(e,t)===0&&(i||r)&&!(i&&r)?Do(this):new this.Collection(this,function(){return Gr(e,t,!i,!r)})}catch{return Zn(this,fr)}},n.prototype.equals=function(e){return e==null?Zn(this,fr):new this.Collection(this,function(){return TS(e)})},n.prototype.above=function(e){return e==null?Zn(this,fr):new this.Collection(this,function(){return Gr(e,void 0,!0)})},n.prototype.aboveOrEqual=function(e){return e==null?Zn(this,fr):new this.Collection(this,function(){return Gr(e,void 0,!1)})},n.prototype.below=function(e){return e==null?Zn(this,fr):new this.Collection(this,function(){return Gr(void 0,e,!1,!0)})},n.prototype.belowOrEqual=function(e){return e==null?Zn(this,fr):new this.Collection(this,function(){return Gr(void 0,e)})},n.prototype.startsWith=function(e){return typeof e!="string"?Zn(this,kS):this.between(e,e+Hs,!0,!0)},n.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Eh(this,function(t,i){return t.indexOf(i[0])===0},[e],Hs)},n.prototype.equalsIgnoreCase=function(e){return Eh(this,function(t,i){return t===i[0]},[e],"")},n.prototype.anyOfIgnoreCase=function(){var e=yr.apply($o,arguments);return e.length===0?Do(this):Eh(this,function(t,i){return i.indexOf(t)!==-1},e,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var e=yr.apply($o,arguments);return e.length===0?Do(this):Eh(this,function(t,i){return i.some(function(r){return t.indexOf(r)===0})},e,Hs)},n.prototype.anyOf=function(){var e=this,t=yr.apply($o,arguments),i=this._cmp;try{t.sort(i)}catch{return Zn(this,fr)}if(t.length===0)return Do(this);var r=new this.Collection(this,function(){return Gr(t[0],t[t.length-1])});r._ondirectionchange=function(o){i=o==="next"?e._ascending:e._descending,t.sort(i)};var s=0;return r._addAlgorithm(function(o,a,l){for(var c=o.key;i(c,t[s])>0;)if(++s,s===t.length)return a(l),!1;return i(c,t[s])===0?!0:(a(function(){o.continue(t[s])}),!1)}),r},n.prototype.notEqual=function(e){return this.inAnyRange([[kg,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var e=yr.apply($o,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Zn(this,fr)}var t=e.reduce(function(i,r){return i?i.concat([[i[i.length-1][1],r]]):[[kg,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(e,t){var i=this,r=this._cmp,s=this._ascending,o=this._descending,a=this._min,l=this._max;if(e.length===0)return Do(this);if(!e.every(function(_){return _[0]!==void 0&&_[1]!==void 0&&s(_[0],_[1])<=0}))return Zn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Je.InvalidArgument);var c=!t||t.includeLowers!==!1,h=t&&t.includeUppers===!0;function u(_,x){for(var E=0,T=_.length;E<T;++E){var S=_[E];if(r(x[0],S[1])<0&&r(x[1],S[0])>0){S[0]=a(S[0],x[0]),S[1]=l(S[1],x[1]);break}}return E===T&&_.push(x),_}var f=s;function p(_,x){return f(_[0],x[0])}var d;try{d=e.reduce(u,[]),d.sort(p)}catch{return Zn(this,fr)}var m=0,b=h?function(_){return s(_,d[m][1])>0}:function(_){return s(_,d[m][1])>=0},A=c?function(_){return o(_,d[m][0])>0}:function(_){return o(_,d[m][0])>=0};function g(_){return!b(_)&&!A(_)}var v=b,O=new this.Collection(this,function(){return Gr(d[0][0],d[d.length-1][1],!c,!h)});return O._ondirectionchange=function(_){_==="next"?(v=b,f=s):(v=A,f=o),d.sort(p)},O._addAlgorithm(function(_,x,E){for(var T=_.key;v(T);)if(++m,m===d.length)return x(E),!1;return g(T)?!0:(i._cmp(T,d[m][1])===0||i._cmp(T,d[m][0])===0||x(function(){f===s?_.continue(d[m][0]):_.continue(d[m][1])}),!1)}),O},n.prototype.startsWithAnyOf=function(){var e=yr.apply($o,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Do(this):this.inAnyRange(e.map(function(t){return[t,t+Hs]})):Zn(this,"startsWithAnyOf() only works with strings")},n}();function s5(n){return Bc(CS.prototype,function(t,i,r){this.db=n,this._ctx={table:t,index:i===":id"?null:i,or:r};var s=n._deps.indexedDB;if(!s)throw new Je.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=function(o,a){return s.cmp(a,o)},this._max=function(o,a){return s.cmp(o,a)>0?o:a},this._min=function(o,a){return s.cmp(o,a)<0?o:a},this._IDBKeyRange=n._deps.IDBKeyRange})}function Gi(n){return Mt(function(e){return Zl(e),n(e.target.error),!1})}function Zl(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var ql="storagemutated",ts="x-storagemutated-1",Os=Lc(null,ql),o5=function(){function n(){}return n.prototype._lock=function(){return Ol(!Xe.global),++this._reculock,this._reculock===1&&!Xe.global&&(Xe.lockOwnerFor=this),this},n.prototype._unlock=function(){if(Ol(!Xe.global),--this._reculock===0)for(Xe.global||(Xe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Ra(e[1],e[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&Xe.lockOwnerFor!==this},n.prototype.create=function(e){var t=this;if(!this.mode)return this;var i=this.db.idbdb,r=this.db._state.dbOpenError;if(Ol(!this.idbtrans),!e&&!i)switch(r&&r.name){case"DatabaseClosedError":throw new Je.DatabaseClosed(r);case"MissingAPIError":throw new Je.MissingAPI(r.message,r);default:throw new Je.OpenFailed(r)}if(!this.active)throw new Je.TransactionInactive;return Ol(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):i.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=Mt(function(s){Zl(s),t._reject(e.error)}),e.onabort=Mt(function(s){Zl(s),t.active&&t._reject(new Je.Abort(e.error)),t.active=!1,t.on("abort").fire(s)}),e.oncomplete=Mt(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Os.storagemutated.fire(e.mutatedParts)}),this},n.prototype._promise=function(e,t,i){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return rn(new Je.ReadOnly("Transaction is readonly"));if(!this.active)return rn(new Je.TransactionInactive);if(this._locked())return new Be(function(o,a){r._blockedFuncs.push([function(){r._promise(e,t,i).then(o,a)},Xe])});if(i)return gs(function(){var o=new Be(function(a,l){r._lock();var c=t(a,l,r);c&&c.then&&c.then(a,l)});return o.finally(function(){return r._unlock()}),o._lib=!0,o});var s=new Be(function(o,a){var l=t(o,a,r);l&&l.then&&l.then(o,a)});return s._lib=!0,s},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(e){var t=this._root(),i=Be.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return i});else{t._waitingFor=i,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new Be(function(o,a){i.then(function(l){return t._waitingQueue.push(Mt(o.bind(null,l)))},function(l){return t._waitingQueue.push(Mt(a.bind(null,l)))}).finally(function(){t._waitingFor===s&&(t._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Je.Abort))},n.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(si(t,e))return t[e];var i=this.schema[e];if(!i)throw new Je.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,i,this);return r.core=this.db.core.table(e),t[e]=r,r},n}();function a5(n){return Bc(o5.prototype,function(t,i,r,s,o){var a=this;this.db=n,this.mode=t,this.storeNames=i,this.schema=r,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Lc(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Be(function(l,c){a._resolve=l,a._reject=c}),this._completion.then(function(){a.active=!1,a.on.complete.fire()},function(l){var c=a.active;return a.active=!1,a.on.error.fire(l),a.parent?a.parent._reject(l):c&&a.idbtrans&&a.idbtrans.abort(),rn(l)})})}function Sg(n,e,t,i,r,s,o){return{name:n,keyPath:e,unique:t,multi:i,auto:r,compound:s,src:(t&&!o?"&":"")+(i?"*":"")+(r?"++":"")+IS(e)}}function IS(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function RS(n,e,t){return{name:n,primKey:e,indexes:t,mappedClass:null,idxByName:lS(t,function(i){return[i.name,i]})}}function l5(n){return n.length===1?n[0]:n}var Kl=function(n){try{return n.only([[]]),Kl=function(){return[[]]},[[]]}catch{return Kl=function(){return Hs},Hs}};function Eg(n){return n==null?function(){}:typeof n=="string"?c5(n):function(e){return kr(e,n)}}function c5(n){var e=n.split(".");return e.length===1?function(t){return t[n]}:function(t){return kr(t,n)}}function iA(n){return[].slice.call(n)}var h5=0;function Il(n){return n==null?":id":typeof n=="string"?n:"["+n.join("+")+"]"}function u5(n,e,t){function i(u,f){var p=iA(u.objectStoreNames);return{schema:{name:u.name,tables:p.map(function(d){return f.objectStore(d)}).map(function(d){var m=d.keyPath,b=d.autoIncrement,A=Tn(m),g=m==null,v={},O={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:A,keyPath:m,autoIncrement:b,unique:!0,extractKey:Eg(m)},indexes:iA(d.indexNames).map(function(_){return d.index(_)}).map(function(_){var x=_.name,E=_.unique,T=_.multiEntry,S=_.keyPath,C=Tn(S),B={name:x,compound:C,keyPath:S,unique:E,multiEntry:T,extractKey:Eg(S)};return v[Il(S)]=B,B}),getIndexByKeyPath:function(_){return v[Il(_)]}};return v[":id"]=O.primaryKey,m!=null&&(v[Il(m)]=O.primaryKey),O})},hasGetAll:p.length>0&&"getAll"in f.objectStore(p[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function r(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var f=u.lower,p=u.upper,d=u.lowerOpen,m=u.upperOpen,b=f===void 0?p===void 0?null:e.upperBound(p,!!m):p===void 0?e.lowerBound(f,!!d):e.bound(f,p,!!d,!!m);return b}function s(u){var f=u.name;function p(b){var A=b.trans,g=b.type,v=b.keys,O=b.values,_=b.range;return new Promise(function(x,E){x=Mt(x);var T=A.objectStore(f),S=T.keyPath==null,C=g==="put"||g==="add";if(!C&&g!=="delete"&&g!=="deleteRange")throw new Error("Invalid operation type: "+g);var B=(v||O||{length:1}).length;if(v&&O&&v.length!==O.length)throw new Error("Given keys array must have same length as given values array.");if(B===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var M,D=[],N=[],P=0,X=function(k){++P,Zl(k)};if(g==="deleteRange"){if(_.type===4)return x({numFailures:P,failures:N,results:[],lastResult:void 0});_.type===3?D.push(M=T.clear()):D.push(M=T.delete(r(_)))}else{var Z=C?S?[O,v]:[O,null]:[v,null],K=Z[0],ee=Z[1];if(C)for(var J=0;J<B;++J)D.push(M=ee&&ee[J]!==void 0?T[g](K[J],ee[J]):T[g](K[J])),M.onerror=X;else for(var J=0;J<B;++J)D.push(M=T[g](K[J])),M.onerror=X}var ge=function(k){var j=k.target.result;D.forEach(function(V,H){return V.error!=null&&(N[H]=V.error)}),x({numFailures:P,failures:N,results:g==="delete"?v:D.map(function(V){return V.result}),lastResult:j})};M.onerror=function(k){X(k),ge(k)},M.onsuccess=ge})}function d(b){var A=b.trans,g=b.values,v=b.query,O=b.reverse,_=b.unique;return new Promise(function(x,E){x=Mt(x);var T=v.index,S=v.range,C=A.objectStore(f),B=T.isPrimaryKey?C:C.index(T.name),M=O?_?"prevunique":"prev":_?"nextunique":"next",D=g||!("openKeyCursor"in B)?B.openCursor(r(S),M):B.openKeyCursor(r(S),M);D.onerror=Gi(E),D.onsuccess=Mt(function(N){var P=D.result;if(!P){x(null);return}P.___id=++h5,P.done=!1;var X=P.continue.bind(P),Z=P.continuePrimaryKey;Z&&(Z=Z.bind(P));var K=P.advance.bind(P),ee=function(){throw new Error("Cursor not started")},J=function(){throw new Error("Cursor not stopped")};P.trans=A,P.stop=P.continue=P.continuePrimaryKey=P.advance=ee,P.fail=Mt(E),P.next=function(){var ge=this,k=1;return this.start(function(){return k--?ge.continue():ge.stop()}).then(function(){return ge})},P.start=function(ge){var k=new Promise(function(V,H){V=Mt(V),D.onerror=Gi(H),P.fail=H,P.stop=function(q){P.stop=P.continue=P.continuePrimaryKey=P.advance=J,V(q)}}),j=function(){if(D.result)try{ge()}catch(V){P.fail(V)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return D.onsuccess=Mt(function(V){D.onsuccess=j,j()}),P.continue=X,P.continuePrimaryKey=Z,P.advance=K,j(),k},x(P)},E)})}function m(b){return function(A){return new Promise(function(g,v){g=Mt(g);var O=A.trans,_=A.values,x=A.limit,E=A.query,T=x===1/0?void 0:x,S=E.index,C=E.range,B=O.objectStore(f),M=S.isPrimaryKey?B:B.index(S.name),D=r(C);if(x===0)return g({result:[]});if(b){var N=_?M.getAll(D,T):M.getAllKeys(D,T);N.onsuccess=function(K){return g({result:K.target.result})},N.onerror=Gi(v)}else{var P=0,X=_||!("openKeyCursor"in M)?M.openCursor(D):M.openKeyCursor(D),Z=[];X.onsuccess=function(K){var ee=X.result;if(!ee)return g({result:Z});if(Z.push(_?ee.value:ee.primaryKey),++P===x)return g({result:Z});ee.continue()},X.onerror=Gi(v)}})}}return{name:f,schema:u,mutate:p,getMany:function(b){var A=b.trans,g=b.keys;return new Promise(function(v,O){v=Mt(v);for(var _=A.objectStore(f),x=g.length,E=new Array(x),T=0,S=0,C,B=function(P){var X=P.target;(E[X._pos]=X.result)!=null,++S===T&&v(E)},M=Gi(O),D=0;D<x;++D){var N=g[D];N!=null&&(C=_.get(g[D]),C._pos=D,C.onsuccess=B,C.onerror=M,++T)}T===0&&v(E)})},get:function(b){var A=b.trans,g=b.key;return new Promise(function(v,O){v=Mt(v);var _=A.objectStore(f),x=_.get(g);x.onsuccess=function(E){return v(E.target.result)},x.onerror=Gi(O)})},query:m(l),openCursor:d,count:function(b){var A=b.query,g=b.trans,v=A.index,O=A.range;return new Promise(function(_,x){var E=g.objectStore(f),T=v.isPrimaryKey?E:E.index(v.name),S=r(O),C=S?T.count(S):T.count();C.onsuccess=Mt(function(B){return _(B.target.result)}),C.onerror=Gi(x)})}}}var o=i(n,t),a=o.schema,l=o.hasGetAll,c=a.tables.map(function(u){return s(u)}),h={};return c.forEach(function(u){return h[u.name]=u}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(u){var f=h[u];if(!f)throw new Error("Table '"+u+"' not found");return h[u]},MIN_KEY:-1/0,MAX_KEY:Kl(e),schema:a}}function f5(n,e){return e.reduce(function(t,i){var r=i.create;return ct(ct({},t),r(t))},n)}function d5(n,e,t,i){var r=t.IDBKeyRange;t.indexedDB;var s=f5(u5(e,r,i),n.dbcore);return{dbcore:s}}function D0(n,e){var t=n._novip,i=e.db,r=d5(t._middlewares,i,t._deps,e);t.core=r.dbcore,t.tables.forEach(function(s){var o=s.name;t.core.schema.tables.some(function(a){return a.name===o})&&(s.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=s.core))})}function Du(n,e,t,i){var r=n._novip;t.forEach(function(s){var o=i[s];e.forEach(function(a){var l=k0(a,s);(!l||"value"in l&&l.value===void 0)&&(a===r.Transaction.prototype||a instanceof r.Transaction?Rr(a,s,{get:function(){return this.table(s)},set:function(c){sS(this,s,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new r.Table(s,o))})})}function Tg(n,e){var t=n._novip;e.forEach(function(i){for(var r in i)i[r]instanceof t.Table&&delete i[r]})}function p5(n,e){return n._cfg.version-e._cfg.version}function m5(n,e,t,i){var r=n._dbSchema,s=n._createTransaction("readwrite",n._storeNames,r);s.create(t),s._completion.catch(i);var o=s._reject.bind(s),a=Xe.transless||Xe;gs(function(){Xe.trans=s,Xe.transless=a,e===0?(qt(r).forEach(function(l){N0(t,l,r[l].primKey,r[l].indexes)}),D0(n,t),Be.follow(function(){return n.on.populate.fire(s)}).catch(o)):g5(n,e,s,t).catch(o)})}function g5(n,e,t,i){var r=n._novip,s=[],o=r._versions,a=r._dbSchema=L0(r,r.idbdb,i),l=!1,c=o.filter(function(u){return u._cfg.version>=e});c.forEach(function(u){s.push(function(){var f=a,p=u._cfg.dbschema;Ig(r,f,i),Ig(r,p,i),a=r._dbSchema=p;var d=QS(f,p);d.add.forEach(function(O){N0(i,O[0],O[1].primKey,O[1].indexes)}),d.change.forEach(function(O){if(O.recreate)throw new Je.Upgrade("Not yet support for changing primary key");var _=i.objectStore(O.name);O.add.forEach(function(x){return Cg(_,x)}),O.change.forEach(function(x){_.deleteIndex(x.name),Cg(_,x)}),O.del.forEach(function(x){return _.deleteIndex(x)})});var m=u._cfg.contentUpgrade;if(m&&u._cfg.version>e){D0(r,i),t._memoizedTables={},l=!0;var b=cS(p);d.del.forEach(function(O){b[O]=f[O]}),Tg(r,[r.Transaction.prototype]),Du(r,[r.Transaction.prototype],qt(b),b),t.schema=b;var A=S0(m);A&&Ia();var g,v=Be.follow(function(){if(g=m(t),g&&A){var O=Qr.bind(null,null);g.then(O,O)}});return g&&typeof g.then=="function"?Be.resolve(g):v.then(function(){return g})}}),s.push(function(f){if(!l||!HM){var p=u._cfg.dbschema;O5(p,f)}Tg(r,[r.Transaction.prototype]),Du(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),t.schema=r._dbSchema})});function h(){return s.length?Be.resolve(s.shift()(t.idbtrans)).then(h):Be.resolve()}return h().then(function(){y5(a,i)})}function QS(n,e){var t={del:[],add:[],change:[]},i;for(i in n)e[i]||t.del.push(i);for(i in e){var r=n[i],s=e[i];if(!r)t.add.push([i,s]);else{var o={name:i,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||r.primKey.auto!==s.primKey.auto&&!qf)o.recreate=!0,t.change.push(o);else{var a=r.idxByName,l=s.idxByName,c=void 0;for(c in a)l[c]||o.del.push(c);for(c in l){var h=a[c],u=l[c];h?h.src!==u.src&&o.change.push(u):o.add.push(u)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}}return t}function N0(n,e,t,i){var r=n.db.createObjectStore(e,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return i.forEach(function(s){return Cg(r,s)}),r}function y5(n,e){qt(n).forEach(function(t){e.db.objectStoreNames.contains(t)||N0(e,t,n[t].primKey,n[t].indexes)})}function O5(n,e){[].slice.call(e.db.objectStoreNames).forEach(function(t){return n[t]==null&&e.db.deleteObjectStore(t)})}function Cg(n,e){n.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function L0(n,e,t){var i={},r=Yf(e.objectStoreNames,0);return r.forEach(function(s){for(var o=t.objectStore(s),a=o.keyPath,l=Sg(IS(a),a||"",!1,!1,!!o.autoIncrement,a&&typeof a!="string",!0),c=[],h=0;h<o.indexNames.length;++h){var u=o.index(o.indexNames[h]);a=u.keyPath;var f=Sg(u.name,a,!!u.unique,!!u.multiEntry,!1,a&&typeof a!="string",!1);c.push(f)}i[s]=RS(s,l,c)}),i}function b5(n,e,t){var i=n._novip;i.verno=e.version/10;var r=i._dbSchema=L0(i,e,t);i._storeNames=Yf(e.objectStoreNames,0),Du(i,[i._allTables],qt(r),r)}function v5(n,e){var t=L0(n,n.idbdb,e),i=QS(t,n._dbSchema);return!(i.add.length||i.change.some(function(r){return r.add.length||r.change.length}))}function Ig(n,e,t){for(var i=n._novip,r=t.db.objectStoreNames,s=0;s<r.length;++s){var o=r[s],a=t.objectStore(o);i._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var c=a.indexNames[l],h=a.index(c).keyPath,u=typeof h=="string"?h:"["+Yf(h).join("+")+"]";if(e[o]){var f=e[o].idxByName[u];f&&(f.name=c,delete e[o].idxByName[u],e[o].idxByName[c]=f)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Pt.WorkerGlobalScope&&Pt instanceof Pt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function w5(n){return n.split(",").map(function(e,t){e=e.trim();var i=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return Sg(i,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Tn(r),t===0)})}var A5=function(){function n(){}return n.prototype._parseStoresSpec=function(e,t){qt(e).forEach(function(i){if(e[i]!==null){var r=w5(e[i]),s=r.shift();if(s.multi)throw new Je.Schema("Primary key cannot be multi-valued");r.forEach(function(o){if(o.auto)throw new Je.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Je.Schema("Index must have a name and cannot be an empty string")}),t[i]=RS(i,s,r)}})},n.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?Bn(this._cfg.storesSource,e):e;var i=t._versions,r={},s={};return i.forEach(function(o){Bn(r,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(r,s)}),t._dbSchema=s,Tg(t,[t._allTables,t,t.Transaction.prototype]),Du(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],qt(s),s),t._storeNames=qt(s),this},n.prototype.upgrade=function(e){return this._cfg.contentUpgrade=C0(this._cfg.contentUpgrade||kt,e),this},n}();function _5(n){return Bc(A5.prototype,function(t){this.db=n,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function B0(n,e){var t=n._dbNamesDB;return t||(t=n._dbNamesDB=new W0(Kf,{addons:[],indexedDB:n,IDBKeyRange:e}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function M0(n){return n&&typeof n.databases=="function"}function x5(n){var e=n.indexedDB,t=n.IDBKeyRange;return M0(e)?Promise.resolve(e.databases()).then(function(i){return i.map(function(r){return r.name}).filter(function(r){return r!==Kf})}):B0(e,t).toCollection().primaryKeys()}function k5(n,e){var t=n.indexedDB,i=n.IDBKeyRange;!M0(t)&&e!==Kf&&B0(t,i).put({name:e}).catch(kt)}function S5(n,e){var t=n.indexedDB,i=n.IDBKeyRange;!M0(t)&&e!==Kf&&B0(t,i).delete(e).catch(kt)}function Rg(n){return gs(function(){return Xe.letThrough=!0,n()})}function E5(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(t){var i=function(){return indexedDB.databases().finally(t)};e=setInterval(i,100),i()}).finally(function(){return clearInterval(e)})}function T5(n){var e=n._state,t=n._deps.indexedDB;if(e.isBeingOpened||n.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?rn(e.dbOpenError):n});ar&&(e.openCanceller._stackHolder=yo()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var i=e.openCanceller;function r(){if(e.openCanceller!==i)throw new Je.DatabaseClosed("db.open() was cancelled")}var s=e.dbReadyResolve,o=null,a=!1;return Be.race([i,(typeof navigator=="undefined"?Be.resolve():E5()).then(function(){return new Be(function(l,c){if(r(),!t)throw new Je.MissingAPI;var h=n.name,u=e.autoSchema?t.open(h):t.open(h,Math.round(n.verno*10));if(!u)throw new Je.MissingAPI;u.onerror=Gi(c),u.onblocked=Mt(n._fireOnBlocked),u.onupgradeneeded=Mt(function(f){if(o=u.transaction,e.autoSchema&&!n._options.allowEmptyDB){u.onerror=Zl,o.abort(),u.result.close();var p=t.deleteDatabase(h);p.onsuccess=p.onerror=Mt(function(){c(new Je.NoSuchDatabase("Database "+h+" doesnt exist"))})}else{o.onerror=Gi(c);var d=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;a=d<1,n._novip.idbdb=u.result,m5(n,d/10,o,c)}},c),u.onsuccess=Mt(function(){o=null;var f=n._novip.idbdb=u.result,p=Yf(f.objectStoreNames);if(p.length>0)try{var d=f.transaction(l5(p),"readonly");e.autoSchema?b5(n,f,d):(Ig(n,n._dbSchema,d),v5(n,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),D0(n,d)}catch{}Cl.push(n),f.onversionchange=Mt(function(m){e.vcFired=!0,n.on("versionchange").fire(m)}),f.onclose=Mt(function(m){n.on("close").fire(m)}),a&&k5(n._deps,h),l()},c)})})]).then(function(){return r(),e.onReadyBeingFired=[],Be.resolve(Rg(function(){return n.on.ready.fire(n.vip)})).then(function l(){if(e.onReadyBeingFired.length>0){var c=e.onReadyBeingFired.reduce(C0,kt);return e.onReadyBeingFired=[],Be.resolve(Rg(function(){return c(n.vip)})).then(l)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return n}).catch(function(l){e.dbOpenError=l;try{o&&o.abort()}catch{}return i===e.openCanceller&&n._close(),rn(l)}).finally(function(){e.openComplete=!0,s()})}function Qg(n){var e=function(o){return n.next(o)},t=function(o){return n.throw(o)},i=s(e),r=s(t);function s(o){return function(a){var l=o(a),c=l.value;return l.done?c:!c||typeof c.then!="function"?Tn(c)?Promise.all(c).then(i,r):i(c):c.then(i,r)}}return s(e)()}function C5(n,e,t){var i=arguments.length;if(i<2)throw new Je.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];t=r.pop();var s=hS(r);return[n,s,t]}function PS(n,e,t,i,r){return Be.resolve().then(function(){var s=Xe.transless||Xe,o=n._createTransaction(e,t,n._dbSchema,i),a={trans:o,transless:s};if(i)o.idbtrans=i.idbtrans;else try{o.create(),n._state.PR1398_maxLoop=3}catch(u){return u.name===T0.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(function(){return PS(n,e,t,null,r)})):rn(u)}var l=S0(r);l&&Ia();var c,h=Be.follow(function(){if(c=r.call(o,o),c)if(l){var u=Qr.bind(null,null);c.then(u,u)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Qg(c))},a);return(c&&typeof c.then=="function"?Be.resolve(c).then(function(u){return o.active?u:rn(new Je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return c})).then(function(u){return i&&o._resolve(),o._completion.then(function(){return u})}).catch(function(u){return o._reject(u),rn(u)})})}function Th(n,e,t){for(var i=Tn(n)?n.slice():[n],r=0;r<t;++r)i.push(e);return i}function I5(n){return ct(ct({},n),{table:function(e){var t=n.table(e),i=t.schema,r={},s=[];function o(m,b,A){var g=Il(m),v=r[g]=r[g]||[],O=m==null?0:typeof m=="string"?1:m.length,_=b>0,x=ct(ct({},A),{isVirtual:_,keyTail:b,keyLength:O,extractKey:Eg(m),unique:!_&&A.unique});if(v.push(x),x.isPrimaryKey||s.push(x),O>1){var E=O===2?m[0]:m.slice(0,O-1);o(E,b+1,A)}return v.sort(function(T,S){return T.keyTail-S.keyTail}),x}var a=o(i.primaryKey.keyPath,0,i.primaryKey);r[":id"]=[a];for(var l=0,c=i.indexes;l<c.length;l++){var h=c[l];o(h.keyPath,0,h)}function u(m){var b=r[Il(m)];return b&&b[0]}function f(m,b){return{type:m.type===1?2:m.type,lower:Th(m.lower,m.lowerOpen?n.MAX_KEY:n.MIN_KEY,b),lowerOpen:!0,upper:Th(m.upper,m.upperOpen?n.MIN_KEY:n.MAX_KEY,b),upperOpen:!0}}function p(m){var b=m.query.index;return b.isVirtual?ct(ct({},m),{query:{index:b,range:f(m.query.range,b.keyTail)}}):m}var d=ct(ct({},t),{schema:ct(ct({},i),{primaryKey:a,indexes:s,getIndexByKeyPath:u}),count:function(m){return t.count(p(m))},query:function(m){return t.query(p(m))},openCursor:function(m){var b=m.query.index,A=b.keyTail,g=b.isVirtual,v=b.keyLength;if(!g)return t.openCursor(m);function O(_){function x(T){T!=null?_.continue(Th(T,m.reverse?n.MAX_KEY:n.MIN_KEY,A)):m.unique?_.continue(_.key.slice(0,v).concat(m.reverse?n.MIN_KEY:n.MAX_KEY,A)):_.continue()}var E=Object.create(_,{continue:{value:x},continuePrimaryKey:{value:function(T,S){_.continuePrimaryKey(Th(T,n.MAX_KEY,A),S)}},primaryKey:{get:function(){return _.primaryKey}},key:{get:function(){var T=_.key;return v===1?T[0]:T.slice(0,v)}},value:{get:function(){return _.value}}});return E}return t.openCursor(p(m)).then(function(_){return _&&O(_)})}});return d}})}var R5={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:I5};function $0(n,e,t,i){return t=t||{},i=i||"",qt(n).forEach(function(r){if(!si(e,r))t[i+r]=void 0;else{var s=n[r],o=e[r];if(typeof s=="object"&&typeof o=="object"&&s&&o){var a=dg(s),l=dg(o);a!==l?t[i+r]=e[r]:a==="Object"?$0(s,o,t,i+r+"."):s!==o&&(t[i+r]=e[r])}else s!==o&&(t[i+r]=e[r])}}),qt(e).forEach(function(r){si(n,r)||(t[i+r]=e[r])}),t}function Q5(n,e){return e.type==="delete"?e.keys:e.keys||e.values.map(n.extractKey)}var P5={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return ct(ct({},n),{table:function(e){var t=n.table(e),i=t.schema.primaryKey,r=ct(ct({},t),{mutate:function(s){var o=Xe.trans,a=o.table(e).hook,l=a.deleting,c=a.creating,h=a.updating;switch(s.type){case"add":if(c.fire===kt)break;return o._promise("readwrite",function(){return u(s)},!0);case"put":if(c.fire===kt&&h.fire===kt)break;return o._promise("readwrite",function(){return u(s)},!0);case"delete":if(l.fire===kt)break;return o._promise("readwrite",function(){return u(s)},!0);case"deleteRange":if(l.fire===kt)break;return o._promise("readwrite",function(){return f(s)},!0)}return t.mutate(s);function u(d){var m=Xe.trans,b=d.keys||Q5(i,d);if(!b)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?ct(ct({},d),{keys:b}):ct({},d),d.type!=="delete"&&(d.values=ug([],d.values,!0)),d.keys&&(d.keys=ug([],d.keys,!0)),D5(t,d,b).then(function(A){var g=b.map(function(v,O){var _=A[O],x={onerror:null,onsuccess:null};if(d.type==="delete")l.fire.call(x,v,_,m);else if(d.type==="add"||_===void 0){var E=c.fire.call(x,v,d.values[O],m);v==null&&E!=null&&(v=E,d.keys[O]=v,i.outbound||Li(d.values[O],i.keyPath,v))}else{var T=$0(_,d.values[O]),S=h.fire.call(x,T,v,_,m);if(S){var C=d.values[O];Object.keys(S).forEach(function(B){si(C,B)?C[B]=S[B]:Li(C,B,S[B])})}}return x});return t.mutate(d).then(function(v){for(var O=v.failures,_=v.results,x=v.numFailures,E=v.lastResult,T=0;T<b.length;++T){var S=_?_[T]:b[T],C=g[T];S==null?C.onerror&&C.onerror(O[T]):C.onsuccess&&C.onsuccess(d.type==="put"&&A[T]?d.values[T]:S)}return{failures:O,results:_,numFailures:x,lastResult:E}}).catch(function(v){return g.forEach(function(O){return O.onerror&&O.onerror(v)}),Promise.reject(v)})})}function f(d){return p(d.trans,d.range,1e4)}function p(d,m,b){return t.query({trans:d,values:!1,query:{index:i,range:m},limit:b}).then(function(A){var g=A.result;return u({type:"delete",keys:g,trans:d}).then(function(v){return v.numFailures>0?Promise.reject(v.failures[0]):g.length<b?{failures:[],numFailures:0,lastResult:void 0}:p(d,ct(ct({},m),{lower:g[g.length-1],lowerOpen:!0}),b)})})}}});return r}})}};function D5(n,e,t){return e.type==="add"?Promise.resolve([]):n.getMany({trans:e.trans,keys:t,cache:"immutable"})}function DS(n,e,t){try{if(!e||e.keys.length<n.length)return null;for(var i=[],r=0,s=0;r<e.keys.length&&s<n.length;++r)Qn(e.keys[r],n[s])===0&&(i.push(t?Qc(e.values[r]):e.values[r]),++s);return i.length===n.length?i:null}catch{return null}}var N5={stack:"dbcore",level:-1,create:function(n){return{table:function(e){var t=n.table(e);return ct(ct({},t),{getMany:function(i){if(!i.cache)return t.getMany(i);var r=DS(i.keys,i.trans._cache,i.cache==="clone");return r?Be.resolve(r):t.getMany(i).then(function(s){return i.trans._cache={keys:i.keys,values:i.cache==="clone"?Qc(s):s},s})},mutate:function(i){return i.type!=="add"&&(i.trans._cache=null),t.mutate(i)}})}}}},Zp;function F0(n){return!("from"in n)}var mr=function(n,e){if(this)Bn(this,arguments.length?{d:1,from:n,to:arguments.length>1?e:n}:{d:0});else{var t=new mr;return n&&"d"in n&&Bn(t,n),t}};sa(mr.prototype,(Zp={add:function(n){return Nu(this,n),this},addKey:function(n){return Jl(this,n,n),this},addKeys:function(n){var e=this;return n.forEach(function(t){return Jl(e,t,t)}),this}},Zp[pg]=function(){return Pg(this)},Zp));function Jl(n,e,t){var i=Qn(e,t);if(!isNaN(i)){if(i>0)throw RangeError();if(F0(n))return Bn(n,{from:e,to:t,d:1});var r=n.l,s=n.r;if(Qn(t,n.from)<0)return r?Jl(r,e,t):n.l={from:e,to:t,d:1,l:null,r:null},rA(n);if(Qn(e,n.to)>0)return s?Jl(s,e,t):n.r={from:e,to:t,d:1,l:null,r:null},rA(n);Qn(e,n.from)<0&&(n.from=e,n.l=null,n.d=s?s.d+1:1),Qn(t,n.to)>0&&(n.to=t,n.r=null,n.d=n.l?n.l.d+1:1);var o=!n.r;r&&!n.l&&Nu(n,r),s&&o&&Nu(n,s)}}function Nu(n,e){function t(i,r){var s=r.from,o=r.to,a=r.l,l=r.r;Jl(i,s,o),a&&t(i,a),l&&t(i,l)}F0(e)||t(n,e)}function L5(n,e){var t=Pg(e),i=t.next();if(i.done)return!1;for(var r=i.value,s=Pg(n),o=s.next(r.from),a=o.value;!i.done&&!o.done;){if(Qn(a.from,r.to)<=0&&Qn(a.to,r.from)>=0)return!0;Qn(r.from,a.from)<0?r=(i=t.next(a.from)).value:a=(o=s.next(r.from)).value}return!1}function Pg(n){var e=F0(n)?null:{s:0,n};return{next:function(t){for(var i=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,i)for(;e.n.l&&Qn(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!i||Qn(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function rA(n){var e,t,i=(((e=n.r)===null||e===void 0?void 0:e.d)||0)-(((t=n.l)===null||t===void 0?void 0:t.d)||0),r=i>1?"r":i<-1?"l":"";if(r){var s=r==="r"?"l":"r",o=ct({},n),a=n[r];n.from=a.from,n.to=a.to,n[r]=a[r],o[r]=a[s],n[s]=o,o.d=sA(o)}n.d=sA(n)}function sA(n){var e=n.r,t=n.l;return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}var B5={stack:"dbcore",level:0,create:function(n){var e=n.schema.name,t=new mr(n.MIN_KEY,n.MAX_KEY);return ct(ct({},n),{table:function(i){var r=n.table(i),s=r.schema,o=s.primaryKey,a=o.extractKey,l=o.outbound,c=ct(ct({},r),{mutate:function(f){var p=f.trans,d=p.mutatedParts||(p.mutatedParts={}),m=function(E){var T="idb://"+e+"/"+i+"/"+E;return d[T]||(d[T]=new mr)},b=m(""),A=m(":dels"),g=f.type,v=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[],O=v[0],_=v[1],x=f.trans._cache;return r.mutate(f).then(function(E){if(Tn(O)){g!=="delete"&&(O=E.results),b.addKeys(O);var T=DS(O,x);!T&&g!=="add"&&A.addKeys(O),(T||_)&&M5(m,s,T,_)}else if(O){var S={from:O.lower,to:O.upper};A.add(S),b.add(S)}else b.add(t),A.add(t),s.indexes.forEach(function(C){return m(C.name).add(t)});return E})}}),h=function(f){var p,d,m=f.query,b=m.index,A=m.range;return[b,new mr((p=A.lower)!==null&&p!==void 0?p:n.MIN_KEY,(d=A.upper)!==null&&d!==void 0?d:n.MAX_KEY)]},u={get:function(f){return[o,new mr(f.key)]},getMany:function(f){return[o,new mr().addKeys(f.keys)]},count:h,query:h,openCursor:h};return qt(u).forEach(function(f){c[f]=function(p){var d=Xe.subscr;if(d){var m=function(x){var E="idb://"+e+"/"+i+"/"+x;return d[E]||(d[E]=new mr)},b=m(""),A=m(":dels"),g=u[f](p),v=g[0],O=g[1];if(m(v.name||"").add(O),!v.isPrimaryKey)if(f==="count")A.add(t);else{var _=f==="query"&&l&&p.values&&r.query(ct(ct({},p),{values:!1}));return r[f].apply(this,arguments).then(function(x){if(f==="query"){if(l&&p.values)return _.then(function(C){var B=C.result;return b.addKeys(B),x});var E=p.values?x.result.map(a):x.result;p.values?b.addKeys(E):A.addKeys(E)}else if(f==="openCursor"){var T=x,S=p.values;return T&&Object.create(T,{key:{get:function(){return A.addKey(T.primaryKey),T.key}},primaryKey:{get:function(){var C=T.primaryKey;return A.addKey(C),C}},value:{get:function(){return S&&b.addKey(T.primaryKey),T.value}}})}return x})}}return r[f].apply(this,arguments)}}),c}})}};function M5(n,e,t,i){function r(s){var o=n(s.name||"");function a(c){return c!=null?s.extractKey(c):null}var l=function(c){return s.multiEntry&&Tn(c)?c.forEach(function(h){return o.addKey(h)}):o.addKey(c)};(t||i).forEach(function(c,h){var u=t&&a(t[h]),f=i&&a(i[h]);Qn(u,f)!==0&&(u!=null&&l(u),f!=null&&l(f))})}e.indexes.forEach(r)}var W0=function(){function n(e,t){var i=this;this._middlewares={},this.verno=0;var r=n.dependencies;this._options=t=ct({addons:n.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};var s=t.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:kt,dbReadyPromise:null,cancelOpen:kt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new Be(function(a){o.dbReadyResolve=a}),o.openCanceller=new Be(function(a,l){o.cancelOpen=l}),this._state=o,this.name=e,this.on=Lc(this,"populate","blocked","versionchange","close",{ready:[C0,kt]}),this.on.ready.subscribe=oS(this.on.ready.subscribe,function(a){return function(l,c){n.vip(function(){var h=i._state;if(h.openComplete)h.dbOpenError||Be.resolve().then(l),c&&a(l);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(l),c&&a(l);else{a(l);var u=i;c||a(function f(){u.on.ready.unsubscribe(l),u.on.ready.unsubscribe(f)})}})}}),this.Collection=JM(this),this.Table=XM(this),this.Transaction=a5(this),this.Version=_5(this),this.WhereClause=s5(this),this.on("versionchange",function(a){a.newVersion>0?console.warn("Another connection wants to upgrade database '"+i.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+i.name+"'. Closing db now to resume the delete request."),i.close()}),this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?console.warn("Dexie.delete('"+i.name+"') was blocked"):console.warn("Upgrade '"+i.name+"' blocked by other connection holding version "+a.oldVersion/10)}),this._maxKey=Kl(t.IDBKeyRange),this._createTransaction=function(a,l,c,h){return new i.Transaction(a,l,c,i._options.chromeTransactionDurability,h)},this._fireOnBlocked=function(a){i.on("blocked").fire(a),Cl.filter(function(l){return l.name===i.name&&l!==i&&!l._state.vcFired}).map(function(l){return l.on("versionchange").fire(a)})},this.use(R5),this.use(P5),this.use(B5),this.use(N5),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(function(a){return a(i)})}return n.prototype.version=function(e){if(isNaN(e)||e<.1)throw new Je.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new Je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,i=t.filter(function(r){return r._cfg.version===e})[0];return i||(i=new this.Version(e),t.push(i),t.sort(p5),i.stores({}),this._state.autoSchema=!1,i)},n.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Xe.letThrough||this._vip)?e():new Be(function(i,r){if(t._state.openComplete)return r(new Je.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen){r(new Je.DatabaseClosed);return}t.open().catch(kt)}t._state.dbReadyPromise.then(i,r)}).then(e)},n.prototype.use=function(e){var t=e.stack,i=e.create,r=e.level,s=e.name;s&&this.unuse({stack:t,name:s});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:i,level:r==null?10:r,name:s}),o.sort(function(a,l){return a.level-l.level}),this},n.prototype.unuse=function(e){var t=e.stack,i=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(s){return r?s.create!==r:i?s.name!==i:!1})),this},n.prototype.open=function(){return T5(this)},n.prototype._close=function(){var e=this._state,t=Cl.indexOf(this);if(t>=0&&Cl.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new Be(function(i){e.dbReadyResolve=i}),e.openCanceller=new Be(function(i,r){e.cancelOpen=r})},n.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Je.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},n.prototype.delete=function(){var e=this,t=arguments.length>0,i=this._state;return new Be(function(r,s){var o=function(){e.close();var a=e._deps.indexedDB.deleteDatabase(e.name);a.onsuccess=Mt(function(){S5(e._deps,e.name),r()}),a.onerror=Gi(s),a.onblocked=e._fireOnBlocked};if(t)throw new Je.InvalidArgument("Arguments not allowed in db.delete()");i.isBeingOpened?i.dbReadyPromise.then(o):o()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var e=this;return qt(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var e=C5.apply(this,arguments);return this._transaction.apply(this,e)},n.prototype._transaction=function(e,t,i){var r=this,s=Xe.trans;(!s||s.db!==this||e.indexOf("!")!==-1)&&(s=null);var o=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var a,l;try{if(l=t.map(function(h){var u=h instanceof r.Table?h.name:h;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===Hp)a=Hp;else if(e=="rw"||e==Gp)a=Gp;else throw new Je.InvalidArgument("Invalid transaction mode: "+e);if(s){if(s.mode===Hp&&a===Gp)if(o)s=null;else throw new Je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s&&l.forEach(function(h){if(s&&s.storeNames.indexOf(h)===-1)if(o)s=null;else throw new Je.SubTransaction("Table "+h+" not included in parent transaction.")}),o&&s&&!s.active&&(s=null)}}catch(h){return s?s._promise(null,function(u,f){f(h)}):rn(h)}var c=PS.bind(null,this,a,l,s,i);return s?s._promise(a,c,"lock"):Xe.trans?Ra(Xe.transless,function(){return r._whenReady(c)}):this._whenReady(c)},n.prototype.table=function(e){if(!si(this._allTables,e))throw new Je.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},n}(),$5=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",F5=function(){function n(e){this._subscribe=e}return n.prototype.subscribe=function(e,t,i){return this._subscribe(!e||typeof e=="function"?{next:e,error:t,complete:i}:e)},n.prototype[$5]=function(){return this},n}();function NS(n,e){return qt(e).forEach(function(t){var i=n[t]||(n[t]=new mr);Nu(i,e[t])}),n}function W5(n){return new F5(function(e){var t=S0(n);function i(p){t&&Ia();var d=function(){return gs(n,{subscr:p,trans:null})},m=Xe.trans?Ra(Xe.transless,d):d();return t&&m.then(Qr,Qr),m}var r=!1,s={},o={},a={get closed(){return r},unsubscribe:function(){r=!0,Os.storagemutated.unsubscribe(u)}};e.start&&e.start(a);var l=!1,c=!1;function h(){return qt(o).some(function(p){return s[p]&&L5(s[p],o[p])})}var u=function(p){NS(s,p),h()&&f()},f=function(){if(!(l||r)){s={};var p={},d=i(p);c||(Os(ql,u),c=!0),l=!0,Promise.resolve(d).then(function(m){l=!1,!r&&(h()?f():(s={},o=p,e.next&&e.next(m)))},function(m){l=!1,e.error&&e.error(m),a.unsubscribe()})}};return f(),a})}var Dg;try{Dg={indexedDB:Pt.indexedDB||Pt.mozIndexedDB||Pt.webkitIndexedDB||Pt.msIndexedDB,IDBKeyRange:Pt.IDBKeyRange||Pt.webkitIDBKeyRange}}catch{Dg={indexedDB:null,IDBKeyRange:null}}var Us=W0;sa(Us,ct(ct({},Zf),{delete:function(n){var e=new Us(n,{addons:[]});return e.delete()},exists:function(n){return new Us(n,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return x5(Us.dependencies).then(n)}catch{return rn(new Je.MissingAPI)}},defineClass:function(){function n(e){Bn(this,e)}return n},ignoreTransaction:function(n){return Xe.trans?Ra(Xe.transless,n):n()},vip:Rg,async:function(n){return function(){try{var e=Qg(n.apply(this,arguments));return!e||typeof e.then!="function"?Be.resolve(e):e}catch(t){return rn(t)}}},spawn:function(n,e,t){try{var i=Qg(n.apply(t,e||[]));return!i||typeof i.then!="function"?Be.resolve(i):i}catch(r){return rn(r)}},currentTransaction:{get:function(){return Xe.trans||null}},waitFor:function(n,e){var t=Be.resolve(typeof n=="function"?Us.ignoreTransaction(n):n).timeout(e||6e4);return Xe.trans?Xe.trans.waitFor(t):t},Promise:Be,debug:{get:function(){return ar},set:function(n){fS(n,n==="dexie"?function(){return!0}:SS)}},derive:Ta,extend:Bn,props:sa,override:oS,Events:Lc,on:Os,liveQuery:W5,extendObservabilitySet:NS,getByKeyPath:kr,setByKeyPath:Li,delByKeyPath:bM,shallowClone:cS,deepClone:Qc,getObjectDiff:$0,cmp:Qn,asap:aS,minKey:kg,addons:[],connections:Cl,errnames:T0,dependencies:Dg,semVer:Kw,version:Kw.split(".").map(function(n){return parseInt(n)}).reduce(function(n,e,t){return n+e/Math.pow(10,t*2)})}));Us.maxKey=Kl(Us.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(Os(ql,function(n){if(!_r){var e;qf?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ts,!0,!0,n)):e=new CustomEvent(ts,{detail:n}),_r=!0,dispatchEvent(e),_r=!1}}),addEventListener(ts,function(n){var e=n.detail;_r||Lu(e)}));function Lu(n){var e=_r;try{_r=!0,Os.storagemutated.fire(n)}finally{_r=e}}var _r=!1;if(typeof BroadcastChannel!="undefined"){var oA=new BroadcastChannel(ts);Os(ql,function(n){_r||oA.postMessage(n)}),oA.onmessage=function(n){n.data&&Lu(n.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){Os(ql,function(n){try{_r||(typeof localStorage!="undefined"&&localStorage.setItem(ts,JSON.stringify({trig:Math.random(),changedParts:n})),typeof self.clients=="object"&&ug([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:ts,changedParts:n})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(n){if(n.key===ts){var e=JSON.parse(n.newValue);e&&Lu(e.changedParts)}});var aA=self.document&&navigator.serviceWorker;aA&&aA.addEventListener("message",U5)}function U5(n){var e=n.data;e&&e.type===ts&&Lu(e.changedParts)}Be.rejectionMapper=TM;fS(ar,SS);var LS={},z5=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),BS="%[a-f0-9]{2}",lA=new RegExp(BS,"gi"),cA=new RegExp("("+BS+")+","gi");function Ng(n,e){try{return decodeURIComponent(n.join(""))}catch{}if(n.length===1)return n;e=e||1;var t=n.slice(0,e),i=n.slice(e);return Array.prototype.concat.call([],Ng(t),Ng(i))}function j5(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(lA),t=1;t<e.length;t++)n=Ng(e,t).join(""),e=n.match(lA);return n}}function H5(n){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=cA.exec(n);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=j5(t[0]);i!==t[0]&&(e[t[0]]=i)}t=cA.exec(n)}e["%C2"]="\uFFFD";for(var r=Object.keys(e),s=0;s<r.length;s++){var o=r[s];n=n.replace(new RegExp(o,"g"),e[o])}return n}var G5=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return H5(n)}},V5=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]},X5=function(n,e){for(var t={},i=Object.keys(n),r=Array.isArray(e),s=0;s<i.length;s++){var o=i[s],a=n[o];(r?e.indexOf(o)!==-1:e(o,a,n))&&(t[o]=a)}return t};(function(n){const e=z5,t=G5,i=V5,r=X5,s=g=>g==null,o=Symbol("encodeFragmentIdentifier");function a(g){switch(g.arrayFormat){case"index":return v=>(O,_)=>{const x=O.length;return _===void 0||g.skipNull&&_===null||g.skipEmptyString&&_===""?O:_===null?[...O,[h(v,g),"[",x,"]"].join("")]:[...O,[h(v,g),"[",h(x,g),"]=",h(_,g)].join("")]};case"bracket":return v=>(O,_)=>_===void 0||g.skipNull&&_===null||g.skipEmptyString&&_===""?O:_===null?[...O,[h(v,g),"[]"].join("")]:[...O,[h(v,g),"[]=",h(_,g)].join("")];case"colon-list-separator":return v=>(O,_)=>_===void 0||g.skipNull&&_===null||g.skipEmptyString&&_===""?O:_===null?[...O,[h(v,g),":list="].join("")]:[...O,[h(v,g),":list=",h(_,g)].join("")];case"comma":case"separator":case"bracket-separator":{const v=g.arrayFormat==="bracket-separator"?"[]=":"=";return O=>(_,x)=>x===void 0||g.skipNull&&x===null||g.skipEmptyString&&x===""?_:(x=x===null?"":x,_.length===0?[[h(O,g),v,h(x,g)].join("")]:[[_,h(x,g)].join(g.arrayFormatSeparator)])}default:return v=>(O,_)=>_===void 0||g.skipNull&&_===null||g.skipEmptyString&&_===""?O:_===null?[...O,h(v,g)]:[...O,[h(v,g),"=",h(_,g)].join("")]}}function l(g){let v;switch(g.arrayFormat){case"index":return(O,_,x)=>{if(v=/\[(\d*)\]$/.exec(O),O=O.replace(/\[\d*\]$/,""),!v){x[O]=_;return}x[O]===void 0&&(x[O]={}),x[O][v[1]]=_};case"bracket":return(O,_,x)=>{if(v=/(\[\])$/.exec(O),O=O.replace(/\[\]$/,""),!v){x[O]=_;return}if(x[O]===void 0){x[O]=[_];return}x[O]=[].concat(x[O],_)};case"colon-list-separator":return(O,_,x)=>{if(v=/(:list)$/.exec(O),O=O.replace(/:list$/,""),!v){x[O]=_;return}if(x[O]===void 0){x[O]=[_];return}x[O]=[].concat(x[O],_)};case"comma":case"separator":return(O,_,x)=>{const E=typeof _=="string"&&_.includes(g.arrayFormatSeparator),T=typeof _=="string"&&!E&&u(_,g).includes(g.arrayFormatSeparator);_=T?u(_,g):_;const S=E||T?_.split(g.arrayFormatSeparator).map(C=>u(C,g)):_===null?_:u(_,g);x[O]=S};case"bracket-separator":return(O,_,x)=>{const E=/(\[\])$/.test(O);if(O=O.replace(/\[\]$/,""),!E){x[O]=_&&u(_,g);return}const T=_===null?[]:_.split(g.arrayFormatSeparator).map(S=>u(S,g));if(x[O]===void 0){x[O]=T;return}x[O]=[].concat(x[O],T)};default:return(O,_,x)=>{if(x[O]===void 0){x[O]=_;return}x[O]=[].concat(x[O],_)}}}function c(g){if(typeof g!="string"||g.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function h(g,v){return v.encode?v.strict?e(g):encodeURIComponent(g):g}function u(g,v){return v.decode?t(g):g}function f(g){return Array.isArray(g)?g.sort():typeof g=="object"?f(Object.keys(g)).sort((v,O)=>Number(v)-Number(O)).map(v=>g[v]):g}function p(g){const v=g.indexOf("#");return v!==-1&&(g=g.slice(0,v)),g}function d(g){let v="";const O=g.indexOf("#");return O!==-1&&(v=g.slice(O)),v}function m(g){g=p(g);const v=g.indexOf("?");return v===-1?"":g.slice(v+1)}function b(g,v){return v.parseNumbers&&!Number.isNaN(Number(g))&&typeof g=="string"&&g.trim()!==""?g=Number(g):v.parseBooleans&&g!==null&&(g.toLowerCase()==="true"||g.toLowerCase()==="false")&&(g=g.toLowerCase()==="true"),g}function A(g,v){v=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},v),c(v.arrayFormatSeparator);const O=l(v),_=Object.create(null);if(typeof g!="string"||(g=g.trim().replace(/^[?#&]/,""),!g))return _;for(const x of g.split("&")){if(x==="")continue;let[E,T]=i(v.decode?x.replace(/\+/g," "):x,"=");T=T===void 0?null:["comma","separator","bracket-separator"].includes(v.arrayFormat)?T:u(T,v),O(u(E,v),T,_)}for(const x of Object.keys(_)){const E=_[x];if(typeof E=="object"&&E!==null)for(const T of Object.keys(E))E[T]=b(E[T],v);else _[x]=b(E,v)}return v.sort===!1?_:(v.sort===!0?Object.keys(_).sort():Object.keys(_).sort(v.sort)).reduce((x,E)=>{const T=_[E];return Boolean(T)&&typeof T=="object"&&!Array.isArray(T)?x[E]=f(T):x[E]=T,x},Object.create(null))}n.extract=m,n.parse=A,n.stringify=(g,v)=>{if(!g)return"";v=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},v),c(v.arrayFormatSeparator);const O=T=>v.skipNull&&s(g[T])||v.skipEmptyString&&g[T]==="",_=a(v),x={};for(const T of Object.keys(g))O(T)||(x[T]=g[T]);const E=Object.keys(x);return v.sort!==!1&&E.sort(v.sort),E.map(T=>{const S=g[T];return S===void 0?"":S===null?h(T,v):Array.isArray(S)?S.length===0&&v.arrayFormat==="bracket-separator"?h(T,v)+"[]":S.reduce(_(T),[]).join("&"):h(T,v)+"="+h(S,v)}).filter(T=>T.length>0).join("&")},n.parseUrl=(g,v)=>{v=Object.assign({decode:!0},v);const[O,_]=i(g,"#");return Object.assign({url:O.split("?")[0]||"",query:A(m(g),v)},v&&v.parseFragmentIdentifier&&_?{fragmentIdentifier:u(_,v)}:{})},n.stringifyUrl=(g,v)=>{v=Object.assign({encode:!0,strict:!0,[o]:!0},v);const O=p(g.url).split("?")[0]||"",_=n.extract(g.url),x=n.parse(_,{sort:!1}),E=Object.assign(x,g.query);let T=n.stringify(E,v);T&&(T=`?${T}`);let S=d(g.url);return g.fragmentIdentifier&&(S=`#${v[o]?h(g.fragmentIdentifier,v):g.fragmentIdentifier}`),`${O}${T}${S}`},n.pick=(g,v,O)=>{O=Object.assign({parseFragmentIdentifier:!0,[o]:!1},O);const{url:_,query:x,fragmentIdentifier:E}=n.parseUrl(g,O);return n.stringifyUrl({url:_,query:r(x,v),fragmentIdentifier:E},O)},n.exclude=(g,v,O)=>{const _=Array.isArray(v)?x=>!v.includes(x):(x,E)=>!v(x,E);return n.pick(g,_,O)}})(LS);const U0=(n,e=null)=>{let t,i=e;const{subscribe:r,set:s,update:o}=Lt(e),a=()=>(clearTimeout(t),s(i),i);return{subscribe:r,flush:a,get:a,set:l=>{i=l,a()},lazySet:l=>{i=l,clearTimeout(t),t=setTimeout(()=>{s(i)},n)}}},Mc=Lt(!1),At=U0(100,""),Or={},Gn=xi(At,n=>(Object.assign(Or,v0(n)),Or));class Ot{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Yi.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Yi.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Rl(this),s=new Rl(e);for(let o=t,a=t;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Rl(this,e)}iterRange(e,t=this.length){return new MS(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new $S(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ot.empty:e.length<=32?new Yt(e):Yi.from(Yt.split(e,[]))}}class Yt extends Ot{constructor(e,t=Y5(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((t?i:a)>=e)return new Z5(r,a,i,o);r=a+1,i++}}decompose(e,t,i,r){let s=e<=0&&t>=this.length?this:new Yt(hA(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=fu(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Yt(a,o.length+s.length));else{let l=a.length>>1;i.push(new Yt(a.slice(0,l)),new Yt(a.slice(l)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Yt))return super.replace(e,t,i);let r=fu(this.text,fu(i.text,hA(this.text,0,e)),t),s=this.length+i.length-(t-e);return r.length<=32?new Yt(r,s):Yi.from(Yt.split(r,[]),s)}sliceString(e,t=this.length,i=`
`){let r="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&t>s&&(r+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(t.push(new Yt(i,r)),i=[],r=-1);return r>-1&&t.push(new Yt(i,r)),t}}class Yi extends Ot{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,i,r);r=a+1,i=l+1}}decompose(e,t,i,r){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let c=r&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!c?i.push(a):a.decompose(e-o,t-o,i,c)}o=l+1}}replace(e,t,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let h=this.children.slice();return h[r]=l,new Yi(h,this.length-(t-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&t>o&&(r+=a.sliceString(e-o,t-o,i)),o=l+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Yi))return 0;let i=0,[r,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,t);i+=l.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let d of e)d.flatten(p);return new Yt(p,t)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,h=[];function u(p){let d;if(p.lines>s&&p instanceof Yi)for(let m of p.children)u(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof Yt&&l&&(d=h[h.length-1])instanceof Yt&&p.lines+d.lines<=32?(l+=p.lines,c+=p.length+1,h[h.length-1]=new Yt(d.text.concat(p.text),d.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,h.push(p))}function f(){l!=0&&(a.push(h.length==1?h[0]:Yi.from(h,c)),c=-1,l=h.length=0)}for(let p of e)u(p);return f(),a.length==1?a[0]:new Yi(a,t)}}Ot.empty=new Yt([""],0);function Y5(n){let e=-1;for(let t of n)e+=t.length+1;return e}function fu(n,e,t=0,i=1e9){for(let r=0,s=0,o=!0;s<n.length&&r<=i;s++){let a=n[s],l=r+a.length;l>=t&&(l>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function hA(n,e,t){return fu(n,[""],e,t)}class Rl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Yt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Yt?r.text.length:r.children.length;if(o==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Yt){let l=r.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Yt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class MS{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Rl(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class $S{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Ot.prototype[Symbol.iterator]=function(){return this.iter()},Rl.prototype[Symbol.iterator]=MS.prototype[Symbol.iterator]=$S.prototype[Symbol.iterator]=function(){return this});class Z5{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}let Vo="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Vo.length;n++)Vo[n]+=Vo[n-1];function q5(n){for(let e=1;e<Vo.length;e+=2)if(Vo[e]>n)return Vo[e-1]<=n;return!1}function uA(n){return n>=127462&&n<=127487}const fA=8205;function ni(n,e,t=!0,i=!0){return(t?FS:K5)(n,e,i)}function FS(n,e,t){if(e==n.length)return e;e&&WS(n.charCodeAt(e))&&US(n.charCodeAt(e-1))&&e--;let i=Sn(n,e);for(e+=di(i);e<n.length;){let r=Sn(n,e);if(i==fA||r==fA||t&&q5(r))e+=di(r),i=r;else if(uA(r)){let s=0,o=e-2;for(;o>=0&&uA(Sn(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function K5(n,e,t){for(;e>0;){let i=FS(n,e-2,t);if(i<e)return i;e--}return 0}function WS(n){return n>=56320&&n<57344}function US(n){return n>=55296&&n<56320}function Sn(n,e){let t=n.charCodeAt(e);if(!US(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return WS(i)?(t-55296<<10)+(i-56320)+65536:t}function z0(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function di(n){return n<65536?1:2}const Lg=/\r\n?|\n/;var wn=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(wn||(wn={}));class er{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,t=!1){Bg(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new er(e)}composeDesc(e){return this.empty?e:e.empty?this:zS(this,e)}mapDesc(e,t=!1){return e.empty?this:Mg(this,e,t)}mapPos(e,t=-1,i=wn.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=wn.Simple&&c>=e&&(i==wn.TrackDel&&r<e&&c>e||i==wn.TrackBefore&&r<e||i==wn.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!a)return e==r||t<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new er(e)}static create(e){return new er(e)}}class en extends er{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Bg(this,(t,i,r,s,o)=>e=e.replace(r,r+(i-t),o),!1),e}mapDesc(e,t=!1){return Mg(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,s=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(Ot.empty);i.push(o?e.slice(s,s+o):Ot.empty)}s+=o}return new en(t,i)}compose(e){return this.empty?e:e.empty?this:zS(this,e,!0)}map(e,t=!1){return e.empty?this:Mg(this,e,t,!0)}iterChanges(e,t=!1){Bg(this,e,t)}get desc(){return er.create(this.sections)}filter(e){let t=[],i=[],r=[],s=new ec(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,l-a);Rn(r,h,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;Rn(t,h,u),u>0&&Gs(i,t,s.text),s.forward(h),a+=h}let c=e[o++];for(;a<c;){if(s.done)break e;let h=Math.min(s.len,c-a);Rn(t,h,-1),Rn(r,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),a+=h}}return{changes:new en(t,i),filtered:er.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],s=[],o=0,a=null;function l(h=!1){if(!h&&!r.length)return;o<t&&Rn(r,t-o,-1);let u=new en(r,s);a=a?a.compose(u.map(a)):u,r=[],s=[],o=0}function c(h){if(Array.isArray(h))for(let u of h)c(u);else if(h instanceof en){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);l(),a=a?a.compose(h.map(a)):h}else{let{from:u,to:f=u,insert:p}=h;if(u>f||u<0||f>t)throw new RangeError(`Invalid change range ${u} to ${f} (in doc of length ${t})`);let d=p?typeof p=="string"?Ot.of(p.split(i||Lg)):p:Ot.empty,m=d.length;if(u==f&&m==0)return;u<o&&l(),u>o&&Rn(r,u-o,-1),Rn(r,f-u,m),Gs(s,r,d),o=f}}return c(e),l(!a),a}static empty(e){return new en(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<r;)i.push(Ot.empty);i[r]=Ot.of(s.slice(1)),t.push(s[0],i[r].length)}}}return new en(t,i)}static createSet(e,t){return new en(e,t)}}function Rn(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Gs(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Ot.empty);n.push(t)}}function Bg(n,e,t){let i=n.inserted;for(let r=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,h=s,u=Ot.empty;for(;c+=a,h+=l,l&&i&&(u=u.append(i[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(r,c,s,h,u),r=c,s=h}}}function Mg(n,e,t,i=!1){let r=[],s=i?[]:null,o=new ec(n),a=new ec(e);for(let l=0,c=0;;)if(o.ins==-1)l+=o.len,o.next();else if(a.ins==-1&&c<l){let h=Math.min(a.len,l-c);a.forward(h),Rn(r,h,-1),c+=h}else if(a.ins>=0&&(o.done||c<l||c==l&&(a.len<o.len||a.len==o.len&&!t))){for(Rn(r,a.ins,-1);l>c&&!o.done&&l+o.len<c+a.len;)l+=o.len,o.next();c+=a.len,a.next()}else if(o.ins>=0){let h=0,u=l+o.len;for(;;)if(a.ins>=0&&c>l&&c+a.len<u)h+=a.ins,c+=a.len,a.next();else if(a.ins==-1&&c<u){let f=Math.min(a.len,u-c);h+=f,a.forward(f),c+=f}else break;Rn(r,h,o.ins),s&&Gs(s,r,o.text),l=u,o.next()}else{if(o.done&&a.done)return s?en.createSet(r,s):er.create(r);throw new Error("Mismatched change set lengths")}}function zS(n,e,t=!1){let i=[],r=t?[]:null,s=new ec(n),o=new ec(e);for(let a=!1;;){if(s.done&&o.done)return r?en.createSet(i,r):er.create(i);if(s.ins==0)Rn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)Rn(i,0,o.ins,a),r&&Gs(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;Rn(i,l,h,a),r&&h&&Gs(r,i,o.text)}else o.ins==-1?(Rn(i,s.off?0:s.len,l,a),r&&Gs(r,i,s.textBit(l))):(Rn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Gs(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class ec{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ot.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Ot.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Vs{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Vs(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ve.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ve.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ve.range(e.anchor,e.head)}static create(e,t,i){return new Vs(e,t,i)}}class ve{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ve.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ve([this.main],0)}addRange(e,t=!0){return ve.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,ve.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ve(e.ranges.map(t=>Vs.fromJSON(t)),e.main)}static single(e,t=e){return new ve([ve.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return ve.normalized(e.slice(),t);i=s.to}return new ve(e,t)}static cursor(e,t=0,i,r){return Vs.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(r!=null?r:33554431)<<5)}static range(e,t,i){let r=(i!=null?i:33554431)<<5;return t<e?Vs.create(t,e,16|r|8):Vs.create(e,t,r|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((r,s)=>r.from-s.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=t&&t--,e.splice(--r,2,s.anchor>s.head?ve.range(l,a):ve.range(a,l))}}return new ve(e,t)}}function jS(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let j0=0;class je{constructor(e,t,i,r,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.extensions=s,this.id=j0++,this.default=e([])}static define(e={}){return new je(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:H0),!!e.static,e.enables)}of(e){return new du([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new du(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new du(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function H0(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class du{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=j0++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,h=[];for(let u of this.dependencies)u=="doc"?l=!0:u=="selection"?c=!0:(((t=e[u.id])!==null&&t!==void 0?t:1)&1)==0&&h.push(e[u.id]);return{create(u){return u.values[o]=i(u),1},update(u,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||$g(u,h)){let p=i(u);if(a?!dA(p,u.values[o],r):!r(p,u.values[o]))return u.values[o]=p,1}return 0},reconfigure:(u,f)=>{let p=i(u),d=f.config.address[s];if(d!=null){let m=Mu(f,d);if(this.dependencies.every(b=>b instanceof je?f.facet(b)===u.facet(b):b instanceof yn?f.field(b,!1)==u.field(b,!1):!0)||(a?dA(p,m,r):r(p,m)))return u.values[o]=m,0}return u.values[o]=p,1}}}}function dA(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function $g(n,e){let t=!1;for(let i of e)Ql(n,i)&1&&(t=!0);return t}function J5(n,e,t){let i=t.map(l=>n[l.id]),r=t.map(l=>l.type),s=i.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let c=[];for(let h=0;h<i.length;h++){let u=Mu(l,i[h]);if(r[h]==2)for(let f of u)c.push(f);else c.push(u)}return e.combine(c)}return{create(l){for(let c of i)Ql(l,c);return l.values[o]=a(l),1},update(l,c){if(!$g(l,s))return 0;let h=a(l);return e.compare(h,l.values[o])?0:(l.values[o]=h,1)},reconfigure(l,c){let h=$g(l,i),u=c.config.facets[e.id],f=c.facet(e);if(u&&!h&&H0(t,u))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const pA=je.define({static:!0});class yn{constructor(e,t,i,r,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new yn(j0++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(pA).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let s=i.values[t],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,pA.of({field:this,create:e})]}get extension(){return this}}const Fo={lowest:4,low:3,default:2,high:1,highest:0};function il(n){return e=>new HS(e,n)}const Oo={highest:il(Fo.highest),high:il(Fo.high),default:il(Fo.default),low:il(Fo.low),lowest:il(Fo.lowest)};class HS{constructor(e,t){this.inner=e,this.prec=t}}class Jf{of(e){return new Fg(this,e)}reconfigure(e){return Jf.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Fg{constructor(e,t){this.compartment=e,this.inner=t}}class Bu{constructor(e,t,i,r,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],s=Object.create(null),o=new Map;for(let f of e$(e,t,o))f instanceof yn?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let h=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],d=p[0].facet,m=h&&h[f]||[];if(p.every(b=>b.type==0))if(a[d.id]=l.length<<1|1,H0(m,p))l.push(i.facet(d));else{let b=d.combine(p.map(A=>A.value));l.push(i&&d.compare(b,i.facet(d))?i.facet(d):b)}else{for(let b of p)b.type==0?(a[b.id]=l.length<<1|1,l.push(b.value)):(a[b.id]=c.length<<1,c.push(A=>b.dynamicSlot(A)));a[d.id]=c.length<<1,c.push(b=>J5(b,d,p))}}let u=c.map(f=>f(a));return new Bu(e,o,u,a,l,s)}}function e$(n,e,t){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof Fg&&t.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof Fg){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,a)}else if(o instanceof HS)s(o.inner,o.prec);else if(o instanceof yn)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof du)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,a);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(n,Fo.default),i.reduce((o,a)=>o.concat(a))}function Ql(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function Mu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const GS=je.define(),VS=je.define({combine:n=>n.some(e=>e),static:!0}),XS=je.define({combine:n=>n.length?n[0]:void 0,static:!0}),YS=je.define(),ZS=je.define(),qS=je.define(),KS=je.define({combine:n=>n.length?n[0]:!1});class Pr{constructor(e,t){this.type=e,this.value=t}static define(){return new t$}}class t${of(e){return new Pr(this,e)}}class n${constructor(e){this.map=e}of(e){return new et(this,e)}}class et{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new et(this.type,t)}is(e){return this.type==e}static define(e={}){return new n$(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(t);s&&i.push(s)}return i}}et.reconfigure=et.define();et.appendConfig=et.define();class nn{constructor(e,t,i,r,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&jS(i,t.newLength),s.some(a=>a.type==nn.time)||(this.annotations=s.concat(nn.time.of(Date.now())))}static create(e,t,i,r,s,o){return new nn(e,t,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(nn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}nn.time=Pr.define();nn.userEvent=Pr.define();nn.addToHistory=Pr.define();nn.remote=Pr.define();function i$(n,e){let t=[];for(let i=0,r=0;;){let s,o;if(i<n.length&&(r==e.length||e[r]>=n[i]))s=n[i++],o=n[i++];else if(r<e.length)s=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function JS(n,e,t){var i;let r,s,o;return t?(r=e.changes,s=en.empty(e.changes.length),o=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:et.mapEffects(n.effects,r).concat(et.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Wg(n,e,t){let i=e.selection,r=Xo(e.annotations);return e.userEvent&&(r=r.concat(nn.userEvent.of(e.userEvent))),{changes:e.changes instanceof en?e.changes:en.of(e.changes||[],t,n.facet(XS)),selection:i&&(i instanceof ve?i:ve.single(i.anchor,i.head)),effects:Xo(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function eE(n,e,t){let i=Wg(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=JS(i,Wg(n,e[s],o?i.changes.newLength:n.doc.length),o)}let r=nn.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return s$(t?r$(r):r)}function r$(n){let e=n.startState,t=!0;for(let r of e.facet(YS)){let s=r(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:i$(t,s))}if(t!==!0){let r,s;if(t===!1)s=n.changes.invertedDesc,r=en.empty(e.doc.length);else{let o=n.changes.filter(t);r=o.changes,s=o.filtered.invertedDesc}n=nn.create(e,r,n.selection&&n.selection.map(s),et.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let i=e.facet(ZS);for(let r=i.length-1;r>=0;r--){let s=i[r](n);s instanceof nn?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof nn?n=s[0]:n=eE(e,Xo(s),!1)}return n}function s$(n){let e=n.startState,t=e.facet(qS),i=n;for(let r=t.length-1;r>=0;r--){let s=t[r](n);s&&Object.keys(s).length&&(i=JS(n,Wg(e,s,n.changes.newLength),!0))}return i==n?n:nn.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const o$=[];function Xo(n){return n==null?o$:Array.isArray(n)?n:[n]}var Dn=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Dn||(Dn={}));const a$=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ug;try{Ug=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function l$(n){if(Ug)return Ug.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||a$.test(t)))return!0}return!1}function c$(n){return e=>{if(!/\S/.test(e))return Dn.Space;if(l$(e))return Dn.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Dn.Word;return Dn.Other}}class pt{constructor(e,t,i,r,s,o){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ql(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Ql(this,i),Mu(this,i)}update(...e){return eE(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let o of e.effects)o.is(Jf.reconfigure)?(t&&(r=new Map,t.compartments.forEach((a,l)=>r.set(l,a)),t=null),r.set(o.value.compartment,o.value.extension)):o.is(et.reconfigure)?(t=null,i=o.value):o.is(et.appendConfig)&&(t=null,i=Xo(i).concat(o.value));let s;t?s=e.startState.values.slice():(t=Bu.resolve(i,r,this),s=new pt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new pt(t,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ve.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Xo(i.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),c=this.changes(l.changes),h=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(h);let u=r.mapDesc(c,!0);s.push(l.range.map(u)),r=r.compose(h),o=et.mapEffects(o,h).concat(et.mapEffects(Xo(l.effects),u))}return{changes:r,selection:ve.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof en?e:en.of(e,this.doc.length,this.facet(pt.lineSeparator))}toText(e){return Ot.of(e.split(this.facet(pt.lineSeparator)||Lg))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Ql(this,t),Mu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof yn&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i)for(let s in i){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}return pt.create({doc:e.doc,selection:ve.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Bu.resolve(e.extensions||[],new Map),i=e.doc instanceof Ot?e.doc:Ot.of((e.doc||"").split(t.staticFacet(pt.lineSeparator)||Lg)),r=e.selection?e.selection instanceof ve?e.selection:ve.single(e.selection.anchor,e.selection.head):ve.single(0);return jS(r,i.length),t.staticFacet(VS)||(r=r.asSingle()),new pt(t,i,r,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(pt.tabSize)}get lineBreak(){return this.facet(pt.lineSeparator)||`
`}get readOnly(){return this.facet(KS)}phrase(e,...t){for(let i of this.facet(pt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let s of this.facet(GS))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return c$(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=ni(t,o,!1);if(s(t.slice(l,o))!=Dn.Word)break;o=l}for(;a<r;){let l=ni(t,a);if(s(t.slice(a,l))!=Dn.Word)break;a=l}return o==a?null:ve.range(o+i,a+i)}}pt.allowMultipleSelections=VS;pt.tabSize=je.define({combine:n=>n.length?n[0]:4});pt.lineSeparator=XS;pt.readOnly=KS;pt.phrases=je.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});pt.languageData=GS;pt.changeFilter=YS;pt.transactionFilter=ZS;pt.transactionExtender=qS;Jf.reconfigure=et.define();function Lr(n,e,t={}){let i={};for(let r of n)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class so{eq(e){return this==e}range(e,t=e){return tc.create(e,t,this)}}so.prototype.startSide=so.prototype.endSide=0;so.prototype.point=!1;so.prototype.mapMode=wn.TrackDel;class tc{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new tc(e,t,i)}}function zg(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class G0{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,t,i,r){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],h=this.from[l]+e,u=this.to[l]+e,f,p;if(h==u){let d=t.mapPos(h,c.startSide,c.mapMode);if(d==null||(f=p=d,c.startSide!=c.endSide&&(p=t.mapPos(h,c.endSide),p<f)))continue}else if(f=t.mapPos(h,c.startSide),p=t.mapPos(u,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new G0(r,s,i,a):null,pos:o}}}class vt{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new vt(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(zg)),this.isEmpty)return t.length?vt.of(t):this;let a=new tE(this,null,-1).goto(0),l=0,c=[],h=new bs;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let u=t[l++];h.addInner(u.from,u.to,u.value)||c.push(u)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&h.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(h.addInner(a.from,a.to,a.value)||c.push(tc.create(a.from,a.to,a.value))),a.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?vt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),t.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:h,pos:u}=l.map(a,e);h&&(r=Math.max(r,h.maxPoint),t.push(h),i.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new vt(i,t,s||vt.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return nc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return nc.from(e).goto(t)}static compare(e,t,i,r,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=mA(o,a,i),c=new rl(o,l,s),h=new rl(a,l,s);i.iterGaps((u,f,p)=>gA(c,u,h,f,p,r)),i.empty&&i.length==0&&gA(c,0,h,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=1e9);let s=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),o=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=mA(s,o),l=new rl(s,a,0).goto(i),c=new rl(o,a,0).goto(i);for(;;){if(l.to!=c.to||!jg(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,t,i,r,s=-1){let o=new rl(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point?(r.point(a,c,o.point,o.activeForPoint(o.to),l,o.pointRank),l=o.openEnd(c)+(o.to>c?1:0)):c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c)),o.to>i)break;a=o.to,o.next()}return l}static of(e,t=!1){let i=new bs;for(let r of e instanceof tc?[e]:t?h$(e):e)i.add(r.from,r.to,r.value);return i.finish()}}vt.empty=new vt([],[],null,-1);function h$(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(zg(e,i)>0)return n.slice().sort(zg);e=i}return n}vt.empty.nextLayer=vt.empty;class bs{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new G0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new bs)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(vt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=vt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function mA(n,e,t){let i=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class tE{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class nc{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new tE(o,t,i,s));return r.length==1?r[0]:new nc(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)qp(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)qp(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),qp(this.heap,0)}}}function qp(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class rl{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=nc.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Ch(this.active,e),Ch(this.activeTo,e),Ch(this.activeRank,e),this.minActive=yA(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;Ih(this.active,t,i),Ih(this.activeTo,t,r),Ih(this.activeRank,t,s),e&&Ih(e,t,this.cursor.from),this.minActive=yA(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,r=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Ch(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let s=0;for(;s<i.length&&i[s]<e;)s++;this.openStart=s+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function gA(n,e,t,i,r,s){n.goto(e),t.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=n.to+l-t.to||n.endSide-t.endSide,h=c<0?n.to+l:t.to,u=Math.min(h,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&jg(n.activeForPoint(n.to+l),t.activeForPoint(t.to))||s.comparePoint(a,u,n.point,t.point):u>a&&!jg(n.active,t.active)&&s.compareRange(a,u,n.active,t.active),h>o)break;a=h,c<=0&&n.next(),c>=0&&t.next()}}function jg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Ch(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function Ih(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function yA(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function $c(n,e,t=n.length){let i=0;for(let r=0;r<t;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=ni(n,r));return i}function Hg(n,e,t,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==n.length)break;s+=n.charCodeAt(r)==9?t-s%t:1,r=ni(n,r)}return i===!0?-1:n.length}const Gg="\u037C",OA=typeof Symbol=="undefined"?"__"+Gg:Symbol.for(Gg),Vg=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),bA=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class vs{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let h=[],u=/^@(\w+)\b/.exec(o[0]),f=u&&u[1]=="keyframes";if(u&&a==null)return l.push(o[0]+";");for(let p in a){let d=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(b=>m.replace(/&/,b))).reduce((m,b)=>m.concat(b)),d,l);else if(d&&typeof d=="object"){if(!u)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),d,h,f)}else d!=null&&h.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+d+";")}(h.length||f)&&l.push((i&&!u&&!c?o.map(i):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=bA[OA]||1;return bA[OA]=e+1,Gg+e.toString(36)}static mount(e,t){(e[Vg]||new u$(e)).mount(Array.isArray(t)?t:[t])}}let Rh=null;class u${constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet!="undefined"){if(Rh)return e.adoptedStyleSheets=[Rh.sheet].concat(e.adoptedStyleSheets),e[Vg]=Rh;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Rh=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Vg]=this}mount(e){let t=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,o),t)for(let l=0;l<o.rules.length;l++)t.insertRule(o.rules[l],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!t){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var ws={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},$u={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},vA=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),f$=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),d$=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),wA=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),p$=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),m$=vA&&(wA||+vA[1]<57)||d$&&wA;for(var vn=0;vn<10;vn++)ws[48+vn]=ws[96+vn]=String(vn);for(var vn=1;vn<=24;vn++)ws[vn+111]="F"+vn;for(var vn=65;vn<=90;vn++)ws[vn]=String.fromCharCode(vn+32),$u[vn]=String.fromCharCode(vn);for(var Kp in ws)$u.hasOwnProperty(Kp)||($u[Kp]=ws[Kp]);function g$(n){var e=m$&&(n.ctrlKey||n.altKey||n.metaKey)||(f$||p$)&&n.shiftKey&&n.key&&n.key.length==1,t=!e&&n.key||(n.shiftKey?$u:ws)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Fu(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function oa(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function y$(){let n=document.activeElement;for(;n&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function Xg(n,e){if(!e.anchorNode)return!1;try{return oa(n,e.anchorNode)}catch{return!1}}function ic(n){return n.nodeType==3?rc(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Wu(n,e,t,i){return t?AA(n,e,t,i,-1)||AA(n,e,t,i,1):!1}function Yg(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function AA(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:Uu(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Yg(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?Uu(n):0}else return!1}}function Uu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const nE={left:0,right:0,top:0,bottom:0};function ed(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function O$(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function b$(n,e,t,i,r,s,o,a){let l=n.ownerDocument,c=l.defaultView;for(let h=n;h;)if(h.nodeType==1){let u,f=h==l.body;if(f)u=O$(c);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.parentNode;continue}let m=h.getBoundingClientRect();u={left:m.left,right:m.left+h.clientWidth,top:m.top,bottom:m.top+h.clientHeight}}let p=0,d=0;if(r=="nearest")e.top<u.top?(d=-(u.top-e.top+o),t>0&&e.bottom>u.bottom+d&&(d=e.bottom-u.bottom+d+o)):e.bottom>u.bottom&&(d=e.bottom-u.bottom+o,t<0&&e.top-d<u.top&&(d=-(u.top+d-e.top+o)));else{let m=e.bottom-e.top,b=u.bottom-u.top;d=(r=="center"&&m<=b?e.top+m/2-b/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-b+o)-u.top}if(i=="nearest"?e.left<u.left?(p=-(u.left-e.left+s),t>0&&e.right>u.right+p&&(p=e.right-u.right+p+s)):e.right>u.right&&(p=e.right-u.right+s,t<0&&e.left<u.left+p&&(p=-(u.left+p-e.left+s))):p=(i=="center"?e.left+(e.right-e.left)/2-(u.right-u.left)/2:i=="start"==a?e.left-s:e.right-(u.right-u.left)+s)-u.left,p||d)if(f)c.scrollBy(p,d);else{if(d){let m=h.scrollTop;h.scrollTop+=d,d=h.scrollTop-m}if(p){let m=h.scrollLeft;h.scrollLeft+=p,p=h.scrollLeft-m}e={left:e.left-p,top:e.top-d,right:e.right-p,bottom:e.bottom-d}}if(f)break;h=h.assignedSlot||h.parentNode,i=r="nearest"}else if(h.nodeType==11)h=h.host;else break}class v${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let No=null;function iE(n){if(n.setActive)return n.setActive();if(No)return n.focus(No);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(No==null?{get preventScroll(){return No={preventScroll:!0},!0}}:void 0),!No){No=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],s=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let _A;function rc(n,e,t=e){let i=_A||(_A=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Pl(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,n.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,n.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function w$(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function rE(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}class An{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new An(e.parentNode,Yg(e),t)}static after(e,t){return new An(e.parentNode,Yg(e)+1,t)}}const V0=[];class Ut{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,r;for(let s of this.children){if(s.dirty){if(!s.dom&&(r=i?i.nextSibling:t.firstChild)){let o=Ut.get(r);(!o||!o.parent&&o.constructor==s.constructor)&&s.reuseDOM(r)}s.sync(e),s.dirty=0}if(r=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&r!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;r&&r!=s.dom;)r=xA(r);else t.insertBefore(s.dom,r);i=s.dom}for(r=i?i.nextSibling:t.firstChild,r&&e&&e.node==t&&(e.written=!0);r;)r=xA(r)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=Uu(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ut.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,h=i;l<this.children.length;l++){let u=this.children[l],f=c+u.length;if(c<e&&f>t)return u.domBoundsAround(e,t,c);if(f>=e&&r==-1&&(r=l,s=c),c>t&&u.dom.parentNode==this.dom){o=l,a=h;break}h=f,c=f+u.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=V0){this.markDirty();for(let r=e;r<t;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new sE(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,r,s,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}Ut.prototype.breakAfter=0;function xA(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class sE{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function oE(n,e,t,i,r,s,o,a,l){let{children:c}=n,h=c.length?c[e]:null,u=s.length?s[s.length-1]:null,f=u?u.breakAfter:o;if(!(e==i&&h&&!o&&!f&&s.length<2&&h.merge(t,r,s.length?u:null,t==0,a,l))){if(i<c.length){let p=c[i];p&&r<p.length?(e==i&&(p=p.split(r),r=0),!f&&u&&p.merge(0,r,u,!0,0,l)?s[s.length-1]=p:(r&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(u?u.breakAfter=1:o=1),i++}for(h&&(h.breakAfter=o,t>0&&(!o&&s.length&&h.merge(t,h.length,s[0],!1,a,0)?h.breakAfter=s.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&n.replaceChildren(e,i,s)}}function aE(n,e,t,i,r,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:c,off:h}=o.findPos(e,-1),u=e-t;for(let f of i)u+=f.length;n.length+=u,oE(n,c,h,a,l,i,0,r,s)}let Jn=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Zg=typeof document!="undefined"?document:{documentElement:{style:{}}};const qg=/Edge\/(\d+)/.exec(Jn.userAgent),lE=/MSIE \d/.test(Jn.userAgent),Kg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jn.userAgent),td=!!(lE||Kg||qg),kA=!td&&/gecko\/(\d+)/i.test(Jn.userAgent),Jp=!td&&/Chrome\/(\d+)/.exec(Jn.userAgent),SA="webkitFontSmoothing"in Zg.documentElement.style,cE=!td&&/Apple Computer/.test(Jn.vendor),EA=cE&&(/Mobile\/\w+/.test(Jn.userAgent)||Jn.maxTouchPoints>2);var He={mac:EA||/Mac/.test(Jn.platform),windows:/Win/.test(Jn.platform),linux:/Linux|X11/.test(Jn.platform),ie:td,ie_version:lE?Zg.documentMode||6:Kg?+Kg[1]:qg?+qg[1]:0,gecko:kA,gecko_version:kA?+(/Firefox\/(\d+)/.exec(Jn.userAgent)||[0,0])[1]:0,chrome:!!Jp,chrome_version:Jp?+Jp[1]:0,ios:EA,android:/Android\b/.test(Jn.userAgent),webkit:SA,safari:cE,webkit_version:SA?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Zg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const A$=256;class As extends Ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof As)||this.length-(t-e)+i.length>A$)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new As(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new An(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Jg(this.dom,e,t)}}class nr extends Ut{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(rE(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,r,s,o){return i&&(!(i instanceof nr&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(aE(this,e,t,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&t.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new nr(this.mark,t,o)}domAtPos(e){return fE(this.dom,this.children,e)}coordsAt(e,t){return pE(this,e,t)}}function Jg(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?He.chrome||He.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):t<0?r--:s<i&&s++;let a=rc(n,r,s).getClientRects();if(!a.length)return nE;let l=a[(o?o<0:t>=0)?0:a.length-1];return He.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?ed(l,o<0):l||null}class ns extends Ut{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||ns)(e,t,i)}split(e){let t=ns.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,r,s,o){return i&&(!(i instanceof ns)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof ns&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ot.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Ot.empty}domAtPos(e){return e==0?An.before(this.dom):An.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),r=null;if(!i.length)return nE;for(let s=e>0?i.length-1:0;r=i[s],!(e>0?s==0:s==i.length-1||r.top<r.bottom);s+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?r:ed(r,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class hE extends ns{domAtPos(e){let{topView:t,text:i}=this.widget;return t?ey(e,0,t,i,(r,s)=>r.domAtPos(s),r=>new An(i,Math.min(r,i.nodeValue.length))):new An(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:r}=this.widget;return i?uE(e,t,i,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:r}=this.widget;return i?ey(e,t,i,r,(s,o,a)=>s.coordsAt(o,a),(s,o)=>Jg(r,s,o)):Jg(r,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function ey(n,e,t,i,r,s){if(t instanceof nr){for(let o of t.children){let a=oa(o.dom,i),l=a?i.nodeValue.length:o.length;if(n<l||n==l&&o.getSide()<=0)return a?ey(n,e,o,i,r,s):r(o,n,e);n-=l}return r(t,t.length,-1)}else return t.dom==i?s(n,e):r(t,n,e)}function uE(n,e,t,i){if(t instanceof nr)for(let r of t.children){let s=0,o=oa(r.dom,i);if(oa(r.dom,n))return s+(o?uE(n,e,r,i):r.localPosFromDOM(n,e));s+=o?i.nodeValue.length:r.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(n,e)}class aa extends Ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof aa&&e.side==this.side}split(){return new aa(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return An.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=_$(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Ot.empty}}As.prototype.children=ns.prototype.children=aa.prototype.children=V0;function _$(n,e){let t=n.parent,i=t?t.children.indexOf(n):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let r=t.children[i+e];if(r instanceof As){let s=r.coordsAt(e<0?r.length:0,e);if(s)return s}i+=e}else if(t instanceof nr&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let r=t.dom.lastChild;if(r&&r.nodeName=="BR")return r.getClientRects()[0];break}}function fE(n,e,t){let i=0;for(let r=0;i<e.length;i++){let s=e[i],o=r+s.length;if(!(o==r&&s.getSide()<=0)){if(t>r&&t<o&&s.dom.parentNode==n)return s.domAtPos(t-r);if(t<=r)break;r=o}}for(;i>0;i--){let r=e[i-1].dom;if(r.parentNode==n)return An.after(r)}return new An(n,0)}function dE(n,e,t){let i,{children:r}=n;t>0&&e instanceof nr&&r.length&&(i=r[r.length-1])instanceof nr&&i.mark.eq(e.mark)?dE(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function pE(n,e,t){for(let s=0,o=0;o<n.children.length;o++){let a=n.children[o],l=s+a.length,c;if((t<=0||l==n.length||a.getSide()>0?l>=e:l>e)&&(e<l||o+1==n.children.length||(c=n.children[o+1]).length||c.getSide()>0)){let h=0;if(l==s){if(a.getSide()<=0)continue;h=t=-a.getSide()}let u=a.coordsAt(Math.max(0,e-s),t);return h&&u?ed(u,t<0):u}s=l}let i=n.dom.lastChild;if(!i)return n.dom.getBoundingClientRect();let r=ic(i);return r[r.length-1]||null}function ty(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function X0(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r of t)if(i.indexOf(r)==-1||n[r]!==e[r])return!1;return!0}function ny(n,e,t){let i=null;if(e)for(let r in e)t&&r in t||n.removeAttribute(i=r);if(t)for(let r in t)e&&e[r]==t[r]||n.setAttribute(i=r,t[r]);return!!i}class Br{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Ct=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Ct||(Ct={}));class Me extends so{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new nd(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new oo(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=mE(e,t);i=(s?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new oo(e,i,r,t,e.widget||null,!0)}static line(e){return new Fc(e)}static set(e,t=!1){return vt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Me.none=vt.empty;class nd extends Me{constructor(e){let{start:t,end:i}=mE(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof nd&&this.tagName==e.tagName&&this.class==e.class&&X0(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}nd.prototype.point=!1;class Fc extends Me{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Fc&&X0(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Fc.prototype.mapMode=wn.TrackBefore;Fc.prototype.point=!0;class oo extends Me{constructor(e,t,i,r,s,o){super(t,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?wn.TrackBefore:wn.TrackAfter:wn.TrackDel}get type(){return this.startSide<this.endSide?Ct.WidgetRange:this.startSide<=0?Ct.WidgetBefore:Ct.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof oo&&x$(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}oo.prototype.point=!0;function mE(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function x$(n,e){return n==e||!!(n&&e&&n.compare(e))}function iy(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class Nn extends Ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,s,o){if(i){if(!(i instanceof Nn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),aE(this,e,t,i?i.children:[],s,o),!0}split(e){let t=new Nn;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){X0(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){dE(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=ty(t,this.attrs||{})),i&&(this.attrs=ty({class:i},this.attrs||{}))}domAtPos(e){return fE(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(rE(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ny(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&Ut.get(i)instanceof nr;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=Ut.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!He.ios||!this.children.some(r=>r instanceof As))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof As))return null;let i=ic(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return pE(this,e,t)}become(e){return!1}get type(){return Ct.Text}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=t){if(s instanceof Nn)return s;if(o>t)break}r=o+s.breakAfter}return null}}class Js extends Ut{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,s,o){return i&&(!(i instanceof Js)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?An.before(this.dom):An.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Js(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return V0}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ot.empty}domBoundsAround(){return null}become(e){return e instanceof Js&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Y0{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Js&&e.type==Ct.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Nn),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Qh(new aa(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(Qh(new As(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof oo){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof oo)if(i.block){let{type:l}=i;l==Ct.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Js(i.widget||new TA("div"),a,l))}else{let l=ns.create(i.widget||new TA("span"),a,i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<t||i.startSide>0),h=!l.isEditable&&(e<t||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(u.append(Qh(new aa(1),r),s),s=r.length+Math.max(0,s-r.length)),u.append(Qh(l,r),s),this.atCursorPos=h,this.pendingBuffer=h?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,r,s){let o=new Y0(e,t,i,s);return o.openEnd=vt.spans(r,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Qh(n,e){for(let t of e)n=new nr(t,[n],n.length);return n}class TA extends Br{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const gE=je.define(),yE=je.define(),OE=je.define(),bE=je.define(),ry=je.define(),vE=je.define(),wE=je.define({combine:n=>n.some(e=>e)});class zu{constructor(e,t="nearest",i="nearest",r=5,s=5){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new zu(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const CA=et.define({map:(n,e)=>n.map(e)});function ri(n,e,t){let i=n.facet(bE);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Wc=je.define({combine:n=>n.length?n[0]:!0});let k$=0;const vl=je.define();class Zt{constructor(e,t,i,r){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=r(this)}static define(e,t){const{eventHandlers:i,provide:r,decorations:s}=t||{};return new Zt(k$++,e,i,o=>{let a=[vl.of(o)];return s&&a.push(sc.of(l=>{let c=l.plugin(o);return c?s(c):Me.none})),r&&a.push(r(o)),a})}static fromClass(e,t){return Zt.define(i=>new e(i),t)}}class em{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(ri(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){ri(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){ri(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const AE=je.define(),_E=je.define(),sc=je.define(),xE=je.define(),kE=je.define(),wl=je.define();class Sr{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new Sr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,h=l?l.fromB:1e9;for(;s<t.length&&t[s]<h;){let u=t[s],f=t[s+1],p=Math.max(a,u),d=Math.min(h,f);if(p<=d&&new Sr(p+c,d+c,p,d).addToSet(i),f>h)break;s+=2}if(!l)return i;new Sr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class ju{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=en.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,a,l,c)=>r.push(new Sr(o,a,l,c))),this.changedRanges=r;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,i){return new ju(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Gt=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Gt||(Gt={}));const sy=Gt.LTR,S$=Gt.RTL;function SE(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const E$=SE("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),T$=SE("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),oy=Object.create(null),Wi=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);oy[e]=t,oy[t]=-e}function C$(n){return n<=247?E$[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?T$[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203||n==8204?256:1}const I$=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Yo{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?S$:sy}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const jt=[];function R$(n,e){let t=n.length,i=e==sy?1:2,r=e==sy?2:1;if(!n||i==1&&!I$.test(n))return EE(t);for(let o=0,a=i,l=i;o<t;o++){let c=C$(n.charCodeAt(o));c==512?c=a:c==8&&l==4&&(c=16),jt[o]=c==4?2:c,c&7&&(l=c),a=c}for(let o=0,a=i,l=i;o<t;o++){let c=jt[o];if(c==128)o<t-1&&a==jt[o+1]&&a&24?c=jt[o]=a:jt[o]=256;else if(c==64){let h=o+1;for(;h<t&&jt[h]==64;)h++;let u=o&&a==8||h<t&&jt[h]==8?l==1?1:8:256;for(let f=o;f<h;f++)jt[f]=u;o=h-1}else c==8&&l==1&&(jt[o]=1);a=c,c&7&&(l=c)}for(let o=0,a=0,l=0,c,h,u;o<t;o++)if(h=oy[c=n.charCodeAt(o)])if(h<0){for(let f=a-3;f>=0;f-=3)if(Wi[f+1]==-h){let p=Wi[f+2],d=p&2?i:p&4?p&1?r:i:0;d&&(jt[o]=jt[Wi[f]]=d),a=f;break}}else{if(Wi.length==189)break;Wi[a++]=o,Wi[a++]=c,Wi[a++]=l}else if((u=jt[o])==2||u==1){let f=u==i;l=f?0:1;for(let p=a-3;p>=0;p-=3){let d=Wi[p+2];if(d&2)break;if(f)Wi[p+2]|=2;else{if(d&4)break;Wi[p+2]|=4}}}for(let o=0;o<t;o++)if(jt[o]==256){let a=o+1;for(;a<t&&jt[a]==256;)a++;let l=(o?jt[o-1]:i)==1,c=(a<t?jt[a]:i)==1,h=l==c?l?1:2:i;for(let u=o;u<a;u++)jt[u]=h;o=a-1}let s=[];if(i==1)for(let o=0;o<t;){let a=o,l=jt[o++]!=1;for(;o<t&&l==(jt[o]!=1);)o++;if(l)for(let c=o;c>a;){let h=c,u=jt[--c]!=2;for(;c>a&&u==(jt[c-1]!=2);)c--;s.push(new Yo(c,h,u?2:1))}else s.push(new Yo(a,o,0))}else for(let o=0;o<t;){let a=o,l=jt[o++]==2;for(;o<t&&l==(jt[o]==2);)o++;s.push(new Yo(a,o,l?1:2))}return s}function EE(n){return[new Yo(0,n,0)]}let TE="";function Q$(n,e,t,i,r){var s;let o=i.head-n.from,a=-1;if(o==0){if(!r||!n.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),a=0)}else if(o==n.length){if(r)return null;let f=e[e.length-1];f.level!=t&&(o=f.side(!0,t),a=e.length-1)}a<0&&(a=Yo.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let l=e[a];o==l.side(r,t)&&(l=e[a+=r?1:-1],o=l.side(!r,t));let c=r==(l.dir==t),h=ni(n.text,o,c);if(TE=n.text.slice(Math.min(o,h),Math.max(o,h)),h!=l.side(r,t))return ve.cursor(h+n.from,c?-1:1,l.level);let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return!u&&l.level!=t?ve.cursor(r?n.to:n.from,r?-1:1,t):u&&u.level<l.level?ve.cursor(u.side(!r,t)+n.from,r?1:-1,u.level):ve.cursor(h+n.from,r?-1:1,l.level)}const is="\uFFFF";class CE{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(pt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=is}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r),this.readNode(r);let s=r.nextSibling;if(s==t)break;let o=Ut.get(r),a=Ut.get(s);(o&&a?o.breakAfter:(o?o.breakAfter:IA(r))||IA(s)&&(r.nodeName!="BR"||r.cmIgnore))&&this.lineBreak(),r=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Ut.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function IA(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class RA{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class QA extends Ut{constructor(e){super(),this.view=e,this.compositionDeco=Me.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Nn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Sr(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:a})=>a<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Me.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=D$(this.view,e.changes)),(He.ie||He.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,r=this.updateDeco(),s=M$(i,r,e.changes);return t=Sr.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=He.chrome||He.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Js&&s.widget instanceof PA&&r.push(s.dom);i.updateGaps(r)}updateChildren(e,t){let i=this.childCursor(t);for(let r=e.length-1;;r--){let s=r>=0?e[r]:null;if(!s)break;let{fromA:o,toA:a,fromB:l,toB:c}=s,{content:h,breakAtStart:u,openStart:f,openEnd:p}=Y0.build(this.view.state.doc,l,c,this.decorations,this.dynamicDecorationMap),{i:d,off:m}=i.findPos(a,1),{i:b,off:A}=i.findPos(o,-1);oE(this,b,A,d,m,h,u,f,p)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||He.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,s=this.domAtPos(r.anchor),o=r.empty?s:this.domAtPos(r.head);if(He.gecko&&r.empty&&P$(s)){let l=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(l,s.node.childNodes[s.offset]||null)),s=o=new An(l,0),i=!0}let a=this.view.observer.selectionRange;(i||!a.focusNode||!Wu(s.node,s.offset,a.anchorNode,a.anchorOffset)||!Wu(o.node,o.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{He.android&&He.chrome&&this.dom.contains(a.focusNode)&&$$(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=Fu(this.root);if(r.empty){if(He.gecko){let c=L$(s.node,s.offset);if(c&&c!=3){let h=RE(s.node,s.offset,c==1?1:-1);h&&(s=new An(h,c==1?0:h.nodeValue.length))}}l.collapse(s.node,s.offset),r.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=r.bidiLevel)}else if(l.extend)l.collapse(s.node,s.offset),l.extend(o.node,o.offset);else{let c=document.createRange();r.anchor>r.head&&([s,o]=[o,s]),c.setEnd(o.node,o.offset),c.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(c)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new An(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new An(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=Fu(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=Nn.find(this,e.head);if(!i)return;let r=i.posAtStart;if(e.head==r||e.head==r+i.length)return;let s=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!s||!o||s.bottom>o.top)return;let a=this.domAtPos(e.head+e.assoc);t.collapse(a.node,a.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(Wc)?this.root.activeElement==this.dom:Xg(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=Ut.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof Nn)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Ct.WidgetBefore&&s.type!=Ct.WidgetAfter&&(!r||t==2||this.children[r-1].breakAfter||this.children[r-1].type==Ct.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Gt.LTR;for(let c=0,h=0;h<this.children.length;h++){let u=this.children[h],f=c+u.length;if(f>r)break;if(c>=i){let p=u.dom.getBoundingClientRect();if(t.push(p.height),o){let d=u.dom.lastChild,m=d?ic(d):[];if(m.length){let b=m[m.length-1],A=l?b.right-p.left:p.right-b.left;A>a&&(a=A,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Gt.RTL:Gt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Nn){let s=r.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=ic(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new sE(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=t.lineBlockAt(o).bottom-t.lineBlockAt(i).top;e.push(Me.replace({widget:new PA(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Me.set(e)}updateDeco(){let e=this.view.state.facet(sc).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=0,o=0,a=0,l=0;for(let h of this.view.state.facet(kE).map(u=>u(this.view)))if(h){let{left:u,right:f,top:p,bottom:d}=h;u!=null&&(s=Math.max(s,u)),f!=null&&(o=Math.max(o,f)),p!=null&&(a=Math.max(a,p)),d!=null&&(l=Math.max(l,d))}let c={left:i.left-s,top:i.top-a,right:i.right+o,bottom:i.bottom+l};b$(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Gt.LTR)}}function P$(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class PA extends Br{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function IE(n){let e=n.observer.selectionRange,t=e.focusNode&&RE(e.focusNode,e.focusOffset,0);if(!t)return null;let i=n.docView.nearest(t);if(!i)return null;if(i instanceof Nn){let r=t;for(;r.parentNode!=i.dom;)r=r.parentNode;let s=r.previousSibling;for(;s&&!Ut.get(s);)s=s.previousSibling;let o=s?Ut.get(s).posAtEnd:i.posAtStart;return{from:o,to:o,node:r,text:t}}else{for(;;){let{parent:s}=i;if(!s)return null;if(s instanceof Nn)break;i=s}let r=i.posAtStart;return{from:r,to:r+i.length,node:i.dom,text:t}}}function D$(n,e){let t=IE(n);if(!t)return Me.none;let{from:i,to:r,node:s,text:o}=t,a=e.mapPos(i,1),l=Math.max(a,e.mapPos(r,-1)),{state:c}=n,h=s.nodeType==3?s.nodeValue:new CE([],c).readRange(s.firstChild,null).text;if(l-a<h.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+h.length),is)==h)l=a+h.length;else if(c.doc.sliceString(Math.max(0,l-h.length),l,is)==h)a=l-h.length;else return Me.none;else if(c.doc.sliceString(a,l,is)!=h)return Me.none;let u=Ut.get(s);return u instanceof hE?u=u.widget.topView:u&&(u.parent=null),Me.set(Me.replace({widget:new N$(s,o,u),inclusive:!0}).range(a,l))}class N$ extends Br{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return hE}}function RE(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=Uu(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function L$(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class B${constructor(){this.changes=[]}compareRange(e,t){iy(e,t,this.changes)}comparePoint(e,t){iy(e,t,this.changes)}}function M$(n,e,t){let i=new B$;return vt.compare(n,e,t,i),i.changes}function $$(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function F$(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),s=e-r.from;if(r.length==0)return ve.cursor(e);s==0?t=1:s==r.length&&(t=-1);let o=s,a=s;t<0?o=ni(r.text,s,!1):a=ni(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=ni(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=ni(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return ve.range(o+r.from,a+r.from)}function W$(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function U$(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function tm(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function DA(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function NA(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function ay(n,e,t){let i,r,s,o,a,l,c,h;for(let p=n.firstChild;p;p=p.nextSibling){let d=ic(p);for(let m=0;m<d.length;m++){let b=d[m];r&&tm(r,b)&&(b=DA(NA(b,r.bottom),r.top));let A=W$(e,b),g=U$(t,b);if(A==0&&g==0)return p.nodeType==3?LA(p,e,t):ay(p,e,t);(!i||o>g||o==g&&s>A)&&(i=p,r=b,s=A,o=g),A==0?t>b.bottom&&(!c||c.bottom<b.bottom)?(a=p,c=b):t<b.top&&(!h||h.top>b.top)&&(l=p,h=b):c&&tm(c,b)?c=NA(c,b.bottom):h&&tm(h,b)&&(h=DA(h,b.top))}}if(c&&c.bottom>=t?(i=a,r=c):h&&h.top<=t&&(i=l,r=h),!i)return{node:n,offset:0};let u=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return LA(i,u,t);if(!s&&i.contentEditable=="true")return ay(i,u,t);let f=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:f}}function LA(n,e,t){let i=n.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=rc(n,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let h=l[c];if(h.top==h.bottom)continue;o||(o=e-h.left);let u=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&u<s){let f=e>=(h.left+h.right)/2,p=f;if((He.chrome||He.gecko)&&rc(n,a).getBoundingClientRect().left==h.right&&(p=!f),u<=0)return{node:n,offset:a+(p?1:0)};r=a+(p?1:0),s=u}}}return{node:n,offset:r>-1?r:o>0?n.nodeValue.length:0}}function QE(n,{x:e,y:t},i,r=-1){var s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:c}=n.viewState,h=t-a;if(h<0)return 0;if(h>c)return n.state.doc.length;for(let A=n.defaultLineHeight/2,g=!1;l=n.elementAtHeight(h),l.type!=Ct.Text;)for(;h=r>0?l.bottom+A:l.top-A,!(h>=0&&h<=c);){if(g)return i?null:0;g=!0,r=-r}t=a+h;let u=l.from;if(u<n.viewport.from)return n.viewport.from==0?0:i?null:BA(n,o,l,e,t);if(u>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:i?null:BA(n,o,l,e,t);let f=n.dom.ownerDocument,p=n.root.elementFromPoint?n.root:f,d=p.elementFromPoint(e,t);d&&!n.contentDOM.contains(d)&&(d=null),d||(e=Math.max(o.left+1,Math.min(o.right-1,e)),d=p.elementFromPoint(e,t),d&&!n.contentDOM.contains(d)&&(d=null));let m,b=-1;if(d&&((s=n.docView.nearest(d))===null||s===void 0?void 0:s.isEditable)!=!1){if(f.caretPositionFromPoint){let A=f.caretPositionFromPoint(e,t);A&&({offsetNode:m,offset:b}=A)}else if(f.caretRangeFromPoint){let A=f.caretRangeFromPoint(e,t);A&&({startContainer:m,startOffset:b}=A,He.safari&&z$(m,b,e)&&(m=void 0))}}if(!m||!n.docView.dom.contains(m)){let A=Nn.find(n.docView,u);if(!A)return h>l.top+l.height/2?l.to:l.from;({node:m,offset:b}=ay(A.dom,e,t))}return n.docView.posFromDOM(m,b)}function BA(n,e,t,i,r){let s=Math.round((i-e.left)*n.defaultCharacterWidth);n.lineWrapping&&t.height>n.defaultLineHeight*1.5&&(s+=Math.floor((r-t.top)/n.defaultLineHeight)*n.viewState.heightOracle.lineLength);let o=n.state.sliceDoc(t.from,t.to);return t.from+Hg(o,s,n.state.tabSize)}function z$(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return rc(n,i-1,i).getBoundingClientRect().left>t}function j$(n,e,t,i){let r=n.state.doc.lineAt(e.head),s=!i||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let l=n.dom.getBoundingClientRect(),c=n.textDirectionAt(r.from),h=n.posAtCoords({x:t==(c==Gt.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(h!=null)return ve.cursor(h,t?-1:1)}let o=Nn.find(n.docView,e.head),a=o?t?o.posAtEnd:o.posAtStart:t?r.to:r.from;return ve.cursor(a,t?-1:1)}function MA(n,e,t,i){let r=n.state.doc.lineAt(e.head),s=n.bidiSpans(r),o=n.textDirectionAt(r.from);for(let a=e,l=null;;){let c=Q$(r,s,o,a,t),h=TE;if(!c){if(r.number==(t?n.state.doc.lines:1))return a;h=`
`,r=n.state.doc.line(r.number+(t?1:-1)),s=n.bidiSpans(r),c=ve.cursor(t?r.from:r.to)}if(l){if(!l(h))return a}else{if(!i)return c;l=i(h)}a=c}}function H$(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return s=>{let o=i(s);return r==Dn.Space&&(r=o),r==o}}function G$(n,e,t,i){let r=e.head,s=t?1:-1;if(r==(t?n.state.doc.length:0))return ve.cursor(r,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(r),h=n.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=n.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+h}let u=l.left+o,f=i!=null?i:n.defaultLineHeight>>1;for(let p=0;;p+=10){let d=a+(f+p)*s,m=QE(n,{x:u,y:d},!1,s);if(d<l.top||d>l.bottom||(s<0?m<r:m>r))return ve.cursor(m,e.assoc,void 0,o)}}function nm(n,e,t){let i=n.state.facet(xE).map(r=>r(n));for(;;){let r=!1;for(let s of i)s.between(t.from-1,t.from+1,(o,a,l)=>{t.from>o&&t.from<a&&(t=e.from>t.from?ve.cursor(o,1):ve.cursor(a,-1),r=!0)});if(!r)return t}}class V${constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in pn){let i=pn[t];e.contentDOM.addEventListener(t,r=>{!$A(e,r)||this.ignoreDuringComposition(r)||t=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():i(e,r))}),this.registeredEvents.push(t)}He.chrome&&He.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,He.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let r;this.customHandlers=[];for(let s of t)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{!$A(e,a)||this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,t,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,t)||i.defaultPrevented)return!0}catch(o){ri(t.state,o)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,t,e)}catch(s){ri(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(He.android&&He.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return He.ios&&(i=PE.find(r=>r.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Pl(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:He.safari&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!He.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PE=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],DE=[16,17,18,20,91,92,224,225];class X${constructor(e,t,i,r){this.view=e,this.style=i,this.mustSelect=r,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(pt.allowMultipleSelections)&&Y$(e,t),this.dragMove=Z$(e,t),this.dragging=q$(e,t)&&Z0(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Y$(n,e){let t=n.state.facet(gE);return t.length?t[0](e):He.mac?e.metaKey:e.ctrlKey}function Z$(n,e){let t=n.state.facet(yE);return t.length?t[0](e):He.mac?!e.altKey:!e.ctrlKey}function q$(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=Fu(n.root);if(i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function $A(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Ut.get(t))&&i.ignoreEvent(e))return!1;return!0}const pn=Object.create(null),NE=He.ie&&He.ie_version<15||He.ios&&He.webkit_version<604;function K$(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),LE(n,t.value)},50)}function LE(n,e){let{state:t}=n,i,r=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(ly!=null&&t.selection.ranges.every(l=>l.empty)&&ly==s.toString()){let l=-1;i=t.changeByRange(c=>{let h=t.doc.lineAt(c.from);if(h.from==l)return{range:c};l=h.from;let u=t.toText((o?s.line(r++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:u},range:ve.cursor(c.from+u.length)}})}else o?i=t.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:ve.cursor(l.from+c.length)}}):i=t.replaceSelection(s);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}pn.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():DE.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};let BE=0;pn.touchstart=(n,e)=>{BE=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};pn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};pn.mousedown=(n,e)=>{if(n.observer.flush(),BE>Date.now()-2e3&&Z0(e)==1)return;let t=null;for(let i of n.state.facet(OE))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=tF(n,e)),t){let i=n.root.activeElement!=n.contentDOM;i&&n.observer.ignore(()=>iE(n.contentDOM)),n.inputState.startMouseSelection(new X$(n,e,t,i))}};function FA(n,e,t,i){if(i==1)return ve.cursor(e,t);if(i==2)return F$(n.state,e,t);{let r=Nn.find(n.docView,e),s=n.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,ve.range(o,a)}}let ME=(n,e)=>n>=e.top&&n<=e.bottom,WA=(n,e,t)=>ME(e,t)&&n>=t.left&&n<=t.right;function J$(n,e,t,i){let r=Nn.find(n.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&WA(t,i,o))return-1;let a=r.coordsAt(s,1);return a&&WA(t,i,a)?1:o&&ME(i,o)?-1:1}function UA(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:J$(n,t,e.clientX,e.clientY)}}const eF=He.ie&&He.ie_version<=11;let zA=null,jA=0,HA=0;function Z0(n){if(!eF)return n.detail;let e=zA,t=HA;return zA=n,HA=Date.now(),jA=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(jA+1)%3:1}function tF(n,e){let t=UA(n,e),i=Z0(e),r=n.state.selection,s=t,o=e;return{update(a){a.docChanged&&(t&&(t.pos=a.changes.mapPos(t.pos)),r=r.map(a.changes),o=null)},get(a,l,c){let h;if(o&&a.clientX==o.clientX&&a.clientY==o.clientY?h=s:(h=s=UA(n,a),o=a),!h||!t)return r;let u=FA(n,h.pos,h.bias,i);if(t.pos!=h.pos&&!l){let f=FA(n,t.pos,t.bias,i),p=Math.min(f.from,u.from),d=Math.max(f.to,u.to);u=p<u.from?ve.range(p,d):ve.range(d,p)}return l?r.replaceRange(r.main.extend(u.from,u.to)):c?r.addRange(u):ve.create([u])}}}pn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:i}=n.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function GA(n,e,t,i){if(!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=n.inputState,o=i&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,a={from:r,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}pn.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),r=0,s=()=>{++r==t.length&&GA(n,e,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(t[o])}}else GA(n,e,e.dataTransfer.getData("Text"),!0)};pn.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=NE?null:e.clipboardData;t?(LE(n,t.getData("text/plain")),e.preventDefault()):K$(n)};function nF(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function iF(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let ly=null;pn.copy=pn.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=iF(n.state);if(!t&&!r)return;ly=r?t:null;let s=NE?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):nF(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function $E(n){setTimeout(()=>{n.hasFocus!=n.inputState.notifiedFocused&&n.update([])},10)}pn.focus=$E;pn.blur=n=>{n.observer.clearSelectionRange(),$E(n)};function FE(n,e){if(n.docView.compositionDeco.size){n.inputState.rapidCompositionStart=e;try{n.update([])}finally{n.inputState.rapidCompositionStart=!1}}}pn.compositionstart=pn.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0,n.docView.compositionDeco.size&&(n.observer.flush(),FE(n,!0)))};pn.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,setTimeout(()=>{n.inputState.composing<0&&FE(n,!1)},50)};pn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};pn.beforeinput=(n,e)=>{var t;let i;if(He.chrome&&He.android&&(i=PE.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const VA=["pre-wrap","normal","pre-line","break-spaces"];class rF{constructor(){this.doc=Ot.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return VA.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,s){let o=VA.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.lineLength=r,a){this.heightSamples={};for(let l=0;l<s.length;l++){let c=s[l];c<0?l++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class sF{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class rs{constructor(e,t,i,r,s){this.from=e,this.length=t,this.top=i,this.height=r,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new rs(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Qt=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Qt||(Qt={}));const pu=.001;class jn{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>pu&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return jn.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let s=this;for(let o=r.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:c,toB:h}=r[o],u=s.lineAt(a,Qt.ByPosNoHeight,t,0,0),f=u.to>=l?u:s.lineAt(l,Qt.ByPosNoHeight,t,0,0);for(h+=f.to-l,l=f.to;o>0&&u.from<=r[o-1].toA;)a=r[o-1].fromA,c=r[o-1].fromB,o--,a<u.from&&(u=s.lineAt(a,Qt.ByPosNoHeight,t,0,0));c+=u.from-a,a=u.from;let p=q0.build(i,e,c,h);s=s.replace(a,l,p)}return s.updateHeight(i,0)}static empty(){return new Kn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,s=0;for(;;)if(t==i)if(r>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new oF(jn.of(e.slice(0,t)),o,jn.of(e.slice(i)))}}jn.prototype.size=1;class WE extends jn{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,r){return new rs(r,this.length,i,this.height,this.type)}lineAt(e,t,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,t,i,r,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Kn extends WE{constructor(e,t){super(e,t,Ct.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof Kn||r instanceof bn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof bn?r=new Kn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):jn.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class bn extends jn{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:r,lineHeight:this.height/(r-i+1)}}blockAt(e,t,i,r){let{firstLine:s,lastLine:o,lineHeight:a}=this.lines(t,r),l=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:h}=t.line(s+l);return new rs(c,h,i+a*l,a,Ct.Text)}lineAt(e,t,i,r,s){if(t==Qt.ByHeight)return this.blockAt(e,i,r,s);if(t==Qt.ByPosNoHeight){let{from:u,to:f}=i.lineAt(e);return new rs(u,f-u,0,0,Ct.Text)}let{firstLine:o,lineHeight:a}=this.lines(i,s),{from:l,length:c,number:h}=i.lineAt(e);return new rs(l,c,r+a*(h-o),a,Ct.Text)}forEachLine(e,t,i,r,s,o){let{firstLine:a,lineHeight:l}=this.lines(i,s);for(let c=Math.max(e,s),h=Math.min(s+this.length,t);c<=h;){let u=i.lineAt(c);c==e&&(r+=l*(u.number-a)),o(new rs(u.from,u.length,r,l,Ct.Text)),r+=l,c=u.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let s=i[i.length-1];s instanceof bn?i[i.length-1]=new bn(s.length+r):i.push(null,new bn(r-1))}if(e>0){let s=i[0];s instanceof bn?i[0]=new bn(e+s.length):i.unshift(new bn(e-1),null)}return jn.of(i)}decomposeLeft(e,t){t.push(new bn(e-1),null)}decomposeRight(e,t){t.push(null,new bn(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],a=Math.max(t,r.from),l=-1,c=e.heightChanged;for(r.from>t&&o.push(new bn(r.from-t-1).updateHeight(e,t));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let f=r.heights[r.index++];l==-1?l=f:Math.abs(f-l)>=pu&&(l=-2);let p=new Kn(u,f);p.outdated=!1,o.push(p),a+=u+1}a<=s&&o.push(null,new bn(s-a).updateHeight(e,a));let h=jn.of(o);return e.heightChanged=c||l<0||Math.abs(h.height-this.height)>=pu||Math.abs(l-this.lines(e.doc,t).lineHeight)>=pu,h}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class oF extends jn{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=t==Qt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,t,i,r,s):this.right.lineAt(e,t,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let h=t==Qt.ByPosNoHeight?Qt.ByPosNoHeight:Qt.ByPos;return l?c.join(this.right.lineAt(a,h,i,o,a)):this.left.lineAt(a,h,i,r,s).join(c)}forEachLine(e,t,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,r,s,o),t>=l&&this.right.forEachLine(e,t,i,a,l,o);else{let c=this.lineAt(l,Qt.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,a,l,o)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&XA(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),XA(s,a)}return jn.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?jn.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return r&&r.from<=t+s.length&&r.more?l=s=s.updateHeight(e,t,i,r):s.updateHeight(e,t,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function XA(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof bn&&(i=n[e+1])instanceof bn&&n.splice(e-1,3,new bn(t.length+1+i.length))}const aF=5;class q0{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Kn?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Kn(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new WE(s,r,i.type)):(s||r>=aF)&&this.addLineDeco(r,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Kn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new bn(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Kn)return e;let t=new Kn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==Ct.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Ct.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Kn)&&!this.isCovered?this.nodes.push(new Kn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Kn&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let s=new q0(i,e);return vt.spans(t,i,r,s,0),s.finish(i)}}function lF(n,e,t){let i=new cF;return vt.compare(n,e,t,i,0),i.changes}class cF{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&iy(e,t,this.changes,5)}}function hF(n,e){let t=n.getBoundingClientRect(),i=Math.max(0,t.left),r=Math.min(innerWidth,t.right),s=Math.max(0,t.top),o=Math.min(innerHeight,t.bottom),a=n.ownerDocument.body;for(let l=n.parentNode;l&&l!=a;)if(l.nodeType==1){let c=l,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let u=c.getBoundingClientRect();i=Math.max(i,u.left),r=Math.min(r,u.right),s=Math.max(s,u.top),o=Math.min(o,u.bottom)}l=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(l.nodeType==11)l=l.host;else break;return{left:i-t.left,right:Math.max(i,r)-t.left,top:s-(t.top+e),bottom:Math.max(s,o)-(t.top+e)}}function uF(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class im{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return Me.replace({widget:new fF(this.size,e)}).range(this.from,this.to)}}class fF extends Br{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class YA{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new rF,this.scaler=KA,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Gt.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(sc).filter(t=>typeof t!="function"),this.heightMap=jn.empty().applyChanges(this.stateDeco,Ot.empty,this.heightOracle.setDoc(e.doc),[new Sr(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Me.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Ph(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?KA:new mF(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Al(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(sc).filter(c=>typeof c!="function");let r=e.changedRanges,s=Sr.extendWithRanges(r,lF(i,this.stateDeco,e?e.changes:en.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Gt.RTL:Gt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let l=0,c=0,h=parseInt(i.paddingTop)||0,u=parseInt(i.paddingBottom)||0;(this.paddingTop!=h||this.paddingBottom!=u)&&(this.paddingTop=h,this.paddingBottom=u,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let f=(this.printing?uF:hF)(t,this.paddingTop),p=f.top-this.pixelViewport.top,d=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView)return 0;let b=t.clientWidth;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=b,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let g=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(g)&&(o=!0),o||r.lineWrapping&&Math.abs(b-this.contentDOMWidth)>r.charWidth){let{lineHeight:v,charWidth:O}=e.docView.measureTextSize();o=r.refresh(s,v,O,b/O,g),o&&(e.docView.minWidth=0,l|=8)}p>0&&d>0?c=Math.max(p,d):p<0&&d<0&&(c=Math.min(p,d)),r.heightChanged=!1;for(let v of this.viewports){let O=v.from==this.viewport.from?g:e.docView.measureVisibleLineHeights(v);this.heightMap=this.heightMap.updateHeight(r,0,o,new sF(v.from,O))}r.heightChanged&&(l|=2)}let A=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return A&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(l&2||A)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:a}=this,l=new Ph(r.lineAt(o-i*1e3,Qt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,Qt.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=r.lineAt(c,Qt.ByPos,s,0,0),f;t.y=="center"?f=(u.top+u.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&c<l.from?f=u.top:f=u.bottom-h,l=new Ph(r.lineAt(f-1e3/2,Qt.ByHeight,s,0,0).from,r.lineAt(f+h+1e3/2,Qt.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Ph(this.heightMap.lineAt(i,Qt.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Qt.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Qt.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,Qt.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new im(t.mapPos(r.from),t.mapPos(r.to),r.size));return i}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Gt.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let r=dF(i.from,i.to,this.stateDeco);if(r.total<4e3)continue;let s,o;if(this.heightOracle.lineWrapping){let c=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;s=Dh(r,(this.visibleTop-i.top-c)/i.height),o=Dh(r,(this.visibleBottom-i.top+c)/i.height)}else{let c=r.total*this.heightOracle.charWidth,h=2e3*this.heightOracle.charWidth;s=Dh(r,(this.pixelViewport.left-h)/c),o=Dh(r,(this.pixelViewport.right+h)/c)}let a=[];s>i.from&&a.push({from:i.from,to:s}),o<i.to&&a.push({from:o,to:i.to});let l=this.state.selection.main;l.from>=i.from&&l.from<=i.to&&qA(a,l.from-10,l.from+10),!l.empty&&l.to>=i.from&&l.to<=i.to&&qA(a,l.to-10,l.to+10);for(let{from:c,to:h}of a)h-c>1e3&&t.push(pF(e,u=>u.from>=i.from&&u.to<=i.to&&Math.abs(u.from-c)<1e3&&Math.abs(u.to-h)<1e3)||new im(c,h,this.gapSize(i,c,h,r)))}return t}gapSize(e,t,i,r){let s=ZA(r,i)-ZA(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){im.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Me.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];vt.spans(e,this.viewport.from,this.viewport.to,{span(r,s){t.push({from:r,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=t[s].from||r.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Al(this.heightMap.lineAt(e,Qt.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Al(this.heightMap.lineAt(this.scaler.fromDOM(e),Qt.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Al(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ph{constructor(e,t){this.from=e,this.to=t}}function dF(n,e,t){let i=[],r=n,s=0;return vt.spans(t,n,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Dh({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function ZA(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function qA(n,e,t){for(let i=0;i<n.length;i++){let r=n[i];if(r.from<t&&r.to>e){let s=[];r.from<e&&s.push({from:r.from,to:e}),r.to>t&&s.push({from:t,to:r.to}),n.splice(i,1,...s),i+=s.length-1}}}function pF(n,e){for(let t of n)if(e(t))return t}const KA={toDOM(n){return n},fromDOM(n){return n},scale:1};class mF{constructor(e,t,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=t.lineAt(a,Qt.ByPos,e,0,0).top,h=t.lineAt(l,Qt.ByPos,e,0,0).bottom;return r+=h-c,{from:a,to:l,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function Al(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new rs(n.from,n.length,t,i-t,Array.isArray(n.type)?n.type.map(r=>Al(r,e)):n.type)}const Nh=je.define({combine:n=>n.join(" ")}),cy=je.define({combine:n=>n.indexOf(!0)>-1}),hy=vs.newName(),UE=vs.newName(),zE=vs.newName(),jE={"&light":"."+UE,"&dark":"."+zE};function uy(n,e,t){return new vs(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const gF=uy("."+hy,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},jE),yF={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},rm=He.ie&&He.ie_version<=11;class OF{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new v$,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let s of r)this.queue.push(s);(He.ie&&He.ie_version<=11||He.ios&&e.composing)&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),rm&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(Wc)?t.root.activeElement!=this.dom:!Xg(t.dom,i))return;let r=i.anchorNode&&t.docView.nearest(i.anchorNode);r&&r.ignoreEvent(e)||((He.ie&&He.ie_version<=11||He.android&&He.chrome)&&!t.state.selection.main.empty&&i.focusNode&&Wu(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=Fu(e),i=He.safari&&e.nodeType==11&&y$()==this.view.contentDOM&&bF(this.view)||t;return this.selectionRange.eq(i)?!1:(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,yF),rm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),rm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Pl(this.view.contentDOM,i.key,i.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(r=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:r}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:r}=this.processRecords(),s=this.selectionChanged&&Xg(this.dom,this.selectionRange);if(t<0&&!s)return;this.selectionChanged=!1;let o=this.view.state,a=this.onChange(t,i,r);return this.view.state==o&&this.view.update([]),a}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=JA(t,e.previousSibling||e.target.previousSibling,-1),r=JA(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function JA(n,e,t){for(;e;){let i=Ut.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function bF(n){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return Wu(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}function vF(n,e,t,i){let r,s,o=n.state.selection.main;if(e>-1){let a=n.docView.domBoundsAround(e,t,0);if(!a||n.state.readOnly)return!1;let{from:l,to:c}=a,h=n.docView.impreciseHead||n.docView.impreciseAnchor?[]:AF(n),u=new CE(h,n.state);u.readRange(a.startDOM,a.endDOM);let f=o.from,p=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||He.android&&u.text.length<c-l)&&(f=o.to,p="end");let d=wF(n.state.doc.sliceString(l,c,is),u.text,f-l,p);d&&(He.chrome&&n.inputState.lastKeyCode==13&&d.toB==d.from+2&&u.text.slice(d.from,d.toB)==is+is&&d.toB--,r={from:l+d.from,to:l+d.toA,insert:Ot.of(u.text.slice(d.from,d.toB).split(is))}),s=_F(h,l)}else if(n.hasFocus||!n.state.facet(Wc)){let a=n.observer.selectionRange,{impreciseHead:l,impreciseAnchor:c}=n.docView,h=l&&l.node==a.focusNode&&l.offset==a.focusOffset||!oa(n.contentDOM,a.focusNode)?n.state.selection.main.head:n.docView.posFromDOM(a.focusNode,a.focusOffset),u=c&&c.node==a.anchorNode&&c.offset==a.anchorOffset||!oa(n.contentDOM,a.anchorNode)?n.state.selection.main.anchor:n.docView.posFromDOM(a.anchorNode,a.anchorOffset);(h!=o.head||u!=o.anchor)&&(s=ve.single(u,h))}if(!r&&!s)return!1;if(!r&&i&&!o.empty&&s&&s.main.empty?r={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,o.to)}:r&&r.from>=o.from&&r.to<=o.to&&(r.from!=o.from||r.to!=o.to)&&o.to-o.from-(r.to-r.from)<=4?r={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,r.from).append(r.insert).append(n.state.doc.slice(r.to,o.to))}:(He.mac||He.android)&&r&&r.from==r.to&&r.from==o.head-1&&r.insert.toString()=="."&&(r={from:o.from,to:o.to,insert:Ot.of([" "])}),r){let a=n.state;if(He.ios&&n.inputState.flushIOSKey(n)||He.android&&(r.from==o.from&&r.to==o.to&&r.insert.length==1&&r.insert.lines==2&&Pl(n.contentDOM,"Enter",13)||r.from==o.from-1&&r.to==o.to&&r.insert.length==0&&Pl(n.contentDOM,"Backspace",8)||r.from==o.from&&r.to==o.to+1&&r.insert.length==0&&Pl(n.contentDOM,"Delete",46)))return!0;let l=r.insert.toString();if(n.state.facet(vE).some(u=>u(n,r.from,r.to,l)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let c;if(r.from>=o.from&&r.to<=o.to&&r.to-r.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==r.from+r.insert.length)&&n.inputState.composing<0){let u=o.from<r.from?a.sliceDoc(o.from,r.from):"",f=o.to>r.to?a.sliceDoc(r.to,o.to):"";c=a.replaceSelection(n.state.toText(u+r.insert.sliceString(0,void 0,n.state.lineBreak)+f))}else{let u=a.changes(r),f=s&&!a.selection.main.eq(s.main)&&s.main.to<=u.newLength?s.main:void 0;if(a.selection.ranges.length>1&&n.inputState.composing>=0&&r.to<=o.to&&r.to>=o.to-10){let p=n.state.sliceDoc(r.from,r.to),d=IE(n)||n.state.doc.lineAt(o.head),m=o.to-r.to,b=o.to-o.from;c=a.changeByRange(A=>{if(A.from==o.from&&A.to==o.to)return{changes:u,range:f||A.map(u)};let g=A.to-m,v=g-p.length;if(A.to-A.from!=b||n.state.sliceDoc(v,g)!=p||d&&A.to>=d.from&&A.from<=d.to)return{range:A};let O=a.changes({from:v,to:g,insert:r.insert}),_=A.to-o.to;return{changes:O,range:f?ve.range(Math.max(0,f.anchor+_),Math.max(0,f.head+_)):A.map(O)}})}else c={changes:u,selection:f&&a.selection.replaceRange(f)}}let h="input.type";return n.composing&&(h+=".compose",n.inputState.compositionFirstChange&&(h+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(c,{scrollIntoView:!0,userEvent:h}),!0}else if(s&&!s.main.eq(o)){let a=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:s,scrollIntoView:a,userEvent:l}),!0}else return!1}function wF(n,e,t,i){let r=Math.min(n.length,e.length),s=0;for(;s<r&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}return o<s&&n.length<e.length?(s-=t<=s&&t>=o?s-t:0,a=s+(a-o),o=s):a<s&&(s-=t<=s&&t>=a?s-t:0,o=s+(o-a),a=s),{from:s,toA:o,toB:a}}function AF(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new RA(t,i)),(r!=t||s!=i)&&e.push(new RA(r,s))),e}function _F(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?ve.single(t+e,i+e):null}class Ue{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||w$(e.parent)||document,this.viewState=new YA(e.state||pt.create(e)),this.plugins=this.state.facet(vl).map(t=>new em(t));for(let t of this.plugins)t.update(this);this.observer=new OF(this,(t,i,r)=>vF(this,t,i,r),t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new V$(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new QA(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof nn?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,s=this.state;for(let a of e){if(a.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=a.state}if(this.destroyed){this.viewState.state=s;return}if(this.observer.clear(),s.facet(pt.phrases)!=this.state.facet(pt.phrases))return this.setState(s);r=ju.create(this,s,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let a of e){if(o&&(o=o.map(a.changes)),a.scrollIntoView){let{main:l}=a.state.selection;o=new zu(l.empty?l:ve.cursor(l.head,l.head>l.anchor?-1:1))}for(let l of a.effects)l.is(CA)&&(o=l.value)}this.viewState.update(r,o),this.bidiCache=Hu.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(wl)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(a=>a.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Nh)!=r.state.facet(Nh)&&(this.viewState.mustMeasureContent=!0),(t||i||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let a of this.state.facet(ry))a(r)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new YA(e),this.plugins=e.facet(vl).map(i=>new em(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new QA(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(vl),i=e.state.facet(vl);if(t!=i){let r=[];for(let s of i){let o=t.indexOf(s);if(o<0)r.push(new em(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let i=0;;i++){this.updateState=1;let r=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let o=[];s&4||([this.measureRequests,o]=[o,this.measureRequests]);let a=o.map(u=>{try{return u.read(this)}catch(f){return ri(this.state,f),e1}}),l=ju.create(this,this.state,[]),c=!1,h=!1;l.flags|=s,t?t.flags|=s:t=l,this.updateState=2,l.empty||(this.updatePlugins(l),this.inputState.update(l),this.updateAttrs(),c=this.docView.update(l));for(let u=0;u<o.length;u++)if(a[u]!=e1)try{let f=o[u];f.write&&f.write(a[u],this)}catch(f){ri(this.state,f)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,h=!0),c&&this.docView.updateSelection(!0),this.viewport.from==r.from&&this.viewport.to==r.to&&!h&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let i of this.state.facet(ry))i(t)}get themeClasses(){return hy+" "+(this.state.facet(cy)?zE:UE)+" "+this.state.facet(Nh)}updateAttrs(){let e=t1(this,AE,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Wc)?"true":"false",class:"cm-content",style:`${He.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),t1(this,_E,t);let i=this.observer.ignore(()=>{let r=ny(this.contentDOM,this.contentAttrs,t),s=ny(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(Ue.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(wl),vs.mount(this.root,this.styleModules.concat(gF).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return nm(this,e,MA(this,e,t,i))}moveByGroup(e,t){return nm(this,e,MA(this,e,t,i=>H$(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return j$(this,e,t,i)}moveVertically(e,t,i){return nm(this,e,G$(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),QE(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Yo.find(s,e-r.from,-1,t)];return ed(i,o.dir==Gt.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(wE)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>xF)return EE(e.length);let t=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t)return r.order;let i=R$(e.text,t);return this.bidiCache.push(new Hu(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||He.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{iE(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return CA.of(new zu(typeof e=="number"?ve.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Zt.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=vs.newName(),r=[Nh.of(i),wl.of(uy(`.${i}`,e))];return t&&t.dark&&r.push(cy.of(!0)),r}static baseTheme(e){return Oo.lowest(wl.of(uy("."+hy,e,jE)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Ut.get(i)||Ut.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}}Ue.styleModule=wl;Ue.inputHandler=vE;Ue.perLineTextDirection=wE;Ue.exceptionSink=bE;Ue.updateListener=ry;Ue.editable=Wc;Ue.mouseSelectionStyle=OE;Ue.dragMovesSelection=yE;Ue.clickAddsSelectionRange=gE;Ue.decorations=sc;Ue.atomicRanges=xE;Ue.scrollMargins=kE;Ue.darkTheme=cy;Ue.contentAttributes=_E;Ue.editorAttributes=AE;Ue.lineWrapping=Ue.contentAttributes.of({class:"cm-lineWrapping"});Ue.announce=et.define();const xF=4096,e1={};class Hu{constructor(e,t,i,r){this.from=e,this.to=t,this.dir=i,this.order=r}static update(e,t){if(t.empty)return e;let i=[],r=e.length?e[e.length-1].dir:Gt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!t.touchesRange(o.from,o.to)&&i.push(new Hu(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}}function t1(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(n):s;o&&ty(o,t)}return t}const kF=He.mac?"mac":He.windows?"win":He.linux?"linux":"key";function SF(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function sm(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const EF=Ue.domEventHandlers({keydown(n,e){return GE(HE(e.state),n,e,"editor")}}),bo=je.define({enables:EF}),n1=new WeakMap;function HE(n){let e=n.facet(bo),t=n1.get(e);return t||n1.set(e,t=IF(e.reduce((i,r)=>i.concat(r),[]))),t}function TF(n,e,t){return GE(HE(n.state),e,n,t)}let qr=null;const CF=4e3;function IF(n,e=kF){let t=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c)=>{let h=t[o]||(t[o]=Object.create(null)),u=a.split(/ (?!$)/).map(d=>SF(d,e));for(let d=1;d<u.length;d++){let m=u.slice(0,d).join(" ");r(m,!0),h[m]||(h[m]={preventDefault:!0,commands:[b=>{let A=qr={view:b,prefix:m,scope:o};return setTimeout(()=>{qr==A&&(qr=null)},CF),!0}]})}let f=u.join(" ");r(f,!1);let p=h[f]||(h[f]={preventDefault:!1,commands:[]});p.commands.push(l),c&&(p.preventDefault=!0)};for(let o of n){let a=o[e]||o.key;if(!!a)for(let l of o.scope?o.scope.split(" "):["editor"])s(l,a,o.run,o.preventDefault),o.shift&&s(l,"Shift-"+a,o.shift,o.preventDefault)}return t}function GE(n,e,t,i){let r=g$(e),s=r.length==1&&r!=" ",o="",a=!1;qr&&qr.view==t&&qr.scope==i&&(o=qr.prefix+" ",(a=DE.indexOf(e.keyCode)<0)&&(qr=null));let l=u=>{if(u){for(let f of u.commands)if(f(t))return!0;u.preventDefault&&(a=!0)}return!1},c=n[i],h;if(c){if(l(c[o+sm(r,e,!s)]))return!0;if(s&&(e.shiftKey||e.altKey||e.metaKey)&&(h=ws[e.keyCode])&&h!=r){if(l(c[o+sm(h,e,!0)]))return!0}else if(s&&e.shiftKey&&l(c[o+sm(r,e,!0)]))return!0}return a}const VE=!He.ios,_l=je.define({combine(n){return Lr(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function XE(n={}){return[_l.of(n),RF,QF]}class YE{constructor(e,t,i,r,s){this.left=e,this.top=t,this.width=i,this.height=r,this.className=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const RF=Zt.fromClass(class{constructor(n){this.view=n,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=n.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=n.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),n.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(_l).cursorBlinkRate+"ms"}update(n){let e=n.startState.facet(_l)!=n.state.facet(_l);(e||n.selectionSet||n.geometryChanged||n.viewportChanged)&&this.view.requestMeasure(this.measureReq),n.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:n}=this.view,e=n.facet(_l),t=n.selection.ranges.map(r=>r.empty?[]:PF(this.view,r)).reduce((r,s)=>r.concat(s)),i=[];for(let r of n.selection.ranges){let s=r==n.selection.main;if(r.empty?!s||VE:e.drawRangeCursor){let o=DF(this.view,r,s);o&&i.push(o)}}return{rangePieces:t,cursors:i}}drawSel({rangePieces:n,cursors:e}){if(n.length!=this.rangePieces.length||n.some((t,i)=>!t.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let t of n)this.selectionLayer.appendChild(t.draw());this.rangePieces=n}if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,r)=>i.adjust(t[r]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),ZE={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};VE&&(ZE[".cm-line"].caretColor="transparent !important");const QF=Oo.highest(Ue.theme(ZE));function qE(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Gt.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function i1(n,e,t){let i=ve.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:Ct.Text}}function r1(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Ct.Text))return i}return t}function PF(n,e){if(e.to<=n.viewport.from||e.from>=n.viewport.to)return[];let t=Math.max(e.from,n.viewport.from),i=Math.min(e.to,n.viewport.to),r=n.textDirection==Gt.LTR,s=n.contentDOM,o=s.getBoundingClientRect(),a=qE(n),l=window.getComputedStyle(s.firstChild),c=o.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),h=o.right-parseInt(l.paddingRight),u=r1(n,t),f=r1(n,i),p=u.type==Ct.Text?u:null,d=f.type==Ct.Text?f:null;if(n.lineWrapping&&(p&&(p=i1(n,t,p)),d&&(d=i1(n,i,d))),p&&d&&p.from==d.from)return b(A(e.from,e.to,p));{let v=p?A(e.from,null,p):g(u,!1),O=d?A(null,e.to,d):g(f,!0),_=[];return(p||u).to<(d||f).from-1?_.push(m(c,v.bottom,h,O.top)):v.bottom<O.top&&n.elementAtHeight((v.bottom+O.top)/2).type==Ct.Text&&(v.bottom=O.top=(v.bottom+O.top)/2),b(v).concat(_).concat(b(O))}function m(v,O,_,x){return new YE(v-a.left,O-a.top-.01,_-v,x-O+.01,"cm-selectionBackground")}function b({top:v,bottom:O,horizontal:_}){let x=[];for(let E=0;E<_.length;E+=2)x.push(m(_[E],v,_[E+1],O));return x}function A(v,O,_){let x=1e9,E=-1e9,T=[];function S(M,D,N,P,X){let Z=n.coordsAtPos(M,M==_.to?-2:2),K=n.coordsAtPos(N,N==_.from?2:-2);x=Math.min(Z.top,K.top,x),E=Math.max(Z.bottom,K.bottom,E),X==Gt.LTR?T.push(r&&D?c:Z.left,r&&P?h:K.right):T.push(!r&&P?c:K.left,!r&&D?h:Z.right)}let C=v!=null?v:_.from,B=O!=null?O:_.to;for(let M of n.visibleRanges)if(M.to>C&&M.from<B)for(let D=Math.max(M.from,C),N=Math.min(M.to,B);;){let P=n.state.doc.lineAt(D);for(let X of n.bidiSpans(P)){let Z=X.from+P.from,K=X.to+P.from;if(Z>=N)break;K>D&&S(Math.max(Z,D),v==null&&Z<=C,Math.min(K,N),O==null&&K>=B,X.dir)}if(D=P.to+1,D>=N)break}return T.length==0&&S(C,v==null,B,O==null,n.textDirection),{top:x,bottom:E,horizontal:T}}function g(v,O){let _=o.top+(O?v.top:v.bottom);return{top:_,bottom:_,horizontal:[]}}}function DF(n,e,t){let i=n.coordsAtPos(e.head,e.assoc||1);if(!i)return null;let r=qE(n);return new YE(i.left-r.left,i.top-r.top,-1,i.bottom-i.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const KE=et.define({map(n,e){return n==null?null:e.mapPos(n)}}),xl=yn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(KE)?i.value:t,n)}}),NF=Zt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(xl);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(xl)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(xl),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(xl)!=n&&this.view.dispatch({effects:KE.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function LF(){return[xl,NF]}function s1(n,e,t,i,r){e.lastIndex=0;for(let s=n.iterRange(t,i),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,o+a.index+a[0].length,a)}function BF(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:s}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class MF{constructor(e){let{regexp:t,decoration:i,boundary:r,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco=typeof i=="function"?i:()=>i,this.boundary=r,this.maxLength=s}createDeco(e){let t=new bs;for(let{from:i,to:r}of BF(e,this.maxLength))s1(e.state.doc,this.regexp,i,r,(s,o,a)=>t.add(s,o,this.getDeco(a,e,s)));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,h=Math.max(s.from,l.from),u=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){h=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){u=a;break}}let f=[],p;if(l==c)for(this.regexp.lastIndex=h-l.from;(p=this.regexp.exec(l.text))&&p.index<u-l.from;){let d=p.index+l.from;f.push(this.getDeco(p,e,d).range(d,d+p[0].length))}else s1(e.state.doc,this.regexp,h,u,(d,m,b)=>f.push(this.getDeco(b,e,d).range(d,m)));t=t.update({filterFrom:h,filterTo:u,filter:(d,m)=>d<h||m>u,add:f})}}return t}}const fy=/x/.unicode!=null?"gu":"g",$F=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\uFEFF\uFFF9-\uFFFC]`,fy),FF={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let om=null;function WF(){var n;if(om==null&&typeof document!="undefined"&&document.body){let e=document.body.style;om=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return om||!1}const mu=je.define({combine(n){let e=Lr(n,{render:null,specialChars:$F,addSpecialChars:null});return(e.replaceTabs=!WF())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,fy)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,fy)),e}});function JE(n={}){return[mu.of(n),UF()]}let o1=null;function UF(){return o1||(o1=Zt.fromClass(class{constructor(n){this.view=n,this.decorations=Me.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(mu)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new MF({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,s=Sn(e[0],0);if(s==9){let o=r.lineAt(i),a=t.state.tabSize,l=$c(o.text,a,i-o.from);return Me.replace({widget:new GF((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Me.replace({widget:new HF(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(mu);n.startState.facet(mu)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const zF="\u2022";function jF(n){return n>=32?zF:n==10?"\u2424":String.fromCharCode(9216+n)}class HF extends Br{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=jF(this.code),i=e.state.phrase("Control character")+" "+(FF[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let s=document.createElement("span");return s.textContent=t,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class GF extends Br{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function eT(){return XF}const VF=Me.line({class:"cm-activeLine"}),XF=Zt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){if(!i.empty)return Me.none;let r=n.lineBlockAt(i.head);r.from>e&&(t.push(VF.range(r.from)),e=r.from)}return Me.set(t)}},{decorations:n=>n.decorations}),dy=2e3;function YF(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),s=[];if(e.off>dy||t.off>dy||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=i;l<=r;l++){let c=n.doc.line(l);c.length<=a&&s.push(ve.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=i;l<=r;l++){let c=n.doc.line(l),h=Hg(c.text,o,n.tabSize,!0);if(h>-1){let u=Hg(c.text,a,n.tabSize);s.push(ve.range(c.from+h,c.from+u))}}}return s}function ZF(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function a1(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,s=r>dy?-1:r==i.length?ZF(n,e.clientX):$c(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:s,off:r}}function qF(n,e){let t=a1(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(t.line).from),o=r.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(r.changes)}},get(r,s,o){let a=a1(n,r);if(!a)return i;let l=YF(n.state,t,a);return l.length?o?ve.create(l.concat(i.ranges)):ve.create(l):i}}:null}function KF(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return Ue.mouseSelectionStyle.of((t,i)=>e(i)?qF(t,i):null)}const JF={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},e3={style:"cursor: crosshair"};function t3(n={}){let[e,t]=JF[n.key||"Alt"],i=Zt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)}}});return[i,Ue.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?e3:null})]}const am="-10000px";class tT{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){let t=e.state.facet(this.facet),i=t.filter(s=>s);if(t===this.input){for(let s of this.tooltipViews)s.update&&s.update(e);return!1}let r=[];for(let s=0;s<i.length;s++){let o=i[s],a=-1;if(!!o){for(let l=0;l<this.tooltips.length;l++){let c=this.tooltips[l];c&&c.create==o.create&&(a=l)}if(a<0)r[s]=this.createTooltipView(o);else{let l=r[s]=this.tooltipViews[a];l.update&&l.update(e)}}}for(let s of this.tooltipViews)r.indexOf(s)<0&&s.dom.remove();return this.input=t,this.tooltips=i,this.tooltipViews=r,!0}}function n3(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const lm=je.define({combine:n=>{var e,t,i;return{position:He.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||n3}}}),nT=Zt.fromClass(class{constructor(n){var e;this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=n.state.facet(lm);this.position=t.position,this.parent=t.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new tT(n,K0,i=>this.createTooltip(i)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(e=n.dom.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(lm);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=am,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;(n=this.view.dom.ownerDocument.defaultView)===null||n===void 0||n.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(lm).tooltipSpace(this.view)}}writeMeasure(n){let{editor:e,space:t}=n,i=[];for(let r=0;r<this.manager.tooltips.length;r++){let s=this.manager.tooltips[r],o=this.manager.tooltipViews[r],{dom:a}=o,l=n.pos[r],c=n.size[r];if(!l||l.bottom<=Math.max(e.top,t.top)||l.top>=Math.min(e.bottom,t.bottom)||l.right<Math.max(e.left,t.left)-.1||l.left>Math.min(e.right,t.right)+.1){a.style.top=am;continue}let h=s.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,u=h?7:0,f=c.right-c.left,p=c.bottom-c.top,d=o.offset||r3,m=this.view.textDirection==Gt.LTR,b=c.width>t.right-t.left?m?t.left:t.right-c.width:m?Math.min(l.left-(h?14:0)+d.x,t.right-f):Math.max(t.left,l.left-f+(h?14:0)-d.x),A=!!s.above;!s.strictSide&&(A?l.top-(c.bottom-c.top)-d.y<t.top:l.bottom+(c.bottom-c.top)+d.y>t.bottom)&&A==t.bottom-l.bottom>l.top-t.top&&(A=!A);let g=A?l.top-p-u-d.y:l.bottom+u+d.y,v=b+f;if(o.overlap!==!0)for(let O of i)O.left<v&&O.right>b&&O.top<g+p&&O.bottom>g&&(g=A?O.top-p-2-u:O.bottom+u+2);this.position=="absolute"?(a.style.top=g-n.parent.top+"px",a.style.left=b-n.parent.left+"px"):(a.style.top=g+"px",a.style.left=b+"px"),h&&(h.style.left=`${l.left+(m?d.x:-d.x)-(b+14-7)}px`),o.overlap!==!0&&i.push({left:b,top:g,right:v,bottom:g+p}),a.classList.toggle("cm-tooltip-above",A),a.classList.toggle("cm-tooltip-below",!A),o.positioned&&o.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=am}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),i3=Ue.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),r3={x:0,y:0},K0=je.define({enables:[nT,i3]}),Gu=je.define();class J0{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new tT(e,Gu,t=>this.createHostedView(t))}static create(e){return new J0(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const s3=K0.compute([Gu],n=>{let e=n.facet(Gu).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:J0.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class o3{constructor(e,t,i,r,s){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let i=this.view.coordsAtPos(t);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(a=>a.from<=t&&a.to>=t),s=r&&r.dir==Gt.RTL?-1:1,o=this.source(this.view,t,e.x<i.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:t};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>ri(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!a3(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!l3(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function a3(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function l3(n,e,t,i,r,s){let o=document.createRange(),a=n.domAtPos(e),l=n.domAtPos(t);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let c=o.getClientRects();o.detach();for(let h=0;h<c.length;h++){let u=c[h];if(Math.max(u.top-r,r-u.bottom,u.left-i,i-u.right)<=s)return!0}return!1}function c3(n,e={}){let t=et.define(),i=yn.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,wn.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),r);a.pos=o,r.end!=null&&(a.end=s.changes.mapPos(r.end)),r=a}for(let o of s.effects)o.is(t)&&(r=o.value),o.is(u3)&&(r=null);return r},provide:r=>Gu.from(r)});return[i,Zt.define(r=>new o3(r,n,i,t,e.hoverTime||300)),s3]}function h3(n,e){let t=n.plugin(nT);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const u3=et.define(),l1=je.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function oc(n,e){let t=n.plugin(iT),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const iT=Zt.fromClass(class{constructor(n){this.input=n.state.facet(ac),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(l1);this.top=new Lh(n,!0,e.topContainer),this.bottom=new Lh(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(l1);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Lh(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Lh(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(ac);if(t!=this.input){let i=t.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),h;c<0?(h=l(n.view),a.push(h)):(h=this.panels[c],h.update&&h.update(n)),r.push(h),(h.top?s:o).push(h)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Ue.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Lh{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=c1(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=c1(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function c1(n){let e=n.nextSibling;return n.remove(),e}const ac=je.define({enables:iT});class Dr extends so{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Dr.prototype.elementClass="";Dr.prototype.toDOM=void 0;Dr.prototype.mapMode=wn.TrackBefore;Dr.prototype.startSide=Dr.prototype.endSide=-1;Dr.prototype.point=!0;const gu=je.define(),f3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>vt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Dl=je.define();function d3(n){return[rT(),Dl.of(Object.assign(Object.assign({},f3),n))]}const py=je.define({combine:n=>n.some(e=>e)});function rT(n){let e=[p3];return n&&n.fixed===!1&&e.push(py.of(!0)),e}const p3=Zt.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(Dl).map(e=>new u1(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(py),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(py)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=vt.iter(this.view.state.facet(gu),this.view.viewport.from),i=[],r=this.gutters.map(s=>new m3(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let o;if(Array.isArray(s.type)){for(let a of s.type)if(a.type==Ct.Text){o=a;break}}else o=s.type==Ct.Text?s:void 0;if(!!o){i.length&&(i=[]),sT(t,i,s.from);for(let a of r)a.line(this.view,o,i)}}for(let s of r)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Dl),t=n.state.facet(Dl),i=n.docChanged||n.heightChanged||n.viewportChanged||!vt.eq(n.startState.facet(gu),n.state.facet(gu),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let s of t){let o=e.indexOf(s);o<0?r.push(new u1(this.view,s)):(this.gutters[o].update(n),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Ue.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Gt.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function h1(n){return Array.isArray(n)?n:[n]}function sT(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class m3{constructor(e,t,i){this.gutter=e,this.height=i,this.localMarkers=[],this.i=0,this.cursor=vt.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),sT(this.cursor,this.localMarkers,t.from);let r=i.length?this.localMarkers.concat(i):this.localMarkers,s=this.gutter.config.lineMarker(e,t,r);s&&r.unshift(s);let o=this.gutter;if(r.length==0&&!o.config.renderEmptyElements)return;let a=t.top-this.height;if(this.i==o.elements.length){let l=new oT(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class u1{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let s=e.lineBlockAtHeight(r.clientY-e.documentTop);t.domEventHandlers[i](e,s,r)&&r.preventDefault()});this.markers=h1(t.markers(e)),t.initialSpacer&&(this.spacer=new oT(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=h1(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!vt.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class oT{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),g3(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,c=!1;if(l){let h=l.elementClass;h&&(i+=" "+h);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){let h=this.markers[o++];if(h.toDOM){h.destroy(r);let u=r.nextSibling;r.remove(),r=u}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function g3(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const y3=je.define(),jo=je.define({combine(n){return Lr(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let s=i[r],o=t[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class cm extends Dr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function hm(n,e){return n.state.facet(jo).formatNumber(e,n.state)}const O3=Dl.compute([jo],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(y3)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new cm(hm(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(jo)!=e.state.facet(jo),initialSpacer(e){return new cm(hm(e,f1(e.state.doc.lines)))},updateSpacer(e,t){let i=hm(t.view,f1(t.view.state.doc.lines));return i==e.number?e:new cm(i)},domEventHandlers:n.facet(jo).domEventHandlers}));function b3(n={}){return[jo.of(n),rT(),O3]}function f1(n){let e=9;for(;e<n;)e=e*10+9;return e}const v3=new class extends Dr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},w3=gu.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges)if(i.empty){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(v3.range(r)))}return vt.of(e)});function A3(){return w3}const aT=1024;let _3=0;class gi{constructor(e,t){this.from=e,this.to=t}}class tt{constructor(e={}){this.id=_3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=sn.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}tt.closedBy=new tt({deserialize:n=>n.split(" ")});tt.openedBy=new tt({deserialize:n=>n.split(" ")});tt.group=new tt({deserialize:n=>n.split(" ")});tt.contextHash=new tt({perNode:!0});tt.lookAhead=new tt({perNode:!0});tt.mounted=new tt({perNode:!0});class x3{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}}const k3=Object.create(null);class sn{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):k3,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new sn(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(tt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(tt.group),s=-1;s<(r?r.length:0);s++){let o=t[s<0?i.name:r[s]];if(o)return o}}}}sn.none=new sn("",Object.create(null),0,8);class Uc{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}t.push(r?new sn(i.name,r,i.id,i.flags):i)}return new Uc(t)}}const Bh=new WeakMap,d1=new WeakMap;var Ft;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Ft||(Ft={}));class wt{constructor(e,t,i,r,s){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(tt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new lc(this.topNode,e)}cursorAt(e,t=0,i=0){let r=Bh.get(this)||this.topNode,s=new lc(r);return s.moveTo(e,t),Bh.set(this,s._tree),s}get topNode(){return new Ai(this,0,0,null)}resolve(e,t=0){let i=la(Bh.get(this)||this.topNode,e,t,!1);return Bh.set(this,i),i}resolveInner(e,t=0){let i=la(d1.get(this)||this.topNode,e,t,!0);return d1.set(this,i),i}iterate(e){let{enter:t,leave:i,from:r=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Ft.IncludeAnonymous);;){let a=!1;if(o.from<=s&&o.to>=r&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;a=!0}for(;a&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:nO(sn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new wt(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new wt(sn.none,t,i,r)))}static build(e){return E3(e)}}wt.empty=new wt(sn.none,[],[],0);class eO{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new eO(this.buffer,this.index)}}class vo{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return sn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(lT(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,t,i,r){let s=this.buffer,o=new Uint16Array(t-e);for(let a=e,l=0;a<t;)o[l++]=s[a++],o[l++]=s[a++]-i,o[l++]=s[a++]-i,o[l++]=s[a++]-e;return new vo(o,r-i,this.set)}}function lT(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function cT(n,e){let t=n.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}function la(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!i&&n instanceof Ai&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=i?0:Ft.IgnoreOverlays;if(i)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof Ai&&o.index<0&&((r=a.enter(e,t,s))===null||r===void 0?void 0:r.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class Ai{constructor(e,t,i,r){this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let h=a[e],u=l[e]+o.from;if(!!lT(r,i,u,u+h.length)){if(h instanceof vo){if(s&Ft.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,t,i-u,r);if(f>-1)return new Zi(new S3(o,h,e,u),null,f)}else if(s&Ft.IncludeAnonymous||!h.type.isAnonymous||tO(h)){let f;if(!(s&Ft.IgnoreMounts)&&h.props&&(f=h.prop(tt.mounted))&&!f.overlay)return new Ai(f.tree,u,e,o);let p=new Ai(h,u,e,o);return s&Ft.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?h.children.length-1:0,t,i,r)}}}if(s&Ft.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Ft.IgnoreOverlays)&&(r=this._tree.prop(tt.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new Ai(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new lc(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return la(this,e,t,!1)}resolveInner(e,t=0){return la(this,e,t,!0)}enterUnfinishedNodesBefore(e){return cT(this,e)}getChild(e,t=null,i=null){let r=Vu(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return Vu(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Xu(this,e)}}function Vu(n,e,t,i){let r=n.cursor(),s=[];if(!r.firstChild())return s;if(t!=null){for(;!r.type.is(t);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Xu(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class S3{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Zi{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Zi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Ft.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Zi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Zi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Zi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new lc(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1],a=i.buffer[this.index+2];e.push(i.slice(r,s,o,a)),t.push(0)}return new wt(this.type,e,t,this.to-this.from)}resolve(e,t=0){return la(this,e,t,!1)}resolveInner(e,t=0){return la(this,e,t,!0)}enterUnfinishedNodesBefore(e){return cT(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let r=Vu(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return Vu(this,e,t,i)}get node(){return this}matchContext(e){return Xu(this,e)}}class lc{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ai)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Ai?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Ft.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ft.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ft.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Ft.IncludeAnonymous||a instanceof vo||!a.type.isAnonymous||tO(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,i=s+1;break e}r=this.stack[--s]}}for(let r=i;r<this.stack.length;r++)t=new Zi(this.buffer,t,this.stack[r]);return this.bufferNode=new Zi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Xu(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Xu(this.node,e,r);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function tO(n){return n.children.some(e=>e instanceof vo||!e.type.isAnonymous||tO(e))}function E3(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=aT,reused:s=[],minRepeatType:o=i.types.length}=n,a=Array.isArray(t)?new eO(t,t.length):t,l=i.types,c=0,h=0;function u(O,_,x,E,T){let{id:S,start:C,end:B,size:M}=a,D=h;for(;M<0;)if(a.next(),M==-1){let K=s[S];x.push(K),E.push(C-O);return}else if(M==-3){c=S;return}else if(M==-4){h=S;return}else throw new RangeError(`Unrecognized record size: ${M}`);let N=l[S],P,X,Z=C-O;if(B-C<=r&&(X=m(a.pos-_,T))){let K=new Uint16Array(X.size-X.skip),ee=a.pos-X.size,J=K.length;for(;a.pos>ee;)J=b(X.start,K,J);P=new vo(K,B-X.start,i),Z=X.start-O}else{let K=a.pos-M;a.next();let ee=[],J=[],ge=S>=o?S:-1,k=0,j=B;for(;a.pos>K;)ge>=0&&a.id==ge&&a.size>=0?(a.end<=j-r&&(p(ee,J,C,k,a.end,j,ge,D),k=ee.length,j=a.end),a.next()):u(C,K,ee,J,ge);if(ge>=0&&k>0&&k<ee.length&&p(ee,J,C,k,C,j,ge,D),ee.reverse(),J.reverse(),ge>-1&&k>0){let V=f(N);P=nO(N,ee,J,0,ee.length,0,B-C,V,V)}else P=d(N,ee,J,B-C,D-B)}x.push(P),E.push(Z)}function f(O){return(_,x,E)=>{let T=0,S=_.length-1,C,B;if(S>=0&&(C=_[S])instanceof wt){if(!S&&C.type==O&&C.length==E)return C;(B=C.prop(tt.lookAhead))&&(T=x[S]+C.length+B)}return d(O,_,x,E,T)}}function p(O,_,x,E,T,S,C,B){let M=[],D=[];for(;O.length>E;)M.push(O.pop()),D.push(_.pop()+x-T);O.push(d(i.types[C],M,D,S-T,B-S)),_.push(T-x)}function d(O,_,x,E,T=0,S){if(c){let C=[tt.contextHash,c];S=S?[C].concat(S):[C]}if(T>25){let C=[tt.lookAhead,T];S=S?[C].concat(S):[C]}return new wt(O,_,x,E,S)}function m(O,_){let x=a.fork(),E=0,T=0,S=0,C=x.end-r,B={size:0,start:0,skip:0};e:for(let M=x.pos-O;x.pos>M;){let D=x.size;if(x.id==_&&D>=0){B.size=E,B.start=T,B.skip=S,S+=4,E+=4,x.next();continue}let N=x.pos-D;if(D<0||N<M||x.start<C)break;let P=x.id>=o?4:0,X=x.start;for(x.next();x.pos>N;){if(x.size<0)if(x.size==-3)P+=4;else break e;else x.id>=o&&(P+=4);x.next()}T=X,E+=D,S+=P}return(_<0||E==O)&&(B.size=E,B.start=T,B.skip=S),B.size>4?B:void 0}function b(O,_,x){let{id:E,start:T,end:S,size:C}=a;if(a.next(),C>=0&&E<o){let B=x;if(C>4){let M=a.pos-(C-4);for(;a.pos>M;)x=b(O,_,x)}_[--x]=B,_[--x]=S-O,_[--x]=T-O,_[--x]=E}else C==-3?c=E:C==-4&&(h=E);return x}let A=[],g=[];for(;a.pos>0;)u(n.start||0,n.bufferStart||0,A,g,-1);let v=(e=n.length)!==null&&e!==void 0?e:A.length?g[0]+A[0].length:0;return new wt(l[n.topID],A.reverse(),g.reverse(),v)}const p1=new WeakMap;function yu(n,e){if(!n.isAnonymous||e instanceof vo||e.type!=n)return 1;let t=p1.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof wt)){t=1;break}t+=yu(n,i)}p1.set(e,t)}return t}function nO(n,e,t,i,r,s,o,a,l){let c=0;for(let d=i;d<r;d++)c+=yu(n,e[d]);let h=Math.ceil(c*1.5/8),u=[],f=[];function p(d,m,b,A,g){for(let v=b;v<A;){let O=v,_=m[v],x=yu(n,d[v]);for(v++;v<A;v++){let E=yu(n,d[v]);if(x+E>=h)break;x+=E}if(v==O+1){if(x>h){let E=d[O];p(E.children,E.positions,0,E.children.length,m[O]+g);continue}u.push(d[O])}else{let E=m[v-1]+d[v-1].length-_;u.push(nO(n,d,m,O,v,_,E,null,l))}f.push(_+g-s)}}return p(e,t,i,r,0),(a||l)(u,f,o)}class T3{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof Zi?this.setBuffer(e.context.buffer,e.index,t):e instanceof Ai&&this.map.set(e.tree,t)}get(e){return e instanceof Zi?this.getBuffer(e.context.buffer,e.index):e instanceof Ai?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Er{constructor(e,t,i,r,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new Er(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let h=a<t.length?t[a]:null,u=h?h.fromA:1e9;if(u-l>=i)for(;o&&o.from<u;){let f=o;if(l>=f.from||u<=f.to||c){let p=Math.max(f.from,l)-c,d=Math.min(f.to,u)-c;f=p>=d?null:new Er(p,d,f.tree,f.offset+c,a>0,!!h)}if(f&&r.push(f),o.to>u)break;o=s<e.length?e[s++]:null}if(!h)break;l=h.toA,c=h.toA-h.toB}return r}}class iO{startParse(e,t,i){return typeof e=="string"&&(e=new C3(e)),i=i?i.length?i.map(r=>new gi(r.from,r.to)):[new gi(0,0)]:[new gi(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let s=r.advance();if(s)return s}}}class C3{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function hT(n){return(e,t,i,r)=>new R3(e,n,t,i,r)}class m1{constructor(e,t,i,r,s){this.parser=e,this.parse=t,this.overlay=i,this.target=r,this.ranges=s}}class I3{constructor(e,t,i,r,s,o,a){this.parser=e,this.predicate=t,this.mounts=i,this.index=r,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const my=new tt({perNode:!0});class R3{constructor(e,t,i,r,s){this.nest=t,this.input=i,this.fragments=r,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let r of this.inner)r.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new wt(i.type,i.children,i.positions,i.length,i.propValues.concat([[my,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[tt.mounted.id]=new x3(t,e.overlay,e.parser),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new D3(this.fragments),t=null,i=null,r=new lc(new Ai(this.baseTree,this.ranges[0].from,0,null),Ft.IncludeAnonymous|Ft.IgnoreMounts);e:for(let s,o;this.stoppedAt==null||r.from<this.stoppedAt;){let a=!0,l;if(e.hasNode(r)){if(t){let c=t.mounts.find(h=>h.frag.from<=r.from&&h.frag.to>=r.to&&h.mount.overlay);if(c)for(let h of c.mount.overlay){let u=h.from+c.pos,f=h.to+c.pos;u>=r.from&&f<=r.to&&!t.ranges.some(p=>p.from<f&&p.to>u)&&t.ranges.push({from:u,to:f})}}a=!1}else if(i&&(o=Q3(i.ranges,r.from,r.to)))a=o!=2;else if(!r.type.isAnonymous&&r.from<r.to&&(s=this.nest(r,this.input))){r.tree||P3(r);let c=e.findMounts(r.from,s.parser);if(typeof s.overlay=="function")t=new I3(s.parser,s.overlay,c,this.inner.length,r.from,r.tree,t);else{let h=O1(this.ranges,s.overlay||[new gi(r.from,r.to)]);h.length&&this.inner.push(new m1(s.parser,s.parser.startParse(this.input,b1(c,h),h),s.overlay?s.overlay.map(u=>new gi(u.from-r.from,u.to-r.from)):null,r.tree,h)),s.overlay?h.length&&(i={ranges:h,depth:0,prev:i}):a=!1}}else t&&(l=t.predicate(r))&&(l===!0&&(l=new gi(r.from,r.to)),l.from<l.to&&t.ranges.push(l));if(a&&r.firstChild())t&&t.depth++,i&&i.depth++;else for(;!r.nextSibling();){if(!r.parent())break e;if(t&&!--t.depth){let c=O1(this.ranges,t.ranges);c.length&&this.inner.splice(t.index,0,new m1(t.parser,t.parser.startParse(this.input,b1(t.mounts,c),c),t.ranges.map(h=>new gi(h.from-t.start,h.to-t.start)),t.target,c)),t=t.prev}i&&!--i.depth&&(i=i.prev)}}}}function Q3(n,e,t){for(let i of n){if(i.from>=t)break;if(i.to>e)return i.from<=e&&i.to>=t?2:1}return 0}function g1(n,e,t,i,r,s){if(e<t){let o=n.buffer[e+1],a=n.buffer[t-2];i.push(n.slice(e,t,o,a)),r.push(o-s)}}function P3(n){let{node:e}=n,t=0;do n.parent(),t++;while(!n.tree);let i=0,r=n.tree,s=0;for(;s=r.positions[i]+n.from,!(s<=e.from&&s+r.children[i].length>=e.to);i++);let o=r.children[i],a=o.buffer;function l(c,h,u,f,p){let d=c;for(;a[d+2]+s<=e.from;)d=a[d+3];let m=[],b=[];g1(o,c,d,m,b,f);let A=a[d+1],g=a[d+2],v=A+s==e.from&&g+s==e.to&&a[d]==e.type.id;return m.push(v?e.toTree():l(d+4,a[d+3],o.set.types[a[d]],A,g-A)),b.push(A-f),g1(o,a[d+3],h,m,b,f),new wt(u,m,b,p)}r.children[i]=l(0,a.length,sn.none,0,o.length);for(let c=0;c<=t;c++)n.childAfter(e.from)}class y1{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Ft.IncludeAnonymous|Ft.IgnoreMounts)}moveTo(e){let{cursor:t}=this,i=e-this.offset;for(;!this.done&&t.from<i;)t.to>=e&&t.enter(i,1,Ft.IgnoreOverlays|Ft.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof wt)t=t.children[0];else break}return!1}}class D3{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(t=i.tree.prop(my))!==null&&t!==void 0?t:i.to,this.inner=new y1(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(my))!==null&&e!==void 0?e:t.to,this.inner=new y1(t.tree,-t.offset)}}findMounts(e,t){var i;let r=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(i=s.tree)===null||i===void 0?void 0:i.prop(tt.mounted);if(o&&o.parser==t)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&r.push({frag:l,pos:s.from-l.offset,mount:o})}}}return r}}function O1(n,e){let t=null,i=e;for(let r=1,s=0;r<n.length;r++){let o=n[r-1].to,a=n[r].from;for(;s<i.length;s++){let l=i[s];if(l.from>=a)break;l.to<=o||(t||(i=t=e.slice()),l.from<o?(t[s]=new gi(l.from,o),l.to>a&&t.splice(s+1,0,new gi(a,l.to))):l.to>a?t[s--]=new gi(a,l.to):t.splice(s--,1))}}return i}function N3(n,e,t,i){let r=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let h=r==n.length?1e9:o?n[r].to:n[r].from,u=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let f=Math.max(l,t),p=Math.min(h,u,i);f<p&&c.push(new gi(f,p))}if(l=Math.min(h,u),l==1e9)break;h==l&&(o?(o=!1,r++):o=!0),u==l&&(a?(a=!1,s++):a=!0)}return c}function b1(n,e){let t=[];for(let{pos:i,mount:r,frag:s}of n){let o=i+(r.overlay?r.overlay[0].from:0),a=o+r.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(r.overlay){let h=r.overlay.map(f=>new gi(f.from+i,f.to+i)),u=N3(e,h,l,c);for(let f=0,p=l;;f++){let d=f==u.length,m=d?c:u[f].from;if(m>p&&t.push(new Er(p,m,r.tree,-o,s.from>=p,s.to<=m)),d)break;p=u[f].to}}else t.push(new Er(l,c,r.tree,-o,s.from>=o,s.to<=a))}return t}let L3=0;class Qi{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=L3++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Qi([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Yu;return t=>t.modified.indexOf(e)>-1?t:Yu.get(t.base||t,t.modified.concat(e).sort((i,r)=>i.id-r.id))}}let B3=0;class Yu{constructor(){this.instances=[],this.id=B3++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&M3(t,a.modified));if(i)return i;let r=[],s=new Qi(r,e,t);for(let a of t)a.instances.push(s);let o=uT(t);for(let a of e.set)for(let l of o)r.push(Yu.get(a,l));return s}}function M3(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function uT(n){let e=[n];for(let t=0;t<n.length;t++)for(let i of uT(n.slice(0,t).concat(n.slice(t+1))))e.push(i);return e}function Qa(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let s=[],o=2,a=r;for(let u=0;;){if(a=="..."&&u>0&&u+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),u+=f[0].length,u==r.length)break;let p=r[u++];if(u==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(u)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let h=new $3(i,o,l>0?s.slice(0,l):null);e[c]=h.sort(e[c])}}return fT.add(e)}const fT=new tt;class $3{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function dT(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function F3(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function W3(n,e,t,i=0,r=n.length){let s=new U3(i,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),i,r,"",s.highlighters),s.flush(r)}class U3{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=t)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,h=o.prop(fT),u=!1;for(;h;){if(!h.context||e.matchContext(h.context)){let p=F3(s,h.tags);p&&(c&&(c+=" "),c+=p,h.mode==1?r+=(r?" ":"")+p:h.mode==0&&(u=!0));break}h=h.next}if(this.startSpan(e.from,c),u)return;let f=e.tree&&e.tree.prop(tt.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),d=this.highlighters.filter(b=>!b.scope||b.scope(f.tree.type)),m=e.firstChild();for(let b=0,A=a;;b++){let g=b<f.overlay.length?f.overlay[b]:null,v=g?g.from+a:l,O=Math.max(t,A),_=Math.min(i,v);if(O<_&&m)for(;e.from<_&&(this.highlightRange(e,O,_,r,s),this.startSpan(Math.min(i,e.to),c),!(e.to>=v||!e.nextSibling())););if(!g||v>i)break;A=g.to+a,A>t&&(this.highlightRange(p.cursor(),Math.max(t,g.from+a),Math.min(i,A),r,d),this.startSpan(A,c))}m&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}const Re=Qi.define,Mh=Re(),Xr=Re(),v1=Re(Xr),w1=Re(Xr),Yr=Re(),$h=Re(Yr),um=Re(Yr),ji=Re(),Ms=Re(ji),Ui=Re(),zi=Re(),gy=Re(),sl=Re(gy),Fh=Re(),ie={comment:Mh,lineComment:Re(Mh),blockComment:Re(Mh),docComment:Re(Mh),name:Xr,variableName:Re(Xr),typeName:v1,tagName:Re(v1),propertyName:w1,attributeName:Re(w1),className:Re(Xr),labelName:Re(Xr),namespace:Re(Xr),macroName:Re(Xr),literal:Yr,string:$h,docString:Re($h),character:Re($h),attributeValue:Re($h),number:um,integer:Re(um),float:Re(um),bool:Re(Yr),regexp:Re(Yr),escape:Re(Yr),color:Re(Yr),url:Re(Yr),keyword:Ui,self:Re(Ui),null:Re(Ui),atom:Re(Ui),unit:Re(Ui),modifier:Re(Ui),operatorKeyword:Re(Ui),controlKeyword:Re(Ui),definitionKeyword:Re(Ui),moduleKeyword:Re(Ui),operator:zi,derefOperator:Re(zi),arithmeticOperator:Re(zi),logicOperator:Re(zi),bitwiseOperator:Re(zi),compareOperator:Re(zi),updateOperator:Re(zi),definitionOperator:Re(zi),typeOperator:Re(zi),controlOperator:Re(zi),punctuation:gy,separator:Re(gy),bracket:sl,angleBracket:Re(sl),squareBracket:Re(sl),paren:Re(sl),brace:Re(sl),content:ji,heading:Ms,heading1:Re(Ms),heading2:Re(Ms),heading3:Re(Ms),heading4:Re(Ms),heading5:Re(Ms),heading6:Re(Ms),contentSeparator:Re(ji),list:Re(ji),quote:Re(ji),emphasis:Re(ji),strong:Re(ji),link:Re(ji),monospace:Re(ji),strikethrough:Re(ji),inserted:Re(),deleted:Re(),changed:Re(),invalid:Re(),meta:Fh,documentMeta:Re(Fh),annotation:Re(Fh),processingInstruction:Re(Fh),definition:Qi.defineModifier(),constant:Qi.defineModifier(),function:Qi.defineModifier(),standard:Qi.defineModifier(),local:Qi.defineModifier(),special:Qi.defineModifier()},z3=dT([{tag:ie.link,class:"tok-link"},{tag:ie.heading,class:"tok-heading"},{tag:ie.emphasis,class:"tok-emphasis"},{tag:ie.strong,class:"tok-strong"},{tag:ie.keyword,class:"tok-keyword"},{tag:ie.atom,class:"tok-atom"},{tag:ie.bool,class:"tok-bool"},{tag:ie.url,class:"tok-url"},{tag:ie.labelName,class:"tok-labelName"},{tag:ie.inserted,class:"tok-inserted"},{tag:ie.deleted,class:"tok-deleted"},{tag:ie.literal,class:"tok-literal"},{tag:ie.string,class:"tok-string"},{tag:ie.number,class:"tok-number"},{tag:[ie.regexp,ie.escape,ie.special(ie.string)],class:"tok-string2"},{tag:ie.variableName,class:"tok-variableName"},{tag:ie.local(ie.variableName),class:"tok-variableName tok-local"},{tag:ie.definition(ie.variableName),class:"tok-variableName tok-definition"},{tag:ie.special(ie.variableName),class:"tok-variableName2"},{tag:ie.definition(ie.propertyName),class:"tok-propertyName tok-definition"},{tag:ie.typeName,class:"tok-typeName"},{tag:ie.namespace,class:"tok-namespace"},{tag:ie.className,class:"tok-className"},{tag:ie.macroName,class:"tok-macroName"},{tag:ie.propertyName,class:"tok-propertyName"},{tag:ie.operator,class:"tok-operator"},{tag:ie.comment,class:"tok-comment"},{tag:ie.meta,class:"tok-meta"},{tag:ie.invalid,class:"tok-invalid"},{tag:ie.punctuation,class:"tok-punctuation"}]);var fm;const ca=new tt;function pT(n){return je.define({combine:n?e=>e.concat(n):void 0})}class yi{constructor(e,t,i=[]){this.data=e,pt.prototype.hasOwnProperty("tree")||Object.defineProperty(pt.prototype,"tree",{get(){return Nt(this)}}),this.parser=t,this.extension=[_s.of(this),pt.languageData.of((r,s,o)=>r.facet(A1(r,s,o)))].concat(i)}isActiveAt(e,t,i=-1){return A1(e,t,i)==this.data}findRegions(e){let t=e.facet(_s);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(ca)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(tt.mounted);if(a){if(a.tree.prop(ca)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof wt&&r(c,s.positions[l]+o)}};return r(Nt(e),0),i}get allowsNesting(){return!0}}yi.setState=et.define();function A1(n,e,t){let i=n.facet(_s);if(!i)return null;let r=i.data;if(i.allowsNesting)for(let s=Nt(n).topNode;s;s=s.enter(e,t,Ft.ExcludeBuffers))r=s.type.prop(ca)||r;return r}class ha extends yi{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=pT(e.languageData);return new ha(t,e.parser.configure({props:[ca.add(i=>i.isTop?t:void 0)]}))}configure(e){return new ha(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function Nt(n){let e=n.field(yi.state,!1);return e?e.tree:wt.empty}class j3{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let ol=null;class cc{constructor(e,t,i=[],r,s,o,a,l){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new cc(e,t,[],wt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new j3(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=wt.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Er.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Er.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ol;ol=this;try{return e()}finally{ol=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=_1(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,h,u,f)=>l.push({fromA:c,toA:h,fromB:u,toB:f})),i=Er.applyChanges(i,l),r=wt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let h=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);h<u&&a.push({from:h,to:u})}}}return new cc(this.parser,t,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=_1(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends iO{createParse(t,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=ol;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new wt(sn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ol}}function _1(n,e,t){return Er.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class ua{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new ua(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=cc.create(e.facet(_s).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new ua(i)}}yi.state=yn.define({create:ua.init,update(n,e){for(let t of e.effects)if(t.is(yi.setState))return t.value;return e.startState.facet(_s)!=e.state.facet(_s)?ua.init(e.state):n.apply(e)}});let mT=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(mT=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const dm=typeof navigator!="undefined"&&((fm=navigator.scheduling)===null||fm===void 0?void 0:fm.isInputPending)?()=>navigator.scheduling.isInputPending():null,H3=Zt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(yi.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(yi.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=mT(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(yi.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!dm?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>dm&&dm()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:yi.setState.of(new ua(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>ri(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),_s=je.define({combine(n){return n.length?n[0]:null},enables:[yi.state,H3]});class hc{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class Zu{constructor(e,t,i,r,s,o=void 0){this.name=e,this.alias=t,this.extensions=i,this.filename=r,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:i}=e;if(!t){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(i)}return new Zu(e.name,(e.alias||[]).concat(e.name).map(r=>r.toLowerCase()),e.extensions||[],e.filename,t,i)}static matchFilename(e,t){for(let r of e)if(r.filename&&r.filename.test(t))return r;let i=/\.([^.]+)$/.exec(t);if(i){for(let r of e)if(r.extensions.indexOf(i[1])>-1)return r}return null}static matchLanguageName(e,t,i=!0){t=t.toLowerCase();for(let r of e)if(r.alias.some(s=>s==t))return r;if(i)for(let r of e)for(let s of r.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return r}return null}}const G3=je.define(),id=je.define({combine:n=>{if(!n.length)return"  ";if(!/^(?: +|\t+)$/.test(n[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return n[0]}});function qu(n){let e=n.facet(id);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function uc(n,e){let t="",i=n.tabSize;if(n.facet(id).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let r=0;r<e;r++)t+=" ";return t}function rO(n,e){n instanceof pt&&(n=new rd(n));for(let i of n.state.facet(G3)){let r=i(n,e);if(r!=null)return r}let t=Nt(n.state);return t?V3(n,t,e):null}class rd{constructor(e,t={}){this.state=e,this.options=t,this.unit=qu(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return $c(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const zc=new tt;function V3(n,e,t){return gT(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function X3(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function Y3(n){let e=n.type.prop(zc);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(tt.closedBy))){let r=n.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>yT(o,!0,1,void 0,s&&!X3(o)?r.from:void 0)}return n.parent==null?Z3:null}function gT(n,e,t){for(;n;n=n.parent){let i=Y3(n);if(i)return i(sO.create(t,e,n))}return null}function Z3(){return 0}class sO extends rd{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new sO(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(q3(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?gT(e,this.pos,this.base):0}}function q3(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function K3(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<o?t:null;a=l.to}}function J3({closing:n,align:e=!0,units:t=1}){return i=>yT(i,e,t,n)}function yT(n,e,t,i,r){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==n.pos+o,l=e?K3(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const eW=n=>n.baseIndent;function Ou({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const tW=200;function nW(){return pt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+tW)return n;let s=t.sliceString(r.from,i);if(!e.some(c=>c.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:c}of o.selection.ranges){let h=o.doc.lineAt(c);if(h.from==a)continue;a=h.from;let u=rO(o,h.from);if(u==null)continue;let f=/^\s*/.exec(h.text)[0],p=uc(o,u);f!=p&&l.push({from:h.from,to:h.from+f.length,insert:p})}return l.length?[n,{changes:l,sequential:!0}]:n})}const iW=je.define(),jc=new tt;function OT(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function rW(n,e,t){let i=Nt(n);if(i.length<t)return null;let r=i.resolveInner(t),s=null;for(let o=r;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let a=o.type.prop(jc);if(a&&(o.to<i.length-50||i.length==n.doc.length||!sW(o))){let l=a(o,n);l&&l.from<=t&&l.from>=e&&l.to>t&&(s=l)}}return s}function sW(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Ku(n,e,t){for(let i of n.facet(iW)){let r=i(n,e,t);if(r)return r}return rW(n,e,t)}function bT(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const sd=et.define({map:bT}),Hc=et.define({map:bT});function vT(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const ao=yn.define({create(){return Me.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(sd)&&!oW(n,t.value.from,t.value.to)?n=n.update({add:[dW.range(t.value.from,t.value.to)]}):t.is(Hc)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(r,s)=>{r<i&&s>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return n},provide:n=>Ue.decorations.from(n)});function Ju(n,e,t){var i;let r=null;return(i=n.field(ao,!1))===null||i===void 0||i.between(e,t,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function oW(n,e,t){let i=!1;return n.between(e,e,(r,s)=>{r==e&&s==t&&(i=!0)}),i}function wT(n,e){return n.field(ao,!1)?e:e.concat(et.appendConfig.of(xT()))}const aW=n=>{for(let e of vT(n)){let t=Ku(n.state,e.from,e.to);if(t)return n.dispatch({effects:wT(n.state,[sd.of(t),AT(n,t)])}),!0}return!1},lW=n=>{if(!n.state.field(ao,!1))return!1;let e=[];for(let t of vT(n)){let i=Ju(n.state,t.from,t.to);i&&e.push(Hc.of(i),AT(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function AT(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return Ue.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const cW=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),s=Ku(e,r.from,r.to);s&&t.push(sd.of(s)),i=(s?n.lineBlockAt(s.to):r).to+1}return t.length&&n.dispatch({effects:wT(n.state,t)}),!!t.length},hW=n=>{let e=n.state.field(ao,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(Hc.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},uW=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:aW},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:lW},{key:"Ctrl-Alt-[",run:cW},{key:"Ctrl-Alt-]",run:hW}],fW={placeholderDOM:null,placeholderText:"\u2026"},_T=je.define({combine(n){return Lr(n,fW)}});function xT(n){let e=[ao,gW];return n&&e.push(_T.of(n)),e}const dW=Me.replace({widget:new class extends Br{toDOM(n){let{state:e}=n,t=e.facet(_T),i=s=>{let o=n.lineBlockAt(n.posAtDOM(s.target)),a=Ju(n.state,o.from,o.to);a&&n.dispatch({effects:Hc.of(a)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,i);let r=document.createElement("span");return r.textContent=t.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),pW={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class pm extends Dr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function mW(n={}){let e=Object.assign(Object.assign({},pW),n),t=new pm(e,!0),i=new pm(e,!1),r=Zt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(_s)!=o.state.facet(_s)||o.startState.field(ao,!1)!=o.state.field(ao,!1)||Nt(o.startState)!=Nt(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new bs;for(let l of o.viewportLineBlocks){let c=Ju(o.state,l.from,l.to)?i:Ku(o.state,l.from,l.to)?t:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[r,d3({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(r))===null||a===void 0?void 0:a.markers)||vt.empty},initialSpacer(){return new pm(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=Ju(o.state,a.from,a.to);if(c)return o.dispatch({effects:Hc.of(c)}),!0;let h=Ku(o.state,a.from,a.to);return h?(o.dispatch({effects:sd.of(h)}),!0):!1}})}),xT()]}const gW=Ue.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class od{constructor(e,t){let i;function r(a){let l=vs.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof yi?a=>a.prop(ca)==o.data:o?a=>a==o:void 0,this.style=dT(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new vs(i):null,this.themeType=t.themeType}static define(e,t){return new od(e,t||{})}}const yy=je.define(),kT=je.define({combine(n){return n.length?[n[0]]:null}});function mm(n){let e=n.facet(yy);return e.length?e:n.facet(kT)}function oO(n,e){let t=[OW],i;return n instanceof od&&(n.module&&t.push(Ue.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(kT.of(n)):i?t.push(yy.computeN([Ue.darkTheme],r=>r.facet(Ue.darkTheme)==(i=="dark")?[n]:[])):t.push(yy.of(n)),t}class yW{constructor(e){this.markCache=Object.create(null),this.tree=Nt(e.state),this.decorations=this.buildDeco(e,mm(e.state))}update(e){let t=Nt(e.state),i=mm(e.state),r=i!=mm(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return Me.none;let i=new bs;for(let{from:r,to:s}of e.visibleRanges)W3(this.tree,t,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Me.mark({class:l})))},r,s);return i.finish()}}const OW=Oo.high(Zt.fromClass(yW,{decorations:n=>n.decorations})),ST=od.define([{tag:ie.meta,color:"#7a757a"},{tag:ie.link,textDecoration:"underline"},{tag:ie.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ie.emphasis,fontStyle:"italic"},{tag:ie.strong,fontWeight:"bold"},{tag:ie.strikethrough,textDecoration:"line-through"},{tag:ie.keyword,color:"#708"},{tag:[ie.atom,ie.bool,ie.url,ie.contentSeparator,ie.labelName],color:"#219"},{tag:[ie.literal,ie.inserted],color:"#164"},{tag:[ie.string,ie.deleted],color:"#a11"},{tag:[ie.regexp,ie.escape,ie.special(ie.string)],color:"#e40"},{tag:ie.definition(ie.variableName),color:"#00f"},{tag:ie.local(ie.variableName),color:"#30a"},{tag:[ie.typeName,ie.namespace],color:"#085"},{tag:ie.className,color:"#167"},{tag:[ie.special(ie.variableName),ie.macroName],color:"#256"},{tag:ie.definition(ie.propertyName),color:"#00c"},{tag:ie.comment,color:"#940"},{tag:ie.invalid,color:"#f00"}]),bW=Ue.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ET=1e4,TT="()[]{}",CT=je.define({combine(n){return Lr(n,{afterCursor:!0,brackets:TT,maxScanDistance:ET,renderMatch:AW})}}),vW=Me.mark({class:"cm-matchingBracket"}),wW=Me.mark({class:"cm-nonmatchingBracket"});function AW(n){let e=[],t=n.matched?vW:wW;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const _W=yn.define({create(){return Me.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(CT);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=qi(e.state,r.head,-1,i)||r.head>0&&qi(e.state,r.head-1,1,i)||i.afterCursor&&(qi(e.state,r.head,1,i)||r.head<e.state.doc.length&&qi(e.state,r.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return Me.set(t,!0)},provide:n=>Ue.decorations.from(n)}),xW=[_W,bW];function kW(n={}){return[CT.of(n),xW]}function Oy(n,e,t){let i=n.prop(e<0?tt.openedBy:tt.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function qi(n,e,t,i={}){let r=i.maxScanDistance||ET,s=i.brackets||TT,o=Nt(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let c=Oy(l.type,t,s);if(c&&l.from<l.to)return SW(n,e,t,l,c,s)}return EW(n,e,t,o,a.type,r,s)}function SW(n,e,t,i,r,s){let o=i.parent,a={from:i.from,to:i.to},l=0,c=o==null?void 0:o.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(l==0&&r.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(Oy(c.type,t,s))l++;else if(Oy(c.type,-t,s)&&(l--,l==0))return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function EW(n,e,t,i,r,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},h=n.doc.iterRange(e,t>0?n.doc.length:0),u=0;for(let f=0;!h.next().done&&f<=s;){let p=h.value;t<0&&(f+=p.length);let d=e+f*t;for(let m=t>0?0:p.length-1,b=t>0?p.length:-1;m!=b;m+=t){let A=o.indexOf(p[m]);if(!(A<0||i.resolve(d+m,1).type!=r))if(A%2==0==t>0)u++;else{if(u==1)return{start:c,end:{from:d+m,to:d+m+1},matched:A>>1==l>>1};u--}}t>0&&(f+=p.length)}return h.done?{start:c,matched:!1}:null}const TW=Object.create(null),x1=[sn.none],k1=[],CW=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])CW[n]=IW(TW,e);function gm(n,e){k1.indexOf(n)>-1||(k1.push(n),console.warn(e))}function IW(n,e){let t=null;for(let s of e.split(".")){let o=n[s]||ie[s];o?typeof o=="function"?t?t=o(t):gm(s,`Modifier ${s} used at start of tag`):t?gm(s,`Tag ${s} used as modifier`):t=o:gm(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),r=sn.define({id:x1.length,name:i,props:[Qa({[i]:t})]});return x1.push(r),r.id}const RW=n=>{let e=lO(n.state);return e.line?QW(n):e.block?DW(n):!1};function aO(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const QW=aO(BW,0),PW=aO(IT,0),DW=aO((n,e)=>IT(n,e,LW(e)),0);function lO(n,e=n.selection.main.head){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const al=50;function NW(n,{open:e,close:t},i,r){let s=n.sliceDoc(i-al,i),o=n.sliceDoc(r,r+al),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let h,u;r-i<=2*al?h=u=n.sliceDoc(i,r):(h=n.sliceDoc(i,i+al),u=n.sliceDoc(r-al,r));let f=/^\s*/.exec(h)[0].length,p=/\s*$/.exec(u)[0].length,d=u.length-p-t.length;return h.slice(f,f+e.length)==e&&u.slice(d,d+t.length)==t?{open:{pos:i+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:r-p-t.length,margin:/\s/.test(u.charAt(d-1))?1:0}}:null}function LW(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from,to:r.to})}return e}function IT(n,e,t=e.selection.ranges){let i=t.map(s=>lO(e,s.from).block);if(!i.every(s=>s))return null;let r=t.map((s,o)=>NW(e,i[o],s.from,s.to));if(n!=2&&!r.every(s=>s))return{changes:e.changes(t.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(n!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:h}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+l.close.length})}return{changes:s}}return null}function BW(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of t){let a=i.length,l=1e9;for(let c=s;c<=o;){let h=e.doc.lineAt(c);if(h.from>r&&(s==o||o>h.from)){r=h.from;let u=lO(e,c).line;if(!u)continue;let f=/^\s*/.exec(h.text)[0].length,p=f==h.length,d=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<l&&(l=f),i.push({line:h,comment:d,token:u,indent:f,empty:p,single:!1})}c=h.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}if(n!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:h,single:u}of i)(u||!h)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,h=c+l.length;o.text[h-o.from]==" "&&h++,s.push({from:c,to:h})}return{changes:s}}return null}const by=Pr.define(),MW=Pr.define(),$W=je.define(),RT=je.define({combine(n){return Lr(n,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function FW(n){let e=0;return n.iterChangedRanges((t,i)=>e=i),e}const QT=yn.define({create(){return Ki.empty},update(n,e){let t=e.state.facet(RT),i=e.annotation(by);if(i){let l=e.docChanged?ve.single(FW(e.changes)):void 0,c=Un.fromTransaction(e,l),h=i.side,u=h==0?n.undone:n.done;return c?u=ef(u,u.length,t.minDepth,c):u=NT(u,e.startState.selection),new Ki(h==0?i.rest:u,h==0?u:i.rest)}let r=e.annotation(MW);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(nn.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Un.fromTransaction(e),o=e.annotation(nn.time),a=e.annotation(nn.userEvent);return s?n=n.addChanges(s,o,a,t.newGroupDelay,t.minDepth):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Ki(n.done.map(Un.fromJSON),n.undone.map(Un.fromJSON))}});function PT(n={}){return[QT,RT.of(n),Ue.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?cO:e.inputType=="historyRedo"?hO:null;return i?(e.preventDefault(),i(t)):!1}})]}function ad(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(QT,!1);if(!r)return!1;let s=r.pop(n,t,e);return s?(i(s),!0):!1}}const cO=ad(0,!1),hO=ad(1,!1),WW=ad(0,!0),UW=ad(1,!0);class Un{constructor(e,t,i,r,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Un(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Un(e.changes&&en.fromJSON(e.changes),[],e.mapped&&er.fromJSON(e.mapped),e.startSelection&&ve.fromJSON(e.startSelection),e.selectionsAfter.map(ve.fromJSON))}static fromTransaction(e,t){let i=Oi;for(let r of e.startState.facet($W)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Un(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Oi)}static selection(e){return new Un(void 0,Oi,void 0,void 0,e)}}function ef(n,e,t,i){let r=e+1>t+20?e-t-1:0,s=n.slice(r,e);return s.push(i),s}function zW(n,e){let t=[],i=!1;return n.iterChangedRanges((r,s)=>t.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<t.length;){let c=t[l++],h=t[l++];a>=c&&o<=h&&(i=!0)}}),i}function jW(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function DT(n,e){return n.length?e.length?n.concat(e):n:e}const Oi=[],HW=200;function NT(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-HW));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),ef(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Un.selection([e])]}function GW(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function ym(n,e){if(!n.length)return n;let t=n.length,i=Oi;for(;t;){let r=VW(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=n.slice(0,t);return s[t-1]=r,s}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Un.selection(i)]:Oi}function VW(n,e,t){let i=DT(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):Oi,t);if(!n.changes)return Un.selection(i);let r=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Un(r,et.mapEffects(n.effects,e),o,n.startSelection.map(s),i)}const XW=/^(input\.type|delete)($|\.)/;class Ki{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Ki(this.done,this.undone):this}addChanges(e,t,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||XW.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r&&zW(a.changes,e.changes)||i=="input.type.compose")?o=ef(o,o.length-1,s,new Un(e.changes.compose(a.changes),DT(e.effects,a.effects),a.mapped,a.startSelection,Oi)):o=ef(o,o.length,s,e),new Ki(o,Oi,t,i)}addSelection(e,t,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Oi;return s.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&jW(s[s.length-1],e)?this:new Ki(NT(this.done,e),this.undone,t,i)}addMapping(e){return new Ki(ym(this.done,e),ym(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:by.of({side:e,rest:GW(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?Oi:r.slice(0,r.length-1);return s.mapped&&(o=ym(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:by.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ki.empty=new Ki(Oi,Oi);const uO=[{key:"Mod-z",run:cO,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:hO,preventDefault:!0},{key:"Mod-u",run:WW,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:UW,preventDefault:!0}];function Pa(n,e){return ve.create(n.ranges.map(e),n.mainIndex)}function lr(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Mr({state:n,dispatch:e},t){let i=Pa(n.selection,t);return i.eq(n.selection)?!1:(e(lr(n,i)),!0)}function ld(n,e){return ve.cursor(e?n.to:n.from)}function LT(n,e){return Mr(n,t=>t.empty?n.moveByChar(t,e):ld(t,e))}function ki(n){return n.textDirectionAt(n.state.selection.main.head)==Gt.LTR}const BT=n=>LT(n,!ki(n)),MT=n=>LT(n,ki(n));function $T(n,e){return Mr(n,t=>t.empty?n.moveByGroup(t,e):ld(t,e))}const YW=n=>$T(n,!ki(n)),ZW=n=>$T(n,ki(n));function qW(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function cd(n,e,t){let i=Nt(n).resolveInner(e.head),r=t?tt.closedBy:tt.openedBy;for(let l=e.head;;){let c=t?i.childAfter(l):i.childBefore(l);if(!c)break;qW(n,c,r)?i=c:l=t?c.to:c.from}let s=i.type.prop(r),o,a;return s&&(o=t?qi(n,i.from,1):qi(n,i.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?i.to:i.from,ve.cursor(a,t?-1:1)}const KW=n=>Mr(n,e=>cd(n.state,e,!ki(n))),JW=n=>Mr(n,e=>cd(n.state,e,ki(n)));function FT(n,e){return Mr(n,t=>{if(!t.empty)return ld(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const WT=n=>FT(n,!1),UT=n=>FT(n,!0);function zT(n){return Math.max(n.defaultLineHeight,Math.min(n.dom.clientHeight,innerHeight)-5)}function jT(n,e){let{state:t}=n,i=Pa(t.selection,a=>a.empty?n.moveVertically(a,e,zT(n)):ld(a,e));if(i.eq(t.selection))return!1;let r=n.coordsAtPos(t.selection.main.head),s=n.scrollDOM.getBoundingClientRect(),o;return r&&r.top>s.top&&r.bottom<s.bottom&&r.top-s.top<=n.scrollDOM.scrollHeight-n.scrollDOM.scrollTop-n.scrollDOM.clientHeight&&(o=Ue.scrollIntoView(i.main.head,{y:"start",yMargin:r.top-s.top})),n.dispatch(lr(t,i),{effects:o}),!0}const S1=n=>jT(n,!1),vy=n=>jT(n,!0);function hd(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let s=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=ve.cursor(i.from+s))}return r}const E1=n=>Mr(n,e=>hd(n,e,!0)),T1=n=>Mr(n,e=>hd(n,e,!1)),e4=n=>Mr(n,e=>ve.cursor(n.lineBlockAt(e.head).from,1)),t4=n=>Mr(n,e=>ve.cursor(n.lineBlockAt(e.head).to,-1));function n4(n,e,t){let i=!1,r=Pa(n.selection,s=>{let o=qi(n,s.head,-1)||qi(n,s.head,1)||s.head>0&&qi(n,s.head-1,1)||s.head<n.doc.length&&qi(n,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return t?ve.range(s.anchor,a):ve.cursor(a)});return i?(e(lr(n,r)),!0):!1}const i4=({state:n,dispatch:e})=>n4(n,e,!1);function cr(n,e){let t=Pa(n.state.selection,i=>{let r=e(i);return ve.range(i.anchor,r.head,r.goalColumn)});return t.eq(n.state.selection)?!1:(n.dispatch(lr(n.state,t)),!0)}function HT(n,e){return cr(n,t=>n.moveByChar(t,e))}const GT=n=>HT(n,!ki(n)),VT=n=>HT(n,ki(n));function XT(n,e){return cr(n,t=>n.moveByGroup(t,e))}const r4=n=>XT(n,!ki(n)),s4=n=>XT(n,ki(n)),o4=n=>cr(n,e=>cd(n.state,e,!ki(n))),a4=n=>cr(n,e=>cd(n.state,e,ki(n)));function YT(n,e){return cr(n,t=>n.moveVertically(t,e))}const ZT=n=>YT(n,!1),qT=n=>YT(n,!0);function KT(n,e){return cr(n,t=>n.moveVertically(t,e,zT(n)))}const C1=n=>KT(n,!1),I1=n=>KT(n,!0),R1=n=>cr(n,e=>hd(n,e,!0)),Q1=n=>cr(n,e=>hd(n,e,!1)),l4=n=>cr(n,e=>ve.cursor(n.lineBlockAt(e.head).from)),c4=n=>cr(n,e=>ve.cursor(n.lineBlockAt(e.head).to)),P1=({state:n,dispatch:e})=>(e(lr(n,{anchor:0})),!0),D1=({state:n,dispatch:e})=>(e(lr(n,{anchor:n.doc.length})),!0),N1=({state:n,dispatch:e})=>(e(lr(n,{anchor:n.selection.main.anchor,head:0})),!0),L1=({state:n,dispatch:e})=>(e(lr(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),h4=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),u4=({state:n,dispatch:e})=>{let t=dd(n).map(({from:i,to:r})=>ve.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:ve.create(t),userEvent:"select"})),!0},f4=({state:n,dispatch:e})=>{let t=Pa(n.selection,i=>{var r;let s=Nt(n).resolveInner(i.head,1);for(;!(s.from<i.from&&s.to>=i.to||s.to>i.to&&s.from<=i.from||!(!((r=s.parent)===null||r===void 0)&&r.parent));)s=s.parent;return ve.range(s.to,s.from)});return e(lr(n,t)),!0},d4=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=ve.create([t.main]):t.main.empty||(i=ve.create([ve.cursor(t.main.head)])),i?(e(lr(n,i)),!0):!1};function ud({state:n,dispatch:e},t){if(n.readOnly)return!1;let i="delete.selection",r=n.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=t(o);l<o?i="delete.backward":l>o&&(i="delete.forward"),o=Math.min(o,l),a=Math.max(a,l)}return o==a?{range:s}:{changes:{from:o,to:a},range:ve.cursor(o)}});return r.changes.empty?!1:(e(n.update(r,{scrollIntoView:!0,userEvent:i})),!0)}function fd(n,e,t){if(n instanceof Ue)for(let i of n.state.facet(Ue.atomicRanges).map(r=>r(n)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=t?s:r)});return e}const JT=(n,e)=>ud(n,t=>{let{state:i}=n,r=i.doc.lineAt(t),s,o;if(!e&&t>r.from&&t<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,t-r.from))){if(s[s.length-1]=="	")return t-1;let a=$c(s,i.tabSize),l=a%qu(i)||qu(i);for(let c=0;c<l&&s[s.length-1-c]==" ";c++)t--;o=t}else o=ni(r.text,t-r.from,e,e)+r.from,o==t&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return fd(n,o,e)}),wy=n=>JT(n,!1),eC=n=>JT(n,!0),tC=(n,e)=>ud(n,t=>{let i=t,{state:r}=n,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==t&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=ni(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),h=o(c);if(a!=null&&h!=a)break;(c!=" "||i!=t)&&(a=h),i=l}return fd(n,i,e)}),nC=n=>tC(n,!1),p4=n=>tC(n,!0),iC=n=>ud(n,e=>{let t=n.lineBlockAt(e).to;return fd(n,e<t?t:Math.min(n.state.doc.length,e+1),!0)}),m4=n=>ud(n,e=>{let t=n.lineBlockAt(e).from;return fd(n,e>t?t:Math.max(0,e-1),!1)}),g4=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ot.of(["",""])},range:ve.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},y4=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,s=n.doc.lineAt(r),o=r==s.from?r-1:ni(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:ni(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(o,r))},range:ve.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function dd(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),s=n.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=n.doc.lineAt(i.to-1)),t>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});t=s.number+1}return e}function rC(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let s of dd(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)r.push(ve.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)r.push(ve.range(l.anchor-a,l.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:ve.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const O4=({state:n,dispatch:e})=>rC(n,e,!1),b4=({state:n,dispatch:e})=>rC(n,e,!0);function sC(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of dd(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const v4=({state:n,dispatch:e})=>sC(n,e,!1),w4=({state:n,dispatch:e})=>sC(n,e,!0),A4=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(dd(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Pa(e.selection,r=>n.moveVertically(r,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function _4(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Nt(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(tt.closedBy))&&s.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const x4=oC(!1),k4=oC(!0);function oC(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!n&&s==o&&_4(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new rd(e,{simulateBreak:s,simulateDoubleBreak:!!l}),h=rO(c,s);for(h==null&&(h=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let u=["",uc(e,h)];return l&&u.push(uc(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ot.of(u)},range:ve.cursor(s+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function fO(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=n.doc.lineAt(o);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),o=a.to+1}let s=n.changes(r);return{changes:r,range:ve.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const S4=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new rd(n,{overrideIndentation:s=>{let o=t[s];return o==null?-1:o}}),r=fO(n,(s,o,a)=>{let l=rO(i,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],h=uc(n,l);(c!=h||a.from<s.from+c.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:h}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},E4=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(fO(n,(t,i)=>{i.push({from:t.from,insert:n.facet(id)})}),{userEvent:"input.indent"})),!0),T4=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(fO(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=$c(r,n.tabSize),o=0,a=uc(n,Math.max(0,s-qu(n)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),C4=[{key:"Ctrl-b",run:BT,shift:GT,preventDefault:!0},{key:"Ctrl-f",run:MT,shift:VT},{key:"Ctrl-p",run:WT,shift:ZT},{key:"Ctrl-n",run:UT,shift:qT},{key:"Ctrl-a",run:e4,shift:l4},{key:"Ctrl-e",run:t4,shift:c4},{key:"Ctrl-d",run:eC},{key:"Ctrl-h",run:wy},{key:"Ctrl-k",run:iC},{key:"Ctrl-Alt-h",run:nC},{key:"Ctrl-o",run:g4},{key:"Ctrl-t",run:y4},{key:"Ctrl-v",run:vy}],I4=[{key:"ArrowLeft",run:BT,shift:GT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:YW,shift:r4},{mac:"Cmd-ArrowLeft",run:T1,shift:Q1},{key:"ArrowRight",run:MT,shift:VT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:ZW,shift:s4},{mac:"Cmd-ArrowRight",run:E1,shift:R1},{key:"ArrowUp",run:WT,shift:ZT,preventDefault:!0},{mac:"Cmd-ArrowUp",run:P1,shift:N1},{mac:"Ctrl-ArrowUp",run:S1,shift:C1},{key:"ArrowDown",run:UT,shift:qT,preventDefault:!0},{mac:"Cmd-ArrowDown",run:D1,shift:L1},{mac:"Ctrl-ArrowDown",run:vy,shift:I1},{key:"PageUp",run:S1,shift:C1},{key:"PageDown",run:vy,shift:I1},{key:"Home",run:T1,shift:Q1,preventDefault:!0},{key:"Mod-Home",run:P1,shift:N1},{key:"End",run:E1,shift:R1,preventDefault:!0},{key:"Mod-End",run:D1,shift:L1},{key:"Enter",run:x4},{key:"Mod-a",run:h4},{key:"Backspace",run:wy,shift:wy},{key:"Delete",run:eC},{key:"Mod-Backspace",mac:"Alt-Backspace",run:nC},{key:"Mod-Delete",mac:"Alt-Delete",run:p4},{mac:"Mod-Backspace",run:m4},{mac:"Mod-Delete",run:iC}].concat(C4.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),aC=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:KW,shift:o4},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:JW,shift:a4},{key:"Alt-ArrowUp",run:O4},{key:"Shift-Alt-ArrowUp",run:v4},{key:"Alt-ArrowDown",run:b4},{key:"Shift-Alt-ArrowDown",run:w4},{key:"Escape",run:d4},{key:"Mod-Enter",run:k4},{key:"Alt-l",mac:"Ctrl-l",run:u4},{key:"Mod-i",run:f4,preventDefault:!0},{key:"Mod-[",run:T4},{key:"Mod-]",run:E4},{key:"Mod-Alt-\\",run:S4},{key:"Shift-Mod-k",run:A4},{key:"Shift-Mod-\\",run:i4},{key:"Mod-/",run:RW},{key:"Alt-A",run:PW}].concat(I4);function $t(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)lC(n,arguments[e]);return n}function lC(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)lC(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const B1=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class fa{constructor(e,t,i=0,r=e.length,s){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?o=>s(B1(o)):B1,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Sn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=z0(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=di(e);let r=this.normalize(t);for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o);if(l)return this.value=l,this;if(s==r.length-1)break;o==i&&s<t.length&&t.charCodeAt(s)==a&&o++}}}match(e,t){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i}}typeof Symbol!="undefined"&&(fa.prototype[Symbol.iterator]=function(){return this});const cC={from:-1,to:-1,match:/.*/.exec("")},dO="gm"+(/x/.unicode==null?"":"u");class hC{constructor(e,t,i,r=0,s=e.length){if(this.to=s,this.curLine="",this.done=!1,this.value=cC,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new uC(e,t,i,r,s);this.re=new RegExp(t,dO+(i!=null&&i.ignoreCase?"i":"")),this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=r,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=r+(i==r?1:0),i==this.curLine.length&&this.nextLine(),i<r||i>this.value.to)return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Om=new WeakMap;class Zo{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=Om.get(e);if(!r||r.from>=i||r.to<=t){let a=new Zo(t,e.sliceString(t,i));return Om.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:s,from:o}=r;return o>t&&(s=e.sliceString(t,o)+s,o=t),r.to<i&&(s+=e.sliceString(r.to,i)),Om.set(e,new Zo(o,s)),new Zo(t,s.slice(t-o,i-o))}}class uC{constructor(e,t,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=cC,this.matchPos=r,this.re=new RegExp(t,dO+(i!=null&&i.ignoreCase?"i":"")),this.flat=Zo.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let i=this.flat.from+t.index,r=i+t[0].length;return this.value={from:i,to:r,match:t},this.matchPos=r+(i==r?1:0),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=Zo.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}typeof Symbol!="undefined"&&(hC.prototype[Symbol.iterator]=uC.prototype[Symbol.iterator]=function(){return this});function R4(n){try{return new RegExp(n,dO),!0}catch{return!1}}function Ay(n){let e=$t("input",{class:"cm-textfield",name:"line"}),t=$t("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),n.dispatch({effects:tf.of(!1)}),n.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},$t("label",n.state.phrase("Go to line"),": ",e)," ",$t("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=n,o=s.doc.lineAt(s.selection.main.head),[,a,l,c,h]=r,u=c?+c.slice(1):0,f=l?+l:o.number;if(l&&h){let d=f/100;a&&(d=d*(a=="-"?-1:1)+o.number/s.doc.lines),f=Math.round(s.doc.lines*d)}else l&&a&&(f=f*(a=="-"?-1:1)+o.number);let p=s.doc.line(Math.max(1,Math.min(s.doc.lines,f)));n.dispatch({effects:tf.of(!1),selection:ve.cursor(p.from+Math.max(0,Math.min(u,p.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const tf=et.define(),M1=yn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(tf)&&(n=t.value);return n},provide:n=>ac.from(n,e=>e?Ay:null)}),Q4=n=>{let e=oc(n,Ay);if(!e){let t=[tf.of(!0)];n.state.field(M1,!1)==null&&t.push(et.appendConfig.of([M1,P4])),n.dispatch({effects:t}),e=oc(n,Ay)}return e&&e.dom.querySelector("input").focus(),!0},P4=Ue.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),D4={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},fC=je.define({combine(n){return Lr(n,D4,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function N4(n){let e=[F4,$4];return n&&e.push(fC.of(n)),e}const L4=Me.mark({class:"cm-selectionMatch"}),B4=Me.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function $1(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Dn.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Dn.Word)}function M4(n,e,t,i){return n(e.sliceDoc(t,t+1))==Dn.Word&&n(e.sliceDoc(i-1,i))==Dn.Word}const $4=Zt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(fC),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Me.none;let r=i.main,s,o=null;if(r.empty){if(!e.highlightWordAroundCursor)return Me.none;let l=t.wordAt(r.head);if(!l)return Me.none;o=t.charCategorizer(r.head),s=t.sliceDoc(l.from,l.to)}else{let l=r.to-r.from;if(l<e.minSelectionLength||l>200)return Me.none;if(e.wholeWords){if(s=t.sliceDoc(r.from,r.to),o=t.charCategorizer(r.head),!($1(o,t,r.from,r.to)&&M4(o,t,r.from,r.to)))return Me.none}else if(s=t.sliceDoc(r.from,r.to).trim(),!s)return Me.none}let a=[];for(let l of n.visibleRanges){let c=new fa(t.doc,s,l.from,l.to);for(;!c.next().done;){let{from:h,to:u}=c.value;if((!o||$1(o,t,h,u))&&(r.empty&&h<=r.from&&u>=r.to?a.push(B4.range(h,u)):(h>=r.to||u<=r.from)&&a.push(L4.range(h,u)),a.length>e.maxMatches))return Me.none}}return Me.set(a)}},{decorations:n=>n.decorations}),F4=Ue.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),W4=({state:n,dispatch:e})=>{let{selection:t}=n,i=ve.create(t.ranges.map(r=>n.wordAt(r.head)||ve.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function U4(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),s=r&&r.from==t.from&&r.to==t.to;for(let o=!1,a=new fa(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new fa(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const z4=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return W4({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=i))return!1;let r=U4(n,i);return r?(e(n.update({selection:n.selection.addRange(ve.range(r.from,r.to),!1),effects:Ue.scrollIntoView(r.to)})),!0):!1},pd=je.define({combine(n){var e;return{top:n.reduce((t,i)=>t!=null?t:i.top,void 0)||!1,caseSensitive:n.reduce((t,i)=>t!=null?t:i.caseSensitive,void 0)||!1,createPanel:((e=n.find(t=>t.createPanel))===null||e===void 0?void 0:e.createPanel)||(t=>new J4(t))}}});function j4(n){return n?[pd.of(n),xy]:xy}class dC{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||R4(this.search)),this.unquoted=e.literal?this.search:this.search.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new G4(this):new H4(this)}getCursor(e,t=0,i=e.length){return this.regexp?Uo(this,e,t,i):Wo(this,e,t,i)}}class pC{constructor(e){this.spec=e}}function Wo(n,e,t,i){return new fa(e,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase())}class H4 extends pC{constructor(e){super(e)}nextMatch(e,t,i){let r=Wo(this.spec,e,i,e.length).nextOverlapping();return r.done&&(r=Wo(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let s=Math.max(t,r-1e4-this.spec.unquoted.length),o=Wo(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==t)return null;r-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let i=Wo(this.spec,e,0,e.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=Wo(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Uo(n,e,t,i){return new hC(e,n.search,n.caseSensitive?void 0:{ignoreCase:!0},t,i)}class G4 extends pC{nextMatch(e,t,i){let r=Uo(this.spec,e,i,e.length).next();return r.done&&(r=Uo(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let s=Math.max(t,i-r*1e4),o=Uo(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==t||a.from>s+10))return a;if(s==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Uo(this.spec,e,0,e.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=Uo(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const fc=et.define(),pO=et.define(),as=yn.define({create(n){return new bm(_y(n).create(),null)},update(n,e){for(let t of e.effects)t.is(fc)?n=new bm(t.value.create(),n.panel):t.is(pO)&&(n=new bm(n.query,t.value?mO:null));return n},provide:n=>ac.from(n,e=>e.panel)});class bm{constructor(e,t){this.query=e,this.panel=t}}const V4=Me.mark({class:"cm-searchMatch"}),X4=Me.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Y4=Zt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(as))}update(n){let e=n.state.field(as);(e!=n.startState.field(as)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Me.none;let{view:t}=this,i=new bs;for(let r=0,s=t.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;n.highlight(t.state.doc,a,l,(c,h)=>{let u=t.state.selection.ranges.some(f=>f.from==c&&f.to==h);i.add(c,h,u?X4:V4)})}return i.finish()}},{decorations:n=>n.decorations});function Gc(n){return e=>{let t=e.state.field(as,!1);return t&&t.query.spec.valid?n(e,t):gO(e)}}const nf=Gc((n,{query:e})=>{let{from:t,to:i}=n.state.selection.main,r=e.nextMatch(n.state.doc,t,i);return!r||r.from==t&&r.to==i?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:yO(n,r),userEvent:"select.search"}),!0)}),rf=Gc((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main,s=e.prevMatch(t.doc,i,r);return s?(n.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:yO(n,s),userEvent:"select.search"}),!0):!1}),Z4=Gc((n,{query:e})=>{let t=e.matchAll(n.state.doc,1e3);return!t||!t.length?!1:(n.dispatch({selection:ve.create(t.map(i=>ve.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),q4=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,s=[],o=0;for(let a=new fa(n.doc,n.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(ve.range(a.value.from,a.value.to))}return e(n.update({selection:ve.create(s,o),userEvent:"select.search.matches"})),!0},F1=Gc((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t.doc,i,i);if(!s)return!1;let o=[],a,l,c=[];if(s.from==i&&s.to==r&&(l=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(t.doc,s.from,s.to),c.push(Ue.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),s){let h=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a={anchor:s.from-h,head:s.to-h},c.push(yO(n,s))}return n.dispatch({changes:o,selection:a,scrollIntoView:!!a,effects:c,userEvent:"input.replace"}),!0}),K4=Gc((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state.doc,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Ue.announce.of(i),userEvent:"input.replace.all"}),!0});function mO(n){return n.state.facet(pd).createPanel(n)}function _y(n,e){var t;let i=n.selection.main,r=i.empty||i.to>i.from+100?"":n.sliceDoc(i.from,i.to),s=(t=e==null?void 0:e.caseSensitive)!==null&&t!==void 0?t:n.facet(pd).caseSensitive;return e&&!r?e:new dC({search:r.replace(/\n/g,"\\n"),caseSensitive:s})}const gO=n=>{let e=n.state.field(as,!1);if(e&&e.panel){let t=oc(n,mO);if(!t)return!1;let i=t.dom.querySelector("[main-field]");if(i&&i!=n.root.activeElement){let r=_y(n.state,e.query.spec);r.valid&&n.dispatch({effects:fc.of(r)}),i.focus(),i.select()}}else n.dispatch({effects:[pO.of(!0),e?fc.of(_y(n.state,e.query.spec)):et.appendConfig.of(xy)]});return!0},mC=n=>{let e=n.state.field(as,!1);if(!e||!e.panel)return!1;let t=oc(n,mO);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:pO.of(!1)}),!0},gC=[{key:"Mod-f",run:gO,scope:"editor search-panel"},{key:"F3",run:nf,shift:rf,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:nf,shift:rf,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:mC,scope:"editor search-panel"},{key:"Mod-Shift-l",run:q4},{key:"Alt-g",run:Q4},{key:"Mod-d",run:z4,preventDefault:!0}];class J4{constructor(e){this.view=e;let t=this.query=e.state.field(as).query.spec;this.commit=this.commit.bind(this),this.searchField=$t("input",{value:t.search,placeholder:fi(e,"Find"),"aria-label":fi(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$t("input",{value:t.replace,placeholder:fi(e,"Replace"),"aria-label":fi(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=$t("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=$t("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit});function i(r,s,o){return $t("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=$t("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>nf(e),[fi(e,"next")]),i("prev",()=>rf(e),[fi(e,"previous")]),i("select",()=>Z4(e),[fi(e,"all")]),$t("label",null,[this.caseField,fi(e,"match case")]),$t("label",null,[this.reField,fi(e,"regexp")]),...e.state.readOnly?[]:[$t("br"),this.replaceField,i("replace",()=>F1(e),[fi(e,"replace")]),i("replaceAll",()=>K4(e),[fi(e,"replace all")]),$t("button",{name:"close",onclick:()=>mC(e),"aria-label":fi(e,"close"),type:"button"},["\xD7"])]])}commit(){let e=new dC({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:fc.of(e)}))}keydown(e){TF(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?rf:nf)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),F1(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(fc)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(pd).top}}function fi(n,e){return n.state.phrase(e)}const Wh=30,Uh=/[\s\.,:;?!]/;function yO(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,s=Math.max(i.from,e-Wh),o=Math.min(r,t+Wh),a=n.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Wh;l++)if(!Uh.test(a[l+1])&&Uh.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Wh;l--)if(!Uh.test(a[l-1])&&Uh.test(a[l])){a=a.slice(0,l);break}}return Ue.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const e8=Ue.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),xy=[as,Oo.lowest(Y4),e8];class yC{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=Nt(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),s=r.search(bC(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function W1(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function t8(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let s=1;s<r.length;s++)t[r[s]]=!0}let i=W1(e)+W1(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function OC(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:t8(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:t}:null}}function n8(n,e){return t=>{for(let i=Nt(t.state).resolveInner(t.pos,-1);i;i=i.parent)if(n.indexOf(i.name)>-1)return null;return e(t)}}class U1{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function ls(n){return n.selection.main.head}function bC(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?n:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}function i8(n,e,t,i){return Object.assign(Object.assign({},n.changeByRange(r=>{if(r==n.selection.main)return{changes:{from:t,to:i,insert:e},range:ve.cursor(t+e.length)};let s=i-t;return!r.empty||s&&n.sliceDoc(r.from-s,r.from)!=n.sliceDoc(t,i)?{range:r}:{changes:{from:r.from-s,to:r.from,insert:e},range:ve.cursor(r.from-s+e.length)}})),{userEvent:"input.complete"})}function vC(n,e){const t=e.completion.apply||e.completion.label;let i=e.source;typeof t=="string"?n.dispatch(i8(n.state,t,i.from,i.to)):t(n,e.completion,i.from,i.to)}const z1=new WeakMap;function r8(n){if(!Array.isArray(n))return n;let e=z1.get(n);return e||z1.set(n,e=OC(n)),e}class s8{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=Sn(e,t),r=di(i);this.chars.push(i);let s=e.slice(t,t+r),o=s.toUpperCase();this.folded.push(Sn(o==s?s.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:s,byWord:o}=this;if(t.length==1){let g=Sn(e,0);return g==t[0]?[0,0,di(g)]:g==i[0]?[-200,0,di(g)]:null}let a=e.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let l=t.length,c=0;if(a<0){for(let g=0,v=Math.min(e.length,200);g<v&&c<l;){let O=Sn(e,g);(O==t[c]||O==i[c])&&(r[c++]=g),g+=di(O)}if(c<l)return null}let h=0,u=0,f=!1,p=0,d=-1,m=-1,b=/[a-z]/.test(e),A=!0;for(let g=0,v=Math.min(e.length,200),O=0;g<v&&u<l;){let _=Sn(e,g);a<0&&(h<l&&_==t[h]&&(s[h++]=g),p<l&&(_==t[p]||_==i[p]?(p==0&&(d=g),m=g+1,p++):p=0));let x,E=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(x=z0(_))!=x.toLowerCase()?1:x!=x.toUpperCase()?2:0;(!g||E==1&&b||O==0&&E!=0)&&(t[u]==_||i[u]==_&&(f=!0)?o[u++]=g:o.length&&(A=!1)),O=E,g+=di(_)}return u==l&&o[0]==0&&A?this.result(-100+(f?-200:0),o,e):p==l&&d==0?[-200-e.length,0,m]:a>-1?[-700-e.length,a,a+this.pattern.length]:p==l?[-200+-700-e.length,d,m]:u==l?this.result(-100+(f?-200:0)+-700+(A?0:-1100),o,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[e-i.length],s=1;for(let o of t){let a=o+(this.astral?di(Sn(i,o)):1);s>1&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return r}}const xs=je.define({combine(n){return Lr(n,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>i=>o8(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function o8(n,e){return n?e?n+" "+e:n:e}function a8(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let{label:o}=t,a=0;for(let l=1;l<r.length;){let c=r[l++],h=r[l++];c>a&&s.appendChild(document.createTextNode(o.slice(a,c)));let u=s.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(o.slice(c,h))),u.className="cm-completionMatchedText",a=h}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function j1(n,e,t){if(n<=t)return{from:0,to:n};if(e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class l8{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this};let i=e.state.field(t),{options:r,selected:s}=i.open,o=e.state.facet(xs);this.optionContent=a8(o),this.optionClass=o.optionClass,this.range=j1(r.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let l=a.target,c;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(c=/-(\d+)$/.exec(l.id))&&+c[1]<r.length){vC(e,r[+c[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=j1(t.options.length,t.selected,this.view.state.facet(xs).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>ri(this.view.state,o,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&h8(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.top>Math.min(innerHeight,t.bottom)-10||r.bottom<Math.max(0,t.top)+10)return null;let s=Math.max(0,Math.min(r.top,innerHeight-i.height))-t.top,o=this.view.textDirection==Gt.RTL,a=t.left,l=innerWidth-t.right;return o&&a<Math.min(i.width,l)?o=!1:!o&&l<Math.min(i.width,a)&&(o=!0),{top:s,left:o}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=i.from;s<i.to;s++){let{completion:o,match:a}=e[s];const l=r.appendChild(document.createElement("li"));l.id=t+"-"+s,l.setAttribute("role","option");let c=this.optionClass(o);c&&(l.className=c);for(let h of this.optionContent){let u=h(o,this.view.state,a);u&&l.appendChild(u)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function c8(n){return e=>new l8(e,n)}function h8(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?n.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(n.scrollTop+=i.bottom-t.bottom)}function H1(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function u8(n,e){let t=[],i=0;for(let o of n)if(o.hasResult())if(o.result.filter===!1){let a=o.result.getMatch;for(let l of o.result.options){let c=[1e9-i++];if(a)for(let h of a(l))c.push(h);t.push(new U1(l,o,c))}}else{let a=new s8(e.sliceDoc(o.from,o.to)),l;for(let c of o.result.options)(l=a.match(c.label))&&(c.boost!=null&&(l[0]+=c.boost),t.push(new U1(c,o,l)))}let r=[],s=null;for(let o of t.sort(m8))!s||s.label!=o.completion.label||s.detail!=o.completion.detail||s.type!=null&&o.completion.type!=null&&s.type!=o.completion.type||s.apply!=o.completion.apply?r.push(o):H1(o.completion)>H1(s)&&(r[r.length-1]=o),s=o.completion;return r}class Nl{constructor(e,t,i,r,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Nl(this.options,G1(t,e),this.tooltip,this.timestamp,e)}static build(e,t,i,r,s){let o=u8(e,t);if(!o.length)return null;let a=0;if(r&&r.selected){let l=r.options[r.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new Nl(o,G1(i,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:c8(pi),above:s.aboveCursor},r?r.timestamp:Date.now(),a)}map(e){return new Nl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class sf{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new sf(p8,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(xs),s=(i.override||t.languageDataAt("autocomplete",ls(t)).map(r8)).map(a=>(this.active.find(c=>c.source==a)||new Fn(a,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!f8(s,this.active)?Nl.build(s,t,this.id,this.open,i):this.open&&e.docChanged?this.open.map(e.changes):this.open;!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Fn(a.source,0):a));for(let a of e.effects)a.is(AC)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new sf(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:d8}}function f8(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let r=t==n.length,s=i==e.length;if(r||s)return r==s;if(n[t++].result!=e[i++].result)return!1}}const d8={"aria-autocomplete":"list"};function G1(n,e){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":n+"-"+e,"aria-controls":n}}const p8=[];function m8(n,e){let t=e.match[0]-n.match[0];return t||n.completion.label.localeCompare(e.completion.label)}function ky(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Fn{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=ky(e),r=this;i?r=r.handleUserEvent(e,i,t):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new Fn(r.source,0));for(let s of e.effects)if(s.is(OO))r=new Fn(r.source,1,s.value?ls(e.state):-1);else if(s.is(of))r=new Fn(r.source,0);else if(s.is(wC))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Fn(this.source,1)}handleChange(e){return e.changes.touchesRange(ls(e.startState))?new Fn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Fn(this.source,this.state,e.mapPos(this.explicitPos))}}class Ll extends Fn{constructor(e,t,i,r,s){super(e,2,t),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,t,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=ls(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||t=="delete"&&ls(e.startState)==this.from)return new Fn(this.source,t=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return g8(this.result.validFor,e.state,s,o)?new Ll(this.source,l,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new yC(e.state,a,l>=0)))?new Ll(this.source,l,c,c.from,(r=c.to)!==null&&r!==void 0?r:ls(e.state)):new Fn(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Fn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Ll(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function g8(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):bC(n,!0).test(r)}const OO=et.define(),of=et.define(),wC=et.define({map(n,e){return n.map(t=>t.map(e))}}),AC=et.define(),pi=yn.define({create(){return sf.start()},update(n,e){return n.update(e)},provide:n=>[K0.from(n,e=>e.tooltip),Ue.contentAttributes.from(n,e=>e.attrs)]}),_C=75;function zh(n,e="option"){return t=>{let i=t.state.field(pi,!1);if(!i||!i.open||Date.now()-i.open.timestamp<_C)return!1;let r=1,s;e=="page"&&(s=h3(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let o=i.open.selected+r*(n?1:-1),{length:a}=i.open.options;return o<0?o=e=="page"?0:a-1:o>=a&&(o=e=="page"?a-1:0),t.dispatch({effects:AC.of(o)}),!0}}const y8=n=>{let e=n.state.field(pi,!1);return n.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<_C?!1:(vC(n,e.open.options[e.open.selected]),!0)},O8=n=>n.state.field(pi,!1)?(n.dispatch({effects:OO.of(!0)}),!0):!1,b8=n=>{let e=n.state.field(pi,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:of.of(null)}),!0)};class v8{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const V1=50,w8=50,A8=1e3,_8=Zt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(pi).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(pi);if(!n.selectionSet&&!n.docChanged&&n.startState.field(pi)==e)return;let t=n.transactions.some(i=>(i.selection||i.docChanged)&&!ky(i));for(let i=0;i<this.running.length;i++){let r=this.running[i];if(t||r.updates.length+n.transactions.length>w8&&Date.now()-r.time>A8){for(let s of r.context.abortListeners)try{s()}catch(o){ri(this.view.state,o)}r.context.abortListeners=null,this.running.splice(i--,1)}else r.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(r=>r.active.source==i.source))?setTimeout(()=>this.startUpdate(),V1):-1,this.composing!=0)for(let i of n.transactions)ky(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(pi);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=ls(e),i=new yC(e,t,n.explicitPos==t),r=new v8(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:of.of(null)}),ri(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),V1))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(xs);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let o=new Ll(r.active.source,r.active.explicitPos,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:ls(r.updates.length?r.updates[0].startState:this.view.state));for(let a of r.updates)o=o.update(a,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(pi).active.find(o=>o.source==r.active.source);if(s&&s.state==1)if(r.done==null){let o=new Fn(r.active.source,0);for(let a of r.updates)o=o.update(a,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:wC.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(pi,!1);n&&n.tooltip&&this.view.state.facet(xs).closeOnBlur&&this.view.dispatch({effects:of.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:OO.of(!1)}),20),this.composing=0}}}),xC=Ue.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class x8{constructor(e,t,i,r){this.field=e,this.line=t,this.from=i,this.to=r}}class bO{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,wn.TrackDel),i=e.mapPos(this.to,1,wn.TrackDel);return t==null||i==null?null:new bO(this.field,t,i)}}class vO{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],r=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(i.length){let c=o,h=/^\t*/.exec(l)[0].length;for(let u=0;u<h;u++)c+=e.facet(id);r.push(t+c.length-h),l=c+l.slice(h)}i.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new bO(l.field,r[l.line]+l.from,r[l.line]+l.to));return{text:i,ranges:a}}static parse(e){let t=[],i=[],r=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1;for(let h=0;h<t.length;h++)(a!=null?t[h].seq==a:l?t[h].name==l:!1)&&(c=h);if(c<0){let h=0;for(;h<t.length&&(a==null||t[h].seq!=null&&t[h].seq<a);)h++;t.splice(h,0,{seq:a,name:l}),c=h;for(let u of r)u.field>=c&&u.field++}r.push(new x8(c,i.length,s.index,s.index+l.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}for(let a;a=/([$#])\\{/.exec(o);){o=o.slice(0,a.index)+a[1]+"{"+o.slice(a.index+a[0].length);for(let l of r)l.line==i.length&&l.from>a.index&&(l.from--,l.to--)}i.push(o)}return new vO(i,r)}}let k8=Me.widget({widget:new class extends Br{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),S8=Me.mark({class:"cm-snippetField"});class Da{constructor(e,t){this.ranges=e,this.active=t,this.deco=Me.set(e.map(i=>(i.from==i.to?k8:S8).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let r=i.map(e);if(!r)return null;t.push(r)}return new Da(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const Vc=et.define({map(n,e){return n&&n.map(e)}}),E8=et.define(),dc=yn.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Vc))return t.value;if(t.is(E8)&&n)return new Da(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>Ue.decorations.from(n,e=>e?e.deco:Me.none)});function wO(n,e){return ve.create(n.filter(t=>t.field==e).map(t=>ve.range(t.from,t.to)))}function T8(n){let e=vO.parse(n);return(t,i,r,s)=>{let{text:o,ranges:a}=e.instantiate(t.state,r),l={changes:{from:r,to:s,insert:Ot.of(o)},scrollIntoView:!0};if(a.length&&(l.selection=wO(a,0)),a.length>1){let c=new Da(a,0),h=l.effects=[Vc.of(c)];t.state.field(dc,!1)===void 0&&h.push(et.appendConfig.of([dc,P8,D8,xC]))}t.dispatch(t.state.update(l))}}function kC(n){return({state:e,dispatch:t})=>{let i=e.field(dc,!1);if(!i||n<0&&i.active==0)return!1;let r=i.active+n,s=n>0&&!i.ranges.some(o=>o.field==r+n);return t(e.update({selection:wO(i.ranges,r),effects:Vc.of(s?null:new Da(i.ranges,r))})),!0}}const C8=({state:n,dispatch:e})=>n.field(dc,!1)?(e(n.update({effects:Vc.of(null)})),!0):!1,I8=kC(1),R8=kC(-1),Q8=[{key:"Tab",run:I8,shift:R8},{key:"Escape",run:C8}],X1=je.define({combine(n){return n.length?n[0]:Q8}}),P8=Oo.highest(bo.compute([X1],n=>n.facet(X1)));function Ti(n,e){return Object.assign(Object.assign({},e),{apply:T8(n)})}const D8=Ue.domEventHandlers({mousedown(n,e){let t=e.state.field(dc,!1),i;if(!t||(i=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let r=t.ranges.find(s=>s.from<=i&&s.to>=i);return!r||r.field==t.active?!1:(e.dispatch({selection:wO(t.ranges,r.field),effects:Vc.of(t.ranges.some(s=>s.field>r.field)?new Da(t.ranges,r.field):null)}),!0)}}),af={brackets:["(","[","{","'",'"'],before:")]}:;>"},Xs=et.define({map(n,e){let t=e.mapPos(n,-1,wn.TrackAfter);return t==null?void 0:t}}),AO=et.define({map(n,e){return e.mapPos(n)}}),_O=new class extends so{};_O.startSide=1;_O.endSide=-1;const SC=yn.define({create(){return vt.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(n=vt.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(Xs)?n=n.update({add:[_O.range(t.value,t.value+1)]}):t.is(AO)&&(n=n.update({filter:i=>i!=t.value}));return n}});function N8(){return[B8,SC]}const vm="()[]{}<>";function EC(n){for(let e=0;e<vm.length;e+=2)if(vm.charCodeAt(e)==n)return vm.charAt(e+1);return z0(n<128?n:n+1)}function TC(n,e){return n.languageDataAt("closeBrackets",e)[0]||af}const L8=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),B8=Ue.inputHandler.of((n,e,t,i)=>{if((L8?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&di(Sn(i,0))==1||e!=r.from||t!=r.to)return!1;let s=F8(n.state,i);return s?(n.dispatch(s),!0):!1}),M8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=TC(n,n.selection.main.head).brackets||af.brackets,r=null,s=n.changeByRange(o=>{if(o.empty){let a=W8(n.doc,o.head);for(let l of i)if(l==a&&md(n.doc,o.head)==EC(Sn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ve.cursor(o.head-l.length),userEvent:"delete.backward"}}return{range:r=o}});return r||e(n.update(s,{scrollIntoView:!0})),!r},$8=[{key:"Backspace",run:M8}];function F8(n,e){let t=TC(n,n.selection.main.head),i=t.brackets||af.brackets;for(let r of i){let s=EC(Sn(r,0));if(e==r)return s==r?j8(n,r,i.indexOf(r+r+r)>-1):U8(n,r,s,t.before||af.before);if(e==s&&CC(n,n.selection.main.from))return z8(n,r,s)}return null}function CC(n,e){let t=!1;return n.field(SC).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function md(n,e){let t=n.sliceString(e,e+2);return t.slice(0,di(Sn(t,0)))}function W8(n,e){let t=n.sliceString(e-2,e);return di(Sn(t,0))==t.length?t:t.slice(1)}function U8(n,e,t,i){let r=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Xs.of(o.to+e.length),range:ve.range(o.anchor+e.length,o.head+e.length)};let a=md(n.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:Xs.of(o.head+e.length),range:ve.cursor(o.head+e.length)}:{range:r=o}});return r?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function z8(n,e,t){let i=null,r=n.selection.ranges.map(s=>s.empty&&md(n.doc,s.head)==t?ve.cursor(s.head+t.length):i=s);return i?null:n.update({selection:ve.create(r,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:s})=>AO.of(s))})}function j8(n,e,t){let i=null,r=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:Xs.of(s.to+e.length),range:ve.range(s.anchor+e.length,s.head+e.length)};let o=s.head,a=md(n.doc,o);if(a==e){if(Y1(n,o))return{changes:{insert:e+e,from:o},effects:Xs.of(o+e.length),range:ve.cursor(o+e.length)};if(CC(n,o)){let l=t&&n.sliceDoc(o,o+e.length*3)==e+e+e;return{range:ve.cursor(o+e.length*(l?3:1)),effects:AO.of(o)}}}else{if(t&&n.sliceDoc(o-2*e.length,o)==e+e&&Y1(n,o-2*e.length))return{changes:{insert:e+e+e+e,from:o},effects:Xs.of(o+e.length),range:ve.cursor(o+e.length)};if(n.charCategorizer(o)(a)!=Dn.Word){let l=n.sliceDoc(o-1,o);if(l!=e&&n.charCategorizer(o)(l)!=Dn.Word&&!H8(n,o,e))return{changes:{insert:e+e,from:o},effects:Xs.of(o+e.length),range:ve.cursor(o+e.length)}}}return{range:i=s}});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function Y1(n,e){let t=Nt(n).resolveInner(e+1);return t.parent&&t.from==e}function H8(n,e,t){let i=Nt(n).resolveInner(e,-1);for(let r=0;r<5;r++){if(n.sliceDoc(i.from,i.from+t.length)==t)return!0;let s=i.to==e&&i.parent;if(!s)break;i=s}return!1}function G8(n={}){return[pi,xs.of(n),_8,V8,xC]}const IC=[{key:"Ctrl-Space",run:O8},{key:"Escape",run:b8},{key:"ArrowDown",run:zh(!0)},{key:"ArrowUp",run:zh(!1)},{key:"PageDown",run:zh(!0,"page")},{key:"PageUp",run:zh(!1,"page")},{key:"Enter",run:y8}],V8=Oo.highest(bo.computeN([xs],n=>n.facet(xs).defaultKeymap?[IC]:[]));class X8{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class zs{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,s=i.facet(Ho).markerFilter;s&&(r=s(r));let o=Me.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?Me.widget({widget:new r9(a),diagnostic:a}).range(a.from):Me.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new zs(o,t,da(o))}}function da(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new X8(r,s,o.diagnostic),!1}),i}function Y8(n,e){return!!(n.effects.some(t=>t.is(xO))||n.changes.touchesRange(e.pos))}function RC(n,e){return n.field(ii,!1)?e:e.concat(et.appendConfig.of([ii,Ue.decorations.compute([ii],t=>{let{selected:i,panel:r}=t.field(ii);return!i||!r||i.from==i.to?Me.none:Me.set([q8.range(i.from,i.to)])}),c3(K8,{hideOn:Y8}),o9]))}function Z8(n,e){return{effects:RC(n,[xO.of(e)])}}const xO=et.define(),kO=et.define(),QC=et.define(),ii=yn.define({create(){return new zs(Me.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let r=e.changes.mapPos(n.selected.from,1);i=da(t,n.selected.diagnostic,r)||da(t,null,r)}n=new zs(t,n.panel,i)}for(let t of e.effects)t.is(xO)?n=zs.init(t.value,n.panel,e.state):t.is(kO)?n=new zs(n.diagnostics,t.value?gd.open:null,n.selected):t.is(QC)&&(n=new zs(n.diagnostics,n.panel,t.value));return n},provide:n=>[ac.from(n,e=>e.panel),Ue.decorations.from(n,e=>e.diagnostics)]}),q8=Me.mark({class:"cm-lintRange cm-lintRange-active"});function K8(n,e,t){let{diagnostics:i}=n.state.field(ii),r=[],s=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:h})=>{e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0))&&(r.push(h.diagnostic),s=Math.min(l,s),o=Math.max(c,o))});let a=n.state.facet(Ho).tooltipFilter;return a&&(r=a(r)),r.length?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:J8(n,r)}}}:null}function J8(n,e){return $t("ul",{class:"cm-tooltip-lint"},e.map(t=>DC(n,t,!1)))}const e9=n=>{let e=n.state.field(ii,!1);(!e||!e.panel)&&n.dispatch({effects:RC(n.state,[kO.of(!0)])});let t=oc(n,gd.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Z1=n=>{let e=n.state.field(ii,!1);return!e||!e.panel?!1:(n.dispatch({effects:kO.of(!1)}),!0)},t9=n=>{let e=n.state.field(ii,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},n9=[{key:"Mod-Shift-m",run:e9},{key:"F8",run:t9}],i9=Zt.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Ho);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Ho);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(Z8(this.view.state,r))},i=>{ri(this.view.state,i)})}}update(n){let e=n.state.facet(Ho);(n.docChanged||e!=n.startState.facet(Ho))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Ho=je.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},Lr(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:i9});function PC(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function DC(n,e,t){var i;let r=t?PC(e.actions):[];return $t("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},$t("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=u=>{u.preventDefault();let f=da(n.state.field(ii).diagnostics,e);f&&s.apply(n,f.from,f.to)},{name:l}=s,c=r[o]?l.indexOf(r[o]):-1,h=c<0?l:[l.slice(0,c),$t("u",l.slice(c,c+1)),l.slice(c+1)];return $t("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${c<0?"":` (access key "${r[o]})"`}.`},h)}),e.source&&$t("div",{class:"cm-diagnosticSource"},e.source))}class r9 extends Br{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return $t("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class q1{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=DC(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class gd{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)Z1(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=PC(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=da(this.view.state.field(ii).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=$t("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=$t("div",{class:"cm-panel-lint"},this.list,$t("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Z1(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(ii).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(ii),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,h;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==l.diagnostic){c=u;break}c<0?(h=new q1(this.view,l.diagnostic),this.items.splice(i,0,h),r=!0):(h=this.items[c],c>i&&(this.items.splice(i,c-i),r=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new q1(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(ii),i=da(t.diagnostics,this.items[e].diagnostic);!i||this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:QC.of(i)})}static open(e){return new gd(e)}}function s9(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function wm(n){return s9(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const o9=Ue.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:wm("#d11")},".cm-lintRange-warning":{backgroundImage:wm("orange")},".cm-lintRange-info":{backgroundImage:wm("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});[...$8,...aC,...gC,...uO,...uW,...IC,...n9];const a9=[JE(),PT(),XE(),oO(ST,{fallback:!0}),bo.of([...aC,...uO])];class lf{constructor(e,t,i,r,s,o,a){this.type=e,this.value=t,this.from=i,this.hash=r,this.end=s,this.children=o,this.positions=a,this.hashProp=[[tt.contextHash,r]]}static create(e,t,i,r,s){let o=r+(r<<8)+e+(t<<4)|0;return new lf(e,t,i,o,s,[],[])}addChild(e,t){e.prop(tt.contextHash)!=this.hash&&(e=new wt(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let i=this.children.length-1;return i>=0&&(t=Math.max(t,this.positions[i]+this.children[i].length+this.from)),new wt(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(s,o,a)=>new wt(sn.none,s,o,a,this.hashProp)})}}var Ce;(function(n){n[n.Document=1]="Document",n[n.CodeBlock=2]="CodeBlock",n[n.FencedCode=3]="FencedCode",n[n.Blockquote=4]="Blockquote",n[n.HorizontalRule=5]="HorizontalRule",n[n.BulletList=6]="BulletList",n[n.OrderedList=7]="OrderedList",n[n.ListItem=8]="ListItem",n[n.ATXHeading1=9]="ATXHeading1",n[n.ATXHeading2=10]="ATXHeading2",n[n.ATXHeading3=11]="ATXHeading3",n[n.ATXHeading4=12]="ATXHeading4",n[n.ATXHeading5=13]="ATXHeading5",n[n.ATXHeading6=14]="ATXHeading6",n[n.SetextHeading1=15]="SetextHeading1",n[n.SetextHeading2=16]="SetextHeading2",n[n.HTMLBlock=17]="HTMLBlock",n[n.LinkReference=18]="LinkReference",n[n.Paragraph=19]="Paragraph",n[n.CommentBlock=20]="CommentBlock",n[n.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",n[n.Escape=22]="Escape",n[n.Entity=23]="Entity",n[n.HardBreak=24]="HardBreak",n[n.Emphasis=25]="Emphasis",n[n.StrongEmphasis=26]="StrongEmphasis",n[n.Link=27]="Link",n[n.Image=28]="Image",n[n.InlineCode=29]="InlineCode",n[n.HTMLTag=30]="HTMLTag",n[n.Comment=31]="Comment",n[n.ProcessingInstruction=32]="ProcessingInstruction",n[n.URL=33]="URL",n[n.HeaderMark=34]="HeaderMark",n[n.QuoteMark=35]="QuoteMark",n[n.ListMark=36]="ListMark",n[n.LinkMark=37]="LinkMark",n[n.EmphasisMark=38]="EmphasisMark",n[n.CodeMark=39]="CodeMark",n[n.CodeText=40]="CodeText",n[n.CodeInfo=41]="CodeInfo",n[n.LinkTitle=42]="LinkTitle",n[n.LinkLabel=43]="LinkLabel"})(Ce||(Ce={}));class l9{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class c9{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return Bl(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,i=0){for(let r=t;r<e;r++)i+=this.text.charCodeAt(r)==9?4-i%4:1;return i}findColumn(e){let t=0;for(let i=0;t<this.text.length&&i<e;t++)i+=this.text.charCodeAt(t)==9?4-i%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function K1(n,e,t){if(t.pos==t.text.length||n!=e.block&&t.indent>=e.stack[t.depth+1].value+t.baseIndent)return!0;if(t.indent>=t.baseIndent+4)return!1;let i=(n.type==Ce.OrderedList?TO:EO)(t,e,!1);return i>0&&(n.type!=Ce.BulletList||SO(t,e,!1)<0)&&t.text.charCodeAt(t.pos+i-1)==n.value}const NC={[Ce.Blockquote](n,e,t){return t.next!=62?!1:(t.markers.push(dt(Ce.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1)),t.moveBase(t.pos+(Si(t.text.charCodeAt(t.pos+1))?2:1)),n.end=e.lineStart+t.text.length,!0)},[Ce.ListItem](n,e,t){return t.indent<t.baseIndent+n.value&&t.next>-1?!1:(t.moveBaseColumn(t.baseIndent+n.value),!0)},[Ce.OrderedList]:K1,[Ce.BulletList]:K1,[Ce.Document](){return!0}};function Si(n){return n==32||n==9||n==10||n==13}function Bl(n,e=0){for(;e<n.length&&Si(n.charCodeAt(e));)e++;return e}function J1(n,e,t){for(;e>t&&Si(n.charCodeAt(e-1));)e--;return e}function LC(n){if(n.next!=96&&n.next!=126)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;if(e<n.pos+3)return-1;if(n.next==96){for(let t=e;t<n.text.length;t++)if(n.text.charCodeAt(t)==96)return-1}return e}function BC(n){return n.next!=62?-1:n.text.charCodeAt(n.pos+1)==32?2:1}function SO(n,e,t){if(n.next!=42&&n.next!=45&&n.next!=95)return-1;let i=1;for(let r=n.pos+1;r<n.text.length;r++){let s=n.text.charCodeAt(r);if(s==n.next)i++;else if(!Si(s))return-1}return t&&n.next==45&&FC(n)>-1&&n.depth==e.stack.length||i<3?-1:1}function MC(n,e){for(let t=n.stack.length-1;t>=0;t--)if(n.stack[t].type==e)return!0;return!1}function EO(n,e,t){return(n.next==45||n.next==43||n.next==42)&&(n.pos==n.text.length-1||Si(n.text.charCodeAt(n.pos+1)))&&(!t||MC(e,Ce.BulletList)||n.skipSpace(n.pos+2)<n.text.length)?1:-1}function TO(n,e,t){let i=n.pos,r=n.next;for(;r>=48&&r<=57;){i++;if(i==n.text.length)return-1;r=n.text.charCodeAt(i)}return i==n.pos||i>n.pos+9||r!=46&&r!=41||i<n.text.length-1&&!Si(n.text.charCodeAt(i+1))||t&&!MC(e,Ce.OrderedList)&&(n.skipSpace(i+1)==n.text.length||i>n.pos+1||n.next!=49)?-1:i+1-n.pos}function $C(n){if(n.next!=35)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==35;)e++;if(e<n.text.length&&n.text.charCodeAt(e)!=32)return-1;let t=e-n.pos;return t>6?-1:t}function FC(n){if(n.next!=45&&n.next!=61||n.indent>=n.baseIndent+4)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;let t=e;for(;e<n.text.length&&Si(n.text.charCodeAt(e));)e++;return e==n.text.length?t:-1}const Sy=/^[ \t]*$/,WC=/-->/,UC=/\?>/,Ey=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,WC],[/^\s*<\?/,UC],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,Sy],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,Sy]];function zC(n,e,t){if(n.next!=60)return-1;let i=n.text.slice(n.pos);for(let r=0,s=Ey.length-(t?1:0);r<s;r++)if(Ey[r][0].test(i))return r;return-1}function e_(n,e){let t=n.countIndent(e,n.pos,n.indent),i=n.countIndent(n.skipSpace(e),e,t);return i>=t+5?t+1:i}function $s(n,e,t){let i=n.length-1;i>=0&&n[i].to==e&&n[i].type==Ce.CodeText?n[i].to=t:n.push(dt(Ce.CodeText,e,t))}const jh={LinkReference:void 0,IndentedCode(n,e){let t=e.baseIndent+4;if(e.indent<t)return!1;let i=e.findColumn(t),r=n.lineStart+i,s=n.lineStart+e.text.length,o=[],a=[];for($s(o,r,s);n.nextLine()&&e.depth>=n.stack.length;)if(e.pos==e.text.length){$s(a,n.lineStart-1,n.lineStart);for(let l of e.markers)a.push(l)}else{if(e.indent<t)break;{if(a.length){for(let c of a)c.type==Ce.CodeText?$s(o,c.from,c.to):o.push(c);a=[]}$s(o,n.lineStart-1,n.lineStart);for(let c of e.markers)o.push(c);s=n.lineStart+e.text.length;let l=n.lineStart+e.findColumn(e.baseIndent+4);l<s&&$s(o,l,s)}}return a.length&&(a=a.filter(l=>l.type!=Ce.CodeText),a.length&&(e.markers=a.concat(e.markers))),n.addNode(n.buffer.writeElements(o,-r).finish(Ce.CodeBlock,s-r),r),!0},FencedCode(n,e){let t=LC(e);if(t<0)return!1;let i=n.lineStart+e.pos,r=e.next,s=t-e.pos,o=e.skipSpace(t),a=J1(e.text,e.text.length,o),l=[dt(Ce.CodeMark,i,i+s)];o<a&&l.push(dt(Ce.CodeInfo,n.lineStart+o,n.lineStart+a));for(let c=!0;n.nextLine()&&e.depth>=n.stack.length;c=!1){let h=e.pos;if(e.indent-e.baseIndent<4)for(;h<e.text.length&&e.text.charCodeAt(h)==r;)h++;if(h-e.pos>=s&&e.skipSpace(h)==e.text.length){for(let u of e.markers)l.push(u);l.push(dt(Ce.CodeMark,n.lineStart+e.pos,n.lineStart+h)),n.nextLine();break}else{c||$s(l,n.lineStart-1,n.lineStart);for(let p of e.markers)l.push(p);let u=n.lineStart+e.basePos,f=n.lineStart+e.text.length;u<f&&$s(l,u,f)}}return n.addNode(n.buffer.writeElements(l,-i).finish(Ce.FencedCode,n.prevLineEnd()-i),i),!0},Blockquote(n,e){let t=BC(e);return t<0?!1:(n.startContext(Ce.Blockquote,e.pos),n.addNode(Ce.QuoteMark,n.lineStart+e.pos,n.lineStart+e.pos+1),e.moveBase(e.pos+t),null)},HorizontalRule(n,e){if(SO(e,n,!1)<0)return!1;let t=n.lineStart+e.pos;return n.nextLine(),n.addNode(Ce.HorizontalRule,t),!0},BulletList(n,e){let t=EO(e,n,!1);if(t<0)return!1;n.block.type!=Ce.BulletList&&n.startContext(Ce.BulletList,e.basePos,e.next);let i=e_(e,e.pos+1);return n.startContext(Ce.ListItem,e.basePos,i-e.baseIndent),n.addNode(Ce.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(i),null},OrderedList(n,e){let t=TO(e,n,!1);if(t<0)return!1;n.block.type!=Ce.OrderedList&&n.startContext(Ce.OrderedList,e.basePos,e.text.charCodeAt(e.pos+t-1));let i=e_(e,e.pos+t);return n.startContext(Ce.ListItem,e.basePos,i-e.baseIndent),n.addNode(Ce.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(i),null},ATXHeading(n,e){let t=$C(e);if(t<0)return!1;let i=e.pos,r=n.lineStart+i,s=J1(e.text,e.text.length,i),o=s;for(;o>i&&e.text.charCodeAt(o-1)==e.next;)o--;(o==s||o==i||!Si(e.text.charCodeAt(o-1)))&&(o=e.text.length);let a=n.buffer.write(Ce.HeaderMark,0,t).writeElements(n.parser.parseInline(e.text.slice(i+t+1,o),r+t+1),-r);o<e.text.length&&a.write(Ce.HeaderMark,o-i,s-i);let l=a.finish(Ce.ATXHeading1-1+t,e.text.length-i);return n.nextLine(),n.addNode(l,r),!0},HTMLBlock(n,e){let t=zC(e,n,!1);if(t<0)return!1;let i=n.lineStart+e.pos,r=Ey[t][1],s=[],o=r!=Sy;for(;!r.test(e.text)&&n.nextLine();){if(e.depth<n.stack.length){o=!1;break}for(let c of e.markers)s.push(c)}o&&n.nextLine();let a=r==WC?Ce.CommentBlock:r==UC?Ce.ProcessingInstructionBlock:Ce.HTMLBlock,l=n.prevLineEnd();return n.addNode(n.buffer.writeElements(s,-i).finish(a,l-i),i),!0},SetextHeading:void 0};class h9{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,i){if(this.stage==-1)return!1;let r=i.content+`
`+t.scrub(),s=this.advance(r);return s>-1&&s<r.length?this.complete(e,i,s):!1}finish(e,t){return(this.stage==2||this.stage==3)&&Bl(t.content,this.pos)==t.content.length?this.complete(e,t,t.content.length):!1}complete(e,t,i){return e.addLeafElement(t,dt(Ce.LinkReference,this.start,this.start+i,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(KC(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(dt(Ce.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(ZC(e,Bl(e,this.pos),this.start)))return-1}else if(this.stage==2){let t=Bl(e,this.pos),i=0;if(t>this.pos){let r=qC(e,t,this.start);if(r){let s=Am(e,r.to-this.start);s>0&&(this.nextStage(r),i=s)}}return i||(i=Am(e,this.pos)),i>0&&i<e.length?i:-1}else return Am(e,this.pos)}}}function Am(n,e){for(;e<n.length;e++){let t=n.charCodeAt(e);if(t==10)break;if(!Si(t))return-1}return e}class u9{nextLine(e,t,i){let r=t.depth<e.stack.length?-1:FC(t),s=t.next;if(r<0)return!1;let o=dt(Ce.HeaderMark,e.lineStart+t.pos,e.lineStart+r);return e.nextLine(),e.addLeafElement(i,dt(s==61?Ce.SetextHeading1:Ce.SetextHeading2,i.start,e.prevLineEnd(),[...e.parser.parseInline(i.content,i.start),o])),!0}finish(){return!1}}const f9={LinkReference(n,e){return e.content.charCodeAt(0)==91?new h9(e):null},SetextHeading(){return new u9}},d9=[(n,e)=>$C(e)>=0,(n,e)=>LC(e)>=0,(n,e)=>BC(e)>=0,(n,e)=>EO(e,n,!0)>=0,(n,e)=>TO(e,n,!0)>=0,(n,e)=>SO(e,n,!0)>=0,(n,e)=>zC(e,n,!0)>=0],p9={text:"",end:0};class m9{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.line=new c9,this.atEnd=!1,this.dontInject=new Set,this.stoppedAt=null,this.rangeI=0,this.to=r[r.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=r[0].from,this.block=lf.create(Ce.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new b9(i,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(;e.depth<this.stack.length;)this.finishContext();for(let i of e.markers)this.addNode(i.type,i.from,i.to);if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let i of this.parser.blockParsers)if(i){let r=i(this,e);if(r!=!1){if(r==!0)return null;e.forward();continue e}}break}let t=new l9(this.lineStart+e.pos,e.text.slice(e.pos));for(let i of this.parser.leafBlockParsers)if(i){let r=i(this,t);r&&t.parsers.push(r)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let i of this.parser.endLeafBlock)if(i(this,e,t))break e}for(let i of t.parsers)if(i.nextLine(this,e,t))return null;t.content+=`
`+e.scrub();for(let i of e.markers)t.marks.push(i)}return this.finishLeaf(t),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);if(!t)return!1;let i=t,r=this.absoluteLineStart+t;for(let s=1;s<this.ranges.length;s++){let o=this.ranges[s-1].to,a=this.ranges[s].from;o>=this.lineStart&&a<r&&(i-=a-o)}return this.lineStart+=i,this.absoluteLineStart+=t,this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++}scanLine(e){let t=p9;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(t.end),t.end+=t.text.length,this.ranges.length>1){let i=this.absoluteLineStart,r=this.rangeI;for(;this.ranges[r].to<t.end;){r++;let s=this.ranges[r].from,o=this.lineChunkAt(s);t.end=s+o.length,t.text=t.text.slice(0,this.ranges[r-1].to-i)+o,i=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:i}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=i,e.reset(t);e.depth<this.stack.length;e.depth++){let r=this.stack[e.depth],s=this.parser.skipContextMarkup[r.type];if(!s)throw new Error("Unhandled block context "+Ce[r.type]);if(!s(r,this,e))break;e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),i;if(this.input.lineChunks)i=t==`
`?"":t;else{let r=t.indexOf(`
`);i=r<0?t:t.slice(0,r)}return e+i.length>this.to?i.slice(0,this.to-e):i}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,i=0){this.block=lf.create(e,i,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,i=0){this.startContext(this.parser.getNodeType(e),t,i)}addNode(e,t,i){typeof e=="number"&&(e=new wt(this.parser.nodeSet.types[e],pa,pa,(i!=null?i:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(Iy(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?jC(this.ranges,0,e.topNode,this.ranges[0].from,this.dontInject):e}finishLeaf(e){for(let i of e.parsers)if(i.finish(this,e))return;let t=Iy(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(Ce.Paragraph,e.content.length),e.start)}elt(e,t,i,r){return typeof e=="string"?dt(this.parser.getNodeType(e),t,i,r):new VC(e,t)}get buffer(){return new GC(this.parser.nodeSet)}}function jC(n,e,t,i,r){if(r.has(t.tree))return t.tree;let s=n[e].to,o=[],a=[],l=t.from+i;function c(h,u){for(;u?h>=s:h>s;){let f=n[e+1].from-s;i+=f,h+=f,e++,s=n[e].to}}for(let h=t.firstChild;h;h=h.nextSibling){c(h.from+i,!0);let u=h.from+i,f;h.to+i>s?(f=jC(n,e,h,i,r),c(h.to+i,!1)):f=h.toTree(),o.push(f),a.push(u-l)}return c(t.to+i,!1),new wt(t.type,o,a,t.to+i-l,t.tree?t.tree.propValues:void 0)}class yd extends iO{constructor(e,t,i,r,s,o,a,l,c){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=i,this.blockNames=r,this.endLeafBlock=s,this.skipContextMarkup=o,this.inlineParsers=a,this.inlineNames=l,this.wrappers=c,this.nodeTypes=Object.create(null);for(let h of e.types)this.nodeTypes[h.name]=h.id}createParse(e,t,i){let r=new m9(this,e,t,i);for(let s of this.wrappers)r=s(r,e,t,i);return r}configure(e){let t=Ty(e);if(!t)return this;let{nodeSet:i,skipContextMarkup:r}=this,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),a=this.blockNames.slice(),l=this.inlineParsers.slice(),c=this.inlineNames.slice(),h=this.endLeafBlock.slice(),u=this.wrappers;if(ll(t.defineNodes)){r=Object.assign({},r);let f=i.types.slice(),p;for(let d of t.defineNodes){let{name:m,block:b,composite:A,style:g}=typeof d=="string"?{name:d}:d;if(f.some(_=>_.name==m))continue;A&&(r[f.length]=(_,x,E)=>A(x,E,_.value));let v=f.length,O=A?["Block","BlockContext"]:b?v>=Ce.ATXHeading1&&v<=Ce.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;f.push(sn.define({id:v,name:m,props:O&&[[tt.group,O]]})),g&&(p||(p={}),Array.isArray(g)||g instanceof Qi?p[m]=g:Object.assign(p,g))}i=new Uc(f),p&&(i=i.extend(Qa(p)))}if(ll(t.props)&&(i=i.extend(...t.props)),ll(t.remove))for(let f of t.remove){let p=this.blockNames.indexOf(f),d=this.inlineNames.indexOf(f);p>-1&&(s[p]=o[p]=void 0),d>-1&&(l[d]=void 0)}if(ll(t.parseBlock))for(let f of t.parseBlock){let p=a.indexOf(f.name);if(p>-1)s[p]=f.parse,o[p]=f.leaf;else{let d=f.before?Hh(a,f.before):f.after?Hh(a,f.after)+1:a.length-1;s.splice(d,0,f.parse),o.splice(d,0,f.leaf),a.splice(d,0,f.name)}f.endLeaf&&h.push(f.endLeaf)}if(ll(t.parseInline))for(let f of t.parseInline){let p=c.indexOf(f.name);if(p>-1)l[p]=f.parse;else{let d=f.before?Hh(c,f.before):f.after?Hh(c,f.after)+1:c.length-1;l.splice(d,0,f.parse),c.splice(d,0,f.name)}}return t.wrap&&(u=u.concat(t.wrap)),new yd(i,s,o,a,h,r,l,c,u)}getNodeType(e){let t=this.nodeTypes[e];if(t==null)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let i=new y9(this,e,t);e:for(let r=t;r<i.end;){let s=i.char(r);for(let o of this.inlineParsers)if(o){let a=o(i,s,r);if(a>=0){r=a;continue e}}r++}return i.resolveMarkers(0)}}function ll(n){return n!=null&&n.length>0}function Ty(n){if(!Array.isArray(n))return n;if(n.length==0)return null;let e=Ty(n[0]);if(n.length==1)return e;let t=Ty(n.slice(1));if(!t||!e)return e||t;let i=(o,a)=>(o||pa).concat(a||pa),r=e.wrap,s=t.wrap;return{props:i(e.props,t.props),defineNodes:i(e.defineNodes,t.defineNodes),parseBlock:i(e.parseBlock,t.parseBlock),parseInline:i(e.parseInline,t.parseInline),remove:i(e.remove,t.remove),wrap:r?s?(o,a,l,c)=>r(s(o,a,l,c),a,l,c):r:s}}function Hh(n,e){let t=n.indexOf(e);if(t<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return t}let HC=[sn.none];for(let n=1,e;e=Ce[n];n++)HC[n]=sn.define({id:n,name:e,props:n>=Ce.Escape?[]:[[tt.group,n in NC?["Block","BlockContext"]:["Block","LeafBlock"]]]});const pa=[];class GC{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,i,r=0){return this.content.push(e,t,i,4+r*4),this}writeElements(e,t=0){for(let i of e)i.writeTo(this,t);return this}finish(e,t){return wt.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class pc{constructor(e,t,i,r=pa){this.type=e,this.from=t,this.to=i,this.children=r}writeTo(e,t){let i=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-i)}toTree(e){return new GC(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class VC{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return pa}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function dt(n,e,t,i){return new pc(n,e,t,i)}const XC={resolve:"Emphasis",mark:"EmphasisMark"},YC={resolve:"Emphasis",mark:"EmphasisMark"},cl={},t_={};class Pi{constructor(e,t,i,r){this.type=e,this.from=t,this.to=i,this.side=r}}const n_="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let Cy=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{Cy=new RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]","u")}catch{}const _m={Escape(n,e,t){if(e!=92||t==n.end-1)return-1;let i=n.char(t+1);for(let r=0;r<n_.length;r++)if(n_.charCodeAt(r)==i)return n.append(dt(Ce.Escape,t,t+2));return-1},Entity(n,e,t){if(e!=38)return-1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(n.slice(t+1,t+31));return i?n.append(dt(Ce.Entity,t,t+1+i[0].length)):-1},InlineCode(n,e,t){if(e!=96||t&&n.char(t-1)==96)return-1;let i=t+1;for(;i<n.end&&n.char(i)==96;)i++;let r=i-t,s=0;for(;i<n.end;i++)if(n.char(i)==96){if(s++,s==r&&n.char(i+1)!=96)return n.append(dt(Ce.InlineCode,t,i+1,[dt(Ce.CodeMark,t,t+r),dt(Ce.CodeMark,i+1-r,i+1)]))}else s=0;return-1},HTMLTag(n,e,t){if(e!=60||t==n.end-1)return-1;let i=n.slice(t+1,n.end),r=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(r)return n.append(dt(Ce.URL,t,t+1+r[0].length));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(s)return n.append(dt(Ce.Comment,t,t+1+s[0].length));let o=/^\?[^]*?\?>/.exec(i);if(o)return n.append(dt(Ce.ProcessingInstruction,t,t+1+o[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return a?n.append(dt(Ce.HTMLTag,t,t+1+a[0].length)):-1},Emphasis(n,e,t){if(e!=95&&e!=42)return-1;let i=t+1;for(;n.char(i)==e;)i++;let r=n.slice(t-1,t),s=n.slice(i,i+1),o=Cy.test(r),a=Cy.test(s),l=/\s|^$/.test(r),c=/\s|^$/.test(s),h=!c&&(!a||l||o),u=!l&&(!o||c||a),f=h&&(e==42||!u||o),p=u&&(e==42||!h||a);return n.append(new Pi(e==95?XC:YC,t,i,(f?1:0)|(p?2:0)))},HardBreak(n,e,t){if(e==92&&n.char(t+1)==10)return n.append(dt(Ce.HardBreak,t,t+2));if(e==32){let i=t+1;for(;n.char(i)==32;)i++;if(n.char(i)==10&&i>=t+2)return n.append(dt(Ce.HardBreak,t,i+1))}return-1},Link(n,e,t){return e==91?n.append(new Pi(cl,t,t+1,1)):-1},Image(n,e,t){return e==33&&n.char(t+1)==91?n.append(new Pi(t_,t,t+2,1)):-1},LinkEnd(n,e,t){if(e!=93)return-1;for(let i=n.parts.length-1;i>=0;i--){let r=n.parts[i];if(r instanceof Pi&&(r.type==cl||r.type==t_)){if(!r.side||n.skipSpace(r.to)==t&&!/[(\[]/.test(n.slice(t+1,t+2)))return n.parts[i]=null,-1;let s=n.takeContent(i),o=n.parts[i]=g9(n,s,r.type==cl?Ce.Link:Ce.Image,r.from,t+1);if(r.type==cl)for(let a=0;a<i;a++){let l=n.parts[a];l instanceof Pi&&l.type==cl&&(l.side=0)}return o.to}}return-1}};function g9(n,e,t,i,r){let{text:s}=n,o=n.char(r),a=r;if(e.unshift(dt(Ce.LinkMark,i,i+(t==Ce.Image?2:1))),e.push(dt(Ce.LinkMark,r-1,r)),o==40){let l=n.skipSpace(r+1),c=ZC(s,l-n.offset,n.offset),h;c&&(l=n.skipSpace(c.to),h=qC(s,l-n.offset,n.offset),h&&(l=n.skipSpace(h.to))),n.char(l)==41&&(e.push(dt(Ce.LinkMark,r,r+1)),a=l+1,c&&e.push(c),h&&e.push(h),e.push(dt(Ce.LinkMark,l,a)))}else if(o==91){let l=KC(s,r-n.offset,n.offset,!1);l&&(e.push(l),a=l.to)}return dt(t,i,a,e)}function ZC(n,e,t){if(n.charCodeAt(e)==60){for(let r=e+1;r<n.length;r++){let s=n.charCodeAt(r);if(s==62)return dt(Ce.URL,e+t,r+1+t);if(s==60||s==10)return!1}return null}else{let r=0,s=e;for(let o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(Si(a))break;if(o)o=!1;else if(a==40)r++;else if(a==41){if(!r)break;r--}else a==92&&(o=!0)}return s>e?dt(Ce.URL,e+t,s+t):s==n.length?null:!1}}function qC(n,e,t){let i=n.charCodeAt(e);if(i!=39&&i!=34&&i!=40)return!1;let r=i==40?41:i;for(let s=e+1,o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(o)o=!1;else{if(a==r)return dt(Ce.LinkTitle,e+t,s+1+t);a==92&&(o=!0)}}return null}function KC(n,e,t,i){for(let r=!1,s=e+1,o=Math.min(n.length,s+999);s<o;s++){let a=n.charCodeAt(s);if(r)r=!1;else{if(a==93)return i?!1:dt(Ce.LinkLabel,e+t,s+1+t);if(i&&!Si(a)&&(i=!1),a==91)return!1;a==92&&(r=!0)}}return null}class y9{constructor(e,t,i){this.parser=e,this.text=t,this.offset=i,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,i,r,s){return this.append(new Pi(e,t,i,(r?1:0)|(s?2:0)))}addElement(e){return this.append(e)}resolveMarkers(e){for(let i=e;i<this.parts.length;i++){let r=this.parts[i];if(!(r instanceof Pi&&r.type.resolve&&r.side&2))continue;let s=r.type==XC||r.type==YC,o=r.to-r.from,a,l=i-1;for(;l>=e;l--){let m=this.parts[l];if(!(!(m instanceof Pi&&m.side&1&&m.type==r.type)||s&&(r.side&1||m.side&2)&&(m.to-m.from+o)%3==0&&((m.to-m.from)%3||o%3))){a=m;break}}if(!a)continue;let c=r.type.resolve,h=[],u=a.from,f=r.to;if(s){let m=Math.min(2,a.to-a.from,o);u=a.to-m,f=r.from+m,c=m==1?"Emphasis":"StrongEmphasis"}a.type.mark&&h.push(this.elt(a.type.mark,u,a.to));for(let m=l+1;m<i;m++)this.parts[m]instanceof pc&&h.push(this.parts[m]),this.parts[m]=null;r.type.mark&&h.push(this.elt(r.type.mark,r.from,f));let p=this.elt(c,u,f,h);this.parts[l]=s&&a.from!=u?new Pi(a.type,a.from,u,a.side):null,(this.parts[i]=s&&r.to!=f?new Pi(r.type,f,r.to,r.side):null)?this.parts.splice(i,0,p):this.parts[i]=p}let t=[];for(let i=e;i<this.parts.length;i++){let r=this.parts[i];r instanceof pc&&t.push(r)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let i=this.parts[t];if(i instanceof Pi&&i.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return Bl(this.text,e-this.offset)+this.offset}elt(e,t,i,r){return typeof e=="string"?dt(this.parser.getNodeType(e),t,i,r):new VC(e,t)}}function Iy(n,e){if(!e.length)return n;if(!n.length)return e;let t=n.slice(),i=0;for(let r of e){for(;i<t.length&&t[i].to<r.to;)i++;if(i<t.length&&t[i].from<r.from){let s=t[i];s instanceof pc&&(t[i]=new pc(s.type,s.from,s.to,Iy(s.children,[r])))}else t.splice(i++,0,r)}return t}const O9=[Ce.CodeBlock,Ce.ListItem,Ce.OrderedList,Ce.BulletList];class b9{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let i=this.cursor;i||(i=this.cursor=this.fragment.tree.cursor(),i.firstChild());let r=e+this.fragment.offset;for(;i.to<=r;)if(!i.parent())return!1;for(;;){if(i.from>=r)return this.fragment.from<=t;if(!i.childAfter(r))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(tt.contextHash)==e}takeNodes(e){let t=this.cursor,i=this.fragment.offset,r=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,o=s,a=e.block.children.length,l=o,c=a;for(;;){if(t.to-i>r){if(t.type.isAnonymous&&t.firstChild())continue;break}if(e.dontInject.add(t.tree),e.addNode(t.tree,t.from-i),t.type.is("Block")&&(O9.indexOf(t.type.id)<0?(o=t.to-i,a=e.block.children.length):(o=l,a=c,l=t.to-i,c=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>a;)e.block.children.pop(),e.block.positions.pop();return o-s}}const v9=Qa({"Blockquote/...":ie.quote,HorizontalRule:ie.contentSeparator,"ATXHeading1/... SetextHeading1/...":ie.heading1,"ATXHeading2/... SetextHeading2/...":ie.heading2,"ATXHeading3/...":ie.heading3,"ATXHeading4/...":ie.heading4,"ATXHeading5/...":ie.heading5,"ATXHeading6/...":ie.heading6,"Comment CommentBlock":ie.comment,Escape:ie.escape,Entity:ie.character,"Emphasis/...":ie.emphasis,"StrongEmphasis/...":ie.strong,"Link/... Image/...":ie.link,"OrderedList/... BulletList/...":ie.list,"BlockQuote/...":ie.quote,"InlineCode CodeText":ie.monospace,URL:ie.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":ie.processingInstruction,"CodeInfo LinkLabel":ie.labelName,LinkTitle:ie.string,Paragraph:ie.content}),w9=new yd(new Uc(HC).extend(v9),Object.keys(jh).map(n=>jh[n]),Object.keys(jh).map(n=>f9[n]),Object.keys(jh),d9,NC,Object.keys(_m).map(n=>_m[n]),Object.keys(_m),[]);function A9(n,e,t){let i=[];for(let r=n.firstChild,s=e;;r=r.nextSibling){let o=r?r.from:t;if(o>s&&i.push({from:s,to:o}),!r)break;s=r.to}return i}function _9(n){let{codeParser:e,htmlParser:t}=n;return{wrap:hT((r,s)=>{let o=r.type.id;if(e&&(o==Ce.CodeBlock||o==Ce.FencedCode)){let a="";if(o==Ce.FencedCode){let c=r.node.getChild(Ce.CodeInfo);c&&(a=s.read(c.from,c.to))}let l=e(a);if(l)return{parser:l,overlay:c=>c.type.id==Ce.CodeText}}else if(t&&(o==Ce.HTMLBlock||o==Ce.HTMLTag))return{parser:t,overlay:A9(r.node,r.from,r.to)};return null})}}const x9={resolve:"Strikethrough",mark:"StrikethroughMark"},k9={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":ie.strikethrough}},{name:"StrikethroughMark",style:ie.processingInstruction}],parseInline:[{name:"Strikethrough",parse(n,e,t){return e!=126||n.char(t+1)!=126?-1:n.addDelimiter(x9,t,t+2,!0,!0)},after:"Emphasis"}]};function Ml(n,e,t=0,i,r=0){let s=0,o=!0,a=-1,l=-1,c=!1,h=()=>{i.push(n.elt("TableCell",r+a,r+l,n.parser.parseInline(e.slice(a,l),r+a)))};for(let u=t;u<e.length;u++){let f=e.charCodeAt(u);f==124&&!c?((!o||a>-1)&&s++,o=!1,i&&(a>-1&&h(),i.push(n.elt("TableDelimiter",u+r,u+r+1))),a=l=-1):(c||f!=32&&f!=9)&&(a<0&&(a=u),l=u+1),c=!c&&f==92}return a>-1&&(s++,i&&h()),s}function i_(n,e){for(let t=e;t<n.length;t++){let i=n.charCodeAt(t);if(i==124)return!0;i==92&&t++}return!1}const JC=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class r_{constructor(){this.rows=null}nextLine(e,t,i){if(this.rows==null){this.rows=!1;let r;if((t.next==45||t.next==58||t.next==124)&&JC.test(r=t.text.slice(t.pos))){let s=[];Ml(e,i.content,0,s,i.start)==Ml(e,r,t.pos)&&(this.rows=[e.elt("TableHeader",i.start,i.start+i.content.length,s),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let r=[];Ml(e,t.text,t.pos,r,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,r))}return!1}finish(e,t){return this.rows?(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0):!1}}const S9={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":ie.heading}},"TableRow",{name:"TableCell",style:ie.content},{name:"TableDelimiter",style:ie.processingInstruction}],parseBlock:[{name:"Table",leaf(n,e){return i_(e.content,0)?new r_:null},endLeaf(n,e,t){if(t.parsers.some(r=>r instanceof r_)||!i_(e.text,e.basePos))return!1;let i=n.scanLine(n.absoluteLineEnd+1).text;return JC.test(i)&&Ml(n,e.text,e.basePos)==Ml(n,i,e.basePos)},before:"SetextHeading"}]};class E9{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const T9={defineNodes:[{name:"Task",block:!0,style:ie.list},{name:"TaskMarker",style:ie.atom}],parseBlock:[{name:"TaskList",leaf(n,e){return/^\[[ xX]\]/.test(e.content)&&n.parentType().name=="ListItem"?new E9:null},after:"SetextHeading"}]},C9=[S9,T9,k9];function e2(n,e,t){return(i,r,s)=>{if(r!=n||i.char(s+1)==n)return-1;let o=[i.elt(t,s,s+1)];for(let a=s+1;a<i.end;a++){let l=i.char(a);if(l==n)return i.addElement(i.elt(e,s,a+1,o.concat(i.elt(t,a,a+1))));if(l==92&&o.push(i.elt("Escape",a,a+++2)),Si(l))break}return-1}}const I9={defineNodes:[{name:"Superscript",style:ie.special(ie.content)},{name:"SuperscriptMark",style:ie.processingInstruction}],parseInline:[{name:"Superscript",parse:e2(94,"Superscript","SuperscriptMark")}]},R9={defineNodes:[{name:"Subscript",style:ie.special(ie.content)},{name:"SubscriptMark",style:ie.processingInstruction}],parseInline:[{name:"Subscript",parse:e2(126,"Subscript","SubscriptMark")}]},Q9={defineNodes:[{name:"Emoji",style:ie.character}],parseInline:[{name:"Emoji",parse(n,e,t){let i;return e!=58||!(i=/^[a-zA-Z_0-9]+:/.exec(n.slice(t+1,n.end)))?-1:n.addElement(n.elt("Emoji",t,t+1+i[0].length))}}]};class cf{constructor(e,t,i,r,s,o,a,l,c,h=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=h,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new cf(e,[],t,i,i,0,[],0,r?new s_(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:r}=this.p,s=r.dynamicPrecedence(i);if(s&&(this.score+=s),t==0){this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let o=this.stack.length-(t-1)*3-(e&262144?6:0),a=this.stack[o-2],l=this.stack[o-1],c=this.bufferBase+this.buffer.length-l;if(i<r.minRepeatTerm||e&131072){let h=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,a,h,c+4,!0)}if(e&262144)this.state=this.stack[o];else{let h=this.stack[o-3];this.state=r.getGoto(h,i,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(i,a)}storeNode(e,t,i,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==i)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=r}}shift(e,t,i){let r=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,i,4)}else this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4)}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new cf(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new P9(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let r=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(t[s],o);if(this.stack.length<120)for(let s=0;r.length<4<<1&&s<t.length;s+=2){let o=t[s+1];r.some((a,l)=>l&1&&a==o)||r.push(t[s],o)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let s=t[r+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[r],this.pos),o.score-=200,i.push(o)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,r=e&65535,s=this.stack.length-i*3;if(s<0||t.getGoto(this.stack[s],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new s_(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class s_{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var o_;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(o_||(o_={}));class P9{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class hf{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new hf(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new hf(this.stack,this.pos,this.index)}}class bu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const a_=new bu;class D9{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=a_,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let o=this.ranges[--r];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];s+=o.from-i.to,i=o}return s}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=a_,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class vu{constructor(e,t){this.data=e,this.id=t}token(e,t){N9(this.data,e,t,this.id)}}vu.prototype.contextual=vu.prototype.fallback=vu.prototype.extend=!1;class hr{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function N9(n,e,t,i){let r=0,s=1<<i,{parser:o}=t.p,{dialect:a}=o;e:for(;(s&n[r])!=0;){let l=n[r+1];for(let c=r+3;c<l;c+=2)if((n[c+1]&s)>0){let h=n[c];if(a.allows(h)&&(e.token.value==-1||e.token.value==h||o.overrides(h,e.token.value))){e.acceptToken(h);break}}for(let c=e.next,h=0,u=n[r+2];h<u;){let f=h+u>>1,p=l+f+(f<<1),d=n[p],m=n[p+1];if(c<d)u=f;else if(c>=m)h=f+1;else{r=n[p+2],e.advance();continue e}}break}}function Gh(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let s=0;for(;;){let o=n.charCodeAt(i++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}t?t[r++]=s:t=new e(s)}return t}const Ci=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let xm=null;var l_;(function(n){n[n.Margin=25]="Margin"})(l_||(l_={}));function c_(n,e,t){let i=n.cursor(Ft.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class L9{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?c_(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?c_(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],o=this.start[t]+i.positions[r];if(o>e)return this.nextStart=o,null;if(s instanceof wt){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(tt.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class B9{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new bu)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,o=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<s.length;c++){if((1<<c&o)==0)continue;let h=s[c],u=this.tokens[c];if(!(i&&!h.fallback)&&((h.contextual||u.start!=e.pos||u.mask!=o||u.context!=a)&&(this.updateCachedToken(u,h,e),u.mask=o,u.context=a),u.lookAhead>u.end+25&&(l=Math.max(u.lookAhead,l)),u.value!=0)){let f=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!h.extend&&(i=u,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!i&&e.pos==this.stream.end&&(i=new bu,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new bu,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:r}=i.p;for(let s=0;s<r.specialized.length;s++)if(r.specialized[s]==e.value){let o=r.specializers[s](this.stream.read(e.start,e.end),i);if(o>=0&&i.p.parser.dialect.allows(o>>1)){(o&1)==0?e.value=o>>1:e.extended=o>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let c=o.stateSlot(s,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=gr(a,c+2);else{r==0&&a[c+1]==2&&(r=this.putAction(gr(a,c+2),t,i,r));break}a[c]==t&&(r=this.putAction(gr(a,c+1),t,i,r))}return r}}var h_;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo"})(h_||(h_={}));class M9{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new D9(t,r),this.tokens=new B9(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[cf.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new L9(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,s;for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],s=[]),r.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!i.length){let o=r&&F9(r);if(o)return this.stackToTree(o);if(this.parser.strict)throw Ci&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,i);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((a,l)=>l.score-a.score);i.length>o;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let a=i[o];for(let l=o+1;l<i.length;l++){let c=i[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)i.splice(l--,1);else{i.splice(o--,1);continue e}}}}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:s}=this,o=Ci?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,h=c?e.curContext.hash:0;for(let u=this.fragments.nodeAt(r);u;){let f=this.parser.nodeSet.types[u.type.id]==u.type?s.getGoto(e.state,u.type.id):-1;if(f>-1&&u.length&&(!c||(u.prop(tt.contextHash)||0)==h))return e.useNode(u,f),Ci&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(u.type.id)})`),!0;if(!(u instanceof wt)||u.children.length==0||u.positions[0]>0)break;let p=u.children[0];if(p instanceof wt&&u.positions[0]==0)u=p;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),Ci&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let h=l[c++],u=l[c++],f=l[c++],p=c==l.length||!i,d=p?e:e.split();if(d.apply(h,u,f),Ci&&console.log(o+this.stackID(d)+` (via ${(h&65536)==0?"shift":`reduce of ${s.getName(h&65535)}`} for ${s.getName(u)} @ ${r}${d==e?"":", split"})`),p)return!0;d.pos>r?t.push(d):i.push(d)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return u_(e,t),!0}}runRecovery(e,t,i){let r=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o<<1],c=t[(o<<1)+1],h=Ci?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),Ci&&console.log(h+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let u=a.split(),f=h;for(let p=0;u.forceReduce()&&p<10&&(Ci&&console.log(f+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));p++)Ci&&(f=this.stackID(u)+" -> ");for(let p of a.recoverByInsert(l))Ci&&console.log(h+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,i);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),Ci&&console.log(h+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),u_(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),wt.build({buffer:hf.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(xm||(xm=new WeakMap)).get(e);return t||xm.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function u_(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class $9{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const km=n=>n;class t2{constructor(e){this.start=e.start,this.shift=e.shift||km,this.reduce=e.reduce||km,this.reuse=e.reuse||km,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class ma extends iO{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function s(a,l,c){r[a].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=tt[l]);for(let c=1;c<a.length;){let h=a[c++];if(h>=0)s(h,l,a[c++]);else{let u=a[c+-h];for(let f=-h;f>0;f--)s(a[c++],l,u);c++}}}this.nodeSet=new Uc(t.map((a,l)=>sn.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:r[l],top:i.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=aT;let o=Gh(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let a=0;a<e.specialized.length;a++)this.specialized[a]=e.specialized[a].term,this.specializers[a]=e.specialized[a].get;this.states=Gh(e.states,Uint32Array),this.data=Gh(e.stateData),this.goto=Gh(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new vu(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new M9(this,e,t,i);for(let s of this.wrappers)r=s(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let s=r[t+1];;){let o=r[s++],a=o&1,l=r[s++];if(a&&i)return l;for(let c=s+(o>>1);s<c;s++)if(r[s]==e)return l;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=gr(i,s+2)];else{if(i[s+1]==2)return gr(i,s+2);break}if(o==t||o==0)return gr(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=gr(this.data,i+2);else return!1;if(t==gr(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=gr(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((s,o)=>o&1&&s==r)||t.push(this.data[i],r)}}return t}overrides(e,t){let i=f_(this.data,this.tokenPrecTable,t);return i<0||f_(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(ma.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(s=>s.from==i);return r?r.to:i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let r=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],a;(a=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new $9(e,i,r)}static deserialize(e){return new ma(e)}}function gr(n,e){return n[e]|n[e+1]<<16}function f_(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function F9(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}const W9=53,U9=1,z9=54,j9=2,H9=55,G9=3,uf=4,n2=5,i2=6,r2=7,s2=8,V9=9,X9=10,Y9=11,Sm=56,Z9=12,d_=57,q9=18,K9=27,J9=30,eU=33,tU=35,nU=0,iU={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},rU={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},p_={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function sU(n){return n==45||n==46||n==58||n>=65&&n<=90||n==95||n>=97&&n<=122||n>=161}function o2(n){return n==9||n==10||n==13||n==32}let m_=null,g_=null,y_=0;function Ry(n,e){let t=n.pos+e;if(y_==t&&g_==n)return m_;let i=n.peek(e);for(;o2(i);)i=n.peek(++e);let r="";for(;sU(i);)r+=String.fromCharCode(i),i=n.peek(++e);return g_=n,y_=t,m_=r?r.toLowerCase():i==oU||i==aU?void 0:null}const a2=60,l2=62,c2=47,oU=63,aU=33,lU=45;function O_(n,e){this.name=n,this.parent=e,this.hash=e?e.hash:0;for(let t=0;t<n.length;t++)this.hash+=(this.hash<<4)+n.charCodeAt(t)+(n.charCodeAt(t)<<8)}const cU=[uf,s2,n2,i2,r2],hU=new t2({start:null,shift(n,e,t,i){return cU.indexOf(e)>-1?new O_(Ry(i,1)||"",n):n},reduce(n,e){return e==q9&&n?n.parent:n},reuse(n,e,t,i){let r=e.type.id;return r==uf||r==tU?new O_(Ry(i,1)||"",n):n},hash(n){return n?n.hash:0},strict:!1}),uU=new hr((n,e)=>{if(n.next!=a2){n.next<0&&e.context&&n.acceptToken(Sm);return}n.advance();let t=n.next==c2;t&&n.advance();let i=Ry(n,0);if(i===void 0)return;if(!i)return n.acceptToken(t?Z9:uf);let r=e.context?e.context.name:null;if(t){if(i==r)return n.acceptToken(V9);if(r&&rU[r])return n.acceptToken(Sm,-2);if(e.dialectEnabled(nU))return n.acceptToken(X9);for(let s=e.context;s;s=s.parent)if(s.name==i)return;n.acceptToken(Y9)}else{if(i=="script")return n.acceptToken(n2);if(i=="style")return n.acceptToken(i2);if(i=="textarea")return n.acceptToken(r2);if(iU.hasOwnProperty(i))return n.acceptToken(s2);r&&p_[r]&&p_[r][i]?n.acceptToken(Sm,-1):n.acceptToken(uf)}},{contextual:!0}),fU=new hr(n=>{for(let e=0,t=0;;t++){if(n.next<0){t&&n.acceptToken(d_);break}if(n.next==lU)e++;else if(n.next==l2&&e>=2){t>3&&n.acceptToken(d_,-2);break}else e=0;n.advance()}});function CO(n,e,t){let i=2+n.length;return new hr(r=>{for(let s=0,o=0,a=0;;a++){if(r.next<0){a&&r.acceptToken(e);break}if(s==0&&r.next==a2||s==1&&r.next==c2||s>=2&&s<i&&r.next==n.charCodeAt(s-2))s++,o++;else if((s==2||s==i)&&o2(r.next))o++;else if(s==i&&r.next==l2){a>o?r.acceptToken(e,-o):r.acceptToken(t,-(o-2));break}else if((r.next==10||r.next==13)&&a){r.acceptToken(e,1);break}else s=o=0;r.advance()}})}const dU=CO("script",W9,U9),pU=CO("style",z9,j9),mU=CO("textarea",H9,G9),gU=Qa({"Text RawText":ie.content,"StartTag StartCloseTag SelfCloserEndTag EndTag SelfCloseEndTag":ie.angleBracket,TagName:ie.tagName,"MismatchedCloseTag/TagName":[ie.tagName,ie.invalid],AttributeName:ie.attributeName,"AttributeValue UnquotedAttributeValue":ie.attributeValue,Is:ie.definitionOperator,"EntityReference CharacterReference":ie.character,Comment:ie.blockComment,ProcessingInst:ie.processingInstruction,DoctypeDecl:ie.documentMeta}),yU=ma.deserialize({version:14,states:",xOVOxOOO!WQ!bO'#CoO!]Q!bO'#CyO!bQ!bO'#C|O!gQ!bO'#DPO!lQ!bO'#DRO!qOXO'#CnO!|OYO'#CnO#XO[O'#CnO$eOxO'#CnOOOW'#Cn'#CnO$lO!rO'#DSO$tQ!bO'#DUO$yQ!bO'#DVOOOW'#Dj'#DjOOOW'#DX'#DXQVOxOOO%OQ#tO,59ZO%WQ#tO,59eO%`Q#tO,59hO%hQ#tO,59kO%pQ#tO,59mOOOX'#D]'#D]O%xOXO'#CwO&TOXO,59YOOOY'#D^'#D^O&]OYO'#CzO&hOYO,59YOOO['#D_'#D_O&pO[O'#C}O&{O[O,59YOOOW'#D`'#D`O'TOxO,59YO'[Q!bO'#DQOOOW,59Y,59YOOO`'#Da'#DaO'aO!rO,59nOOOW,59n,59nO'iQ!bO,59pO'nQ!bO,59qOOOW-E7V-E7VO'sQ#tO'#CqOOQO'#DY'#DYO(OQ#tO1G.uOOOX1G.u1G.uO(WQ#tO1G/POOOY1G/P1G/PO(`Q#tO1G/SOOO[1G/S1G/SO(hQ#tO1G/VOOOW1G/V1G/VO(pQ#tO1G/XOOOW1G/X1G/XOOOX-E7Z-E7ZO(xQ!bO'#CxOOOW1G.t1G.tOOOY-E7[-E7[O(}Q!bO'#C{OOO[-E7]-E7]O)SQ!bO'#DOOOOW-E7^-E7^O)XQ!bO,59lOOO`-E7_-E7_OOOW1G/Y1G/YOOOW1G/[1G/[OOOW1G/]1G/]O)^Q&jO,59]OOQO-E7W-E7WOOOX7+$a7+$aOOOY7+$k7+$kOOO[7+$n7+$nOOOW7+$q7+$qOOOW7+$s7+$sO)iQ!bO,59dO)nQ!bO,59gO)sQ!bO,59jOOOW1G/W1G/WO)xO,UO'#CtO*WO7[O'#CtOOQO1G.w1G.wOOOW1G/O1G/OOOOW1G/R1G/ROOOW1G/U1G/UOOOO'#DZ'#DZO*fO,UO,59`OOQO,59`,59`OOOO'#D['#D[O*tO7[O,59`OOOO-E7X-E7XOOQO1G.z1G.zOOOO-E7Y-E7Y",stateData:"+[~O!]OS~OSSOTPOUQOVROWTOY]OZ[O[^O^^O_^O`^Oa^Ow^Oz_O!cZO~OdaO~OdbO~OdcO~OddO~OdeO~O!VfOPkP!YkP~O!WiOQnP!YnP~O!XlORqP!YqP~OSSOTPOUQOVROWTOXqOY]OZ[O[^O^^O_^O`^Oa^Ow^O!cZO~O!YrO~P#dO!ZsO!duO~OdvO~OdwO~OfyOj|O~OfyOj!OO~OfyOj!QO~OfyOj!SO~OfyOj!UO~O!VfOPkX!YkX~OP!WO!Y!XO~O!WiOQnX!YnX~OQ!ZO!Y!XO~O!XlORqX!YqX~OR!]O!Y!XO~O!Y!XO~P#dOd!_O~O!ZsO!d!aO~Oj!bO~Oj!cO~Og!dOfeXjeX~OfyOj!fO~OfyOj!gO~OfyOj!hO~OfyOj!iO~OfyOj!jO~Od!kO~Od!lO~Od!mO~Oj!nO~Oi!qO!_!oO!a!pO~Oj!rO~Oj!sO~Oj!tO~O_!uO`!uO!_!wO!`!uO~O_!xO`!xO!a!wO!b!xO~O_!uO`!uO!_!{O!`!uO~O_!xO`!xO!a!{O!b!xO~O`_a!cwz!c~",goto:"%o!_PPPPPPPPPPPPPPPPPP!`!fP!lPP!xPP!{#O#R#X#[#_#e#h#k#q#w!`P!`!`P#}$T$k$q$w$}%T%Z%aPPPPPPPP%gX^OX`pXUOX`pezabcde{}!P!R!TR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!TeZ!e{}!P!R!TQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"\u26A0 StartCloseTag StartCloseTag StartCloseTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue EndTag ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:66,context:hU,nodeProps:[["closedBy",-11,1,2,3,4,5,6,7,8,9,10,11,"EndTag",-4,19,29,32,35,"CloseTag"],["group",-9,12,15,16,17,18,38,39,40,41,"Entity",14,"Entity TextContent",-3,27,30,33,"TextContent Entity"],["openedBy",26,"StartTag StartCloseTag",-4,28,31,34,36,"OpenTag"]],propSources:[gU],skippedNodes:[0],repeatNodeCount:9,tokenData:"!#b!aR!WOX$kXY)sYZ)sZ]$k]^)s^p$kpq)sqr$krs*zsv$kvw+dwx2yx}$k}!O3f!O!P$k!P!Q7_!Q![$k![!]8u!]!^$k!^!_>b!_!`!!p!`!a8T!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U$k4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!Z$vc^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!R&[V^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&Rq&xT^P!bpOv&qwx'Xx!^&q!^!_'g!_~&qP'^R^POv'Xw!^'X!_~'Xp'lQ!bpOv'gx~'ga'yU^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r`(bR!``Or(]sv(]w~(]!Q(rT!``!bpOr(krs'gsv(kwx(]x~(kW)WXiWOX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!a*O^^P!``!bp!]^OX&RXY)sYZ)sZ]&R]^)s^p&Rpq)sqr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!Z+TT!_h^P!bpOv&qwx'Xx!^&q!^!_'g!_~&q!Z+kbiWaPOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst/]tw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^)R!^!a.Q!a$f,s$f$g.Q$g~,s!Z,xbiWOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst)Rtw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^.i!^!a.Q!a$f,s$f$g.Q$g~,s!R.TTOp.Qqs.Qt!].Q!]!^.d!^~.Q!R.iO_!R!Z.pXiW_!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z/baiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^)R!^!a1q!a$f0g$f$g1q$g~0g!Z0laiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^2V!^!a1q!a$f0g$f$g1q$g~0g!R1tSOp1qq!]1q!]!^2Q!^~1q!R2VO`!R!Z2^XiW`!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z3SU!ax^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r!]3qe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O5S!O!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!]5_d^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!`&R!`!a6m!a$f$k$f$g&R$g~$k!T6xV^P!``!bp!dQOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!X7hX^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_!`&R!`!a8T!a~&R!X8`VjU^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!a9U!YfSdQ^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O8u!O!P8u!P!Q&R!Q![8u![!]8u!]!^$k!^!_(k!_!a&R!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g$}$k$}%O8u%O%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U8u4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Je$k$Je$Jg8u$Jg$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!a=Pe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g;=`$k;=`<%l8u<%l~$k!R>iW!``!bpOq(kqr?Rrs'gsv(kwx(]x!a(k!a!bKj!b~(k!R?YZ!``!bpOr(krs'gsv(kwx(]x}(k}!O?{!O!f(k!f!gAR!g#W(k#W#XGz#X~(k!R@SV!``!bpOr(krs'gsv(kwx(]x}(k}!O@i!O~(k!R@rT!``!bp!cPOr(krs'gsv(kwx(]x~(k!RAYV!``!bpOr(krs'gsv(kwx(]x!q(k!q!rAo!r~(k!RAvV!``!bpOr(krs'gsv(kwx(]x!e(k!e!fB]!f~(k!RBdV!``!bpOr(krs'gsv(kwx(]x!v(k!v!wBy!w~(k!RCQV!``!bpOr(krs'gsv(kwx(]x!{(k!{!|Cg!|~(k!RCnV!``!bpOr(krs'gsv(kwx(]x!r(k!r!sDT!s~(k!RD[V!``!bpOr(krs'gsv(kwx(]x!g(k!g!hDq!h~(k!RDxW!``!bpOrDqrsEbsvDqvwEvwxFfx!`Dq!`!aGb!a~DqqEgT!bpOvEbvxEvx!`Eb!`!aFX!a~EbPEyRO!`Ev!`!aFS!a~EvPFXOzPqF`Q!bpzPOv'gx~'gaFkV!``OrFfrsEvsvFfvwEvw!`Ff!`!aGQ!a~FfaGXR!``zPOr(]sv(]w~(]!RGkT!``!bpzPOr(krs'gsv(kwx(]x~(k!RHRV!``!bpOr(krs'gsv(kwx(]x#c(k#c#dHh#d~(k!RHoV!``!bpOr(krs'gsv(kwx(]x#V(k#V#WIU#W~(k!RI]V!``!bpOr(krs'gsv(kwx(]x#h(k#h#iIr#i~(k!RIyV!``!bpOr(krs'gsv(kwx(]x#m(k#m#nJ`#n~(k!RJgV!``!bpOr(krs'gsv(kwx(]x#d(k#d#eJ|#e~(k!RKTV!``!bpOr(krs'gsv(kwx(]x#X(k#X#YDq#Y~(k!RKqW!``!bpOrKjrsLZsvKjvwLowxNPx!aKj!a!b! g!b~KjqL`T!bpOvLZvxLox!aLZ!a!bM^!b~LZPLrRO!aLo!a!bL{!b~LoPMORO!`Lo!`!aMX!a~LoPM^OwPqMcT!bpOvLZvxLox!`LZ!`!aMr!a~LZqMyQ!bpwPOv'gx~'gaNUV!``OrNPrsLosvNPvwLow!aNP!a!bNk!b~NPaNpV!``OrNPrsLosvNPvwLow!`NP!`!a! V!a~NPa! ^R!``wPOr(]sv(]w~(]!R! nW!``!bpOrKjrsLZsvKjvwLowxNPx!`Kj!`!a!!W!a~Kj!R!!aT!``!bpwPOr(krs'gsv(kwx(]x~(k!V!!{VgS^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R",tokenizers:[dU,pU,mU,uU,fU,0,1,2,3,4,5],topRules:{Document:[0,13]},dialects:{noMatch:0},tokenPrec:464});function OU(n,e){let t=Object.create(null);for(let i of n.firstChild.getChildren("Attribute")){let r=i.getChild("AttributeName"),s=i.getChild("AttributeValue")||i.getChild("UnquotedAttributeValue");r&&(t[e.read(r.from,r.to)]=s?s.name=="AttributeValue"?e.read(s.from+1,s.to-1):e.read(s.from,s.to):"")}return t}function Em(n,e,t){let i;for(let r of t)if(!r.attrs||r.attrs(i||(i=OU(n.node.parent,e))))return{parser:r.parser};return null}function bU(n){let e=[],t=[],i=[];for(let r of n){let s=r.tag=="script"?e:r.tag=="style"?t:r.tag=="textarea"?i:null;if(!s)throw new RangeError("Only script, style, and textarea tags can host nested parsers");s.push(r)}return hT((r,s)=>{let o=r.type.id;return o==K9?Em(r,s,e):o==J9?Em(r,s,t):o==eU?Em(r,s,i):null})}const vU=93,b_=1,wU=94,AU=95,v_=2,h2=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],_U=58,xU=40,u2=95,kU=91,wu=45,SU=46,EU=35,TU=37;function ff(n){return n>=65&&n<=90||n>=97&&n<=122||n>=161}function CU(n){return n>=48&&n<=57}const IU=new hr((n,e)=>{for(let t=!1,i=0,r=0;;r++){let{next:s}=n;if(ff(s)||s==wu||s==u2||t&&CU(s))!t&&(s!=wu||r>0)&&(t=!0),i===r&&s==wu&&i++,n.advance();else{t&&n.acceptToken(s==xU?wU:i==2&&e.canShift(v_)?v_:AU);break}}}),RU=new hr(n=>{if(h2.includes(n.peek(-1))){let{next:e}=n;(ff(e)||e==u2||e==EU||e==SU||e==kU||e==_U||e==wu)&&n.acceptToken(vU)}}),QU=new hr(n=>{if(!h2.includes(n.peek(-1))){let{next:e}=n;if(e==TU&&(n.advance(),n.acceptToken(b_)),ff(e)){do n.advance();while(ff(n.next));n.acceptToken(b_)}}}),PU=Qa({"import charset namespace keyframes":ie.definitionKeyword,"media supports":ie.controlKeyword,"from to selector":ie.keyword,NamespaceName:ie.namespace,KeyframeName:ie.labelName,TagName:ie.tagName,ClassName:ie.className,PseudoClassName:ie.constant(ie.className),IdName:ie.labelName,"FeatureName PropertyName":ie.propertyName,AttributeName:ie.attributeName,NumberLiteral:ie.number,KeywordQuery:ie.keyword,UnaryQueryOp:ie.operatorKeyword,"CallTag ValueName":ie.atom,VariableName:ie.variableName,Callee:ie.operatorKeyword,Unit:ie.unit,"UniversalSelector NestingSelector":ie.definitionOperator,AtKeyword:ie.keyword,MatchOp:ie.compareOperator,"ChildOp SiblingOp, LogicOp":ie.logicOperator,BinOp:ie.arithmeticOperator,Important:ie.modifier,Comment:ie.blockComment,ParenthesizedContent:ie.special(ie.name),ColorLiteral:ie.color,StringLiteral:ie.string,":":ie.punctuation,"PseudoOp #":ie.derefOperator,"; ,":ie.separator,"( )":ie.paren,"[ ]":ie.squareBracket,"{ }":ie.brace}),DU={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,dir:32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},NU={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},LU={__proto__:null,not:128,only:128,from:158,to:160},BU=ma.deserialize({version:14,states:"7WOYQ[OOOOQP'#Cd'#CdOOQP'#Cc'#CcO!ZQ[O'#CfO!}QXO'#CaO#UQ[O'#ChO#aQ[O'#DPO#fQ[O'#DTOOQP'#Ec'#EcO#kQdO'#DeO$VQ[O'#DrO#kQdO'#DtO$hQ[O'#DvO$sQ[O'#DyO$xQ[O'#EPO%WQ[O'#EROOQS'#Eb'#EbOOQS'#ES'#ESQYQ[OOOOQP'#Cg'#CgOOQP,59Q,59QO!ZQ[O,59QO%_Q[O'#EVO%yQWO,58{O&RQ[O,59SO#aQ[O,59kO#fQ[O,59oO%_Q[O,59sO%_Q[O,59uO%_Q[O,59vO'bQ[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO'iQWO,59SO'nQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO'sQ`O,59oOOQS'#Cp'#CpO#kQdO'#CqO'{QvO'#CsO)VQtO,5:POOQO'#Cx'#CxO'iQWO'#CwO)kQWO'#CyOOQS'#Ef'#EfOOQO'#Dh'#DhO)pQ[O'#DoO*OQWO'#EiO$xQ[O'#DmO*^QWO'#DpOOQO'#Ej'#EjO%|QWO,5:^O*cQpO,5:`OOQS'#Dx'#DxO*kQWO,5:bO*pQ[O,5:bOOQO'#D{'#D{O*xQWO,5:eO*}QWO,5:kO+VQWO,5:mOOQS-E8Q-E8QOOQP1G.l1G.lO+yQXO,5:qOOQO-E8T-E8TOOQS1G.g1G.gOOQP1G.n1G.nO'iQWO1G.nO'nQWO1G.nOOQP1G/V1G/VO,WQ`O1G/ZO,qQXO1G/_O-XQXO1G/aO-oQXO1G/bO.VQXO'#CdO.zQWO'#DaOOQS,59z,59zO/PQWO,59zO/XQ[O,59zO/`QdO'#CoO/gQ[O'#DOOOQP1G/Z1G/ZO#kQdO1G/ZO/nQpO,59]OOQS,59_,59_O#kQdO,59aO/vQWO1G/kOOQS,59c,59cO/{Q!bO,59eO0TQWO'#DhO0`QWO,5:TO0eQWO,5:ZO$xQ[O,5:VO$xQ[O'#EYO0mQWO,5;TO0xQWO,5:XO%_Q[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O1ZQWO1G/|O1`QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XOOQP7+$Y7+$YOOQP7+$u7+$uO#kQdO7+$uO#kQdO,59{O1nQ[O'#EXO1xQWO1G/fOOQS1G/f1G/fO1xQWO1G/fO2QQtO'#ETO2uQdO'#EeO3PQWO,59ZO3UQXO'#EhO3]QWO,59jO3bQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO3jQWO1G/PO#kQdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO3oQWO,5:tOOQO-E8W-E8WO3}QXO1G/vOOQS7+%h7+%hO4UQYO'#CsO%|QWO'#EZO4^QdO,5:hOOQS,5:h,5:hO4lQpO<<HaO4tQtO1G/gOOQO,5:s,5:sO5XQ[O,5:sOOQO-E8V-E8VOOQS7+%Q7+%QO5cQWO7+%QOOQS-E8R-E8RO#kQdO'#EUO5kQWO,5;POOQT1G.u1G.uO5sQWO,5;SOOQP1G/U1G/UOOQP<<Ha<<HaOOQS7+$k7+$kO5{QdO7+%ZOOQO7+%b7+%bOOQS,5:u,5:uOOQS-E8X-E8XOOQS1G0S1G0SOOQPAN={AN={O6SQtO'#EWO#kQdO'#EWO6}QdO7+%ROOQO7+%R7+%ROOQO1G0_1G0_OOQS<<Hl<<HlO7_QdO,5:pOOQO-E8S-E8SOOQO<<Hu<<HuO7iQtO,5:rOOQS-E8U-E8UOOQO<<Hm<<Hm",stateData:"8j~O#TOSROS~OUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#RPO#WRO~O#RcO~O]hO^hOpfOtiOxjO|kO!PmO#PlO#WeO~O!RnO~P!`O`sO#QqO#RpO~O#RuO~O#RwO~OQ!QObzOf!QOh!QOn!PO#Q}O#RyO#Z{O~Ob!SO!b!UO!e!VO#R!RO!R#]P~Oh![On!PO#R!ZO~O#R!^O~Ob!SO!b!UO!e!VO#R!RO~O!W#]P~P$VOUWOXWO]TO^TOtUOxVO#RPO#WRO~OpfO!RnO~O`!hO#QqO#RpO~OQ!pOUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#R!oO#WRO~O!Q!qO~P&^Ob!tO~Ob!uO~Ov!vOz!wO~OP!yObgXjgX!WgX!bgX!egX#RgXagXQgXfgXhgXngXpgX#QgX#ZgXvgX!QgX!VgX~Ob!SOj!zO!b!UO!e!VO#R!RO!W#]P~Ob!}O~Ob!SO!b!UO!e!VO#R#OO~Op#SO!`#RO!R#]X!W#]X~Ob#VO~Oj!zO!W#XO~O!W#YO~Oh#ZOn!PO~O!R#[O~O!RnO!`#RO~O!RnO!W#_O~O]hO^hOtiOxjO|kO!PmO#PlO#WeO~Op!ya!R!yaa!ya~P+_Ov#aOz#bO~O]hO^hOtiOxjO#WeO~Op{i|{i!P{i!R{i#P{ia{i~P,`Op}i|}i!P}i!R}i#P}ia}i~P,`Op!Oi|!Oi!P!Oi!R!Oi#P!Oia!Oi~P,`O]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#PWX#WWX~O]#cO~O!Q#fO!W#dO~O!Q#fO~P&^Oa#XP~P#kOa#[P~P%_Oa#nOj!zO~O!W#pO~Oh#qOo#qO~O]!^Xa![X!`![X~O]#rO~Oa#sO!`#RO~Op#SO!R#]a!W#]a~O!`#ROp!aa!R!aa!W!aaa!aa~O!W#xO~O!Q#|O!q#zO!r#zO#Z#yO~O!Q!{X!W!{X~P&^O!Q$SO!W#dO~Oj!zOQ!wXa!wXb!wXf!wXh!wXn!wXp!wX#Q!wX#R!wX#Z!wX~Op$VOa#XX~P#kOa$XO~Oa#[X~P!`Oa$ZO~Oj!zOv$[O~Oa$]O~O!`#ROp!|a!R!|a!W!|a~Oa$_O~P+_OP!yO!RgX~O!Q$bO!q#zO!r#zO#Z#yO~Oj!zOv$cO~Oj!zOp$eO!V$gO!Q!Ti!W!Ti~P#kO!Q!{a!W!{a~P&^O!Q$iO!W#dO~Op$VOa#Xa~OpfOa#[a~Oa$lO~P#kOj!zOQ!zXb!zXf!zXh!zXn!zXp!zX!Q!zX!V!zX!W!zX#Q!zX#R!zX#Z!zX~Op$eO!V$oO!Q!Tq!W!Tq~P#kOa!xap!xa~P#kOj!zOQ!zab!zaf!zah!zan!zap!za!Q!za!V!za!W!za#Q!za#R!za#Z!za~Oo#Zj!Pj~",goto:",O#_PPPPP#`P#h#vP#h$U#hPP$[PPP$b$k$kP$}P$kP$k%e%wPPP&a&g#hP&mP#hP&sP#hP#h#hPPP&y']'iPP#`PP'o'o'y'oP'oP'o'oP#`P#`P#`P'|#`P(P(SPP#`P#`(V(e(s(y)T)Z)e)kPPPPPP)q)yP*e*hP+^+a+j]`Obn!s#d$QiWObfklmn!s!u#V#d$QiQObfklmn!s!u#V#d$QQdRR!ceQrTR!ghQ!gsQ!|!OR#`!hq!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jT#z#[#{q!OXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jQ![[R#Z!]QtTR!ihQ!gtR#`!iQvUR!jiQxVR!kjQoSQ!fgQ#W!XQ#^!`Q#_!aR$`#zQ!rnQ#g!sQ$P#dR$h$QX!pn!s#d$Qa!WY^_|!S!U#R#SR#P!SR!][R!_]R#]!_QbOU!bb!s$QQ!snR$Q#dQ#i!tU$U#i$^$jQ$^#rR$j$VQ$W#iR$k$WQgSS!eg$YR$Y#kQ$f$OR$n$fQ#e!rS$R#e$TR$T#gQ#T!TR#v#TQ#{#[R$a#{]aObn!s#d$Q[SObn!s#d$QQ!dfQ!lkQ!mlQ!nmQ#k!uR#w#VR#j!tQ|XQ!YZQ!xz[#h!t#i#r$V$^$jQ#m!wQ#o!zQ#}#bQ$O#cS$d$O$fR$m$eR#l!uQ!XYQ!a_R!{|U!TY_|Q!`^Q#Q!SQ#U!UQ#t#RR#u#S",nodeNames:"\u26A0 Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList from to SupportsStatement supports AtRule",maxTerm:106,nodeProps:[["openedBy",17,"(",48,"{"],["closedBy",18,")",49,"}"]],propSources:[PU],skippedNodes:[0,3],repeatNodeCount:8,tokenData:"Ay~R![OX$wX^%]^p$wpq%]qr(crs+}st,otu2Uuv$wvw2rwx2}xy3jyz3uz{3z{|4_|}8U}!O8a!O!P8x!P!Q9Z!Q![;e![!]<Y!]!^<x!^!_$w!_!`=T!`!a=`!a!b$w!b!c>O!c!}$w!}#O?[#O#P$w#P#Q?g#Q#R2U#R#T$w#T#U?r#U#c$w#c#d@q#d#o$w#o#pAQ#p#q2U#q#rA]#r#sAh#s#y$w#y#z%]#z$f$w$f$g%]$g#BY$w#BY#BZ%]#BZ$IS$w$IS$I_%]$I_$I|$w$I|$JO%]$JO$JT$w$JT$JU%]$JU$KV$w$KV$KW%]$KW&FU$w&FU&FV%]&FV~$wW$zQOy%Qz~%QW%VQoWOy%Qz~%Q~%bf#T~OX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q~&}f#T~oWOX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q^(fSOy%Qz#]%Q#]#^(r#^~%Q^(wSoWOy%Qz#a%Q#a#b)T#b~%Q^)YSoWOy%Qz#d%Q#d#e)f#e~%Q^)kSoWOy%Qz#c%Q#c#d)w#d~%Q^)|SoWOy%Qz#f%Q#f#g*Y#g~%Q^*_SoWOy%Qz#h%Q#h#i*k#i~%Q^*pSoWOy%Qz#T%Q#T#U*|#U~%Q^+RSoWOy%Qz#b%Q#b#c+_#c~%Q^+dSoWOy%Qz#h%Q#h#i+p#i~%Q^+wQ!VUoWOy%Qz~%Q~,QUOY+}Zr+}rs,ds#O+}#O#P,i#P~+}~,iOh~~,lPO~+}_,tWtPOy%Qz!Q%Q!Q![-^![!c%Q!c!i-^!i#T%Q#T#Z-^#Z~%Q^-cWoWOy%Qz!Q%Q!Q![-{![!c%Q!c!i-{!i#T%Q#T#Z-{#Z~%Q^.QWoWOy%Qz!Q%Q!Q![.j![!c%Q!c!i.j!i#T%Q#T#Z.j#Z~%Q^.qWfUoWOy%Qz!Q%Q!Q![/Z![!c%Q!c!i/Z!i#T%Q#T#Z/Z#Z~%Q^/bWfUoWOy%Qz!Q%Q!Q![/z![!c%Q!c!i/z!i#T%Q#T#Z/z#Z~%Q^0PWoWOy%Qz!Q%Q!Q![0i![!c%Q!c!i0i!i#T%Q#T#Z0i#Z~%Q^0pWfUoWOy%Qz!Q%Q!Q![1Y![!c%Q!c!i1Y!i#T%Q#T#Z1Y#Z~%Q^1_WoWOy%Qz!Q%Q!Q![1w![!c%Q!c!i1w!i#T%Q#T#Z1w#Z~%Q^2OQfUoWOy%Qz~%QY2XSOy%Qz!_%Q!_!`2e!`~%QY2lQzQoWOy%Qz~%QX2wQXPOy%Qz~%Q~3QUOY2}Zw2}wx,dx#O2}#O#P3d#P~2}~3gPO~2}_3oQbVOy%Qz~%Q~3zOa~_4RSUPjSOy%Qz!_%Q!_!`2e!`~%Q_4fUjS!PPOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q^4}SoWOy%Qz!Q%Q!Q![5Z![~%Q^5bWoW#ZUOy%Qz!Q%Q!Q![5Z![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q^6PWoWOy%Qz{%Q{|6i|}%Q}!O6i!O!Q%Q!Q![6z![~%Q^6nSoWOy%Qz!Q%Q!Q![6z![~%Q^7RSoW#ZUOy%Qz!Q%Q!Q![6z![~%Q^7fYoW#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q_8ZQpVOy%Qz~%Q^8fUjSOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q_8}S#WPOy%Qz!Q%Q!Q![5Z![~%Q~9`RjSOy%Qz{9i{~%Q~9nSoWOy9iyz9zz{:o{~9i~9}ROz9zz{:W{~9z~:ZTOz9zz{:W{!P9z!P!Q:j!Q~9z~:oOR~~:tUoWOy9iyz9zz{:o{!P9i!P!Q;W!Q~9i~;_QoWR~Oy%Qz~%Q^;jY#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%QX<_S]POy%Qz![%Q![!]<k!]~%QX<rQ^PoWOy%Qz~%Q_<}Q!WVOy%Qz~%QY=YQzQOy%Qz~%QX=eS|POy%Qz!`%Q!`!a=q!a~%QX=xQ|PoWOy%Qz~%QX>RUOy%Qz!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX>lY!YPoWOy%Qz}%Q}!O>e!O!Q%Q!Q![>e![!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX?aQxPOy%Qz~%Q^?lQvUOy%Qz~%QX?uSOy%Qz#b%Q#b#c@R#c~%QX@WSoWOy%Qz#W%Q#W#X@d#X~%QX@kQ!`PoWOy%Qz~%QX@tSOy%Qz#f%Q#f#g@d#g~%QXAVQ!RPOy%Qz~%Q_AbQ!QVOy%Qz~%QZAmS!PPOy%Qz!_%Q!_!`2e!`~%Q",tokenizers:[RU,QU,IU,0,1,2,3],topRules:{StyleSheet:[0,4]},specialized:[{term:94,get:n=>DU[n]||-1},{term:56,get:n=>NU[n]||-1},{term:95,get:n=>LU[n]||-1}],tokenPrec:1078});let Tm=null;function Cm(){if(!Tm&&typeof document=="object"&&document.body){let n=[];for(let e in document.body.style)/[A-Z]|^-|^(item|length)$/.test(e)||n.push(e);Tm=n.sort().map(e=>({type:"property",label:e}))}return Tm||[]}const w_=["active","after","before","checked","default","disabled","empty","enabled","first-child","first-letter","first-line","first-of-type","focus","hover","in-range","indeterminate","invalid","lang","last-child","last-of-type","link","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-of-type","only-child","optional","out-of-range","placeholder","read-only","read-write","required","root","selection","target","valid","visited"].map(n=>({type:"class",label:n})),A_=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(n=>({type:"keyword",label:n})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(n=>({type:"constant",label:n}))),MU=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(n=>({type:"type",label:n})),Hr=/^[\w-]*/,$U=n=>{let{state:e,pos:t}=n,i=Nt(e).resolveInner(t,-1);if(i.name=="PropertyName")return{from:i.from,options:Cm(),validFor:Hr};if(i.name=="ValueName")return{from:i.from,options:A_,validFor:Hr};if(i.name=="PseudoClassName")return{from:i.from,options:w_,validFor:Hr};if(i.name=="TagName"){for(let{parent:o}=i;o;o=o.parent)if(o.name=="Block")return{from:i.from,options:Cm(),validFor:Hr};return{from:i.from,options:MU,validFor:Hr}}if(!n.explicit)return null;let r=i.resolve(t),s=r.childBefore(t);return s&&s.name==":"&&r.name=="PseudoClassSelector"?{from:t,options:w_,validFor:Hr}:s&&s.name==":"&&r.name=="Declaration"||r.name=="ArgList"?{from:t,options:A_,validFor:Hr}:r.name=="Block"?{from:t,options:Cm(),validFor:Hr}:null},Qy=ha.define({parser:BU.configure({props:[zc.add({Declaration:Ou()}),jc.add({Block:OT})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function FU(){return new hc(Qy,Qy.data.of({autocomplete:$U}))}const __=281,x_=1,WU=2,Vh=282,UU=3,zU=283,k_=284,jU=4,HU=286,GU=287,VU=5,XU=6,YU=1,ZU=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],f2=125,qU=123,KU=59,S_=47,JU=42,e6=43,t6=45,n6=36,i6=96,r6=92,s6=new t2({start:!1,shift(n,e){return e==VU||e==XU||e==HU?n:e==GU},strict:!1}),o6=new hr((n,e)=>{let{next:t}=n;(t==f2||t==-1||e.context)&&e.canShift(k_)&&n.acceptToken(k_)},{contextual:!0,fallback:!0}),a6=new hr((n,e)=>{let{next:t}=n,i;ZU.indexOf(t)>-1||t==S_&&((i=n.peek(1))==S_||i==JU)||t!=f2&&t!=KU&&t!=-1&&!e.context&&e.canShift(__)&&n.acceptToken(__)},{contextual:!0}),l6=new hr((n,e)=>{let{next:t}=n;if((t==e6||t==t6)&&(n.advance(),t==n.next)){n.advance();let i=!e.context&&e.canShift(x_);n.acceptToken(i?x_:WU)}},{contextual:!0}),c6=new hr(n=>{for(let e=!1,t=0;;t++){let{next:i}=n;if(i<0){t&&n.acceptToken(Vh);break}else if(i==i6){t?n.acceptToken(Vh):n.acceptToken(zU,1);break}else if(i==qU&&e){t==1?n.acceptToken(UU,1):n.acceptToken(Vh,-1);break}else if(i==10&&t){n.advance(),n.acceptToken(Vh);break}else i==r6&&n.advance();e=i==n6,n.advance()}});function h6(n,e){return n=="extends"&&e.dialectEnabled(YU)?jU:-1}const u6=Qa({"get set async static":ie.modifier,"for while do if else switch try catch finally return throw break continue default case":ie.controlKeyword,"in of await yield void typeof delete instanceof":ie.operatorKeyword,"let var const function class extends":ie.definitionKeyword,"import export from":ie.moduleKeyword,"with debugger as new":ie.keyword,TemplateString:ie.special(ie.string),Super:ie.atom,BooleanLiteral:ie.bool,this:ie.self,null:ie.null,Star:ie.modifier,VariableName:ie.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":ie.function(ie.variableName),VariableDefinition:ie.definition(ie.variableName),Label:ie.labelName,PropertyName:ie.propertyName,PrivatePropertyName:ie.special(ie.propertyName),"CallExpression/MemberExpression/PropertyName":ie.function(ie.propertyName),"FunctionDeclaration/VariableDefinition":ie.function(ie.definition(ie.variableName)),"ClassDeclaration/VariableDefinition":ie.definition(ie.className),PropertyDefinition:ie.definition(ie.propertyName),PrivatePropertyDefinition:ie.definition(ie.special(ie.propertyName)),UpdateOp:ie.updateOperator,LineComment:ie.lineComment,BlockComment:ie.blockComment,Number:ie.number,String:ie.string,ArithOp:ie.arithmeticOperator,LogicOp:ie.logicOperator,BitOp:ie.bitwiseOperator,CompareOp:ie.compareOperator,RegExp:ie.regexp,Equals:ie.definitionOperator,"Arrow : Spread":ie.punctuation,"( )":ie.paren,"[ ]":ie.squareBracket,"{ }":ie.brace,"InterpolationStart InterpolationEnd":ie.special(ie.brace),".":ie.derefOperator,", ;":ie.separator,TypeName:ie.typeName,TypeDefinition:ie.definition(ie.typeName),"type enum interface implements namespace module declare":ie.definitionKeyword,"abstract global Privacy readonly override":ie.modifier,"is keyof unique infer":ie.operatorKeyword,JSXAttributeValue:ie.attributeValue,JSXText:ie.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":ie.angleBracket,"JSXIdentifier JSXNameSpacedName":ie.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":ie.attributeName}),f6={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},d6={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},p6={__proto__:null,"<":129},m6=ma.deserialize({version:14,states:"$4|O`QYOOO'QQ$IfO'#ChO'XOSO'#DVO)dQYO'#D]O)tQYO'#DhO){QYO'#DrO-xQYO'#DxOOQO'#E]'#E]O.]QWO'#E[O.bQWO'#E[OOQ$IU'#Ef'#EfO0aQ$IfO'#ItO2wQ$IfO'#IuO3eQWO'#EzO3jQpO'#FaOOQ$IU'#FS'#FSO3rO!bO'#FSO4QQWO'#FhO5_QWO'#FgOOQ$IU'#Iu'#IuOOQ$IS'#It'#ItOOQQ'#J^'#J^O5dQWO'#HpO5iQ$I[O'#HqOOQQ'#Ih'#IhOOQQ'#Hr'#HrQ`QYOOO){QYO'#DjO5qQWO'#G[O5vQ#tO'#CmO6UQWO'#EZO6aQWO'#EgO6fQ#tO'#FRO7QQWO'#G[O7VQWO'#G`O7bQWO'#G`O7pQWO'#GcO7pQWO'#GdO7pQWO'#GfO5qQWO'#GiO8aQWO'#GlO9oQWO'#CdO:PQWO'#GyO:XQWO'#HPO:XQWO'#HRO`QYO'#HTO:XQWO'#HVO:XQWO'#HYO:^QWO'#H`O:cQ$I]O'#HfO){QYO'#HhO:nQ$I]O'#HjO:yQ$I]O'#HlO5iQ$I[O'#HnO){QYO'#DWOOOS'#Ht'#HtO;UOSO,59qOOQ$IU,59q,59qO=gQbO'#ChO=qQYO'#HuO>UQWO'#IvO@TQbO'#IvO'dQYO'#IvO@[QWO,59wO@rQ&jO'#DbOAkQWO'#E]OAxQWO'#JROBTQWO'#JQOBTQWO'#JQOB]QWO,5:yOBbQWO'#JPOBiQWO'#DyO5vQ#tO'#EZOBwQWO'#EZOCSQ`O'#FROOQ$IU,5:S,5:SOC[QYO,5:SOEYQ$IfO,5:^OEvQWO,5:dOFaQ$I[O'#JOO7VQWO'#I}OFhQWO'#I}OFpQWO,5:xOFuQWO'#I}OGTQYO,5:vOITQWO'#EWOJ_QWO,5:vOKnQWO'#DlOKuQYO'#DqOLPQ&jO,5;PO){QYO,5;POOQQ'#Er'#ErOOQQ'#Et'#EtO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;ROOQQ'#Ex'#ExOLXQYO,5;cOOQ$IU,5;h,5;hOOQ$IU,5;i,5;iONXQWO,5;iOOQ$IU,5;j,5;jO){QYO'#IPON^Q$I[O,5<TONxQWO,5;RO){QYO,5;fO! bQpO'#JVO! PQpO'#JVO! iQpO'#JVO! zQpO,5;qOOOO,5;{,5;{O!!YQYO'#FcOOOO'#IO'#IOO3rO!bO,5;nO!!aQpO'#FeOOQ$IU,5;n,5;nO!!}Q,UO'#CrOOQ$IU'#Cu'#CuO!#bQWO'#CuO!#gOSO'#CyO!$TQ#tO,5<QO!$[QWO,5<SO!%hQWO'#FrO!%uQWO'#FsO!%zQWO'#FwO!&yQ&jO'#F{O!'lQ,UO'#IqOOQ$IU'#Iq'#IqO!'vQWO'#IpO!(UQWO'#IoOOQ$IU'#Cs'#CsOOQ$IU'#C|'#C|O!(^QWO'#DOOJdQWO'#FjOJdQWO'#FlO!(cQWO'#FnO!(hQWO'#FoO!(mQWO'#FuOJdQWO'#FzO!(rQWO'#E^O!)ZQWO,5<RO`QYO,5>[OOQQ'#Ik'#IkOOQQ,5>],5>]OOQQ-E;p-E;pO!+VQ$IfO,5:UOOQ$IS'#Cp'#CpO!+vQ#tO,5<vOOQO'#Cf'#CfO!,XQWO'#CqO!,aQ$I[O'#IlO5_QWO'#IlO:^QWO,59XO!,rQpO,59XO!,zQ#tO,59XO5vQ#tO,59XO!-VQWO,5:vO!-_QWO'#GxO!-mQWO'#JbO){QYO,5;kO!-uQ&jO,5;mO!-zQWO,5=cO!.PQWO,5=cO!.UQWO,5=cO5iQ$I[O,5=cO5qQWO,5<vO!.dQWO'#E_O!.xQ&jO'#E`OOQ$IS'#JP'#JPO!/ZQ$I[O'#J_O5iQ$I[O,5<zO7pQWO,5=QOOQO'#Cr'#CrO!/fQpO,5<}O!/nQ#tO,5=OO!/yQWO,5=QO!0OQ`O,5=TO:^QWO'#GnO5qQWO'#GpO!0WQWO'#GpO5vQ#tO'#GsO!0]QWO'#GsOOQQ,5=W,5=WO!0bQWO'#GtO!0jQWO'#CmO!0oQWO,59OO!0yQWO,59OO!2{QYO,59OOOQQ,59O,59OO!3YQ$I[O,59OO){QYO,59OO!3eQYO'#G{OOQQ'#G|'#G|OOQQ'#G}'#G}O`QYO,5=eO!3uQWO,5=eO){QYO'#DxO`QYO,5=kO`QYO,5=mO!3zQWO,5=oO`QYO,5=qO!4PQWO,5=tO!4UQYO,5=zOOQQ,5>Q,5>QO){QYO,5>QO5iQ$I[O,5>SOOQQ,5>U,5>UO!8VQWO,5>UOOQQ,5>W,5>WO!8VQWO,5>WOOQQ,5>Y,5>YO!8[Q`O,59rOOOS-E;r-E;rOOQ$IU1G/]1G/]O!8aQbO,5>aO'dQYO,5>aOOQO,5>f,5>fO!8kQYO'#HuOOQO-E;s-E;sO!8xQWO,5?bO!9QQbO,5?bO!9XQWO,5?lOOQ$IU1G/c1G/cO!9aQpO'#DTOOQO'#Ix'#IxO){QYO'#IxO!:OQpO'#IxO!:mQpO'#DcO!;OQ&jO'#DcO!=ZQYO'#DcO!=bQWO'#IwO!=jQWO,59|O!=oQWO'#EaO!=}QWO'#JSO!>VQWO,5:zO!>mQ&jO'#DcO){QYO,5?mO!>wQWO'#HzOOQO-E;x-E;xO!9XQWO,5?lOOQ$IS1G0e1G0eO!@TQ&jO'#D|OOQ$IU,5:e,5:eO){QYO,5:eOITQWO,5:eO!@[QWO,5:eO:^QWO,5:uO!,rQpO,5:uO!,zQ#tO,5:uO5vQ#tO,5:uOOQ$IU1G/n1G/nOOQ$IU1G0O1G0OOOQ$IS'#EV'#EVO){QYO,5?jO!@gQ$I[O,5?jO!@xQ$I[O,5?jO!APQWO,5?iO!AXQWO'#H|O!APQWO,5?iOOQ$IS1G0d1G0dO7VQWO,5?iOOQ$IU1G0b1G0bO!AsQ$IfO1G0bO!BdQ$IdO,5:rOOQ$IU'#Fq'#FqO!CQQ$IfO'#IqOGTQYO1G0bO!EPQ#tO'#IyO!EZQWO,5:WO!E`QbO'#IzO){QYO'#IzO!EjQWO,5:]OOQ$IU'#DT'#DTOOQ$IU1G0k1G0kO!EoQWO1G0kO!HQQ$IfO1G0mO!HXQ$IfO1G0mO!JlQ$IfO1G0mO!JsQ$IfO1G0mO!LzQ$IfO1G0mO!M_Q$IfO1G0mO#!OQ$IfO1G0mO#!VQ$IfO1G0mO#$jQ$IfO1G0mO#$qQ$IfO1G0mO#&fQ$IfO1G0mO#)`Q7^O'#ChO#+ZQ7^O1G0}O#-UQ7^O'#IuOOQ$IU1G1T1G1TO#-iQ$IfO,5>kOOQ$IS-E;}-E;}O#.YQ$IfO1G0mOOQ$IU1G0m1G0mO#0[Q$IfO1G1QO#0{QpO,5;sO#1QQpO,5;tO#1VQpO'#F[O#1kQWO'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#1pQpO1G1]OOQ$IU1G1]1G1]OOOO1G1f1G1fO#2OQ7^O'#ItO#2YQWO,5;}OLXQYO,5;}OOOO-E;|-E;|OOQ$IU1G1Y1G1YOOQ$IU,5<P,5<PO#2_QpO,5<POOQ$IU,59a,59aOITQWO'#C{OOOS'#Hs'#HsO#2dOSO,59eOOQ$IU,59e,59eO){QYO1G1lO!(hQWO'#IRO#2oQWO,5<eOOQ$IU,5<b,5<bOOQO'#GV'#GVOJdQWO,5<pOOQO'#GX'#GXOJdQWO,5<rOJdQWO,5<tOOQO1G1n1G1nO#2zQ`O'#CpO#3_Q`O,5<^O#3fQWO'#JZO5qQWO'#JZO#3tQWO,5<`OJdQWO,5<_O#3yQ`O'#FqO#4WQ`O'#J[O#4bQWO'#J[OITQWO'#J[O#4gQWO,5<cOOQ$IS'#Dg'#DgO#4lQWO'#FtO#4wQpO'#F|O!&tQ&jO'#F|O!&tQ&jO'#GOO#5YQWO'#GPO!(mQWO'#GSO#5_Q$I[O'#ITO#5jQ&jO,5<gOOQ$IU,5<g,5<gO#5qQ&jO'#F|O#6PQ&jO'#F}O#6XQ&jO'#F}OOQ$IU,5<u,5<uOJdQWO,5?[OJdQWO,5?[O#6^QWO'#IUO#6iQWO,5?ZOOQ$IU'#Ch'#ChO#7]Q#tO,59jOOQ$IU,59j,59jO#8OQ#tO,5<UO#8qQ#tO,5<WO#8{QWO,5<YOOQ$IU,5<Z,5<ZO#9QQWO,5<aO#9VQ#tO,5<fOGTQYO1G1mO#9gQWO1G1mOOQQ1G3v1G3vOOQ$IU1G/p1G/pONXQWO1G/pOOQQ1G2b1G2bOITQWO1G2bO){QYO1G2bOITQWO1G2bO#9lQWO1G2bO#9zQWO,59]O#;TQWO'#EWOOQ$IS,5?W,5?WO#;_Q$I[O,5?WOOQQ1G.s1G.sO:^QWO1G.sO!,rQpO1G.sO!,zQ#tO1G.sO#;pQWO1G0bO#;uQWO'#ChO#<QQWO'#JcO#<YQWO,5=dO#<_QWO'#JcO#<dQWO'#JcO#<lQWO'#I^O#<zQWO,5?|O#=SQbO1G1VOOQ$IU1G1X1G1XO5qQWO1G2}O#=ZQWO1G2}O#=`QWO1G2}O#=eQWO1G2}OOQQ1G2}1G2}O#=jQ#tO1G2bO7VQWO'#JQO7VQWO'#EaO7VQWO'#IWO#={Q$I[O,5?yOOQQ1G2f1G2fO!/yQWO1G2lOITQWO1G2iO#>WQWO1G2iOOQQ1G2j1G2jOITQWO1G2jO#>]QWO1G2jO#>eQ&jO'#GhOOQQ1G2l1G2lO!&tQ&jO'#IYO!0OQ`O1G2oOOQQ1G2o1G2oOOQQ,5=Y,5=YO#>mQ#tO,5=[O5qQWO,5=[O#5YQWO,5=_O5_QWO,5=_O!,rQpO,5=_O!,zQ#tO,5=_O5vQ#tO,5=_O#?OQWO'#JaO#?ZQWO,5=`OOQQ1G.j1G.jO#?`Q$I[O1G.jO#?kQWO1G.jO#?pQWO1G.jO5iQ$I[O1G.jO#?xQbO,5@OO#@SQWO,5@OO#@_QYO,5=gO#@fQWO,5=gO7VQWO,5@OOOQQ1G3P1G3PO`QYO1G3POOQQ1G3V1G3VOOQQ1G3X1G3XO:XQWO1G3ZO#@kQYO1G3]O#DfQYO'#H[OOQQ1G3`1G3`O#DsQWO'#HbO:^QWO'#HdOOQQ1G3f1G3fO#D{QYO1G3fO5iQ$I[O1G3lOOQQ1G3n1G3nOOQ$IS'#Fx'#FxO5iQ$I[O1G3pO5iQ$I[O1G3rOOOS1G/^1G/^O#HyQ`O,5<TO#IRQbO1G3{OOQO1G4Q1G4QO){QYO,5>aO#I]QWO1G4|O#IeQWO1G5WO#ImQWO,5?dOLXQYO,5:{O7VQWO,5:{O:^QWO,59}OLXQYO,59}O!,rQpO,59}O#IrQ7^O,59}OOQO,5:{,5:{O#I|Q&jO'#HvO#JdQWO,5?cOOQ$IU1G/h1G/hO#JlQ&jO'#H{O#KQQWO,5?nOOQ$IS1G0f1G0fO!;OQ&jO,59}O#KYQbO1G5XO7VQWO,5>fOOQ$IS'#ES'#ESO#KdQ$ItO'#ETO!?{Q&jO'#D}OOQO'#Hy'#HyO#LOQ&jO,5:hOOQ$IU,5:h,5:hO#LVQ&jO'#D}O#LhQ&jO'#D}O#LoQ&jO'#EYO#LrQ&jO'#ETO#MPQ&jO'#ETO!?{Q&jO'#ETO#MdQWO1G0PO#MiQ`O1G0POOQ$IU1G0P1G0PO){QYO1G0POITQWO1G0POOQ$IU1G0a1G0aO:^QWO1G0aO!,rQpO1G0aO!,zQ#tO1G0aO#MpQ$IfO1G5UO){QYO1G5UO#NQQ$I[O1G5UO#NcQWO1G5TO7VQWO,5>hOOQO,5>h,5>hO#NkQWO,5>hOOQO-E;z-E;zO#NcQWO1G5TO#NyQ$IfO,59jO$!xQ$IfO,5<UO$$zQ$IfO,5<WO$&|Q$IfO,5<fOOQ$IU7+%|7+%|O$)UQ$IfO7+%|O$)uQWO'#HwO$*PQWO,5?eOOQ$IU1G/r1G/rO$*XQYO'#HxO$*fQWO,5?fO$*nQbO,5?fOOQ$IU1G/w1G/wOOQ$IU7+&V7+&VO$*xQ7^O,5:^O){QYO7+&iO$+SQ7^O,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$+aQMhO,5;vOLXQYO,5;uOOQO-E;{-E;{OOQ$IU7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$+lQWO1G1iOOQ$IU1G1k1G1kO$+qQ`O,59gOOOS-E;q-E;qOOQ$IU1G/P1G/PO$+xQ$IfO7+'WOOQ$IU,5>m,5>mO$,iQWO,5>mOOQ$IU1G2P1G2PP$,nQWO'#IRPOQ$IU-E<P-E<PO$-_Q#tO1G2[O$.QQ#tO1G2^O$.[Q#tO1G2`OOQ$IU1G1x1G1xO$.cQWO'#IQO$.qQWO,5?uO$.qQWO,5?uO$.yQWO,5?uO$/UQWO,5?uOOQO1G1z1G1zO$/dQ#tO1G1yO$/tQWO'#ISO$0UQWO,5?vOITQWO,5?vO$0^Q`O,5?vOOQ$IU1G1}1G1}OOQ$IS,5<h,5<hOOQ$IS,5<i,5<iO$0hQWO,5<iO#5TQWO,5<iO!,rQpO,5<hO$0mQWO,5<jOOQ$IS,5<k,5<kO$0hQWO,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ$IU1G2R1G2RO!&tQ&jO,5<hO$0uQWO,5<iO!&tQ&jO,5<jO!&tQ&jO,5<iO$1QQ#tO1G4vO$1[Q#tO1G4vOOQO,5>p,5>pOOQO-E<S-E<SO!-uQ&jO,59lO){QYO,59lO$1iQWO1G1tOJdQWO1G1{O$1nQ$IfO7+'XOOQ$IU7+'X7+'XOGTQYO7+'XOOQ$IU7+%[7+%[O$2_Q`O'#J]O#MdQWO7+'|O$2iQWO7+'|O$2qQ`O7+'|OOQQ7+'|7+'|OITQWO7+'|O){QYO7+'|OITQWO7+'|OOQO1G.w1G.wO$2{Q$IdO'#ChO$3`Q$IdO,5<lO$4QQWO,5<lOOQ$IS1G4r1G4rOOQQ7+$_7+$_O:^QWO7+$_O!,rQpO7+$_OGTQYO7+%|O$4VQWO'#I]O$4hQWO,5?}OOQO1G3O1G3OO5qQWO,5?}O$4hQWO,5?}O$4pQWO,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ$IU7+&q7+&qO$4uQWO7+(iO5iQ$I[O7+(iO5qQWO7+(iO$4zQWO7+(iO$5PQWO7+'|OOQ$IS,5>r,5>rOOQ$IS-E<U-E<UOOQQ7+(W7+(WO$5_Q$IdO7+(TOITQWO7+(TO$5iQ`O7+(UOOQQ7+(U7+(UOITQWO7+(UO$5pQWO'#J`O$5{QWO,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQQ7+(Z7+(ZO$6uQ&jO'#GqOOQQ1G2v1G2vOITQWO1G2vO){QYO1G2vOITQWO1G2vO$6|QWO1G2vO$7[Q#tO1G2vO5iQ$I[O1G2yO#5YQWO1G2yO5_QWO1G2yO!,rQpO1G2yO!,zQ#tO1G2yO$7mQWO'#I[O$7xQWO,5?{O$8QQ&jO,5?{OOQ$IS1G2z1G2zOOQQ7+$U7+$UO$8YQWO7+$UO5iQ$I[O7+$UO$8_QWO7+$UO){QYO1G5jO){QYO1G5kO$8dQYO1G3RO$8kQWO1G3RO$8pQYO1G3RO$8wQ$I[O1G5jOOQQ7+(k7+(kO5iQ$I[O7+(uO`QYO7+(wOOQQ'#Jf'#JfOOQQ'#I_'#I_O$9RQYO,5=vOOQQ,5=v,5=vO){QYO'#H]O$9`QWO'#H_OOQQ,5=|,5=|O7VQWO,5=|OOQQ,5>O,5>OOOQQ7+)Q7+)QOOQQ7+)W7+)WOOQQ7+)[7+)[OOQQ7+)^7+)^OOQO1G5O1G5OO$9eQ7^O1G0gO$9oQWO1G0gOOQO1G/i1G/iO$9zQ7^O1G/iO:^QWO1G/iOLXQYO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!,rQpO1G/iO:^QWO,5:iOOQO,5:o,5:oO){QYO,5:oO$:UQ$I[O,5:oO$:aQ$I[O,5:oO!,rQpO,5:iOOQO-E;w-E;wOOQ$IU1G0S1G0SO!?{Q&jO,5:iO$:oQ&jO,5:iO$;QQ$ItO,5:oO$;lQ&jO,5:iO!?{Q&jO,5:oOOQO,5:t,5:tO$;sQ&jO,5:oO$<QQ$I[O,5:oOOQ$IU7+%k7+%kO#MdQWO7+%kO#MiQ`O7+%kOOQ$IU7+%{7+%{O:^QWO7+%{O!,rQpO7+%{O$<fQ$IfO7+*pO){QYO7+*pOOQO1G4S1G4SO7VQWO1G4SO$<vQWO7+*oO$=OQ$IfO1G2[O$?QQ$IfO1G2^O$ASQ$IfO1G1yO$C[Q#tO,5>cOOQO-E;u-E;uO$CfQbO,5>dO){QYO,5>dOOQO-E;v-E;vO$CpQWO1G5QO$CxQ7^O1G0bO$FPQ7^O1G0mO$FWQ7^O1G0mO$HXQ7^O1G0mO$H`Q7^O1G0mO$JTQ7^O1G0mO$JhQ7^O1G0mO$LuQ7^O1G0mO$L|Q7^O1G0mO$N}Q7^O1G0mO% UQ7^O1G0mO%!yQ7^O1G0mO%#^Q$IfO<<JTO%#}Q7^O1G0mO%&UQ7^O'#IqO%'nQ7^O1G1QOLXQYO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%'{QWO1G1aO%(QQ7^O,5>kOOOO7+'T7+'TOOOS1G/R1G/ROOQ$IU1G4X1G4XOJdQWO7+'zO%([QWO,5>lO5qQWO,5>lOOQO-E<O-E<OO%(jQWO1G5aO%(jQWO1G5aO%(rQWO1G5aO%(}Q`O,5>nO%)XQWO,5>nOITQWO,5>nOOQO-E<Q-E<QO%)^Q`O1G5bO%)hQWO1G5bOOQ$IS1G2T1G2TO$0hQWO1G2TOOQ$IS1G2S1G2SO%)pQWO1G2UOITQWO1G2UOOQ$IS1G2Y1G2YO!,rQpO1G2SO#5TQWO1G2TO%)uQWO1G2UO%)}QWO1G2TOJdQWO7+*bOOQ$IU1G/W1G/WO%*YQWO1G/WOOQ$IU7+'`7+'`O%*_Q#tO7+'gO%*oQ$IfO<<JsOOQ$IU<<Js<<JsOITQWO'#IVO%+`QWO,5?wOOQQ<<Kh<<KhOITQWO<<KhO#MdQWO<<KhO%+hQWO<<KhO%+pQ`O<<KhOITQWO1G2WOOQQ<<Gy<<GyO:^QWO<<GyO%+zQ$IfO<<IhOOQ$IU<<Ih<<IhOOQO,5>w,5>wO%,kQWO,5>wO%,pQWO,5>wOOQO-E<Z-E<ZO%,xQWO1G5iO%,xQWO1G5iO5qQWO1G5iO%-QQWO<<LTOOQQ<<LT<<LTO%-VQWO<<LTO5iQ$I[O<<LTO){QYO<<KhOITQWO<<KhOOQQ<<Ko<<KoO$5_Q$IdO<<KoOOQQ<<Kp<<KpO$5iQ`O<<KpO%-[Q&jO'#IXO%-gQWO,5?zOLXQYO,5?zOOQQ1G2n1G2nO#KdQ$ItO'#ETO!?{Q&jO'#GrOOQO'#IZ'#IZO%-oQ&jO,5=]OOQQ,5=],5=]O%-vQ&jO'#ETO%.RQ&jO'#ETO%.jQ&jO'#ETO%.tQ&jO'#GrO%/VQWO7+(bO%/[QWO7+(bO%/dQ`O7+(bOOQQ7+(b7+(bOITQWO7+(bO){QYO7+(bOITQWO7+(bO%/nQWO7+(bOOQQ7+(e7+(eO5iQ$I[O7+(eO#5YQWO7+(eO5_QWO7+(eO!,rQpO7+(eO%/|QWO,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%0XQWO1G5gO5iQ$I[O<<GpOOQQ<<Gp<<GpO%0aQWO<<GpO%0fQWO7++UO%0kQWO7++VOOQQ7+(m7+(mO%0pQWO7+(mO%0uQYO7+(mO%0|QWO7+(mO){QYO7++UO){QYO7++VOOQQ<<La<<LaOOQQ<<Lc<<LcOOQQ-E<]-E<]OOQQ1G3b1G3bO%1RQWO,5=wOOQQ,5=y,5=yO%1WQWO1G3hOLXQYO7+&ROOQO7+%T7+%TO%1]Q7^O1G5XO:^QWO7+%TOOQO1G0T1G0TO%1gQ$IfO1G0ZOOQO1G0Z1G0ZO){QYO1G0ZO%1qQ$I[O1G0ZO:^QWO1G0TO!,rQpO1G0TO!?{Q&jO1G0TO%1|Q$I[O1G0ZO%2[Q&jO1G0TO%2mQ$I[O1G0ZO%3RQ$ItO1G0ZO%3]Q&jO1G0TO!?{Q&jO1G0ZOOQ$IU<<IV<<IVOOQ$IU<<Ig<<IgO:^QWO<<IgO%3dQ$IfO<<N[OOQO7+)n7+)nO%3tQ$IfO7+'gO%5|QbO1G4OO%6WQ7^O7+%|O%6|Q7^O,59jO%8zQ7^O,5<UO%:{Q7^O,5<WO%<hQ7^O,5<fO%>WQ7^O7+'WO%>eQ7^O7+'XO%>rQWO,5;xOOQO7+&{7+&{O%>wQ#tO<<KfOOQO1G4W1G4WO%?XQWO1G4WO%?dQWO1G4WO%?rQWO7+*{O%?rQWO7+*{OITQWO1G4YO%?zQ`O1G4YO%@UQWO7+*|OOQ$IS7+'o7+'oO$0hQWO7+'pO%@^Q`O7+'pOOQ$IS7+'n7+'nO$0hQWO7+'oO%@eQWO7+'pOITQWO7+'pO#5TQWO7+'oO%@jQ#tO<<M|OOQ$IU7+$r7+$rO%@tQ`O,5>qOOQO-E<T-E<TO#MdQWOANASOOQQANASANASOITQWOANASO%AOQ$IdO7+'rOOQQAN=eAN=eO5qQWO1G4cOOQO1G4c1G4cO%A`QWO1G4cO%AeQWO7++TO%AeQWO7++TO5iQ$I[OANAoO%AmQWOANAoOOQQANAoANAoO%ArQWOANASO%AzQ`OANASOOQQANAZANAZOOQQANA[ANA[O%BUQWO,5>sOOQO-E<V-E<VO%BaQ7^O1G5fO#5YQWO,5=^O5_QWO,5=^O!,rQpO,5=^OOQO-E<X-E<XOOQQ1G2w1G2wO$;QQ$ItO,5:oO!?{Q&jO,5=^O%BkQ&jO,5=^O%B|Q&jO,5:oOOQQ<<K|<<K|OITQWO<<K|O%/VQWO<<K|O%CWQWO<<K|O%C`Q`O<<K|O){QYO<<K|OITQWO<<K|OOQQ<<LP<<LPO5iQ$I[O<<LPO#5YQWO<<LPO5_QWO<<LPO%CjQ&jO1G4bO%CrQWO7++ROOQQAN=[AN=[O5iQ$I[OAN=[OOQQ<<Np<<NpOOQQ<<Nq<<NqOOQQ<<LX<<LXO%CzQWO<<LXO%DPQYO<<LXO%DWQWO<<NpO%D]QWO<<NqOOQQ1G3c1G3cO:^QWO7+)SO%DbQ7^O<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%1gQ$IfO7+%uO){QYO7+%uOOQO7+%o7+%oO:^QWO7+%oO!,rQpO7+%oO%DlQ$I[O7+%uO!?{Q&jO7+%oO%DwQ$I[O7+%uO%EVQ&jO7+%oO%EhQ$I[O7+%uOOQ$IUAN?RAN?RO%E|Q$IfO<<KfO%HUQ7^O<<JTO%HcQ7^O1G1yO%JgQ7^O1G2[O%LhQ7^O1G2^O%NTQ7^O<<JsO%NbQ7^O<<IhOOQO1G1d1G1dOOQO7+)r7+)rO%NoQWO7+)rO%NzQWO<<NgO& SQ`O7+)tOOQ$IS<<K[<<K[O$0hQWO<<K[OOQ$IS<<KZ<<KZO& ^Q`O<<K[O$0hQWO<<KZOOQQG26nG26nO#MdQWOG26nOOQO7+)}7+)}O5qQWO7+)}O& eQWO<<NoOOQQG27ZG27ZO5iQ$I[OG27ZOITQWOG26nOLXQYO1G4_O& mQWO7++QO5iQ$I[O1G2xO#5YQWO1G2xO5_QWO1G2xO!,rQpO1G2xO!?{Q&jO1G2xO%3RQ$ItO1G0ZO& uQ&jO1G2xO%/VQWOANAhOOQQANAhANAhOITQWOANAhO&!WQWOANAhO&!`Q`OANAhOOQQANAkANAkO5iQ$I[OANAkO#5YQWOANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQQG22vG22vOOQQANAsANAsO&!jQWOANAsOOQQAND[AND[OOQQAND]AND]OOQQ<<Ln<<LnOOQO<<Ia<<IaO%1gQ$IfO<<IaOOQO<<IZ<<IZO:^QWO<<IZO){QYO<<IaO!,rQpO<<IZO&!oQ$I[O<<IaO!?{Q&jO<<IZO&!zQ$I[O<<IaO&#YQ7^O7+'gOOQO<<M^<<M^OOQ$ISAN@vAN@vO$0hQWOAN@vOOQ$ISAN@uAN@uOOQQLD,YLD,YOOQO<<Mi<<MiOOQQLD,uLD,uO#MdQWOLD,YO&$xQ7^O7+)yOOQO7+(d7+(dO5iQ$I[O7+(dO#5YQWO7+(dO5_QWO7+(dO!,rQpO7+(dO!?{Q&jO7+(dOOQQG27SG27SO%/VQWOG27SOITQWOG27SOOQQG27VG27VO5iQ$I[OG27VOOQQG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%1gQ$IfOAN>{O:^QWOAN>uO){QYOAN>{O!,rQpOAN>uO&%SQ$I[OAN>{O&%_Q7^O<<KfOOQ$ISG26bG26bOOQQ!$( t!$( tOOQO<<LO<<LOO5iQ$I[O<<LOO#5YQWO<<LOO5_QWO<<LOO!,rQpO<<LOOOQQLD,nLD,nO%/VQWOLD,nOOQQLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%1gQ$IfOG24gO:^QWOG24aO){QYOG24gO&&}QMhO,5:rO&'tQ!LQO'#IqOOQOANAjANAjO5iQ$I[OANAjO#5YQWOANAjO5_QWOANAjOOQQ!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%1gQ$IfOLD*RO&(hQMhO,59jO&)[QMhO,5<UO&*OQMhO,5<WO&*rQMhO,5<fOOQOG27UG27UO5iQ$I[OG27UO#5YQWOG27UOOQO!$'Mm!$'MmO&+iQMhO1G2[O&,]QMhO1G2^O&-PQMhO1G1yOOQOLD,pLD,pO5iQ$I[OLD,pO&-vQMhO7+'gOOQO!$(![!$(![O&.mQMhO<<KfOLXQYO'#DrO&/dQbO'#ItOLXQYO'#DjO&/kQ$IfO'#ChO&0UQbO'#ChO&0fQYO,5:vO&2fQWO'#EWOLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO'#IPO&3pQWO,5<TO&5SQWO,5;ROLXQYO,5;fO!(^QWO'#DOO!(^QWO'#DOO!(^QWO'#DOOITQWO'#FjO&2fQWO'#FjO&3xQWO'#FjOITQWO'#FlO&2fQWO'#FlO&3xQWO'#FlOITQWO'#FzO&2fQWO'#FzO&3xQWO'#FzOLXQYO,5?mO&0fQYO1G0bO&5ZQ7^O'#ChOLXQYO1G1lOITQWO,5<pO&2fQWO,5<pO&3xQWO,5<pOITQWO,5<rO&2fQWO,5<rO&3xQWO,5<rOITQWO,5<_O&2fQWO,5<_O&3xQWO,5<_O&0fQYO1G1mOLXQYO7+&iOITQWO1G1{O&2fQWO1G1{O&3xQWO1G1{O&0fQYO7+'XO&0fQYO7+%|OITQWO7+'zO&2fQWO7+'zO&3xQWO7+'zO&5eQWO7+'pO&5eQWO<<K[O&5eQWOAN@vO&5jQWO'#E[O&5oQWO'#E[O&5wQWO'#EzO&5|QWO'#EgO&6RQWO'#JRO&6^QWO'#JPO&6iQWO,5:vO&6nQ#tO,5<QO&6uQWO'#FsO&6zQWO'#FsO&7PQWO'#FsO&7UQWO,5<RO&7^QWO,5:vO&7fQ7^O1G0}O&7mQWO,5<aO&7rQWO,5<aO&7wQWO,5<aO&7|QWO1G1mO&8RQWO1G0bO&8WQ#tO1G2`O&8_Q#tO1G2`O&8fQ#tO1G2`O&8mQWO1G2UO&8rQ`O7+'pO&8yQWO7+'pO&9OQ`O<<K[O4QQWO'#FhO5_QWO'#FgOBwQWO'#EZOLXQYO,5;cO!(mQWO'#FuO!(mQWO'#FuO!(mQWO'#FuOJdQWO,5<tOJdQWO,5<tOJdQWO,5<tO&9VQWO,5<jOITQWO1G2UO&9_QWO1G2UOITQWO7+'pO!&tQ&jO'#GOO!&tQ&jO,5<j",stateData:"&:]~O'YOS'ZOSTOSUOS~OPTOQTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OP[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOR!WO'U!XO'V!ZO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9XO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOP'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']#pO'f#sO'a'cP~O!d$XO~O!]$ZO~O_$[O'W$[O~O']$`O~O!d$XO']$`O'^$bO'b$cO~Oc$iO!d$XO']$`O~O#c#TO~O]$rOu$nO!T$kO!d$mO%R$qO']$`O'^$bO^(UP~O!n$sO~Ox$tO!T$uO']$`O~Ox$tO!T$uO%Z$yO']$`O~O']$zO~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%TOc%SO!n%QO%P%RO%c%PO~P7uOb%WOcmO!T%VO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%ZO!{%^O%R%XO'^$bO~P8tO!d%_O!g%cO~O!d%dO~O!TSO~O_$[O'T%lO'W$[O~O_$[O'T%oO'W$[O~O_$[O'T%qO'W$[O~OR!WO'U!XO'V%uO~OP[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;aO!Q%wO!O&iX!O&nX!R&iX!R&nX~P'dO!R%yO!O'jX~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R%yO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>^O!O&OO~Ox&RO!W&]O!X&UO!Y&UO'^$bO~O]&SOk&SO!Q&VO'g&PO!S'kP!S'vP~P@aO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PAYO!{&^O!O'uX!R'uX~O!R&_O!O'tX~O!O&bO~O!{#eO~PAYOS&fO!T&cO!o&eO']$`O~Oc&kO!d$XO']$`O~Ou$nO!d$mO~O!S&lO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOP!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCcO!c&mO~O!]!wO!{&oO'p&nO!R'rX_'rX'W'rX~O!c'rX~PE{O!R&sO!c'qX~O!c&uO~Ox$tO!T$uO#V&vO']$`O~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO']&zO'f#sO~O#W&|O~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']&zO'f#sO~O'a'mP~PJdO!Q'QO!c'nP~P){O'g'SO'oYO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'iO~PITO!]'kO!T'yX#w'yX#z'yX$R'yX~Ou'lO~P! POu'lO!T'yX#w'yX#z'yX$R'yX~O!T'nO#w'rO#z'mO$R'sO~O!Q'vO~PLXO#z#fO$R'yO~Ou$eXx$eX!b$eX'p$eX'w$eX'x$eX~OSfX!RfX!{fX'afX'a$eX~P!!iOk'{O~OR'|O'U'}O'V(PO~Ou(ROx(SO'p#[O'w(UO'x(WO~O'a(QO~P!#rO'a(ZO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~O!Q(_O']([O!c'}P~P!$aO#W(aO~O!Q(eO'](bO!O(OP~P!$aOj(sOx(kO!W(qO!X(jO!Y(jO!d(hO!x(rO$w(mO'^$bO'g(gO~O!S(pO~P!&XO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'QOS(vO!{(uO!R'dX'a'dX~O!R(wO'a'cX~O'](yO~O!d)OO~O']&zO~O!d(hO~Ox$tO!Q!rO!T$uO#U!uO#V!rO']$`O!c'qP~O!]!wO#W)SO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)cOS)[O!T&cO!o)ZO%Q)YO'b$cO~O']$zO'a'cP~O!])_O!T'`X_'`X!R'`X'W'`X~O!d$XO'b$cO~O!d$XO']$`O'b$cO~O!]!wO#W&|O~O])jO%R)kO'])gO!S(VP~O!R)lO^(UX~O'g'SO~OZ)pO~O^)qO~O!T$kO']$`O'^$bO^(UP~Ox$tO!Q)vO!R&_O!T$uO']$`O!O'tP~O]&YOk&YO!Q)wO'g'SO!S'vP~O!R)xO_(RX'W(RX~O!{)|O'b$cO~OS*PO!T#yO'b$cO~O!T*RO~Ou*TO!TSO~O!n*YO~Oc*_O~O'](yO!S(TP~Oc$iO~O%RtO']$zO~P8tOZ*eO^*dO~OPTOQTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9WO~P!1RO^*dO_$[O'W$[O~O_*iO#d*kO%T*kO%U*kO~P){O!d%_O~O%t*pO~O!T*rO~O&V*tO&X*uOP&SaQ&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*zO~On*}O~O!O&ia!R&ia~P!)cO!Q+RO!O&iX!R&iX~P){O!R%yO!O'ja~O!O'ja~P>^O!R&_O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+WO!{+VO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+YO!d$XO'b$cO!R!VX!S!VX~O]&QOk&QOx&RO'g(gO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O'fQO'oYO'|:}O~O']9yO~P!;^O!R+^O!S'kX~O!S+`O~O!]+WO!{+VO!R#TX!S#TX~O!R+aO!S'vX~O!S+cO~O]&QOk&QOx&RO'^$bO'g(gO~O!X+dO!Y+dO~P!>[Ox$tO!Q+fO!T$uO']$`O!O&nX!R&nX~O_+jO!W+mO!X+iO!Y+iO!r+qO!s+oO!t+pO!u+nO!x+rO'^$bO'g(gO'o+gO~O!S+lO~P!?]OS+wO!T&cO!o+vO~O!{+}O!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@gO!R&sO!c'qa~Ox$tO!Q,QO!T$uO#U,SO#V,QO']$`O!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)cO#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!#rO#W'eXP'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'QO!R,]O'a'mX~P!#rO'a,_O~O!R,`O!c'nX~P!)cO!c,cO~O!O,dO~OP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!EtO#[#PO~P!EtOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!H`Oj#RO~P!H`OP#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!JzOZ#dO!a#TO#a#TO#b#TO#c#TO~P!JzOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!MrO'w!}O~P!MrOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P#!^O'x#OO~P#!^OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#$xOP[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#']OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO#j9fO'fQO'p#[O'w!}O'x#OO~O#m,fO~P#)gOP'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9jO#o9jO#c'iX#m'iX!S'iX~P#+bO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)cOP#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!#rO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)cO#z,hO~O#z,iO~O!]'kO!{,jO!T$OX#w$OX#z$OX$R$OX~O!Q,kO~O!T'nO#w,mO#z'mO$R,nO~O!R9gO!S'hX~P#)gO!S,oO~O$R,qO~OR'|O'U'}O'V,tO~O],wOk,wO!O,xO~O!RdX!]dX!cdX!c$eX'pdX~P!!iO!c-OO~P!#rO!R-PO!]!wO'p&nO!c'}X~O!c-UO~O!O$eX!R$eX!]$lX~P!!iO!R-WO!O(OX~P!#rO!]-YO~O!O-[O~O!Q(_O']$`O!c'}P~Oj-`O!]!wO!d$XO'b$cO'p&nO~O!])_O~O_$[O!R-eO'W$[O~O!S-gO~P!&XO!X-hO!Y-hO'^$bO'g(gO~Ox-jO'g(gO~O!x-kO~O']$zO!R&xX'a&xX~O!R(wO'a'ca~Ou-pOv-pOx-qO'pra'wra'xra!Rra!{ra~O'ara#mra~P#6qOu(ROx(SO'p$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#7gOu(ROx(SO'p$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#8YO]-rO~O#W-sO~O'a$na!R$na#m$na!{$na~P!#rO#W-vO~OS.PO!T&cO!o.OO%Q-}O~O'a.QO~O]#qOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~Oh.SO'].RO~P#:PO!])_O!T'`a_'`a!R'`a'W'`a~O#W.YO~OZ[X!RdX!SdX~O!R.ZO!S(VX~O!S.]O~OZ.^O~O].`O'])gO~O!T$kO']$`O^'QX!R'QX~O!R)lO^(Ua~O!c.cO~P!)cO].eO~OZ.fO~O^.gO~OS.PO!T&cO!o.OO%Q-}O'b$cO~O!R)xO_(Ra'W(Ra~O!{.mO~OS.pO!T#yO~O'g'SO!S(SP~OS.zO!T.vO!o.yO%Q.xO'b$cO~OZ/UO!R/SO!S(TX~O!S/VO~O^/XO_$[O'W$[O~O]/YO~O]/ZO'](yO~O#c/[O%r/]O~P0zO!{#eO#c/[O%r/]O~O_/^O~P){O_/`O~O%{/dOP%yiQ%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/jO!S/hO&Q/iO~P`O!TSO!d/lO~O&X*uOP&SiQ&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)cO!R%yO!O'ji~O!R&_O!O'ti~O!O/rO~O!R!Va!S!Va~P#)gO]&QOk&QO!Q/xO'g(gO!R&jX!S&jX~P@aO!R+^O!S'ka~O]&YOk&YO!Q)wO'g'SO!R&oX!S&oX~O!R+aO!S'va~O!O'ui!R'ui~P!)cO_$[O!]!wO!d$XO!j0SO!{0QO'W$[O'b$cO'p&nO~O!S0VO~P!?]O!X0WO!Y0WO'^$bO'g(gO'o+gO~O!W0XO~P#LVO!TSO!W0XO!u0ZO!x0[O~P#LVO!W0XO!s0^O!t0^O!u0ZO!x0[O~P#LVO!T&cO~O!T&cO~P!#rO!R'ri!c'ri_'ri'W'ri~P!)cO!{0gO!R'ri!c'ri_'ri'W'ri~O!R&sO!c'qi~Ox$tO!T$uO#V0iO']$`O~O#WraPraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra!cra!Ora!Tranra%Qra!]ra~P#6qO#W$^aP$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#7gO#W$`aP$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#8YO#W$naP$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!#rO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)cO!R&kX'a&kX~PJdO!R,]O'a'ma~O!Q0qO!R&lX!c&lX~P){O!R,`O!c'na~O!R,`O!c'na~P!)cO#m!fa!S!fa~PCcO#m!^a!R!^a!S!^a~P#)gO!T1UO#x^O$P1VO~O!S1ZO~On1[O~P!#rO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)cO!O1]O~O],wOk,wO~Ou(ROx(SO'x(WO'p$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$,vOu(ROx(SO'p$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$-iO#m1^O~P!#rO!Q1`O']$`O!R&tX!c&tX~O!R-PO!c'}a~O!R-PO!]!wO!c'}a~O!R-PO!]!wO'p&nO!c'}a~O'a$gi!R$gi#m$gi!{$gi~P!#rO!Q1gO'](bO!O&vX!R&vX~P!$aO!R-WO!O(Oa~O!R-WO!O(Oa~P!#rO!]!wO~O!]!wO#c1oO~Oj1rO!]!wO'p&nO~O!R'di'a'di~P!#rO!{1uO!R'di'a'di~P!#rO!c1xO~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)cO!R1|O!T(PX~P!#rO!T&cO%Q2PO~O!T&cO%Q2PO~P!#rO!T$eX$u[X_$eX!R$eX'W$eX~P!!iO$u2TOugXxgX!TgX'pgX'wgX'xgX_gX!RgX'WgX~O$u2TO~O]2ZO%R2[O'])gO!R'PX!S'PX~O!R.ZO!S(Va~OZ2`O~O^2aO~O]2dO~OS2fO!T&cO!o2eO%Q2PO~O_$[O'W$[O~P!#rO!T#yO~P!#rO!R2kO!{2mO!S(SX~O!S2nO~Ox;]O!W2wO!X2pO!Y2pO!r2vO!s2uO!t2uO!x2tO'^$bO'g(gO'o+gO~O!S2sO~P$6QOS3OO!T.vO!o2}O%Q2|O~OS3OO!T.vO!o2}O%Q2|O'b$cO~O'](yO!R'OX!S'OX~O!R/SO!S(Ta~O]3YO'g3XO~O]3ZO~O^3]O~O!c3`O~P){O_3bO~O_3bO~P){O#c3dO%r3eO~PE{O`/jO!S3iO&Q/iO~P`O!]3kO~O!R#Ti!S#Ti~P#)gO!{3mO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#)gO_$[O!{3tO'W$[O~O_$[O!]!wO!{3tO'W$[O~O!X3xO!Y3xO'^$bO'g(gO'o+gO~O_$[O!]!wO!d$XO!j3yO!{3tO'W$[O'b$cO'p&nO~O!W3zO~P$:oO!W3zO!u3}O!x4OO~P$:oO_$[O!]!wO!j3yO!{3tO'W$[O'p&nO~O!R'rq!c'rq_'rq'W'rq~P!)cO!R&sO!c'qq~O#W$xiP$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$,vO#W$ziP$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$-iO#W$giP$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!#rO!R&ka'a&ka~P!#rO!R&la!c&la~P!)cO!R,`O!c'ni~O#m#Oi!R#Oi!S#Oi~P#)gOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$DVO#[9[O~P$DVOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$F_Oj9^O~P$F_OP#^Oj9^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$HgOZ9iO!a9`O#a9`O#b9`O#c9`O~P$HgOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$J{O'w!}O~P$J{OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$MTO'x#OO~P$MTOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P% ]O_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)cOP#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi!R#Zi!S#Zi~P!#rO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!S'eX~OP'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX!R'eX~P%%mO#m#ni!R#ni!S#ni~P#)gO!S4`O~O!R&sa!S&sa~P#)gO!]!wO'p&nO!R&ta!c&ta~O!R-PO!c'}i~O!R-PO!]!wO!c'}i~O!O&va!R&va~P!#rO!]4gO~O!R-WO!O(Oi~P!#rO!R-WO!O(Oi~O!O4kO~O!]!wO#c4pO~Oj4qO!]!wO'p&nO~O!O4sO~O'a$iq!R$iq#m$iq!{$iq~P!#rO_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)cO!R1|O!T(Pa~O!T&cO%Q4xO~O!T&cO%Q4xO~P!#rO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)cOZ4{O~O]4}O'])gO~O!R.ZO!S(Vi~O]5QO~O^5RO~O'g'SO!R&{X!S&{X~O!R2kO!S(Sa~O!S5`O~P$6QOx;^O'g(gO'o+gO~O!W5cO!X5bO!Y5bO!x0[O'^$bO'g(gO'o+gO~O!s5dO!t5dO~P%.RO!X5bO!Y5bO'^$bO'g(gO'o+gO~O!T.vO~O!T.vO%Q5fO~O!T.vO%Q5fO~P!#rOS5kO!T.vO!o5jO%Q5fO~OZ5pO!R'Oa!S'Oa~O!R/SO!S(Ti~O]5sO~O!c5tO~O!c5uO~O!c5vO~O!c5vO~P){O_5xO~O!]5{O~O!c5|O~O!R'ui!S'ui~P#)gO_$[O'W$[O~P!)cO_$[O!{6RO'W$[O~O_$[O!]!wO!{6RO'W$[O~O!X6WO!Y6WO'^$bO'g(gO'o+gO~O_$[O!]!wO!j6XO!{6RO'W$[O'p&nO~O!d$XO'b$cO~P%2mO!W6YO~P%2[O!R'ry!c'ry_'ry'W'ry~P!)cO#W$iqP$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!#rO!R&li!c&li~P!)cO#m#Oq!R#Oq!S#Oq~P#)gOu-pOv-pOx-qO'pra'wra'xra!Sra~OPraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra!Rra~P%6eOu(ROx(SO'p$^a'w$^a'x$^a!S$^a~OP$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a!R$^a~P%8fOu(ROx(SO'p$`a'w$`a'x$`a!S$`a~OP$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a!R$`a~P%:gOP$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na!R$na!S$na~P!#rO#m$Yq!R$Yq!S$Yq~P#)gO#m$Zq!R$Zq!S$Zq~P#)gO!S6dO~O'a$|y!R$|y#m$|y!{$|y~P!#rO!]!wO!R&ti!c&ti~O!]!wO'p&nO!R&ti!c&ti~O!R-PO!c'}q~O!O&vi!R&vi~P!#rO!R-WO!O(Oq~O!O6jO~P!#rO!O6jO~O!R'dy'a'dy~P!#rO!R&ya!T&ya~P!#rO!T$tq_$tq!R$tq'W$tq~P!#rOZ6qO~O!R.ZO!S(Vq~O]6tO~O!T&cO%Q6uO~O!T&cO%Q6uO~P!#rO!{6vO!R&{a!S&{a~O!R2kO!S(Si~P#)gO!X6|O!Y6|O'^$bO'g(gO'o+gO~O!W7OO!x4OO~P%BkO!T.vO%Q7RO~O!T.vO%Q7RO~P!#rO]7YO'g7XO~O!R/SO!S(Tq~O!c7[O~O!c7[O~P){O!c7^O~O!c7_O~O!R#Ty!S#Ty~P#)gO_$[O!{7eO'W$[O~O_$[O!]!wO!{7eO'W$[O~O!X7hO!Y7hO'^$bO'g(gO'o+gO~O_$[O!]!wO!j7iO!{7eO'W$[O'p&nO~O#W$|yP$|yZ$|y_$|yj$|yv$|y!R$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y'W$|y'f$|y!c$|y!O$|y!T$|y!{$|yn$|y%Q$|y!]$|y~P!#rO#m#ky!R#ky!S#ky~P#)gOP$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi!R$gi!S$gi~P!#rOu(ROx(SO'x(WO'p$xi'w$xi!S$xi~OP$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi!R$xi~P%JROu(ROx(SO'p$zi'w$zi'x$zi!S$zi~OP$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi!R$zi~P%LSO#m$Zy!R$Zy!S$Zy~P#)gO#m#Oy!R#Oy!S#Oy~P#)gO!]!wO!R&tq!c&tq~O!R-PO!c'}y~O!O&vq!R&vq~P!#rO!O7mO~P!#rO!R.ZO!S(Vy~O!R2kO!S(Sq~O!X7yO!Y7yO'^$bO'g(gO'o+gO~O!T.vO%Q7|O~O!T.vO%Q7|O~P!#rO!c8PO~O_$[O!{8UO'W$[O~O_$[O!]!wO!{8UO'W$[O~OP$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq!R$iq!S$iq~P!#rO!R&{q!S&{q~P#)gO_$[O!{8hO'W$[O~OP$|yZ$|yj$|yv$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y#m$|y'f$|y!R$|y!S$|y~P!#rO!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P!#rO!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%%mO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%6eO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%8fO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%:gO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P!#rO!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%JRO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%LSO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P!#rO!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P!#rO!S$|y!W$|y!X$|y!Y$|y!r$|y!s$|y!t$|y!x$|y'^$|y'g$|y'o$|y~P!#rOn'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;aOP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!TSO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O]#qOh$OOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_;SO!d#vO#V9uO#t$TO$_9oO$a9rO$d$UO']&zO'f#sO~O!R9gO!S$]a~O]#qOh$OOj#rOk#qOl#qOq$POs9mOx#xO!T#yO!_;TO!d#vO#V9vO#t$TO$_9pO$a9sO$d$UO']&zO'f#sO~O#d'iO~P&3xO!S[X!SdX~P;aO!]9ZO~O#W9YO~O!]!wO#W9YO~O!{9jO~O#c9`O~O!{9wO!R'uX!S'uX~O!{9jO!R'sX!S'sX~O#W9xO~O'a9zO~P!#rO#W:RO~O#W:SO~O#W:TO~O!]!wO#W:UO~O!]!wO#W9xO~O#m:VO~P#)gO#W:WO~O#W:XO~O#W:YO~O#W:ZO~O#W:[O~O#m:]O~P!#rO#m:^O~P!#rO#m:_O~P!#rO!O:`O~O!O:aO~P!#rO!O:aO~O!O:bO~P!#rO!]!wO#c;YO~O!]!wO#c;[O~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Hc(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s5g5zP5zPPP5zP7t5zP5zP7xPP8OP8d<uPPPP<yPPPP<y?kPPP?qBSP<yPDgPPPPF`<yPPPPPHX<yPPKYLVPPPPLZMsPM{N|PLV<y<y!$^!'X!+z!+z!/ZPPP!/b!2W<yPPPPPPPPPP!4}P!6`PP<y!7mP<yP<y<y<y<yP<y!:[PP!=TP!?x!@Q!@U!@UP!=QP!@Y!@YP!B}P!CR<y<y!CX!E{5zP5zP5z5zP!GO5z5z!IU5z!Ki5z!Mi5z5z!NV#!]#!]#!a#!]#!iP#!]P5z##e5z#$y5z5z-zPPP#&cPP#&{#&{P#&{P#'b#&{PP#'hP#'_P#'_#'zMw#'_#(i#(o#(r([#(u([P#(|#(|#(|P([P([P([P([PP([P#)S#)VP#)V([P#)ZP#)^P([P([P([P([P([P([([#)d#)n#)t#)z#*Y#*`#*f#*p#*v#+V#+]#+k#+q#+w#,V#,l#.[#.j#.p#.v#.|#/S#/^#/d#/j#/t#0W#0^PPPPPPPP#0dPP#1W#4`PP#5v#5}#6VPP#;X#=l#Ch#Ck#Cn#Cy#C|PP#DP#DT#Dr#Ei#Em#FRPP#FV#F]#FaP#Fd#Fh#Fk#GZ#Gq#Gv#Gy#G|#HS#HV#HZ#H_mhOSj}!n$Z%b%e%f%h*m*r/d/gQ$hmQ$opQ%YyS&U!b+^Q&j!jS(j#y(oQ)e$iQ)r$qQ*^%SQ+d&]S+i&c+kQ+{&kQ-h(qQ/R*_Y0W+m+n+o+p+qS2p.v2rU3x0X0Z0^U5b2u2v2wS6W3z3}S6|5c5dQ7h6YR7y7O$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ(z$QQ)j$kQ*`%VQ*g%_Q,V9kQ.T)_Q.`)kQ/Z*eQ2Z.ZQ3V/SQ4X9mQ4}2[R8s9lpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gR*b%Z&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%y&R&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;P;Q[!cRU!]!`%w&VQ$alQ$gmS$lp$qv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ%OwQ&g!iQ&i!jS(^#v(hS)d$h$iQ)h$kQ)u$sQ*X%QQ*]%SS+z&j&kQ-T(_Q.X)eQ._)kQ.a)lQ.d)pQ.|*YS/Q*^*_Q0e+{Q1_-PQ2Y.ZQ2^.^Q2c.fQ3U/RQ4d1`Q4|2[Q5P2`Q6p4{R7p6q!Y$em!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VQ)]$aQ)}${Q*Q$|Q*[%SQ.h)uQ.{*XU/P*]*^*_Q3P.|S3T/Q/RQ5]2oQ5o3US6z5^5aS7w6{6}Q8_7xR8n8`W#|a$c(w:}S${t%XQ$|uQ$}vR){$y$o#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[T'}#s(OX({$Q9k9l9mU&Y!b$u+aQ'T!{Q)o$nQ.q*RQ1v-pR5X2k&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q$]#aZ!_!o$_%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,g,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pT!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ&W!bR/y+^Y&Q!b&U&]+^+dS(i#y(oS+h&c+kS-a(j(qQ-b(kQ-i(rQ.s*TU0T+i+m+nU0Y+o+p+qS0_+r2tQ1q-hQ1s-jQ1t-kS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hQ8`7yQ;X;]R;Z;^lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%j!QS&w!v9YQ)b$fQ*V%OQ*W%PQ+x&hS,Z&|9xS-u)S:UQ.V)cQ.u*UQ/k*tQ/m*uQ/u+XQ0]+oQ0c+yS1{-v:ZQ2U.WS2X.Y:[Q3n/wQ3q0OQ4Q0dQ4z2VQ6O3pQ6S3vQ6[4RQ7`5|Q7c6TQ8R7dQ8e8TR8q8g$W#`Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pW(t#z&{1S8jT)W$_,g$W#_Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pQ'e#`S)V$_,gR-w)W&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ%e{Q%f|Q%h!OQ%i!PR/c*pQ&d!iQ)X$aQ+u&gS-|)])uS0`+s+tW2O-y-z-{.hS4P0a0bU4w2Q2R2SU6n4v5T5UQ7o6oR8Z7rT+j&c+kS+h&c+kU0T+i+m+nU0Y+o+p+qS0_+r2tS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hR8`7yS+j&c+kT2q.v2rS&q!q/aQ-S(^Q-_(iS0S+h2oQ1d-TS1l-`-iU3y0Y0_5aQ4c1_S4n1r1tU6X3{3|6}Q6f4dQ6m4qR7i6ZQ!xXS&p!q/aQ)T$YQ)`$dQ)f$jQ,O&qQ-R(^Q-^(iQ-c(lQ.U)aQ.}*ZS0R+h2oS1c-S-TS1k-_-iQ1n-bQ1p-dQ3R/OW3u0S0Y0_5aQ4b1_Q4f1dS4j1l1tQ4o1sQ5m3SW6V3y3{3|6}S6e4c4dS6i4k:`Q6k4nQ6x5[Q7V5nS7g6X6ZQ7k6fS7l6j:aQ7n6mQ7u6yQ8O7WQ8W7iS8Y7m:bQ8]7vQ8l8^Q8x8mQ9P8yQ:i:dQ:t:nQ:u:oQ:y;XR:{;Z$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hS!xn!k!j:c#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:i;P$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ$Yb!Y$dm!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VS$jn!kQ)a$eQ*Z%SW/O*[*]*^*_U3S/P/Q/RQ5[2oS5n3T3UU6y5]5^5aQ7W5oU7v6z6{6}S8^7w7xS8m8_8`Q8y8n!j:d#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ:n;OR:o;P$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hY!hRU!]!`%wv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ*h%_!h:e#]#k'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:h&VS&Z!b$uR/{+a$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR*g%_$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ'T!{!k:f#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q!h#VZ!_$_%v%|&x'P'^'_'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U!R9b'c't+[,g/s/v0t0|0}1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d#XZ!_$_%v%|&x'P'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U}9d'c't+[,g/s/v0t1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!`#]Z!_$_%v%|&x'P'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9Un(Y#t&})R,}-V-l-m0n1y4a4r:j:v:w:xx;Q'c't+[,g/s/v0t1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d;U&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y;V8i8v8}9Q9SZ;W1R4[6_7j8X&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#l`#mR1V,j&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#g^#nT'm#i'qT#h^#nT'o#i'q&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QT#l`#mQ#o`R'x#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!k;O#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q#RdOSUj}!S!W!n!|#k$Z%Z%^%_%b%d%e%f%h%l&R&e'v)Z*i*m*r+v,k-q.O.y/[/]/^/`/d/g/i1U2e2}3b3d3e5j5xv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[Q)P$UQ,v(Rb1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^v#wa!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;WS(l#y(oQ)Q$VQ-d(m#Q:k!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b:l9Z9o9r9u9|:P:S:X:^b:m9i9p9s9v9}:Q:T:Y:_Q:q;RQ:r;SR:s;Tv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^lfOSj}!n$Z%b%e%f%h*m*r/d/gQ(d#xQ*{%oQ*|%qR1f-W$n#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[Q*O$|Q.o*QQ2i.nR5W2jT(n#y(oS(n#y(oT2q.v2rQ)`$dQ-c(lQ.U)aQ.}*ZQ3R/OQ5m3SQ6x5[Q7V5nQ7u6yQ8O7WQ8]7vQ8l8^Q8x8mR9P8yn(V#t&})R,}-V-l-m0n1y4a4r:j:v:w:x!d9{&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y9|8i8v8}9Q9SZ9}1R4[6_7j8Xp(X#t&})R,{,}-V-l-m0n1y4a4r:j:v:w:x!f:O&y'h(](c+t,Y,r-Z-x-{.l.n0b0k0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|[:P8i8v8{8}9Q9S]:Q1R4[6_6`7j8XpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ%UxR*i%_peOSjy}!n$Z%X%b%e%f%h*m*r/d/gR%UxQ*S$}R.k){qeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ.w*XS2{.{.|W5e2x2y2z3PU7Q5g5h5iU7z7P7S7TQ8a7{R8o8bQ%]yR*c%XR3Y/UR7Y5pS$lp$qR.a)lQ%bzR*m%cR*s%iT/e*r/gR*w%jQ*v%jR/n*wQjOQ!nST$^j!nQ(O#sR,s(OQ!YQR%t!YQ!^RU%z!^%{+SQ%{!_R+S%|Q+_&WR/z+_Q,^&}R0o,^Q,a'PS0r,a0sR0s,bQ+k&cR0U+kS!eR$tU&`!e&a+TQ&a!fR+T%}Q+b&ZR/|+bQ&t!sQ,P&rU,T&t,P0jR0j,UQ'q#iR,l'qQ#m`R'w#mQ#cZU'g#c+O9hQ+O9UR9h'tQ-Q(^W1a-Q1b4e6gU1b-R-S-TS4e1c1dR6g4f$Z(T#t&y&}'h(](c(|(})R+t,W,X,Y,r,{,|,}-V-Z-l-m-x-{.l.n0b0k0l0m0n1R1e1i1y2S2h2j2z4U4Y4Z4[4a4h4l4r4t4y5U5i6]6_6`6a6h6l7T7j8X8i8t8u8v8{8|8}9Q9S:j:v:w:x:z:|Q-X(cU1h-X1j4iQ1j-ZR4i1iQ(o#yR-f(oQ(x#}R-o(xQ1}-xR4u1}Q)y$wR.j)yQ2l.qS5Y2l6wR6w5ZQ*U%OR.t*UQ2r.vR5_2rQ/T*`S3W/T5qR5q3YQ.[)hW2].[2_5O6rQ2_._Q5O2^R6r5PQ)m$lR.b)mQ/g*rR3h/gWiOSj!nQ%g}Q)U$ZQ*l%bQ*n%eQ*o%fQ*q%hQ/b*mS/e*r/gR3g/dQ$]gQ%k!RQ%n!TQ%p!UQ%r!VQ)t$rQ)z$xQ*b%]Q*y%mQ-e(nS/W*c*fQ/o*xQ/p*{Q/q*|S0P+h2oQ2b.eQ2g.lQ3Q.}Q3[/YQ3f/cY3s0R0S0Y0_5aQ5S2dQ5V2hQ5l3RQ5r3Z[6P3r3u3y3{3|6}Q6s5QQ7U5mQ7Z5sW7a6Q6V6X6ZQ7q6tQ7t6xQ7}7VU8Q7b7g7iQ8[7uQ8c8OS8d8S8WQ8k8]Q8p8fQ8w8lQ8z8rQ9O8xR9R9PQ$fmQ&h!jU)c$g$h$iQ+X&TU+y&i&j&kQ-](iS.W)d)eQ/w+ZQ0O+hS0d+z+{Q1m-aQ2V.XQ3p/}S3v0T0YQ4R0eQ4m1qS6T3w3|Q7d6UQ8T7fR8g8VS#ua:}R)^$cU#}a$c:}R-n(wQ#taS&y!w)_Q&}!yQ'h#dQ(]#vQ(c#xQ(|$RQ(}$SQ)R$WQ+t&fQ,W9nQ,X9qQ,Y9tQ,r'|Q,{(VQ,|(XQ,}(YQ-V(aQ-Z(eQ-l(uQ-m(vd-x)Y-}.x2P2|4x5f6u7R7|Q-{)[Q.l)|Q.n*PQ0b+wQ0k9{Q0l:OQ0m:RQ0n,]Q1R9iQ1e-WQ1i-YQ1y-sQ2S.PQ2h.mQ2j.pQ2z.zQ4U:WQ4Y9pQ4Z9sQ4[9vQ4a1^Q4h1gQ4l1oQ4r1uQ4t1|Q4y2TQ5U2fQ5i3OQ6]:]Q6_:TQ6`9}Q6a:QQ6h4gQ6l4pQ7T5kQ7j:YQ8X:_Q8i9ZQ8t9oQ8u9rQ8v9uQ8{9|Q8|:PQ8}:SQ9Q:XQ9S:^Q:j:}Q:v;UQ:w;VQ:x;WQ:z;YR:|;[lgOSj}!n$Z%b%e%f%h*m*r/d/gS!pU%dQ%m!SQ%s!WQ'U!|Q'u#kS*f%Z%^Q*j%_Q*x%lQ+U&RQ+s&eQ,p'vQ-z)ZQ/_*iQ0a+vQ1X,kQ1w-qQ2R.OQ2y.yQ3^/[Q3_/]Q3a/^Q3c/`Q3j/iQ4_1UQ5T2eQ5h2}Q5w3bQ5y3dQ5z3eQ7S5jR7]5x!vZOSUj}!S!n!|$Z%Z%^%_%b%d%e%f%h%l&R&e)Z*i*m*r+v-q.O.y/[/]/^/`/d/g/i2e2}3b3d3e5j5xQ!_RQ!oTQ$_kS%v!]%yQ%|!`Q&x!vQ'P!zQ'V#PQ'W#QQ'X#RQ'Y#SQ'Z#TQ'[#UQ']#VQ'^#WQ'_#XQ'`#YQ'a#ZQ'c#]Q'f#bQ'j#eW't#k'v,k1UQ)n$mS+P%w+RS+[&V/xQ+e&^Q+|&oQ,[&|Q,b'QQ,e9TQ,g9VQ,u(QQ-t)SQ/s+VQ/v+YQ0f+}Q0p,`Q0t9YQ0u9[Q0v9]Q0w9^Q0x9_Q0y9`Q0z9aQ0{9bQ0|9cQ0}9dQ1O9eQ1P9fQ1Q,fQ1T9jQ1Y9gQ1z-vQ2W.YQ3o9wQ3r0QQ4S0gQ4V0qQ4W9xQ4]9zQ4^:UQ5Z2mQ5}3mQ6Q3tQ6^:VQ6b:ZQ6c:[Q7b6RQ7s6vQ8S7eQ8f8UQ8r8hQ9U!WR:p;QR!aRR&X!bS&T!b+^S+Z&U&]R/}+dR'O!yR'R!zT!tU$XS!sU$XU$wrs*kS&r!r!uQ,R&sQ,U&vQ.i)xS0h,Q,SR4T0i`!dR!]!`$t%w&_)v+fh!qUrs!r!u$X&s&v)x,Q,S0iQ/a*kQ/t+WQ3l/lT:g&V)wT!gR$tS!fR$tS%x!]&_S%}!`)vS+Q%w+fT+]&V)wT&[!b$uQ#i^R'z#nT'p#i'qR1W,jT(`#v(hR(f#xQ-y)YQ2Q-}Q2x.xQ4v2PQ5g2|Q6o4xQ7P5fQ7r6uQ7{7RR8b7|lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%[yR*b%XV$xrs*kR.r*RR*a%VQ$ppR)s$qR)i$kT%`z%cT%az%cT/f*r/g",nodeNames:"\u26A0 ArithOp ArithOp InterpolationStart extends LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:s6,nodeProps:[["closedBy",3,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[u6],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T'u(rZ$UW]!ROY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j'u*{R$P&j$UW]!RO!^%T!_#o%T#p~%T'm+ZV]!ROY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U'm+wO$P&j]!R'm+zROr+Urs,Ts~+U'm,[U$P&j]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R,sU]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R-[O]!R!R-_PO~,n'u-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k'u.VZ$P&j$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/PZ$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/yR$UW]!RO!^%T!_#o%T#p~%T!Z0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x2k0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`2k1g]$UW'o2cOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T6d5lU'x6[$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T'u6jZ$UW]!ROY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w'm8YV]!ROY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T'm8rROw8Twx8{x~8T'm9SU$P&j]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R9kU]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R:QPO~9f'u:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c'u:xZ$P&j$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z;rZ$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k%V=QR!d$}$UWO!^%T!_#o%T#p~%TZ=bR!cR$UWO!^%T!_#o%T#p~%T5s=tU'^2s#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T$u>rSj$m$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu6`$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%Ty@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%Ty@iR!Qq$UWO!^%T!_#o%T#p~%Ty@yZ$UWkqO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%TyAqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyBiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyCVV$UWkqO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Duy!0cd$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%Ty!1x_$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%Ty!3OR$UWkqO!^%T!_#o%T#p~%Ty!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%Ty!3}Y$UWkqO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%Ty!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%Ty!5`X$UWkqO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%Ty!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%Ty!6z]$UWkqO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T%w!7|R!]V$UW#m%hO!^%T!_#o%T#p~%T!P!8^R_w$UWO!^%T!_#o%T#p~%T6i!8rR'bd!a0`#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v%w!9kT!{%o$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%w!:gT'a!s#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T6i!<YV'p6a$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T)z!<vRv)r$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%TZ!={R!OR$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$P!>pR$UW'f#wO!^%T!_#o%T#p~%T~!?OO!T~6d!?VT'w6[$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T5g!?oR!S5]nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']%k'g2bOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[a6,l6,c6,0,1,2,3,4,5,6,7,8,9,o6],topRules:{Script:[0,7]},dialects:{jsx:11707,ts:11709},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:(n,e)=>h6(n,e)<<1},{term:289,get:n=>f6[n]||-1},{term:299,get:n=>d6[n]||-1},{term:63,get:n=>p6[n]||-1}],tokenPrec:11730}),g6=[Ti("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Ti("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Ti("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Ti("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Ti("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Ti(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Ti("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Ti(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Ti(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Ti('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Ti('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],E_=new T3,d2=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function hl(n){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,n),!0}}const y6=["FunctionDeclaration"],O6={FunctionDeclaration:hl("function"),ClassDeclaration:hl("class"),ClassExpression:()=>!0,EnumDeclaration:hl("constant"),TypeAliasDeclaration:hl("type"),NamespaceDeclaration:hl("namespace"),VariableDefinition(n,e){n.matchContext(y6)||e(n,"variable")},TypeDefinition(n,e){e(n,"type")},__proto__:null};function p2(n,e){let t=E_.get(e);if(t)return t;let i=[],r=!0;function s(o,a){let l=n.sliceString(o.from,o.to);i.push({label:l,type:a})}return e.cursor(Ft.IncludeAnonymous).iterate(o=>{if(r)r=!1;else if(o.name){let a=O6[o.name];if(a&&a(o,s)||d2.has(o.name))return!1}else if(o.to-o.from>8192){for(let a of p2(n,o.node))i.push(a);return!1}}),E_.set(e,i),i}const T_=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/;function b6(n){let e=Nt(n.state).resolve(n.pos,-1);if(e.name=="TemplateString"||e.name=="String"||e.name=="LineComment"||e.name=="BlockComment")return null;let t=e.to-e.from<20&&T_.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let i=[];for(let r=e;r;r=r.parent)d2.has(r.name)&&(i=i.concat(p2(n.state.doc,r)));return{options:i,from:t?e.from:n.pos,validFor:T_}}const cs=ha.define({parser:m6.configure({props:[zc.add({IfStatement:Ou({except:/^\s*({|else\b)/}),TryStatement:Ou({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:eW,SwitchBody:n=>{let e=n.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return n.baseIndent+(t?0:i?1:2)*n.unit},Block:J3({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>-1,"Statement Property":Ou({except:/^{/}),JSXElement(n){let e=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},JSXEscape(n){let e=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),jc.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":OT,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),v6=cs.configure({dialect:"ts"}),w6=cs.configure({dialect:"jsx"}),A6=cs.configure({dialect:"jsx ts"}),_6="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(n=>({label:n,type:"keyword"}));function x6(n={}){let e=n.jsx?n.typescript?A6:w6:n.typescript?v6:cs;return new hc(e,[cs.data.of({autocomplete:n8(["LineComment","BlockComment","String"],OC(g6.concat(_6)))}),cs.data.of({autocomplete:b6}),n.jsx?S6:[]])}function C_(n,e,t=n.length){if(!e)return"";let i=e.getChild("JSXIdentifier");return i?n.sliceString(i.from,Math.min(i.to,t)):""}const k6=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),S6=Ue.inputHandler.of((n,e,t,i)=>{if((k6?n.composing:n.compositionStarted)||n.state.readOnly||e!=t||i!=">"&&i!="/"||!cs.isActiveAt(n.state,e,-1))return!1;let{state:r}=n,s=r.changeByRange(o=>{var a,l,c;let{head:h}=o,u=Nt(r).resolveInner(h,-1),f;if(u.name=="JSXStartTag"&&(u=u.parent),i==">"&&u.name=="JSXFragmentTag")return{range:ve.cursor(h+1),changes:{from:h,insert:"><>"}};if(i==">"&&u.name=="JSXIdentifier"){if(((l=(a=u.parent)===null||a===void 0?void 0:a.lastChild)===null||l===void 0?void 0:l.name)!="JSXEndTag"&&(f=C_(r.doc,u.parent,h)))return{range:ve.cursor(h+1),changes:{from:h,insert:`></${f}>`}}}else if(i=="/"&&u.name=="JSXFragmentTag"){let p=u.parent,d=p==null?void 0:p.parent;if(p.from==h-1&&((c=d.lastChild)===null||c===void 0?void 0:c.name)!="JSXEndTag"&&(f=C_(r.doc,d==null?void 0:d.firstChild,h))){let m=`/${f}>`;return{range:ve.cursor(h+m.length),changes:{from:h,insert:m}}}}return{range:o}});return s.changes.empty?!1:(n.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),ul=["_blank","_self","_top","_parent"],Im=["ascii","utf-8","utf-16","latin1","latin1"],Rm=["get","post","put","delete"],Qm=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Yn=["true","false"],Pe={},Od={a:{attrs:{href:null,ping:null,type:null,media:null,target:ul,hreflang:null}},abbr:Pe,acronym:Pe,address:Pe,applet:Pe,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Pe,aside:Pe,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Pe,base:{attrs:{href:null,target:ul}},basefont:Pe,bdi:Pe,bdo:Pe,big:Pe,blockquote:{attrs:{cite:null}},body:Pe,br:Pe,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Qm,formmethod:Rm,formnovalidate:["novalidate"],formtarget:ul,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Pe,center:Pe,cite:Pe,code:Pe,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Pe,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Pe,dir:Pe,div:Pe,dl:Pe,dt:Pe,em:Pe,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Pe,figure:Pe,font:Pe,footer:Pe,form:{attrs:{action:null,name:null,"accept-charset":Im,autocomplete:["on","off"],enctype:Qm,method:Rm,novalidate:["novalidate"],target:ul}},frame:Pe,frameset:Pe,h1:Pe,h2:Pe,h3:Pe,h4:Pe,h5:Pe,h6:Pe,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Pe,hgroup:Pe,hr:Pe,html:{attrs:{manifest:null}},i:Pe,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Qm,formmethod:Rm,formnovalidate:["novalidate"],formtarget:ul,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Pe,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Pe,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Pe,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Im,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Pe,noframes:Pe,noscript:Pe,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Pe,param:{attrs:{name:null,value:null}},pre:Pe,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Pe,rt:Pe,ruby:Pe,s:Pe,samp:Pe,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Im}},section:Pe,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Pe,source:{attrs:{src:null,type:null,media:null}},span:Pe,strike:Pe,strong:Pe,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Pe,summary:Pe,sup:Pe,table:Pe,tbody:Pe,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Pe,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Pe,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Pe,time:{attrs:{datetime:null}},title:Pe,tr:Pe,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},tt:Pe,u:Pe,ul:{children:["li","script","template","ul","ol"]},var:Pe,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Pe},m2={accesskey:null,class:null,contenteditable:Yn,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Yn,autocorrect:Yn,autocapitalize:Yn,style:null,tabindex:null,title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Yn,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Yn,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Yn,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Yn,"aria-hidden":Yn,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Yn,"aria-multiselectable":Yn,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Yn,"aria-relevant":null,"aria-required":Yn,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},E6=Object.keys(Od),I_=Object.keys(m2);function ga(n,e,t=n.length){if(!e)return"";let i=e.firstChild,r=i&&i.getChild("TagName");return r?n.sliceString(r.from,Math.min(r.to,t)):""}function bd(n,e=!1){for(let t=n.parent;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function g2(n,e){let t=Od[ga(n,bd(e,!0))];return(t==null?void 0:t.children)||E6}function IO(n,e){let t=[];for(let i=e;i=bd(i);){let r=ga(n,i);if(r&&i.lastChild.name=="CloseTag")break;r&&t.indexOf(r)<0&&(e.name=="EndTag"||e.from>=i.firstChild.to)&&t.push(r)}return t}const y2=/^[:\-\.\w\u00b7-\uffff]*$/;function R_(n,e,t,i){let r=/\s*>/.test(n.sliceDoc(i,i+5))?"":">";return{from:t,to:i,options:g2(n.doc,e).map(s=>({label:s,type:"type"})).concat(IO(n.doc,e).map((s,o)=>({label:"/"+s,apply:"/"+s+r,type:"type",boost:99-o}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function Q_(n,e,t,i){let r=/\s*>/.test(n.sliceDoc(i,i+5))?"":">";return{from:t,to:i,options:IO(n.doc,e).map((s,o)=>({label:s,apply:s+r,type:"type",boost:99-o})),validFor:y2}}function T6(n,e,t){let i=[],r=0;for(let s of g2(n.doc,e))i.push({label:"<"+s,type:"type"});for(let s of IO(n.doc,e))i.push({label:"</"+s+">",type:"type",boost:99-r++});return{from:t,to:t,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function C6(n,e,t,i){let r=bd(e),s=r?Od[ga(n.doc,r)]:null,o=s&&s.attrs?Object.keys(s.attrs).concat(I_):I_;return{from:t,to:i,options:o.map(a=>({label:a,type:"property"})),validFor:y2}}function I6(n,e,t,i){var r;let s=(r=e.parent)===null||r===void 0?void 0:r.getChild("AttributeName"),o=[],a;if(s){let l=n.sliceDoc(s.from,s.to),c=m2[l];if(!c){let h=bd(e),u=h?Od[ga(n.doc,h)]:null;c=(u==null?void 0:u.attrs)&&u.attrs[l]}if(c){let h=n.sliceDoc(t,i).toLowerCase(),u='"',f='"';/^['"]/.test(h)?(a=h[0]=='"'?/^[^"]*$/:/^[^']*$/,u="",f=n.sliceDoc(i,i+1)==h[0]?"":h[0],h=h.slice(1),t++):a=/^[^\s<>='"]*$/;for(let p of c)o.push({label:p,apply:u+p+f,type:"constant"})}}return{from:t,to:i,options:o,validFor:a}}function R6(n){let{state:e,pos:t}=n,i=Nt(e).resolveInner(t),r=i.resolve(t,-1);for(let s=t,o;i==r&&(o=r.childBefore(s));){let a=o.lastChild;if(!a||!a.type.isError||a.from<a.to)break;i=r=o,s=a.from}return r.name=="TagName"?r.parent&&/CloseTag$/.test(r.parent.name)?Q_(e,r,r.from,t):R_(e,r,r.from,t):r.name=="StartTag"?R_(e,r,t,t):r.name=="StartCloseTag"||r.name=="IncompleteCloseTag"?Q_(e,r,t,t):n.explicit&&(r.name=="OpenTag"||r.name=="SelfClosingTag")||r.name=="AttributeName"?C6(e,r,r.name=="AttributeName"?r.from:t,t):r.name=="Is"||r.name=="AttributeValue"||r.name=="UnquotedAttributeValue"?I6(e,r,r.name=="Is"?t:r.from,t):n.explicit&&(i.name=="Element"||i.name=="Text"||i.name=="Document")?T6(e,r,t):null}const Py=ha.define({parser:yU.configure({props:[zc.add({Element(n){let e=/^(\s*)(<\/)?/.exec(n.textAfter);return n.node.to<=n.pos+e[0].length?n.continue():n.lineIndent(n.node.from)+(e[2]?0:n.unit)},"OpenTag CloseTag SelfClosingTag"(n){return n.column(n.node.from)+n.unit},Document(n){if(n.pos+/\s*/.exec(n.textAfter)[0].length<n.node.to)return n.continue();let e=null,t;for(let i=n.node;;){let r=i.lastChild;if(!r||r.name!="Element"||r.to!=i.to)break;e=i=r}return e&&!((t=e.lastChild)&&(t.name=="CloseTag"||t.name=="SelfClosingTag"))?n.lineIndent(e.from)+n.unit:null}}),jc.add({Element(n){let e=n.firstChild,t=n.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:t.name=="CloseTag"?t.from:n.to}}})],wrap:bU([{tag:"script",attrs(n){return!n.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(n.type)},parser:cs.parser},{tag:"style",attrs(n){return(!n.lang||n.lang=="css")&&(!n.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(n.type))},parser:Qy.parser}])}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}});function Q6(n={}){let e=Py;return n.matchClosingTags===!1&&(e=e.configure({dialect:"noMatch"})),new hc(e,[Py.data.of({autocomplete:R6}),n.autoCloseTags!==!1?P6:[],x6().support,FU().support])}const P6=Ue.inputHandler.of((n,e,t,i)=>{if(n.composing||n.state.readOnly||e!=t||i!=">"&&i!="/"||!Py.isActiveAt(n.state,e,-1))return!1;let{state:r}=n,s=r.changeByRange(o=>{var a,l,c;let{head:h}=o,u=Nt(r).resolveInner(h,-1),f;if((u.name=="TagName"||u.name=="StartTag")&&(u=u.parent),i==">"&&u.name=="OpenTag"){if(((l=(a=u.parent)===null||a===void 0?void 0:a.lastChild)===null||l===void 0?void 0:l.name)!="CloseTag"&&(f=ga(r.doc,u.parent,h)))return{range:ve.cursor(h+1),changes:{from:h,insert:`></${f}>`}}}else if(i=="/"&&u.name=="OpenTag"){let p=u.parent,d=p==null?void 0:p.parent;if(p.from==h-1&&((c=d.lastChild)===null||c===void 0?void 0:c.name)!="CloseTag"&&(f=ga(r.doc,d,h))){let m=`/${f}>`;return{range:ve.cursor(h+m.length),changes:{from:h,insert:m}}}}return{range:o}});return s.changes.empty?!1:(n.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),O2=pT({block:{open:"<!--",close:"-->"}}),b2=w9.configure({props:[jc.add(n=>{if(!(!n.is("Block")||n.is("Document")))return(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})}),zc.add({Document:()=>null}),ca.add({Document:O2})]});function RO(n){return new yi(O2,n)}const D6=RO(b2),N6=b2.configure([C9,R9,I9,Q9]),v2=RO(N6);function L6(n,e){return t=>{if(t&&n){let i=null;if(typeof n=="function"?i=n(t):i=Zu.matchLanguageName(n,t,!0),i instanceof Zu)return i.support?i.support.language.parser:cc.getSkippingParser(i.load());if(i)return i.parser}return e?e.parser:null}}function P_(n,e){return e.sliceString(n.from,n.from+50)}class Pm{constructor(e,t,i,r,s,o,a){this.node=e,this.from=t,this.to=i,this.spaceBefore=r,this.spaceAfter=s,this.type=o,this.item=a}blank(e=!0){let t=this.spaceBefore;if(this.node.name=="Blockquote")t+=">";else for(let i=this.to-this.from-t.length-this.spaceAfter.length;i>0;i--)t+=" ";return t+(e?this.spaceAfter:"")}marker(e,t){let i=this.node.name=="OrderedList"?String(+A2(this.item,e)[2]+t):"";return this.spaceBefore+i+this.type+this.spaceAfter}}function w2(n,e,t){let i=[];for(let o=n;o&&o.name!="Document";o=o.parent)(o.name=="ListItem"||o.name=="Blockquote")&&i.push(o);let r=[],s=0;for(let o=i.length-1;o>=0;o--){let a=i[o],l,c=s;if(a.name=="Blockquote"&&(l=/^[ \t]*>( ?)/.exec(e.slice(s))))s+=l[0].length,r.push(new Pm(a,c,s,"",l[1],">",null));else if(a.name=="ListItem"&&a.parent.name=="OrderedList"&&(l=/^([ \t]*)\d+([.)])([ \t]*)/.exec(P_(a,t)))){let h=l[3],u=l[0].length;h.length>=4&&(h=h.slice(0,h.length-4),u-=4),s+=u,r.push(new Pm(a.parent,c,s,l[1],h,l[2],a))}else if(a.name=="ListItem"&&a.parent.name=="BulletList"&&(l=/^([ \t]*)([-+*])([ \t]{1,4}\[[ xX]\])?([ \t]+)/.exec(P_(a,t)))){let h=l[4],u=l[0].length;h.length>4&&(h=h.slice(0,h.length-4),u-=4);let f=l[2];l[3]&&(f+=l[3].replace(/[xX]/," ")),s+=u,r.push(new Pm(a.parent,c,s,l[1],h,f,a))}}return r}function A2(n,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(n.from,n.from+10))}function Dm(n,e,t,i=0){for(let r=-1,s=n;;){if(s.name=="ListItem"){let a=A2(s,e),l=+a[2];if(r>=0){if(l!=r+1)return;t.push({from:s.from+a[1].length,to:s.from+a[0].length,insert:String(r+2+i)})}r=l}let o=s.nextSibling;if(!o)break;s=o}}const B6=({state:n,dispatch:e})=>{let t=Nt(n),{doc:i}=n,r=null,s=n.changeByRange(o=>{if(!o.empty||!v2.isActiveAt(n,o.from))return r={range:o};let a=o.from,l=i.lineAt(a),c=w2(t.resolveInner(a,-1),l.text,i);for(;c.length&&c[c.length-1].from>a-l.from;)c.pop();if(!c.length)return r={range:o};let h=c[c.length-1];if(h.to-h.spaceAfter.length>a-l.from)return r={range:o};let u=a>=h.to-h.spaceAfter.length&&!/\S/.test(l.text.slice(h.to));if(h.item&&u)if(h.node.firstChild.to>=a||l.from>0&&!/[^\s>]/.test(i.lineAt(l.from-1).text)){let b=c.length>1?c[c.length-2]:null,A,g="";b&&b.item?(A=l.from+b.from,g=b.marker(i,1)):A=l.from+(b?b.to:0);let v=[{from:A,to:a,insert:g}];return h.node.name=="OrderedList"&&Dm(h.item,i,v,-2),b&&b.node.name=="OrderedList"&&Dm(b.item,i,v),{range:ve.cursor(A+g.length),changes:v}}else{let b="";for(let A=0,g=c.length-2;A<=g;A++)b+=c[A].blank(A<g);return b+=n.lineBreak,{range:ve.cursor(a+b.length),changes:{from:l.from,insert:b}}}if(h.node.name=="Blockquote"&&u&&l.from){let b=i.lineAt(l.from-1),A=/>\s*$/.exec(b.text);if(A&&A.index==h.from){let g=n.changes([{from:b.from+A.index,to:b.to},{from:l.from+h.from,to:l.to}]);return{range:o.map(g),changes:g}}}let f=[];h.node.name=="OrderedList"&&Dm(h.item,i,f);let p=n.lineBreak,d=h.item&&h.item.from<l.from;if(!d||/^[\s\d.)\-+*>]*/.exec(l.text)[0].length>=h.to)for(let b=0,A=c.length-1;b<=A;b++)p+=b==A&&!d?c[b].marker(i,1):c[b].blank();let m=a;for(;m>l.from&&/\s/.test(l.text.charAt(m-l.from-1));)m--;return f.push({from:m,to:a,insert:p}),{range:ve.cursor(m+p.length),changes:f}});return r?!1:(e(n.update(s,{scrollIntoView:!0,userEvent:"input"})),!0)};function D_(n){return n.name=="QuoteMark"||n.name=="ListMark"}function M6(n,e){let t=n.resolveInner(e,-1),i=e;D_(t)&&(i=t.from,t=t.parent);for(let r;r=t.childBefore(i);)if(D_(r))i=r.from;else if(r.name=="OrderedList"||r.name=="BulletList")t=r.lastChild,i=t.to;else break;return t}const $6=({state:n,dispatch:e})=>{let t=Nt(n),i=null,r=n.changeByRange(s=>{let o=s.from,{doc:a}=n;if(s.empty&&v2.isActiveAt(n,s.from)){let l=a.lineAt(o),c=w2(M6(t,o),l.text,a);if(c.length){let h=c[c.length-1],u=h.to-h.spaceAfter.length+(h.spaceAfter?1:0);if(o-l.from>u&&!/\S/.test(l.text.slice(u,o-l.from)))return{range:ve.cursor(l.from+u),changes:{from:l.from+u,to:o}};if(o-l.from==u){let f=l.from+h.from;if(h.item&&h.node.from<h.item.from&&/\S/.test(l.text.slice(h.from,h.to)))return{range:s,changes:{from:f,to:l.from+h.to,insert:h.blank()}};if(f<o)return{range:ve.cursor(f),changes:{from:f,to:o}}}}}return i={range:s}});return i?!1:(e(n.update(r,{scrollIntoView:!0,userEvent:"delete"})),!0)},F6=[{key:"Enter",run:B6},{key:"Backspace",run:$6}],N_=Q6({matchClosingTags:!1});function W6(n={}){let{codeLanguages:e,defaultCodeLanguage:t,addKeymap:i=!0,base:{parser:r}=D6}=n;if(!(r instanceof yd))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let s=n.extensions?[n.extensions]:[],o=[N_.support],a;t instanceof hc?(o.push(t.support),a=t.language):t&&(a=t);let l=e||a?L6(e,a):void 0;return s.push(_9({codeParser:l,htmlParser:N_.language.parser})),i&&o.push(Oo.high(bo.of(F6))),new hc(RO(r.configure(s)),o)}const Au=()=>{const n=kn(Gn);for(let e=1;e<1e4;e++)if(!n.chapters.has(String(e)))return String(e);return 1e4},Dy=({spacelines:n=2,key:e,title:t="",group:i="",flags:r=[],content:s})=>{let o=`
`.repeat(n);return o+=t?`### ${t} {#${e}}`:`### ${e}`,r&&r.length>0&&(o+=`
`+r.map(a=>`![][flag-${a}]`).join(" ")),i&&(o+=`
[group]:<> ("${i}")`),s&&(o+=`
${s}`),o},U6=n=>(n>0||String(n)==="0")&&Math.floor(n)===+n,_2=n=>{const e=kn(Fa),t=kn(Gn);if(!U6(n))return t.chapters.get(String(e)).contentEnd;const i=Math.floor(n);for(let r=i;r>=0;r--)if(t.chapters.has(String(r)))return t.chapters.get(String(r)).contentEnd;for(let r=i;r<1e4;r++)if(t.chapters.has(String(r)))return t.chapters.get(String(r)).start-1;return t.chapters.get(String(e))},df=(n,e)=>{At.flush();const t=ut().state.doc.line(_2(n)+1).to;console.log("index",t),ut().dispatch({changes:{from:t,to:t,insert:`
`+e}}),At.flush()},kl=[],QO=Lt(!1),ya=(n,e=!0)=>{const t=ut(),i=kn(Gn),r=kn(Fa);i.chapters.has(n)||(df(n,Dy({key:n,group:r?i.chapters.get(r).group:""})),At.flush()),e&&(kl.push(r),QO.set(!0)),Ni.set(!1),t.dispatch({selection:{anchor:t.state.doc.line(i.chapters.get(n).contentEnd+1).to},effects:[Ue.scrollIntoView(t.state.doc.line(i.chapters.get(n).contentStart+1).to,{y:"start",yMargin:20})]}),t.focus()},z6=()=>{kl.length!=0&&(kl.length==1&&QO.set(!1),console.log(kl.length),ya(kl.pop(),!1))},x2="main-editor",wo=U0(10,{from:0,to:0}),Xh=Me.mark({class:"cm-mage-workinglink"}),Yh=Me.mark({class:"cm-mage-brokenlink"}),j6=Me.mark({class:"cm-mage-code"}),H6=Me.mark({class:"cm-mage-heading"}),G6=Me.mark({class:"cm-mage-booktitle"}),V6=Me.mark({class:"cm-mage-group"}),X6=Me.mark({class:"cm-mage-flag"}),Y6=Me.mark({class:"cm-mage-HTMLi"}),Z6=Me.mark({class:"cm-mage-HTMLb"}),q6=Me.mark({class:"cm-mage-HTMLu"}),Sl=n=>n.includes("(#")?n.substring(n.indexOf("(#")+2,n.lastIndexOf(")")).trim():n.substring(n.indexOf("[")+1,n.indexOf("]")).trim(),L_=n=>{let e=[];for(let{from:t,to:i}of n.visibleRanges)Nt(n.state).iterate({from:t,to:i,enter:r=>{if(r.name=="Link"){const s=n.state.doc.sliceString(r.from,r.to);if(s==="[group]")e.push(V6.range(r.from,r.to));else if(Or.properties.disableShortLinks=="true"){if(s.includes("(#")){const o=Sl(s),a=Or.chapters.has(o)?Xh:Yh;e.push(a.range(r.from,r.to))}}else{const o=s.indexOf("][");if(o!=-1){const a=Sl(s.substring(0,o+1)),l=Or.chapters.has(a)?Xh:Yh;e.push(l.range(r.from,r.from+o+1));const c=Sl(s.substring(o+1)),h=Or.chapters.has(c)?Xh:Yh;e.push(h.range(r.from+o+1,r.to))}else{const a=Sl(s),l=Or.chapters.has(a)?Xh:Yh;e.push(l.range(r.from,r.to))}}}else if(r.name=="ATXHeading1")e.push(G6.range(r.from,r.to));else if(r.name=="ATXHeading3")e.push(H6.range(r.from,r.to));else if(r.name=="InlineCode"||r.name=="FencedCode")e.push(j6.range(r.from,r.to));else if(r.name=="Image")n.state.doc.sliceString(r.from,r.to).includes("][flag-")&&e.push(X6.range(r.from,r.to));else if(r.name=="HTMLTag"){const s=n.state.doc.sliceString(r.from,r.to);s=="<i>"||s=="</i>"?e.push(Y6.range(r.from,r.to)):s=="<b>"||s=="</b>"?e.push(Z6.range(r.from,r.to)):(s=="<u>"||s=="</u>")&&e.push(q6.range(r.from,r.to))}}});return Me.set(e)},K6=Zt.fromClass(class{constructor(n){ww(this,"decorations");this.decorations=L_(n)}update(n){wo.lazySet(n.view.state.selection.main),(n.docChanged||n.viewportChanged)&&(At.set(n.view.state.doc.toString()),this.decorations=L_(n.view))}},{decorations:n=>n.decorations,eventHandlers:{mousedown:(n,e)=>{let t=n.target;if(t.classList.contains("tok-link")&&(t=t.parentElement),t.classList.contains("cm-mage-workinglink")||t.classList.contains("cm-mage-brokenlink")){const i=Sl(t.innerText.trim());return ya(i),n.preventDefault(),n.stopPropagation(),!1}}}}),k2=n=>{const e=new Ue({doc:n,parent:document.getElementById(x2),extensions:[a9,eT(),W6(),j4(),Ue.lineWrapping,oO(z3),K6,bo.of([...gC,Oh(jr({},uO[1]),{key:"Mod-Shift-z"})])]});return window.editor=e,window.$bookIndex=Or,e};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke=function(n,e){if(!n)throw Na(e)},Na=function(n){return new Error("Firebase Database ("+S2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},J6=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},PO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,h=s>>2,u=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),i.push(t[h],t[u],t[f],t[p])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(E2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):J6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const u=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||c==null||u==null)throw Error();const f=s<<2|a>>4;if(i.push(f),c!==64){const p=a<<4&240|c>>2;if(i.push(p),u!==64){const d=c<<6&192|u;i.push(d)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},T2=function(n){const e=E2(n);return PO.encodeByteArray(e,!0)},pf=function(n){return T2(n).replace(/\./g,"")},B_=function(n){try{return PO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(n){return mc(void 0,n)}function mc(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!tz(t)||(n[t]=mc(n[t],e[t]));return n}function tz(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nz(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[pf(JSON.stringify(t)),pf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C2(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(iz())}function rz(){return typeof self=="object"&&self.self===self}function sz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I2(){return S2.NODE_ADMIN===!0}function oz(){return typeof indexedDB=="object"}function az(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz="FirebaseError";class vd extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=lz,Object.setPrototypeOf(this,vd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wd.prototype.create)}}class wd{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?cz(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new vd(r,a,i)}}function cz(n,e){return n.replace(hz,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const hz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){return JSON.parse(n)}function tn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=function(n){let e={},t={},i={},r="";try{const s=n.split(".");e=gc(B_(s[0])||""),t=gc(B_(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}},uz=function(n){const e=R2(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},fz=function(n){const e=R2(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function lo(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Ny(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mf(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function Ly(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(M_(s)&&M_(o)){if(!Ly(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function M_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let u=0;u<16;u++)i[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)i[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const f=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=(f<<1|f>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let u=0;u<80;u++){u<40?u<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):u<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const f=(r<<5|r>>>27)+c+l+h+i[u]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=f}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<t;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function mz(n,e){const t=new gz(n,e);return t.subscribe.bind(t)}class gz{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");yz(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Nm),r.error===void 0&&(r.error=Nm),r.complete===void 0&&(r.complete=Nm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yz(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nm(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke=function(n,e,t,i){let r;if(i<e?r="at least "+e:i>t&&(r=t===0?"none":"no more than "+t),r){const s=n+" failed: Was called with "+i+(i===1?" argument.":" arguments.")+" Expects "+r+".";throw new Error(s)}};function Hn(n,e){return`${n} failed: ${e} argument `}function un(n,e,t,i){if(!(i&&!t)&&typeof t!="function")throw new Error(Hn(n,e)+"must be a valid function.")}function $_(n,e,t,i){if(!(i&&!t)&&(typeof t!="object"||t===null))throw new Error(Hn(n,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,ke(i<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Ad=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(n){return n&&n._delegate?n._delegate:n}class ks{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Wn;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vz(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(!!i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bz(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bz(n){return n===Fs?void 0:n}function vz(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Q2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=[];var _t;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_t||(_t={}));const D2={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},wz=_t.INFO,Az={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},_z=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Az[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _d{constructor(e){this.name=e,this._logLevel=wz,this._logHandler=_z,this._userLogHandler=null,DO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...e),this._logHandler(this,_t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...e),this._logHandler(this,_t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...e),this._logHandler(this,_t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...e),this._logHandler(this,_t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...e),this._logHandler(this,_t.ERROR,...e)}}function xz(n){DO.forEach(e=>{e.setLogLevel(n)})}function kz(n,e){for(const t of DO){let i=null;e&&e.level&&(i=D2[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(r,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i!=null?i:r.logLevel)&&n({level:_t[s].toLowerCase(),message:a,args:o,type:r.name})}}}const Sz=(n,e)=>e.some(t=>n instanceof t);let F_,W_;function Ez(){return F_||(F_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tz(){return W_||(W_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N2=new WeakMap,By=new WeakMap,L2=new WeakMap,Lm=new WeakMap,NO=new WeakMap;function Cz(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(hs(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&N2.set(t,n)}).catch(()=>{}),NO.set(e,n),e}function Iz(n){if(By.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});By.set(n,e)}let My={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return By.get(n);if(e==="objectStoreNames")return n.objectStoreNames||L2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Rz(n){My=n(My)}function Qz(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Bm(this),e,...t);return L2.set(i,e.sort?e.sort():[e]),hs(i)}:Tz().includes(n)?function(...e){return n.apply(Bm(this),e),hs(N2.get(this))}:function(...e){return hs(n.apply(Bm(this),e))}}function Pz(n){return typeof n=="function"?Qz(n):(n instanceof IDBTransaction&&Iz(n),Sz(n,Ez())?new Proxy(n,My):n)}function hs(n){if(n instanceof IDBRequest)return Cz(n);if(Lm.has(n))return Lm.get(n);const e=Pz(n);return e!==n&&(Lm.set(n,e),NO.set(e,n)),e}const Bm=n=>NO.get(n);function Dz(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=hs(o);return i&&o.addEventListener("upgradeneeded",l=>{i(hs(o.result),l.oldVersion,l.newVersion,hs(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const Nz=["get","getKey","getAll","getAllKeys","count"],Lz=["put","add","delete","clear"],Mm=new Map;function U_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=Lz.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Nz.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return Mm.set(e,s),s}Rz(n=>Oh(jr({},n),{get:(e,t,i)=>U_(e,t)||n.get(e,t,i),has:(e,t)=>!!U_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Mz(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Mz(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $y="@firebase/app",z_="0.7.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=new _d("@firebase/app"),$z="@firebase/app-compat",Fz="@firebase/analytics-compat",Wz="@firebase/analytics",Uz="@firebase/app-check-compat",zz="@firebase/app-check",jz="@firebase/auth",Hz="@firebase/auth-compat",Gz="@firebase/database",Vz="@firebase/database-compat",Xz="@firebase/functions",Yz="@firebase/functions-compat",Zz="@firebase/installations",qz="@firebase/installations-compat",Kz="@firebase/messaging",Jz="@firebase/messaging-compat",ej="@firebase/performance",tj="@firebase/performance-compat",nj="@firebase/remote-config",ij="@firebase/remote-config-compat",rj="@firebase/storage",sj="@firebase/storage-compat",oj="@firebase/firestore",aj="@firebase/firestore-compat",lj="firebase",cj="9.8.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="[DEFAULT]",hj={[$y]:"fire-core",[$z]:"fire-core-compat",[Wz]:"fire-analytics",[Fz]:"fire-analytics-compat",[zz]:"fire-app-check",[Uz]:"fire-app-check-compat",[jz]:"fire-auth",[Hz]:"fire-auth-compat",[Gz]:"fire-rtdb",[Vz]:"fire-rtdb-compat",[Xz]:"fire-fn",[Yz]:"fire-fn-compat",[Zz]:"fire-iid",[qz]:"fire-iid-compat",[Kz]:"fire-fcm",[Jz]:"fire-fcm-compat",[ej]:"fire-perf",[tj]:"fire-perf-compat",[nj]:"fire-rc",[ij]:"fire-rc-compat",[rj]:"fire-gcs",[sj]:"fire-gcs-compat",[oj]:"fire-fst",[aj]:"fire-fst-compat","fire-js":"fire-js",[lj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new Map,yc=new Map;function gf(n,e){try{n.container.addComponent(e)}catch(t){LO.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function B2(n,e){n.container.addOrOverwriteComponent(e)}function Oa(n){const e=n.name;if(yc.has(e))return LO.debug(`There were multiple attempts to register component ${e}.`),!1;yc.set(e,n);for(const t of Ss.values())gf(t,n);return!0}function M2(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function uj(n,e,t=co){M2(n,e).clearInstance(t)}function fj(){yc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},Es=new wd("app","Firebase",dj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=cj;function $2(n,e={}){typeof e!="object"&&(e={name:e});const t=Object.assign({name:co,automaticDataCollectionEnabled:!1},e),i=t.name;if(typeof i!="string"||!i)throw Es.create("bad-app-name",{appName:String(i)});const r=Ss.get(i);if(r){if(Ly(n,r.options)&&Ly(t,r.config))return r;throw Es.create("duplicate-app",{appName:i})}const s=new P2(i);for(const a of yc.values())s.addComponent(a);const o=new pj(n,t,s);return Ss.set(i,o),o}function mj(n=co){const e=Ss.get(n);if(!e)throw Es.create("no-app",{appName:n});return e}function gj(){return Array.from(Ss.values())}async function F2(n){const e=n.name;Ss.has(e)&&(Ss.delete(e),await Promise.all(n.container.getProviders().map(t=>t.delete())),n.isDeleted=!0)}function us(n,e,t){var i;let r=(i=hj[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),LO.warn(a.join(" "));return}Oa(new ks(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function W2(n,e){if(n!==null&&typeof n!="function")throw Es.create("invalid-log-argument");kz(n,e)}function U2(n){xz(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="firebase-heartbeat-database",Oj=1,Oc="firebase-heartbeat-store";let $m=null;function z2(){return $m||($m=Dz(yj,Oj,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Oc)}}}).catch(n=>{throw Es.create("storage-open",{originalErrorMessage:n.message})})),$m}async function bj(n){var e;try{return(await z2()).transaction(Oc).objectStore(Oc).get(j2(n))}catch(t){throw Es.create("storage-get",{originalErrorMessage:(e=t)===null||e===void 0?void 0:e.message})}}async function j_(n,e){var t;try{const r=(await z2()).transaction(Oc,"readwrite");return await r.objectStore(Oc).put(e,j2(n)),r.done}catch(i){throw Es.create("storage-set",{originalErrorMessage:(t=i)===null||t===void 0?void 0:t.message})}}function j2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=1024,wj=30*24*60*60*1e3;class Aj{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xj(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=H_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=wj}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=H_(),{heartbeatsToSend:t,unsentEntries:i}=_j(this._heartbeatsCache.heartbeats),r=pf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function H_(){return new Date().toISOString().substring(0,10)}function _j(n,e=vj){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),G_(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),G_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class xj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oz()?az().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await bj(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return j_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return j_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function G_(n){return pf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(n){Oa(new ks("platform-logger",e=>new Bz(e),"PRIVATE")),Oa(new ks("heartbeat",e=>new Aj(e),"PRIVATE")),us($y,z_,n),us($y,z_,"esm2017"),us("fire-js","")}kj("");var Sj=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:BO,_DEFAULT_ENTRY_NAME:co,_addComponent:gf,_addOrOverwriteComponent:B2,_apps:Ss,_clearComponents:fj,_components:yc,_getProvider:M2,_registerComponent:Oa,_removeServiceInstance:uj,deleteApp:F2,getApp:mj,getApps:gj,initializeApp:$2,onLog:W2,registerVersion:us,setLogLevel:U2,FirebaseError:vd},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,t){this._delegate=e,this.firebase=t,gf(e,new ks("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),F2(this._delegate)))}_getService(e,t=co){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=co){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){gf(this._delegate,e)}_addOrOverwriteComponent(e){B2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},V_=new wd("app-compat","Firebase",Tj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(n){const e={},t={__esModule:!0,initializeApp:s,app:r,registerVersion:us,setLogLevel:U2,onLog:W2,apps:null,SDK_VERSION:BO,INTERNAL:{registerComponent:a,removeApp:i,useAsService:l,modularAPIs:Sj}};t.default=t,Object.defineProperty(t,"apps",{get:o});function i(c){delete e[c]}function r(c){if(c=c||co,!oi(e,c))throw V_.create("no-app",{appName:c});return e[c]}r.App=n;function s(c,h={}){const u=$2(c,h);if(oi(e,u.name))return e[u.name];const f=new n(u,t);return e[u.name]=f,f}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const h=c.name,u=h.replace("-compat","");if(Oa(c)&&c.type==="PUBLIC"){const f=(p=r())=>{if(typeof p[u]!="function")throw V_.create("invalid-app-argument",{appName:h});return p[u]()};c.serviceProps!==void 0&&mc(f,c.serviceProps),t[u]=f,n.prototype[u]=function(...p){return this._getService.bind(this,h).apply(this,c.multipleInstances?p:[])}}return c.type==="PUBLIC"?t[u]:null}function l(c,h){return h==="serverAuth"?null:h}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(){const n=Cj(Ej);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:H2,extendNamespace:e,createSubscribe:mz,ErrorFactory:wd,deepExtend:mc});function e(t){mc(n,t)}return n}const Ij=H2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new _d("@firebase/app-compat"),Rj="@firebase/app-compat",Qj="0.1.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(n){us(Rj,Qj,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(rz()&&self.firebase!==void 0){X_.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&X_.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const bc=Ij;Pj();var Dj="firebase",Nj="9.8.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bc.registerVersion(Dj,Nj,"app-compat");const Y_="@firebase/database",Z_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G2="";function V2(n){G2=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),tn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:gc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return oi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=function(n){try{if(typeof window!="undefined"&&typeof window[n]!="undefined"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Lj(e)}}catch{}return new Bj},Ys=X2("localStorage"),Fy=X2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new _d("@firebase/database"),Y2=function(){let n=1;return function(){return n++}}(),Z2=function(n){const e=Oz(n),t=new pz;t.update(e);const i=t.digest();return PO.encodeByteArray(i)},Xc=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Xc.apply(null,i):typeof i=="object"?e+=tn(i):e+=i,e+=" "}return e};let eo=null,q_=!0;const q2=function(n,e){ke(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(qo.logLevel=_t.VERBOSE,eo=qo.log.bind(qo),e&&Fy.set("logging_enabled",!0)):typeof n=="function"?eo=n:(eo=null,Fy.remove("logging_enabled"))},dn=function(...n){if(q_===!0&&(q_=!1,eo===null&&Fy.get("logging_enabled")===!0&&q2(!0)),eo){const e=Xc.apply(null,n);eo(e)}},Yc=function(n){return function(...e){dn(n,...e)}},Wy=function(...n){const e="FIREBASE INTERNAL ERROR: "+Xc(...n);qo.error(e)},ir=function(...n){const e=`FIREBASE FATAL ERROR: ${Xc(...n)}`;throw qo.error(e),new Error(e)},Cn=function(...n){const e="FIREBASE WARNING: "+Xc(...n);qo.warn(e)},Mj=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Cn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xd=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$j=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Nr="[MIN_NAME]",rr="[MAX_NAME]",Ao=function(n,e){if(n===e)return 0;if(n===Nr||e===rr)return-1;if(e===Nr||n===rr)return 1;{const t=yf(n),i=yf(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},Fj=function(n,e){return n===e?0:n<e?-1:1},fl=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+tn(e))},MO=function(n){if(typeof n!="object"||n===null)return tn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=tn(e[i]),t+=":",t+=MO(n[e[i]]);return t+="}",t},K2=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const J2=function(n){ke(!xd(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let r,s,o,a,l;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));const c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const h=c.join("");let u="";for(l=0;l<64;l+=8){let f=parseInt(h.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),u=u+f}return u.toLowerCase()},Wj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Uj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function zj(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const jj=new RegExp("^-?(0*)\\d{1,10}$"),eI=-2147483648,$O=2147483647,yf=function(n){if(jj.test(n)){const e=Number(n);if(e>=eI&&e<=$O)return e}return null},La=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Cn("Exception was thrown by user callback.",t),e},Math.floor(0))}},Hj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$l=function(n,e){const t=setTimeout(n,e);return typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Cn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Cn(e)}}class Ko{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ko.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="5",tI="v",nI="s",iI="r",rI="f",sI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oI="ls",aI="p",Uy="ac",lI="websocket",cI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t,i,r,s=!1,o="",a=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ys.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ys.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Xj(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function uI(n,e,t){ke(typeof e=="string","typeof type must == string"),ke(typeof t=="object","typeof params must == object");let i;if(e===lI)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===cI)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Xj(n)&&(t.ns=n.namespace);const r=[];return mn(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this.counters_={}}incrementCounter(e,t=1){oi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return ez(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm={},Wm={};function WO(n){const e=n.toString();return Fm[e]||(Fm[e]=new Yj),Fm[e]}function Zj(n,e){const t=n.toString();return Wm[t]||(Wm[t]=e()),Wm[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&La(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="start",Kj="close",Jj="pLPCommand",eH="pRTLPCB",fI="id",dI="pw",pI="ser",tH="cb",nH="seg",iH="ts",rH="d",sH="dframe",mI=1870,gI=30,oH=mI-gI,aH=25e3,lH=3e4;class ss{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yc(e),this.stats_=WO(t),this.urlFn=l=>(this.appCheckToken&&(l[Uy]=this.appCheckToken),uI(t,cI,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new qj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lH)),$j(()=>{if(this.isClosed_)return;this.scriptTagHolder=new UO((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===K_)this.id=a,this.password=l;else if(o===Kj)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[K_]="t",i[pI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[tH]=this.scriptTagHolder.uniqueCallbackIdentifier),i[tI]=FO,this.transportSessionId&&(i[nI]=this.transportSessionId),this.lastSessionId&&(i[oI]=this.lastSessionId),this.applicationId&&(i[aI]=this.applicationId),this.appCheckToken&&(i[Uy]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&sI.test(location.hostname)&&(i[iI]=rI);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ss.forceAllow_=!0}static forceDisallow(){ss.forceDisallow_=!0}static isAvailable(){return ss.forceAllow_?!0:!ss.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!Wj()&&!Uj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=T2(t),r=K2(i,oH);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[sH]="t",i[fI]=e,i[dI]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=tn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class UO{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Y2(),window[Jj+this.uniqueCallbackIdentifier]=e,window[eH+this.uniqueCallbackIdentifier]=t,this.myIFrame=UO.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){dn("frame writing exception"),a.stack&&dn(a.stack),dn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[fI]=this.myID,e[dI]=this.myPW,e[pI]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gI+i.length<=mI;){const o=this.pendingSegs.shift();i=i+"&"+nH+r+"="+o.seg+"&"+iH+r+"="+o.ts+"&"+rH+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(aH)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH=16384,hH=45e3;let Of=null;typeof MozWebSocket!="undefined"?Of=MozWebSocket:typeof WebSocket!="undefined"&&(Of=WebSocket);class mi{constructor(e,t,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yc(this.connId),this.stats_=WO(t),this.connURL=mi.connectionURL_(t,o,a,r,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,r,s){const o={};return o[tI]=FO,typeof location!="undefined"&&location.hostname&&sI.test(location.hostname)&&(o[iI]=rI),t&&(o[nI]=t),i&&(o[oI]=i),r&&(o[Uy]=r),s&&(o[aI]=s),uI(e,lI,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ys.set("previous_websocket_failure",!0);try{let i;I2(),this.mySock=new Of(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){mi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Of!==null&&!mi.forceDisallow_}static previouslyFailed(){return Ys.isInMemoryStorage||Ys.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ys.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=gc(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ke(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=K2(t,cH);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(hH))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}mi.responsesRequiredToBeHealthy=2;mi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ss,mi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=mi&&mi.isAvailable();let i=t&&!mi.previouslyFailed();if(e.webSocketOnly&&(t||Cn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[mi];else{const r=this.transports_=[];for(const s of ba.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);ba.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ba.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=6e4,fH=5e3,dH=10*1024,pH=100*1024,Um="t",J_="d",mH="s",ex="r",gH="e",tx="o",nx="a",ix="n",rx="p",yH="h";class OH{constructor(e,t,i,r,s,o,a,l,c,h){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yc("c:"+this.id+":"),this.transportManager_=new ba(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=$l(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pH?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>dH?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Um in e){const t=e[Um];t===nx?this.upgradeIfSecondaryHealthy_():t===ex?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===tx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=fl("t",e),i=fl("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:rx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:nx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ix,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=fl("t",e),i=fl("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=fl(Um,e);if(J_ in e){const i=e[J_];if(t===yH)this.onHandshake_(i);else if(t===ix){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===mH?this.onConnectionShutdown_(i):t===ex?this.onReset_(i):t===gH?Wy("Server Error: "+i):t===tx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Wy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),FO!==i&&Cn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),$l(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uH))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$l(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(fH))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:rx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ys.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.allowedEvents_=e,this.listeners_={},ke(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){ke(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends OI{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!C2()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new bf}getInitialEvent(e){return ke(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=32,ox=768;class bt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ft(){return new bt("")}function it(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ts(n){return n.pieces_.length-n.pieceNum_}function xt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bt(n.pieces_,e)}function zO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function bH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function vc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bt(e,0)}function Wt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof bt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new bt(t,0)}function rt(n){return n.pieceNum_>=n.pieces_.length}function Ln(n,e){const t=it(n),i=it(e);if(t===null)return e;if(t===i)return Ln(xt(n),xt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function vH(n,e){const t=vc(n,0),i=vc(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=Ao(t[r],i[r]);if(s!==0)return s}return t.length===i.length?0:t.length<i.length?-1:1}function jO(n,e){if(Ts(n)!==Ts(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function bi(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ts(n)>Ts(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class wH{constructor(e,t){this.errorPrefix_=t,this.parts_=vc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Ad(this.parts_[i]);vI(this)}}function AH(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Ad(e),vI(n)}function _H(n){const e=n.parts_.pop();n.byteLength_-=Ad(e),n.parts_.length>0&&(n.byteLength_-=1)}function vI(n){if(n.byteLength_>ox)throw new Error(n.errorPrefix_+"has a key path longer than "+ox+" bytes ("+n.byteLength_+").");if(n.parts_.length>sx)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+sx+") or object contains a cycle "+Ws(n))}function Ws(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO extends OI{constructor(){super(["visible"]);let e,t;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(t="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new HO}getInitialEvent(e){return ke(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=1e3,xH=60*5*1e3,kH=3*1e3,ax=30*1e3,SH=1.3,EH=3e4,TH="server_kill",lx=3;class Tr extends yI{constructor(e,t,i,r,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Tr.nextPersistentConnectionId_++,this.log_=Yc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dl,this.maxReconnectDelay_=xH,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!I2())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");HO.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&bf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const r=++this.requestNumber_,s={r,a:e,b:t};this.log_(tn(s)),ke(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const t=new Wn,i={p:e._path.toString(),q:e._queryObject},r={action:"g",request:i,onComplete:o=>{const a=o.d;o.s==="ok"?(this.onDataUpdate_(i.p,a,!1,null),t.resolve(a)):t.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const o=this.outstandingGets_[s];o===void 0||r!==o||(delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),t.reject(new Error("Client is offline.")))},kH),this.connected_&&this.sendGet_(s),t.promise}listen(e,t,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ke(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ke(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Tr.warnOnListenWarnings_(l,t),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&oi(e,"w")){const i=lo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();Cn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||fz(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ax)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=uz(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),ke(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,t)}sendUnlisten_(e,t,i,r){this.log_("Unlisten on "+e+" for "+t);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,r){const s={p:t,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,t,i,r){this.putInternal("p",e,t,i,r)}merge(e,t,i,r){this.putInternal("m",e,t,i,r)}putInternal(e,t,i,r,s){this.initConnection_();const o={p:t,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+tn(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Wy("Unrecognized action received from server: "+tn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ke(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=dl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>EH&&(this.reconnectDelay_=dl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*SH)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Tr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(u){ke(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(u)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[u,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=u&&u.accessToken,this.appCheckToken_=f&&f.token,a=new OH(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,p=>{Cn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(TH)},s))}catch(u){this.log_("Failed to get token: "+u),o||(this.repoInfo_.nodeAdmin&&Cn(u),l())}}}interrupt(e){dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ny(this.interruptReasons_)&&(this.reconnectDelay_=dl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(s=>MO(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const i=new bt(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(t),s.delete(t),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,t){dn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=lx&&(this.reconnectDelay_=ax,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){dn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=lx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+G2.replace(/\./g,"-")]=1,C2()?e["framework.cordova"]=1:sz()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=bf.getInstance().currentlyOnline();return Ny(this.interruptReasons_)&&e}}Tr.nextPersistentConnectionId_=0;Tr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new at(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new at(Nr,e),r=new at(Nr,t);return this.compare(i,r)!==0}minPost(){return at.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh;class wI extends kd{static get __EMPTY_NODE(){return Zh}static set __EMPTY_NODE(e){Zh=e}compare(e,t){return Ao(e.name,t.name)}isDefinedOn(e){throw Na("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return at.MIN}maxPost(){return new at(rr,Zh)}makePost(e,t){return ke(typeof e=="string","KeyIndex indexValue must always be a string."),new at(e,Zh)}toString(){return".key"}}const tr=new wI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class fn{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i!=null?i:fn.RED,this.left=r!=null?r:zn.EMPTY_NODE,this.right=s!=null?s:zn.EMPTY_NODE}copy(e,t,i,r,s){return new fn(e!=null?e:this.key,t!=null?t:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return zn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,r;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return zn.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}fn.RED=!0;fn.BLACK=!1;class CH{copy(e,t,i,r,s){return this}insert(e,t,i){return new fn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class zn{constructor(e,t=zn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new zn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fn.BLACK,null,null))}remove(e){return new zn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new qh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new qh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new qh(this.root_,null,this.comparator_,!0,e)}}zn.EMPTY_NODE=new CH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(n,e){return Ao(n.name,e.name)}function GO(n,e){return Ao(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zy;function RH(n){zy=n}const AI=function(n){return typeof n=="number"?"number:"+J2(n):"string:"+n},_I=function(n){if(n.isLeafNode()){const e=n.val();ke(typeof e=="string"||typeof e=="number"||typeof e=="object"&&oi(e,".sv"),"Priority must be a string or number.")}else ke(n===zy||n.isEmpty(),"priority of unexpected type.");ke(n===zy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cx;class hn{constructor(e,t=hn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ke(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_I(this.priorityNode_)}static set __childrenNodeConstructor(e){cx=e}static get __childrenNodeConstructor(){return cx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new hn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return rt(e)?this:it(e)===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:hn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=it(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ke(i!==".priority"||Ts(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,hn.__childrenNodeConstructor.EMPTY_NODE.updateChild(xt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+AI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=J2(this.value_):e+=this.value_,this.lazyHash_=Z2(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===hn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof hn.__childrenNodeConstructor?-1:(ke(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,r=hn.VALUE_TYPE_ORDER.indexOf(t),s=hn.VALUE_TYPE_ORDER.indexOf(i);return ke(r>=0,"Unknown leaf type: "+t),ke(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}hn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xI,kI;function QH(n){xI=n}function PH(n){kI=n}class DH extends kd{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?Ao(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return at.MIN}maxPost(){return new at(rr,new hn("[PRIORITY-POST]",kI))}makePost(e,t){const i=xI(e);return new at(t,new hn("[PRIORITY-POST]",i))}toString(){return".priority"}}const It=new DH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=Math.log(2);class LH{constructor(e){const t=s=>parseInt(Math.log(s)/NH,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const vf=function(n,e,t,i){n.sort(e);const r=function(l,c){const h=c-l;let u,f;if(h===0)return null;if(h===1)return u=n[l],f=t?t(u):u,new fn(f,u.node,fn.BLACK,null,null);{const p=parseInt(h/2,10)+l,d=r(l,p),m=r(p+1,c);return u=n[p],f=t?t(u):u,new fn(f,u.node,fn.BLACK,d,m)}},s=function(l){let c=null,h=null,u=n.length;const f=function(d,m){const b=u-d,A=u;u-=d;const g=r(b+1,A),v=n[b],O=t?t(v):v;p(new fn(O,v.node,m,null,g))},p=function(d){c?(c.left=d,c=d):(h=d,c=d)};for(let d=0;d<l.count;++d){const m=l.nextBitIsOne(),b=Math.pow(2,l.count-(d+1));m?f(b,fn.BLACK):(f(b,fn.BLACK),f(b,fn.RED))}return h},o=new LH(n.length),a=s(o);return new zn(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zm;const Lo={};class xr{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return ke(Lo&&It,"ChildrenNode.ts has not been loaded"),zm=zm||new xr({".priority":Lo},{".priority":It}),zm}get(e){const t=lo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof zn?t:null}hasIndex(e){return oi(this.indexSet_,e.toString())}addIndex(e,t){ke(e!==tr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(at.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=vf(i,e.getCompare()):a=Lo;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new xr(h,c)}addToIndexes(e,t){const i=mf(this.indexes_,(r,s)=>{const o=lo(this.indexSet_,s);if(ke(o,"Missing index implementation for "+s),r===Lo)if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(at.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),vf(a,o.getCompare())}else return Lo;else{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new at(e.name,a))),l.insert(e,e.node)}});return new xr(i,this.indexSet_)}removeFromIndexes(e,t){const i=mf(this.indexes_,r=>{if(r===Lo)return r;{const s=t.get(e.name);return s?r.remove(new at(e.name,s)):r}});return new xr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl;class qe{constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_I(this.priorityNode_),this.children_.isEmpty()&&ke(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pl||(pl=new qe(new zn(GO),null,xr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pl}updatePriority(e){return this.children_.isEmpty()?this:new qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?pl:t}}getChild(e){const t=it(e);return t===null?this:this.getImmediateChild(t).getChild(xt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ke(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new at(e,t);let r,s;t.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?pl:this.priorityNode_;return new qe(r,o,s)}}updateChild(e,t){const i=it(e);if(i===null)return t;{ke(it(e)!==".priority"||Ts(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(xt(e),t);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,r=0,s=!0;if(this.forEachChild(It,(o,a)=>{t[o]=a.val(e),i++,s&&qe.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+AI(this.getPriority().val())+":"),this.forEachChild(It,(t,i)=>{const r=i.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":Z2(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new at(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new at(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new at(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,at.Wrap);let s=r.peek();for(;s!=null&&t.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,at.Wrap);let s=r.peek();for(;s!=null&&t.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Zc?-1:0}withIndex(e){if(e===tr||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new qe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===tr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(It),r=t.getIterator(It);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===tr?null:this.indexMap_.get(e.toString())}}qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class BH extends qe{constructor(){super(new zn(GO),qe.EMPTY_NODE,xr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qe.EMPTY_NODE}isEmpty(){return!1}}const Zc=new BH;Object.defineProperties(at,{MIN:{value:new at(Nr,qe.EMPTY_NODE)},MAX:{value:new at(rr,Zc)}});wI.__EMPTY_NODE=qe.EMPTY_NODE;hn.__childrenNodeConstructor=qe;RH(Zc);PH(Zc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=!0;function Ht(n,e=null){if(n===null)return qe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ke(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new hn(t,Ht(e))}if(!(n instanceof Array)&&MH){const t=[];let i=!1;if(mn(n,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ht(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new at(o,l)))}}),t.length===0)return qe.EMPTY_NODE;const s=vf(t,IH,o=>o.name,GO);if(i){const o=vf(t,It.getCompare());return new qe(s,Ht(e),new xr({".priority":o},{".priority":It}))}else return new qe(s,Ht(e),xr.Default)}else{let t=qe.EMPTY_NODE;return mn(n,(i,r)=>{if(oi(n,i)&&i.substring(0,1)!=="."){const s=Ht(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Ht(e))}}QH(Ht);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO extends kd{constructor(e){super(),this.indexPath_=e,ke(!rt(e)&&it(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?Ao(e.name,t.name):s}makePost(e,t){const i=Ht(e),r=qe.EMPTY_NODE.updateChild(this.indexPath_,i);return new at(t,r)}maxPost(){const e=qe.EMPTY_NODE.updateChild(this.indexPath_,Zc);return new at(rr,e)}toString(){return vc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H extends kd{compare(e,t){const i=e.node.compareTo(t.node);return i===0?Ao(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return at.MIN}maxPost(){return at.MAX}makePost(e,t){const i=Ht(e);return new at(t,i)}toString(){return".value"}}const XO=new $H;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jy="-",SI="z",EI=786,FH=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let r;const s=new Array(8);for(r=7;r>=0;r--)s[r]=va.charAt(t%64),t=Math.floor(t/64);ke(t===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=va.charAt(e[r]);return ke(o.length===20,"nextPushId: Length should be 20."),o}}(),hx=function(n){if(n===""+$O)return jy;const e=yf(n);if(e!=null)return""+(e+1);const t=new Array(n.length);for(let o=0;o<t.length;o++)t[o]=n.charAt(o);if(t.length<EI)return t.push(jy),t.join("");let i=t.length-1;for(;i>=0&&t[i]===SI;)i--;if(i===-1)return rr;const r=t[i],s=va.charAt(va.indexOf(r)+1);return t[i]=s,t.slice(0,i+1).join("")},ux=function(n){if(n===""+eI)return Nr;const e=yf(n);if(e!=null)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return t[t.length-1]===jy?t.length===1?""+$O:(delete t[t.length-1],t.join("")):(t[t.length-1]=va.charAt(va.indexOf(t[t.length-1])-1),t.join("")+SI.repeat(EI-t.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(n){return{type:"value",snapshotNode:n}}function wa(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function wc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ac(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function WH(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){ke(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(wc(t,a)):ke(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(wa(t,i)):o.trackChildChange(Ac(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(It,(r,s)=>{t.hasChild(r)||i.trackChildChange(wc(r,s))}),t.isLeafNode()||t.forEachChild(It,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(Ac(r,s,o))}else i.trackChildChange(wa(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this.indexedFilter_=new YO(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_c.getStartPost_(e),this.endPost_=_c.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,o){return this.matches(new at(t,i))||(i=qe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=qe.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(qe.EMPTY_NODE);const s=this;return t.forEachChild(It,(o,a)=>{s.matches(new at(o,a))||(r=r.updateImmediateChild(o,qe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e){this.rangedFilter_=new _c(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new at(t,i))||(i=qe.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=qe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=qe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:l=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,l)r=r.updateImmediateChild(a.name,a.node),o++;else break}}else{r=t.withIndex(this.index_),r=r.updatePriority(qe.EMPTY_NODE);let s,o,a,l;if(this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const u=this.index_.getCompare();a=(f,p)=>u(p,f)}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,h=!1;for(;l.hasNext();){const u=l.getNext();!h&&a(s,u)<=0&&(h=!0),h&&c<this.limit_&&a(u,o)<=0?c++:r=r.updateImmediateChild(u.name,qe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){const u=this.index_.getCompare();o=(f,p)=>u(p,f)}else o=this.index_.getCompare();const a=e;ke(a.numChildren()===this.limit_,"");const l=new at(t,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(t)){const u=a.getImmediateChild(t);let f=r.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,l);if(h&&!i.isEmpty()&&p>=0)return s!=null&&s.trackChildChange(Ac(t,i,u)),a.updateImmediateChild(t,i);{s!=null&&s.trackChildChange(wc(t,u));const m=a.updateImmediateChild(t,qe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(wa(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}else return i.isEmpty()?e:h&&o(c,l)>=0?(s!=null&&(s.trackChildChange(wc(c.name,c.node)),s.trackChildChange(wa(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(c.name,qe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=It}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ke(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ke(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nr}hasEnd(){return this.endSet_}getIndexEndValue(){return ke(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ke(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ke(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===It}copy(){const e=new Sd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zH(n){return n.loadsAllData()?new YO(n.getIndex()):n.hasLimit()?new UH(n):new _c(n)}function jH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function HH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function Hy(n,e,t){const i=n.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,t!=null?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function GH(n,e,t){let i;if(n.index_===tr)typeof e=="string"&&(e=hx(e)),i=Hy(n,e,t);else{let r;t==null?r=rr:r=hx(t),i=Hy(n,e,r)}return i.startAfterSet_=!0,i}function Gy(n,e,t){const i=n.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,t!==void 0?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function VH(n,e,t){let i,r;return n.index_===tr?(typeof e=="string"&&(e=ux(e)),r=Gy(n,e,t)):(t==null?i=Nr:i=ux(t),r=Gy(n,e,i)),r.endBeforeSet_=!0,r}function Ed(n,e){const t=n.copy();return t.index_=e,t}function fx(n){const e={};if(n.isDefault())return e;let t;return n.index_===It?t="$priority":n.index_===XO?t="$value":n.index_===tr?t="$key":(ke(n.index_ instanceof VO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=tn(t),n.startSet_&&(e.startAt=tn(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+tn(n.indexStartName_))),n.endSet_&&(e.endAt=tn(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+tn(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function dx(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==It&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends yI{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Yc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ke(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=wf.getListenId_(e,i),a={};this.listens_[o]=a;const l=fx(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let u=h;if(c===404&&(u=null,c=null),c===null&&this.onDataUpdate_(s,u,!1,i),lo(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",r(f,null)}})}unlisten(e,t){const i=wf.getListenId_(e,t);delete this.listens_[i]}get(e){const t=fx(e._queryParams),i=e._path.toString(),r=new Wn;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+dz(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=gc(a.responseText)}catch{Cn("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Cn("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(){this.rootNode_=qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(){return{value:null,children:new Map}}function Ba(n,e,t){if(rt(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=it(e);n.children.has(i)||n.children.set(i,Af());const r=n.children.get(i);e=xt(e),Ba(r,e,t)}}function Vy(n,e){if(rt(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(It,(i,r)=>{Ba(n,new bt(i),r)}),Vy(n,e)}}else if(n.children.size>0){const t=it(e);return e=xt(e),n.children.has(t)&&Vy(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function Xy(n,e,t){n.value!==null?t(e,n.value):YH(n,(i,r)=>{const s=new bt(e.toString()+"/"+i);Xy(r,s,t)})}function YH(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&mn(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=10*1e3,qH=30*1e3,KH=5*60*1e3;class JH{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ZH(e);const i=px+(qH-px)*Math.random();$l(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;mn(e,(r,s)=>{s>0&&oi(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),$l(this.reportStats_.bind(this),Math.floor(Math.random()*2*KH))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Di;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Di||(Di={}));function ZO(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function qO(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function KO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Di.ACK_USER_WRITE,this.source=ZO()}operationForChild(e){if(rt(this.path)){if(this.affectedTree.value!=null)return ke(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bt(e));return new _f(ft(),t,this.revert)}}else return ke(it(this.path)===e,"operationForChild called for unrelated child."),new _f(xt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t){this.source=e,this.path=t,this.type=Di.LISTEN_COMPLETE}operationForChild(e){return rt(this.path)?new xc(this.source,ft()):new xc(this.source,xt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Di.OVERWRITE}operationForChild(e){return rt(this.path)?new ho(this.source,ft(),this.snap.getImmediateChild(e)):new ho(this.source,xt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Di.MERGE}operationForChild(e){if(rt(this.path)){const t=this.children.subtree(new bt(e));return t.isEmpty()?null:t.value?new ho(this.source,ft(),t.value):new Aa(this.source,ft(),t)}else return ke(it(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Aa(this.source,xt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rt(e))return this.isFullyInitialized()&&!this.filtered_;const t=it(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tG(n,e,t,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(WH(o.childName,o.snapshotNode))}),ml(n,r,"child_removed",e,i,t),ml(n,r,"child_added",e,i,t),ml(n,r,"child_moved",s,i,t),ml(n,r,"child_changed",e,i,t),ml(n,r,"value",e,i,t),r}function ml(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>iG(n,a,l)),o.forEach(a=>{const l=nG(n,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function nG(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function iG(n,e,t){if(e.childName==null||t.childName==null)throw Na("Should only compare child_ events.");const i=new at(e.childName,e.snapshotNode),r=new at(t.childName,t.snapshotNode);return n.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(n,e){return{eventCache:n,serverCache:e}}function Fl(n,e,t,i){return Td(new Cs(e,t,i),n.serverCache)}function CI(n,e,t,i){return Td(n.eventCache,new Cs(e,t,i))}function xf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function uo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm;const rG=()=>(jm||(jm=new zn(Fj)),jm);class Tt{constructor(e,t=rG()){this.value=e,this.children=t}static fromObject(e){let t=new Tt(null);return mn(e,(i,r)=>{t=t.set(new bt(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ft(),value:this.value};if(rt(e))return null;{const i=it(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(xt(e),t);return s!=null?{path:Wt(new bt(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rt(e))return this;{const t=it(e),i=this.children.get(t);return i!==null?i.subtree(xt(e)):new Tt(null)}}set(e,t){if(rt(e))return new Tt(t,this.children);{const i=it(e),s=(this.children.get(i)||new Tt(null)).set(xt(e),t),o=this.children.insert(i,s);return new Tt(this.value,o)}}remove(e){if(rt(e))return this.children.isEmpty()?new Tt(null):new Tt(null,this.children);{const t=it(e),i=this.children.get(t);if(i){const r=i.remove(xt(e));let s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new Tt(null):new Tt(this.value,s)}else return this}}get(e){if(rt(e))return this.value;{const t=it(e),i=this.children.get(t);return i?i.get(xt(e)):null}}setTree(e,t){if(rt(e))return t;{const i=it(e),s=(this.children.get(i)||new Tt(null)).setTree(xt(e),t);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new Tt(this.value,o)}}fold(e){return this.fold_(ft(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Wt(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ft(),t)}findOnPath_(e,t,i){const r=this.value?i(t,this.value):!1;if(r)return r;if(rt(e))return null;{const s=it(e),o=this.children.get(s);return o?o.findOnPath_(xt(e),Wt(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ft(),t)}foreachOnPath_(e,t,i){if(rt(e))return this;{this.value&&i(t,this.value);const r=it(e),s=this.children.get(r);return s?s.foreachOnPath_(xt(e),Wt(t,r),i):new Tt(null)}}foreach(e){this.foreach_(ft(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Wt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.writeTree_=e}static empty(){return new Bi(new Tt(null))}}function Wl(n,e,t){if(rt(e))return new Bi(new Tt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=Ln(r,e);return s=s.updateChild(o,t),new Bi(n.writeTree_.set(r,s))}else{const r=new Tt(t),s=n.writeTree_.setTree(e,r);return new Bi(s)}}}function Yy(n,e,t){let i=n;return mn(t,(r,s)=>{i=Wl(i,Wt(e,r),s)}),i}function mx(n,e){if(rt(e))return Bi.empty();{const t=n.writeTree_.setTree(e,new Tt(null));return new Bi(t)}}function Zy(n,e){return _o(n,e)!=null}function _o(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Ln(t.path,e)):null}function gx(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(It,(i,r)=>{e.push(new at(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new at(i,r.value))}),e}function fs(n,e){if(rt(e))return n;{const t=_o(n,e);return t!=null?new Bi(new Tt(t)):new Bi(n.writeTree_.subtree(e))}}function qy(n){return n.writeTree_.isEmpty()}function _a(n,e){return II(ft(),n.writeTree_,e)}function II(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(ke(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=II(Wt(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Wt(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(n,e){return DI(e,n)}function sG(n,e,t,i,r){ke(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Wl(n.visibleWrites,e,t)),n.lastWriteId=i}function oG(n,e,t,i){ke(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=Yy(n.visibleWrites,e,t),n.lastWriteId=i}function aG(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function lG(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);ke(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&cG(a,i.path)?r=!1:bi(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return hG(n),!0;if(i.snap)n.visibleWrites=mx(n.visibleWrites,i.path);else{const a=i.children;mn(a,l=>{n.visibleWrites=mx(n.visibleWrites,Wt(i.path,l))})}return!0}else return!1}function cG(n,e){if(n.snap)return bi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&bi(Wt(n.path,t),e))return!0;return!1}function hG(n){n.visibleWrites=RI(n.allWrites,uG,ft()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function uG(n){return n.visible}function RI(n,e,t){let i=Bi.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)bi(t,o)?(a=Ln(t,o),i=Wl(i,a,s.snap)):bi(o,t)&&(a=Ln(o,t),i=Wl(i,ft(),s.snap.getChild(a)));else if(s.children){if(bi(t,o))a=Ln(t,o),i=Yy(i,a,s.children);else if(bi(o,t))if(a=Ln(o,t),rt(a))i=Yy(i,ft(),s.children);else{const l=lo(s.children,it(a));if(l){const c=l.getChild(xt(a));i=Wl(i,ft(),c)}}}else throw Na("WriteRecord should have .snap or .children")}}return i}function QI(n,e,t,i,r){if(!i&&!r){const s=_o(n.visibleWrites,e);if(s!=null)return s;{const o=fs(n.visibleWrites,e);if(qy(o))return t;if(t==null&&!Zy(o,ft()))return null;{const a=t||qe.EMPTY_NODE;return _a(o,a)}}}else{const s=fs(n.visibleWrites,e);if(!r&&qy(s))return t;if(!r&&t==null&&!Zy(s,ft()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(bi(c.path,e)||bi(e,c.path))},a=RI(n.allWrites,o,e),l=t||qe.EMPTY_NODE;return _a(a,l)}}}function fG(n,e,t){let i=qe.EMPTY_NODE;const r=_o(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(It,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=fs(n.visibleWrites,e);return t.forEachChild(It,(o,a)=>{const l=_a(fs(s,new bt(o)),a);i=i.updateImmediateChild(o,l)}),gx(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=fs(n.visibleWrites,e);return gx(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function dG(n,e,t,i,r){ke(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Wt(e,t);if(Zy(n.visibleWrites,s))return null;{const o=fs(n.visibleWrites,s);return qy(o)?r.getChild(t):_a(o,r.getChild(t))}}function pG(n,e,t,i){const r=Wt(e,t),s=_o(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){const o=fs(n.visibleWrites,r);return _a(o,i.getNode().getImmediateChild(t))}else return null}function mG(n,e){return _o(n.visibleWrites,e)}function gG(n,e,t,i,r,s,o){let a;const l=fs(n.visibleWrites,e),c=_o(l,ft());if(c!=null)a=c;else if(t!=null)a=_a(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],u=o.getCompare(),f=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let p=f.getNext();for(;p&&h.length<r;)u(p,i)!==0&&h.push(p),p=f.getNext();return h}else return[]}function yG(){return{visibleWrites:Bi.empty(),allWrites:[],lastWriteId:-1}}function kf(n,e,t,i){return QI(n.writeTree,n.treePath,e,t,i)}function JO(n,e){return fG(n.writeTree,n.treePath,e)}function yx(n,e,t,i){return dG(n.writeTree,n.treePath,e,t,i)}function Sf(n,e){return mG(n.writeTree,Wt(n.treePath,e))}function OG(n,e,t,i,r,s){return gG(n.writeTree,n.treePath,e,t,i,r,s)}function eb(n,e,t){return pG(n.writeTree,n.treePath,e,t)}function PI(n,e){return DI(Wt(n.treePath,e),n.writeTree)}function DI(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ke(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ke(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,Ac(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,wc(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,wa(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,Ac(i,e.snapshotNode,r.oldSnap));else throw Na("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const NI=new vG;class tb{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Cs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eb(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:uo(this.viewCache_),s=OG(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wG(n){return{filter:n}}function AG(n,e){ke(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ke(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function _G(n,e,t,i,r){const s=new bG;let o,a;if(t.type===Di.OVERWRITE){const c=t;c.source.fromUser?o=Ky(n,e,c.path,c.snap,i,r,s):(ke(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!rt(c.path),o=Ef(n,e,c.path,c.snap,i,r,a,s))}else if(t.type===Di.MERGE){const c=t;c.source.fromUser?o=kG(n,e,c.path,c.children,i,r,s):(ke(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Jy(n,e,c.path,c.children,i,r,a,s))}else if(t.type===Di.ACK_USER_WRITE){const c=t;c.revert?o=TG(n,e,c.path,i,r,s):o=SG(n,e,c.path,c.affectedTree,i,r,s)}else if(t.type===Di.LISTEN_COMPLETE)o=EG(n,e,t.path,i,s);else throw Na("Unknown operation type: "+t.type);const l=s.getChanges();return xG(e,o,l),{viewCache:o,changes:l}}function xG(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=xf(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(TI(xf(e)))}}function LI(n,e,t,i,r,s){const o=e.eventCache;if(Sf(i,t)!=null)return e;{let a,l;if(rt(t))if(ke(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=uo(e),h=c instanceof qe?c:qe.EMPTY_NODE,u=JO(i,h);a=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const c=kf(i,uo(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=it(t);if(c===".priority"){ke(Ts(t)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const u=yx(i,t,h,l);u!=null?a=n.filter.updatePriority(h,u):a=o.getNode()}else{const h=xt(t);let u;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=yx(i,t,o.getNode(),l);f!=null?u=o.getNode().getImmediateChild(c).updateChild(h,f):u=o.getNode().getImmediateChild(c)}else u=eb(i,c,e.serverCache);u!=null?a=n.filter.updateChild(o.getNode(),c,u,h,r,s):a=o.getNode()}}return Fl(e,a,o.isFullyInitialized()||rt(t),n.filter.filtersNodes())}}function Ef(n,e,t,i,r,s,o,a){const l=e.serverCache;let c;const h=o?n.filter:n.filter.getIndexedFilter();if(rt(t))c=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(t,i);c=h.updateFullNode(l.getNode(),p,null)}else{const p=it(t);if(!l.isCompleteForPath(t)&&Ts(t)>1)return e;const d=xt(t),b=l.getNode().getImmediateChild(p).updateChild(d,i);p===".priority"?c=h.updatePriority(l.getNode(),b):c=h.updateChild(l.getNode(),p,b,d,NI,null)}const u=CI(e,c,l.isFullyInitialized()||rt(t),h.filtersNodes()),f=new tb(r,u,s);return LI(n,u,t,r,f,a)}function Ky(n,e,t,i,r,s,o){const a=e.eventCache;let l,c;const h=new tb(r,e,s);if(rt(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Fl(e,c,!0,n.filter.filtersNodes());else{const u=it(t);if(u===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),i),l=Fl(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=xt(t),p=a.getNode().getImmediateChild(u);let d;if(rt(f))d=i;else{const m=h.getCompleteChild(u);m!=null?zO(f)===".priority"&&m.getChild(bI(f)).isEmpty()?d=m:d=m.updateChild(f,i):d=qe.EMPTY_NODE}if(p.equals(d))l=e;else{const m=n.filter.updateChild(a.getNode(),u,d,f,h,o);l=Fl(e,m,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function Ox(n,e){return n.eventCache.isCompleteForChild(e)}function kG(n,e,t,i,r,s,o){let a=e;return i.foreach((l,c)=>{const h=Wt(t,l);Ox(e,it(h))&&(a=Ky(n,a,h,c,r,s,o))}),i.foreach((l,c)=>{const h=Wt(t,l);Ox(e,it(h))||(a=Ky(n,a,h,c,r,s,o))}),a}function bx(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Jy(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;rt(t)?c=i:c=new Tt(null).setTree(t,i);const h=e.serverCache.getNode();return c.children.inorderTraversal((u,f)=>{if(h.hasChild(u)){const p=e.serverCache.getNode().getImmediateChild(u),d=bx(n,p,f);l=Ef(n,l,new bt(u),d,r,s,o,a)}}),c.children.inorderTraversal((u,f)=>{const p=!e.serverCache.isCompleteForChild(u)&&f.value===void 0;if(!h.hasChild(u)&&!p){const d=e.serverCache.getNode().getImmediateChild(u),m=bx(n,d,f);l=Ef(n,l,new bt(u),m,r,s,o,a)}}),l}function SG(n,e,t,i,r,s,o){if(Sf(r,t)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(rt(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Ef(n,e,t,l.getNode().getChild(t),r,s,a,o);if(rt(t)){let c=new Tt(null);return l.getNode().forEachChild(tr,(h,u)=>{c=c.set(new bt(h),u)}),Jy(n,e,t,c,r,s,a,o)}else return e}else{let c=new Tt(null);return i.foreach((h,u)=>{const f=Wt(t,h);l.isCompleteForPath(f)&&(c=c.set(h,l.getNode().getChild(f)))}),Jy(n,e,t,c,r,s,a,o)}}function EG(n,e,t,i,r){const s=e.serverCache,o=CI(e,s.getNode(),s.isFullyInitialized()||rt(t),s.isFiltered());return LI(n,o,t,i,NI,r)}function TG(n,e,t,i,r,s){let o;if(Sf(i,t)!=null)return e;{const a=new tb(i,e,r),l=e.eventCache.getNode();let c;if(rt(t)||it(t)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=kf(i,uo(e));else{const u=e.serverCache.getNode();ke(u instanceof qe,"serverChildren would be complete if leaf node"),h=JO(i,u)}h=h,c=n.filter.updateFullNode(l,h,s)}else{const h=it(t);let u=eb(i,h,e.serverCache);u==null&&e.serverCache.isCompleteForChild(h)&&(u=l.getImmediateChild(h)),u!=null?c=n.filter.updateChild(l,h,u,xt(t),a,s):e.eventCache.getNode().hasChild(h)?c=n.filter.updateChild(l,h,qe.EMPTY_NODE,xt(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=kf(i,uo(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Sf(i,ft())!=null,Fl(e,c,o,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new YO(i.getIndex()),s=zH(i);this.processor_=wG(s);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(qe.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(qe.EMPTY_NODE,a.getNode(),null),h=new Cs(l,o.isFullyInitialized(),r.filtersNodes()),u=new Cs(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Td(u,h),this.eventGenerator_=new eG(this.query_)}get query(){return this.query_}}function IG(n){return n.viewCache_.serverCache.getNode()}function RG(n){return xf(n.viewCache_)}function QG(n,e){const t=uo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!rt(e)&&!t.getImmediateChild(it(e)).isEmpty())?t.getChild(e):null}function vx(n){return n.eventRegistrations_.length===0}function PG(n,e){n.eventRegistrations_.push(e)}function wx(n,e,t){const i=[];if(t){ke(e==null,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function Ax(n,e,t,i){e.type===Di.MERGE&&e.source.queryId!==null&&(ke(uo(n.viewCache_),"We should always have a full cache before handling merges"),ke(xf(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=_G(n.processor_,r,e,t,i);return AG(n.processor_,s.viewCache),ke(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,BI(n,s.changes,s.viewCache.eventCache.getNode(),null)}function DG(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(It,(s,o)=>{i.push(wa(s,o))}),t.isFullyInitialized()&&i.push(TI(t.getNode())),BI(n,i,t.getNode(),e)}function BI(n,e,t,i){const r=i?[i]:n.eventRegistrations_;return tG(n.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf;class MI{constructor(){this.views=new Map}}function NG(n){ke(!Tf,"__referenceConstructor has already been defined"),Tf=n}function LG(){return ke(Tf,"Reference.ts has not been loaded"),Tf}function BG(n){return n.views.size===0}function nb(n,e,t,i){const r=e.source.queryId;if(r!==null){const s=n.views.get(r);return ke(s!=null,"SyncTree gave us an op for an invalid query."),Ax(s,e,t,i)}else{let s=[];for(const o of n.views.values())s=s.concat(Ax(o,e,t,i));return s}}function $I(n,e,t,i,r){const s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=kf(t,r?i:null),l=!1;a?l=!0:i instanceof qe?(a=JO(t,i),l=!1):(a=qe.EMPTY_NODE,l=!1);const c=Td(new Cs(a,l,!1),new Cs(i,r,!1));return new CG(e,c)}return o}function MG(n,e,t,i,r,s){const o=$I(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),PG(o,t),DG(o,t)}function $G(n,e,t,i){const r=e._queryIdentifier,s=[];let o=[];const a=Is(n);if(r==="default")for(const[l,c]of n.views.entries())o=o.concat(wx(c,t,i)),vx(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(r);l&&(o=o.concat(wx(l,t,i)),vx(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Is(n)&&s.push(new(LG())(e._repo,e._path)),{removed:s,events:o}}function FI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ds(n,e){let t=null;for(const i of n.views.values())t=t||QG(i,e);return t}function WI(n,e){if(e._queryParams.loadsAllData())return Id(n);{const i=e._queryIdentifier;return n.views.get(i)}}function UI(n,e){return WI(n,e)!=null}function Is(n){return Id(n)!=null}function Id(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf;function FG(n){ke(!Cf,"__referenceConstructor has already been defined"),Cf=n}function WG(){return ke(Cf,"Reference.ts has not been loaded"),Cf}let UG=1;class _x{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Tt(null),this.pendingWriteTree_=yG(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ib(n,e,t,i,r){return sG(n.pendingWriteTree_,e,t,i,r),r?Ma(n,new ho(ZO(),e,t)):[]}function zG(n,e,t,i){oG(n.pendingWriteTree_,e,t,i);const r=Tt.fromObject(t);return Ma(n,new Aa(ZO(),e,r))}function os(n,e,t=!1){const i=aG(n.pendingWriteTree_,e);if(lG(n.pendingWriteTree_,e)){let s=new Tt(null);return i.snap!=null?s=s.set(ft(),!0):mn(i.children,o=>{s=s.set(new bt(o),!0)}),Ma(n,new _f(i.path,s,t))}else return[]}function qc(n,e,t){return Ma(n,new ho(qO(),e,t))}function jG(n,e,t){const i=Tt.fromObject(t);return Ma(n,new Aa(qO(),e,i))}function HG(n,e){return Ma(n,new xc(qO(),e))}function GG(n,e,t){const i=rb(n,t);if(i){const r=sb(i),s=r.path,o=r.queryId,a=Ln(s,e),l=new xc(KO(o),a);return ob(n,s,l)}else return[]}function e0(n,e,t,i){const r=e._path,s=n.syncPointTree_.get(r);let o=[];if(s&&(e._queryIdentifier==="default"||UI(s,e))){const a=$G(s,e,t,i);BG(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const l=a.removed;o=a.events;const c=l.findIndex(u=>u._queryParams.loadsAllData())!==-1,h=n.syncPointTree_.findOnPath(r,(u,f)=>Is(f));if(c&&!h){const u=n.syncPointTree_.subtree(r);if(!u.isEmpty()){const f=ZG(u);for(let p=0;p<f.length;++p){const d=f[p],m=d.query,b=HI(n,d);n.listenProvider_.startListening(Ul(m),If(n,m),b.hashFn,b.onComplete)}}}!h&&l.length>0&&!i&&(c?n.listenProvider_.stopListening(Ul(e),null):l.forEach(u=>{const f=n.queryToTagMap.get(Qd(u));n.listenProvider_.stopListening(Ul(u),f)})),qG(n,l)}return o}function VG(n,e,t,i){const r=rb(n,i);if(r!=null){const s=sb(r),o=s.path,a=s.queryId,l=Ln(o,e),c=new ho(KO(a),l,t);return ob(n,o,c)}else return[]}function XG(n,e,t,i){const r=rb(n,i);if(r){const s=sb(r),o=s.path,a=s.queryId,l=Ln(o,e),c=Tt.fromObject(t),h=new Aa(KO(a),l,c);return ob(n,o,h)}else return[]}function xx(n,e,t){const i=e._path;let r=null,s=!1;n.syncPointTree_.foreachOnPath(i,(u,f)=>{const p=Ln(u,i);r=r||ds(f,p),s=s||Is(f)});let o=n.syncPointTree_.get(i);o?(s=s||Is(o),r=r||ds(o,ft())):(o=new MI,n.syncPointTree_=n.syncPointTree_.set(i,o));let a;r!=null?a=!0:(a=!1,r=qe.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((f,p)=>{const d=ds(p,ft());d&&(r=r.updateImmediateChild(f,d))}));const l=UI(o,e);if(!l&&!e._queryParams.loadsAllData()){const u=Qd(e);ke(!n.queryToTagMap.has(u),"View does not exist, but we have a tag");const f=KG();n.queryToTagMap.set(u,f),n.tagToQueryMap.set(f,u)}const c=Cd(n.pendingWriteTree_,i);let h=MG(o,e,t,c,r,a);if(!l&&!s){const u=WI(o,e);h=h.concat(JG(n,e,u))}return h}function Rd(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=Ln(o,e),c=ds(a,l);if(c)return c});return QI(r,e,s,t,!0)}function YG(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(c,h)=>{const u=Ln(c,t);i=i||ds(h,u)});let r=n.syncPointTree_.get(t);r?i=i||ds(r,ft()):(r=new MI,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=i!=null,o=s?new Cs(i,!0,!1):null,a=Cd(n.pendingWriteTree_,e._path),l=$I(r,e,a,s?o.getNode():qe.EMPTY_NODE,s);return RG(l)}function Ma(n,e){return zI(e,n.syncPointTree_,null,Cd(n.pendingWriteTree_,ft()))}function zI(n,e,t,i){if(rt(n.path))return jI(n,e,t,i);{const r=e.get(ft());t==null&&r!=null&&(t=ds(r,ft()));let s=[];const o=it(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,h=PI(i,o);s=s.concat(zI(a,l,c,h))}return r&&(s=s.concat(nb(r,n,i,t))),s}}function jI(n,e,t,i){const r=e.get(ft());t==null&&r!=null&&(t=ds(r,ft()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=PI(i,o),h=n.operationForChild(o);h&&(s=s.concat(jI(h,a,l,c)))}),r&&(s=s.concat(nb(r,n,i,t))),s}function HI(n,e){const t=e.query,i=If(n,t);return{hashFn:()=>(IG(e)||qe.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?GG(n,t._path,i):HG(n,t._path);{const s=zj(r,t);return e0(n,t,null,s)}}}}function If(n,e){const t=Qd(e);return n.queryToTagMap.get(t)}function Qd(n){return n._path.toString()+"$"+n._queryIdentifier}function rb(n,e){return n.tagToQueryMap.get(e)}function sb(n){const e=n.indexOf("$");return ke(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bt(n.substr(0,e))}}function ob(n,e,t){const i=n.syncPointTree_.get(e);ke(i,"Missing sync point for query tag that we're tracking");const r=Cd(n.pendingWriteTree_,e);return nb(i,t,r,null)}function ZG(n){return n.fold((e,t,i)=>{if(t&&Is(t))return[Id(t)];{let r=[];return t&&(r=FI(t)),mn(i,(s,o)=>{r=r.concat(o)}),r}})}function Ul(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(WG())(n._repo,n._path):n}function qG(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Qd(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function KG(){return UG++}function JG(n,e,t){const i=e._path,r=If(n,e),s=HI(n,t),o=n.listenProvider_.startListening(Ul(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)ke(!Is(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,u)=>{if(!rt(c)&&h&&Is(h))return[Id(h).query];{let f=[];return h&&(f=f.concat(FI(h).map(p=>p.query))),mn(u,(p,d)=>{f=f.concat(d)}),f}});for(let c=0;c<l.length;++c){const h=l[c];n.listenProvider_.stopListening(Ul(h),If(n,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ab(t)}node(){return this.node_}}class lb{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wt(this.path_,e);return new lb(this.syncTree_,t)}node(){return Rd(this.syncTree_,this.path_)}}const e7=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},kx=function(n,e,t){if(!n||typeof n!="object")return n;if(ke(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return t7(n[".sv"],e,t);if(typeof n[".sv"]=="object")return n7(n[".sv"],e);ke(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},t7=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ke(!1,"Unexpected server value: "+n)}},n7=function(n,e,t){n.hasOwnProperty("increment")||ke(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ke(!1,"Unexpected increment value: "+i);const r=e.node();if(ke(r!==null&&typeof r!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},GI=function(n,e,t,i){return hb(e,new lb(t,n),i)},cb=function(n,e,t){return hb(n,new ab(e),t)};function hb(n,e,t){const i=n.getPriority().val(),r=kx(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=kx(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new hn(a,Ht(r)):n}else{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new hn(r))),o.forEachChild(It,(a,l)=>{const c=hb(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Pd(n,e){let t=e instanceof bt?e:new bt(e),i=n,r=it(t);for(;r!==null;){const s=lo(i.node.children,r)||{children:{},childCount:0};i=new ub(r,i,s),t=xt(t),r=it(t)}return i}function xo(n){return n.node.value}function fb(n,e){n.node.value=e,t0(n)}function VI(n){return n.node.childCount>0}function i7(n){return xo(n)===void 0&&!VI(n)}function Dd(n,e){mn(n.node.children,(t,i)=>{e(new ub(t,n,i))})}function XI(n,e,t,i){t&&!i&&e(n),Dd(n,r=>{XI(r,e,!0,i)}),t&&i&&e(n)}function r7(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Kc(n){return new bt(n.parent===null?n.name:Kc(n.parent)+"/"+n.name)}function t0(n){n.parent!==null&&s7(n.parent,n.name,n)}function s7(n,e,t){const i=i7(t),r=oi(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,t0(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,t0(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7=/[\[\].#$\/\u0000-\u001F\u007F]/,a7=/[\[\].#$\u0000-\u001F\u007F]/,Hm=10*1024*1024,Nd=function(n){return typeof n=="string"&&n.length!==0&&!o7.test(n)},YI=function(n){return typeof n=="string"&&n.length!==0&&!a7.test(n)},l7=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),YI(n)},kc=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!xd(n)||n&&typeof n=="object"&&oi(n,".sv")},sr=function(n,e,t,i){i&&e===void 0||Jc(Hn(n,"value"),e,t)},Jc=function(n,e,t){const i=t instanceof bt?new wH(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ws(i));if(typeof e=="function")throw new Error(n+"contains a function "+Ws(i)+" with contents = "+e.toString());if(xd(e))throw new Error(n+"contains "+e.toString()+" "+Ws(i));if(typeof e=="string"&&e.length>Hm/3&&Ad(e)>Hm)throw new Error(n+"contains a string greater than "+Hm+" utf8 bytes "+Ws(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(mn(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Nd(o)))throw new Error(n+" contains an invalid key ("+o+") "+Ws(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);AH(i,o),Jc(n,a,i),_H(i)}),r&&s)throw new Error(n+' contains ".value" child '+Ws(i)+" in addition to actual children.")}},c7=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=vc(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Nd(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(vH);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&bi(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},ZI=function(n,e,t,i){if(i&&e===void 0)return;const r=Hn(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];mn(e,(o,a)=>{const l=new bt(o);if(Jc(r,a,Wt(t,l)),zO(l)===".priority"&&!kc(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),c7(r,s)},db=function(n,e,t){if(!(t&&e===void 0)){if(xd(e))throw new Error(Hn(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!kc(e))throw new Error(Hn(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},eh=function(n,e,t,i){if(!(i&&t===void 0)&&!Nd(t))throw new Error(Hn(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Sc=function(n,e,t,i){if(!(i&&t===void 0)&&!YI(t))throw new Error(Hn(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},h7=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Sc(n,e,t,i)},vi=function(n,e){if(it(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},qI=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Nd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!l7(t))throw new Error(Hn(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ld(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();t!==null&&!jO(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function pb(n,e,t){Ld(n,t),KI(n,i=>jO(i,e))}function _i(n,e,t){Ld(n,t),KI(n,i=>bi(i,e)||bi(e,i))}function KI(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];if(r){const s=r.path;e(s)?(f7(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function f7(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();eo&&dn("event: "+t.toString()),La(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="repo_interrupt",d7=25;class p7{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new u7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Af(),this.transactionQueueTree_=new ub,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function m7(n,e,t){if(n.stats_=WO(n.repoInfo_),n.forceRestClient_||Hj())n.server_=new wf(n.repoInfo_,(i,r,s,o)=>{Sx(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ex(n,!0),0);else{if(typeof t!="undefined"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Tr(n.repoInfo_,e,(i,r,s,o)=>{Sx(n,i,r,s,o)},i=>{Ex(n,i)},i=>{g7(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=Zj(n.repoInfo_,()=>new JH(n.stats_,n.server_)),n.infoData_=new XH,n.infoSyncTree_=new _x({startListening:(i,r,s,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=qc(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),mb(n,"connected",!1),n.serverSyncTree_=new _x({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);_i(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function eR(n){const t=n.infoData_.getNode(new bt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function th(n){return e7({timestamp:eR(n)})}function Sx(n,e,t,i,r){n.dataUpdateCount++;const s=new bt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const l=mf(t,c=>Ht(c));o=XG(n.serverSyncTree_,s,l,r)}else{const l=Ht(t);o=VG(n.serverSyncTree_,s,l,r)}else if(i){const l=mf(t,c=>Ht(c));o=jG(n.serverSyncTree_,s,l)}else{const l=Ht(t);o=qc(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=xa(n,s)),_i(n.eventQueue_,a,o)}function Ex(n,e){mb(n,"connected",e),e===!1&&b7(n)}function g7(n,e){mn(e,(t,i)=>{mb(n,t,i)})}function mb(n,e,t){const i=new bt("/.info/"+e),r=Ht(t);n.infoData_.updateSnapshot(i,r);const s=qc(n.infoSyncTree_,i,r);_i(n.eventQueue_,i,s)}function Bd(n){return n.nextWriteId_++}function y7(n,e){const t=YG(n.serverSyncTree_,e);return t!=null?Promise.resolve(t):n.server_.get(e).then(i=>{const r=Ht(i).withIndex(e._queryParams.getIndex()),s=qc(n.serverSyncTree_,e._path,r);return pb(n.eventQueue_,e._path,s),Promise.resolve(r)},i=>($a(n,"get for query "+tn(e)+" failed: "+i),Promise.reject(new Error(i))))}function gb(n,e,t,i,r){$a(n,"set",{path:e.toString(),value:t,priority:i});const s=th(n),o=Ht(t,i),a=Rd(n.serverSyncTree_,e),l=cb(o,a,s),c=Bd(n),h=ib(n.serverSyncTree_,e,l,c,!0);Ld(n.eventQueue_,h),n.server_.put(e.toString(),o.val(!0),(f,p)=>{const d=f==="ok";d||Cn("set at "+e+" failed: "+f);const m=os(n.serverSyncTree_,c,!d);_i(n.eventQueue_,e,m),Rs(n,r,f,p)});const u=Ob(n,e);xa(n,u),_i(n.eventQueue_,u,[])}function O7(n,e,t,i){$a(n,"update",{path:e.toString(),value:t});let r=!0;const s=th(n),o={};if(mn(t,(a,l)=>{r=!1,o[a]=GI(Wt(e,a),Ht(l),n.serverSyncTree_,s)}),r)dn("update() called with empty data.  Don't do anything."),Rs(n,i,"ok",void 0);else{const a=Bd(n),l=zG(n.serverSyncTree_,e,o,a);Ld(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,h)=>{const u=c==="ok";u||Cn("update at "+e+" failed: "+c);const f=os(n.serverSyncTree_,a,!u),p=f.length>0?xa(n,e):e;_i(n.eventQueue_,p,f),Rs(n,i,c,h)}),mn(t,c=>{const h=Ob(n,Wt(e,c));xa(n,h)}),_i(n.eventQueue_,e,[])}}function b7(n){$a(n,"onDisconnectEvents");const e=th(n),t=Af();Xy(n.onDisconnect_,ft(),(r,s)=>{const o=GI(r,s,n.serverSyncTree_,e);Ba(t,r,o)});let i=[];Xy(t,ft(),(r,s)=>{i=i.concat(qc(n.serverSyncTree_,r,s));const o=Ob(n,r);xa(n,o)}),n.onDisconnect_=Af(),_i(n.eventQueue_,ft(),i)}function v7(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&Vy(n.onDisconnect_,e),Rs(n,t,i,r)})}function Tx(n,e,t,i){const r=Ht(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{s==="ok"&&Ba(n.onDisconnect_,e,r),Rs(n,i,s,o)})}function w7(n,e,t,i,r){const s=Ht(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Ba(n.onDisconnect_,e,s),Rs(n,r,o,a)})}function A7(n,e,t,i){if(Ny(t)){dn("onDisconnect().update() called with empty data.  Don't do anything."),Rs(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{r==="ok"&&mn(t,(o,a)=>{const l=Ht(a);Ba(n.onDisconnect_,Wt(e,o),l)}),Rs(n,i,r,s)})}function _7(n,e,t){let i;it(e._path)===".info"?i=xx(n.infoSyncTree_,e,t):i=xx(n.serverSyncTree_,e,t),pb(n.eventQueue_,e._path,i)}function n0(n,e,t){let i;it(e._path)===".info"?i=e0(n.infoSyncTree_,e,t):i=e0(n.serverSyncTree_,e,t),pb(n.eventQueue_,e._path,i)}function tR(n){n.persistentConnection_&&n.persistentConnection_.interrupt(JI)}function x7(n){n.persistentConnection_&&n.persistentConnection_.resume(JI)}function $a(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),dn(t,...e)}function Rs(n,e,t,i){e&&La(()=>{if(t==="ok")e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function k7(n,e,t,i,r,s){$a(n,"transaction on "+e);const o={path:e,update:t,onComplete:i,status:null,order:Y2(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=yb(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Jc("transaction failed: Data returned ",l,o.path),o.status=0;const c=Pd(n.transactionQueueTree_,e),h=xo(c)||[];h.push(o),fb(c,h);let u;typeof l=="object"&&l!==null&&oi(l,".priority")?(u=lo(l,".priority"),ke(kc(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(Rd(n.serverSyncTree_,e)||qe.EMPTY_NODE).getPriority().val();const f=th(n),p=Ht(l,u),d=cb(p,a,f);o.currentOutputSnapshotRaw=p,o.currentOutputSnapshotResolved=d,o.currentWriteId=Bd(n);const m=ib(n.serverSyncTree_,e,d,o.currentWriteId,o.applyLocally);_i(n.eventQueue_,e,m),Md(n,n.transactionQueueTree_)}}function yb(n,e,t){return Rd(n.serverSyncTree_,e,t)||qe.EMPTY_NODE}function Md(n,e=n.transactionQueueTree_){if(e||$d(n,e),xo(e)){const t=iR(n,e);ke(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&S7(n,Kc(e),t)}else VI(e)&&Dd(e,t=>{Md(n,t)})}function S7(n,e,t){const i=t.map(c=>c.currentWriteId),r=yb(n,e,i);let s=r;const o=r.hash();for(let c=0;c<t.length;c++){const h=t[c];ke(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const u=Ln(e,h.path);s=s.updateChild(u,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{$a(n,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const u=[];for(let f=0;f<t.length;f++)t[f].status=2,h=h.concat(os(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&u.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();$d(n,Pd(n.transactionQueueTree_,e)),Md(n,n.transactionQueueTree_),_i(n.eventQueue_,e,h);for(let f=0;f<u.length;f++)La(u[f])}else{if(c==="datastale")for(let u=0;u<t.length;u++)t[u].status===3?t[u].status=4:t[u].status=0;else{Cn("transaction at "+l.toString()+" failed: "+c);for(let u=0;u<t.length;u++)t[u].status=4,t[u].abortReason=c}xa(n,e)}},o)}function xa(n,e){const t=nR(n,e),i=Kc(t),r=iR(n,t);return E7(n,r,i),i}function E7(n,e,t){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Ln(t,l.path);let h=!1,u;if(ke(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,u=l.abortReason,r=r.concat(os(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=d7)h=!0,u="maxretry",r=r.concat(os(n.serverSyncTree_,l.currentWriteId,!0));else{const f=yb(n,l.path,o);l.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){Jc("transaction failed: Data returned ",p,l.path);let d=Ht(p);typeof p=="object"&&p!=null&&oi(p,".priority")||(d=d.updatePriority(f.getPriority()));const b=l.currentWriteId,A=th(n),g=cb(d,f,A);l.currentOutputSnapshotRaw=d,l.currentOutputSnapshotResolved=g,l.currentWriteId=Bd(n),o.splice(o.indexOf(b),1),r=r.concat(ib(n.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),r=r.concat(os(n.serverSyncTree_,b,!0))}else h=!0,u="nodata",r=r.concat(os(n.serverSyncTree_,l.currentWriteId,!0))}_i(n.eventQueue_,t,r),r=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(u==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(u),!1,null))))}$d(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)La(i[a]);Md(n,n.transactionQueueTree_)}function nR(n,e){let t,i=n.transactionQueueTree_;for(t=it(e);t!==null&&xo(i)===void 0;)i=Pd(i,t),e=xt(e),t=it(e);return i}function iR(n,e){const t=[];return rR(n,e,t),t.sort((i,r)=>i.order-r.order),t}function rR(n,e,t){const i=xo(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Dd(e,r=>{rR(n,r,t)})}function $d(n,e){const t=xo(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,fb(e,t.length>0?t:void 0)}Dd(e,i=>{$d(n,i)})}function Ob(n,e){const t=Kc(nR(n,e)),i=Pd(n.transactionQueueTree_,e);return r7(i,r=>{Gm(n,r)}),Gm(n,i),XI(i,r=>{Gm(n,r)}),t}function Gm(n,e){const t=xo(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(ke(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(ke(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(os(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?fb(e,void 0):t.length=s+1,_i(n.eventQueue_,Kc(e),r);for(let o=0;o<i.length;o++)La(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function C7(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Cn(`Invalid query segment '${t}' in query '${n}'`)}return e}const i0=function(n,e){const t=I7(n),i=t.namespace;t.domain==="firebase.com"&&ir(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&ir("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Mj();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new hI(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new bt(t.pathString)}},I7=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let h=n.indexOf("/");h===-1&&(h=n.length);let u=n.indexOf("?");u===-1&&(u=n.length),e=n.substring(0,Math.min(h,u)),h<u&&(r=T7(n.substring(h,u)));const f=C7(n.substring(Math.min(n.length,u)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{const d=e.indexOf(".");i=e.substring(0,d).toLowerCase(),t=e.substring(d+1),s=i}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+tn(this.snapshot.exportVal())}}class oR{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ke(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Wn;return v7(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){vi("OnDisconnect.remove",this._path);const e=new Wn;return Tx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){vi("OnDisconnect.set",this._path),sr("OnDisconnect.set",e,this._path,!1);const t=new Wn;return Tx(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){vi("OnDisconnect.setWithPriority",this._path),sr("OnDisconnect.setWithPriority",e,this._path,!1),db("OnDisconnect.setWithPriority",t,!1);const i=new Wn;return w7(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){vi("OnDisconnect.update",this._path),ZI("OnDisconnect.update",e,this._path,!1);const t=new Wn;return A7(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return rt(this._path)?null:zO(this._path)}get ref(){return new Ei(this._repo,this._path)}get _queryIdentifier(){const e=dx(this._queryParams),t=MO(e);return t==="{}"?"default":t}get _queryObject(){return dx(this._queryParams)}isEqual(e){if(e=ai(e),!(e instanceof Vn))return!1;const t=this._repo===e._repo,i=jO(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+bH(this._path)}}function Fd(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ps(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===tr){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Nr)throw new Error(i);if(typeof e!="string")throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==rr)throw new Error(i);if(typeof t!="string")throw new Error(r)}}else if(n.getIndex()===It){if(e!=null&&!kc(e)||t!=null&&!kc(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ke(n.getIndex()instanceof VO||n.getIndex()===XO,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Wd(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ei extends Vn{constructor(e,t){super(e,t,new Sd,!1)}get parent(){const e=bI(this._path);return e===null?null:new Ei(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class fo{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bt(e),i=po(this.ref,e);return new fo(this._node.getChild(t),i,It)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new fo(r,po(this.ref,i),It)))}hasChild(e){const t=new bt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function lR(n,e){return n=ai(n),n._checkNotDeleted("ref"),e!==void 0?po(n._root,e):n._root}function Cx(n,e){n=ai(n),n._checkNotDeleted("refFromURL");const t=i0(e,n._repo.repoInfo_.nodeAdmin);qI("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&ir("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),lR(n,t.path.toString())}function po(n,e){return n=ai(n),it(n._path)===null?h7("child","path",e,!1):Sc("child","path",e,!1),new Ei(n._repo,Wt(n._path,e))}function Q7(n,e){n=ai(n),vi("push",n._path),sr("push",e,n._path,!0);const t=eR(n._repo),i=FH(t),r=po(n,i),s=po(n,i);let o;return e!=null?o=bb(s,e).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function P7(n){return vi("remove",n._path),bb(n,null)}function bb(n,e){n=ai(n),vi("set",n._path),sr("set",e,n._path,!1);const t=new Wn;return gb(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function D7(n,e){n=ai(n),vi("setPriority",n._path),db("setPriority",e,!1);const t=new Wn;return gb(n._repo,Wt(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function N7(n,e,t){if(vi("setWithPriority",n._path),sr("setWithPriority",e,n._path,!1),db("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new Wn;return gb(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}function L7(n,e){ZI("update",e,n._path,!1);const t=new Wn;return O7(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function B7(n){return n=ai(n),y7(n._repo,n).then(e=>new fo(e,new Ei(n._repo,n._path),n._queryParams.getIndex()))}class Ud{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new sR("value",this,new fo(e.snapshotNode,new Ei(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oR(this,e,t):null}matches(e){return e instanceof Ud?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class zd{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oR(this,e,t):null}createEvent(e,t){ke(e.childName!=null,"Child events should have a childName.");const i=po(new Ei(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new sR(e.type,this,new fo(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof zd?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function nh(n,e,t,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){const l=t,c=(h,u)=>{n0(n._repo,n,a),l(h,u)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new aR(t,s||void 0),a=e==="value"?new Ud(o):new zd(e,o);return _7(n._repo,n,a),()=>n0(n._repo,n,a)}function r0(n,e,t,i){return nh(n,"value",e,t,i)}function Ix(n,e,t,i){return nh(n,"child_added",e,t,i)}function Rx(n,e,t,i){return nh(n,"child_changed",e,t,i)}function Qx(n,e,t,i){return nh(n,"child_moved",e,t,i)}function Px(n,e,t,i){return nh(n,"child_removed",e,t,i)}function Dx(n,e,t){let i=null;const r=t?new aR(t):null;e==="value"?i=new Ud(r):e&&(i=new zd(e,r)),n0(n._repo,n,i)}class $i{}class cR extends $i{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sr("endAt",this._value,e._path,!0);const t=Gy(e._queryParams,this._value,this._key);if(Wd(t),Ps(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vn(e._repo,e._path,t,e._orderByCalled)}}function M7(n,e){return eh("endAt","key",e,!0),new cR(n,e)}class $7 extends $i{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sr("endBefore",this._value,e._path,!1);const t=VH(e._queryParams,this._value,this._key);if(Wd(t),Ps(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vn(e._repo,e._path,t,e._orderByCalled)}}function F7(n,e){return eh("endBefore","key",e,!0),new $7(n,e)}class hR extends $i{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sr("startAt",this._value,e._path,!0);const t=Hy(e._queryParams,this._value,this._key);if(Wd(t),Ps(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vn(e._repo,e._path,t,e._orderByCalled)}}function W7(n=null,e){return eh("startAt","key",e,!0),new hR(n,e)}class U7 extends $i{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sr("startAfter",this._value,e._path,!1);const t=GH(e._queryParams,this._value,this._key);if(Wd(t),Ps(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vn(e._repo,e._path,t,e._orderByCalled)}}function z7(n,e){return eh("startAfter","key",e,!0),new U7(n,e)}class j7 extends $i{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vn(e._repo,e._path,jH(e._queryParams,this._limit),e._orderByCalled)}}function H7(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new j7(n)}class G7 extends $i{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vn(e._repo,e._path,HH(e._queryParams,this._limit),e._orderByCalled)}}function V7(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new G7(n)}class X7 extends $i{constructor(e){super(),this._path=e}_apply(e){Fd(e,"orderByChild");const t=new bt(this._path);if(rt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new VO(t),r=Ed(e._queryParams,i);return Ps(r),new Vn(e._repo,e._path,r,!0)}}function Y7(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Sc("orderByChild","path",n,!1),new X7(n)}class Z7 extends $i{_apply(e){Fd(e,"orderByKey");const t=Ed(e._queryParams,tr);return Ps(t),new Vn(e._repo,e._path,t,!0)}}function q7(){return new Z7}class K7 extends $i{_apply(e){Fd(e,"orderByPriority");const t=Ed(e._queryParams,It);return Ps(t),new Vn(e._repo,e._path,t,!0)}}function J7(){return new K7}class eV extends $i{_apply(e){Fd(e,"orderByValue");const t=Ed(e._queryParams,XO);return Ps(t),new Vn(e._repo,e._path,t,!0)}}function tV(){return new eV}class nV extends $i{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(sr("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new cR(this._value,this._key)._apply(new hR(this._value,this._key)._apply(e))}}function iV(n,e){return eh("equalTo","key",e,!0),new nV(n,e)}function Ii(n,...e){let t=ai(n);for(const i of e)t=i._apply(t);return t}NG(Ei);FG(Ei);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV="FIREBASE_DATABASE_EMULATOR_HOST",s0={};let sV=!1;function oV(n,e,t,i){n.repoInfo_=new hI(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}function uR(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||ir("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=i0(s,r),a=o.repoInfo,l,c;typeof process!="undefined"&&process.env&&(c=process.env[rV]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=i0(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const h=r&&l?new Ko(Ko.OWNER):new Vj(n.name,n.options,e);qI("Invalid Firebase Database URL",o),rt(o.path)||ir("Database URL must point to the root of a Firebase Database (not including a child path).");const u=lV(a,n,h,new Gj(n.name,t));return new cV(u,n)}function aV(n,e){const t=s0[e];(!t||t[n.key]!==n)&&ir(`Database ${e}(${n.repoInfo_}) has already been deleted.`),tR(n),delete t[n.key]}function lV(n,e,t,i){let r=s0[e.name];r||(r={},s0[e.name]=r);let s=r[n.toURLString()];return s&&ir("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new p7(n,sV,t,i),r[n.toURLString()]=s,s}class cV{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(m7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ei(this._repo,ft())),this._rootInternal}_delete(){return this._rootInternal!==null&&(aV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ir("Cannot call "+e+" on a deleted database.")}}function fR(){ba.IS_TRANSPORT_INITIALIZED&&Cn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function hV(){fR(),ss.forceDisallow()}function uV(){fR(),mi.forceDisallow(),ss.forceAllow()}function fV(n,e,t,i={}){n=ai(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&ir("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&ir('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ko(Ko.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:nz(i.mockUserToken,n.app.options.projectId);s=new Ko(o)}oV(r,e,t,s)}function dV(n){n=ai(n),n._checkNotDeleted("goOffline"),tR(n._repo)}function pV(n){n=ai(n),n._checkNotDeleted("goOnline"),x7(n._repo)}function mV(n,e){q2(n,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(n){V2(BO),Oa(new ks("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return uR(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),us(Y_,Z_,n),us(Y_,Z_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV={".sv":"timestamp"};function OV(){return yV}function bV(n){return{".sv":{increment:n}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function wV(n,e,t){var i;if(n=ai(n),vi("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=(i=t==null?void 0:t.applyLocally)!==null&&i!==void 0?i:!0,s=new Wn,o=(l,c,h)=>{let u=null;l?s.reject(l):(u=new fo(h,new Ei(n._repo,n._path),It),s.resolve(new vV(c,u)))},a=r0(n,()=>{});return k7(n._repo,n._path,e,o,a,r),s.promise}Tr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Tr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};gV();const AV="@firebase/database-compat",_V="0.2.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=new _d("@firebase/database-compat"),dR=function(n){const e="FIREBASE WARNING: "+n;xV.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=function(n,e,t,i){if(!(i&&t===void 0)&&typeof t!="boolean")throw new Error(Hn(n,e)+"must be a boolean.")},SV=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Hn(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this._delegate=e}cancel(e){Ke("OnDisconnect.cancel",0,1,arguments.length),un("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){Ke("OnDisconnect.remove",0,1,arguments.length),un("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){Ke("OnDisconnect.set",1,2,arguments.length),un("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){Ke("OnDisconnect.setWithPriority",2,3,arguments.length),un("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if(Ke("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,dR("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}un("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Ke("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t){this._database=e,this._delegate=t}val(){return Ke("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Ke("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Ke("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Ke("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Ke("DataSnapshot.child",0,1,arguments.length),e=String(e),Sc("DataSnapshot.child","path",e,!1),new ps(this._database,this._delegate.child(e))}hasChild(e){return Ke("DataSnapshot.hasChild",1,1,arguments.length),Sc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Ke("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Ke("DataSnapshot.forEach",1,1,arguments.length),un("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ps(this._database,t)))}hasChildren(){return Ke("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Ke("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Ke("DataSnapshot.ref",0,0,arguments.length),new ei(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class On{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;Ke("Query.on",2,4,arguments.length),un("Query.on","callback",t,!1);const o=On.getCancelAndContextArgs_("Query.on",i,r),a=(c,h)=>{t.call(o.context,new ps(this.database,c),h)};a.userCallback=t,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return r0(this._delegate,a,l),t;case"child_added":return Ix(this._delegate,a,l),t;case"child_removed":return Px(this._delegate,a,l),t;case"child_changed":return Rx(this._delegate,a,l),t;case"child_moved":return Qx(this._delegate,a,l),t;default:throw new Error(Hn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if(Ke("Query.off",0,3,arguments.length),SV("Query.off",e,!0),un("Query.off","callback",t,!0),$_("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,Dx(this._delegate,e,r)}else Dx(this._delegate,e)}get(){return B7(this._delegate).then(e=>new ps(this.database,e))}once(e,t,i,r){Ke("Query.once",1,4,arguments.length),un("Query.once","callback",t,!0);const s=On.getCancelAndContextArgs_("Query.once",i,r),o=new Wn,a=(c,h)=>{const u=new ps(this.database,c);t&&t.call(s.context,u,h),o.resolve(u)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":r0(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Ix(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Px(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Rx(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Qx(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Hn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return Ke("Query.limitToFirst",1,1,arguments.length),new On(this.database,Ii(this._delegate,H7(e)))}limitToLast(e){return Ke("Query.limitToLast",1,1,arguments.length),new On(this.database,Ii(this._delegate,V7(e)))}orderByChild(e){return Ke("Query.orderByChild",1,1,arguments.length),new On(this.database,Ii(this._delegate,Y7(e)))}orderByKey(){return Ke("Query.orderByKey",0,0,arguments.length),new On(this.database,Ii(this._delegate,q7()))}orderByPriority(){return Ke("Query.orderByPriority",0,0,arguments.length),new On(this.database,Ii(this._delegate,J7()))}orderByValue(){return Ke("Query.orderByValue",0,0,arguments.length),new On(this.database,Ii(this._delegate,tV()))}startAt(e=null,t){return Ke("Query.startAt",0,2,arguments.length),new On(this.database,Ii(this._delegate,W7(e,t)))}startAfter(e=null,t){return Ke("Query.startAfter",0,2,arguments.length),new On(this.database,Ii(this._delegate,z7(e,t)))}endAt(e=null,t){return Ke("Query.endAt",0,2,arguments.length),new On(this.database,Ii(this._delegate,M7(e,t)))}endBefore(e=null,t){return Ke("Query.endBefore",0,2,arguments.length),new On(this.database,Ii(this._delegate,F7(e,t)))}equalTo(e,t){return Ke("Query.equalTo",1,2,arguments.length),new On(this.database,Ii(this._delegate,iV(e,t)))}toString(){return Ke("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Ke("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Ke("Query.isEqual",1,1,arguments.length),!(e instanceof On)){const t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,un(e,"cancel",r.cancel,!0),r.context=i,$_(e,"context",r.context,!0);else if(t)if(typeof t=="object"&&t!==null)r.context=t;else if(typeof t=="function")r.cancel=t;else throw new Error(Hn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new ei(this.database,new Ei(this._delegate._repo,this._delegate._path))}}class ei extends On{constructor(e,t){super(e,new Vn(t._repo,t._path,new Sd,!1)),this.database=e,this._delegate=t}getKey(){return Ke("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Ke("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new ei(this.database,po(this._delegate,e))}getParent(){Ke("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ei(this.database,e):null}getRoot(){return Ke("Reference.root",0,0,arguments.length),new ei(this.database,this._delegate.root)}set(e,t){Ke("Reference.set",1,2,arguments.length),un("Reference.set","onComplete",t,!0);const i=bb(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if(Ke("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,dR("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vi("Reference.update",this._delegate._path),un("Reference.update","onComplete",t,!0);const i=L7(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){Ke("Reference.setWithPriority",2,3,arguments.length),un("Reference.setWithPriority","onComplete",i,!0);const r=N7(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){Ke("Reference.remove",0,1,arguments.length),un("Reference.remove","onComplete",e,!0);const t=P7(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){Ke("Reference.transaction",1,3,arguments.length),un("Reference.transaction","transactionUpdate",e,!1),un("Reference.transaction","onComplete",t,!0),kV("Reference.transaction","applyLocally",i,!0);const r=wV(this._delegate,e,{applyLocally:i}).then(s=>new TV(s.committed,new ps(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){Ke("Reference.setPriority",1,2,arguments.length),un("Reference.setPriority","onComplete",t,!0);const i=D7(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){Ke("Reference.push",0,2,arguments.length),un("Reference.push","onComplete",t,!0);const i=Q7(this._delegate,e),r=i.then(o=>new ei(this.database,o));t&&r.then(()=>t(null),o=>t(o));const s=new ei(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return vi("Reference.onDisconnect",this._delegate._path),new EV(new R7(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:hV,forceLongPolling:uV}}useEmulator(e,t,i={}){fV(this._delegate,e,t,i)}ref(e){if(Ke("database.ref",0,1,arguments.length),e instanceof ei){const t=Cx(this._delegate,e.toString());return new ei(this,t)}else{const t=lR(this._delegate,e);return new ei(this,t)}}refFromURL(e){Ke("database.refFromURL",1,1,arguments.length);const i=Cx(this._delegate,e);return new ei(this,i)}goOffline(){return Ke("database.goOffline",0,0,arguments.length),dV(this._delegate)}goOnline(){return Ke("database.goOnline",0,0,arguments.length),pV(this._delegate)}}Ec.ServerValue={TIMESTAMP:OV(),increment:n=>bV(n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){V2(t);const o=new Q2("auth-internal",new P2("database-standalone"));return o.setComponent(new ks("auth-internal",()=>i,"PRIVATE")),{instance:new Ec(uR(n,o,void 0,e,s),n),namespace:r}}var IV=Object.freeze({__proto__:null,initStandalone:CV});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=Ec.ServerValue;function QV(n){n.INTERNAL.registerComponent(new ks("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Ec(r,i)},"PUBLIC").setServiceProps({Reference:ei,Query:On,Database:Ec,DataSnapshot:ps,enableLogging:mV,INTERNAL:IV,ServerValue:RV}).setMultipleInstances(!0)),n.registerVersion(AV,_V)}QV(bc);const _e={};_e.makeEventEmitter=function(n,e){n.prototype.allowedEvents_=e,n.prototype.on=function(t,i,r){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{},this.eventListeners_[t]=this.eventListeners_[t]||[],this.eventListeners_[t].push({callback:i,context:r})},n.prototype.off=function(t,i){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{};for(var r=this.eventListeners_[t]||[],s=0;s<r.length;s++)if(r[s].callback===i){r.splice(s,1);return}},n.prototype.trigger=function(t){this.eventListeners_=this.eventListeners_||{};for(var i=this.eventListeners_[t]||[],r=0;r<i.length;r++)i[r].callback.apply(i[r].context,Array.prototype.slice.call(arguments,1))},n.prototype.validateEventType_=function(t){if(this.allowedEvents_){for(var i=!1,r=0;r<this.allowedEvents_.length;r++)if(this.allowedEvents_[r]===t){i=!0;break}if(!i)throw new Error('Unknown event "'+t+'"')}}};_e.elt=function(n,e,t){var i=document.createElement(n);if(typeof e=="string")_e.setTextContent(i,e);else if(e)for(var r=0;r<e.length;++r)i.appendChild(e[r]);for(var s in t||{})i.setAttribute(s,t[s]);return i};_e.setTextContent=function(n,e){n.innerHTML="",n.appendChild(document.createTextNode(e))};_e.on=function(n,e,t,i){n.addEventListener?n.addEventListener(e,t,i||!1):n.attachEvent&&n.attachEvent("on"+e,t)};_e.off=function(n,e,t,i){n.removeEventListener?n.removeEventListener(e,t,i||!1):n.detachEvent&&n.detachEvent("on"+e,t)};_e.preventDefault=function(n){n.preventDefault?n.preventDefault():n.returnValue=!1};_e.stopPropagation=function(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0};_e.stopEvent=function(n){_e.preventDefault(n),_e.stopPropagation(n)};_e.stopEventAnd=function(n){return function(e){return n(e),_e.stopEvent(e),!1}};_e.trim=function(n){return n.replace(/^\s+/g,"").replace(/\s+$/g,"")};_e.stringEndsWith=function(n,e){for(var t=typeof e=="string"?[e]:e,i=0;i<t.length;i++){var e=t[i];if(n.indexOf(e,n.length-e.length)!==-1)return!0}return!1};_e.assert=function(e,t){if(!e)throw new Error(t||"assertion error")};_e.log=function(){if(typeof console!="undefined"&&typeof console.log!="undefined"){for(var n=["Firepad:"],e=0;e<arguments.length;e++)n.push(arguments[e]);console.log.apply(console,n)}};const El=function(){function n(e){this.type=e,this.chars=null,this.text=null,this.attributes=null,e==="insert"?(this.text=arguments[1],_e.assert(typeof this.text=="string"),this.attributes=arguments[2]||{},_e.assert(typeof this.attributes=="object")):e==="delete"?(this.chars=arguments[1],_e.assert(typeof this.chars=="number")):e==="retain"&&(this.chars=arguments[1],_e.assert(typeof this.chars=="number"),this.attributes=arguments[2]||{},_e.assert(typeof this.attributes=="object"))}return n.prototype.isInsert=function(){return this.type==="insert"},n.prototype.isDelete=function(){return this.type==="delete"},n.prototype.isRetain=function(){return this.type==="retain"},n.prototype.equals=function(e){return this.type===e.type&&this.text===e.text&&this.chars===e.chars&&this.attributesEqual(e.attributes)},n.prototype.attributesEqual=function(e){for(var t in this.attributes)if(this.attributes[t]!==e[t])return!1;for(t in e)if(this.attributes[t]!==e[t])return!1;return!0},n.prototype.hasEmptyAttributes=function(){var e=!0;for(var t in this.attributes){e=!1;break}return e},n}(),Vt=function(){function n(){if(!this||this.constructor!==n)return new n;this.ops=[],this.baseLength=0,this.targetLength=0}n.prototype.equals=function(i){if(this.baseLength!==i.baseLength||this.targetLength!==i.targetLength||this.ops.length!==i.ops.length)return!1;for(var r=0;r<this.ops.length;r++)if(!this.ops[r].equals(i.ops[r]))return!1;return!0},n.prototype.retain=function(i,r){if(typeof i!="number"||i<0)throw new Error("retain expects a positive integer.");if(i===0)return this;this.baseLength+=i,this.targetLength+=i,r=r||{};var s=this.ops.length>0?this.ops[this.ops.length-1]:null;return s&&s.isRetain()&&s.attributesEqual(r)?s.chars+=i:this.ops.push(new El("retain",i,r)),this},n.prototype.insert=function(i,r){if(typeof i!="string")throw new Error("insert expects a string");if(i==="")return this;r=r||{},this.targetLength+=i.length;var s=this.ops.length>0?this.ops[this.ops.length-1]:null,o=this.ops.length>1?this.ops[this.ops.length-2]:null;return s&&s.isInsert()&&s.attributesEqual(r)?s.text+=i:s&&s.isDelete()?o&&o.isInsert()&&o.attributesEqual(r)?o.text+=i:(this.ops[this.ops.length-1]=new El("insert",i,r),this.ops.push(s)):this.ops.push(new El("insert",i,r)),this},n.prototype.delete=function(i){if(typeof i=="string"&&(i=i.length),typeof i!="number"||i<0)throw new Error("delete expects a positive integer or a string");if(i===0)return this;this.baseLength+=i;var r=this.ops.length>0?this.ops[this.ops.length-1]:null;return r&&r.isDelete()?r.chars+=i:this.ops.push(new El("delete",i)),this},n.prototype.isNoop=function(){return this.ops.length===0||this.ops.length===1&&this.ops[0].isRetain()&&this.ops[0].hasEmptyAttributes()},n.prototype.clone=function(){for(var i=new n,r=0;r<this.ops.length;r++)this.ops[r].isRetain()?i.retain(this.ops[r].chars,this.ops[r].attributes):this.ops[r].isInsert()?i.insert(this.ops[r].text,this.ops[r].attributes):i.delete(this.ops[r].chars);return i},n.prototype.toString=function(){var i=Array.prototype.map||function(r){for(var s=this,o=[],a=0,l=s.length;a<l;a++)o[a]=r(s[a]);return o};return i.call(this.ops,function(r){return r.isRetain()?"retain "+r.chars:r.isInsert()?"insert '"+r.text+"'":"delete "+r.chars}).join(", ")},n.prototype.toJSON=function(){for(var i=[],r=0;r<this.ops.length;r++)this.ops[r].hasEmptyAttributes()||i.push(this.ops[r].attributes),this.ops[r].type==="retain"?i.push(this.ops[r].chars):this.ops[r].type==="insert"?i.push(this.ops[r].text):this.ops[r].type==="delete"&&i.push(-this.ops[r].chars);return i.length===0&&i.push(0),i},n.fromJSON=function(i){for(var r=new n,s=0,o=i.length;s<o;s++){var a=i[s],l={};typeof a=="object"&&(l=a,s++,a=i[s]),typeof a=="number"?a>0?r.retain(a,l):r.delete(-a):(_e.assert(typeof a=="string"),r.insert(a,l))}return r},n.prototype.apply=function(i,r,s){var o=this;if(r=r||[],s=s||[],i.length!==o.baseLength)throw new Error("The operation's base length must be equal to the string's length.");for(var a=[],l=0,c,h,u=0,f=this.ops,p=0,d=f.length;p<d;p++){var m=f[p];if(m.isRetain()){if(u+m.chars>i.length)throw new Error("Operation can't retain more characters than are left in the string.");for(a[l++]=i.slice(u,u+m.chars),c=0;c<m.chars;c++){var b=r[u+c]||{},A={};for(h in b)A[h]=b[h],_e.assert(A[h]!==!1);for(h in m.attributes)m.attributes[h]===!1?delete A[h]:A[h]=m.attributes[h],_e.assert(A[h]!==!1);s.push(A)}u+=m.chars}else if(m.isInsert())for(a[l++]=m.text,c=0;c<m.text.length;c++){var g={};for(h in m.attributes)g[h]=m.attributes[h],_e.assert(g[h]!==!1);s.push(g)}else u+=m.chars}if(u!==i.length)throw new Error("The operation didn't operate on the whole string.");var v=a.join("");return _e.assert(v.length===s.length),v},n.prototype.invert=function(i){for(var r=0,s=new n,o=this.ops,a=0,l=o.length;a<l;a++){var c=o[a];c.isRetain()?(s.retain(c.chars),r+=c.chars):c.isInsert()?s.delete(c.text.length):(s.insert(i.slice(r,r+c.chars)),r+=c.chars)}return s},n.prototype.compose=function(i){var r=this;if(r.targetLength!==i.baseLength)throw new Error("The base length of the second operation has to be the target length of the first operation");function s(d,m,b){var A={},g;for(g in d)A[g]=d[g];for(g in m)b&&m[g]===!1?delete A[g]:A[g]=m[g];return A}for(var o=new n,a=r.clone().ops,l=i.clone().ops,c=0,h=0,u=a[c++],f=l[h++],p;!(typeof u=="undefined"&&typeof f=="undefined");){if(u&&u.isDelete()){o.delete(u.chars),u=a[c++];continue}if(f&&f.isInsert()){o.insert(f.text,f.attributes),f=l[h++];continue}if(typeof u=="undefined")throw new Error("Cannot compose operations: first operation is too short.");if(typeof f=="undefined")throw new Error("Cannot compose operations: first operation is too long.");if(u.isRetain()&&f.isRetain())p=s(u.attributes,f.attributes),u.chars>f.chars?(o.retain(f.chars,p),u.chars-=f.chars,f=l[h++]):u.chars===f.chars?(o.retain(u.chars,p),u=a[c++],f=l[h++]):(o.retain(u.chars,p),f.chars-=u.chars,u=a[c++]);else if(u.isInsert()&&f.isDelete())u.text.length>f.chars?(u.text=u.text.slice(f.chars),f=l[h++]):u.text.length===f.chars?(u=a[c++],f=l[h++]):(f.chars-=u.text.length,u=a[c++]);else if(u.isInsert()&&f.isRetain())p=s(u.attributes,f.attributes,!0),u.text.length>f.chars?(o.insert(u.text.slice(0,f.chars),p),u.text=u.text.slice(f.chars),f=l[h++]):u.text.length===f.chars?(o.insert(u.text,p),u=a[c++],f=l[h++]):(o.insert(u.text,p),f.chars-=u.text.length,u=a[c++]);else if(u.isRetain()&&f.isDelete())u.chars>f.chars?(o.delete(f.chars),u.chars-=f.chars,f=l[h++]):u.chars===f.chars?(o.delete(f.chars),u=a[c++],f=l[h++]):(o.delete(u.chars),f.chars-=u.chars,u=a[c++]);else throw new Error("This shouldn't happen: op1: "+JSON.stringify(u)+", op2: "+JSON.stringify(f))}return o};function e(i){var r=i.ops;switch(r.length){case 1:return r[0];case 2:return r[0].isRetain()?r[1]:r[1].isRetain()?r[0]:null;case 3:if(r[0].isRetain()&&r[2].isRetain())return r[1]}return null}function t(i){return i.ops[0].isRetain()?i.ops[0].chars:0}return n.prototype.shouldBeComposedWith=function(i){if(this.isNoop()||i.isNoop())return!0;var r=t(this),s=t(i),o=e(this),a=e(i);return!o||!a?!1:o.isInsert()&&a.isInsert()?r+o.text.length===s:o.isDelete()&&a.isDelete()?s+a.chars===r||r===s:!1},n.prototype.shouldBeComposedWithInverted=function(i){if(this.isNoop()||i.isNoop())return!0;var r=t(this),s=t(i),o=e(this),a=e(i);return!o||!a?!1:o.isInsert()&&a.isInsert()?r+o.text.length===s||r===s:o.isDelete()&&a.isDelete()?s+a.chars===r:!1},n.transformAttributes=function(i,r){var s={},o={},a,l={};for(a in i)l[a]=!0;for(a in r)l[a]=!0;for(a in l){var c=i[a],h=r[a];_e.assert(c!=null||h!=null),c==null?o[a]=h:h==null?s[a]=c:c===h||(s[a]=c)}return[s,o]},n.transform=function(i,r){if(i.baseLength!==r.baseLength)throw new Error("Both operations have to have the same base length");for(var s=new n,o=new n,a=i.clone().ops,l=r.clone().ops,c=0,h=0,u=a[c++],f=l[h++];!(typeof u=="undefined"&&typeof f=="undefined");){if(u&&u.isInsert()){s.insert(u.text,u.attributes),o.retain(u.text.length),u=a[c++];continue}if(f&&f.isInsert()){s.retain(f.text.length),o.insert(f.text,f.attributes),f=l[h++];continue}if(typeof u=="undefined")throw new Error("Cannot transform operations: first operation is too short.");if(typeof f=="undefined")throw new Error("Cannot transform operations: first operation is too long.");var p;if(u.isRetain()&&f.isRetain()){var d=n.transformAttributes(u.attributes,f.attributes);u.chars>f.chars?(p=f.chars,u.chars-=f.chars,f=l[h++]):u.chars===f.chars?(p=f.chars,u=a[c++],f=l[h++]):(p=u.chars,f.chars-=u.chars,u=a[c++]),s.retain(p,d[0]),o.retain(p,d[1])}else if(u.isDelete()&&f.isDelete())u.chars>f.chars?(u.chars-=f.chars,f=l[h++]):u.chars===f.chars?(u=a[c++],f=l[h++]):(f.chars-=u.chars,u=a[c++]);else if(u.isDelete()&&f.isRetain())u.chars>f.chars?(p=f.chars,u.chars-=f.chars,f=l[h++]):u.chars===f.chars?(p=f.chars,u=a[c++],f=l[h++]):(p=u.chars,f.chars-=u.chars,u=a[c++]),s.delete(p);else if(u.isRetain()&&f.isDelete())u.chars>f.chars?(p=f.chars,u.chars-=f.chars,f=l[h++]):u.chars===f.chars?(p=u.chars,u=a[c++],f=l[h++]):(p=u.chars,f.chars-=u.chars,u=a[c++]),o.delete(p);else throw new Error("The two operations aren't compatible")}return[s,o]},n.prototype.transform=function(i){return n.transform(this,i)},n}(),PV=function(n){var e=100;function t(a,l,c){this.ref_=a,this.ready_=!1,this.firebaseCallbacks_=[],this.zombie_=!1,this.document_=new Vt,this.revision_=0,this.pendingReceivedRevisions_={};var h=this;if(l){this.setUserId(l),this.setColor(c);var u=a.root.child(".info/connected");this.firebaseOn_(u,"value",function(f){f.val()===!0&&h.initializeUserData_()},this),this.on("ready",function(){h.monitorCursors_()})}else this.userId_=a.push().key;setTimeout(function(){h.monitorHistory_()},0)}_e.makeEventEmitter(t,["ready","cursor","operation","ack","retry"]),t.prototype.dispose=function(){var a=this;if(this.removeFirebaseCallbacks_(),this.handleInitialRevisions_=()=>{},!this.ready_){this.on("ready",function(){a.dispose()});return}this.userRef_&&(this.userRef_.child("cursor").remove(),this.userRef_.child("color").remove()),this.ref_=null,this.document_=null,this.zombie_=!0},t.prototype.setUserId=function(a){this.userRef_&&(this.userRef_.child("cursor").remove(),this.userRef_.child("cursor").onDisconnect().cancel(),this.userRef_.child("color").remove(),this.userRef_.child("color").onDisconnect().cancel()),this.userId_=a,this.userRef_=this.ref_.child("users").child(a),this.initializeUserData_()},t.prototype.isHistoryEmpty=function(){return i(this.ready_,"Not ready yet."),this.revision_===0},t.prototype.sendOperation=function(a,l){var c=this;if(!this.ready_){this.on("ready",function(){c.trigger("retry")});return}i(this.document_.targetLength===a.baseLength,"sendOperation() called with invalid operation.");var h=s(this.revision_);function u(f,p){c.ref_.child("history").child(f).transaction(function(d){if(d===null)return p},function(d,m,b){if(d)if(d.message==="disconnect")c.sent_&&c.sent_.id===f?setTimeout(function(){u(f,p)},0):l&&l(d,!1);else throw _e.log("Transaction failure!",d),d;else l&&l(null,m)},!1)}this.sent_={id:h,op:a},u(h,{a:c.userId_,o:a.toJSON(),t:bc.database.ServerValue.TIMESTAMP})},t.prototype.sendCursor=function(a){this.userRef_.child("cursor").set(a),this.cursor_=a},t.prototype.setColor=function(a){this.userRef_.child("color").set(a),this.color_=a},t.prototype.getDocument=function(){return this.document_},t.prototype.registerCallbacks=function(a){for(var l in a)this.on(l,a[l])},t.prototype.initializeUserData_=function(){this.userRef_.child("cursor").onDisconnect().remove(),this.userRef_.child("color").onDisconnect().remove(),this.sendCursor(this.cursor_||null),this.setColor(this.color_||null)},t.prototype.monitorCursors_=function(){var a=this.ref_.child("users"),l=this;function c(h){var u=h.key,f=h.val();l.trigger("cursor",u,f.cursor,f.color)}this.firebaseOn_(a,"child_added",c),this.firebaseOn_(a,"child_changed",c),this.firebaseOn_(a,"child_removed",function(h){var u=h.key;l.trigger("cursor",u,null)})},t.prototype.monitorHistory_=function(){var a=this;this.ref_.child("checkpoint").once("value",function(l){if(!a.zombie_){var c=l.child("id").val(),h=l.child("o").val(),u=l.child("a").val();h!=null&&c!=null&&u!==null?(a.pendingReceivedRevisions_[c]={o:h,a:u},a.checkpointRevision_=o(c),a.monitorHistoryStartingAt_(a.checkpointRevision_+1)):(a.checkpointRevision_=0,a.monitorHistoryStartingAt_(a.checkpointRevision_))}})},t.prototype.monitorHistoryStartingAt_=function(a){var l=this.ref_.child("history").startAt(null,s(a)),c=this;setTimeout(function(){c.firebaseOn_(l,"child_added",function(h){var u=h.key;c.pendingReceivedRevisions_[u]=h.val(),c.ready_&&c.handlePendingReceivedRevisions_()}),l.once("value",function(){c.handleInitialRevisions_()})},0)},t.prototype.handleInitialRevisions_=function(){i(!this.ready_,"Should not be called multiple times."),this.revision_=this.checkpointRevision_;for(var a=s(this.revision_),l=this.pendingReceivedRevisions_;l[a]!=null;){var c=this.parseRevision_(l[a]);c?this.document_=this.document_.compose(c.operation):_e.log("Invalid operation.",this.ref_.toString(),a,l[a]),delete l[a],this.revision_++,a=s(this.revision_)}this.trigger("operation",this.document_),this.ready_=!0;var h=this;setTimeout(function(){h.trigger("ready")},0)},t.prototype.handlePendingReceivedRevisions_=function(){for(var a=this.pendingReceivedRevisions_,l=s(this.revision_),c=!1;a[l]!=null;){this.revision_++;var h=this.parseRevision_(a[l]);h?(this.document_=this.document_.compose(h.operation),this.sent_&&l===this.sent_.id?this.sent_.op.equals(h.operation)&&h.author===this.userId_?(this.revision_%e===0&&this.saveCheckpoint_(),this.sent_=null,this.trigger("ack")):(c=!0,this.trigger("operation",h.operation)):this.trigger("operation",h.operation)):_e.log("Invalid operation.",this.ref_.toString(),l,a[l]),delete a[l],l=s(this.revision_)}c&&(this.sent_=null,this.trigger("retry"))},t.prototype.parseRevision_=function(a){if(typeof a!="object"||typeof a.a!="string"||typeof a.o!="object")return null;var l=null;try{l=Vt.fromJSON(a.o)}catch{return null}return l.baseLength!==this.document_.targetLength?null:{author:a.a,operation:l}},t.prototype.saveCheckpoint_=function(){this.ref_.child("checkpoint").set({a:this.userId_,o:this.document_.toJSON(),id:s(this.revision_-1)})},t.prototype.firebaseOn_=function(a,l,c,h){return this.firebaseCallbacks_.push({ref:a,eventType:l,callback:c,context:h}),a.on(l,c,h),c},t.prototype.firebaseOff_=function(a,l,c,h){a.off(l,c,h);for(var u=0;u<this.firebaseCallbacks_.length;u++){var f=this.firebaseCallbacks_[u];if(f.ref===a&&f.eventType===l&&f.callback===c&&f.context===h){this.firebaseCallbacks_.splice(u,1);break}}},t.prototype.removeFirebaseCallbacks_=function(){for(var a=0;a<this.firebaseCallbacks_.length;a++){var l=this.firebaseCallbacks_[a];l.ref.off(l.eventType,l.callback,l.context)}this.firebaseCallbacks_=[]};function i(a,l){if(!a)throw new Error(l||"assertion error")}var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(a){if(a===0)return"A0";for(var l="";a>0;){var c=a%r.length;l=r[c]+l,a-=c,a/=r.length}var h=r[l.length+9];return h+l}function o(a){i(a.length>0&&a[0]===r[a.length+8]);for(var l=0,c=1;c<a.length;c++)l*=r.length,l+=r.indexOf(a[c]);return l}return t}(),Qe={BOLD:"b",ITALIC:"i",UNDERLINE:"u",STRIKE:"s",FONT:"f",FONT_SIZE:"fs",COLOR:"c",BACKGROUND_COLOR:"bc",ENTITY_SENTINEL:"ent",LINE_SENTINEL:"l",LINE_INDENT:"li",LINE_ALIGN:"la",LIST_TYPE:"lt"},Rf={LINE_SENTINEL_CHARACTER:"\uE000",ENTITY_SENTINEL_CHARACTER:"\uE001"},Jo=function(){var n=Qe.ENTITY_SENTINEL,e=n+"_";function t(i,r){if(!(this instanceof t))return new t(i,r);this.type=i,this.info=r||{}}return t.prototype.toAttributes=function(){var i={};i[n]=this.type;for(var r in this.info)i[e+r]=this.info[r];return i},t.fromAttributes=function(i){var r=i[n],s={};for(var o in i)o.indexOf(e)===0&&(s[o.substr(e.length)]=i[o]);return new t(r,s)},t}(),o0=()=>window.document,DV=function(){function n(){this.entities_={};var e=["src","alt","width","height","style","class"];this.register("img",{render:function(t){_e.assert(t.src,"image entity should have 'src'!");for(var i=["src","alt","width","height","style","class"],r="<img ",s=0;s<i.length;s++){var o=i[s];o in t&&(r+=" "+o+'="'+t[o]+'"')}return r+=">",r},fromElement:function(t){for(var i={},r=0;r<e.length;r++){var s=e[r];t.hasAttribute(s)&&(i[s]=t.getAttribute(s))}return i}})}return n.prototype.register=function(e,t){_e.assert(t.render,"Entity options should include a 'render' function!"),_e.assert(t.fromElement,"Entity options should include a 'fromElement' function!"),this.entities_[e]=t},n.prototype.renderToElement=function(e,t){return this.tryRenderToElement_(e,"render",t)},n.prototype.exportToElement=function(e){var t=this.tryRenderToElement_(e,"export")||this.tryRenderToElement_(e,"getHtml")||this.tryRenderToElement_(e,"render");return t.setAttribute("data-firepad-entity",e.type),t},n.prototype.updateElement=function(e,t){var i=e.type,r=e.info;this.entities_[i]&&typeof this.entities_[i].update!="undefined"&&this.entities_[i].update(r,t)},n.prototype.fromElement=function(e){var t=e.getAttribute("data-firepad-entity");if(t||(t=e.nodeName.toLowerCase()),t&&this.entities_[t]){var i=this.entities_[t].fromElement(e);return new Jo(t,i)}},n.prototype.tryRenderToElement_=function(e,t,i){var r=e.type,s=e.info;if(this.entities_[r]&&this.entities_[r][t]){var o=o0(),a=this.entities_[r][t](s,i,o);if(a){if(typeof a=="string"){var l=o0().createElement("div");return l.innerHTML=a,l.childNodes[0]}else if(typeof a=="object")return _e.assert(typeof a.nodeType!="undefined","Error rendering "+r+" entity.  render() function must return an html string or a DOM element."),a}}},n.prototype.entitySupportsUpdate=function(e){return this.entities_[e]&&this.entities_[e].update},n}(),Tc=function(){function n(e){if(!(this instanceof n))return new n(e);this.attributes=e||{},this.attributes[Qe.LINE_SENTINEL]=!0}return n.LIST_TYPE={NONE:!1,ORDERED:"o",UNORDERED:"u",TODO:"t",TODOCHECKED:"tc"},n.prototype.cloneWithNewAttribute_=function(e,t){var i={};for(var r in this.attributes)i[r]=this.attributes[r];return t===!1?delete i[e]:i[e]=t,new n(i)},n.prototype.indent=function(e){return this.cloneWithNewAttribute_(Qe.LINE_INDENT,e)},n.prototype.align=function(e){return this.cloneWithNewAttribute_(Qe.LINE_ALIGN,e)},n.prototype.listItem=function(e){return _e.assert(e===!1||e==="u"||e==="o"||e==="t"||e==="tc"),this.cloneWithNewAttribute_(Qe.LIST_TYPE,e)},n.prototype.getIndent=function(){return this.attributes[Qe.LINE_INDENT]||0},n.prototype.getAlign=function(){return this.attributes[Qe.LINE_ALIGN]||0},n.prototype.getListItem=function(){return this.attributes[Qe.LIST_TYPE]||!1},n}(),Qf=function(){function n(e){if(!(this instanceof n))return new n(e);this.attributes=e||{}}return n.prototype.cloneWithNewAttribute_=function(e,t){var i={};for(var r in this.attributes)i[r]=this.attributes[r];return t===!1?delete i[e]:i[e]=t,new n(i)},n.prototype.bold=function(e){return this.cloneWithNewAttribute_(Qe.BOLD,e)},n.prototype.italic=function(e){return this.cloneWithNewAttribute_(Qe.ITALIC,e)},n.prototype.underline=function(e){return this.cloneWithNewAttribute_(Qe.UNDERLINE,e)},n.prototype.strike=function(e){return this.cloneWithNewAttribute_(Qe.STRIKE,e)},n.prototype.font=function(e){return this.cloneWithNewAttribute_(Qe.FONT,e)},n.prototype.fontSize=function(e){return this.cloneWithNewAttribute_(Qe.FONT_SIZE,e)},n.prototype.color=function(e){return this.cloneWithNewAttribute_(Qe.COLOR,e)},n.prototype.backgroundColor=function(e){return this.cloneWithNewAttribute_(Qe.BACKGROUND_COLOR,e)},n}(),Pf=function(){function n(e,t){if(!(this instanceof n))return new n(e,t);this.text=e,this.formatting=t||Qf()}return n}(),vb=function(){function n(e,t){if(!(this instanceof n))return new n(e,t);Object.prototype.toString.call(e)!=="[object Array]"&&(typeof e=="undefined"?e=[]:e=[e]),this.textPieces=e,this.formatting=t||Tc()}return n}(),Nx=function(){var{LIST_TYPE:n}=Tc;function e(h,u,f){this.listType=h||n.UNORDERED,this.lineFormatting=u||Tc(),this.textFormatting=f||Qf()}e.prototype.withTextFormatting=function(h){return new e(this.listType,this.lineFormatting,h)},e.prototype.withLineFormatting=function(h){return new e(this.listType,h,this.textFormatting)},e.prototype.withListType=function(h){return new e(h,this.lineFormatting,this.textFormatting)},e.prototype.withIncreasedIndent=function(){var h=this.lineFormatting.indent(this.lineFormatting.getIndent()+1);return new e(this.listType,h,this.textFormatting)},e.prototype.withAlign=function(h){var u=this.lineFormatting.align(h);return new e(this.listType,u,this.textFormatting)};function t(){this.lines=[],this.currentLine=[],this.currentLineListItemType=null}t.prototype.newlineIfNonEmpty=function(h){this.cleanLine_(),this.currentLine.length>0&&this.newline(h)},t.prototype.newlineIfNonEmptyOrListItem=function(h){this.cleanLine_(),(this.currentLine.length>0||this.currentLineListItemType!==null)&&this.newline(h)},t.prototype.newline=function(h){this.cleanLine_();var u=h.lineFormatting;this.currentLineListItemType!==null&&(u=u.listItem(this.currentLineListItemType),this.currentLineListItemType=null),this.lines.push(vb(this.currentLine,u)),this.currentLine=[]},t.prototype.makeListItem=function(h){this.currentLineListItemType=h},t.prototype.cleanLine_=function(){if(this.currentLine.length>0){var h=this.currentLine.length-1;this.currentLine[0].text=this.currentLine[0].text.replace(/^ +/,""),this.currentLine[h].text=this.currentLine[h].text.replace(/ +$/g,"");for(var u=0;u<this.currentLine.length;u++)this.currentLine[u].text=this.currentLine[u].text.replace(/\u00a0/g," ")}this.currentLine.length===1&&this.currentLine[0].text===""&&(this.currentLine=[])};var i;function r(h,u){var f=o0().createElement("div");f.innerHTML=h,i=u;var p=new t,d=new e;return o(f,d,p),p.lines}var s=s||{ELEMENT_NODE:1,TEXT_NODE:3};function o(h,u,f){if(h.nodeType===s.ELEMENT_NODE){var p=i.fromElement(h);if(p){f.currentLine.push(new Pf(Rf.ENTITY_SENTINEL_CHARACTER,new Qf(p.toAttributes())));return}}switch(h.nodeType){case s.TEXT_NODE:var d=h.nodeValue.replace(/[ \n\t]+/g," ");f.currentLine.push(Pf(d,u.textFormatting));break;case s.ELEMENT_NODE:var m=h.getAttribute("style")||"";switch(u=c(u,m),h.nodeName.toLowerCase()){case"div":case"h1":case"h2":case"h3":case"p":f.newlineIfNonEmpty(u),a(h,u,f),f.newlineIfNonEmpty(u);break;case"center":u=u.withAlign("center"),f.newlineIfNonEmpty(u),a(h,u.withAlign("center"),f),f.newlineIfNonEmpty(u);break;case"b":case"strong":a(h,u.withTextFormatting(u.textFormatting.bold(!0)),f);break;case"u":a(h,u.withTextFormatting(u.textFormatting.underline(!0)),f);break;case"i":case"em":a(h,u.withTextFormatting(u.textFormatting.italic(!0)),f);break;case"s":a(h,u.withTextFormatting(u.textFormatting.strike(!0)),f);break;case"font":var b=h.getAttribute("face"),A=h.getAttribute("color"),g=parseInt(h.getAttribute("size"));b&&(u=u.withTextFormatting(u.textFormatting.font(b))),A&&(u=u.withTextFormatting(u.textFormatting.color(A))),g&&(u=u.withTextFormatting(u.textFormatting.fontSize(g))),a(h,u,f);break;case"br":f.newline(u);break;case"ul":f.newlineIfNonEmptyOrListItem(u);var v=h.getAttribute("class")==="firepad-todo"?n.TODO:n.UNORDERED;a(h,u.withListType(v).withIncreasedIndent(),f),f.newlineIfNonEmpty(u);break;case"ol":f.newlineIfNonEmptyOrListItem(u),a(h,u.withListType(n.ORDERED).withIncreasedIndent(),f),f.newlineIfNonEmpty(u);break;case"li":l(h,u,f);break;case"style":break;default:a(h,u,f);break}break}}function a(h,u,f){if(h.hasChildNodes())for(var p=0;p<h.childNodes.length;p++)o(h.childNodes[p],u,f)}function l(h,u,f){f.newlineIfNonEmptyOrListItem(u);var p=h.getAttribute("class")==="firepad-checked"?n.TODOCHECKED:u.listType;f.makeListItem(p);var d=f.currentLine;a(h,u,f),(d===f.currentLine||f.currentLine.length>0)&&f.newline(u)}function c(h,u){for(var f=h.textFormatting,p=h.lineFormatting,d=u.split(";"),m=0;m<d.length;m++){var b=d[m].split(":");if(b.length===2){var A=_e.trim(b[0]).toLowerCase(),g=_e.trim(b[1]).toLowerCase();switch(A){case"text-decoration":var v=g.indexOf("underline")>=0,O=g.indexOf("line-through")>=0;f=f.underline(v).strike(O);break;case"font-weight":var _=g==="bold"||parseInt(g)>=600;f=f.bold(_);break;case"font-style":var x=g==="italic"||g==="oblique";f=f.italic(x);break;case"color":f=f.color(g);break;case"background-color":f=f.backgroundColor(g);break;case"text-align":p=p.align(g);break;case"font-size":var E=null,T=["px","pt","%","em","xx-small","x-small","small","medium","large","x-large","xx-large","smaller","larger"];_e.stringEndsWith(g,T)?E=g:parseInt(g)&&(E=parseInt(g)+"px"),E&&(f=f.fontSize(E));break;case"font-family":var S=_e.trim(g.split(",")[0]);S=S.replace(/['"]/g,""),S=S.replace(/\w\S*/g,function(C){return C.charAt(0).toUpperCase()+C.substr(1).toLowerCase()}),f=f.font(S);break}}}return h.withLineFormatting(p).withTextFormatting(f)}return r}(),NV=function(){var{LIST_TYPE:n}=Tc,e=`<style>ul.firepad-todo { list-style: none; margin-left: 0; padding-left: 0; } ul.firepad-todo > li { padding-left: 1em; text-indent: -1em; } ul.firepad-todo > li:before { content: "\\2610"; padding-right: 5px; } ul.firepad-todo > li.firepad-checked:before { content: "\\2611"; padding-right: 5px; }</style>
`;function t(a){return a===n.ORDERED?"<ol>":a===n.UNORDERED?"<ul>":'<ul class="firepad-todo">'}function i(a){return a===n.ORDERED?"</ol>":"</ul>"}function r(a,l){return a===l||a===n.TODO&&l===n.TODOCHECKED||a===n.TODOCHECKED&&l===n.TODO}function s(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g,"&nbsp;")}function o(a,l){for(var c="",h=!0,u=[],f=!1,p=!0,d=!0,m=0,b=a.ops[m],A=!1;b;){_e.assert(b.isInsert());var g=b.attributes;if(h){h=!1;var v=0,O=null,_="left";for((Qe.LINE_SENTINEL in g)&&(v=g[Qe.LINE_INDENT]||0,O=g[Qe.LIST_TYPE]||null,_=g[Qe.LINE_ALIGN]||"left"),O&&(v=v||1),f?(c+="</li>",f=!1):p||(d&&(c+="<br/>"),c+="</div>"),p=!1,_e.assert(v>=0,"Indent must not be negative.");u.length>v||v===u.length&&O!==null&&!r(O,u[u.length-1]);)c+=i(u.pop());for(;u.length<v;){var x=O||n.UNORDERED;A=O==n.TODO||O==n.TODOCHECKED||A,c+=t(x),u.push(x)}var E=_!=="left"?' style="text-align:'+_+'"':"";if(O){var T="";switch(O){case n.TODOCHECKED:T=' class="firepad-checked"';break;case n.TODO:T=' class="firepad-unchecked"';break}c+="<li"+T+E+">",f=!0}else c+="<div"+E+">";d=!0}if(Qe.LINE_SENTINEL in g){b=a.ops[++m];continue}if(Qe.ENTITY_SENTINEL in g){for(var S=0;S<b.text.length;S++){var C=Jo.fromAttributes(g),B=l.exportToElement(C);c+=B.outerHTML}b=a.ops[++m];continue}var M="",D="";for(var N in g){var P=g[N],X,Z;N===Qe.BOLD||N===Qe.ITALIC||N===Qe.UNDERLINE||N===Qe.STRIKE?(_e.assert(P===!0),X=Z=N):N===Qe.FONT_SIZE?(X='span style="font-size: '+P,X+=typeof P!="string"||P.indexOf("px",P.length-2)===-1?'px"':'"',Z="span"):N===Qe.FONT?(X='span style="font-family: '+P+'"',Z="span"):N===Qe.COLOR?(X='span style="color: '+P+'"',Z="span"):N===Qe.BACKGROUND_COLOR?(X='span style="background-color: '+P+'"',Z="span"):_e.log(!1,"Encountered unknown attribute while rendering html: "+N),X&&(M+="<"+X+">"),Z&&(D="</"+Z+">"+D)}var K=b.text,ee=K.indexOf(`
`);ee>=0?(h=!0,ee<K.length-1?b=new El("insert",K.substr(ee+1),g):b=a.ops[++m],K=K.substr(0,ee)):b=a.ops[++m],K=K.replace(/  +/g,function(J){return new Array(J.length+1).join("\xA0")}).replace(/^ /,"\xA0").replace(/ $/,"\xA0"),K.length>0&&(d=!1),c+=M+s(K)+D}for(f?c+="</li>":p||(d&&(c+="&nbsp;"),c+="</div>");u.length>0;)c+=i(u.pop());return A&&(c=e+c),c}return o}(),LV=function(n,e){var t=[];function i(o,a){o instanceof Pf&&(a=o.formatting.attributes,o=o.text),t.push({string:o,attributes:a}),n=o[o.length-1]===`
`}function r(o,a){n&&i(Rf.LINE_SENTINEL_CHARACTER,o.formatting.attributes);for(var l=0;l<o.textPieces.length;l++)i(o.textPieces[l]);a&&i(`
`)}for(var s=0;s<e.length;s++)e[s]instanceof vb?r(e[s],s<e.length-1):i(e[s]);return t},ih=function(){function n(e,t){this.position=e,this.selectionEnd=t}return n.fromJSON=function(e){return new n(e.position,e.selectionEnd)},n.prototype.equals=function(e){return this.position===e.position&&this.selectionEnd===e.selectionEnd},n.prototype.compose=function(e){return e},n.prototype.transform=function(e){function t(r){for(var s=r,o=e.ops,a=0,l=e.ops.length;a<l&&(o[a].isRetain()?r-=o[a].chars:o[a].isInsert()?s+=o[a].text.length:(s-=Math.min(r,o[a].chars),r-=o[a].chars),!(r<0));a++);return s}var i=t(this.position);return this.position===this.selectionEnd?new n(i,i):new n(i,t(this.selectionEnd))},n}(),Bo=function(){function n(){this.state=t}n.prototype.setState=function(s){this.state=s},n.prototype.applyClient=function(s){this.setState(this.state.applyClient(this,s))},n.prototype.applyServer=function(s){this.setState(this.state.applyServer(this,s))},n.prototype.serverAck=function(){this.setState(this.state.serverAck(this))},n.prototype.serverRetry=function(){this.setState(this.state.serverRetry(this))},n.prototype.sendOperation=function(s){throw new Error("sendOperation must be defined in child class")},n.prototype.applyOperation=function(s){throw new Error("applyOperation must be defined in child class")};function e(){}n.Synchronized=e,e.prototype.applyClient=function(s,o){return s.sendOperation(o),new i(o)},e.prototype.applyServer=function(s,o){return s.applyOperation(o),this},e.prototype.serverAck=function(s){throw new Error("There is no pending operation.")},e.prototype.serverRetry=function(s){throw new Error("There is no pending operation.")};var t=new e;function i(s){this.outstanding=s}n.AwaitingConfirm=i,i.prototype.applyClient=function(s,o){return new r(this.outstanding,o)},i.prototype.applyServer=function(s,o){var a=this.outstanding.transform(o);return s.applyOperation(a[1]),new i(a[0])},i.prototype.serverAck=function(s){return t},i.prototype.serverRetry=function(s){return s.sendOperation(this.outstanding),this};function r(s,o){this.outstanding=s,this.buffer=o}return n.AwaitingWithBuffer=r,r.prototype.applyClient=function(s,o){var a=this.buffer.compose(o);return new r(this.outstanding,a)},r.prototype.applyServer=function(s,o){var a=this.outstanding.transform(o),l=this.buffer.transform(a[1]);return s.applyOperation(l[1]),new r(a[0],l[0])},r.prototype.serverRetry=function(s){var o=this.outstanding.compose(this.buffer);return s.sendOperation(o),new i(o)},r.prototype.serverAck=function(s){return s.sendOperation(this.buffer),new i(this.buffer)},n}(),BV=function(){var n="normal",e="undoing",t="redoing";function i(s){this.maxItems=s||50,this.state=n,this.dontCompose=!1,this.undoStack=[],this.redoStack=[]}i.prototype.add=function(s,o){if(this.state===e)this.redoStack.push(s),this.dontCompose=!0;else if(this.state===t)this.undoStack.push(s),this.dontCompose=!0;else{var a=this.undoStack;!this.dontCompose&&o&&a.length>0?a.push(s.compose(a.pop())):(a.push(s),a.length>this.maxItems&&a.shift()),this.dontCompose=!1,this.redoStack=[]}};function r(s,o){for(var a=[],l=o.constructor,c=s.length-1;c>=0;c--){var h=l.transform(s[c],o);(typeof h[0].isNoop!="function"||!h[0].isNoop())&&a.push(h[0]),o=h[1]}return a.reverse()}return i.prototype.transform=function(s){this.undoStack=r(this.undoStack,s),this.redoStack=r(this.redoStack,s)},i.prototype.performUndo=function(s){if(this.state=e,this.undoStack.length===0)throw new Error("undo not possible");s(this.undoStack.pop()),this.state=n},i.prototype.performRedo=function(s){if(this.state=t,this.redoStack.length===0)throw new Error("redo not possible");s(this.redoStack.pop()),this.state=n},i.prototype.canUndo=function(){return this.undoStack.length!==0},i.prototype.canRedo=function(){return this.redoStack.length!==0},i.prototype.isUndoing=function(){return this.state===e},i.prototype.isRedoing=function(){return this.state===t},i}(),a0=function(n){function e(s,o){this.wrapped=s,this.meta=o}e.prototype.apply=function(){return this.wrapped.apply.apply(this.wrapped,arguments)},e.prototype.invert=function(){var s=this.meta;return new e(this.wrapped.invert.apply(this.wrapped,arguments),s&&typeof s=="object"&&typeof s.invert=="function"?s.invert.apply(s,arguments):s)};function t(s,o){for(var a in s)s.hasOwnProperty(a)&&(o[a]=s[a])}function i(s,o){if(s&&typeof s=="object"){if(typeof s.compose=="function")return s.compose(o);var a={};return t(s,a),t(o,a),a}return o}e.prototype.compose=function(s){return new e(this.wrapped.compose(s.wrapped),i(this.meta,s.meta))};function r(s,o){return s&&typeof s=="object"&&typeof s.transform=="function"?s.transform(o):s}return e.transform=function(s,o){var a=s.wrapped.transform(o.wrapped);return[new e(a[0],r(s.meta,o.wrapped)),new e(a[1],r(o.meta,s.wrapped))]},e.prototype.transform=function(s){return e.transform(this,s)},e}(),pR=function(){function n(s,o){this.cursorBefore=s,this.cursorAfter=o}n.prototype.invert=function(){return new n(this.cursorAfter,this.cursorBefore)},n.prototype.compose=function(s){return new n(this.cursorBefore,s.cursorAfter)},n.prototype.transform=function(s){return new n(this.cursorBefore?this.cursorBefore.transform(s):null,this.cursorAfter?this.cursorAfter.transform(s):null)};function e(s,o){this.id=s,this.editorAdapter=o}e.prototype.setColor=function(s){this.color=s},e.prototype.updateCursor=function(s){this.removeCursor(),this.cursor=s,this.mark=this.editorAdapter.setOtherCursor(s,this.color,this.id)},e.prototype.removeCursor=function(){this.mark&&this.mark.clear()};function t(s,o){Bo.call(this),this.serverAdapter=s,this.editorAdapter=o,this.undoManager=new BV,this.clients={};var a=this;this.editorAdapter.registerCallbacks({change:function(l,c){a.onChange(l,c)},cursorActivity:function(){a.onCursorActivity()},blur:function(){a.onBlur()},focus:function(){a.onFocus()}}),this.editorAdapter.registerUndo(function(){a.undo()}),this.editorAdapter.registerRedo(function(){a.redo()}),this.serverAdapter.registerCallbacks({ack:function(){a.serverAck(),a.focused&&a.state instanceof Bo.Synchronized&&(a.updateCursor(),a.sendCursor(a.cursor)),a.emitStatus()},retry:function(){a.serverRetry()},operation:function(l){a.applyServer(l)},cursor:function(l,c,h){if(!(a.serverAdapter.userId_===l||!(a.state instanceof Bo.Synchronized))){var u=a.getClientObject(l);c?(h&&u.setColor(h),u.updateCursor(ih.fromJSON(c))):u.removeCursor()}}})}i(t,Bo),t.prototype.getClientObject=function(s){var o=this.clients[s];return o||(this.clients[s]=new e(s,this.editorAdapter))},t.prototype.applyUnredo=function(s){this.undoManager.add(this.editorAdapter.invertOperation(s)),this.editorAdapter.applyOperation(s.wrapped),this.cursor=s.meta.cursorAfter,this.cursor&&this.editorAdapter.setCursor(this.cursor),this.applyClient(s.wrapped)},t.prototype.undo=function(){var s=this;!this.undoManager.canUndo()||this.undoManager.performUndo(function(o){s.applyUnredo(o)})},t.prototype.redo=function(){var s=this;!this.undoManager.canRedo()||this.undoManager.performRedo(function(o){s.applyUnredo(o)})},t.prototype.onChange=function(s,o){var a=this.cursor;this.updateCursor();var l=this.undoManager.undoStack.length>0&&o.shouldBeComposedWithInverted(r(this.undoManager.undoStack).wrapped),c=new n(this.cursor,a);this.undoManager.add(new a0(o,c),l),this.applyClient(s)},t.prototype.updateCursor=function(){this.cursor=this.editorAdapter.getCursor()},t.prototype.onCursorActivity=function(){var s=this.cursor;this.updateCursor(),!(!this.focused||s&&this.cursor.equals(s))&&this.sendCursor(this.cursor)},t.prototype.onBlur=function(){this.cursor=null,this.sendCursor(null),this.focused=!1},t.prototype.onFocus=function(){this.focused=!0,this.onCursorActivity()},t.prototype.sendCursor=function(s){this.state instanceof Bo.AwaitingWithBuffer||this.serverAdapter.sendCursor(s)},t.prototype.sendOperation=function(s){this.serverAdapter.sendOperation(s),this.emitStatus()},t.prototype.applyOperation=function(s){this.editorAdapter.applyOperation(s),this.updateCursor(),this.undoManager.transform(new a0(s,null))},t.prototype.emitStatus=function(){var s=this;setTimeout(function(){s.trigger("synced",s.state instanceof Bo.Synchronized)},0)};function i(s,o){function a(){}a.prototype=o.prototype,s.prototype=new a,s.prototype.constructor=s}function r(s){return s[s.length-1]}return t}();_e.makeEventEmitter(pR,["synced"]);const mR=function(){function n(c){this.rtcm=c,this.cm=c.codeMirror,s(this,"onChange"),s(this,"onAttributesChange"),s(this,"onCursorActivity"),s(this,"onFocus"),s(this,"onBlur"),this.rtcm.on("change",this.onChange),this.rtcm.on("attributesChange",this.onAttributesChange),this.cm.on("cursorActivity",this.onCursorActivity),this.cm.on("focus",this.onFocus),this.cm.on("blur",this.onBlur)}n.prototype.detach=function(){this.rtcm.off("change",this.onChange),this.rtcm.off("attributesChange",this.onAttributesChange),this.cm.off("cursorActivity",this.onCursorActivity),this.cm.off("focus",this.onFocus),this.cm.off("blur",this.onBlur)};function e(c,h){return c.line<h.line?-1:c.line>h.line?1:c.ch<h.ch?-1:c.ch>h.ch?1:0}function t(c,h){return e(c,h)===0}function i(c){var h=c.lineCount()-1;return c.indexFromPos({line:h,ch:c.getLine(h).length})}n.operationFromCodeMirrorChanges=function(c,h){for(var u=i(h),f=new Vt().retain(u),p=new Vt().retain(u),d=c.length-1;d>=0;d--){var m=c[d],b=m.start,A=u-b-m.text.length;f=new Vt().retain(b).delete(m.removed.length).insert(m.text,m.attributes).retain(A).compose(f),p=p.compose(new Vt().retain(b).delete(m.text.length).insert(m.removed,m.removedAttributes).retain(A)),u+=m.removed.length-m.text.length}return[f,p]},n.operationFromAttributesChanges=function(c,h){for(var u=i(h),f=new Vt,p=new Vt,d=0,m=0;m<c.length;m++){var b=c[m],A=b.start-d;r(A>=0),f.retain(A),p.retain(A);var g=b.end-b.start;f.retain(g,b.attributes),p.retain(g,b.attributesInverse),d=b.start+g}return f.retain(u-d),p.retain(u-d),[f,p]},n.prototype.registerCallbacks=function(c){this.callbacks=c},n.prototype.onChange=function(c,h){if(h[0].origin!=="RTCMADAPTER"){var u=n.operationFromCodeMirrorChanges(h,this.cm);this.trigger("change",u[0],u[1])}},n.prototype.onAttributesChange=function(c,h){if(h[0].origin!=="RTCMADAPTER"){var u=n.operationFromAttributesChanges(h,this.cm);this.trigger("change",u[0],u[1])}},n.prototype.onCursorActivity=function(){var c=this;setTimeout(function(){c.trigger("cursorActivity")},1)},n.prototype.onFocus=function(){this.trigger("focus")},n.prototype.onBlur=function(){this.cm.somethingSelected()||this.trigger("blur")},n.prototype.getValue=function(){return this.cm.getValue()},n.prototype.getCursor=function(){var c=this.cm,h=c.getCursor(),u=c.indexFromPos(h),f;if(c.somethingSelected()){var p=c.getCursor(!0),d=t(h,p)?c.getCursor(!1):p;f=c.indexFromPos(d)}else f=u;return new ih(u,f)},n.prototype.setCursor=function(c){this.cm.setSelection(this.cm.posFromIndex(c.position),this.cm.posFromIndex(c.selectionEnd))},n.prototype.addStyleRule=function(c){if(!(typeof document=="undefined"||document===null)){if(!this.addedStyleRules){this.addedStyleRules={};var h=document.createElement("style");document.documentElement.getElementsByTagName("head")[0].appendChild(h),this.addedStyleSheet=h.sheet}if(!this.addedStyleRules[c])return this.addedStyleRules[c]=!0,this.addedStyleSheet.insertRule(c,0)}},n.prototype.setOtherCursor=function(c,h,u){var f=this.cm.posFromIndex(c.position);if(!(typeof h!="string"||!h.match(/^#[a-fA-F0-9]{3,6}$/))){var p=this.rtcm.end();if(!(typeof c!="object"||typeof c.position!="number"||typeof c.selectionEnd!="number")&&!(c.position<0||c.position>p||c.selectionEnd<0||c.selectionEnd>p))if(c.position===c.selectionEnd){var d=this.cm.cursorCoords(f),m=document.createElement("span");return m.className="other-client",m.style.borderLeftWidth="2px",m.style.borderLeftStyle="solid",m.style.borderLeftColor=h,m.style.marginLeft=m.style.marginRight="-1px",m.style.height=(d.bottom-d.top)*.9+"px",m.setAttribute("data-clientid",u),m.style.zIndex=0,this.cm.setBookmark(f,{widget:m,insertLeft:!0})}else{var b="selection-"+h.replace("#",""),A=.4,g="."+b+" { background: "+a(h)+`;
 background: `+a(h,A)+";}";this.addStyleRule(g);var v,O;return c.selectionEnd>c.position?(v=f,O=this.cm.posFromIndex(c.selectionEnd)):(v=this.cm.posFromIndex(c.selectionEnd),O=f),this.cm.markText(v,O,{className:b})}}},n.prototype.trigger=function(c){var h=Array.prototype.slice.call(arguments,1),u=this.callbacks&&this.callbacks[c];u&&u.apply(this,h)},n.prototype.applyOperation=function(c){c.ops.length>10&&this.rtcm.codeMirror.getWrapperElement().setAttribute("style","display: none");for(var h=c.ops,u=0,f=0,p=h.length;f<p;f++){var d=h[f];d.isRetain()?(o(d.attributes)||this.rtcm.updateTextAttributes(u,u+d.chars,function(m){for(var b in d.attributes)d.attributes[b]===!1?delete m[b]:m[b]=d.attributes[b]},"RTCMADAPTER",!0),u+=d.chars):d.isInsert()?(this.rtcm.insertText(u,d.text,d.attributes,"RTCMADAPTER"),u+=d.text.length):d.isDelete()&&this.rtcm.removeText(u,u+d.chars,"RTCMADAPTER")}c.ops.length>10&&(this.rtcm.codeMirror.getWrapperElement().setAttribute("style",""),this.rtcm.codeMirror.refresh())},n.prototype.registerUndo=function(c){this.cm.undo=c},n.prototype.registerRedo=function(c){this.cm.redo=c},n.prototype.invertOperation=function(c){for(var h=0,u=this.rtcm.codeMirror,f,p,d=new Vt,m=0;m<c.wrapped.ops.length;m++){var b=c.wrapped.ops[m];if(b.isRetain())if(o(b.attributes))d.retain(b.chars),h+=b.chars;else for(f=this.rtcm.getAttributeSpans(h,h+b.chars),p=0;p<f.length;p++){var A={};for(var g in b.attributes){var v=b.attributes[g],O=f[p].attributes[g];v===!1?O&&(A[g]=O):v!==O&&(A[g]=O||!1)}d.retain(f[p].length,A),h+=f[p].length}else if(b.isInsert())d.delete(b.text.length);else if(b.isDelete()){var _=u.getRange(u.posFromIndex(h),u.posFromIndex(h+b.chars));f=this.rtcm.getAttributeSpans(h,h+b.chars);var x=0;for(p=0;p<f.length;p++)d.insert(_.substr(x,f[p].length),f[p].attributes),x+=f[p].length;h+=b.chars}}return new a0(d,c.meta.invert())};function r(c,h){if(!c)throw new Error(h||"assertion error")}function s(c,h){var u=c[h];c[h]=function(){u.apply(c,arguments)}}function o(c){for(var h in c)return!1;return!0}function a(c,h){if(typeof c!="string")throw new TypeError("Expected a string");c=c.replace(/^#/,""),c.length===3&&(c=c[0]+c[0]+c[1]+c[1]+c[2]+c[2]);var u=parseInt(c,16),f=[u>>16,u>>8&255,u&255],p="rgb";return l(h)&&(p="rgba",f.push(h)),p+"("+f.join(",")+")"}function l(c){return c!=null}return n}(),Hi=function(){function n(e,t){this.pos=e,this.length=t}return n.prototype.end=function(){return this.pos+this.length},n}(),MV=function(){function n(o,a){if(!o)throw new Error("AnnotationList assertion failed"+(a?": "+a:""))}function e(o,a){this.pos=o,this.length=a.length,this.annotation=a.annotation,this.attachedObject_=a.attachedObject}e.prototype.getAttachedObject=function(){return this.attachedObject_};function t(o,a){this.pos=o,this.length=a.length,this.annotation=a.annotation,this.node_=a}t.prototype.attachObject=function(o){this.node_.attachedObject=o};var i={equals:function(){return!1}};function r(o){this.head_=new s(0,i),this.changeHandler_=o}r.prototype.insertAnnotatedSpan=function(o,a){this.wrapOperation_(new Hi(o.pos,0),function(l,c){n(!c||c.next===null);var h=new s(o.length,a);if(c){n(o.pos>l&&o.pos<l+c.length);var u=new s(0,i);return u.next=new s(o.pos-l,c.annotation),u.next.next=h,h.next=new s(l+c.length-o.pos,c.annotation),u.next}else return h})},r.prototype.removeSpan=function(o){o.length!==0&&this.wrapOperation_(o,function(a,l){n(l!==null);var c=new s(0,i),h=c;for(o.pos>a&&(h.next=new s(o.pos-a,l.annotation),h=h.next);o.end()>a+l.length;)a+=l.length,l=l.next;var u=a+l.length-o.end();return u>0&&(h.next=new s(u,l.annotation)),c.next})},r.prototype.updateSpan=function(o,a){o.length!==0&&this.wrapOperation_(o,function(l,c){n(c!==null);var h=new s(0,i),u=h,f=l,p=o.pos-f;for(n(p<c.length),p>0&&(u.next=new s(p,c.annotation),u=u.next,f+=u.length);c!==null&&o.end()>=l+c.length;){var d=l+c.length-f;u.next=new s(d,a(c.annotation,d)),u=u.next,l+=c.length,c=c.next,f=l}var m=o.end()-f;return m>0&&(n(m<c.length),u.next=new s(m,a(c.annotation,m)),u=u.next,f+=u.length,u.next=new s(l+c.length-f,c.annotation)),h.next})},r.prototype.wrapOperation_=function(o,a){if(o.pos<0)throw new Error("Span start cannot be negative.");var l=[],c=[],h=this.getAffectedNodes_(o),u;h.start!==null?(u=h.end.next,h.end.next=null):u=h.succ;var f=a(h.startPos,h.start),p=!1,d=!1;if(f){this.mergeNodesWithSameAnnotations_(f);var m;for(h.pred&&h.pred.annotation.equals(f.annotation)?(p=!0,f.length+=h.pred.length,h.beforePred.next=f,m=h.predPos):(h.beforeStart.next=f,m=h.startPos);f.next;)c.push(new t(m,f)),m+=f.length,f=f.next;h.succ&&h.succ.annotation.equals(f.annotation)?(f.length+=h.succ.length,d=!0,f.next=h.succ.next):f.next=u,c.push(new t(m,f))}else h.pred&&h.succ&&h.pred.annotation.equals(h.succ.annotation)?(p=!0,d=!0,f=new s(h.pred.length+h.succ.length,h.pred.annotation),h.beforePred.next=f,f.next=h.succ.next,c.push(new t(h.startPos-h.pred.length,f))):h.beforeStart.next=u;p&&l.push(new e(h.predPos,h.pred));for(var b=h.startPos,A=h.start;A!==null;)l.push(new e(b,A)),b+=A.length,A=A.next;d&&l.push(new e(b,h.succ)),this.changeHandler_(l,c)},r.prototype.getAffectedNodes_=function(o){for(var a={},l=null,c=this.head_,h=c.next,u=0;h!==null&&o.pos>=u+h.length;)u+=h.length,l=c,c=h,h=h.next;if(h===null&&!(o.length===0&&o.pos===u))throw new Error("Span start exceeds the bounds of the AnnotationList.");for(a.startPos=u,o.length===0&&o.pos===u?a.start=null:a.start=h,a.beforeStart=c,u===o.pos&&u>0?(a.pred=c,a.predPos=u-c.length,a.beforePred=l):a.pred=null;h!==null&&o.end()>u;)u+=h.length,c=h,h=h.next;if(o.end()>u)throw new Error("Span end exceeds the bounds of the AnnotationList.");return o.length===0&&o.end()===u?a.end=null:a.end=c,a.succ=u===o.end()?h:null,a},r.prototype.mergeNodesWithSameAnnotations_=function(o){if(!!o)for(var a=null,l=o;l;)a&&a.annotation.equals(l.annotation)?(a.length+=l.length,a.next=l.next):a=l,l=l.next},r.prototype.forEach=function(o){for(var a=this.head_.next;a!==null;)o(a.length,a.annotation,a.attachedObject),a=a.next},r.prototype.getAnnotatedSpansForPos=function(o){for(var a=0,l=this.head_.next,c=null;l!==null&&a+l.length<=o;)a+=l.length,c=l,l=l.next;if(l===null&&a!==o)throw new Error("pos exceeds the bounds of the AnnotationList");var h=[];return a===o&&c&&h.push(new e(a-c.length,c)),l&&h.push(new e(a,l)),h},r.prototype.getAnnotatedSpansForSpan=function(o){if(o.length===0)return[];for(var a=[],l=this.getAffectedNodes_(o),c=l.startPos,h=l.start;h!==null&&c<o.end();){var u=Math.max(c,o.pos),f=Math.min(c+h.length,o.end()),p=new Hi(u,f-u);p.annotation=h.annotation,a.push(p),c+=h.length,h=h.next}return a},r.prototype.count=function(){for(var o=0,a=this.head_.next,l=null;a!==null;)l&&n(!l.annotation.equals(a.annotation)),l=a,a=a.next,o++;return o};function s(o,a){this.length=o,this.annotation=a,this.attachedObject=null,this.next=null}return s.prototype.clone=function(){var o=new s(this.spanLength,this.annotation);return o.next=this.next,o},r}(),$V=function(){var n="cmrt-",e="cmrt-",t={c:"color",bc:"background-color",fs:"font-size",li:function(d){return"padding-left: "+d*40+"px"}},i={};function r(d,m,b){this.codeMirror=d,this.options_=b||{},this.entityManager_=m,this.currentAttributes_=null;var A=this;this.annotationList_=new MV(function(g,v){A.onAnnotationsChanged_(g,v)}),this.initAnnotationList_(),p(this,"onCodeMirrorBeforeChange_"),p(this,"onCodeMirrorChange_"),p(this,"onCursorActivity_"),parseInt(CodeMirror.version)>=4?this.codeMirror.on("changes",this.onCodeMirrorChange_):this.codeMirror.on("change",this.onCodeMirrorChange_),this.codeMirror.on("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.on("cursorActivity",this.onCursorActivity_),this.changeId_=0,this.outstandingChanges_={},this.dirtyLines_=[]}_e.makeEventEmitter(r,["change","attributesChange","newLine"]);var s=Rf.LINE_SENTINEL_CHARACTER,o=Rf.ENTITY_SENTINEL_CHARACTER;r.prototype.detach=function(){this.codeMirror.off("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.off("change",this.onCodeMirrorChange_),this.codeMirror.off("changes",this.onCodeMirrorChange_),this.codeMirror.off("cursorActivity",this.onCursorActivity_),this.clearAnnotations_()},r.prototype.toggleAttribute=function(d,m){var b=m||!0;if(this.emptySelection_()){var A=this.getCurrentAttributes_();A[d]===b?delete A[d]:A[d]=b,this.currentAttributes_=A}else{var g=this.getCurrentAttributes_(),v=g[d]!==b?b:!1;this.setAttribute(d,v)}},r.prototype.setAttribute=function(d,m){var b=this.codeMirror;if(this.emptySelection_()){var A=this.getCurrentAttributes_();m===!1?delete A[d]:A[d]=m,this.currentAttributes_=A}else this.updateTextAttributes(b.indexFromPos(b.getCursor("start")),b.indexFromPos(b.getCursor("end")),function(g){m===!1?delete g[d]:g[d]=m}),this.updateCurrentAttributes_()},r.prototype.updateTextAttributes=function(d,m,b,A,g){var v=[],O=d,_=this;this.annotationList_.updateSpan(new Hi(d,m-d),function(x,E){var T={};for(var S in x.attributes)T[S]=x.attributes[S];(!T[Qe.LINE_SENTINEL]||g)&&b(T);var C={},B={};return _.computeChangedAttributes_(x.attributes,T,C,B),f(C)||v.push({start:O,end:O+E,attributes:C,attributesInverse:B,origin:A}),O+=E,new u(T)}),v.length>0&&this.trigger("attributesChange",this,v)},r.prototype.computeChangedAttributes_=function(d,m,b,A){var g={},v;for(v in d)g[v]=!0;for(v in m)g[v]=!0;for(v in g)v in m?v in d?d[v]!==m[v]&&(b[v]=m[v],A[v]=d[v]):(b[v]=m[v],A[v]=!1):(b[v]=!1,A[v]=d[v])},r.prototype.toggleLineAttribute=function(d,m){var b=this.getCurrentLineAttributes_(),A;!(d in b)||b[d]!==m?A=m:A=!1,this.setLineAttribute(d,A)},r.prototype.setLineAttribute=function(d,m){this.updateLineAttributesForSelection(function(b){m===!1?delete b[d]:b[d]=m})},r.prototype.updateLineAttributesForSelection=function(d){var m=this.codeMirror,b=m.getCursor("start"),A=m.getCursor("end"),g=b.line,v=A.line,O=m.getLine(v),_=this.areLineSentinelCharacters_(O.substr(0,A.ch));v>g&&_&&v--,this.updateLineAttributes(g,v,d)},r.prototype.updateLineAttributes=function(d,m,b){for(var A=d;A<=m;A++){var g=this.codeMirror.getLine(A),v=this.codeMirror.indexFromPos({line:A,ch:0});if(g[0]!==s){var O={};O[Qe.LINE_SENTINEL]=!0,b(O),this.insertText(v,s,O)}else this.updateTextAttributes(v,v+1,b,null,!0)}},r.prototype.replaceText=function(d,m,b,A,g){this.changeId_++;var v=e+this.changeId_;this.outstandingChanges_[v]={origOrigin:g,attributes:A};var O=this.codeMirror,_=O.posFromIndex(d),x=typeof m=="number"?O.posFromIndex(m):null;O.replaceRange(b,_,x,v)},r.prototype.insertText=function(d,m,b,A){var g=this.codeMirror,v=g.getCursor(),O=A=="RTCMADAPTER"&&!g.somethingSelected()&&d==g.indexFromPos(v);this.replaceText(d,null,m,b,A),O&&g.setCursor(v)},r.prototype.removeText=function(d,m,b){var A=this.codeMirror;A.replaceRange("",A.posFromIndex(d),A.posFromIndex(m),b)},r.prototype.insertEntityAtCursor=function(d,m,b){var A=this.codeMirror,g=A.indexFromPos(A.getCursor("head"));this.insertEntityAt(g,d,m,b)},r.prototype.insertEntityAt=function(d,m,b,A){this.codeMirror,this.insertEntity_(d,new Jo(m,b),A)},r.prototype.insertEntity_=function(d,m,b){this.replaceText(d,null,o,m.toAttributes(),b)},r.prototype.getAttributeSpans=function(d,m){for(var b=[],A=this.annotationList_.getAnnotatedSpansForSpan(new Hi(d,m-d)),g=0;g<A.length;g++)b.push({length:A[g].length,attributes:A[g].annotation.attributes});return b},r.prototype.end=function(){var d=this.codeMirror.lineCount()-1;return this.codeMirror.indexFromPos({line:d,ch:this.codeMirror.getLine(d).length})},r.prototype.getRange=function(d,m){var b=this.codeMirror.posFromIndex(d),A=this.codeMirror.posFromIndex(m);return this.codeMirror.getRange(b,A)},r.prototype.initAnnotationList_=function(){var d=this.end();d!==0&&this.annotationList_.insertAnnotatedSpan(new Hi(0,d),new u)},r.prototype.onAnnotationsChanged_=function(d,m){var b,A={};this.tryToUpdateEntitiesInPlace(d,m);for(var g=0;g<d.length;g++){var v=d[g].annotation.attributes;Qe.LINE_SENTINEL in v&&(A[this.codeMirror.posFromIndex(d[g].pos).line]=!0),b=d[g].getAttachedObject(),b&&b.clear()}for(g=0;g<m.length;g++){var O=m[g].annotation,_=Qe.LINE_SENTINEL in O.attributes,x=Qe.ENTITY_SENTINEL in O.attributes,E=this.codeMirror.posFromIndex(m[g].pos);if(_)A[E.line]=!0;else if(x)this.markEntity_(m[g]);else{var T=this.getClassNameForAttributes_(O.attributes);if(T!==""){var S=this.codeMirror.posFromIndex(m[g].pos+m[g].length);b=this.codeMirror.markText(E,S,{className:T}),m[g].attachObject(b)}}}for(var C in A)this.dirtyLines_.push(this.codeMirror.getLineHandle(Number(C))),this.queueLineMarking_()},r.prototype.tryToUpdateEntitiesInPlace=function(d,m){for(var b=d.length;b--;)for(var A=d[b],g=m.length;g--;){var v=m[g];if(A.pos==v.pos&&A.length==v.length&&A.annotation.attributes.ent&&A.annotation.attributes.ent==v.annotation.attributes.ent){var O=v.annotation.attributes.ent;if(this.entityManager_.entitySupportsUpdate(O)){d.splice(b,1),m.splice(g,1);var _=A.getAttachedObject();_.update(v.annotation.attributes),v.attachObject(_)}}}},r.prototype.queueLineMarking_=function(){if(this.lineMarkTimeout_==null){var d=this;this.lineMarkTimeout_=setTimeout(function(){d.lineMarkTimeout_=null;for(var m=[],b=0;b<d.dirtyLines_.length;b++){var A=d.codeMirror.getLineNumber(d.dirtyLines_[b]);m.push(Number(A))}d.dirtyLines_=[],m.sort(function(O,_){return O-_});var g=-1;for(b=0;b<m.length;b++){var v=m[b];v>g&&(g=d.markLineSentinelCharactersForChangedLines_(v,v))}},0)}},r.prototype.addStyleWithCSS_=function(d){var m=document.getElementsByTagName("head")[0],b=document.createElement("style");b.type="text/css",b.styleSheet?b.styleSheet.cssText=d:b.appendChild(document.createTextNode(d)),m.appendChild(b)},r.prototype.getClassNameForAttributes_=function(d){var m="";for(var b in d){var A=d[b];if(b===Qe.LINE_SENTINEL)_e.assert(A===!0,"LINE_SENTINEL attribute should be true if it exists.");else{var g=(this.options_.cssPrefix||n)+b;if(A!==!0){b===Qe.FONT_SIZE&&typeof A!="string"&&(A=A+"px");var v=A.toString().toLowerCase().replace(/[^a-z0-9-_]/g,"-");if(g+="-"+v,t[b]&&(i[b]||(i[b]={}),!i[b][v])){i[b][v]=!0;var O=t[b],_=typeof O=="function"?O(A):O+": "+A,x=b==Qe.LINE_INDENT?"pre."+g:"."+g;if(this.addStyleWithCSS_(x+" { "+_+" }"),b===Qe.LINE_INDENT){var x="pre.CodeMirror-line."+g;this.addStyleWithCSS_(x+" { "+_+" }")}}}m=m+" "+g}}return m},r.prototype.markEntity_=function(d){for(var m=d.annotation.attributes,b=Jo.fromAttributes(m),A=this.codeMirror,g=this,v=[],O=0;O<d.length;O++){var _=A.posFromIndex(d.pos+O),x=A.posFromIndex(d.pos+O+1),E={collapsed:!0,atomic:!0,inclusiveLeft:!1,inclusiveRight:!1},T=this.createEntityHandle_(b,d.pos),S=this.entityManager_.renderToElement(b,T);S&&(E.replacedWith=S);var C=A.markText(_,x,E);v.push(C),T.setMarker(C)}d.attachObject({clear:function(){for(var B=0;B<v.length;B++)v[B].clear()},update:function(B){for(var M=Jo.fromAttributes(B),D=0;D<v.length;D++)g.entityManager_.updateElement(M,v[D].replacedWith)}}),this.queueRefresh_()},r.prototype.queueRefresh_=function(){var d=this;this.refreshTimer_||(this.refreshTimer_=setTimeout(function(){d.codeMirror.refresh(),d.refreshTimer_=null},0))},r.prototype.createEntityHandle_=function(d,m){var b=null,A=this;function g(){if(b){var x=b.find();return x?A.codeMirror.indexFromPos(x.from):null}else return m}function v(){var x=g();x!=null&&(A.codeMirror.focus(),A.removeText(x,x+1))}function O(x){var E=Qe.ENTITY_SENTINEL,T=E+"_",S=g();A.updateTextAttributes(S,S+1,function(C){for(var B in C)delete C[B];C[E]=d.type;for(var M in x)C[T+M]=x[M]})}function _(x){b=x}return{find:g,remove:v,replace:O,setMarker:_}},r.prototype.lineClassRemover_=function(d){var m=this.codeMirror,b=m.getLineHandle(d);return{clear:function(){m.removeLineClass(b,"text",".*")}}},r.prototype.emptySelection_=function(){var d=this.codeMirror.getCursor("start"),m=this.codeMirror.getCursor("end");return d.line===m.line&&d.ch===m.ch},r.prototype.onCodeMirrorBeforeChange_=function(d,m){if(m.origin==="+input"||m.origin==="paste"){for(var b=[],A=0;A<m.text.length;A++){var g=m.text[A];g=g.replace(new RegExp("["+s+o+"]","g"),""),b.push(g)}m.update(m.from,m.to,b)}};function a(d,m){return d.line-m.line||d.ch-m.ch}function l(d,m){return a(d,m)<=0}function c(d){return d[d.length-1]}function h(d){if(d.length===0)return 0;for(var m=0,b=0;b<d.length;b++)m+=d[b].length;return m+d.length-1}r.prototype.onCodeMirrorChange_=function(d,m){if(typeof m.from=="object"){for(var b=[];m;)b.push(m),m=m.next;m=b}for(var A=this.convertCoordinateSystemForChanges_(m),g=[],v=0;v<A.length;v++){var O=A[v],_=O.start;O.end;var x=O.text,E=O.removed,T=O.origin;if(E.length>0){for(var S=this.annotationList_.getAnnotatedSpansForSpan(new Hi(_,E.length)),C=0,B=0;B<S.length;B++){var M=S[B];g.push({start:_,end:_+M.length,removedAttributes:M.annotation.attributes,removed:E.substr(C,M.length),attributes:{},text:"",origin:O.origin}),C+=M.length}this.annotationList_.removeSpan(new Hi(_,E.length))}if(x.length>0){var D;O.origin==="+input"||O.origin==="paste"?D=this.currentAttributes_||{}:T in this.outstandingChanges_?(D=this.outstandingChanges_[T].attributes,T=this.outstandingChanges_[T].origOrigin,delete this.outstandingChanges_[T]):D={},this.annotationList_.insertAnnotatedSpan(new Hi(_,x.length),new u(D)),g.push({start:_,end:_,removedAttributes:{},removed:"",text:x,attributes:D,origin:T})}}this.markLineSentinelCharactersForChanges_(m),g.length>0&&this.trigger("change",this,g)},r.prototype.convertCoordinateSystemForChanges_=function(d){var m=this,b=function(T){return m.codeMirror.indexFromPos(T)};function A(T,S){return function(C){return l(C,S.from)?T(C):l(S.to,C)?T({line:C.line+S.text.length-1-(S.to.line-S.from.line),ch:S.to.line<C.line?C.ch:S.text.length<=1?C.ch-(S.to.ch-S.from.ch)+h(S.text):C.ch-S.to.ch+c(S.text).length})+h(S.removed)-h(S.text):S.from.line===C.line?T(S.from)+C.ch-S.from.ch:T(S.from)+h(S.removed.slice(0,C.line-S.from.line))+1+C.ch}}for(var g=[],v=d.length-1;v>=0;v--){var O=d[v];b=A(b,O);var _=b(O.from),x=O.removed.join(`
`),E=O.text.join(`
`);g.unshift({start:_,end:_+x.length,removed:x,text:E,origin:O.origin})}return g},r.prototype.markLineSentinelCharactersForChanges_=function(d){for(var m=Number.MAX_VALUE,b=-1,A=0;A<d.length;A++){var g=d[A],v=g.from.line;g.from.ch,(g.removed.length>1||g.removed[0].indexOf(s)>=0)&&(m=Math.min(m,v),b=Math.max(b,v)),g.text.length>1?(m=Math.min(m,v),b=Math.max(b,v+g.text.length-1)):g.text[0].indexOf(s)>=0&&(m=Math.min(m,v),b=Math.max(b,v))}b=Math.min(b,this.codeMirror.lineCount()-1),this.markLineSentinelCharactersForChangedLines_(m,b)},r.prototype.markLineSentinelCharactersForChangedLines_=function(d,m){if(d<Number.MAX_VALUE)for(;d>0&&this.lineIsListItemOrIndented_(d-1);)d--;if(m>-1)for(var b=this.codeMirror.lineCount();m+1<b&&this.lineIsListItemOrIndented_(m+1);)m++;for(var A=[],g=this.codeMirror,v=d;v<=m;v++){var O=g.getLine(v),_=g.getLineHandle(v);if(g.removeLineClass(_,"text",".*"),O.length>0)for(var x=O.indexOf(s);x>=0;){for(var E=x;x<O.length&&O[x]===s;){for(var T=g.findMarksAt({line:v,ch:x}),S=0;S<T.length;S++)T[S].isForLineSentinel&&T[S].clear();x++}this.markLineSentinelCharacters_(v,E,x,A),x=O.indexOf(s,x)}else A=[]}return m},r.prototype.markLineSentinelCharacters_=function(d,m,b,A){var g=this.codeMirror,v=null,C=null,O=function(){var B=C.find();return B?B.from.line:null};if(m===0){var _=this.getLineAttributes_(d),x=_[Qe.LIST_TYPE],E=_[Qe.LINE_INDENT]||0;for(x&&E===0&&(E=1);E>=A.length;)A.push(1);x==="o"?(v=this.makeOrderedListElement_(A[E]),A[E]++):x==="u"?(v=this.makeUnorderedListElement_(),A[E]=1):x==="t"?(v=this.makeTodoListElement_(!1,O),A[E]=1):x==="tc"&&(v=this.makeTodoListElement_(!0,O),A[E]=1);var T=this.getClassNameForAttributes_(_);T!==""&&this.codeMirror.addLineClass(d,"text",T),A[E+1]=1}var S={inclusiveLeft:!0,collapsed:!0};v&&(S.replacedWith=v);var C=g.markText({line:d,ch:m},{line:d,ch:b},S);C.isForLineSentinel=!0},r.prototype.makeOrderedListElement_=function(d){return _e.elt("div",d+".",{class:"firepad-list-left"})},r.prototype.makeUnorderedListElement_=function(){return _e.elt("div","\u2022",{class:"firepad-list-left"})},r.prototype.toggleTodo=function(d){var m=Qe.LIST_TYPE,b=this.getCurrentLineAttributes_(),A;!(m in b)||b[m]!=="t"&&b[m]!=="tc"?A="t":b[m]==="t"?A="tc":b[m]==="tc"&&(A=d?"t":!1),this.setLineAttribute(m,A)},r.prototype.makeTodoListElement_=function(d,m){var b={type:"checkbox",class:"firepad-todo-left"};d&&(b.checked=!0);var A=_e.elt("input",!1,b),g=this;return _e.on(A,"click",_e.stopEventAnd(function(v){g.codeMirror.setCursor({line:m(),ch:1}),g.toggleTodo(!0)})),A},r.prototype.lineIsListItemOrIndented_=function(d){var m=this.getLineAttributes_(d);return(m[Qe.LIST_TYPE]||!1)!==!1||(m[Qe.LINE_INDENT]||0)!==0},r.prototype.onCursorActivity_=function(){var d=this;setTimeout(function(){d.updateCurrentAttributes_()},1)},r.prototype.getCurrentAttributes_=function(){return this.currentAttributes_||this.updateCurrentAttributes_(),this.currentAttributes_},r.prototype.updateCurrentAttributes_=function(){var d=this.codeMirror,m=d.indexFromPos(d.getCursor("anchor")),b=d.indexFromPos(d.getCursor("head")),A=b;if(m>b){for(;A<this.end();){var g=this.getRange(A,A+1);if(g!==`
`&&g!==s)break;A++}A<this.end()&&A++}else for(;A>0&&(g=this.getRange(A-1,A),!(g!==`
`&&g!==s));)A--;var v=this.annotationList_.getAnnotatedSpansForPos(A);this.currentAttributes_={};var O={};v.length>0&&!(Qe.LINE_SENTINEL in v[0].annotation.attributes)?O=v[0].annotation.attributes:v.length>1&&(_e.assert(!(Qe.LINE_SENTINEL in v[1].annotation.attributes),"Cursor can't be between two line sentinel characters."),O=v[1].annotation.attributes);for(var _ in O)_!=="l"&&_!=="lt"&&_!=="li"&&_.indexOf(Qe.ENTITY_SENTINEL)!==0&&(this.currentAttributes_[_]=O[_])},r.prototype.getCurrentLineAttributes_=function(){var d=this.codeMirror,m=d.getCursor("anchor"),b=d.getCursor("head"),A=b.line;return b.ch===0&&m.line<b.line&&A--,this.getLineAttributes_(A)},r.prototype.getLineAttributes_=function(d){var m={},b=this.codeMirror.getLine(d);if(b.length>0&&b[0]===s){var A=this.codeMirror.indexFromPos({line:d,ch:0}),g=this.annotationList_.getAnnotatedSpansForSpan(new Hi(A,1));_e.assert(g.length===1);for(var v in g[0].annotation.attributes)m[v]=g[0].annotation.attributes[v]}return m},r.prototype.clearAnnotations_=function(){this.annotationList_.updateSpan(new Hi(0,this.end()),function(d,m){return new u({})})},r.prototype.newline=function(){var d=this.codeMirror,m=this;if(!this.emptySelection_())d.replaceSelection(`
`,"end","+input");else{var b=d.getCursor("head").line,A=this.getLineAttributes_(b),g=A[Qe.LIST_TYPE];g&&d.getLine(b).length===1?this.updateLineAttributes(b,b,function(v){delete v[Qe.LIST_TYPE],delete v[Qe.LINE_INDENT]}):(d.replaceSelection(`
`,"end","+input"),this.updateLineAttributes(b+1,b+1,function(v){for(var O in A)v[O]=A[O];g==="tc"&&(v[Qe.LIST_TYPE]="t"),m.trigger("newLine",{line:b+1,attr:v})}))}},r.prototype.deleteLeft=function(){var d=this.codeMirror,m=d.getCursor("head"),b=this.getLineAttributes_(m.line),A=b[Qe.LIST_TYPE],g=b[Qe.LINE_INDENT],v=this.emptySelection_()&&m.ch===1;v&&A?this.updateLineAttributes(m.line,m.line,function(O){delete O[Qe.LIST_TYPE],delete O[Qe.LINE_INDENT]}):v&&g&&g>0?this.unindent():d.deleteH(-1,"char")},r.prototype.deleteRight=function(){var d=this.codeMirror,m=d.getCursor("head"),b=d.getLine(m.line),A=this.areLineSentinelCharacters_(b),g=m.line+1<d.lineCount()?d.getLine(m.line+1):"";this.emptySelection_()&&A&&g[0]===s?(d.replaceRange("",{line:m.line,ch:0},{line:m.line+1,ch:0},"+input"),d.setCursor({line:m.line,ch:0})):d.deleteH(1,"char")},r.prototype.indent=function(){this.updateLineAttributesForSelection(function(d){var m=d[Qe.LINE_INDENT],b=d[Qe.LIST_TYPE];m?d[Qe.LINE_INDENT]++:b?d[Qe.LINE_INDENT]=2:d[Qe.LINE_INDENT]=1})},r.prototype.unindent=function(){this.updateLineAttributesForSelection(function(d){var m=d[Qe.LINE_INDENT];m&&m>1?d[Qe.LINE_INDENT]=m-1:(delete d[Qe.LIST_TYPE],delete d[Qe.LINE_INDENT])})},r.prototype.getText=function(){return this.codeMirror.getValue().replace(new RegExp(s,"g"),"")},r.prototype.areLineSentinelCharacters_=function(d){for(var m=0;m<d.length;m++)if(d[m]!==s)return!1;return!0};function u(d){this.attributes=d||{}}u.prototype.equals=function(d){if(!(d instanceof u))return!1;var m;for(m in this.attributes)if(d.attributes[m]!==this.attributes[m])return!1;for(m in d.attributes)if(d.attributes[m]!==this.attributes[m])return!1;return!0};function f(d){for(var m in d)return!1;return!0}function p(d,m){var b=d[m];d[m]=function(){b.apply(d,arguments)}}return r}(),FV=function(n){function e(t){this.imageInsertionUI=t,this.element_=this.makeElement_()}return _e.makeEventEmitter(e,["bold","italic","underline","strike","font","font-size","color","left","center","right","unordered-list","ordered-list","todo-list","indent-increase","indent-decrease","undo","redo","insert-image"]),e.prototype.element=function(){return this.element_},e.prototype.makeButton_=function(t,i){var r=this;i=i||t;var s=_e.elt("a",[_e.elt("span","",{class:"firepad-tb-"+i})],{class:"firepad-btn"});return _e.on(s,"click",_e.stopEventAnd(function(){r.trigger(t)})),s},e.prototype.makeElement_=function(){var t=this,i=this.makeFontDropdown_(),r=this.makeFontSizeDropdown_(),s=this.makeColorDropdown_(),o=[_e.elt("div",[i],{class:"firepad-btn-group"}),_e.elt("div",[r],{class:"firepad-btn-group"}),_e.elt("div",[s],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("bold"),t.makeButton_("italic"),t.makeButton_("underline"),t.makeButton_("strike","strikethrough")],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("unordered-list","list-2"),t.makeButton_("ordered-list","numbered-list"),t.makeButton_("todo-list","list")],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("indent-decrease"),t.makeButton_("indent-increase")],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("left","paragraph-left"),t.makeButton_("center","paragraph-center"),t.makeButton_("right","paragraph-right")],{class:"firepad-btn-group"}),_e.elt("div",[t.makeButton_("undo"),t.makeButton_("redo")],{class:"firepad-btn-group"})];t.imageInsertionUI&&o.push(_e.elt("div",[t.makeButton_("insert-image")],{class:"firepad-btn-group"}));var a=_e.elt("div",o,{class:"firepad-toolbar-wrapper"}),l=_e.elt("div",null,{class:"firepad-toolbar"});return l.appendChild(a),l},e.prototype.makeFontDropdown_=function(){for(var t=["Arial","Comic Sans MS","Courier New","Impact","Times New Roman","Verdana"],i=[],r=0;r<t.length;r++){var s=_e.elt("span",t[r]);s.setAttribute("style","font-family:"+t[r]),i.push({content:s,value:t[r]})}return this.makeDropdown_("Font","font",i)},e.prototype.makeFontSizeDropdown_=function(){for(var t=[9,10,12,14,18,24,32,42],i=[],r=0;r<t.length;r++){var s=_e.elt("span",t[r].toString());s.setAttribute("style","font-size:"+t[r]+"px; line-height:"+(t[r]-6)+"px;"),i.push({content:s,value:t[r]})}return this.makeDropdown_("Size","font-size",i,"px")},e.prototype.makeColorDropdown_=function(){for(var t=["black","red","green","blue","yellow","cyan","magenta","grey"],i=[],r=0;r<t.length;r++){var s=_e.elt("div");s.className="firepad-color-dropdown-item",s.setAttribute("style","background-color:"+t[r]),i.push({content:s,value:t[r]})}return this.makeDropdown_("Color","color",i)},e.prototype.makeDropdown_=function(t,i,r,s){s=s||"";var o=this,a=_e.elt("a",t+" \u25BE",{class:"firepad-btn firepad-dropdown"}),l=_e.elt("ul",[],{class:"firepad-dropdown-menu"});a.appendChild(l);var c=!1;function h(){c||(l.style.display="block",_e.on(document,"click",f,!0),c=!0)}var u=!1;function f(){c&&(l.style.display="",_e.off(document,"click",f,!0),c=!1),u=!0,setTimeout(function(){u=!1},0)}function p(A,g){typeof A!="object"&&(A=document.createTextNode(String(A)));var v=_e.elt("a",[A]);_e.on(v,"click",_e.stopEventAnd(function(){f(),o.trigger(i,g+s)})),l.appendChild(v)}for(var d=0;d<r.length;d++){var m=r[d].content,b=r[d].value;p(m,b)}return _e.on(a,"click",_e.stopEventAnd(function(){u||h()})),a},e}(),gR=function(){class n{constructor(t){var i;this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),this.ace=t,this.aceSession=this.ace.getSession(),this.aceDoc=this.aceSession.getDocument(),this.aceDoc.setNewLineMode("unix"),this.grabDocumentState(),this.ace.on("change",this.onChange),this.ace.on("blur",this.onBlur),this.ace.on("focus",this.onFocus),this.aceSession.selection.on("changeCursor",this.onCursorActivity),this.aceRange==null&&(this.aceRange=((i=ace.require)!=null?i:require)("ace/range").Range)}grabDocumentState(){return this.lastDocLines=this.aceDoc.getAllLines(),this.lastCursorRange=this.aceSession.selection.getRange()}detach(){return this.ace.removeListener("change",this.onChange),this.ace.removeListener("blur",this.onBlur),this.ace.removeListener("focus",this.onFocus),this.aceSession.selection.removeListener("changeCursor",this.onCursorActivity)}onChange(t){var i;if(!this.ignoreChanges)return i=this.operationFromACEChange(t),this.trigger("change",...i),this.grabDocumentState()}onBlur(){if(this.ace.selection.isEmpty())return this.trigger("blur")}onFocus(){return this.trigger("focus")}onCursorActivity(){return setTimeout(()=>this.trigger("cursorActivity"),0)}operationFromACEChange(t){var i,r,s,o,a,l,c;return t.data?(r=t.data,(o=r.action)==="insertLines"||o==="removeLines"?(c=r.lines.join(`
`)+`
`,r.action.replace("Lines","")):(c=r.text.replace(this.aceDoc.getNewLineCharacter(),`
`),r.action.replace("Text","")),l=this.indexFromPos(r.range.start)):(c=t.lines.join(`
`),l=this.indexFromPos(t.start)),a=this.lastDocLines.join(`
`).length-l,t.action==="remove"&&(a-=c.length),s=new Vt().retain(l).insert(c).retain(a),i=new Vt().retain(l).delete(c).retain(a),t.action==="remove"?[i,s]:[s,i]}applyOperationToACE(t){var i,r,s,o,a,l,c,h;for(r=0,c=t.ops,s=0,o=c.length;s<o;s++)a=c[s],a.isRetain()?r+=a.chars:a.isInsert()?(this.aceDoc.insert(this.posFromIndex(r),a.text),r+=a.text.length):a.isDelete()&&(i=this.posFromIndex(r),h=this.posFromIndex(r+a.chars),l=this.aceRange.fromPoints(i,h),this.aceDoc.remove(l));return this.grabDocumentState()}posFromIndex(t){var i,r,s,o,a;for(o=this.aceDoc.$lines,a=i=0,r=o.length;i<r&&(s=o[a],!(t<=s.length));a=++i)t-=s.length+1;return{row:a,column:t}}indexFromPos(t,i){var r,s,o,a;for(i==null&&(i=this.lastDocLines),s=0,r=o=0,a=t.row;0<=a?o<a:o>a;r=0<=a?++o:--o)s+=this.lastDocLines[r].length+1;return s+=t.column}getValue(){return this.aceDoc.getValue()}getCursor(){var t,i,r;try{r=this.indexFromPos(this.aceSession.selection.getRange().start,this.aceDoc.$lines),i=this.indexFromPos(this.aceSession.selection.getRange().end,this.aceDoc.$lines)}catch{try{r=this.indexFromPos(this.lastCursorRange.start),i=this.indexFromPos(this.lastCursorRange.end)}catch(o){t=o,console.log("Couldn't figure out the cursor range:",t,"-- setting it to 0:0."),[r,i]=[0,0]}}return r>i&&([r,i]=[i,r]),new ih(r,i)}setCursor(t){var i,r;return r=this.posFromIndex(t.position),i=this.posFromIndex(t.selectionEnd),t.position>t.selectionEnd&&([r,i]=[i,r]),this.aceSession.selection.setSelectionRange(new this.aceRange(r.row,r.column,i.row,i.column))}setOtherCursor(t,i,r){var s,o,a,l,c,h,u;return this.otherCursors==null&&(this.otherCursors={}),a=this.otherCursors[r],a&&(a.start.detach(),a.end.detach(),this.aceSession.removeMarker(a.id)),u=this.posFromIndex(t.position),l=this.posFromIndex(t.selectionEnd),t.selectionEnd<t.position&&([u,l]=[l,u]),s=`other-client-selection-${i.replace("#","")}`,c=t.position===t.selectionEnd,c&&(s=s.replace("selection","cursor")),o=`.${s} {
  position: absolute;
  background-color: ${c?"transparent":i};
  border-left: 2px solid ${i};
}`,this.addStyleRule(o),this.otherCursors[r]=a=new this.aceRange(u.row,u.column,l.row,l.column),h=this,a.clipRows=function(){var f;return f=h.aceRange.prototype.clipRows.apply(this,arguments),f.isEmpty=function(){return!1},f},a.start=this.aceDoc.createAnchor(a.start),a.end=this.aceDoc.createAnchor(a.end),a.id=this.aceSession.addMarker(a,s,"text"),{clear:()=>(a.start.detach(),a.end.detach(),this.aceSession.removeMarker(a.id))}}addStyleRule(t){var i;if(!(typeof document=="undefined"||document===null)&&(this.addedStyleRules||(this.addedStyleRules={},i=document.createElement("style"),document.documentElement.getElementsByTagName("head")[0].appendChild(i),this.addedStyleSheet=i.sheet),!this.addedStyleRules[t]))return this.addedStyleRules[t]=!0,this.addedStyleSheet.insertRule(t,0)}registerCallbacks(t){this.callbacks=t}trigger(t,...i){var r,s;return(r=this.callbacks)!=null&&(s=r[t])!=null?s.apply(this,i):void 0}applyOperation(t){return t.isNoop()||(this.ignoreChanges=!0),this.applyOperationToACE(t),this.ignoreChanges=!1}registerUndo(t){return this.ace.undo=t}registerRedo(t){return this.ace.redo=t}invertOperation(t){return t.invert(this.getValue())}}return n.prototype.ignoreChanges=!1,n}();var Lx=function(e,t,i){return"."+e+` {
  position: relative;
background-color: `+t+`;
border-left: 2px solid `+i+`;
}`},Bx=function(e,t){if(typeof document=="undefined"||document===null)return!1;if(this.addedStyleRules.indexOf(e)===-1){var i=document.createElement("style"),r=document.createTextNode(t);i.appendChild(r),document.head.appendChild(i),this.addedStyleRules.push(e)}},yR=function(){function n(e){if(!e||typeof e.getModel!="function")throw new Error("MonacoAdapter: Incorrect Parameter Recieved in constructor, expected valid Monaco Instance");this.monaco=e,this.monacoModel=this.monaco.getModel(),this.lastDocLines=this.monacoModel.getLinesContent(),this.lastCursorRange=this.monaco.getSelection(),this.callbacks={},this.otherCursors=[],this.addedStyleRules=[],this.ignoreChanges=!1,this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),this.changeHandler=this.monaco.onDidChangeModelContent(this.onChange),this.didBlurHandler=this.monaco.onDidBlurEditorWidget(this.onBlur),this.didFocusHandler=this.monaco.onDidFocusEditorWidget(this.onFocus),this.didChangeCursorPositionHandler=this.monaco.onDidChangeCursorPosition(this.onCursorActivity)}return n.prototype.detach=function(){this.changeHandler.dispose(),this.didBlurHandler.dispose(),this.didFocusHandler.dispose(),this.didChangeCursorPositionHandler.dispose()},n.prototype.getCursor=function(){var t=this.monaco.getSelection();(typeof t=="undefined"||t===null)&&(t=this.lastCursorRange);var i=t.getStartPosition(),r=t.getEndPosition(),s=this.monacoModel.getOffsetAt(i),o=this.monacoModel.getOffsetAt(r);if(s>o){var a=[o,s];s=a[0],o=a[1]}return new ih(s,o)},n.prototype.setCursor=function(t){var i=t.position,r=t.selectionEnd,s=this.monacoModel.getPositionAt(i),o=this.monacoModel.getPositionAt(r);if(i>r){var a=[o,s];s=a[0],o=a[1]}this.monaco.setSelection(new monaco.Range(s.lineNumber,s.column,o.lineNumber,o.column))},n.prototype.setOtherCursor=function(t,i,r){if(typeof t!="object"||typeof t.position!="number"||typeof t.selectionEnd!="number"||typeof i!="string"||!i.match(/^#[a-fA-F0-9]{3,6}$/))return!1;var s=t.position,o=t.selectionEnd;if(s<0||o<0)return!1;var a=this.otherCursors.find(function(m){return m.clientID===r});a||(a={clientID:r,decoration:[]},this.otherCursors.push(a)),a.decoration=this.monaco.deltaDecorations(a.decoration,[]);var l="other-client-selection-"+i.replace("#",""),c,h;s===o?(l=l.replace("selection","cursor"),c=Lx(l,"transparent",i),h=Bx.call(this,l,c)):(c=Lx(l,i,i),h=Bx.call(this,l,c)),h==!1&&console.log(`Monaco Adapter: Failed to add some css style.
Please make sure you're running on supported environment.`);var u=this.monacoModel.getPositionAt(s),f=this.monacoModel.getPositionAt(o);if(s>o){var p=[f,u];u=p[0],f=p[1]}a.decoration=this.monaco.deltaDecorations(a.decoration,[{range:new monaco.Range(u.lineNumber,u.column,f.lineNumber,f.column),options:{className:l}}]);var d=this;return{clear:function(){a.decoration=d.monaco.deltaDecorations(a.decoration,[])}}},n.prototype.registerCallbacks=function(t){this.callbacks=Object.assign({},this.callbacks,t)},n.prototype.registerUndo=function(t){if(typeof t=="function")this.callbacks.undo=t;else throw new Error("MonacoAdapter: registerUndo method expects a callback function in parameter")},n.prototype.registerRedo=function(t){if(typeof t=="function")this.callbacks.redo=t;else throw new Error("MonacoAdapter: registerRedo method expects a callback function in parameter")},n.prototype.operationFromMonacoChanges=function(t,i,r){var s=t.text,o=t.rangeLength,a=t.rangeOffset,l=i.length+r-a,c,h,u;return s.length===0&&o>0?(u=i.slice(a,a+o),c=new Vt().retain(a).delete(o).retain(l-o),h=new Vt().retain(a).insert(u).retain(l-o)):s.length>0&&o>0?(u=i.slice(a,a+o),c=new Vt().retain(a).delete(o).insert(s).retain(l-o),h=new Vt().retain(a).delete(s.length).insert(u).retain(l-o)):(c=new Vt().retain(a).insert(s).retain(l),h=new Vt().retain(a).delete(s).retain(l)),[c,h]},n.prototype.onChange=function(t){var i=this;if(!this.ignoreChanges){var r=this.lastDocLines.join(this.monacoModel.getEOL()),s=0;if(!t.changes){var o=new Vt().retain(r.length);this.trigger("change",o,o)}t.changes.forEach(function(a){var l=i.operationFromMonacoChanges(a,r,s);s+=l[0].targetLength-l[0].baseLength,i.trigger.apply(i,["change"].concat(l))}),this.lastDocLines=this.monacoModel.getLinesContent()}},n.prototype.trigger=function(t){if(!!this.callbacks.hasOwnProperty(t)){var i=this.callbacks[t];if(!typeof i!=="function"){var r=[];if(arguments.length>1)for(var s=1;s<arguments.length;s++)r.push(arguments[s]);i.apply(null,r)}}},n.prototype.onBlur=function(){this.monaco.getSelection().isEmpty()&&this.trigger("blur")},n.prototype.onFocus=function(){this.trigger("focus")},n.prototype.onCursorActivity=function(){var t=this;setTimeout(function(){return t.trigger("cursorActivity")},1)},n.prototype.applyOperation=function(t){t.isNoop()||(this.ignoreChanges=!0);var i=t.ops,r=0,s=this;i.forEach(function(o){if(o.isRetain())r+=o.chars;else if(o.isInsert()){var a=s.monacoModel.getPositionAt(r);s.monaco.executeEdits("my-source",[{range:new monaco.Range(a.lineNumber,a.column,a.lineNumber,a.column),text:o.text,forceMoveMarkers:!0}]),r+=o.text.length}else if(o.isDelete()){var l=s.monacoModel.getPositionAt(r),c=s.monacoModel.getPositionAt(r+o.chars);s.monaco.executeEdits("my-source",[{range:new monaco.Range(l.lineNumber,l.column,c.lineNumber,c.column),text:"",forceMoveMarkers:!0}])}}),this.lastDocLines=this.monacoModel.getLinesContent(),this.ignoreChanges=!1},n.prototype.invertOperation=function(t){t.invert(this.getValue())},n}(),WV=function(){function n(e){this.cm=e,this.lastDocLines=this.cm.state.doc.text,this.lastCursorRange=this.cm.state.selection.main,this.callbacks={},this.otherCursors=[],this.addedStyleRules=[],this.ignoreChanges=!1,this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this);var t=this;t.cm.dispatch({effects:et.appendConfig.of(t.cm.constructor.updateListener.of(i=>{if(i.docChanged&&!(i.transactions[0]&&i.transactions[0].annotations.some(r=>r.type=="firepad"))){let r=0,s=new Vt,o=new Vt;i.changes.toJSON().forEach(a=>{if(typeof a=="number")a!=0&&(r+=a,s=s.retain(a),o=o.retain(a));else if(typeof a=="object"){const[l,...c]=a;if(l>0&&(s=s.delete(l),o=o.insert(i.startState.sliceDoc(r,r+l))),c){const h=c.join(`
`);s=s.insert(h),o=o.delete(h.length)}}}),this.trigger("change",s,o)}this.lastDocLines=this.cm.state.doc.text}))})}return n.prototype.detach=function(){},n.prototype.getCursor=function(){var t=this.cm.state.selection.main;(typeof t=="undefined"||t===null)&&(t=this.lastCursorRange);var i=t.from,r=t.to;if(i>r){var s=[r,i];i=s[0],r=s[1]}return new ih(i,r)},n.prototype.setCursor=function(t){var i=t.position,r=t.selectionEnd;this.cm.dispatch({selection:{anchor:i,head:r}})},n.prototype.setOtherCursor=function(t,i,r){},n.prototype.registerCallbacks=function(t){this.callbacks=Object.assign({},this.callbacks,t)},n.prototype.registerUndo=function(t){if(typeof t=="function")this.callbacks.undo=t;else throw new Error("CodeMirror6Adapter: registerUndo method expects a callback function in parameter")},n.prototype.registerRedo=function(t){if(typeof t=="function")this.callbacks.redo=t;else throw new Error("CodeMirror6Adapter: registerRedo method expects a callback function in parameter")},n.prototype.trigger=function(t){if(!!this.callbacks.hasOwnProperty(t)){var i=this.callbacks[t];if(!typeof i!=="function"){var r=[];if(arguments.length>1)for(var s=1;s<arguments.length;s++)r.push(arguments[s]);i.apply(null,r)}}},n.prototype.onBlur=function(){this.monaco.getSelection().isEmpty()&&this.trigger("blur")},n.prototype.onFocus=function(){this.trigger("focus")},n.prototype.onCursorActivity=function(){var t=this;setTimeout(function(){return t.trigger("cursorActivity")},1)},n.prototype.applyOperation=function(t){t.isNoop()||(this.ignoreChanges=!0);var i=t.ops,r=0,s=this;i.forEach(function(o){o.isRetain()?r+=o.chars:o.isInsert()?(s.cm.dispatch({annotations:[new Pr("firepad",!0)],changes:{from:r,to:r,insert:o.text}}),r+=o.text.length):o.isDelete()&&s.cm.dispatch({annotations:[new Pr("firepad",!0)],changes:{from:r,to:r+o.chars,insert:""}})}),this.lastDocLines=this.cm.state.doc.text,this.ignoreChanges=!1},n.prototype.invertOperation=function(t){t.invert(this.getValue())},n}();/*!
 * Firepad is an open-source, collaborative code and text editor. It was designed
 * to be embedded inside larger applications. Since it uses Firebase as a backend,
 * it requires no server-side code and can be added to any web app simply by
 * including a couple JavaScript files.
 *
 * http://www.firepad.io/
 * License: MIT
 * Copyright: 2014 Firebase
 * With code from ot.js (Copyright 2012-2013 Tim Baumann)
 */let dr;try{dr=Function("return this")()}catch{dr=window}const OR=function(){var n=dr.CodeMirror,e=dr.ace;dr.monaco;function t(o,a,l){if(!(this instanceof t))return new t(o,a,l);if(!n&&!e&&!dr.monaco&&a.type!=="CodeMirror6")throw new Error("Couldn't find CodeMirror, ACE or Monaco.  Did you forget to include codemirror.js/ace.js or import monaco?");if(this.zombie_=!1,a.type==="CodeMirror6"){if(this.codeMirror6_=this.editor_=a.editor,this.codeMirror6_.state.doc.toString()!=="")throw new Error("Can't initialize Firepad with a CodeMirror6 instance that already contains text.")}else if(n&&a instanceof n){this.codeMirror_=this.editor_=a;var c=this.codeMirror_.getValue();if(c!=="")throw new Error("Can't initialize Firepad with a CodeMirror instance that already contains text.")}else if(e&&a&&a.session instanceof e.EditSession){if(this.ace_=this.editor_=a,c=this.ace_.getValue(),c!=="")throw new Error("Can't initialize Firepad with an ACE instance that already contains text.")}else if(dr.monaco&&a&&a instanceof dr.monaco.constructor){if(dr.monaco,this.monaco_=this.editor_=a,c=this.monaco_.getValue(),c!=="")throw new Error("Can't initialize Firepad with a Monaco instance that already contains text.")}else this.codeMirror_=this.editor_=new n(a);var h;this.codeMirror6_?h=this.codeMirror6_.dom:this.codeMirror_?h=this.codeMirror_.getWrapperElement():this.ace_?h=this.ace_.container:h=this.monaco_.getDomNode(),this.firepadWrapper_=_e.elt("div",null,{class:"firepad"}),h.parentNode.replaceChild(this.firepadWrapper_,h),this.firepadWrapper_.appendChild(h),this.editor_.firepad=this,this.options_=l||{},this.getOption("richTextShortcuts",!1)&&(n.keyMap.richtext||this.initializeKeyMap_(),this.codeMirror_.setOption("keyMap","richtext"),this.firepadWrapper_.className+=" firepad-richtext"),this.imageInsertionUI=this.getOption("imageInsertionUI",!0),this.getOption("richTextToolbar",!1)&&(this.addToolbar_(),this.firepadWrapper_.className+=" firepad-richtext firepad-with-toolbar"),this.addPoweredByLogo_(),this.codeMirror_&&this.codeMirror_.refresh();var u=this.getOption("userId",o.push().key),f=this.getOption("userColor",i(u));this.entityManager_=new DV,this.firebaseAdapter_=new PV(o,u,f),this.codeMirror6_?this.editorAdapter_=new WV(this.codeMirror6_,this.options_):this.codeMirror_?(this.richTextCodeMirror_=new $V(this.codeMirror_,this.entityManager_,{cssPrefix:"firepad-"}),this.editorAdapter_=new mR(this.richTextCodeMirror_)):this.ace_?this.editorAdapter_=new gR(this.ace_):this.editorAdapter_=new yR(this.monaco_),this.client_=new pR(this.firebaseAdapter_,this.editorAdapter_);var p=this;this.firebaseAdapter_.on("cursor",function(){p.trigger.apply(p,["cursor"].concat([].slice.call(arguments)))}),this.codeMirror_&&this.richTextCodeMirror_.on("newLine",function(){p.trigger.apply(p,["newLine"].concat([].slice.call(arguments)))}),this.firebaseAdapter_.on("ready",function(){p.ready_=!0,p.ace_&&p.editorAdapter_.grabDocumentState(),p.monaco_&&p.editorAdapter_.grabDocumentState();var d=p.getOption("defaultText",null);d&&p.isHistoryEmpty()&&p.setText(d),p.trigger("ready")}),this.client_.on("synced",function(d){p.trigger("synced",d)}),navigator.appName=="Microsoft Internet Explorer"&&navigator.userAgent.match(/MSIE 8\./)&&(window.onload=function(){var d=document.getElementsByTagName("head")[0],m=document.createElement("style");m.type="text/css",m.styleSheet.cssText=":before,:after{content:none !important;}",d.appendChild(m),setTimeout(function(){d.removeChild(m)},0)})}_e.makeEventEmitter(t),t.fromCodeMirror=t,t.fromACE=t,t.fromMonaco=t,t.fromCodeMirror6=(o,a,...l)=>t(o,{type:"CodeMirror6",editor:a},...l),t.prototype.dispose=function(){this.zombie_=!0;var o;this.codeMirror_?o=this.codeMirror_.getWrapperElement():this.ace_?o=this.ace_.container:o=this.monaco_.getDomNode(),this.firepadWrapper_.removeChild(o),this.firepadWrapper_.parentNode.replaceChild(o,this.firepadWrapper_),this.editor_.firepad=null,this.codeMirror_&&this.codeMirror_.getOption("keyMap")==="richtext"&&this.codeMirror_.setOption("keyMap","default"),this.firebaseAdapter_.dispose(),this.editorAdapter_.detach(),this.richTextCodeMirror_&&this.richTextCodeMirror_.detach()},t.prototype.setUserId=function(o){this.firebaseAdapter_.setUserId(o)},t.prototype.setUserColor=function(o){this.firebaseAdapter_.setColor(o)},t.prototype.getText=function(){return this.assertReady_("getText"),this.codeMirror_?this.richTextCodeMirror_.getText():this.ace_?this.ace_.getSession().getDocument().getValue():this.monaco_.getModel().getValue()},t.prototype.setText=function(o){if(this.assertReady_("setText"),this.codeMirror6_)return this.codeMirror6_.dispatch({changes:{from:0,to:this.codeMirror6_.state.doc.length,insert:o}});if(this.monaco_)return this.monaco_.getModel().setValue(o);if(this.ace_)return this.ace_.getSession().getDocument().setValue(o);this.codeMirror_.getWrapperElement().style.display="none",this.codeMirror_.setValue(""),this.insertText(0,o),this.codeMirror_.getWrapperElement().style.display="",this.codeMirror_.refresh(),this.editorAdapter_.setCursor({position:0,selectionEnd:0})},t.prototype.insertTextAtCursor=function(o){this.insertText(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),o)},t.prototype.insertText=function(o,a){_e.assert(!this.ace_,"Not supported for ace yet."),_e.assert(!this.monaco_,"Not supported for monaco yet."),this.assertReady_("insertText"),Object.prototype.toString.call(a)!=="[object Array]"&&(a=[a]);var l=this;l.codeMirror_.operation(function(){for(var c=o===0,h=LV(c,a),u=0;u<h.length;u++){var f=h[u].string,p=h[u].attributes;l.richTextCodeMirror_.insertText(o,f,p),o+=f.length}})},t.prototype.getOperationForSpan=function(o,a){for(var l=this.richTextCodeMirror_.getRange(o,a),c=this.richTextCodeMirror_.getAttributeSpans(o,a),h=0,u=new Vt,f=0;f<c.length;f++)u.insert(l.substr(h,c[f].length),c[f].attributes),h+=c[f].length;return u},t.prototype.getHtml=function(){return this.getHtmlFromRange(null,null)},t.prototype.getHtmlFromSelection=function(){var o=this.codeMirror_.getCursor("start"),a=this.codeMirror_.getCursor("end"),l=this.codeMirror_.indexFromPos(o),c=this.codeMirror_.indexFromPos(a);return this.getHtmlFromRange(l,c)},t.prototype.getHtmlFromRange=function(o,a){this.assertReady_("getHtmlFromRange");var l=o!=null&&a!=null?this.getOperationForSpan(o,a):this.getOperationForSpan(0,this.codeMirror_.getValue().length);return NV(l,this.entityManager_)},t.prototype.insertHtml=function(o,a){var l=Nx(a,this.entityManager_);this.insertText(o,l)},t.prototype.insertHtmlAtCursor=function(o){this.insertHtml(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),o)},t.prototype.setHtml=function(o){var a=Nx(o,this.entityManager_);this.setText(a)},t.prototype.isHistoryEmpty=function(){return this.assertReady_("isHistoryEmpty"),this.firebaseAdapter_.isHistoryEmpty()},t.prototype.bold=function(){this.richTextCodeMirror_.toggleAttribute(Qe.BOLD),this.codeMirror_.focus()},t.prototype.italic=function(){this.richTextCodeMirror_.toggleAttribute(Qe.ITALIC),this.codeMirror_.focus()},t.prototype.underline=function(){this.richTextCodeMirror_.toggleAttribute(Qe.UNDERLINE),this.codeMirror_.focus()},t.prototype.strike=function(){this.richTextCodeMirror_.toggleAttribute(Qe.STRIKE),this.codeMirror_.focus()},t.prototype.fontSize=function(o){this.richTextCodeMirror_.setAttribute(Qe.FONT_SIZE,o),this.codeMirror_.focus()},t.prototype.font=function(o){this.richTextCodeMirror_.setAttribute(Qe.FONT,o),this.codeMirror_.focus()},t.prototype.color=function(o){this.richTextCodeMirror_.setAttribute(Qe.COLOR,o),this.codeMirror_.focus()},t.prototype.highlight=function(){this.richTextCodeMirror_.toggleAttribute(Qe.BACKGROUND_COLOR,"rgba(255,255,0,.65)"),this.codeMirror_.focus()},t.prototype.align=function(o){if(o!=="left"&&o!=="center"&&o!=="right")throw new Error('align() must be passed "left", "center", or "right".');this.richTextCodeMirror_.setLineAttribute(Qe.LINE_ALIGN,o),this.codeMirror_.focus()},t.prototype.orderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(Qe.LIST_TYPE,"o"),this.codeMirror_.focus()},t.prototype.unorderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(Qe.LIST_TYPE,"u"),this.codeMirror_.focus()},t.prototype.todo=function(){this.richTextCodeMirror_.toggleTodo(),this.codeMirror_.focus()},t.prototype.newline=function(){this.richTextCodeMirror_.newline()},t.prototype.deleteLeft=function(){this.richTextCodeMirror_.deleteLeft()},t.prototype.deleteRight=function(){this.richTextCodeMirror_.deleteRight()},t.prototype.indent=function(){this.richTextCodeMirror_.indent(),this.codeMirror_.focus()},t.prototype.unindent=function(){this.richTextCodeMirror_.unindent(),this.codeMirror_.focus()},t.prototype.undo=function(){this.codeMirror_.undo()},t.prototype.redo=function(){this.codeMirror_.redo()},t.prototype.insertEntity=function(o,a,l){this.richTextCodeMirror_.insertEntityAtCursor(o,a,l)},t.prototype.insertEntityAt=function(o,a,l,c){this.richTextCodeMirror_.insertEntityAt(o,a,l,c)},t.prototype.registerEntity=function(o,a){this.entityManager_.register(o,a)},t.prototype.getOption=function(o,a){return o in this.options_?this.options_[o]:a},t.prototype.assertReady_=function(o){if(!this.ready_)throw new Error('You must wait for the "ready" event before calling '+o+".");if(this.zombie_)throw new Error("You can't use a Firepad after calling dispose()!  [called "+o+"]")},t.prototype.makeImageDialog_=function(){this.makeDialog_("img","Insert image url")},t.prototype.makeDialog_=function(o,a){var l=this,c=function(){var A=document.getElementById("overlay");A.style.visibility="hidden",l.firepadWrapper_.removeChild(A)},h=function(){var A=document.getElementById("overlay");A.style.visibility="hidden";var g=document.getElementById(o).value;g!==null&&l.insertEntity(o,{src:g}),l.firepadWrapper_.removeChild(A)},u=_e.elt("input",null,{class:"firepad-dialog-input",id:o,type:"text",placeholder:a,autofocus:"autofocus"}),f=_e.elt("a","Submit",{class:"firepad-btn",id:"submitbtn"});_e.on(f,"click",_e.stopEventAnd(h));var p=_e.elt("a","Cancel",{class:"firepad-btn"});_e.on(p,"click",_e.stopEventAnd(c));var d=_e.elt("div",[f,p],{class:"firepad-btn-group"}),m=_e.elt("div",[u,d],{class:"firepad-dialog-div"}),b=_e.elt("div",[m],{class:"firepad-dialog",id:"overlay"});this.firepadWrapper_.appendChild(b)},t.prototype.addToolbar_=function(){this.toolbar=new FV(this.imageInsertionUI),this.toolbar.on("undo",this.undo,this),this.toolbar.on("redo",this.redo,this),this.toolbar.on("bold",this.bold,this),this.toolbar.on("italic",this.italic,this),this.toolbar.on("underline",this.underline,this),this.toolbar.on("strike",this.strike,this),this.toolbar.on("font-size",this.fontSize,this),this.toolbar.on("font",this.font,this),this.toolbar.on("color",this.color,this),this.toolbar.on("left",function(){this.align("left")},this),this.toolbar.on("center",function(){this.align("center")},this),this.toolbar.on("right",function(){this.align("right")},this),this.toolbar.on("ordered-list",this.orderedList,this),this.toolbar.on("unordered-list",this.unorderedList,this),this.toolbar.on("todo-list",this.todo,this),this.toolbar.on("indent-increase",this.indent,this),this.toolbar.on("indent-decrease",this.unindent,this),this.toolbar.on("insert-image",this.makeImageDialog_,this),this.firepadWrapper_.insertBefore(this.toolbar.element(),this.firepadWrapper_.firstChild)},t.prototype.addPoweredByLogo_=function(){var o=_e.elt("a",null,{class:"powered-by-firepad"});o.setAttribute("href","http://www.firepad.io/"),o.setAttribute("target","_blank"),this.firepadWrapper_.appendChild(o)},t.prototype.initializeKeyMap_=function(){function o(a){return function(l){setTimeout(function(){a.call(l.firepad)},0)}}n.keyMap.richtext={"Ctrl-B":o(this.bold),"Cmd-B":o(this.bold),"Ctrl-I":o(this.italic),"Cmd-I":o(this.italic),"Ctrl-U":o(this.underline),"Cmd-U":o(this.underline),"Ctrl-H":o(this.highlight),"Cmd-H":o(this.highlight),Enter:o(this.newline),Delete:o(this.deleteRight),Backspace:o(this.deleteLeft),Tab:o(this.indent),"Shift-Tab":o(this.unindent),fallthrough:["default"]}};function i(o){for(var a=1,l=0;l<o.length;l++)a=17*(a+o.charCodeAt(l))%360;var c=a/360;return s(c,1,.75)}function r(o,a,l){function c(h){var u=Math.round(255*h).toString(16);return u.length===1?"0"+u:u}return"#"+c(o)+c(a)+c(l)}function s(o,a,l){if(a===0)return r(l,l,l);var c=l<.5?l*(1+a):l+a-a*l,h=2*l-c,u=function(f){return f<0&&(f+=1),f>1&&(f-=1),6*f<1?h+(c-h)*6*f:2*f<1?c:3*f<2?h+(c-h)*6*(2/3-f):h};return r(u(o+1/3),u(o),u(o-1/3))}return t}();Object.assign(OR,{Formatting:Qf,Text:Pf,Entity:Jo,LineFormatting:Tc,Line:vb,TextOperation:Vt,RichTextCodeMirrorAdapter:mR,ACEAdapter:gR,MonacoAdapter:yR});let Xi=null,Vm=null;const Ni=Lt(!1),l0=U0(500,null),bR=Lt(""),Fa=xi([wo,Gn],([n,e])=>{const t=Xi==null?void 0:Xi.state.doc.toString().length;let i=(Xi==null?void 0:Xi.state.doc.lineAt(Math.min(n.from,Math.max(0,t-1))).number)-1,r="";for(const[s,o]of e.chapters.entries())if(o.contentStart<=i)r=s;else return r;return r}),UV=xi([Fa,Gn],([n,e])=>{if(n=="")return" ";const t=e.chapters.get(n);return n+(t.title?" - "+t.title:"")}),vR=n=>{At.set(n.book),wo.set({from:0,to:0}),Xi=k2(n.book),Mc.set(!0)},zV=n=>{try{wo.set({from:0,to:0}),Xi=k2("");const e=bc.initializeApp(n),t=bc.database(e);window.db=t,Vm=OR.fromCodeMirror6(t.ref(n.book),Xi,{defaultText:kn(Kt)("books.fire").replace("%1",n.book)}),Vm.on("ready",function(){Mc.set(!0)}),Vm.on("synced",function(i){i?l0.set(!0):l0.lazySet(!1)})}catch(e){bR.set(e.toString())}},ut=()=>Xi,Xm=LS.parse(location.hash),ka="mage-firebase-lastsessions",Zr=new W0("magebook2");Zr.version(1).stores({sessions:"&id, time, preview",fireSessions:"&id, time, preview"});const wR=Lt(!1),jV=async()=>(await Zr.sessions.orderBy("preview").keys()).reverse().map(n=>({time:new Date(Number(n.substr(0,30))),id:n.substr(31,20),name:n.substr(52,30)})),jd=new function(){let n;const t=Ah(20),i=c=>{const h=(c.data.title||"no title").padEnd(30,"").substr(0,30);return`${String(c.time).padStart(30,"0")}-${c.id}-${h}`},r=50,s=async()=>{const c="time",h=(await Zr.sessions.orderBy(c).keys()).reverse();if(h.length>r){const u=h[r];await Zr.sessions.where("time").below(u).modify(function(){delete this.value})}};let o;const a=async()=>{if(Xm.fsession){wR.set(!0),window.addEventListener("hashchange",()=>{window.location.reload()},!1),zV(JSON.parse(atob(decodeURIComponent(Xm.fsession)))),Mc.subscribe(u=>{if(u){const f=JSON.parse(localStorage[ka]||"{}");f[Xm.fsession]={name:Or.properties.title,time:new Date().getTime()},localStorage[ka]=JSON.stringify(f)}});return}if(o){console.error("Session loaded twice!");return}const c=localStorage.getItem("mage-session-last");o=await(async()=>{const u="msession=";if(!c)return Ah(20);if(window.location.hash&&window.location.hash.includes(u)){const f=window.location.hash.indexOf(u)+u.length;if(!(f+20>window.location.hash.length)){const p=window.location.hash.substr(f,20);if(p==c)return p;try{if(await Zr.sessions.get(p))return p}catch{}}}return c||Ah(20)})(),location.replace(`#msession=${o}`),window.addEventListener("hashchange",()=>{window.location.hash.includes(`#msession=${o}`)||window.location.reload()},!1),localStorage.setItem("mage-session-last",o),localStorage.setItem(`mage-lock-${o}`,t);let h;if(c==o)h=JSON.parse(localStorage.getItem("mage-session-last-data"));else try{h=await Zr.sessions.get(o)}catch{}h=h||{data:{book:kn(Kt)("books.local"),cursor:{row:0,column:0}}},vR(h.data),n=xi([At,wo,Gn],([u,f,p])=>({book:u,cursor:f,title:p.properties.title})),n.subscribe(async u=>{if(localStorage.getItem(`mage-lock-${o}`)!=t){ag.set({lock:!0,session:this});return}localStorage.setItem("mage-session-last",o);const f={id:o,data:u,time:new Date().getTime()};localStorage.setItem("mage-session-last-data",JSON.stringify(f));try{await Zr.sessions.put(jr({preview:i(f)},f))}catch(p){console.log(p)}}),window.onbeforeunload=u=>{At.flush(),delete u.returnValue},setInterval(()=>At.flush(),1e4),s()},l=async c=>{window.onbeforeunload=()=>{};const h=Ah(20);localStorage.setItem("mage-session-last",h);const u=jr({id:h,file:{name:"New"},time:new Date().getTime()},c);localStorage.setItem("mage-session-last-data",JSON.stringify(u));try{await Zr.sessions.put(u)}catch{}location.assign(`#msession=${u.id}`)};this.duplicate=async c=>{l(jr({data:kn(n)},c))},this.lock=()=>{localStorage.setItem(`mage-lock-${o}`,t),ag.set({lock:!1}),At.refresh()},Object.assign(this,{sessionName:o,load:a,open:l})},AR={md:b0,xlgc:hg,fodt:aM,docx:hM,html:pM},HV=n=>{const e=n.files[0],t=e.name,i=new FileReader;i.onload=async()=>{const r=t.substr(t.lastIndexOf(".")+1);if(!["md","xlgc"].includes(r)){console.error("Unsupported format");return}const s=i.result,o=AR[r].decode(s),a=r==="md"?s:await Promise.resolve(o);jd.open({data:{book:a,cursor:{row:0,column:0},title:o.title}}),n.value=""},i.readAsText(e)},pr=async(n,e)=>{const t=AR[n],i=b0.decode(e);jB(i.properties.disableShortLinks&&i.properties.disableShortLinks.trim()=="true");const r=n==="md"?e:await Promise.resolve(t.encode(e));if(!r)return;const s=document.createElement("a");s.setAttribute("href",`data:${t.mimetype};charset=utf-8,${encodeURIComponent(r)}`),s.setAttribute("download",(i.properties.title||"magebook")+"."+n),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},_R="mage-settings",or=JSON.parse(localStorage.getItem(_R)||"{}"),Df=Lt(or.theme||"light"),Nf=Lt(or.font||"Arial"),Lf=Lt(or.fontSize||"12"),Bf=Lt(or.pageWidth||"108"),Mf=Lt(or.pageZoom||"120"),$f=Lt(or.titleHighlight||"2"),Ff=Lt(or.justifyText||"1"),Wf=Lt(or.lineSpacing||"140%"),Uf=Lt(or.lineMargin==null?"4":or.lineMargin),GV=xi([Df,Nf,Lf,Bf,Mf,$f,Wf,Uf,Ff],([n,e,t,i,r,s,o,a,l])=>({theme:n,font:e,fontSize:t,pageWidth:i,pageZoom:r,titleHighlight:s,lineSpacing:o,lineMargin:a,justifyText:l}));GV.subscribe(n=>{localStorage.setItem(_R,JSON.stringify(n))});const Wa=Lt(!1),Kr=Lt(""),xR=Lt(null);window.magebookLocalAppPassword&&Wa.set(!0);const VV=async()=>{const n=kn(Kr),e=kn(xR),t={book:await window.readFile(n),cursor:{row:0,column:0}};if(t.book=="%ERROR%%"){kR();return}t.book==""?t.book=kn(Kt)("books.local"):n.endsWith(".xlgc")&&(await window.writeFile(n.substring(0,n.length-5)+`-backup-${Math.floor(new Date/1e3)}.xlgc`,t.book),t.book=hg.decode(t.book));try{const{cursor:r}=JSON.parse(e[encodeURIComponent(n)].Data);t.cursor.row=r.row||0,t.cursor.column=r.column||0}catch(r){console.log(r)}vR(t),At.subscribe(r=>{kn(Kr).endsWith(".xlgc")?window.writeFile(kn(Kr),hg.encode(b0.decode(r))):window.writeFile(kn(Kr),r)}),xi([Gn,wo],([r,s])=>({title:r.properties.title,cursor:s})).subscribe(r=>window.saveRecent(encodeURIComponent(kn(Kr)),JSON.stringify(r)))},kR=async()=>{await window.releaseLock(),window.location.hash="app=true",location.reload()},XV="magebook",YV="1.2.5",ZV="Luca Fabbian",qV="luca.fabbian.1999@gmail.com",KV="Interactive fiction editor",JV="MIT",eX="https://librogamesland.github.io/magebook",tX={type:"git",url:"https://github.com/librogamesland/magebook.git"},nX=["lgl","librogamesland","librogame","gamebook","editor","rollup-plugin","vite-plugin"],iX="index.js",rX={docs:"docsify serve . --port 3005",version:"echo $npm_package_version","cypress:open":"cypress open",dev:"vite",build:"vite build",preview:"vite preview",check:"svelte-check --tsconfig ./tsconfig.json",test:"echo 'work in progress :)'"},sX={"@codemirror/commands":"^6.0.0","@codemirror/lang-markdown":"^6.0.0","@codemirror/search":"^6.0.0","@fbraem/rollup-plugin-toml":"^0.0.1","@lucafabbian/firepad":"^1.5.17","@sveltejs/vite-plugin-svelte":"^1.0.0-next.30","@tsconfig/svelte":"^2.0.1",codemirror:"^6.0.0",cypress:"^10.1.0",dexie:"^3.2.2",docx:"^7.3.0","file-saver":"^2.0.5",firebase:"^9.8.3",jsdom:"^19.0.0",marked:"^4.0.17","query-string":"^7.1.1","smooth-scroll-into-view-if-needed":"^1.1.33",svelte:"^3.44.0","svelte-check":"^2.2.7","svelte-i18n":"^3.4.0","svelte-preprocess":"^4.9.8",tslib:"^2.3.1",typescript:"^4.5.4",vite:"^2.9.9","vite-plugin-pwa":"^0.12.0"},oX={"@types/sanitize-html":"^2.6.2","sanitize-html":"^2.7.1"};var br={name:XV,version:YV,author:ZV,email:qV,description:KV,license:JV,homepage:eX,repository:tX,keywords:nX,main:iX,scripts:rX,devDependencies:sX,dependencies:oX};function aX(n){let e,t,i,r,s,o,a,l,c,h=n[1]("about.text")+"",u,f,p=n[1]("about.contact")+"",d,m,b,A,g,v=n[1]("dialogs.ok")+"",O,_,x;return{c(){e=Y("div"),t=Y("h3"),t.textContent=`Magebook - v. ${br.version}`,i=fe(),r=Y("img"),o=fe(),a=Y("br"),l=fe(),c=Y("p"),u=fe(),f=Y("p"),d=Ae(p),m=Ae(": "),b=Y("a"),b.textContent="luca.fabbian.1999@gmail.com",A=fe(),g=Y("button"),O=Ae(v),ms(r.src,s="../../assets/img/logo.png")||G(r,"src",s),G(r,"alt","Magebook logo"),G(r,"class","svelte-1qabtlc"),G(c,"class","svelte-1qabtlc"),G(b,"target","_blank"),G(b,"rel","noopener"),G(b,"href","mailto:luca.fabbian.1999@gmail.com?subject=Magebook%20-%20Segnalazione"),G(f,"class","svelte-1qabtlc"),G(g,"class","ok svelte-1qabtlc"),G(e,"class","dialog svelte-1qabtlc")},m(E,T){Ee(E,e,T),W(e,t),W(e,i),W(e,r),W(e,o),W(e,a),W(e,l),W(e,c),c.innerHTML=h,W(e,u),W(e,f),W(f,d),W(f,m),W(f,b),W(e,A),W(e,g),W(g,O),_||(x=Ie(g,"click",n[3]),_=!0)},p(E,[T]){T&2&&h!==(h=E[1]("about.text")+"")&&(c.innerHTML=h),T&2&&p!==(p=E[1]("about.contact")+"")&&Te(d,p),T&2&&v!==(v=E[1]("dialogs.ok")+"")&&Te(O,v)},i:We,o:We,d(E){E&&Se(e),_=!1,x()}}}function lX(n,e,t){let i;Le(n,Kt,a=>t(1,i=a));let{params:r}=e,{callback:s}=e;const o=()=>s(!0);return n.$$set=a=>{"params"in a&&t(2,r=a.params),"callback"in a&&t(0,s=a.callback)},[s,i,r,o]}class cX extends xn{constructor(e){super(),_n(this,e,lX,aX,gn,{params:2,callback:0})}}function Mx(n){let e,t=n[5]("dialogs.shuffle.savecopy")+"",i,r,s;return{c(){e=Y("button"),i=Ae(t),G(e,"class","cancel")},m(o,a){Ee(o,e,a),W(e,i),r||(s=Ie(e,"click",n[8]),r=!0)},p(o,a){a&32&&t!==(t=o[5]("dialogs.shuffle.savecopy")+"")&&Te(i,t)},d(o){o&&Se(e),r=!1,s()}}}function hX(n){let e,t,i,r,s,o,a,l,c=n[5]("dialogs.ok")+"",h,u,f,p,d=n[5]("dialogs.cancel")+"",m,b,A,g=n[4]&&Mx(n);return{c(){e=Y("div"),t=Y("h3"),i=Ae(n[2]),r=fe(),s=Y("p"),o=Ae(n[3]),a=fe(),l=Y("button"),h=Ae(c),u=fe(),g&&g.c(),f=fe(),p=Y("button"),m=Ae(d),G(l,"class","ok"),G(p,"class","cancel"),G(e,"class","dialog")},m(v,O){Ee(v,e,O),W(e,t),W(t,i),W(e,r),W(e,s),W(s,o),W(e,a),W(e,l),W(l,h),W(e,u),g&&g.m(e,null),W(e,f),W(e,p),W(p,m),b||(A=[Ie(l,"click",n[7]),Ie(p,"click",n[9])],b=!0)},p(v,[O]){O&4&&Te(i,v[2]),O&8&&Te(o,v[3]),O&32&&c!==(c=v[5]("dialogs.ok")+"")&&Te(h,c),v[4]?g?g.p(v,O):(g=Mx(v),g.c(),g.m(e,f)):g&&(g.d(1),g=null),O&32&&d!==(d=v[5]("dialogs.cancel")+"")&&Te(m,d)},i:We,o:We,d(v){v&&Se(e),g&&g.d(),b=!1,Xt(A)}}}function uX(n,e,t){let i,r,s=We,o=()=>(s(),s=Cc(l,m=>t(6,r=m)),l),a;Le(n,Kt,m=>t(5,a=m)),n.$$.on_destroy.push(()=>s());let{params:l}=e;o();let{callback:c}=e,h,u;const f=()=>c(!0),p=()=>pr("md",At.flush()),d=()=>c(!1);return n.$$set=m=>{"params"in m&&o(t(0,l=m.params)),"callback"in m&&t(1,c=m.callback)},n.$$.update=()=>{n.$$.dirty&64&&t(2,[h,u,i]=r,h,(t(3,u),t(6,r)),(t(4,i),t(6,r)))},[l,c,h,u,i,a,r,f,p,d]}class c0 extends xn{constructor(e){super(),_n(this,e,uX,hX,gn,{params:0,callback:1})}}function fX(n){let e,t,i=n[4]("dialogs.graph.loading")+"",r,s,o;return{c(){e=Y("div"),t=Y("p"),r=Ae(i),s=fe(),o=Y("div"),G(o,"class","spinner-1"),G(e,"class","dialog"),Dt(e,"text-align","center")},m(a,l){Ee(a,e,l),W(e,t),W(t,r),W(e,s),W(e,o)},p(a,l){l&16&&i!==(i=a[4]("dialogs.graph.loading")+"")&&Te(r,i)},d(a){a&&Se(e)}}}function dX(n){let e,t,i,r,s,o=n[4]("dialogs.graph.open")+"",a,l,c,h=n[4]("dialogs.graph.download")+"",u,f,p;return{c(){e=Y("div"),t=Y("div"),i=fe(),r=Y("div"),s=Y("button"),a=Ae(o),l=fe(),c=Y("button"),u=Ae(h),Dt(t,"max-width","90vw"),Dt(t,"max-height","80vh"),Dt(t,"overflow","auto"),G(s,"class","ok"),G(c,"class","error"),G(e,"class","imgbox svelte-m36p7x")},m(d,m){Ee(d,e,m),W(e,t),t.innerHTML=n[3],W(e,i),W(e,r),W(r,s),W(s,a),W(r,l),W(r,c),W(c,u),f||(p=[Ie(t,"click",TN(n[7])),Ie(s,"click",n[8]),Ie(c,"click",n[9]),Ie(e,"click",n[10])],f=!0)},p(d,m){m&8&&(t.innerHTML=d[3]),m&16&&o!==(o=d[4]("dialogs.graph.open")+"")&&Te(a,o),m&16&&h!==(h=d[4]("dialogs.graph.download")+"")&&Te(u,h)},d(d){d&&Se(e),f=!1,Xt(p)}}}function pX(n){let e;function t(s,o){if(s[1])return dX;if(s[2])return fX}let i=t(n),r=i&&i(n);return{c(){r&&r.c(),e=to()},m(s,o){r&&r.m(s,o),Ee(s,e,o)},p(s,[o]){i===(i=t(s))&&r?r.p(s,o):(r&&r.d(1),r=i&&i(s),r&&(r.c(),r.m(e.parentNode,e)))},i:We,o:We,d(s){r&&r.d(s),s&&Se(e)}}}function mX(n,e,t){let i,r;Le(n,Kt,m=>t(4,i=m)),Le(n,Gn,m=>t(5,r=m));let{params:s}=e,{callback:o}=e,a=!1,l=!1,c;const h=s.subscribe(async m=>{t(1,a=!1),t(2,l=!0),await ea(),setTimeout(async()=>{t(3,c=await Promise.resolve(m[0]())),t(1,a=!0)},100)});_k(h);const u=()=>console.log("clickOnImg"),f=()=>{const m=new window.Blob([c],{type:"image/svg+xml"}),b=URL.createObjectURL(m),A=window.open(b);A.onload=()=>URL.revokeObjectURL(b)},p=()=>{const m=document.createElement("a");m.setAttribute("href",`data:image/svg+xml;base64,${window.btoa(c)}`),m.setAttribute("download",(r.properties.title||"graph")+".svg"),m.style.display="none",document.body.appendChild(m),m.click(),document.body.removeChild(m)},d=async()=>{t(3,c=""),await ea(),o(!1)};return n.$$set=m=>{"params"in m&&t(6,s=m.params),"callback"in m&&t(0,o=m.callback)},[o,a,l,c,i,r,s,u,f,p,d]}class gX extends xn{constructor(e){super(),_n(this,e,mX,pX,gn,{params:6,callback:0})}}var wb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEgElEQVR4nH2Ua0xbZRjHS7lEkw6kAzcGjkmE4UKcCWxTMz9tGnDzi26SOMMI2cYAuRU4lF7OpTdKS1kLE1qG2zRsTpCFNZT7daW0XAuswGQf5OJHY9Qvgpy+j29LuwBznuSf8573vM/v/J/nec/LoWmas1cMTQf5x023Gk+bTA1ZjSZjlslkPO+fF4slXIZhuHtjX4CRJBnouRuN9e92Wsx3HfbRXx12G3I4bGAfs/5uHRns/qnlwWc7YgJeCsQw78sO88NMq3Xoj8kJO0xPTcLcnBPNzznB6ZwCx/gYjNut0N1lvqdSKcP3Qp/DKGobZm5vFQwP9KBR6xCamhzfXHA9cS8v/wzPni3D4uICcs5MbdlGR9iRoT7oMLcNKpWKMIlUuhtIUZR34pubhve7Le0w0Nftxum5Z53T8PTpElpdW0Pr6+seKJqbm4UJhw0ND/Zt9nSZoa31fp0nVkqS3J0OvQ8/3Lt7s7+nAw30d3lcwMz0BMJAWFlZgdXVNfA4dTqn0ZjNCkMDPWxnR7u741HrukGvO+BP3e/Q2whtlby3vq4aDeLFE+NjyDU/C64n87C0tORxCgsLLlhadMHszCSMjQ677zffBkZKbFSqFKd8HK4XSPrsCgpzBssFOWB51MJ+21gPt5uMMNjfBbOzMzCP4X29nVBVKQOaEkOTqQ41GfVbedcuA0WKz/uNbQN9DjGwv6w4Fz5J/YgNfy0MIiL4QJQKYGrSAZ6Oq1Ry2M/nQ3BwEMTERANRUrAhJvKRRCz80gskySB/yl6HlLj0ccZX6XDoUDQbzg8HPn8/XLzwOdgeD8H0pB2uZV+FNw4fhqioKIiMfB2lp19kVbIKEAnL0nzGuL6mbG9mBVPxo6i8CJKTU7YSExMhIeEo5H+dC9oqhSctqFTKIDklBZKSkuCd48fdImEp6FTS38Si8rd8Dp83xetQyYhK6murWEpazmZlZkBJUT76/o4Jg+MhJCQETA0G0OvUICQEqFJBuW+ZDKxey/wiY8gjXmN4+/mA29tGp6YtBp0ccLH/lpOEW0aWAUNWoNjYWIiOjob8vGxUX6tBhCAXGuq0WzdvqDZvaGlQyKhzXg7tawpNb29stZJOMdapl+tq5CAszQMlXY4qCAGkpJzwlAEK83OgVqeE4vwrSEETgNeCXku3yGXUK/TOP2WnEuLjIk5/cPJjjVLs0qlJVK2mWEmFAEmEAqjRMKiminbXVFGorCjbcDQ+7sPr2VeDd8bvgoWGhgZxOJwwzzjj0gWLXkOzarnoH0M1g2qrZUijFLEyaQlbrZL+dSQ25oQXwOEEvRSILx4u/smAgIDUc2lnH9RoaKAlJcBISlklU8HKcF3xB6Ag74prH4/3KZfLPYVjIvh8/ounjR8YGBiYhO9nQkP3fZF5+VLzd3dMf/b3WqCtpRks5ocb5URx78GDB67jNWexkvHHI3g83n8DsTsuXvQqViTWm1ixx94+9h5BEEVFhQXi1NS0M3guzvcuCsN4/5vyTuF0uDggBAfsOuY9c1ieWu86qf36FzbTCQMGhUSbAAAAAElFTkSuQmCC",Ab="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wENEA4tJ8wnvAAAArNJREFUOMvVlM1rVFcYxn/n3pu5MTMTM0nGdFI1IfGD+lEioSWrdllUEIrgUhBcdBORIOgfIIgiXVQoolvdFLtIiSKClW7b9MMYP5oMRieZyTidzGQy986dO3fufV1Mp02joNaNvpvznsP7/Hg4nOfAu16q2dR+bZ/Or0ihaJFOdLm7It2HToW2Xbn+MlEwd3C/Vfj+7GJev9cZ4cPu9cTULn/3f4D1TPTJwqJ/rH+48kP5pvHtut3DX0jPB39KzdIpAFkgA1ghX7Vmt1fV1Hj0S38sdZcDGxN8o22gH8BoAt0Odb8voQYAzEgs58n8gJS3DmDdghUHHBAPcMHXQe8by8DXbPqYAcdhusn5B+hY9V/a1pkjYBOYUm1tN8DoBdeAENAGRAEBPwzPskn3b+lIxWayydGaTfGJPxGUtCEn2ac8384RuCA+YEIA+DTWALy6wbPZH3OlqW4Nu2VPKcXEC8Ctn7qTxRlnvsUJHQkk8gDfAiVAGKThDL9x6xVHUTc7HkXN1iOlpJcaHH6JQ4C5n2un/VzpuLK73KBWzYMNKv4vzGsoimUjvT7a7qnS8vHUJKdXM/TVm8s3gqeHdla3xPXIPom5WT3WsZ16G9hJqABlcEWRKcRvDHbVPkvN5u9+9BWXVjO0tW/s4YycmJtJe9osn+DNgB5ujHkggWK+GKYn5I0U05lg9hEn1ur1tQfXfhc+H5QJVQl2xDfZQ6o7DpVlsB3SS2HKVgjNLYxPP5ajey/gv1GMfjpnjNYXEhVZ6hX3jilTFzort8+0jL5VNmu/qZNBVpPCRU3mL6nRtw67pIjJHEvVm6TzfxB+1bzxSqJJCIVhbsYwewkB9v9394B++YtrUkYkg8gyVyXJ5tf6vl6A3dl4mI6F84T1dqpYFIEcEXx/mbbEMXVg8Tvey3oOImsv73TtdGkAAAAASUVORK5CYII=",_b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAArrAAAK6wGCiw1aAAAAK3RFWHRDcmVhdGlvbiBUaW1lAERvIDMwIEp1biAyMDA1IDE0OjMyOjM5ICswMTAwRscKOAAAApFJREFUeJytlMtPE1EUxtsSFz4SjRFYGF8ERXyUUBVBKC9DsKECDSBEkQaQWh5GIjFIpPMKFh9gBFGDDxbEoMSFMW6QrRqXCMSQKDvlL0ADzMz9jp22IVMKRYiLX+bmnPN9c86dO9cgCILhf7JqwVqJmBQ5ziTyXBTPCyYNba3F1mfI88b15JYXBBl2OpLH0nff/Z6yY+THyeiRsYw99147HZZImrBAuyD63z6RHe+dN29icy4bLfR6/MxdLqCF5C0Yz4m/ra9d0ZAPjjKRG3dLTdlKsx2NbH7wviy/6Vfl4cfq/MAdeVaqZyx1G03mxnXqNWGGIufxb/ZLV4WZHTLQb3e+It+8CKXDTWr3NTAfqlRHcmsF/tSdVpBooFe1ZUl6bWiHHBelPSfz9nfBbIRcniTjio3AVQJeF8FbR2g/DzTmkeJIkHHEiMm8A116bYghxwv+1n9aY0Zw1ABkblZQEgdUWwjuU0Q+/GvHXiDLl0sy4Jc15kNgbGFx7EVDXggEZ6zRo0jfAFa0S8WFgyCXhagpNYD7OMF5GKxkn4KsjZjJjB3Va0NH5gNtT+Un9ODMdqhOs0zNVt/IBSBvKVFnKUE4C2rJJrU2WYY9BlO2xF69NtQwuLFDNWUnyB5L6tUMBZwd1FNFeF4PvGgA9VUTpCKoLdkKFe+kodqyFL021FDQHZviYw+pOZXYg0qFDTQp7B2vsveiygabFdZXrdB1K30rtjxaOm6YoYZHlIxCW5tp/FzaE/LYiIZbiD52E33pIXp7g0gqpPHytH6htdXkkaTIB3spQ1UlOV/d9qfTHTWfpr2XPo81FD7zxXIjaVY2FMN/q3/JLS8I4ruuTKIoLH5Bba3FImkiGq6HVQvWyl/gxssJlvWS8AAAAABJRU5ErkJggg==";function $x(n,e,t){const i=n.slice();return i[18]=e[t],i}function Fx(n,e,t){const i=n.slice();return i[21]=e[t],i}function Wx(n){let e,t=n[21]+"",i,r;return{c(){e=Y("option"),i=Ae(t),e.__value=r=n[21],e.value=e.__value},m(s,o){Ee(s,e,o),W(e,i)},p(s,o){o&16&&t!==(t=s[21]+"")&&Te(i,t),o&16&&r!==(r=s[21])&&(e.__value=r,e.value=e.__value)},d(s){s&&Se(e)}}}function Ux(n){let e,t,i,r,s,o,a;function l(){return n[12](n[18])}return{c(){e=Y("div"),t=Y("img"),s=fe(),G(t,"alt",i=n[18]),ms(t.src,r=n[6][n[18]])||G(t,"src",r),G(t,"class","svelte-1ergg8"),G(e,"class","svelte-1ergg8"),ln(e,"selected",n[3][n[18]])},m(c,h){Ee(c,e,h),W(e,t),W(e,s),o||(a=Ie(e,"click",l),o=!0)},p(c,h){n=c,h&8&&ln(e,"selected",n[3][n[18]])},d(c){c&&Se(e),o=!1,a()}}}function yX(n){let e,t,i=n[5]("dialogs.shuffle.title")+"",r,s,o,a=n[5]("dialogs.shuffle.hint")+"",l,c,h,u=n[5]("dialogs.shuffle.group")+"",f,p,d,m,b,A,g,v,O,_=n[5]("sidemenu.allgroup")+"",x,E,T,S=n[5]("dialogs.shuffle.flags")+"",C,B,M,D,N,P,X=n[5]("dialogs.ok")+"",Z,K,ee,J=n[5]("dialogs.shuffle.savecopy")+"",ge,k,j,V=n[5]("dialogs.cancel")+"",H,q,le,be=n[4],ae=[];for(let R=0;R<be.length;R+=1)ae[R]=Wx(Fx(n,be,R));let ue=["final","fixed","death"],U=[];for(let R=0;R<3;R+=1)U[R]=Ux($x(n,ue,R));return{c(){e=Y("div"),t=Y("h3"),r=Ae(i),s=fe(),o=Y("p"),l=Ae(a),c=fe(),h=Y("h4"),f=Ae(u),p=Ae(":"),d=fe(),m=Y("div"),b=Y("input"),A=fe(),g=Y("span"),v=Y("select"),O=Y("option"),x=Ae(_);for(let R=0;R<ae.length;R+=1)ae[R].c();E=fe(),T=Y("h4"),C=Ae(S),B=Ae(":"),M=fe(),D=Y("div");for(let R=0;R<3;R+=1)U[R].c();N=fe(),P=Y("button"),Z=Ae(X),K=fe(),ee=Y("button"),ge=Ae(J),k=fe(),j=Y("button"),H=Ae(V),G(h,"class","svelte-1ergg8"),G(b,"type","text"),G(b,"class","svelte-1ergg8"),O.__value="allgroupidtag",O.value=O.__value,n[1]===void 0&&jl(()=>n[11].call(v)),G(g,"class","select-dropdown svelte-1ergg8"),Dt(g,"margin-left","5px"),G(m,"class","input svelte-1ergg8"),G(T,"class","svelte-1ergg8"),G(D,"class","flags svelte-1ergg8"),G(P,"class","ok"),G(ee,"class","cancel"),G(j,"class","cancel"),G(e,"class","dialog svelte-1ergg8")},m(R,Q){Ee(R,e,Q),W(e,t),W(t,r),W(e,s),W(e,o),W(o,l),W(e,c),W(e,h),W(h,f),W(h,p),W(e,d),W(e,m),W(m,b),yt(b,n[2]),W(m,A),W(m,g),W(g,v),W(v,O),W(O,x);for(let F=0;F<ae.length;F+=1)ae[F].m(v,null);_u(v,n[1]),W(e,E),W(e,T),W(T,C),W(T,B),W(e,M),W(e,D);for(let F=0;F<3;F+=1)U[F].m(D,null);W(e,N),W(e,P),W(P,Z),W(e,K),W(e,ee),W(ee,ge),W(e,k),W(e,j),W(j,H),q||(le=[Ie(b,"input",n[10]),Ie(v,"change",n[11]),Ie(P,"click",n[7]),Ie(ee,"click",n[13]),Ie(j,"click",n[14])],q=!0)},p(R,[Q]){if(Q&32&&i!==(i=R[5]("dialogs.shuffle.title")+"")&&Te(r,i),Q&32&&a!==(a=R[5]("dialogs.shuffle.hint")+"")&&Te(l,a),Q&32&&u!==(u=R[5]("dialogs.shuffle.group")+"")&&Te(f,u),Q&4&&b.value!==R[2]&&yt(b,R[2]),Q&32&&_!==(_=R[5]("sidemenu.allgroup")+"")&&Te(x,_),Q&16){be=R[4];let F;for(F=0;F<be.length;F+=1){const re=Fx(R,be,F);ae[F]?ae[F].p(re,Q):(ae[F]=Wx(re),ae[F].c(),ae[F].m(v,null))}for(;F<ae.length;F+=1)ae[F].d(1);ae.length=be.length}if(Q&18&&_u(v,R[1]),Q&32&&S!==(S=R[5]("dialogs.shuffle.flags")+"")&&Te(C,S),Q&72){ue=["final","fixed","death"];let F;for(F=0;F<3;F+=1){const re=$x(R,ue,F);U[F]?U[F].p(re,Q):(U[F]=Ux(re),U[F].c(),U[F].m(D,null))}for(;F<3;F+=1)U[F].d(1)}Q&32&&X!==(X=R[5]("dialogs.ok")+"")&&Te(Z,X),Q&32&&J!==(J=R[5]("dialogs.shuffle.savecopy")+"")&&Te(ge,J),Q&32&&V!==(V=R[5]("dialogs.cancel")+"")&&Te(H,V)},i:We,o:We,d(R){R&&Se(e),wi(ae,R),wi(U,R),q=!1,Xt(le)}}}function OX(n,e,t){let i,r,s,o,a,l;Le(n,Gn,_=>t(9,r=_)),Le(n,Wa,_=>t(15,s=_)),Le(n,wR,_=>t(16,o=_)),Le(n,At,_=>t(17,a=_)),Le(n,Kt,_=>t(5,l=_));let c={death:wb,final:Ab,fixed:_b},{params:h}=e,{callback:u}=e,f="",p={final:!1,fixed:!1,death:!1},d="allgroupidtag";const m=()=>{const _=Object.keys(p).filter(T=>p[T]),x=f.split(",").map(T=>T.trim()).filter(T=>T);At.flush();const E=OB(a,{selectedFlags:_,filter:x});if(o||s){ut().dispatch({changes:{from:0,to:ut().state.doc.length,insert:E}}),u(!1);return}jd.open({data:{book:E,cursor:{row:0,column:0},title:r.properties.title}})};function b(){f=this.value,t(2,f),t(1,d)}function A(){d=Ak(this),t(1,d),t(2,f),t(4,i),t(9,r)}const g=_=>t(3,p[_]=!p[_],p),v=()=>pr("md",At.flush()),O=()=>u(!1);return n.$$set=_=>{"params"in _&&t(8,h=_.params),"callback"in _&&t(0,u=_.callback)},n.$$.update=()=>{n.$$.dirty&512&&t(4,i=[...r.groups]),n.$$.dirty&6&&d!="allgroupidtag"&&(t(2,f+=d+", "),ea().then(()=>{t(1,d="allgroupidtag")}))},[u,d,f,p,i,l,c,m,h,r,b,A,g,v,O]}class bX extends xn{constructor(e){super(),_n(this,e,OX,yX,gn,{params:8,callback:0})}}function vX(n){let e,t,i=n[1]("dialogs.newbook.new")+"",r,s,o,a=n[1]("dialogs.newbook.hint")+"",l,c,h=n[1]("dialogs.ok")+"",u,f,p,d=n[1]("dialogs.cancel")+"",m,b,A;return{c(){e=Y("div"),t=Y("h3"),r=Ae(i),s=fe(),o=Y("p"),l=fe(),c=Y("button"),u=Ae(h),f=fe(),p=Y("button"),m=Ae(d),Dt(o,"margin","1rem 0"),G(c,"class","ok"),G(p,"class","cancel"),G(e,"class","dialog")},m(g,v){Ee(g,e,v),W(e,t),W(t,r),W(e,s),W(e,o),o.innerHTML=a,W(e,l),W(e,c),W(c,u),W(e,f),W(e,p),W(p,m),b||(A=[Ie(c,"click",n[4]),Ie(p,"click",n[5])],b=!0)},p(g,[v]){v&2&&i!==(i=g[1]("dialogs.newbook.new")+"")&&Te(r,i),v&2&&a!==(a=g[1]("dialogs.newbook.hint")+"")&&(o.innerHTML=a),v&2&&h!==(h=g[1]("dialogs.ok")+"")&&Te(u,h),v&2&&d!==(d=g[1]("dialogs.cancel")+"")&&Te(m,d)},i:We,o:We,d(g){g&&Se(e),b=!1,Xt(A)}}}function wX(n,e,t){let i;Le(n,Kt,c=>t(1,i=c));let{params:r}=e,{callback:s}=e;const o=()=>jd.open({data:{book:i("books.local"),cursor:{row:0,column:0}}}),a=()=>o(),l=()=>s(!1);return n.$$set=c=>{"params"in c&&t(3,r=c.params),"callback"in c&&t(0,s=c.callback)},[s,i,o,r,a,l]}class AX extends xn{constructor(e){super(),_n(this,e,wX,vX,gn,{params:3,callback:0})}}function _X(n){let e,t,i,r=n[4]("dialogs.newfirebook.new")+"",s,o,a,l,c,h,u,f,p,d,m,b,A,g,v=n[4]("dialogs.newfirebook.book")+"",O,_,x,E,T,S,C=n[4]("dialogs.newfirebook.getStarted")+"",B,M,D=n[4]("dialogs.ok")+"",N,P,X,Z,K=n[4]("dialogs.cancel")+"",ee,J,ge;return{c(){e=Y("div"),t=Y("form"),i=Y("h3"),s=Ae(r),o=fe(),a=Y("div"),l=Y("span"),l.textContent="apiKey:",c=fe(),h=Y("input"),u=fe(),f=Y("div"),p=Y("span"),p.textContent="databaseURL:",d=fe(),m=Y("input"),b=fe(),A=Y("div"),g=Y("span"),O=Ae(v),_=Ae(":"),x=fe(),E=Y("input"),T=fe(),S=Y("p"),B=fe(),M=Y("button"),N=Ae(D),X=fe(),Z=Y("button"),ee=Ae(K),G(l,"class","svelte-1c6ktlb"),G(h,"name","password"),G(h,"type","password"),G(h,"class","svelte-1c6ktlb"),G(a,"class","input svelte-1c6ktlb"),G(p,"class","svelte-1c6ktlb"),G(m,"name","user"),G(m,"type","text"),G(m,"class","svelte-1c6ktlb"),G(f,"class","input svelte-1c6ktlb"),G(g,"class","svelte-1c6ktlb"),G(E,"type","text"),G(E,"class","svelte-1c6ktlb"),G(A,"class","input svelte-1c6ktlb"),G(S,"class","getstarted"),Dt(S,"margin","1rem 0"),M.disabled=P=!n[3]||!n[1]||!n[2],G(M,"class","ok"),G(Z,"class","cancel"),G(t,"method","post"),G(t,"action","/signin"),G(e,"class","dialog svelte-1c6ktlb")},m(k,j){Ee(k,e,j),W(e,t),W(t,i),W(i,s),W(t,o),W(t,a),W(a,l),W(a,c),W(a,h),yt(h,n[1]),W(t,u),W(t,f),W(f,p),W(f,d),W(f,m),yt(m,n[2]),W(t,b),W(t,A),W(A,g),W(g,O),W(g,_),W(A,x),W(A,E),yt(E,n[3]),W(t,T),W(t,S),S.innerHTML=C,W(t,B),W(t,M),W(M,N),W(t,X),W(t,Z),W(Z,ee),J||(ge=[Ie(h,"input",n[8]),Ie(m,"input",n[9]),Ie(E,"input",n[10]),Ie(M,"click",n[11]),Ie(Z,"click",n[12]),Ie(t,"submit",EN(n[7]))],J=!0)},p(k,[j]){j&16&&r!==(r=k[4]("dialogs.newfirebook.new")+"")&&Te(s,r),j&2&&h.value!==k[1]&&yt(h,k[1]),j&4&&m.value!==k[2]&&yt(m,k[2]),j&16&&v!==(v=k[4]("dialogs.newfirebook.book")+"")&&Te(O,v),j&8&&E.value!==k[3]&&yt(E,k[3]),j&16&&C!==(C=k[4]("dialogs.newfirebook.getStarted")+"")&&(S.innerHTML=C),j&16&&D!==(D=k[4]("dialogs.ok")+"")&&Te(N,D),j&14&&P!==(P=!k[3]||!k[1]||!k[2])&&(M.disabled=P),j&16&&K!==(K=k[4]("dialogs.cancel")+"")&&Te(ee,K)},i:We,o:We,d(k){k&&Se(e),J=!1,Xt(ge)}}}function xX(n,e,t){let i;Le(n,Kt,b=>t(4,i=b));let{params:r}=e,{callback:s}=e,o,a,l;const c=()=>{const b=encodeURIComponent(btoa(JSON.stringify({apiKey:o.replaceAll('",',"").replaceAll('"',"").replaceAll("apiKey:","").trim(),databaseURL:a.replaceAll('",',"").replaceAll('"',"").replaceAll("databaseURL:","").trim(),book:l})));location.assign(`#fsession=${b}`),location.reload()};function h(b){QN.call(this,n,b)}function u(){o=this.value,t(1,o)}function f(){a=this.value,t(2,a)}function p(){l=this.value,t(3,l)}const d=()=>c(),m=()=>s(!1);return n.$$set=b=>{"params"in b&&t(6,r=b.params),"callback"in b&&t(0,s=b.callback)},[s,o,a,l,i,c,r,h,u,f,p,d,m]}class kX extends xn{constructor(e){super(),_n(this,e,xX,_X,gn,{params:6,callback:0})}}function zx(n,e,t){const i=n.slice();return i[4]=e[t][0],i[5]=e[t][1],i}function jx(n,e,t){const i=n.slice();return i[5]=e[t],i}function SX(n){return{c:We,m:We,p:We,d:We}}function EX(n){let e,t=n[8],i=[];for(let r=0;r<t.length;r+=1)i[r]=Hx(jx(n,t,r));return{c(){e=Y("ul");for(let r=0;r<i.length;r+=1)i[r].c();G(e,"class","svelte-5d1vqe")},m(r,s){Ee(r,e,s);for(let o=0;o<i.length;o+=1)i[o].m(e,null)},p(r,s){if(s&0){t=r[8];let o;for(o=0;o<t.length;o+=1){const a=jx(r,t,o);i[o]?i[o].p(a,s):(i[o]=Hx(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(r){r&&Se(e),wi(i,r)}}}function Hx(n){let e,t,i=n[5].name+"",r,s,o,a=n[5].time.toLocaleDateString()+"",l,c,h=n[5].time.toLocaleTimeString()+"",u,f;return{c(){e=Y("li"),t=Y("a"),r=Ae(i),s=fe(),o=Y("span"),l=Ae(a),c=fe(),u=Ae(h),G(o,"class","svelte-5d1vqe"),G(t,"href",f="#msession="+n[5].id),G(t,"class","svelte-5d1vqe"),G(e,"class","svelte-5d1vqe")},m(p,d){Ee(p,e,d),W(e,t),W(t,r),W(t,s),W(t,o),W(o,l),W(o,c),W(o,u)},p:We,d(p){p&&Se(e)}}}function TX(n){let e;return{c(){e=Ae("Loading...")},m(t,i){Ee(t,e,i)},p:We,d(t){t&&Se(e)}}}function CX(n){let e,t=n[1]("navbar.file.recoverFire")+"",i,r,s,o=Object.entries(JSON.parse(localStorage[ka])).sort(Vx),a=[];for(let l=0;l<o.length;l+=1)a[l]=Gx(zx(n,o,l));return{c(){e=Y("h3"),i=Ae(t),r=fe(),s=Y("ul");for(let l=0;l<a.length;l+=1)a[l].c();G(e,"class","svelte-5d1vqe"),G(s,"class","svelte-5d1vqe")},m(l,c){Ee(l,e,c),W(e,i),Ee(l,r,c),Ee(l,s,c);for(let h=0;h<a.length;h+=1)a[h].m(s,null)},p(l,c){if(c&2&&t!==(t=l[1]("navbar.file.recoverFire")+"")&&Te(i,t),c&0){o=Object.entries(JSON.parse(localStorage[ka])).sort(Vx);let h;for(h=0;h<o.length;h+=1){const u=zx(l,o,h);a[h]?a[h].p(u,c):(a[h]=Gx(u),a[h].c(),a[h].m(s,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=o.length}},d(l){l&&Se(e),l&&Se(r),l&&Se(s),wi(a,l)}}}function Gx(n){let e,t,i=n[5].name+"",r,s,o,a=new Date(n[5].time).toLocaleDateString()+"",l,c,h=new Date(n[5].time).toLocaleTimeString()+"",u,f;return{c(){e=Y("li"),t=Y("a"),r=Ae(i),s=fe(),o=Y("span"),l=Ae(a),c=fe(),u=Ae(h),G(o,"class","svelte-5d1vqe"),G(t,"href",f="#fsession="+n[4]),G(t,"class","svelte-5d1vqe"),G(e,"class","svelte-5d1vqe")},m(p,d){Ee(p,e,d),W(e,t),W(t,r),W(t,s),W(t,o),W(o,l),W(o,c),W(o,u)},p:We,d(p){p&&Se(e)}}}function IX(n){let e,t,i=n[1]("navbar.file.recover")+"",r,s,o,a,l,c=n[1]("dialogs.cancel")+"",h,u,f,p={ctx:n,current:null,token:null,hasCatch:!1,pending:TX,then:EX,catch:SX,value:8};f0(jV(),p);let d=localStorage[ka]&&CX(n);return{c(){e=Y("div"),t=Y("h3"),r=Ae(i),s=fe(),p.block.c(),o=fe(),d&&d.c(),a=fe(),l=Y("button"),h=Ae(c),G(t,"class","svelte-5d1vqe"),G(l,"class","cancel"),G(e,"class","dialog recover")},m(m,b){Ee(m,e,b),W(e,t),W(t,r),W(e,s),p.block.m(e,p.anchor=null),p.mount=()=>e,p.anchor=o,W(e,o),d&&d.m(e,null),W(e,a),W(e,l),W(l,h),u||(f=Ie(l,"click",n[3]),u=!0)},p(m,[b]){n=m,b&2&&i!==(i=n[1]("navbar.file.recover")+"")&&Te(r,i),d0(p,n,b),localStorage[ka]&&d.p(n,b),b&2&&c!==(c=n[1]("dialogs.cancel")+"")&&Te(h,c)},i:We,o:We,d(m){m&&Se(e),p.block.d(),p.token=null,p=null,d&&d.d(),u=!1,f()}}}const Vx=([n,e],[t,i])=>i.time-e.time;function RX(n,e,t){let i;Le(n,Kt,a=>t(1,i=a));let{params:r}=e,{callback:s}=e;const o=()=>s(!1);return n.$$set=a=>{"params"in a&&t(2,r=a.params),"callback"in a&&t(0,s=a.callback)},[s,i,r,o]}class QX extends xn{constructor(e){super(),_n(this,e,RX,IX,gn,{params:2,callback:0})}}function Xx(n,e,t){const i=n.slice();return i[23]=e[t],i}function PX(n){return{c:We,m:We,p:We,d:We}}function DX(n){let e,t=n[22],i=[];for(let r=0;r<t.length;r+=1)i[r]=Yx(Xx(n,t,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=to()},m(r,s){for(let o=0;o<i.length;o+=1)i[o].m(r,s);Ee(r,e,s)},p(r,s){if(s&1024){t=r[22];let o;for(o=0;o<t.length;o+=1){const a=Xx(r,t,o);i[o]?i[o].p(a,s):(i[o]=Yx(a),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(r){wi(i,r),r&&Se(e)}}}function Yx(n){let e,t;return{c(){e=Y("option"),e.__value=t=n[23],e.value=e.__value},m(i,r){Ee(i,e,r)},p:We,d(i){i&&Se(e)}}}function NX(n){return{c:We,m:We,p:We,d:We}}function LX(n){let e,t,i,r,s,o,a,l,c,h,u,f,p,d,m,b,A,g,v,O,_,x,E,T,S,C,B,M,D,N,P,X,Z,K,ee,J,ge,k,j,V,H,q,le,be,ae,ue,U,R,Q,F,re,me,oe,he,de,pe,xe,Fe,st,I,L,z=n[9]("dialogs.ok")+"",te,se,ce,Oe={ctx:n,current:null,token:null,hasCatch:!1,pending:NX,then:DX,catch:PX,value:22};return f0(n[10],Oe),{c(){e=Y("div"),t=Y("h3"),t.textContent="Settings",i=fe(),r=Y("table"),s=Y("tr"),o=Y("th"),o.textContent="font-family:",a=fe(),l=Y("td"),c=Y("input"),h=fe(),u=Y("datalist"),Oe.block.c(),f=fe(),p=Y("tr"),d=Y("th"),d.textContent="font-size (pt):",m=fe(),b=Y("td"),A=Y("input"),g=fe(),v=Y("tr"),O=fe(),_=Y("tr"),x=Y("th"),x.textContent="page-width (mm):",E=fe(),T=Y("td"),S=Y("input"),C=fe(),B=Y("tr"),M=Y("th"),M.textContent="page-zoom (%):",D=fe(),N=Y("td"),P=Y("input"),X=fe(),Z=Y("tr"),K=fe(),ee=Y("tr"),J=Y("th"),J.textContent="line-spacing:",ge=fe(),k=Y("td"),j=Y("input"),V=fe(),H=Y("tr"),q=Y("th"),q.textContent="line-margin:",le=fe(),be=Y("td"),ae=Y("input"),ue=fe(),U=Y("tr"),R=Y("th"),R.textContent="title-highlight:",Q=fe(),F=Y("td"),re=Y("input"),me=fe(),oe=Y("tr"),he=Y("th"),he.textContent="justify-text:",de=fe(),pe=Y("td"),xe=Y("input"),Fe=fe(),st=Y("tr"),I=fe(),L=Y("button"),te=Ae(z),G(c,"type","text"),G(c,"list","fonts"),G(c,"class","svelte-pi47bm"),G(u,"id","fonts"),G(u,"class","svelte-pi47bm"),G(l,"class","svelte-pi47bm"),G(A,"type","number"),G(A,"min","2"),G(A,"max","50"),G(A,"class","svelte-pi47bm"),G(b,"class","svelte-pi47bm"),Dt(v,"height","15px"),G(S,"type","number"),G(S,"min","1"),G(S,"max","400"),G(S,"class","svelte-pi47bm"),G(T,"class","svelte-pi47bm"),G(P,"type","number"),G(P,"min","10"),G(P,"max","400"),G(P,"class","svelte-pi47bm"),G(N,"class","svelte-pi47bm"),Dt(Z,"height","15px"),G(j,"type","text"),G(j,"class","svelte-pi47bm"),G(k,"class","svelte-pi47bm"),G(ae,"type","number"),G(ae,"min","0"),G(ae,"max","15"),G(ae,"class","svelte-pi47bm"),G(be,"class","svelte-pi47bm"),G(re,"type","range"),G(re,"min","1"),G(re,"max","2"),G(re,"class","svelte-pi47bm"),G(F,"class","svelte-pi47bm"),G(xe,"type","range"),G(xe,"min","1"),G(xe,"max","2"),G(xe,"class","svelte-pi47bm"),G(pe,"class","svelte-pi47bm"),Dt(st,"height","15px"),G(r,"class","svelte-pi47bm"),G(L,"class","ok svelte-pi47bm"),G(e,"class","dialog svelte-pi47bm")},m(ze,Ve){Ee(ze,e,Ve),W(e,t),W(e,i),W(e,r),W(r,s),W(s,o),W(s,a),W(s,l),W(l,c),yt(c,n[1]),W(l,h),W(l,u),Oe.block.m(u,Oe.anchor=null),Oe.mount=()=>u,Oe.anchor=null,W(r,f),W(r,p),W(p,d),W(p,m),W(p,b),W(b,A),yt(A,n[2]),W(r,g),W(r,v),W(r,O),W(r,_),W(_,x),W(_,E),W(_,T),W(T,S),yt(S,n[3]),W(r,C),W(r,B),W(B,M),W(B,D),W(B,N),W(N,P),yt(P,n[4]),W(r,X),W(r,Z),W(r,K),W(r,ee),W(ee,J),W(ee,ge),W(ee,k),W(k,j),yt(j,n[5]),W(r,V),W(r,H),W(H,q),W(H,le),W(H,be),W(be,ae),yt(ae,n[6]),W(r,ue),W(r,U),W(U,R),W(U,Q),W(U,F),W(F,re),yt(re,n[7]),W(r,me),W(r,oe),W(oe,he),W(oe,de),W(oe,pe),W(pe,xe),yt(xe,n[8]),W(r,Fe),W(r,st),W(e,I),W(e,L),W(L,te),se||(ce=[Ie(c,"input",n[12]),Ie(A,"input",n[13]),Ie(S,"input",n[14]),Ie(P,"input",n[15]),Ie(j,"input",n[16]),Ie(ae,"input",n[17]),Ie(re,"change",n[18]),Ie(re,"input",n[18]),Ie(xe,"change",n[19]),Ie(xe,"input",n[19]),Ie(L,"click",n[20])],se=!0)},p(ze,[Ve]){n=ze,Ve&2&&c.value!==n[1]&&yt(c,n[1]),d0(Oe,n,Ve),Ve&4&&Vi(A.value)!==n[2]&&yt(A,n[2]),Ve&8&&Vi(S.value)!==n[3]&&yt(S,n[3]),Ve&16&&Vi(P.value)!==n[4]&&yt(P,n[4]),Ve&32&&j.value!==n[5]&&yt(j,n[5]),Ve&64&&Vi(ae.value)!==n[6]&&yt(ae,n[6]),Ve&128&&yt(re,n[7]),Ve&256&&yt(xe,n[8]),Ve&512&&z!==(z=n[9]("dialogs.ok")+"")&&Te(te,z)},i:We,o:We,d(ze){ze&&Se(e),Oe.block.d(),Oe.token=null,Oe=null,se=!1,Xt(ce)}}}function BX(n,e,t){let i,r,s,o,a,l,c,h,u;Le(n,Nf,S=>t(1,i=S)),Le(n,Lf,S=>t(2,r=S)),Le(n,Bf,S=>t(3,s=S)),Le(n,Mf,S=>t(4,o=S)),Le(n,Wf,S=>t(5,a=S)),Le(n,Uf,S=>t(6,l=S)),Le(n,$f,S=>t(7,c=S)),Le(n,Ff,S=>t(8,h=S)),Le(n,Kt,S=>t(9,u=S));let{params:f}=e,{callback:p}=e;const d=new Set(["EB Garamond","Garamond","Arial","Arial Black","Bahnschrift","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Ebrima","Franklin Gothic Medium","Gabriola","Gadugi","Georgia","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","Leelawadee UI","Lucida Console","Lucida Sans Unicode","Malgun Gothic","Marlett","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU-ExtB","Mongolian Baiti","MS Gothic","MV Boli","Myanmar Text","Nirmala UI","Palatino Linotype","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Historic","Segoe UI Emoji","Segoe UI Symbol","SimSun","Sitka","Sylfaen","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Yu Gothic","American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Baskerville","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Copperplate","Courier","Courier New","Didot","DIN Alternate","DIN Condensed","Futura","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","Impact","Lucida Grande","Luminari","Marker Felt","Menlo","Microsoft Sans Serif","Monaco","Noteworthy","Optima","Palatino","Papyrus","Phosphate","Rockwell","Savoye LET","SignPainter","Skia","Snell Roundhand","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","Zapfino"].sort()),m=new Promise(S=>setTimeout(()=>{const C=new Set;for(const B of d.values())window.document.fonts.check(`12px "${B}"`)&&C.add(B);S([...C.values()])}));function b(){i=this.value,Nf.set(i)}function A(){r=Vi(this.value),Lf.set(r)}function g(){s=Vi(this.value),Bf.set(s)}function v(){o=Vi(this.value),Mf.set(o)}function O(){a=this.value,Wf.set(a)}function _(){l=Vi(this.value),Uf.set(l)}function x(){c=Vi(this.value),$f.set(c)}function E(){h=Vi(this.value),Ff.set(h)}const T=()=>p(!0);return n.$$set=S=>{"params"in S&&t(11,f=S.params),"callback"in S&&t(0,p=S.callback)},[p,i,r,s,o,a,l,c,h,u,m,f,b,A,g,v,O,_,x,E,T]}class MX extends xn{constructor(e){super(),_n(this,e,BX,LX,gn,{params:11,callback:0})}}function $X(n){let e,t=n[1]("navbar.file.new")+"",i,r,s,o,a,l=n[1]("navbar.file.newFire")+"",c,h,u,f,p,d,m,b=n[1]("navbar.file.open")+"",A,g,v,O=n[1]("navbar.file.save")+"",_,x,E,T=n[1]("navbar.file.recover")+"",S,C,B;return{c(){e=Y("p"),i=Ae(t),r=fe(),s=Y("hr"),o=fe(),a=Y("p"),c=Ae(l),h=fe(),u=Y("hr"),f=fe(),p=Y("input"),d=fe(),m=Y("label"),A=Ae(b),g=fe(),v=Y("p"),_=Ae(O),x=fe(),E=Y("p"),S=Ae(T),G(e,"class","svelte-zhr99j"),G(s,"class","svelte-zhr99j"),G(a,"class","svelte-zhr99j"),G(u,"class","svelte-zhr99j"),G(p,"type","file"),G(p,"name","open"),G(p,"id","open"),G(p,"accept",".xlgc,.md"),G(p,"class","svelte-zhr99j"),G(m,"for","open"),G(m,"class","svelte-zhr99j"),G(v,"class","svelte-zhr99j"),G(E,"class","svelte-zhr99j")},m(M,D){Ee(M,e,D),W(e,i),Ee(M,r,D),Ee(M,s,D),Ee(M,o,D),Ee(M,a,D),W(a,c),Ee(M,h,D),Ee(M,u,D),Ee(M,f,D),Ee(M,p,D),Ee(M,d,D),Ee(M,m,D),W(m,A),Ee(M,g,D),Ee(M,v,D),W(v,_),Ee(M,x,D),Ee(M,E,D),W(E,S),C||(B=[Ie(e,"click",n[8]),Ie(a,"click",n[9]),Ie(p,"change",n[10]),Ie(v,"click",n[11]),Ie(E,"click",n[12])],C=!0)},p(M,D){D&2&&t!==(t=M[1]("navbar.file.new")+"")&&Te(i,t),D&2&&l!==(l=M[1]("navbar.file.newFire")+"")&&Te(c,l),D&2&&b!==(b=M[1]("navbar.file.open")+"")&&Te(A,b),D&2&&O!==(O=M[1]("navbar.file.save")+"")&&Te(_,O),D&2&&T!==(T=M[1]("navbar.file.recover")+"")&&Te(S,T)},d(M){M&&Se(e),M&&Se(r),M&&Se(s),M&&Se(o),M&&Se(a),M&&Se(h),M&&Se(u),M&&Se(f),M&&Se(p),M&&Se(d),M&&Se(m),M&&Se(g),M&&Se(v),M&&Se(x),M&&Se(E),C=!1,Xt(B)}}}function FX(n){let e,t=n[1]("app.chooseother")+"",i,r,s,o=n[1]("dialogs.shuffle.savecopy")+"",a,l,c;return{c(){e=Y("p"),i=Ae(t),r=fe(),s=Y("p"),a=Ae(o),G(e,"class","svelte-zhr99j"),G(s,"class","svelte-zhr99j")},m(h,u){Ee(h,e,u),W(e,i),Ee(h,r,u),Ee(h,s,u),W(s,a),l||(c=[Ie(e,"click",kR),Ie(s,"click",n[7])],l=!0)},p(h,u){u&2&&t!==(t=h[1]("app.chooseother")+"")&&Te(i,t),u&2&&o!==(o=h[1]("dialogs.shuffle.savecopy")+"")&&Te(a,o)},d(h){h&&Se(e),h&&Se(r),h&&Se(s),l=!1,Xt(c)}}}function Zx(n){let e,t,i=n[1]("navbar.book.title")+"",r,s,o,a,l=n[1]("navbar.book.graph")+"",c,h,u,f=n[1]("navbar.book.shuffle")+"",p,d,m,b=n[1]("navbar.book.sort")+"",A,g,v,O=n[1]("navbar.book.compact")+"",_,x,E,T,S=n[1]("navbar.export.title")+"",C,B,M,D,N=n[1]("navbar.export.docx")+"",P,X,Z,K=n[1]("navbar.export.fodt")+"",ee,J,ge,k=n[1]("navbar.export.html")+"",j,V,H,q=n[1]("navbar.export.xlgc")+"",le,be,ae,ue,U,R=n[1]("navbar.export.others")+"",Q,F,re,me,oe,he,de=n[1]("navbar.export.settings")+"",pe,xe,Fe,st;return{c(){e=Y("div"),t=Y("h1"),r=Ae(i),s=fe(),o=Y("div"),a=Y("p"),c=Ae(l),h=fe(),u=Y("p"),p=Ae(f),d=fe(),m=Y("p"),A=Ae(b),g=fe(),v=Y("p"),_=Ae(O),x=fe(),E=Y("div"),T=Y("h1"),C=Ae(S),B=fe(),M=Y("div"),D=Y("p"),P=Ae(N),X=fe(),Z=Y("p"),ee=Ae(K),J=fe(),ge=Y("p"),j=Ae(k),V=fe(),H=Y("p"),le=Ae(q),be=fe(),ae=Y("hr"),ue=fe(),U=Y("a"),Q=Ae(R),re=fe(),me=Y("hr"),oe=fe(),he=Y("a"),pe=Ae(de),G(t,"class","svelte-zhr99j"),G(a,"class","svelte-zhr99j"),G(u,"class","svelte-zhr99j"),G(m,"class","svelte-zhr99j"),G(v,"class","svelte-zhr99j"),G(o,"class","content svelte-zhr99j"),G(e,"class","svelte-zhr99j"),G(T,"class","svelte-zhr99j"),G(D,"class","svelte-zhr99j"),G(Z,"class","svelte-zhr99j"),G(ge,"class","svelte-zhr99j"),G(H,"class","svelte-zhr99j"),G(ae,"class","svelte-zhr99j"),G(U,"href",F=n[1]("navbar.export.otherslink")),G(U,"target","_blank"),G(U,"rel","noopener"),G(U,"class","svelte-zhr99j"),G(me,"class","svelte-zhr99j"),G(he,"href",xe=n[1]("navbar.export.settingslink")),G(he,"target","_blank"),G(he,"rel","noopener"),G(he,"class","svelte-zhr99j"),G(M,"class","content svelte-zhr99j"),G(E,"class","svelte-zhr99j")},m(I,L){Ee(I,e,L),W(e,t),W(t,r),W(e,s),W(e,o),W(o,a),W(a,c),W(o,h),W(o,u),W(u,p),W(o,d),W(o,m),W(m,A),W(o,g),W(o,v),W(v,_),Ee(I,x,L),Ee(I,E,L),W(E,T),W(T,C),W(E,B),W(E,M),W(M,D),W(D,P),W(M,X),W(M,Z),W(Z,ee),W(M,J),W(M,ge),W(ge,j),W(M,V),W(M,H),W(H,le),W(M,be),W(M,ae),W(M,ue),W(M,U),W(U,Q),W(M,re),W(M,me),W(M,oe),W(M,he),W(he,pe),Fe||(st=[Ie(a,"click",n[13]),Ie(u,"click",n[14]),Ie(m,"click",n[15]),Ie(v,"click",n[16]),Ie(D,"click",n[17]),Ie(Z,"click",n[18]),Ie(ge,"click",n[19]),Ie(H,"click",n[20])],Fe=!0)},p(I,L){L&2&&i!==(i=I[1]("navbar.book.title")+"")&&Te(r,i),L&2&&l!==(l=I[1]("navbar.book.graph")+"")&&Te(c,l),L&2&&f!==(f=I[1]("navbar.book.shuffle")+"")&&Te(p,f),L&2&&b!==(b=I[1]("navbar.book.sort")+"")&&Te(A,b),L&2&&O!==(O=I[1]("navbar.book.compact")+"")&&Te(_,O),L&2&&S!==(S=I[1]("navbar.export.title")+"")&&Te(C,S),L&2&&N!==(N=I[1]("navbar.export.docx")+"")&&Te(P,N),L&2&&K!==(K=I[1]("navbar.export.fodt")+"")&&Te(ee,K),L&2&&k!==(k=I[1]("navbar.export.html")+"")&&Te(j,k),L&2&&q!==(q=I[1]("navbar.export.xlgc")+"")&&Te(le,q),L&2&&R!==(R=I[1]("navbar.export.others")+"")&&Te(Q,R),L&2&&F!==(F=I[1]("navbar.export.otherslink"))&&G(U,"href",F),L&2&&de!==(de=I[1]("navbar.export.settings")+"")&&Te(pe,de),L&2&&xe!==(xe=I[1]("navbar.export.settingslink"))&&G(he,"href",xe)},d(I){I&&Se(e),I&&Se(x),I&&Se(E),Fe=!1,Xt(st)}}}function qx(n){let e,t,i,r,s,o,a,l,c,h,u,f,p,d,m,b,A,g,v,O,_,x,E,T,S,C,B,M;return{c(){e=Y("div"),t=fe(),i=Y("span"),r=Y("div"),s=Y("span"),c=fe(),h=Y("div"),u=Y("span"),m=fe(),b=Y("div"),A=Y("span"),x=fe(),E=Y("div"),T=Y("span"),Dt(e,"margin","auto"),G(s,"aria-label",o=n[1]("navbar.buttons.fullscreen")),G(s,"class",a=Ri("dropbtn "+(n[0]?"icon-resize-small":"icon-resize-full"))+" svelte-zhr99j"),G(r,"title",l=n[1]("navbar.buttons.fullscreen")),G(r,"class","svelte-zhr99j"),G(u,"aria-label",f=n[1]("navbar.buttons.darktheme")),G(u,"class",p=Ri("dropbtn "+(n[6]=="light"?"icon-moon":"icon-sun"))+" svelte-zhr99j"),G(h,"title",d=n[1]("navbar.buttons.darktheme")),G(h,"class","svelte-zhr99j"),G(A,"aria-label",g=n[1]("navbar.buttons.settings")),G(A,"class",v=Ri("dropbtn icon-cog")+" svelte-zhr99j"),G(b,"title",O=n[1]("navbar.buttons.settings")),G(b,"class","svelte-zhr99j"),G(i,"class",_=Ri("nav-buttons "+(n[5]?"display":"hidden"))+" svelte-zhr99j"),G(T,"aria-label",S=n[1]("sidemenu.toggle")),G(T,"class","dropbtn icon-menu svelte-zhr99j"),G(E,"title",C=n[1]("sidemenu.toggle")),G(E,"class","nav-button sidemenu svelte-zhr99j")},m(D,N){Ee(D,e,N),Ee(D,t,N),Ee(D,i,N),W(i,r),W(r,s),W(i,c),W(i,h),W(h,u),W(i,m),W(i,b),W(b,A),Ee(D,x,N),Ee(D,E,N),W(E,T),B||(M=[Ie(s,"click",n[22]),Ie(u,"click",n[23]),Ie(A,"click",n[24]),Ie(T,"click",n[25])],B=!0)},p(D,N){N&2&&o!==(o=D[1]("navbar.buttons.fullscreen"))&&G(s,"aria-label",o),N&1&&a!==(a=Ri("dropbtn "+(D[0]?"icon-resize-small":"icon-resize-full"))+" svelte-zhr99j")&&G(s,"class",a),N&2&&l!==(l=D[1]("navbar.buttons.fullscreen"))&&G(r,"title",l),N&2&&f!==(f=D[1]("navbar.buttons.darktheme"))&&G(u,"aria-label",f),N&64&&p!==(p=Ri("dropbtn "+(D[6]=="light"?"icon-moon":"icon-sun"))+" svelte-zhr99j")&&G(u,"class",p),N&2&&d!==(d=D[1]("navbar.buttons.darktheme"))&&G(h,"title",d),N&2&&g!==(g=D[1]("navbar.buttons.settings"))&&G(A,"aria-label",g),N&2&&O!==(O=D[1]("navbar.buttons.settings"))&&G(b,"title",O),N&32&&_!==(_=Ri("nav-buttons "+(D[5]?"display":"hidden"))+" svelte-zhr99j")&&G(i,"class",_),N&2&&S!==(S=D[1]("sidemenu.toggle"))&&G(T,"aria-label",S),N&2&&C!==(C=D[1]("sidemenu.toggle"))&&G(E,"title",C)},d(D){D&&Se(e),D&&Se(t),D&&Se(i),D&&Se(x),D&&Se(E),B=!1,Xt(M)}}}function WX(n){let e,t,i,r=n[1]("navbar.file.title")+"",s,o,a,l,c,h,u,f=n[1]("navbar.help.title")+"",p,d,m,b,A=n[1]("navbar.help.guide")+"",g,v,O,_,x=n[1]("navbar.help.forum")+"",E,T,S,C=n[1]("navbar.help.about")+"",B,M,D,N;function P(J,ge){return J[2]?FX:$X}let X=P(n),Z=X(n),K=n[3]&&Zx(n),ee=n[3]&&qx(n);return{c(){e=Y("nav"),t=Y("div"),i=Y("h1"),s=Ae(r),o=fe(),a=Y("div"),Z.c(),l=fe(),K&&K.c(),c=fe(),h=Y("div"),u=Y("h1"),p=Ae(f),d=fe(),m=Y("div"),b=Y("a"),g=Ae(A),O=fe(),_=Y("a"),E=Ae(x),T=fe(),S=Y("p"),B=Ae(C),M=fe(),ee&&ee.c(),G(i,"class","svelte-zhr99j"),G(a,"class","content svelte-zhr99j"),G(t,"class","svelte-zhr99j"),G(u,"class","svelte-zhr99j"),G(b,"href",v=n[1]("navbar.help.guidefile")),G(b,"target","_blank"),G(b,"rel","noopener"),G(b,"class","svelte-zhr99j"),G(_,"href","https://www.librogame.net/index.php/forum/topic?id=5182&p=1#p148583"),G(_,"target","_blank"),G(_,"rel","noopener"),G(_,"class","svelte-zhr99j"),G(S,"class","svelte-zhr99j"),G(m,"class","content svelte-zhr99j"),G(h,"class","svelte-zhr99j"),G(e,"class","svelte-zhr99j")},m(J,ge){Ee(J,e,ge),W(e,t),W(t,i),W(i,s),W(t,o),W(t,a),Z.m(a,null),W(e,l),K&&K.m(e,null),W(e,c),W(e,h),W(h,u),W(u,p),W(h,d),W(h,m),W(m,b),W(b,g),W(m,O),W(m,_),W(_,E),W(m,T),W(m,S),W(S,B),W(e,M),ee&&ee.m(e,null),D||(N=Ie(S,"click",n[21]),D=!0)},p(J,[ge]){ge&2&&r!==(r=J[1]("navbar.file.title")+"")&&Te(s,r),X===(X=P(J))&&Z?Z.p(J,ge):(Z.d(1),Z=X(J),Z&&(Z.c(),Z.m(a,null))),J[3]?K?K.p(J,ge):(K=Zx(J),K.c(),K.m(e,c)):K&&(K.d(1),K=null),ge&2&&f!==(f=J[1]("navbar.help.title")+"")&&Te(p,f),ge&2&&A!==(A=J[1]("navbar.help.guide")+"")&&Te(g,A),ge&2&&v!==(v=J[1]("navbar.help.guidefile"))&&G(b,"href",v),ge&2&&x!==(x=J[1]("navbar.help.forum")+"")&&Te(E,x),ge&2&&C!==(C=J[1]("navbar.help.about")+"")&&Te(B,C),J[3]?ee?ee.p(J,ge):(ee=qx(J),ee.c(),ee.m(e,null)):ee&&(ee.d(1),ee=null)},i:We,o:We,d(J){J&&Se(e),Z.d(),K&&K.d(),ee&&ee.d(),D=!1,N()}}}function UX(n,e,t){let i,r,s,o,a,l;Le(n,Kt,D=>t(1,i=D)),Le(n,Wa,D=>t(2,r=D)),Le(n,Mc,D=>t(3,s=D)),Le(n,At,D=>t(4,o=D)),Le(n,Ni,D=>t(5,a=D)),Le(n,Df,D=>t(6,l=D)),O0({S:()=>pr("md",At.flush()),O:()=>document.getElementById("open").click()});let c=!!window.document.fullscreenElement;return document.onfullscreenchange=()=>{t(0,c=!!window.document.fullscreenElement)},[c,i,r,s,o,a,l,()=>pr("md",At.flush()),()=>qn(AX),()=>qn(kX),D=>HV(D.target),()=>pr("md",At.flush()),()=>qn(QX),()=>qn(gX,()=>kB(At.flush())),()=>qn(bX),async()=>{await qn(c0,i("dialogs.confirm"),i("dialogs.chapter.sort"),!0)&&ut().dispatch({changes:{from:0,to:ut().state.doc.length,insert:vB(o)}})},async()=>{await qn(c0,i("dialogs.confirm"),i("dialogs.chapter.compact"),!0)&&ut().dispatch({changes:{from:0,to:ut().state.doc.length,insert:bB(o)}})},()=>pr("docx",At.flush()),()=>pr("fodt",At.flush()),()=>pr("html",At.flush()),()=>pr("xlgc",At.flush()),()=>qn(cX),()=>{window.document.fullscreenElement?window.document.exitFullscreen():window.document.body.requestFullscreen()},()=>Zs(Df,l=l=="light"?"dark":"light",l),()=>qn(MX),()=>Zs(Ni,a=!a,a)]}class zX extends xn{constructor(e){super(),_n(this,e,UX,WX,gn,{})}}function jX(n){let e;return{c(){e=Y("div"),e.innerHTML='<i class="icon-arrows-cw animate-spin svelte-1iv98mm" style="width: fit-content;"></i>'},m(t,i){Ee(t,e,i)},d(t){t&&Se(e)}}}function HX(n){let e;return{c(){e=Y("i"),G(e,"class","icon-ok svelte-1iv98mm"),Dt(e,"color","green")},m(t,i){Ee(t,e,i)},d(t){t&&Se(e)}}}function GX(n){let e,t,i,r,s,o,a,l,c,h,u,f,p,d,m,b,A,g,v,O,_,x,E,T,S,C,B,M,D,N,P;function X(ee,J){if(ee[11]===!0)return HX;if(ee[11]===!1)return jX}let Z=X(n),K=Z&&Z(n);return{c(){e=Y("main"),t=Y("div"),i=Y("h1"),r=Ae(n[9]),s=fe(),o=Y("div"),a=Y("span"),c=fe(),h=Y("div"),u=Y("span"),p=fe(),d=Y("div"),m=Y("span"),A=fe(),g=Y("div"),v=Y("span"),v.innerHTML='[<span class="icon-flash svelte-1iv98mm"></span>]',_=fe(),x=Y("div"),E=Ae("[L]"),S=fe(),C=Y("div"),B=fe(),M=Y("div"),K&&K.c(),G(i,"class","only-desktop svelte-1iv98mm"),G(i,"title",n[9]),G(a,"class","icon-search"),G(o,"title",l=n[10]("editor.buttons.find")),G(o,"class","svelte-1iv98mm"),G(u,"class","icon-ccw"),G(h,"title",f=n[10]("editor.buttons.undo")),G(h,"class","svelte-1iv98mm"),G(m,"class","icon-cw"),G(d,"title",b=n[10]("editor.buttons.redo")),G(d,"class","svelte-1iv98mm"),G(v,"class","link"),G(g,"title",O=n[10]("editor.buttons.quicklink")),G(g,"class","svelte-1iv98mm"),G(x,"title",T=n[10]("editor.buttons.link")),G(x,"class","svelte-1iv98mm"),G(t,"class","toolbar svelte-1iv98mm"),G(C,"class","textarea svelte-1iv98mm"),G(C,"id",x2),G(M,"class","margin svelte-1iv98mm"),G(e,"class","editor svelte-1iv98mm"),G(e,"style",D=`--mage-settings-font: ${n[0].trim()};
 --mage-settings-fontsize: ${Number(String(n[1]).trim())*n[2]/100}pt;
 --mage-settings-pagewidth: ${Number(String(n[3]).trim())*2.85*n[2]/100}pt;
 --mage-settings-linemargin: ${String(n[4]).trim()}px;
 --mage-settings-linespacing: ${String(n[5]).trim()};
 --mage-settings-textalign: ${n[6]=="1"?"left":"justify"};
 ${n[7]=="1"?"--mage-settings-titlehighlight: transparent;":""}`)},m(ee,J){Ee(ee,e,J),W(e,t),W(t,i),W(i,r),W(t,s),W(t,o),W(o,a),W(t,c),W(t,h),W(h,u),W(t,p),W(t,d),W(d,m),W(t,A),W(t,g),W(g,v),W(t,_),W(t,x),W(x,E),W(e,S),W(e,C),W(e,B),W(e,M),K&&K.m(M,null),N||(P=[Ie(i,"click",n[14]),Ie(o,"click",n[15]),Ie(h,"click",n[16]),Ie(d,"click",n[17]),Ie(g,"click",n[13]),Ie(x,"click",n[12])],N=!0)},p(ee,[J]){J&512&&Te(r,ee[9]),J&512&&G(i,"title",ee[9]),J&1024&&l!==(l=ee[10]("editor.buttons.find"))&&G(o,"title",l),J&1024&&f!==(f=ee[10]("editor.buttons.undo"))&&G(h,"title",f),J&1024&&b!==(b=ee[10]("editor.buttons.redo"))&&G(d,"title",b),J&1024&&O!==(O=ee[10]("editor.buttons.quicklink"))&&G(g,"title",O),J&1024&&T!==(T=ee[10]("editor.buttons.link"))&&G(x,"title",T),Z!==(Z=X(ee))&&(K&&K.d(1),K=Z&&Z(ee),K&&(K.c(),K.m(M,null))),J&255&&D!==(D=`--mage-settings-font: ${ee[0].trim()};
 --mage-settings-fontsize: ${Number(String(ee[1]).trim())*ee[2]/100}pt;
 --mage-settings-pagewidth: ${Number(String(ee[3]).trim())*2.85*ee[2]/100}pt;
 --mage-settings-linemargin: ${String(ee[4]).trim()}px;
 --mage-settings-linespacing: ${String(ee[5]).trim()};
 --mage-settings-textalign: ${ee[6]=="1"?"left":"justify"};
 ${ee[7]=="1"?"--mage-settings-titlehighlight: transparent;":""}`)&&G(e,"style",D)},i:We,o:We,d(ee){ee&&Se(e),K&&K.d(),N=!1,Xt(P)}}}function VX(n,e,t){let i,r,s,o,a,l,c,h,u,f,p,d,m,b,A,g;Le(n,Gn,S=>t(18,i=S)),Le(n,Fa,S=>t(19,r=S)),Le(n,wo,S=>t(20,s=S)),Le(n,Wa,S=>t(21,o=S)),Le(n,Nf,S=>t(0,a=S)),Le(n,Lf,S=>t(1,l=S)),Le(n,Mf,S=>t(2,c=S)),Le(n,Bf,S=>t(3,h=S)),Le(n,Uf,S=>t(4,u=S)),Le(n,Wf,S=>t(5,f=S)),Le(n,Ff,S=>t(6,p=S)),Le(n,$f,S=>t(7,d=S)),Le(n,Ni,S=>t(8,m=S)),Le(n,UV,S=>t(9,b=S)),Le(n,Kt,S=>t(10,A=S)),Le(n,l0,S=>t(11,g=S)),RN(()=>{if(o){VV();return}jd.load()});const v=()=>{const{from:S,to:C}=s,B=i.properties.disableShortLinks=="true";ut().dispatch({changes:{from:C,to:C,insert:B?"[](#)":"[]"}}),ut().dispatch({selection:{anchor:C+(B?4:1)},effects:[Ue.scrollIntoView(C)]}),ut().focus()},O=()=>{let{from:S,to:C}=s;const{contentStart:B,end:M}=i.chapters.get(r),D=Au(),N=i.properties.disableShortLinks=="true"?`[](#${Au()})`:`[${Au()}]`;B!=ut().state.doc.lineAt(C).number-1?(ut().dispatch({changes:{from:C,to:C,insert:N}}),C+=N.length):(ut().dispatch({changes:{from:C,to:C,insert:`
`+N}}),C+=N.length+1),df(D,`

### ${D}`),_2(D)<=B&&(C+=`

### ${D}`.length+1),ut().dispatch({selection:{anchor:C},effects:[Ue.scrollIntoView(C)]}),ut().focus()};return O0({K:()=>O(),L:()=>v()}),[a,l,c,h,u,f,p,d,m,b,A,g,v,O,()=>Zs(Ni,m=!m,m),async()=>{gO(ut())},async()=>{cO(ut())},async()=>{hO(ut())}]}class XX extends xn{constructor(e){super(),_n(this,e,VX,GX,gn,{})}}function Kx(n){return typeof n=="object"&&n!=null&&n.nodeType===1}function Jx(n,e){return(!e||n!=="hidden")&&n!=="visible"&&n!=="clip"}function Ym(n,e){if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){var t=getComputedStyle(n,null);return Jx(t.overflowY,e)||Jx(t.overflowX,e)||function(i){var r=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)}(n)}return!1}function Kh(n,e,t,i,r,s,o,a){return s<n&&o>e||s>n&&o<e?0:s<=n&&a<=t||o>=e&&a>=t?s-n-i:o>e&&a<t||s<n&&a>t?o-e+r:0}function ek(n,e){var t=window,i=e.scrollMode,r=e.block,s=e.inline,o=e.boundary,a=e.skipOverflowHiddenElements,l=typeof o=="function"?o:function(ue){return ue!==o};if(!Kx(n))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,h=[],u=n;Kx(u)&&l(u);){if((u=u.parentElement)===c){h.push(u);break}u!=null&&u===document.body&&Ym(u)&&!Ym(document.documentElement)||u!=null&&Ym(u,a)&&h.push(u)}for(var f=t.visualViewport?t.visualViewport.width:innerWidth,p=t.visualViewport?t.visualViewport.height:innerHeight,d=window.scrollX||pageXOffset,m=window.scrollY||pageYOffset,b=n.getBoundingClientRect(),A=b.height,g=b.width,v=b.top,O=b.right,_=b.bottom,x=b.left,E=r==="start"||r==="nearest"?v:r==="end"?_:v+A/2,T=s==="center"?x+g/2:s==="end"?O:x,S=[],C=0;C<h.length;C++){var B=h[C],M=B.getBoundingClientRect(),D=M.height,N=M.width,P=M.top,X=M.right,Z=M.bottom,K=M.left;if(i==="if-needed"&&v>=0&&x>=0&&_<=p&&O<=f&&v>=P&&_<=Z&&x>=K&&O<=X)return S;var ee=getComputedStyle(B),J=parseInt(ee.borderLeftWidth,10),ge=parseInt(ee.borderTopWidth,10),k=parseInt(ee.borderRightWidth,10),j=parseInt(ee.borderBottomWidth,10),V=0,H=0,q="offsetWidth"in B?B.offsetWidth-B.clientWidth-J-k:0,le="offsetHeight"in B?B.offsetHeight-B.clientHeight-ge-j:0;if(c===B)V=r==="start"?E:r==="end"?E-p:r==="nearest"?Kh(m,m+p,p,ge,j,m+E,m+E+A,A):E-p/2,H=s==="start"?T:s==="center"?T-f/2:s==="end"?T-f:Kh(d,d+f,f,J,k,d+T,d+T+g,g),V=Math.max(0,V+m),H=Math.max(0,H+d);else{V=r==="start"?E-P-ge:r==="end"?E-Z+j+le:r==="nearest"?Kh(P,Z,D,ge,j+le,E,E+A,A):E-(P+D/2)+le/2,H=s==="start"?T-K-J:s==="center"?T-(K+N/2)+q/2:s==="end"?T-X+k+q:Kh(K,X,N,J,k+q,T,T+g,g);var be=B.scrollLeft,ae=B.scrollTop;E+=ae-(V=Math.max(0,Math.min(ae+V,B.scrollHeight-D+le))),T+=be-(H=Math.max(0,Math.min(be+H,B.scrollWidth-N+q)))}S.push({el:B,top:V,left:H})}return S}function SR(n){return n===Object(n)&&Object.keys(n).length!==0}function YX(n,e){e===void 0&&(e="auto");var t="scrollBehavior"in document.body.style;n.forEach(function(i){var r=i.el,s=i.top,o=i.left;r.scroll&&t?r.scroll({top:s,left:o,behavior:e}):(r.scrollTop=s,r.scrollLeft=o)})}function ZX(n){return n===!1?{block:"end",inline:"nearest"}:SR(n)?n:{block:"start",inline:"nearest"}}function tk(n,e){var t=n.isConnected||n.ownerDocument.documentElement.contains(n);if(SR(e)&&typeof e.behavior=="function")return e.behavior(t?ek(n,e):[]);if(!!t){var i=ZX(e);return YX(ek(n,i),i.behavior)}}var Zm,ER=function(){return Zm||(Zm="performance"in window?performance.now.bind(performance):Date.now),Zm()};function TR(n){var e=ER(),t=Math.min((e-n.startTime)/n.duration,1),i=n.ease(t),r=n.startX+(n.x-n.startX)*i,s=n.startY+(n.y-n.startY)*i;n.method(r,s),r!==n.x||s!==n.y?requestAnimationFrame(function(){return TR(n)}):n.cb()}function qX(n,e,t,i,r,s){i===void 0&&(i=600),r===void 0&&(r=function(u){return 1+--u*u*u*u*u});var o,a,l,c;o=n,a=n.scrollLeft,l=n.scrollTop,c=function(u,f){n.scrollLeft=Math.ceil(u),n.scrollTop=Math.ceil(f)},TR({scrollable:o,method:c,startTime:ER(),startX:a,startY:l,x:e,y:t,duration:i,ease:r,cb:s})}var KX=function(e){return e&&!e.behavior||e.behavior==="smooth"};function JX(n,e){var t=e||{};return KX(t)?tk(n,{block:t.block,inline:t.inline,scrollMode:t.scrollMode,boundary:t.boundary,behavior:function(r){return Promise.all(r.reduce(function(s,o){var a=o.el,l=o.left,c=o.top,h=a.scrollLeft,u=a.scrollTop;return h===l&&u===c?s:[].concat(s,[new Promise(function(f){return qX(a,l,c,t.duration,t.ease,function(){return f({el:a,left:[h,l],top:[u,c]})})})])},[]))}}):Promise.resolve(tk(n,e))}var eY=JX,nk=eY;function ik(n,e,t){const i=n.slice();return i[23]=e[t],i}function rk(n){let e,t,i,r,s,o,a;function l(){return n[19](n[23])}return{c(){e=Y("div"),t=Y("img"),s=fe(),G(t,"alt",i=n[23]),ms(t.src,r=n[11][n[23]])||G(t,"src",r),G(t,"class","svelte-btwwxd"),G(e,"class","svelte-btwwxd"),ln(e,"selected",n[6][n[23]])},m(c,h){Ee(c,e,h),W(e,t),W(e,s),o||(a=Ie(e,"click",l),o=!0)},p(c,h){n=c,h&64&&ln(e,"selected",n[6][n[23]])},d(c){c&&Se(e),o=!1,a()}}}function tY(n){let e,t,i,r,s,o,a=n[10]("dialogs.chapter.name")+"",l,c,h,u,f,p,d=n[10]("dialogs.chapter.title")+"",m,b,A,g,v,O,_=n[10]("dialogs.chapter.group")+"",x,E,T,S,C,B,M,D,N=n[10]("dialogs.chapter.warnings.duplicate")+"",P,X,Z,K,ee=n[10]("dialogs.chapter.warnings.invalidkey")+"",J,ge,k,j,V=n[10]("dialogs.chapter.warnings.invalidgroup")+"",H,q,le,be=n[10]("dialogs.ok")+"",ae,ue,U,R,Q=n[10]("dialogs.cancel")+"",F,re,me,oe=["final","fixed","death"],he=[];for(let de=0;de<3;de+=1)he[de]=rk(ik(n,oe,de));return{c(){e=Y("div"),t=Y("h3"),i=Ae(n[3]),r=fe(),s=Y("div"),o=Y("span"),l=Ae(a),c=fe(),h=Y("input"),u=fe(),f=Y("div"),p=Y("span"),m=Ae(d),b=fe(),A=Y("input"),g=fe(),v=Y("div"),O=Y("span"),x=Ae(_),E=fe(),T=Y("input"),S=fe(),C=Y("div");for(let de=0;de<3;de+=1)he[de].c();B=fe(),M=Y("p"),D=Y("i"),P=Ae(N),X=fe(),Z=Y("p"),K=Y("i"),J=Ae(ee),ge=fe(),k=Y("p"),j=Y("i"),H=Ae(V),q=fe(),le=Y("button"),ae=Ae(be),U=fe(),R=Y("button"),F=Ae(Q),G(o,"class","svelte-btwwxd"),G(h,"type","text"),G(h,"class","svelte-btwwxd"),ln(h,"error",n[9]||!n[8]),G(s,"class","input svelte-btwwxd"),G(p,"class","svelte-btwwxd"),G(A,"type","text"),G(A,"class","svelte-btwwxd"),G(f,"class","input svelte-btwwxd"),G(O,"class","svelte-btwwxd"),G(T,"type","text"),G(T,"class","svelte-btwwxd"),ln(T,"error",!n[7]),G(v,"class","input svelte-btwwxd"),G(C,"class","flags svelte-btwwxd"),G(D,"class","icon-warning svelte-btwwxd"),Dt(M,"font-size","85%"),G(M,"class","svelte-btwwxd"),ln(M,"hide",!n[9]),G(K,"class","icon-warning svelte-btwwxd"),Dt(Z,"font-size","85%"),G(Z,"class","svelte-btwwxd"),ln(Z,"hide",n[8]),G(j,"class","icon-warning svelte-btwwxd"),Dt(k,"font-size","85%"),G(k,"class","svelte-btwwxd"),ln(k,"hide",n[7]),le.disabled=ue=n[9]||!n[8]||!n[7],G(le,"class","ok"),G(R,"class","cancel"),G(e,"class","dialog svelte-btwwxd")},m(de,pe){Ee(de,e,pe),W(e,t),W(t,i),W(e,r),W(e,s),W(s,o),W(o,l),W(s,c),W(s,h),yt(h,n[1]),W(e,u),W(e,f),W(f,p),W(p,m),W(f,b),W(f,A),yt(A,n[5]),W(e,g),W(e,v),W(v,O),W(O,x),W(v,E),W(v,T),yt(T,n[2]),W(e,S),W(e,C);for(let xe=0;xe<3;xe+=1)he[xe].m(C,null);W(e,B),W(e,M),W(M,D),W(M,P),W(e,X),W(e,Z),W(Z,K),W(Z,J),W(e,ge),W(e,k),W(k,j),W(k,H),W(e,q),W(e,le),W(le,ae),W(e,U),W(e,R),W(R,F),re||(me=[Ie(h,"input",n[16]),Ie(A,"input",n[17]),Ie(T,"input",n[18]),Ie(le,"click",n[20]),Ie(R,"click",n[21])],re=!0)},p(de,[pe]){if(pe&8&&Te(i,de[3]),pe&1024&&a!==(a=de[10]("dialogs.chapter.name")+"")&&Te(l,a),pe&2&&h.value!==de[1]&&yt(h,de[1]),pe&768&&ln(h,"error",de[9]||!de[8]),pe&1024&&d!==(d=de[10]("dialogs.chapter.title")+"")&&Te(m,d),pe&32&&A.value!==de[5]&&yt(A,de[5]),pe&1024&&_!==(_=de[10]("dialogs.chapter.group")+"")&&Te(x,_),pe&4&&T.value!==de[2]&&yt(T,de[2]),pe&128&&ln(T,"error",!de[7]),pe&2112){oe=["final","fixed","death"];let xe;for(xe=0;xe<3;xe+=1){const Fe=ik(de,oe,xe);he[xe]?he[xe].p(Fe,pe):(he[xe]=rk(Fe),he[xe].c(),he[xe].m(C,null))}for(;xe<3;xe+=1)he[xe].d(1)}pe&1024&&N!==(N=de[10]("dialogs.chapter.warnings.duplicate")+"")&&Te(P,N),pe&512&&ln(M,"hide",!de[9]),pe&1024&&ee!==(ee=de[10]("dialogs.chapter.warnings.invalidkey")+"")&&Te(J,ee),pe&256&&ln(Z,"hide",de[8]),pe&1024&&V!==(V=de[10]("dialogs.chapter.warnings.invalidgroup")+"")&&Te(H,V),pe&128&&ln(k,"hide",de[7]),pe&1024&&be!==(be=de[10]("dialogs.ok")+"")&&Te(ae,be),pe&896&&ue!==(ue=de[9]||!de[8]||!de[7])&&(le.disabled=ue),pe&1024&&Q!==(Q=de[10]("dialogs.cancel")+"")&&Te(F,Q)},i:We,o:We,d(de){de&&Se(e),wi(he,de),re=!1,Xt(me)}}}function nY(n,e,t){let i,r,s,o,a;Le(n,Gn,C=>t(15,o=C)),Le(n,Kt,C=>t(10,a=C));let l={death:wb,final:Ab,fixed:_b},{params:c}=e,{callback:h}=e,u,f,p,d,m,b,A;const g=()=>Object.keys(m).filter(C=>m[C]),v=c.subscribe(C=>{t(3,[u,f,p]=C,u,t(1,f),t(4,p)),t(14,A=f),t(5,{title:d="",group:b=""}=p,d,t(2,b));const B=p.flags||[];t(6,m={final:B.includes("final"),fixed:B.includes("fixed"),death:B.includes("death")})});_k(v);function O(){f=this.value,t(1,f)}function _(){d=this.value,t(5,d)}function x(){b=this.value,t(2,b)}const E=C=>t(6,m[C]=!m[C],m),T=()=>h({key:f,value:Oh(jr({},p),{title:d,group:b,flags:g()})}),S=()=>h(!1);return n.$$set=C=>{"params"in C&&t(13,c=C.params),"callback"in C&&t(0,h=C.callback)},n.$$.update=()=>{n.$$.dirty&49154&&t(9,i=f!==A&&o.chapters.has(f)),n.$$.dirty&2&&t(8,r=f===zo(f)),n.$$.dirty&4&&t(7,s=b===zo(b))},[h,f,b,u,p,d,m,s,r,i,a,l,g,c,A,o,O,_,x,E,T,S]}class sk extends xn{constructor(e){super(),_n(this,e,nY,tY,gn,{params:13,callback:0})}}function iY(n){let e,t,i,r,s,o,a,l,c,h,u,f,p,d,m,b,A;return{c(){e=Y("div"),t=Y("div"),s=fe(),o=Y("div"),l=fe(),c=Y("div"),f=fe(),p=Y("div"),G(t,"class","icon-back svelte-1sp2wng"),G(t,"title",i=n[0]("sidemenu.actions.goback")),G(t,"disabled",r=!n[2]),G(o,"class","icon-plus svelte-1sp2wng"),G(o,"title",a=n[0]("sidemenu.actions.add")),G(c,"class","icon-pencil svelte-1sp2wng"),G(c,"title",h=n[0]("sidemenu.actions.edit")),G(c,"disabled",u=n[1]==""),G(p,"class","icon-trash svelte-1sp2wng"),G(p,"title",d=n[0]("sidemenu.actions.delete")),G(p,"disabled",m=n[1]==""),G(e,"class","buttons svelte-1sp2wng")},m(g,v){Ee(g,e,v),W(e,t),W(e,s),W(e,o),W(e,l),W(e,c),W(e,f),W(e,p),b||(A=[Ie(t,"click",z6),Ie(o,"click",n[3]),Ie(c,"click",n[4]),Ie(p,"click",n[5])],b=!0)},p(g,[v]){v&1&&i!==(i=g[0]("sidemenu.actions.goback"))&&G(t,"title",i),v&4&&r!==(r=!g[2])&&G(t,"disabled",r),v&1&&a!==(a=g[0]("sidemenu.actions.add"))&&G(o,"title",a),v&1&&h!==(h=g[0]("sidemenu.actions.edit"))&&G(c,"title",h),v&2&&u!==(u=g[1]=="")&&G(c,"disabled",u),v&1&&d!==(d=g[0]("sidemenu.actions.delete"))&&G(p,"title",d),v&2&&m!==(m=g[1]=="")&&G(p,"disabled",m)},i:We,o:We,d(g){g&&Se(e),b=!1,Xt(A)}}}function rY(n,e,t){let i,r,s,o,a,l;Le(n,Ni,f=>t(6,i=f)),Le(n,Gn,f=>t(7,r=f)),Le(n,Kt,f=>t(0,s=f)),Le(n,Fa,f=>t(1,o=f)),Le(n,At,f=>t(8,a=f)),Le(n,QO,f=>t(2,l=f));const c=async()=>{const f=await qn(sk,s("dialogs.chapter.add"),Au(),{title:"",group:o==""?"":r.chapters.get(o).group||"",flags:[],text:""});if(!f)return;let{key:p,value:d}=f;p=zo(p),d.group=zo(d.group||""),p&&(df(p,Dy({spacelines:2,key:p,title:d.title||"",group:d.group,flags:d.flags||[]})),Zs(Ni,i=!1,i),At.flush(),ya(p))},h=async()=>{const f=o;if(f=="")return;const p=await qn(sk,s("dialogs.chapter.edit"),f,r.chapters.get(f));if(!p)return;let{key:d,value:m}=p;if(d=zo(d),m.group=zo(m.group||""),!d)return;if(d!==f){let O=a.replace(/\[([^\[]*)\](\(\s*#(\w+)\s*\))/g,(..._)=>`[${_[1]}](#${_[3]===f?d:_[3]})`);(!r.properties.disableShortLinks||r.properties.disableShortLinks!=="true")&&(O=O.replace(/\[([^\[]*)\](?!\()/g,(..._)=>`[${_[1]===f?d:_[1]}]`)),ut().dispatch({changes:{from:0,to:ut().state.doc.length,insert:O}})}const b=r.chapters.get(f),A=ut().state.sliceDoc(ut().state.doc.line(b.contentStart+2).from,ut().state.doc.line(b.contentEnd+2).to).split(`
`).filter(O=>!(O.includes("[group]:<>")||O.includes("![flag-")||O.includes("![][flag-"))).join(`
`).trim(),g=ut().state.doc.line(b.start).to,v=ut().state.doc.line(b.contentEnd+1).to;ut().dispatch({changes:{from:g,to:v,insert:""}}),At.flush(),df(d,Dy({spacelines:2,key:d,title:m.title||"",group:m.group,flags:m.flags||[],content:A})),At.flush(),ya(d),Zs(Ni,i=!1,i)},u=async()=>{const f=o;if(f!=""&&await qn(c0,s("dialogs.confirm"),s("dialogs.chapter.delete").replace("%1",f))){const p=r.chapters.get(f),d=ut().state.doc.line(p.start).to,m=ut().state.doc.line(p.contentEnd+1).to;ut().dispatch({changes:{from:d,to:m,insert:""}}),Zs(Ni,i=!1,i),ut().focus()}};return O0({R:()=>c(),E:()=>h(),D:()=>u()}),[s,o,l,c,h,u]}class sY extends xn{constructor(e){super(),_n(this,e,rY,iY,gn,{})}}function ok(n,e,t){const i=n.slice();return i[15]=e[t],i}function ak(n,e,t){const i=n.slice();return i[18]=e[t],i}function lk(n,e,t){const i=n.slice();return i[15]=e[t][0],i[21]=e[t][1],i}function ck(n,e,t){const i=n.slice();return i[18]=e[t],i}function hk(n,e,t){const i=n.slice();return i[26]=e[t],i}function uk(n){let e,t=n[26]+"",i,r;return{c(){e=Y("option"),i=Ae(t),e.__value=r=n[26],e.value=e.__value},m(s,o){Ee(s,e,o),W(e,i)},p(s,o){o&8&&t!==(t=s[26]+"")&&Te(i,t),o&8&&r!==(r=s[26])&&(e.__value=r,e.value=e.__value)},d(s){s&&Se(e)}}}function fk(n){let e,t,i;return{c(){e=Y("img"),ms(e.src,t=n[7][n[18]])||G(e,"src",t),G(e,"alt",i=n[18])},m(r,s){Ee(r,e,s)},p(r,s){s&16&&!ms(e.src,t=r[7][r[18]])&&G(e,"src",t),s&16&&i!==(i=r[18])&&G(e,"alt",i)},d(r){r&&Se(e)}}}function dk(n){let e,t=n[15]+"",i,r,s,o=(n[21].title||"")+"",a,l,c,h,u=n[8](n[15],n[21])+"",f,p,d=n[9](n[15],n[21])+"",m,b,A,g=n[21].flags||[],v=[];for(let _=0;_<g.length;_+=1)v[_]=fk(ck(n,g,_));function O(){return n[12](n[15])}return{c(){e=Y("li"),i=Ae(t),r=fe(),s=Y("b"),a=Ae(o),l=fe();for(let _=0;_<v.length;_+=1)v[_].c();c=fe(),h=Y("span"),f=fe(),p=Y("span"),m=fe(),G(s,"class","svelte-a1f00d"),G(h,"class","errors svelte-a1f00d"),G(p,"class","errors svelte-a1f00d"),G(e,"class","svelte-a1f00d"),ln(e,"selected",n[15]===n[2])},m(_,x){Ee(_,e,x),W(e,i),W(e,r),W(e,s),W(s,a),W(e,l);for(let E=0;E<v.length;E+=1)v[E].m(e,null);W(e,c),W(e,h),h.innerHTML=u,W(e,f),W(e,p),p.innerHTML=d,W(e,m),b||(A=Ie(e,"click",O),b=!0)},p(_,x){if(n=_,x&16&&t!==(t=n[15]+"")&&Te(i,t),x&16&&o!==(o=(n[21].title||"")+"")&&Te(a,o),x&144){g=n[21].flags||[];let E;for(E=0;E<g.length;E+=1){const T=ck(n,g,E);v[E]?v[E].p(T,x):(v[E]=fk(T),v[E].c(),v[E].m(e,c))}for(;E<v.length;E+=1)v[E].d(1);v.length=g.length}x&16&&u!==(u=n[8](n[15],n[21])+"")&&(h.innerHTML=u),x&16&&d!==(d=n[9](n[15],n[21])+"")&&(p.innerHTML=d),x&20&&ln(e,"selected",n[15]===n[2])},d(_){_&&Se(e),wi(v,_),b=!1,A()}}}function pk(n){let e,t,i;return{c(){e=Y("img"),ms(e.src,t=n[7][n[18]])||G(e,"src",t),G(e,"alt",i=n[18])},m(r,s){Ee(r,e,s)},p(r,s){s&10&&!ms(e.src,t=r[7][r[18]])&&G(e,"src",t),s&10&&i!==(i=r[18])&&G(e,"alt",i)},d(r){r&&Se(e)}}}function mk(n){let e,t=n[15]+"",i,r,s,o=(n[3].chapters.get(n[15]).title||"")+"",a,l,c,h,u,f=n[3].chapters.get(n[15]).flags||[],p=[];for(let m=0;m<f.length;m+=1)p[m]=pk(ak(n,f,m));function d(){return n[13](n[15])}return{c(){e=Y("li"),i=Ae(t),r=fe(),s=Y("b"),a=Ae(o),l=fe();for(let m=0;m<p.length;m+=1)p[m].c();c=fe(),G(s,"class","svelte-a1f00d"),G(e,"class","svelte-a1f00d"),ln(e,"selected",n[15]===n[2])},m(m,b){Ee(m,e,b),W(e,i),W(e,r),W(e,s),W(s,a),W(e,l);for(let A=0;A<p.length;A+=1)p[A].m(e,null);W(e,c),h||(u=Ie(e,"click",d),h=!0)},p(m,b){if(n=m,b&2&&t!==(t=n[15]+"")&&Te(i,t),b&10&&o!==(o=(n[3].chapters.get(n[15]).title||"")+"")&&Te(a,o),b&138){f=n[3].chapters.get(n[15]).flags||[];let A;for(A=0;A<f.length;A+=1){const g=ak(n,f,A);p[A]?p[A].p(g,b):(p[A]=pk(g),p[A].c(),p[A].m(e,c))}for(;A<p.length;A+=1)p[A].d(1);p.length=f.length}b&6&&ln(e,"selected",n[15]===n[2])},d(m){m&&Se(e),wi(p,m),h=!1,u()}}}function oY(n){let e,t,i,r,s,o,a,l,c=n[6]("sidemenu.allgroup")+"",h,u,f=n[6]("sidemenu.allgrouperrors")+"",p,d,m=n[6]("sidemenu.allgrouporphanlinks")+"",b,A,g,v,O,_,x,E=n[6]("sidemenu.linkshere")+"",T,S,C,B,M,D,N,P,X,Z,K=[...n[3].groups],ee=[];for(let V=0;V<K.length;V+=1)ee[V]=uk(hk(n,K,V));g=new sY({});let J=n[4],ge=[];for(let V=0;V<J.length;V+=1)ge[V]=dk(lk(n,J,V));let k=n[1],j=[];for(let V=0;V<k.length;V+=1)j[V]=mk(ok(n,k,V));return{c(){e=Y("div"),i=fe(),r=Y("aside"),s=Y("h1"),o=Y("span"),a=Y("select"),l=Y("option"),h=Ae(c),u=Y("option"),p=Ae(f),d=Y("option"),b=Ae(m);for(let V=0;V<ee.length;V+=1)ee[V].c();A=fe(),Jr(g.$$.fragment),v=fe(),O=Y("ul");for(let V=0;V<ge.length;V+=1)ge[V].c();_=fe(),x=Y("h1"),T=Ae(E),S=fe(),C=Ae(n[2]),B=Ae(":"),M=fe(),D=Y("ul");for(let V=0;V<j.length;V+=1)j[V].c();G(e,"class",t=Ri(`mask ${n[5]?"foreground":""}`)+" svelte-a1f00d"),l.__value="allgroupidtag",l.value=l.__value,u.__value="allgrouperrorsidtag",u.value=u.__value,d.__value="allgrouporphanlinksidtag",d.value=d.__value,G(a,"class","svelte-a1f00d"),n[0]===void 0&&jl(()=>n[11].call(a)),G(o,"class","select-dropdown"),G(s,"class","svelte-a1f00d"),G(O,"class","chapters svelte-a1f00d"),G(x,"class","svelte-a1f00d"),G(D,"class","links-here svelte-a1f00d"),G(r,"class",N=Ri(n[5]?"foreground":"")+" svelte-a1f00d")},m(V,H){Ee(V,e,H),Ee(V,i,H),Ee(V,r,H),W(r,s),W(s,o),W(o,a),W(a,l),W(l,h),W(a,u),W(u,p),W(a,d),W(d,b);for(let q=0;q<ee.length;q+=1)ee[q].m(a,null);_u(a,n[0]),W(r,A),wr(g,r,null),W(r,v),W(r,O);for(let q=0;q<ge.length;q+=1)ge[q].m(O,null);W(r,_),W(r,x),W(x,T),W(x,S),W(x,C),W(x,B),W(r,M),W(r,D);for(let q=0;q<j.length;q+=1)j[q].m(D,null);P=!0,X||(Z=[Ie(e,"click",n[10]),Ie(a,"change",n[11])],X=!0)},p(V,[H]){if((!P||H&32&&t!==(t=Ri(`mask ${V[5]?"foreground":""}`)+" svelte-a1f00d"))&&G(e,"class",t),(!P||H&64)&&c!==(c=V[6]("sidemenu.allgroup")+"")&&Te(h,c),(!P||H&64)&&f!==(f=V[6]("sidemenu.allgrouperrors")+"")&&Te(p,f),(!P||H&64)&&m!==(m=V[6]("sidemenu.allgrouporphanlinks")+"")&&Te(b,m),H&8){K=[...V[3].groups];let q;for(q=0;q<K.length;q+=1){const le=hk(V,K,q);ee[q]?ee[q].p(le,H):(ee[q]=uk(le),ee[q].c(),ee[q].m(a,null))}for(;q<ee.length;q+=1)ee[q].d(1);ee.length=K.length}if(H&9&&_u(a,V[0]),H&916){J=V[4];let q;for(q=0;q<J.length;q+=1){const le=lk(V,J,q);ge[q]?ge[q].p(le,H):(ge[q]=dk(le),ge[q].c(),ge[q].m(O,null))}for(;q<ge.length;q+=1)ge[q].d(1);ge.length=J.length}if((!P||H&64)&&E!==(E=V[6]("sidemenu.linkshere")+"")&&Te(T,E),(!P||H&4)&&Te(C,V[2]),H&142){k=V[1];let q;for(q=0;q<k.length;q+=1){const le=ok(V,k,q);j[q]?j[q].p(le,H):(j[q]=mk(le),j[q].c(),j[q].m(D,null))}for(;q<j.length;q+=1)j[q].d(1);j.length=k.length}(!P||H&32&&N!==(N=Ri(V[5]?"foreground":"")+" svelte-a1f00d"))&&G(r,"class",N)},i(V){P||(Pn(g.$$.fragment,V),P=!0)},o(V){ti(g.$$.fragment,V),P=!1},d(V){V&&Se(e),V&&Se(i),V&&Se(r),wi(ee,V),Ar(g),wi(ge,V),wi(j,V),X=!1,Xt(Z)}}}function aY(n,e,t){let i,r,s,o,a,l;Le(n,Fa,A=>t(2,s=A)),Le(n,Gn,A=>t(3,o=A)),Le(n,Ni,A=>t(5,a=A)),Le(n,Kt,A=>t(6,l=A));const c={death:wb,final:Ab,fixed:_b};let h="allgroupidtag";const u=(A,g)=>{const v=o.linksToChapter.get(A),O=v&&v.size>0,_=g.links&&g.links.size>0||g.flags&&g.flags.length>0;return g.links&&[...g.links].some(x=>!o.chapters.has(x)),(O?"":'<i class="icon-help"></i>')+(O&&_?"":'<i class="icon-right"></i>')+(_?"":'<i class="icon-help"></i>')},f=(A,g)=>g.links&&[...g.links].some(O=>!o.chapters.has(O))?'<b>[</b><i class="icon-help"></i><b>]</b>':"",p=()=>Zs(Ni,a=!1,a);function d(){h=Ak(this),t(0,h),t(3,o)}const m=A=>ya(A),b=A=>ya(A);return n.$$.update=()=>{n.$$.dirty&4&&(s!=""?(async()=>{await ea();try{nk(document.querySelector("aside ul.chapters li.selected"),{behavior:"smooth",scrollMode:"if-needed"})}catch{}})():(async()=>{await ea();try{nk(document.querySelector("aside ul.chapters li"),{behavior:"smooth",scrollMode:"if-needed"})}catch{}})()),n.$$.dirty&9&&([...o.groups,"allgroupidtag","allgrouperrorsidtag","allgrouporphanlinksidtag"].includes(h)||t(0,h="allgroupidtag")),n.$$.dirty&9&&t(4,i=[...o.chapters].filter(([A,g])=>{if(!h||h=="allgroupidtag")return!0;if(h=="allgrouperrorsidtag"){const O=o.linksToChapter.get(A),_=O&&O.size>0,x=g.links&&g.links.size>0||g.flags&&g.flags.length>0;return!_||!x}if(h=="allgrouporphanlinksidtag")return g.links&&[...g.links].some(_=>!o.chapters.has(_));const v=g.group;return v&&v==h})),n.$$.dirty&12&&t(1,r=[...o.linksToChapter.get(s)||new Set])},[h,r,s,o,i,a,l,c,u,f,p,d,m,b]}class lY extends xn{constructor(e){super(),_n(this,e,aY,oY,gn,{})}}function gk(n,e,t){const i=n.slice();return i[8]=e[t],i}function cY(n){let e,t,i,r,s,o,a,l=n[3]("app.openlocal")+"",c,h,u,f,p,d,m,b,A,g={ctx:n,current:null,token:null,hasCatch:!0,pending:pY,then:fY,catch:uY,value:11,error:12};f0(window.appGetVersion(),g);let v=n[2],O=[];for(let _=0;_<v.length;_+=1)O[_]=yk(gk(n,v,_));return{c(){e=Y("div"),t=Y("div"),i=Y("img"),s=fe(),o=Y("div"),a=Y("button"),c=Ae(l),h=Y("br"),u=fe(),g.block.c(),f=fe(),p=Y("div");for(let _=0;_<O.length;_+=1)O[_].c();d=fe(),m=Y("p"),m.textContent=`Magebook editor - v ${br.version}`,ms(i.src,r="./static/img/logo.png")||G(i,"src",r),G(i,"alt","logo"),G(i,"class","svelte-6rjfbb"),G(a,"class","ok"),Dt(o,"margin-left","50px"),Dt(t,"display","flex"),Dt(t,"align-items","center"),Dt(t,"margin-top","20px"),G(p,"class","card-container svelte-6rjfbb"),G(e,"class","dialog-container svelte-6rjfbb")},m(_,x){Ee(_,e,x),W(e,t),W(t,i),W(t,s),W(t,o),W(o,a),W(a,c),W(o,h),W(o,u),g.block.m(o,g.anchor=null),g.mount=()=>o,g.anchor=null,W(e,f),W(e,p);for(let E=0;E<O.length;E+=1)O[E].m(p,null);W(e,d),W(e,m),b||(A=Ie(a,"click",n[4]),b=!0)},p(_,x){if(n=_,x&8&&l!==(l=n[3]("app.openlocal")+"")&&Te(c,l),d0(g,n,x),x&4){v=n[2];let E;for(E=0;E<v.length;E+=1){const T=gk(n,v,E);O[E]?O[E].p(T,x):(O[E]=yk(T),O[E].c(),O[E].m(p,null))}for(;E<O.length;E+=1)O[E].d(1);O.length=v.length}},d(_){_&&Se(e),g.block.d(),g.token=null,g=null,wi(O,_),b=!1,A()}}}function hY(n){let e,t,i,r,s;return{c(){e=Y("div"),t=Y("div"),i=fe(),r=Y("p"),s=Ae(n[1]),G(t,"class","spinner-1 svelte-6rjfbb"),G(e,"class","dialog-container svelte-6rjfbb")},m(o,a){Ee(o,e,a),W(e,t),W(e,i),W(e,r),W(r,s)},p(o,a){a&2&&Te(s,o[1])},d(o){o&&Se(e)}}}function uY(n){let e,t=n[12].message+"",i;return{c(){e=Y("p"),i=Ae(t),Dt(e,"color","red")},m(r,s){Ee(r,e,s),W(e,i)},p:We,d(r){r&&Se(e)}}}function fY(n){let e,t=n[11]!=br.version&&dY(n);return{c(){t&&t.c(),e=to()},m(i,r){t&&t.m(i,r),Ee(i,e,r)},p(i,r){i[11]!=br.version&&t.p(i,r)},d(i){t&&t.d(i),i&&Se(e)}}}function dY(n){let e,t,i=n[11]+"",r,s,o;return{c(){e=Y("button"),t=Ae("Update to v "),r=Ae(i),G(e,"class","error")},m(a,l){Ee(a,e,l),W(e,t),W(e,r),s||(o=Ie(e,"click",n[6]),s=!0)},p:We,d(a){a&&Se(e),s=!1,o()}}}function pY(n){return{c:We,m:We,p:We,d:We}}function yk(n){let e,t,i,r=(n[8].title||"")+"",s,o,a,l=n[8].path+"",c,h,u,f,p=new Date(n[8].timestamp*1e3).toLocaleDateString()+"",d,m,b,A=new Date(n[8].timestamp*1e3).toLocaleTimeString()+"",g,v,O,_;function x(){return n[7](n[8])}return{c(){e=Y("div"),t=Y("div"),i=Y("div"),s=Ae(r),o=fe(),a=Y("div"),c=Ae(l),h=fe(),u=Y("div"),f=Y("div"),d=Ae(p),m=fe(),b=Y("div"),g=Ae(A),v=fe(),Dt(i,"font-weight","bold"),Dt(t,"flex-grow","1"),G(e,"class","card svelte-6rjfbb")},m(E,T){Ee(E,e,T),W(e,t),W(t,i),W(i,s),W(t,o),W(t,a),W(a,c),W(e,h),W(e,u),W(u,f),W(f,d),W(u,m),W(u,b),W(b,g),W(e,v),O||(_=Ie(e,"click",x),O=!0)},p(E,T){n=E,T&4&&r!==(r=(n[8].title||"")+"")&&Te(s,r),T&4&&l!==(l=n[8].path+"")&&Te(c,l),T&4&&p!==(p=new Date(n[8].timestamp*1e3).toLocaleDateString()+"")&&Te(d,p),T&4&&A!==(A=new Date(n[8].timestamp*1e3).toLocaleTimeString()+"")&&Te(g,A)},d(E){E&&Se(e),O=!1,_()}}}function mY(n){let e;function t(s,o){return s[0]?hY:cY}let i=t(n),r=i(n);return{c(){r.c(),e=to()},m(s,o){r.m(s,o),Ee(s,e,o)},p(s,[o]){i===(i=t(s))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},i:We,o:We,d(s){r.d(s),s&&Se(e)}}}function gY(n,e,t){let i,r;Le(n,xR,u=>t(5,i=u)),Le(n,Kt,u=>t(3,r=u));let s=!1,o="Updating";const a=async()=>{Kr.set(await window.dialogFile(r("app.openlocal")))};let l=[];const c=async()=>{t(0,s=!0),t(1,o=await window.appUpdate())},h=u=>Kr.set(u.path);return n.$$.update=()=>{if(n.$$.dirty&32){let u=[];i&&(Object.entries(i).forEach(([f,p])=>{const d=JSON.parse(p.Data);u.push({path:decodeURIComponent(f),title:d.title,timestamp:p.Timestamp})}),t(2,l=u.sort((f,p)=>p.timestamp-f.timestamp)))}},[s,o,l,r,a,i,c,h]}class yY extends xn{constructor(e){super(),_n(this,e,gY,mY,gn,{})}}const{document:Ok,window:OY}=DN;function bY(n){let e,t,i,r,s,o,a,l,c,h=!n[3]&&bk(n);return t=new cB({}),r=new zX({}),o=new lY({}),l=new XX({}),{c(){h&&h.c(),e=fe(),Jr(t.$$.fragment),i=fe(),Jr(r.$$.fragment),s=fe(),Jr(o.$$.fragment),a=fe(),Jr(l.$$.fragment)},m(u,f){h&&h.m(u,f),Ee(u,e,f),wr(t,u,f),Ee(u,i,f),wr(r,u,f),Ee(u,s,f),wr(o,u,f),Ee(u,a,f),wr(l,u,f),c=!0},p(u,f){u[3]?h&&(h.d(1),h=null):h?h.p(u,f):(h=bk(u),h.c(),h.m(e.parentNode,e))},i(u){c||(Pn(t.$$.fragment,u),Pn(r.$$.fragment,u),Pn(o.$$.fragment,u),Pn(l.$$.fragment,u),c=!0)},o(u){ti(t.$$.fragment,u),ti(r.$$.fragment,u),ti(o.$$.fragment,u),ti(l.$$.fragment,u),c=!1},d(u){h&&h.d(u),u&&Se(e),Ar(t,u),u&&Se(i),Ar(r,u),u&&Se(s),Ar(o,u),u&&Se(a),Ar(l,u)}}}function vY(n){let e,t;return e=new yY({}),{c(){Jr(e.$$.fragment)},m(i,r){wr(e,i,r),t=!0},p:We,i(i){t||(Pn(e.$$.fragment,i),t=!0)},o(i){ti(e.$$.fragment,i),t=!1},d(i){Ar(e,i)}}}function bk(n){let e,t,i,r,s,o;return{c(){e=Y("div"),t=Y("div"),i=Y("div"),r=fe(),s=Y("p"),o=Ae(n[4]),G(i,"class","spinner-1"),Dt(s,"color","white"),G(t,"class","dialog"),Dt(t,"text-align","center"),Dt(t,"margin-top","10vh"),G(e,"class","loading-mask svelte-107jblh")},m(a,l){Ee(a,e,l),W(e,t),W(t,i),W(t,r),W(t,s),W(s,o)},p(a,l){l&16&&Te(o,a[4])},d(a){a&&Se(e)}}}function wY(n){let e,t,i,r,s,o,a,l,c;const h=[vY,bY],u=[];function f(p,d){return p[1]&&p[2]==""?0:1}return r=f(n),s=u[r]=h[r](n),{c(){e=new IN(!1),t=to(),i=fe(),s.c(),o=to(),e.a=t},m(p,d){e.m(n[0],Ok.head),W(Ok.head,t),Ee(p,i,d),u[r].m(p,d),Ee(p,o,d),a=!0,l||(c=Ie(OY,"keydown",dB),l=!0)},p(p,[d]){(!a||d&1)&&e.p(p[0]);let m=r;r=f(p),r===m?u[r].p(p,d):(zf(),ti(u[m],1,1,()=>{u[m]=null}),jf(),s=u[r],s?s.p(p,d):(s=u[r]=h[r](p),s.c()),Pn(s,1),s.m(o.parentNode,o))},i(p){a||(Pn(s),a=!0)},o(p){ti(s),a=!1},d(p){Se(t),p&&e.d(),p&&Se(i),u[r].d(p),p&&Se(o),l=!1,c()}}}const Jh="mage-version";function AY(n,e,t){let i,r,s,o,a,l,c,h;Le(n,Kt,f=>t(7,r=f)),Le(n,Gn,f=>t(5,s=f)),Le(n,Df,f=>t(6,o=f)),Le(n,Wa,f=>t(1,a=f)),Le(n,Kr,f=>t(2,l=f)),Le(n,Mc,f=>t(3,c=f)),Le(n,bR,f=>t(4,h=f)),localStorage[Jh]||(localStorage[Jh]=br.version);const u=localStorage[Jh];try{const[f,p]=u.split("."),[d,m]=br.version.split(".");console.log("Checking migration from: ",u," to:",br.version),(f!==d||p!=m)&&qn(fB,r("dialogs.version.title")+br.version,r("dialogs.version."+d+"."+m)+"<br><br>"+r("dialogs.version.text")).then(()=>localStorage[Jh]=br.version)}catch{}return n.$$.update=()=>{if(n.$$.dirty&64){const f=window.document.body;f.className.split(" ").forEach(p=>{p.startsWith("mage-theme-")&&f.classList.remove(p)}),f.classList.add("mage-theme-"+o)}n.$$.dirty&64&&t(0,i=`<style>
  :root {
    color-scheme: ${o=="dark"?"dark":"light"};
  }
  </style>`),n.$$.dirty&32&&(/bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(navigator.userAgent)||s&&s.properties.title&&(document.title=s.properties.title+" - Magebook"))},[i,a,l,c,h,s,o]}class _Y extends xn{constructor(e){super(),_n(this,e,AY,wY,gn,{})}}const xY={confirm:"Confirm?",error:"Error",ok:"Ok",cancel:"Cancel",chapter:{add:"Add chapter",edit:"Edit chapter",delete:"Chapter \u201C%1\u201D will be deleted",exists:"Chapter already exists",sort:"Chapters will be sorted. This will change the book structure permanently.",compact:"Chapters will be renamed so no number will be missing in the middle. This will change the book structure permanently.",name:"Key",title:"Title",group:"Group",warnings:{duplicate:"Another key with same name exists",invalidkey:"Key should contain only alphanumeric characters (a-z,A-Z,0-9)",invalidgroup:"Group should contain only alphanumeric characters (a-z,A-Z,0-9)"}},newbook:{new:"Create a New Book",title:"Title",author:"Author",hint:"You can recover the previous book with <b>File -> Recent sessions</b>"},newfirebook:{new:"Create or load a New Book",book:"Book name",getStarted:`This feature lets you link Magebook with your Google account. After that, you will be able to work on shared documents, like the Google Docs' ones.<br>Get start by linking Magebook to your account. <a target="_blank" href="https://librogamesland.github.io/magebook/index.html#/?id=collaborative-projects">More on the user guide here</a>.`},shuffle:{title:"Shuffle",hint:"Shuffle chapters with numeric key. You may choose to shuffle only chapters belonging to some groups, or to exclude chapters based on their flags. You should save a copy of your book before shuffling.",group:"Group filter",flags:"Exclude flags",savecopy:"Save a copy"},lock:{title:"Warning",text:"Another tab has written changes on this local session. If you overwrite, those changes will be lost. You can open a new session instead, and recover the other session with the <br><b>File -> Recent sessions</b> tool.",new:"Open in new session",overwrite:"Overwrite"},graph:{loading:"Loading graph...",open:"Open in new tab",download:"Download (as .svg)"},version:{title:"New version - ",text:'Discover more on the <a target="_blank" href="https://librogamesland.github.io/magebook/#/?id=changelog">user guide page</a>.',"1.0":"Initial release.","1.1":"Added short links format [number] and 'disableShortLinks: true'.<br>Links to orphan chapters are highlighted in the sidemenu.<br>General restyle.<br>New Website export.<br>Bug fixes.","1.2":"Major internal rewrite.<br>The editor is now powered by Codemirror6 instead of Ace. It should be prettier and more mobile friendly.<br>New setting and export properties such as renameLink, page, textFont,...<br>Now 'Latest sessions' keeps a record of collaborative projects too."}},kY={file:{title:"File",new:"New",newFire:"New collaborative",share:"Share",open:"Open...",save:"Save",recover:"Latest sessions",recoverFire:"Collaborative sessions"},book:{title:"Book",graph:"View graph",shuffle:"Shuffle",sort:"Sort chapters",compact:"Compact chapters"},export:{title:"Export",docx:"Word (.docx)",html:"Website (.html)",fodt:"Libreoffice (.fodt)",xlgc:"LibroGameCreator 3",json:"Json",vuejs:"Vue.js",others:"Others (ebook, Android app, ...)",otherslink:"https://librogamesland.github.io/magebook/index.html#/?id=other-formats",settings:"Export properties",settingslink:"https://librogamesland.github.io/magebook/index.html#/?id=properties"},help:{title:"Help",guide:"User guide",guidefile:"https://librogamesland.github.io/magebook",forum:"Lgl forum",about:"About"},buttons:{fullscreen:"Fullscreen",darktheme:"Toggle dark/light theme"}},SY={toggle:"Toggle sidemenu",chapters:"Chapters",allgroup:"All chapters",allgrouperrors:"Without links from/to",allgrouporphanlinks:"With orphan links",linkshere:"Links to",actions:{goback:"Go back",add:"Add entity (ctrl+R)",edit:"Edit entity (ctrl+E)",delete:"Delete entity (ctrl+D)"}},EY={buttons:{find:"Find (ctrl+F)",undo:"Undo last change (ctrl+Z)",redo:"Redo last change (ctrl+shift+Z)",quicklink:"Link to the first avaiable chapter (ctrl+K)",link:"Add link (ctrl+L)"}},TY={contact:"Contact me",text:"Magebook is a gamebook web editor developed by <b>Luca Fabbian</b> with support of Lgl community."},CY={local:`# Book title
author: Name and Surname


### 1
Chapter example. You may edit this chapter thanks to the buttons on the right sidemenu.
This is a link going to [2]. Links may also look like [Text](#chapter).


### Chapter with a long title {#2}
This is the second chapter. Chapters may include *italic* or **bold** text. <b>Bold</b>, <i>italic</i>, and <u>underline</u> are fine as well. You may add meta text with \` \` like \`TODO: edit this chapter\`.
`,fire:`# %1
author: Name and Surname


### 1
This is a collaborative book stored on your Google account. Many people may edit this book at the same time. Save this page in your browser's bookmarks or share the page url with others - you'll see the book changing in real time.
`},IY={openlocal:"Create or open local file",openfire:"Create or access collaborative book",chooseother:"Choose another book"};var RY={dialogs:xY,navbar:kY,sidemenu:SY,editor:EY,about:TY,books:CY,app:IY};const QY={confirm:"Confermi?",error:"Errore",ok:"Ok",cancel:"Annulla",chapter:{add:"Aggiungi paragrafo",edit:"Modifica paragrafo",delete:"Il paragrafo \u201C%1\u201D verr\xE0 eliminato",exist:"Questo paragrafo esiste gi\xE0",sort:"I paragrafi saranno spostati cos\xEC da rispettare l'ordine di numero.",compact:"I paragrafi verranno rinominati in modo da avere numeri consecutivi, senza buchi in mezzo.",name:"Key",title:"Titolo",group:"Gruppo",warnings:{duplicate:"Esiste un'altro paragrafo con la stessa key!",invalidkey:"Key dovrebbe contenere solo caratteri alfanumerici (a-z, A-Z, 0-9)",invalidgroup:"Gruppo dovrebbe contenere solo caratteri alfanumerici (a-z, A-Z, 0-9)"}},newbook:{new:"Crea un nuovo Libro",title:"Titolo",author:"Autore",hint:"Puoi recuperare il libro precedente da <b>File -> Sessioni recenti</b>"},newfirebook:{new:"Crea o accedi a un Libro Collaborativo",book:"Nome libro",getStarted:'Con questa funzione puoi collegare Magebook al tuo account Google, cos\xEC da creare libri che si possono modificare in simultanea, proprio come i Documenti Google.<br>Prima di iniziare, dovrai collegare Magebook al tuo account <a target="_blank" href="https://librogamesland.github.io/magebook/#/?id=progetti-collaborativi">seguendo questa guida</a>.'},shuffle:{title:"Rimescola",hint:"Rimescola i paragrafi con chiave numerica. Puoi scegliere di mescolare solo i paragrafi che fanno parte di alcuni gruppi, o di escludere i paragrafi con determinati simboli. Per sicurezza, dovresti salvare una copia del libro prima di mescolare.",group:"Filtro gruppi",flags:"Escludi simboli",savecopy:"Salva una copia"},lock:{title:"Attenzione",text:"Un'altra tab ha modificato i dati di questa sessione. Se sovrascrivi, quei cambiamenti verranno persi. Se vuoi mantenere entrambe le versioni, puoi creare una nuova sessione e recuperare quella vecchia con <br><b>File -> Sessioni recenti</b>.",new:"Apri nuova sessione",overwrite:"Sovrascrivi"},graph:{loading:"Caricamento grafo...",open:"Apri un una nuova pagina",download:"Download (immagine .svg)"},version:{title:"Nuova versione - ",text:'Scopri di pi\xF9 nella <a ref="_blank" href="https://librogamesland.github.io/magebook/#/?id=versioni">guida</a>.',"1.0":"Versione iniziale.","1.1":"Aggiunto formato link corto [numero] e opzione 'disableShortLinks: true'.<br>I link a paragrafi inesistenti vengono segnalati nel menu laterale.<br>Restyle dell'interfaccia.<br>Aggiunta esportazione sito web.<br>Correzioni varie.","1.2":"Ristrutturazione massiccia del codice interno.<br>L'editor adesso \xE8 basato su Codemirror6 anzich\xE9 Ace. Dovrebbe risultare pi\xF9 veloce, bello e pi\xF9 mobile friendly.<br>Nuove impostazioni e Opzioni esportazione come renameLink, page, textFont, ...<br>Adesso 'Sessioni recenti' tiene traccia anche dei progetti collaborativi."}},PY={file:{title:"File",new:"Nuovo",newFire:"Nuovo collaborativo",share:"Condividi",open:"Apri...",save:"Salva",recover:"Sessioni recenti",recoverFire:"Sessioni collaborative"},book:{title:"Libro",graph:"Visualizza grafico",shuffle:"Rimescola",sort:"Riordina paragrafi",compact:"Compatta paragrafi"},export:{title:"Esporta",docx:"Word (.docx)",fodt:"Libreoffice (.fodt)",html:"Sito web (.html)",xlgc:"LibroGameCreator 3",json:"Json",vuejs:"Vue.js",others:"Altri (ebook, app Android, ...)",otherslink:"https://librogamesland.github.io/magebook/index.html#/?id=altri-formati",settings:"Opzioni esportazione",settingslink:"https://librogamesland.github.io/magebook/index.html#/?id=opzioni"},help:{title:"Aiuto",guide:"Guida",guidefile:"https://librogamesland.github.io/magebook",forum:"Forum Lgl",about:"Info"},buttons:{fullscreen:"Schermo intero",darktheme:"Cambia tema scuro/chiaro"}},DY={toggle:"Apri menu laterale",chapters:"Paragrafi",allgroup:"Tutti i paragrafi",allgrouperrors:"Senza entrata/uscita",allgrouporphanlinks:"Con link errati",linkshere:"Link al par.",actions:{goback:"Vai indietro",add:"Aggiungi entit\xE0 (ctrl+R)",edit:"Modifica entit\xE0 (ctrl+E)",delete:"Elimina entit\xE0 (ctrl+D)"}},NY={buttons:{find:"Cerca (ctrl+F)",undo:"Annulla ultimo cambiamento (ctrl+Z)",redo:"Ripristina ultimo cambiamento (ctrl+shift+Z)",quicklink:"Link al primo paragrafo disponibile (ctrl+K)",link:"Aggiungi link (ctrl+L)"}},LY={contact:"Contattami",text:"Magebook \xE8 un editor di librogame sviluppato da <b>Luca Fabbian</b> con il supporto della community di Lgl."},BY={local:`# Titolo
author: Nome e Cognome


### 1
Esempio di paragrafo. Puoi modificarlo sfruttando i tasti a destra.
Questo \xE8 un link verso il paragrafo [2]. I link possono essere anche nel formato esteso [Testo](#paragrafo), dove Testo \xE8 opzionale.


### Paragrafo con titolo {#2}
Questo \xE8 il secondo paragrafo. I paragrafi possono contenere anche testo in *corsivo* o **grassetto**.  Puoi anche usare <b>grassetto</b>, <i>corsivo</i>, o <u>sottolineato</u>. Aggiungi commenti con \` \`, ad esempio \`NOTA: devo rivedere questo paragrafo\`.
`,fire:`# %1
author: Nome e Cognome


### 1
Questo \xE8 un libro collaborativo memorizzato sul tuo account Google e che pu\xF2 essere modificato da pi\xF9 persone contemporaneamente. Salva questa pagina fra i segnalibri del tuo browser e inviala a chi vuoi, vedrai le modifiche sincronizzate in tempo reale.
`},MY={openlocal:"Crea o apri file",openfire:"Crea o accedi a un libro collaborativo",chooseother:"Apri un altro"};var $Y={dialogs:QY,navbar:PY,sidemenu:DY,editor:NY,about:LY,books:BY,app:MY};const FY=XL().split("-")[0];y0("en",RY);y0("it",$Y);VL({fallbackLocale:"en",initialLocale:FY});"serviceWorker"in navigator&&!kn(Wa)&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js")});new _Y({target:document.body});
